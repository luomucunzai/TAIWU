using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Runtime.CompilerServices;
using System.Text;
using Config;
using Config.ConfigCells;
using Config.ConfigCells.Character;
using Config.EventConfig;
using GameData.ArchiveData;
using GameData.Common;
using GameData.DLC;
using GameData.DLC.FiveLoong;
using GameData.DLC.Shared;
using GameData.DomainEvents;
using GameData.Domains.Adventure;
using GameData.Domains.Building;
using GameData.Domains.Character;
using GameData.Domains.Character.Ai;
using GameData.Domains.Character.Ai.GeneralAction;
using GameData.Domains.Character.Ai.GeneralAction.HealthDemand;
using GameData.Domains.Character.Ai.GeneralAction.StudyDemand;
using GameData.Domains.Character.Ai.GeneralAction.WealthDemand;
using GameData.Domains.Character.Ai.PrioritizedAction;
using GameData.Domains.Character.AvatarSystem;
using GameData.Domains.Character.AvatarSystem.AvatarRes;
using GameData.Domains.Character.Creation;
using GameData.Domains.Character.Display;
using GameData.Domains.Character.Filters;
using GameData.Domains.Character.Relation;
using GameData.Domains.Character.Relation.RelationTree;
using GameData.Domains.Character.SortFilter;
using GameData.Domains.Character.TemporaryModification;
using GameData.Domains.Combat;
using GameData.Domains.CombatSkill;
using GameData.Domains.Extra;
using GameData.Domains.Global;
using GameData.Domains.Information;
using GameData.Domains.Information.Collection;
using GameData.Domains.Item;
using GameData.Domains.Item.Display;
using GameData.Domains.Item.Filters;
using GameData.Domains.LifeRecord;
using GameData.Domains.Map;
using GameData.Domains.Map.Filters;
using GameData.Domains.Merchant;
using GameData.Domains.Organization;
using GameData.Domains.Organization.Display;
using GameData.Domains.Organization.SettlementPrisonRecord;
using GameData.Domains.Organization.SettlementTreasuryRecord;
using GameData.Domains.SpecialEffect;
using GameData.Domains.SpecialEffect.CombatSkill.Xuehoujiao.BreakBodyEffect;
using GameData.Domains.Taiwu;
using GameData.Domains.Taiwu.Profession;
using GameData.Domains.Taiwu.Profession.SkillsData;
using GameData.Domains.Taiwu.VillagerRole;
using GameData.Domains.TaiwuEvent.DisplayEvent;
using GameData.Domains.TaiwuEvent.Enum;
using GameData.Domains.TaiwuEvent.EventManager;
using GameData.Domains.TaiwuEvent.InteractOfLoveEventHelper;
using GameData.Domains.TaiwuEvent.MonthlyEventActions;
using GameData.Domains.TaiwuEvent.MonthlyEventActions.CustomActions;
using GameData.Domains.TutorialChapter;
using GameData.Domains.World;
using GameData.Domains.World.MonthlyEvent;
using GameData.Domains.World.Notification;
using GameData.Domains.World.SectMainStory;
using GameData.Domains.World.TravelingEvent;
using GameData.GameDataBridge;
using GameData.Serializer;
using GameData.Utilities;
using Redzen.Random;

namespace GameData.Domains.TaiwuEvent.EventHelper
{
	// Token: 0x020000D3 RID: 211
	public static class EventHelper
	{
		// Token: 0x06001CD8 RID: 7384 RVA: 0x0018730C File Offset: 0x0018550C
		public static bool CheckRoleBehavior(GameData.Domains.Character.Character character, sbyte behaviorType)
		{
			bool flag = character != null;
			return flag && character.GetBehaviorType() == behaviorType;
		}

		// Token: 0x06001CD9 RID: 7385 RVA: 0x00187334 File Offset: 0x00185534
		public static bool CheckRoleInjured(GameData.Domains.Character.Character character)
		{
			bool flag = character == null;
			return !flag && character.GetInjuries().HasAnyInjury();
		}

		// Token: 0x06001CDA RID: 7386 RVA: 0x00187360 File Offset: 0x00185560
		public static bool CheckRoleInnerInjured(GameData.Domains.Character.Character character)
		{
			bool flag = character == null;
			return !flag && character.GetInjuries().HasAnyInjury(true);
		}

		// Token: 0x06001CDB RID: 7387 RVA: 0x00187390 File Offset: 0x00185590
		public static bool CheckRoleWounded(GameData.Domains.Character.Character character)
		{
			bool flag = character == null;
			return !flag && character.GetInjuries().HasAnyInjury(false);
		}

		// Token: 0x06001CDC RID: 7388 RVA: 0x001873C0 File Offset: 0x001855C0
		public static bool CheckRoleBodyPartInjured(GameData.Domains.Character.Character character, sbyte bodyPartType)
		{
			bool flag = character == null;
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				bool flag2 = bodyPartType <= -1 || bodyPartType > 7;
				if (flag2)
				{
					throw new Exception("invalid body part to check injury !");
				}
				ValueTuple<sbyte, sbyte> tuple = character.GetInjuries().Get(bodyPartType);
				result = (tuple.Item1 > 0 || tuple.Item2 > 0);
			}
			return result;
		}

		// Token: 0x06001CDD RID: 7389 RVA: 0x00187420 File Offset: 0x00185620
		public static bool CheckRoleBodyPartHasTypeInjury(GameData.Domains.Character.Character character, sbyte bodyPartType, bool inner)
		{
			bool flag = character == null;
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				bool flag2 = bodyPartType <= -1 || bodyPartType > 7;
				if (flag2)
				{
					throw new Exception("invalid body part to check injury !");
				}
				ValueTuple<sbyte, sbyte> tuple = character.GetInjuries().Get(bodyPartType);
				result = (inner ? (tuple.Item2 > 0) : (tuple.Item1 > 0));
			}
			return result;
		}

		// Token: 0x06001CDE RID: 7390 RVA: 0x00187484 File Offset: 0x00185684
		public unsafe static bool CheckCharacterIsPoisoning(GameData.Domains.Character.Character character)
		{
			bool flag = character == null;
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				for (int i = 0; i < 6; i++)
				{
					bool flag2 = *(ref character.GetPoisoned().Items.FixedElementField + (IntPtr)i * 4) > 0;
					if (flag2)
					{
						return true;
					}
				}
				result = false;
			}
			return result;
		}

		// Token: 0x06001CDF RID: 7391 RVA: 0x001874D8 File Offset: 0x001856D8
		public static bool CheckCharacterHasDisorderOfQi(GameData.Domains.Character.Character character)
		{
			bool flag = character == null;
			return !flag && character.GetDisorderOfQi() > 0;
		}

		// Token: 0x06001CE0 RID: 7392 RVA: 0x00187500 File Offset: 0x00185700
		public static sbyte GetCharacterInjuryCount(GameData.Domains.Character.Character character)
		{
			Injuries injuries = character.GetInjuries();
			sbyte count = 0;
			for (sbyte i = 0; i < 7; i += 1)
			{
				ValueTuple<sbyte, sbyte> tuple = injuries.Get(i);
				count += tuple.Item1;
				count += tuple.Item2;
			}
			return count;
		}

		// Token: 0x06001CE1 RID: 7393 RVA: 0x00187550 File Offset: 0x00185750
		public unsafe static int GetCharacterPoisonCount(GameData.Domains.Character.Character character)
		{
			PoisonInts poisonInts = *character.GetPoisoned();
			int poisonCount = 0;
			for (int i = 0; i < 6; i++)
			{
				poisonCount += *(ref poisonInts.Items.FixedElementField + (IntPtr)i * 4);
			}
			return poisonCount;
		}

		// Token: 0x06001CE2 RID: 7394 RVA: 0x0018759C File Offset: 0x0018579C
		public unsafe static bool CheckCharacterIsPoisoningByType(GameData.Domains.Character.Character character, sbyte type)
		{
			bool flag = character == null;
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				bool flag2 = *(ref character.GetPoisoned().Items.FixedElementField + (IntPtr)type * 4) > 0;
				result = flag2;
			}
			return result;
		}

		// Token: 0x06001CE3 RID: 7395 RVA: 0x001875DC File Offset: 0x001857DC
		public static bool CheckHasLeftArm(GameData.Domains.Character.Character character)
		{
			bool flag = character == null;
			return !flag && character.GetHaveLeftArm();
		}

		// Token: 0x06001CE4 RID: 7396 RVA: 0x00187600 File Offset: 0x00185800
		public static bool CheckHasRightArm(GameData.Domains.Character.Character character)
		{
			bool flag = character == null;
			return !flag && character.GetHaveRightArm();
		}

		// Token: 0x06001CE5 RID: 7397 RVA: 0x00187624 File Offset: 0x00185824
		public static bool CheckHasLeftLeg(GameData.Domains.Character.Character character)
		{
			bool flag = character == null;
			return !flag && character.GetHaveLeftLeg();
		}

		// Token: 0x06001CE6 RID: 7398 RVA: 0x00187648 File Offset: 0x00185848
		public static bool CheckHasRightLeg(GameData.Domains.Character.Character character)
		{
			bool flag = character == null;
			return !flag && character.GetHaveRightLeg();
		}

		// Token: 0x06001CE7 RID: 7399 RVA: 0x0018766C File Offset: 0x0018586C
		public static bool CheckHasRelationship(GameData.Domains.Character.Character characterA, GameData.Domains.Character.Character characterB, ushort relationType)
		{
			bool flag = characterA == null || characterB == null;
			return !flag && DomainManager.Character.HasRelation(characterA.GetId(), characterB.GetId(), relationType);
		}

		// Token: 0x06001CE8 RID: 7400 RVA: 0x001876A8 File Offset: 0x001858A8
		public static bool CheckRoleDied(GameData.Domains.Character.Character character)
		{
			bool flag = character == null;
			GameData.Domains.Character.Character character2;
			return !flag && !DomainManager.Character.TryGetElement_Objects(character.GetId(), out character2);
		}

		// Token: 0x06001CE9 RID: 7401 RVA: 0x001876DC File Offset: 0x001858DC
		public static bool CheckRoleInfection(GameData.Domains.Character.Character character, sbyte infectionType)
		{
			bool flag = character == null;
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				short featureId = -1;
				bool flag2 = infectionType == 1;
				if (flag2)
				{
					featureId = 217;
				}
				else
				{
					bool flag3 = infectionType == 2;
					if (flag3)
					{
						featureId = 218;
					}
				}
				result = character.GetFeatureIds().Contains(featureId);
			}
			return result;
		}

		// Token: 0x06001CEA RID: 7402 RVA: 0x00187728 File Offset: 0x00185928
		public static bool CheckRoleHasVirginity(GameData.Domains.Character.Character character)
		{
			bool flag = character == null;
			return !flag && character.HasVirginity();
		}

		// Token: 0x06001CEB RID: 7403 RVA: 0x0018774C File Offset: 0x0018594C
		public static bool CheckRoleIsInfertile(GameData.Domains.Character.Character character)
		{
			bool flag = character == null;
			return !flag && character.GetFertility() <= 0;
		}

		// Token: 0x06001CEC RID: 7404 RVA: 0x00187778 File Offset: 0x00185978
		public static bool CheckRoleHasFeature(GameData.Domains.Character.Character character, short templateId)
		{
			bool flag = character == null;
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				List<short> featureIds = character.GetFeatureIds();
				result = featureIds.Contains(templateId);
			}
			return result;
		}

		// Token: 0x06001CED RID: 7405 RVA: 0x001877A4 File Offset: 0x001859A4
		public static bool CheckRoleHasTwoWayAdored(int characterId)
		{
			return DomainManager.Character.HasTwoWayRelation(characterId, 16384);
		}

		// Token: 0x06001CEE RID: 7406 RVA: 0x001877C8 File Offset: 0x001859C8
		public static bool CharacterHasConditionToBeShaving(int charId)
		{
			GameData.Domains.Character.Character character;
			bool flag = DomainManager.Character.TryGetElement_Objects(charId, out character);
			bool result;
			if (flag)
			{
				AvatarData avatarData = character.GetAvatar();
				bool hasHair = avatarData.GetGrowableElementShowingState(0) && (avatarData.FrontHairId != 1 || avatarData.BackHairId != 1);
				bool hasBeard = avatarData.GetGrowableElementShowingState(1) && avatarData.GetGrowableElementShowingAbility(1) && avatarData.Beard1Id != 1;
				bool hasBeard2 = avatarData.GetGrowableElementShowingState(2) && avatarData.GetGrowableElementShowingAbility(2) && avatarData.Beard2Id != 1;
				bool hasEyebrow = avatarData.GetGrowableElementShowingState(6) && avatarData.GetGrowableElementShowingAbility(6) && avatarData.EyebrowId != 1;
				result = (hasHair || hasBeard || hasBeard2 || hasEyebrow);
			}
			else
			{
				result = false;
			}
			return result;
		}

		// Token: 0x06001CEF RID: 7407 RVA: 0x00187898 File Offset: 0x00185A98
		public static bool IsGrowableElementShowing(int charId, sbyte growableElementType)
		{
			GameData.Domains.Character.Character character;
			bool flag = DomainManager.Character.TryGetElement_Objects(charId, out character);
			bool result;
			if (flag)
			{
				AvatarData avatar = character.GetAvatar();
				result = (avatar.GetGrowableElementShowingAbility(growableElementType) && avatar.GetGrowableElementShowingState(growableElementType));
			}
			else
			{
				result = false;
			}
			return result;
		}

		// Token: 0x06001CF0 RID: 7408 RVA: 0x001878DC File Offset: 0x00185ADC
		public static bool CanCharacterBeShaved(int charId)
		{
			GameData.Domains.Character.Character character;
			bool flag = !DomainManager.Character.TryGetElement_Objects(charId, out character);
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				bool flag2 = character.GetPhysiologicalAge() < 16;
				result = !flag2;
			}
			return result;
		}

		// Token: 0x06001CF1 RID: 7409 RVA: 0x0018791C File Offset: 0x00185B1C
		public static bool IsIntelligentCharacter(int charId)
		{
			GameData.Domains.Character.Character character;
			return DomainManager.Character.TryGetElement_Objects(charId, out character) && character.GetCreatingType() == 1;
		}

		// Token: 0x06001CF2 RID: 7410 RVA: 0x0018794C File Offset: 0x00185B4C
		public static bool RoleHasAliveSpouse(int charId)
		{
			return DomainManager.Character.GetAliveSpouse(charId) >= 0;
		}

		// Token: 0x06001CF3 RID: 7411 RVA: 0x00187970 File Offset: 0x00185B70
		public static bool IsCharacterNaked(int charId)
		{
			GameData.Domains.Character.Character character;
			bool flag = !DomainManager.Character.TryGetElement_Objects(charId, out character);
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				bool flag2 = character.GetAgeGroup() != 2;
				result = (!flag2 && DomainManager.Character.GetClothingDisplayId(charId) == 0);
			}
			return result;
		}

		// Token: 0x06001CF4 RID: 7412 RVA: 0x001879BC File Offset: 0x00185BBC
		public static bool CanInteractWithType(GameData.Domains.Character.Character character, sbyte type)
		{
			return OrganizationDomain.CanInteractWithType(character, type);
		}

		// Token: 0x06001CF5 RID: 7413 RVA: 0x001879D8 File Offset: 0x00185BD8
		public static bool IsMeetGender(GameData.Domains.Character.Character character, sbyte gender)
		{
			return character.CheckGenderMeetsRequirement(gender);
		}

		// Token: 0x06001CF6 RID: 7414 RVA: 0x001879F4 File Offset: 0x00185BF4
		public static bool IsOppositeGender(GameData.Domains.Character.Character characterA, GameData.Domains.Character.Character characterB)
		{
			return GameData.Domains.Character.Character.IsOppositeGender(characterA, characterB);
		}

		// Token: 0x06001CF7 RID: 7415 RVA: 0x00187A10 File Offset: 0x00185C10
		public static bool CheckRoleHasGroup(GameData.Domains.Character.Character character)
		{
			bool flag = character == null;
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				List<int> groupCharList = DomainManager.Character.GetGroupSet(EventHelper.Domain.MainThreadDataContext, character.GetId());
				result = (groupCharList.Count > 1);
			}
			return result;
		}

		// Token: 0x06001CF8 RID: 7416 RVA: 0x00187A54 File Offset: 0x00185C54
		public static bool IsParentOfSomeTeammate(GameData.Domains.Character.Character character)
		{
			bool flag = character == null;
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				foreach (int teammateCharId in DomainManager.Taiwu.GetGroupCharIds().GetCollection())
				{
					GameData.Domains.Character.Character teammateChar;
					bool flag2 = DomainManager.Character.TryGetElement_Objects(teammateCharId, out teammateChar);
					if (flag2)
					{
						bool flag3 = teammateChar.GetAgeGroup() == 0;
						if (flag3)
						{
							bool flag4 = DomainManager.Character.HasRelation(teammateCharId, character.GetId(), 1);
							if (flag4)
							{
								return true;
							}
						}
					}
				}
				result = false;
			}
			return result;
		}

		// Token: 0x06001CF9 RID: 7417 RVA: 0x00187B0C File Offset: 0x00185D0C
		public static bool CanCharacterBeKilled(int charId)
		{
			return charId != DomainManager.Character.GetAvoidDeathCharId();
		}

		// Token: 0x06001CFA RID: 7418 RVA: 0x00187B30 File Offset: 0x00185D30
		public static bool IsCharacterAvoidDeath(EventArgBox argBox, int charId)
		{
			bool flag = argBox == null;
			return !flag && argBox.GetInt("ProtectedByWeiQiCharacter") == charId;
		}

		// Token: 0x06001CFB RID: 7419 RVA: 0x00187B5C File Offset: 0x00185D5C
		public static bool IsXiangshuMinion(int charId)
		{
			GameData.Domains.Character.Character character;
			bool flag = !DomainManager.Character.TryGetElement_Objects(charId, out character);
			return !flag && GameData.Domains.Character.Character.IsXiangshuMinion(character.GetTemplateId());
		}

		// Token: 0x06001CFC RID: 7420 RVA: 0x00187B94 File Offset: 0x00185D94
		public static bool IsLocationCanTransferChickenBySpiritualDebt(Location location)
		{
			return DomainManager.Extra.GetAreaSpiritualDebt(location.AreaId) >= 1000;
		}

		// Token: 0x06001CFD RID: 7421 RVA: 0x00187BC0 File Offset: 0x00185DC0
		public static bool IsBuildingAreaHasBuilding(Location location, short buildingTemplateId, int level = -1)
		{
			List<BuildingBlockData> list = DomainManager.Building.GetBuildingBlockList(location);
			bool flag = list == null || list.Count <= 0;
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				foreach (BuildingBlockData buildingBlock in list)
				{
					BuildingBlockDataEx blockDataEx;
					bool flag2 = buildingBlock.TemplateId == buildingTemplateId && buildingBlock.OperationType != 0 && buildingBlock.OperationType != 1 && DomainManager.Extra.TryGetElement_BuildingBlockDataEx((ulong)new BuildingBlockKey(location.AreaId, location.BlockId, buildingBlock.BlockIndex), out blockDataEx);
					if (flag2)
					{
						bool flag3 = level == -1 || (int)blockDataEx.CalcUnlockedLevelCount() == level;
						if (flag3)
						{
							return true;
						}
					}
				}
				result = false;
			}
			return result;
		}

		// Token: 0x06001CFE RID: 7422 RVA: 0x00187CA8 File Offset: 0x00185EA8
		public static bool CharacterIsIntelligentCharacter(int charId)
		{
			GameData.Domains.Character.Character character;
			return DomainManager.Character.TryGetElement_Objects(charId, out character) && character.GetCreatingType() == 1;
		}

		// Token: 0x06001CFF RID: 7423 RVA: 0x00187CD8 File Offset: 0x00185ED8
		public static bool GetCharacterVeilShowState(int charId)
		{
			GameData.Domains.Character.Character character = DomainManager.Character.GetElement_Objects(charId);
			bool flag = character == null;
			if (flag)
			{
				DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(52, 1);
				defaultInterpolatedStringHandler.AppendLiteral("can not find character ");
				defaultInterpolatedStringHandler.AppendFormatted<int>(charId);
				defaultInterpolatedStringHandler.AppendLiteral(" to GetCharacterVeilShowState");
				throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
			}
			return character.GetAvatar().ShowVeil;
		}

		// Token: 0x06001D00 RID: 7424 RVA: 0x00187D44 File Offset: 0x00185F44
		public static bool HasGuard(GameData.Domains.Character.Character character)
		{
			return DomainManager.Character.HasGuard(character.GetId(), character);
		}

		// Token: 0x06001D01 RID: 7425 RVA: 0x00187D68 File Offset: 0x00185F68
		public static bool IsGraveProtected(int graveId)
		{
			Grave grave = DomainManager.Character.GetElement_Graves(graveId);
			return DomainManager.Character.IsGraveProtected(grave);
		}

		// Token: 0x06001D02 RID: 7426 RVA: 0x00187D94 File Offset: 0x00185F94
		public static bool CheckParentAbandonNewbornChild(int motherCharId, int fatherCharId)
		{
			bool createMotherRelation = DomainManager.Character.OrgAndMonkTypeAllowMarriage(motherCharId);
			int spouseId = DomainManager.Character.GetAliveSpouse(fatherCharId);
			bool createFatherRelation = DomainManager.Character.OrgAndMonkTypeAllowMarriage(fatherCharId) && (spouseId < 0 || spouseId == motherCharId);
			GameData.Domains.Character.Character motherChar;
			GameData.Domains.Character.Character fatherChar;
			return (!createMotherRelation || !DomainManager.Character.TryGetElement_Objects(motherCharId, out motherChar) || motherChar.GetKidnapperId() >= 0 || motherChar.IsCompletelyInfected()) && (!createFatherRelation || !DomainManager.Character.TryGetElement_Objects(fatherCharId, out fatherChar) || fatherChar.GetKidnapperId() >= 0 || fatherChar.IsCompletelyInfected());
		}

		// Token: 0x06001D03 RID: 7427 RVA: 0x00187E28 File Offset: 0x00186028
		public static bool HasBloodGrandParentRelations(int charId, int relatedCharId)
		{
			return DomainManager.Character.HasBloodGrandParentRelations(charId, relatedCharId);
		}

		// Token: 0x06001D04 RID: 7428 RVA: 0x00187E48 File Offset: 0x00186048
		public static bool CanStartRelation(int charId, int relatedCharId, ushort relationType)
		{
			bool flag = relationType != 16384 && !RelationTypeHelper.AllowAddingRelation(charId, relatedCharId, relationType);
			if (!flag)
			{
				GameData.Domains.Character.Character selfChar = DomainManager.Character.GetElement_Objects(charId);
				GameData.Domains.Character.Character targetChar = DomainManager.Character.GetElement_Objects(relatedCharId);
				RelatedCharacter selfToTarget = DomainManager.Character.GetRelation(charId, relatedCharId);
				RelatedCharacter targetToSelf = DomainManager.Character.GetRelation(relatedCharId, charId);
				selfToTarget.Favorability = 30000;
				if (relationType <= 512)
				{
					if (relationType == 64)
					{
						return AiHelper.Relation.CanStartRelation_AdoptiveParent(charId, selfToTarget, selfChar.GetCurrAge(), relatedCharId, targetToSelf, targetChar.GetCurrAge());
					}
					if (relationType == 128)
					{
						return AiHelper.Relation.CanStartRelation_AdoptiveChild(charId, selfToTarget, selfChar.GetCurrAge(), relatedCharId, targetToSelf, targetChar.GetCurrAge());
					}
					if (relationType == 512)
					{
						return AiHelper.Relation.CanStartRelation_SwornBrotherOrSister(selfToTarget, selfChar.GetBehaviorType(), targetToSelf, targetChar.GetBehaviorType());
					}
				}
				else if (relationType <= 8192)
				{
					if (relationType == 1024)
					{
						return AiHelper.Relation.CanStartRelation_HusbandOrWife(charId, selfToTarget, selfChar.GetBehaviorType(), relatedCharId, targetToSelf, targetChar.GetBehaviorType());
					}
					if (relationType == 8192)
					{
						return AiHelper.Relation.CanStartRelation_Friend(selfToTarget, selfChar.GetBehaviorType(), targetToSelf, targetChar.GetBehaviorType());
					}
				}
				else
				{
					if (relationType == 16384)
					{
						return AiHelper.Relation.CanStartRelation_BoyOrGirlFriend(selfToTarget, selfChar.GetBehaviorType(), targetToSelf, targetChar.GetBehaviorType());
					}
					if (relationType == 32768)
					{
						return AiHelper.Relation.CanStartRelation_Enemy(selfToTarget, selfChar.GetBehaviorType());
					}
				}
				DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(49, 1);
				defaultInterpolatedStringHandler.AppendLiteral("Unsupported relation type for starting in event: ");
				defaultInterpolatedStringHandler.AppendFormatted<ushort>(relationType);
				throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
			}
			return false;
		}

		// Token: 0x06001D05 RID: 7429 RVA: 0x00188008 File Offset: 0x00186208
		public static bool CanEndRelation(int charId, int relatedCharId, ushort relationType)
		{
			RelatedCharacter selfToTarget = DomainManager.Character.GetRelation(charId, relatedCharId);
			RelatedCharacter targetToSelf = DomainManager.Character.GetRelation(relatedCharId, charId);
			if (relationType <= 8192)
			{
				if (relationType == 512)
				{
					return RelationType.HasRelation(selfToTarget.RelationType, 512);
				}
				if (relationType == 8192)
				{
					return RelationType.HasRelation(selfToTarget.RelationType, 8192);
				}
			}
			else
			{
				if (relationType == 16384)
				{
					return RelationType.HasRelation(selfToTarget.RelationType, 16384) && RelationType.HasRelation(targetToSelf.RelationType, 16384);
				}
				if (relationType == 32768)
				{
					return RelationType.HasRelation(targetToSelf.RelationType, 32768);
				}
			}
			DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(47, 1);
			defaultInterpolatedStringHandler.AppendLiteral("Unsupported relation type for ending in event: ");
			defaultInterpolatedStringHandler.AppendFormatted<ushort>(relationType);
			throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
		}

		// Token: 0x06001D06 RID: 7430 RVA: 0x001880F8 File Offset: 0x001862F8
		public static bool HasAnyRelation(int charId, int relatedCharId, bool includeGeneral)
		{
			RelatedCharacter relation;
			return DomainManager.Character.TryGetRelation(charId, relatedCharId, out relation) && (includeGeneral || relation.RelationType > 0);
		}

		// Token: 0x06001D07 RID: 7431 RVA: 0x0018812C File Offset: 0x0018632C
		public static bool HasNominalBloodRelation(int charId, int relatedCharId)
		{
			RelatedCharacter relation;
			bool flag = !DomainManager.Character.TryGetRelation(charId, relatedCharId, out relation);
			return !flag && DomainManager.Character.HasNominalBloodRelation(charId, relatedCharId, relation);
		}

		// Token: 0x06001D08 RID: 7432 RVA: 0x00188164 File Offset: 0x00186364
		public static bool HasBloodExclusionRelation(int charId, int relatedCharId)
		{
			RelatedCharacter relation;
			bool flag = !DomainManager.Character.TryGetRelation(charId, relatedCharId, out relation);
			return !flag && RelationType.ContainBloodExclusionRelations(relation.RelationType);
		}

		// Token: 0x06001D09 RID: 7433 RVA: 0x0018819C File Offset: 0x0018639C
		public static bool HasRelationBetweenCharacters(int charId, int relatedCharId, ushort relationType)
		{
			return DomainManager.Character.HasRelation(charId, relatedCharId, relationType);
		}

		// Token: 0x06001D0A RID: 7434 RVA: 0x001881BC File Offset: 0x001863BC
		public static bool RelationExistsForCharacter(int charId, ushort relationType, bool aliveOnly)
		{
			HashSet<int> allRelatedCharIds = DomainManager.Character.GetRelatedCharIds(charId, relationType);
			foreach (int relatedCharId in allRelatedCharIds)
			{
				bool flag = !aliveOnly || DomainManager.Character.IsCharacterAlive(relatedCharId);
				if (flag)
				{
					return true;
				}
			}
			return false;
		}

		// Token: 0x06001D0B RID: 7435 RVA: 0x00188238 File Offset: 0x00186438
		public static bool CheckConfessLoveSucceed(int charId, int relatedCharId)
		{
			GameData.Domains.Character.Character selfChar;
			DomainManager.Character.TryGetElement_Objects(charId, out selfChar);
			GameData.Domains.Character.Character relatedChar;
			DomainManager.Character.TryGetElement_Objects(relatedCharId, out relatedChar);
			bool flag = EventHelper.CheckHasRelationship(relatedChar, selfChar, 16384);
			bool result;
			if (flag)
			{
				result = true;
			}
			else
			{
				int successRate = EventHelper.GetConfessLoveSucceedProb(charId, relatedCharId);
				bool success = EventHelper.Domain.MainThreadDataContext.Random.CheckPercentProb(successRate);
				bool flag2 = !success && DomainManager.TaiwuEvent.InteractCheckData != null;
				if (flag2)
				{
					DomainManager.TaiwuEvent.InteractCheckData.FailPhase = 0;
				}
				result = success;
			}
			return result;
		}

		// Token: 0x06001D0C RID: 7436 RVA: 0x001882CC File Offset: 0x001864CC
		public static int GetConfessLoveSucceedProb(int charId, int relatedCharId)
		{
			GameData.Domains.Character.Character selfChar = DomainManager.Character.GetElement_Objects(charId);
			GameData.Domains.Character.Character targetChar = DomainManager.Character.GetElement_Objects(relatedCharId);
			RelatedCharacter selfToTarget = DomainManager.Character.GetRelation(charId, relatedCharId);
			RelatedCharacter targetToSelf = DomainManager.Character.GetRelation(relatedCharId, charId);
			return AiHelper.Relation.GetStartRelationSuccessRate_BoyOrGirlFriend(selfChar, targetChar, selfToTarget, targetToSelf, true);
		}

		// Token: 0x06001D0D RID: 7437 RVA: 0x00188320 File Offset: 0x00186520
		public static bool CheckProposeMarriageSucceed(int charId, int relatedCharId)
		{
			GameData.Domains.Character.Character selfChar = DomainManager.Character.GetElement_Objects(charId);
			GameData.Domains.Character.Character targetChar = DomainManager.Character.GetElement_Objects(relatedCharId);
			RelatedCharacter selfToTarget = DomainManager.Character.GetRelation(charId, relatedCharId);
			RelatedCharacter targetToSelf = DomainManager.Character.GetRelation(relatedCharId, charId);
			int successRate = AiHelper.Relation.GetStartRelationSuccessRate_HusbandOrWife(selfChar, targetChar, selfToTarget, targetToSelf);
			return EventHelper.Domain.MainThreadDataContext.Random.CheckPercentProb(successRate);
		}

		// Token: 0x06001D0E RID: 7438 RVA: 0x00188388 File Offset: 0x00186588
		public unsafe static bool CheckLearnLifeSkillWithInstructionSucceed(GameData.Domains.Character.Character selfChar, short lifeSkillTemplateId)
		{
			Config.LifeSkillItem lifeSkillCfg = LifeSkill.Instance[lifeSkillTemplateId];
			LifeSkillShorts lifeSkillAttainments = *selfChar.GetLifeSkillAttainments();
			LifeSkillShorts lifeSkillQualifications = *selfChar.GetLifeSkillQualifications();
			Personalities personalities = selfChar.GetPersonalities();
			int successRate = GameData.Domains.Character.Character.GetTaughtNewSkillSuccessRate(lifeSkillCfg.Grade, *(ref lifeSkillQualifications.Items.FixedElementField + (IntPtr)lifeSkillCfg.Type * 2), *(ref lifeSkillAttainments.Items.FixedElementField + (IntPtr)lifeSkillCfg.Type * 2), *(ref personalities.Items.FixedElementField + 1));
			return EventHelper.Domain.MainThreadDataContext.Random.CheckPercentProb(successRate);
		}

		// Token: 0x06001D0F RID: 7439 RVA: 0x00188428 File Offset: 0x00186628
		public unsafe static bool CheckLearnCombatSkillWithInstructionSucceed(GameData.Domains.Character.Character selfChar, short combatSkillTemplateId)
		{
			CombatSkillItem combatSkillCfg = Config.CombatSkill.Instance[combatSkillTemplateId];
			CombatSkillShorts combatSkillAttainments = *selfChar.GetCombatSkillAttainments();
			CombatSkillShorts combatSkillQualifications = *selfChar.GetCombatSkillQualifications();
			Personalities personalities = selfChar.GetPersonalities();
			int successRate = GameData.Domains.Character.Character.GetTaughtNewSkillSuccessRate(combatSkillCfg.Grade, *(ref combatSkillQualifications.Items.FixedElementField + (IntPtr)combatSkillCfg.Type * 2), *(ref combatSkillAttainments.Items.FixedElementField + (IntPtr)combatSkillCfg.Type * 2), *(ref personalities.Items.FixedElementField + 1));
			return EventHelper.Domain.MainThreadDataContext.Random.CheckPercentProb(successRate);
		}

		// Token: 0x06001D10 RID: 7440 RVA: 0x001884C8 File Offset: 0x001866C8
		public static void ChangeCombatResources(int charId, sbyte healingCountAdd, sbyte detoxCountAdd)
		{
			CombatResources usableCombatResource = DomainManager.Character.GetUsableCombatResources(charId);
			CombatResources usedCombatResource = DomainManager.Character.GetUsedCombatResources(charId);
			healingCountAdd = (sbyte)Math.Clamp((int)healingCountAdd, (int)(-(int)usedCombatResource.HealingCount), (int)usableCombatResource.HealingCount);
			detoxCountAdd = (sbyte)Math.Clamp((int)detoxCountAdd, (int)(-(int)usedCombatResource.DetoxCount), (int)usableCombatResource.DetoxCount);
			DomainManager.Character.UseCombatResources(EventHelper.Domain.MainThreadDataContext, charId, EHealActionType.Healing, healingCountAdd);
			DomainManager.Character.UseCombatResources(EventHelper.Domain.MainThreadDataContext, charId, EHealActionType.Detox, detoxCountAdd);
		}

		// Token: 0x06001D11 RID: 7441 RVA: 0x0018854A File Offset: 0x0018674A
		public static void RecoverHealCombatResources(int charId)
		{
			DomainManager.Character.RecoverHealCombatResources(EventHelper.Domain.MainThreadDataContext, charId);
		}

		// Token: 0x06001D12 RID: 7442 RVA: 0x00188563 File Offset: 0x00186763
		public static void RecoverDetoxCombatResources(int charId)
		{
			DomainManager.Character.RecoverDetoxCombatResources(EventHelper.Domain.MainThreadDataContext, charId);
		}

		// Token: 0x06001D13 RID: 7443 RVA: 0x0018857C File Offset: 0x0018677C
		public static void RandomChangeEquipmentDurability(GameData.Domains.Character.Character character, sbyte itemType, bool isAdd, float percent)
		{
			DomainManager.Character.RandomChangeEquipmentDurability(EventHelper.Domain.MainThreadDataContext, character, itemType, isAdd, percent);
		}

		// Token: 0x06001D14 RID: 7444 RVA: 0x00188598 File Offset: 0x00186798
		public static bool CheckConfessionLoveOptionIsVisible(int charId)
		{
			bool flag = !EventHelper.CheckMainStoryLineProgress(6);
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				GameData.Domains.Character.Character taiwu = DomainManager.Character.GetElement_Objects(DomainManager.Taiwu.GetTaiwuCharId());
				GameData.Domains.Character.Character character = DomainManager.Character.GetElement_Objects(charId);
				bool flag2 = taiwu == null || character == null;
				if (flag2)
				{
					result = false;
				}
				else
				{
					bool flag3 = EventHelper.CheckRespondLoveOptionIsVisible(charId);
					if (flag3)
					{
						result = false;
					}
					else
					{
						bool flag4 = EventHelper.GetRoleAgeAvailableForLove(taiwu) && EventHelper.GetRoleAgeAvailableForLove(character) && EventHelper.CheckHasRelationship(taiwu, character, 8192);
						if (flag4)
						{
							bool flag5 = EventHelper.CheckHasRelationship(taiwu, character, 16384) && EventHelper.CheckHasRelationship(character, taiwu, 16384);
							if (flag5)
							{
								result = false;
							}
							else
							{
								bool flag6 = EventHelper.CheckHasRelationship(taiwu, character, 2048) || EventHelper.CheckHasRelationship(character, taiwu, 2048);
								if (flag6)
								{
									result = false;
								}
								else
								{
									bool flag7 = EventHelper.HasNominalBloodRelation(taiwu.GetId(), character.GetId());
									if (flag7)
									{
										result = false;
									}
									else
									{
										bool flag8 = EventHelper.HasBloodExclusionRelation(taiwu.GetId(), character.GetId()) && !EventHelper.CheckHasRelationship(taiwu, character, 1024);
										result = !flag8;
									}
								}
							}
						}
						else
						{
							result = false;
						}
					}
				}
			}
			return result;
		}

		// Token: 0x06001D15 RID: 7445 RVA: 0x001886D4 File Offset: 0x001868D4
		public static bool CheckRespondLoveOptionIsVisible(int charId)
		{
			bool flag = !EventHelper.CheckMainStoryLineProgress(6);
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				GameData.Domains.Character.Character character = DomainManager.Character.GetElement_Objects(charId);
				GameData.Domains.Character.Character taiwu = DomainManager.Character.GetElement_Objects(DomainManager.Taiwu.GetTaiwuCharId());
				bool flag2 = taiwu == null || character == null;
				if (flag2)
				{
					result = false;
				}
				else
				{
					bool flag3 = !EventHelper.CheckHasRelationship(character, taiwu, 16384);
					if (flag3)
					{
						result = false;
					}
					else
					{
						bool flag4 = EventHelper.CheckHasRelationship(taiwu, character, 16384) && EventHelper.CheckHasRelationship(character, taiwu, 16384);
						result = !flag4;
					}
				}
			}
			return result;
		}

		// Token: 0x06001D16 RID: 7446 RVA: 0x00188770 File Offset: 0x00186970
		public static bool CheckCharacterNearYixiang(GameData.Domains.Character.Character character)
		{
			Location forceKindLocation = DomainManager.Character.GetForceKindLocation();
			bool flag = character.IsNearbyLocation(forceKindLocation, 3);
			bool result;
			if (flag)
			{
				result = true;
			}
			else
			{
				Location forceRebelLocation = DomainManager.Character.GetForceRebelLocation();
				bool flag2 = character.IsNearbyLocation(forceRebelLocation, 3);
				result = flag2;
			}
			return result;
		}

		// Token: 0x06001D17 RID: 7447 RVA: 0x001887BC File Offset: 0x001869BC
		public static bool CheckCharacterIsXiangshuInfected(GameData.Domains.Character.Character character)
		{
			List<short> featureIds = character.GetFeatureIds();
			return featureIds.Contains(217) || featureIds.Contains(218);
		}

		// Token: 0x06001D18 RID: 7448 RVA: 0x001887FC File Offset: 0x001869FC
		public static bool CheckCharacterIsLegendaryInfected(GameData.Domains.Character.Character character)
		{
			sbyte ownerState = character.GetLegendaryBookOwnerState();
			return ownerState == 1 || ownerState == 2;
		}

		// Token: 0x06001D19 RID: 7449 RVA: 0x0018882C File Offset: 0x00186A2C
		public static bool IsCharacterHealthFull(GameData.Domains.Character.Character character)
		{
			short leftMaxHealth = DomainManager.Character.GetLeftMaxHealth(character.GetId());
			short health = character.GetHealth();
			return leftMaxHealth == health;
		}

		// Token: 0x06001D1A RID: 7450 RVA: 0x0018885C File Offset: 0x00186A5C
		public static bool IsCharacterRefuseAppointment(GameData.Domains.Character.Character character)
		{
			BasePrioritizedAction prevAction;
			return DomainManager.Character.TryGetCharacterPrioritizedAction(character.GetId(), out prevAction) && prevAction.ActionType >= 0 && !string.IsNullOrEmpty(PrioritizedActions.Instance[prevAction.ActionType].RefuseAppointment);
		}

		// Token: 0x06001D1B RID: 7451 RVA: 0x001888AC File Offset: 0x00186AAC
		public static bool IsCharacterMatchAgeGroup(int charId, sbyte ageGroup)
		{
			GameData.Domains.Character.Character character;
			return DomainManager.Character.TryGetElement_Objects(charId, out character) && character.GetAgeGroup() == ageGroup;
		}

		// Token: 0x06001D1C RID: 7452 RVA: 0x001888E4 File Offset: 0x00186AE4
		public static bool CheckStartRelationSucceed(int charIdA, int charIdB, ushort relationType, bool isBothWayRelation = true)
		{
			CharacterDomain characterDomain = DomainManager.Character;
			GameData.Domains.Character.Character characterA;
			GameData.Domains.Character.Character characterB;
			bool flag = !characterDomain.TryGetElement_Objects(charIdA, out characterA) || !characterDomain.TryGetElement_Objects(charIdB, out characterB);
			if (flag)
			{
				DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(35, 2);
				defaultInterpolatedStringHandler.AppendLiteral("Wrong Checking Request Between ");
				defaultInterpolatedStringHandler.AppendFormatted<int>(charIdA);
				defaultInterpolatedStringHandler.AppendLiteral(" & ");
				defaultInterpolatedStringHandler.AppendFormatted<int>(charIdB);
				defaultInterpolatedStringHandler.AppendLiteral("!");
				throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
			}
			bool flag2 = characterA.GetCreatingType() != 1 || characterB.GetCreatingType() != 1;
			bool result;
			if (flag2)
			{
				result = false;
			}
			else
			{
				bool flag3 = charIdB == EventArgBox.TaiwuCharacterId;
				if (flag3)
				{
					result = true;
				}
				else
				{
					RelatedCharacter selfToTarget;
					bool flag4 = !characterDomain.TryGetRelation(charIdA, charIdB, out selfToTarget);
					if (flag4)
					{
						characterDomain.TryCreateGeneralRelation(DomainManager.TaiwuEvent.MainThreadDataContext, characterA, characterB);
						selfToTarget = characterDomain.GetRelation(charIdA, charIdB);
					}
					RelatedCharacter targetToSelf;
					bool flag5 = !characterDomain.TryGetRelation(charIdB, charIdA, out targetToSelf);
					if (flag5)
					{
						characterDomain.TryCreateGeneralRelation(DomainManager.TaiwuEvent.MainThreadDataContext, characterB, characterA);
						targetToSelf = characterDomain.GetRelation(charIdB, charIdA);
					}
					if (relationType <= 1024)
					{
						if (relationType <= 128)
						{
							if (relationType != 64 && relationType != 128)
							{
								goto IL_291;
							}
							return FavorabilityType.GetFavorabilityType(selfToTarget.Favorability) >= 4 && FavorabilityType.GetFavorabilityType(targetToSelf.Favorability) >= 4;
						}
						else if (relationType != 512)
						{
							if (relationType != 1024)
							{
								goto IL_291;
							}
							int successRate = AiHelper.Relation.GetStartRelationSuccessRate_HusbandOrWife(characterA, characterB, selfToTarget, targetToSelf);
							return EventHelper.CheckProbability(successRate);
						}
					}
					else if (relationType <= 8192)
					{
						if (relationType == 2048)
						{
							return true;
						}
						if (relationType != 8192)
						{
							goto IL_291;
						}
					}
					else if (relationType != 16384)
					{
						if (relationType != 32768)
						{
							goto IL_291;
						}
						sbyte behavior = characterB.GetBehaviorType();
						sbyte prob = AiHelper.RelationsRelatedConstants.SeverEnemyNotMutuallyChance[(int)behavior];
						return EventHelper.CheckProbability((int)prob);
					}
					else
					{
						int successRate;
						if (isBothWayRelation)
						{
							successRate = AiHelper.Relation.GetStartRelationSuccessRate_BoyOrGirlFriend(characterA, characterB, selfToTarget, targetToSelf, false);
							return EventHelper.CheckProbability(successRate);
						}
						bool flag6 = EventHelper.CheckHasRelationship(characterB, characterA, 16384);
						if (flag6)
						{
							return false;
						}
						successRate = AiHelper.Relation.GetStartRelationSuccessRate_Adored(characterA, characterB, selfToTarget, targetToSelf);
						return EventHelper.CheckProbability(successRate);
					}
					return true;
					IL_291:
					result = false;
				}
			}
			return result;
		}

		// Token: 0x06001D1D RID: 7453 RVA: 0x00188B8C File Offset: 0x00186D8C
		public static bool CheckEndRelationSucceed(int charIdA, int charIdB, ushort relationType, bool isBothWayRelation = true)
		{
			GameData.Domains.Character.Character characterA;
			GameData.Domains.Character.Character characterB;
			bool flag = !DomainManager.Character.TryGetElement_Objects(charIdA, out characterA) || !DomainManager.Character.TryGetElement_Objects(charIdB, out characterB);
			if (flag)
			{
				DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(35, 2);
				defaultInterpolatedStringHandler.AppendLiteral("Wrong Checking Request Between ");
				defaultInterpolatedStringHandler.AppendFormatted<int>(charIdA);
				defaultInterpolatedStringHandler.AppendLiteral(" & ");
				defaultInterpolatedStringHandler.AppendFormatted<int>(charIdB);
				defaultInterpolatedStringHandler.AppendLiteral("!");
				throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
			}
			bool flag2 = charIdB == EventArgBox.TaiwuCharacterId;
			bool result;
			if (flag2)
			{
				result = true;
			}
			else
			{
				sbyte targetBehaviorType = characterB.GetBehaviorType();
				if (relationType <= 1024)
				{
					if (relationType <= 128)
					{
						if (relationType != 64 && relationType != 128)
						{
							goto IL_154;
						}
						goto IL_113;
					}
					else if (relationType != 512)
					{
						if (relationType != 1024)
						{
							goto IL_154;
						}
						goto IL_113;
					}
				}
				else if (relationType <= 8192)
				{
					if (relationType == 2048)
					{
						goto IL_113;
					}
					if (relationType != 8192)
					{
						goto IL_154;
					}
				}
				else if (relationType != 16384)
				{
					if (relationType != 32768)
					{
						goto IL_154;
					}
					bool targetStillHateSelf = EventHelper.CheckProbability((int)AiHelper.RelationsRelatedConstants.SeverEnemyNotMutuallyChance[(int)targetBehaviorType]);
					return !targetStillHateSelf;
				}
				else
				{
					if (isBothWayRelation)
					{
						bool targetStillLoveSelf = EventHelper.CheckProbability((int)AiHelper.RelationsRelatedConstants.BreakupMutuallyChance[(int)targetBehaviorType]);
						return !targetStillLoveSelf;
					}
					return true;
				}
				return true;
				IL_113:
				return true;
				IL_154:
				result = false;
			}
			return result;
		}

		// Token: 0x06001D1E RID: 7454 RVA: 0x00188CF4 File Offset: 0x00186EF4
		public static bool HasCombatSkillExchangedSpecialWeapon(short skillTemplateId)
		{
			return DomainManager.Extra.HasCombatSkillExchangedSpecialWeapon(EventHelper.Domain.MainThreadDataContext, skillTemplateId);
		}

		// Token: 0x06001D1F RID: 7455 RVA: 0x00188D1C File Offset: 0x00186F1C
		public static bool IsInteractOfLoveInstalled()
		{
			return DlcManager.IsDlcInstalled(2305890UL);
		}

		// Token: 0x06001D20 RID: 7456 RVA: 0x00188D3C File Offset: 0x00186F3C
		public static bool IsGiftFromConchShip1Installed()
		{
			return DlcManager.IsDlcInstalled(2241120UL);
		}

		// Token: 0x06001D21 RID: 7457 RVA: 0x00188D5C File Offset: 0x00186F5C
		public static bool IsGiftFromConchShip2Installed()
		{
			return DlcManager.IsDlcInstalled(2172690UL);
		}

		// Token: 0x06001D22 RID: 7458 RVA: 0x00188D7C File Offset: 0x00186F7C
		public static bool IsFiveLoongDlcInstalled()
		{
			return DlcManager.IsDlcInstalled(2764950UL);
		}

		// Token: 0x06001D23 RID: 7459 RVA: 0x00188D9C File Offset: 0x00186F9C
		public static bool IsHappyNewYear2024Installed()
		{
			return DlcManager.IsDlcInstalled(2764960UL);
		}

		// Token: 0x06001D24 RID: 7460 RVA: 0x00188DBC File Offset: 0x00186FBC
		public static bool IsYearOfSnakeClothInstalled()
		{
			return DlcManager.IsDlcInstalled(3464590UL);
		}

		// Token: 0x06001D25 RID: 7461 RVA: 0x00188DDC File Offset: 0x00186FDC
		public static bool AbleToCricketBattle()
		{
			return EventHelper.AbleToCricketBattleWithGivenLimit(3);
		}

		// Token: 0x06001D26 RID: 7462 RVA: 0x00188DF4 File Offset: 0x00186FF4
		public static bool AbleToCricketBattleWithGivenLimit(int limit)
		{
			return DomainManager.Taiwu.GetTaiwu().GetInventory().Items.Count(delegate(KeyValuePair<ItemKey, int> a)
			{
				ItemBase item = DomainManager.Item.GetBaseItem(a.Key);
				return item.GetItemType() == 11 && item.GetCurrDurability() > 0;
			}) >= limit;
		}

		// Token: 0x06001D27 RID: 7463 RVA: 0x00188E44 File Offset: 0x00187044
		public static bool CharacterHasAnyCricketWager(int charId)
		{
			return DomainManager.Item.NpcHasAnyCricketWager(charId);
		}

		// Token: 0x06001D28 RID: 7464 RVA: 0x00188E64 File Offset: 0x00187064
		public static bool CharacterHasItemMatchFilterRule(int charId, short filterRuleTemplateId, bool searchEquipment = false)
		{
			GameData.Domains.Character.Character character;
			bool flag = DomainManager.Character.TryGetElement_Objects(charId, out character);
			bool result;
			if (flag)
			{
				List<ValueTuple<ItemKey, int>> items = new List<ValueTuple<ItemKey, int>>();
				CharacterItemFilterWrappers.FindByItemFilterRule(character, filterRuleTemplateId, items, true, searchEquipment);
				result = (items.Count > 0);
			}
			else
			{
				result = false;
			}
			return result;
		}

		// Token: 0x06001D29 RID: 7465 RVA: 0x00188EA8 File Offset: 0x001870A8
		public static bool CharacterHasPrisoner(int charId, int prisonerId)
		{
			GameData.Domains.Character.Character character = DomainManager.Character.GetElement_Objects(prisonerId);
			bool flag = character == null;
			if (flag)
			{
				DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(53, 1);
				defaultInterpolatedStringHandler.AppendLiteral("can not find character ");
				defaultInterpolatedStringHandler.AppendFormatted<int>(prisonerId);
				defaultInterpolatedStringHandler.AppendLiteral(" to check CharacterHasPrisoner");
				throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
			}
			return character.GetKidnapperId() == charId;
		}

		// Token: 0x06001D2A RID: 7466 RVA: 0x00188F14 File Offset: 0x00187114
		public static bool IsItemPoisoned(ItemKey itemKey)
		{
			byte state = DomainManager.Item.GetBaseItem(itemKey).GetModificationState();
			return ModificationStateHelper.IsActive(state, 1);
		}

		// Token: 0x06001D2B RID: 7467 RVA: 0x00188F40 File Offset: 0x00187140
		public static bool IsItemPoisonedAndIdentified(ItemKey itemKey)
		{
			bool flag = EventHelper.IsItemPoisoned(itemKey);
			bool result;
			if (flag)
			{
				FullPoisonEffects poisonEffects = DomainManager.Item.GetPoisonEffects(itemKey);
				result = poisonEffects.IsIdentified;
			}
			else
			{
				result = false;
			}
			return result;
		}

		// Token: 0x06001D2C RID: 7468 RVA: 0x00188F74 File Offset: 0x00187174
		public static bool IsEquippingItem(int charId, sbyte itemType, short templateId)
		{
			GameData.Domains.Character.Character character;
			bool flag = !DomainManager.Character.TryGetElement_Objects(charId, out character);
			if (flag)
			{
				DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(44, 1);
				defaultInterpolatedStringHandler.AppendLiteral("can not find character ");
				defaultInterpolatedStringHandler.AppendFormatted<int>(charId);
				defaultInterpolatedStringHandler.AppendLiteral(" to check IsEquipItem");
				throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
			}
			ItemKey[] equipment = character.GetEquipment();
			foreach (ItemKey itemKey in equipment)
			{
				bool flag2 = itemKey.ItemType == itemType && itemKey.TemplateId == templateId;
				if (flag2)
				{
					return true;
				}
			}
			return false;
		}

		// Token: 0x06001D2D RID: 7469 RVA: 0x00189028 File Offset: 0x00187228
		public static bool IsTaiwuHasItem(sbyte itemType, short templateId, bool searchEquipment = true, bool searchWarehouse = false)
		{
			GameData.Domains.Character.Character taiwuChar = DomainManager.Taiwu.GetTaiwu();
			Inventory inventory = taiwuChar.GetInventory();
			foreach (ItemKey key in inventory.Items.Keys)
			{
				bool flag = key.ItemType == itemType && key.TemplateId == templateId;
				if (flag)
				{
					return true;
				}
			}
			if (searchEquipment)
			{
				ItemKey[] equipment = taiwuChar.GetEquipment();
				foreach (ItemKey key2 in equipment)
				{
					bool flag2 = key2.ItemType == itemType && key2.TemplateId == templateId;
					if (flag2)
					{
						return true;
					}
				}
			}
			if (searchWarehouse)
			{
				List<ItemKey> itemKeyList = DomainManager.Taiwu.GetWarehouseAllItemKey();
				foreach (ItemKey key3 in itemKeyList)
				{
					bool flag3 = key3.ItemType == itemType && key3.TemplateId == templateId;
					if (flag3)
					{
						return true;
					}
				}
			}
			return false;
		}

		// Token: 0x06001D2E RID: 7470 RVA: 0x00189188 File Offset: 0x00187388
		public static bool CheckCharacterHasLegendaryBook(int charId)
		{
			GameData.Domains.Character.Character character;
			bool flag = DomainManager.Character.TryGetElement_Objects(charId, out character);
			bool result;
			if (flag)
			{
				sbyte state = character.GetLegendaryBookOwnerState();
				result = (state > -1 && state < 3);
			}
			else
			{
				result = false;
			}
			return result;
		}

		// Token: 0x06001D2F RID: 7471 RVA: 0x001891C4 File Offset: 0x001873C4
		public static bool CheckCharacterWillAcceptLegendaryBookAsGift(int charId)
		{
			GameData.Domains.Character.Character character;
			bool flag = DomainManager.Character.TryGetElement_Objects(charId, out character);
			bool result;
			if (flag)
			{
				int rankChar = DomainManager.Character.GetTopThousandCharacterRanking(charId);
				bool flag2 = rankChar == -1;
				if (flag2)
				{
					result = false;
				}
				else
				{
					sbyte behaviorType = character.GetBehaviorType();
					result = (rankChar < GlobalConfig.Instance.AcceptLegendaryBookAsGiftRequireRank[(int)behaviorType]);
				}
			}
			else
			{
				result = false;
			}
			return result;
		}

		// Token: 0x06001D30 RID: 7472 RVA: 0x00189220 File Offset: 0x00187420
		public static List<int> GetTaiwuAdultGroupsHasLegendaryBook()
		{
			List<int> groups = EventHelper.GetTaiwuAdultGroups();
			List<int> result = new List<int>();
			foreach (int charId in groups)
			{
				GameData.Domains.Character.Character character;
				bool flag = DomainManager.Character.TryGetElement_Objects(charId, out character);
				if (flag)
				{
					bool flag2 = character.GetLegendaryBookOwnerState() >= 1;
					if (flag2)
					{
						result.Add(charId);
					}
				}
			}
			return result;
		}

		// Token: 0x06001D31 RID: 7473 RVA: 0x001892B4 File Offset: 0x001874B4
		public static bool IsRandomEnemyNeedDieCombat(short characterTemplateId)
		{
			return (characterTemplateId >= 283 && characterTemplateId <= 306) || (characterTemplateId >= 313 && characterTemplateId <= 315);
		}

		// Token: 0x06001D32 RID: 7474 RVA: 0x001892F0 File Offset: 0x001874F0
		public static bool CheckAdventureSiteState(Location location, short adventureId, sbyte adventureSiteState)
		{
			bool flag = !location.IsValid();
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				AreaAdventureData adventuresInArea = DomainManager.Adventure.GetAdventuresInArea(location.AreaId);
				AdventureSiteData siteData;
				bool flag2 = !adventuresInArea.AdventureSites.TryGetValue(location.BlockId, out siteData);
				result = (!flag2 && adventureId == siteData.TemplateId && adventureSiteState == siteData.SiteState);
			}
			return result;
		}

		// Token: 0x06001D33 RID: 7475 RVA: 0x0018935C File Offset: 0x0018755C
		public static bool CheckBlockHasAdventure(Location location)
		{
			return DomainManager.Adventure.GetAdventuresInArea(location.AreaId).AdventureSites.ContainsKey(location.BlockId);
		}

		// Token: 0x06001D34 RID: 7476 RVA: 0x00189390 File Offset: 0x00187590
		public static bool CheckBlockMatchTemplate(Location location, short templateId, EMapBlockType blockType = EMapBlockType.Invalid, EMapBlockSubType blockSubType = EMapBlockSubType.None)
		{
			MapBlockData blockData = EventHelper.GetMapBlockData(location.AreaId, location.BlockId);
			MapBlockItem config = blockData.GetConfig();
			bool flag = blockSubType != EMapBlockSubType.None;
			bool result;
			if (flag)
			{
				result = (config.SubType == blockSubType);
			}
			else
			{
				bool flag2 = blockType != EMapBlockType.Invalid;
				if (flag2)
				{
					result = (config.Type == blockType);
				}
				else
				{
					result = (config.TemplateId == templateId);
				}
			}
			return result;
		}

		// Token: 0x06001D35 RID: 7477 RVA: 0x001893F8 File Offset: 0x001875F8
		public static bool CheckBlockHasCricket(Location location)
		{
			return DomainManager.Map.LocationHasCricket(EventHelper.Domain.MainThreadDataContext, location);
		}

		// Token: 0x06001D36 RID: 7478 RVA: 0x00189420 File Offset: 0x00187620
		public static bool CheckBlockHasAdventure(MapBlockData mapBlock)
		{
			bool flag = mapBlock == null;
			return !flag && EventHelper.CheckBlockHasAdventure(new Location(mapBlock.AreaId, mapBlock.BlockId));
		}

		// Token: 0x06001D37 RID: 7479 RVA: 0x00189454 File Offset: 0x00187654
		public static bool CheckBlockHasRandomEnemy(MapBlockData mapBlock)
		{
			return mapBlock != null && mapBlock.TemplateEnemyList != null && mapBlock.TemplateEnemyList.Count > 0;
		}

		// Token: 0x06001D38 RID: 7480 RVA: 0x00189484 File Offset: 0x00187684
		public static bool CheckBlockHasXiangshuAvatar(MapBlockData mapBlock)
		{
			bool flag = mapBlock == null || mapBlock.FixedCharacterSet == null;
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				foreach (int charId in mapBlock.FixedCharacterSet)
				{
					GameData.Domains.Character.Character character = DomainManager.Character.GetElement_Objects(charId);
					bool flag2 = character.GetXiangshuType() == 1;
					if (flag2)
					{
						return true;
					}
				}
				result = false;
			}
			return result;
		}

		// Token: 0x06001D39 RID: 7481 RVA: 0x00189514 File Offset: 0x00187714
		public static bool CheckBlockHasPurpleBambooAvatar(MapBlockData mapBlock)
		{
			bool flag = mapBlock == null || mapBlock.FixedCharacterSet == null;
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				foreach (int charId in mapBlock.FixedCharacterSet)
				{
					GameData.Domains.Character.Character character = DomainManager.Character.GetElement_Objects(charId);
					bool flag2 = character.GetXiangshuType() == 3;
					if (flag2)
					{
						return true;
					}
				}
				result = false;
			}
			return result;
		}

		// Token: 0x06001D3A RID: 7482 RVA: 0x001895A4 File Offset: 0x001877A4
		public static bool CheckBlockHasEnemyCharacter(MapBlockData mapBlock)
		{
			return mapBlock != null && mapBlock.EnemyCharacterSet != null && mapBlock.EnemyCharacterSet.Count > 0;
		}

		// Token: 0x06001D3B RID: 7483 RVA: 0x001895D4 File Offset: 0x001877D4
		public static ValueTuple<sbyte, int> CheckBlockHasConsumedCharacter(MapBlockData mapBlockData)
		{
			bool flag = mapBlockData != null && mapBlockData.CharacterSet != null && mapBlockData.CharacterSet.Count > 0;
			if (flag)
			{
				foreach (int charId in mapBlockData.CharacterSet)
				{
					GameData.Domains.Character.Character character = EventHelper.GetCharacterById(charId);
					bool flag2 = character != null && DomainManager.Extra.IsLegendaryBookConsumed(charId);
					if (flag2)
					{
						sbyte bookType = DomainManager.LegendaryBook.GetConsumedCharacterLegendaryBookType(character);
						return new ValueTuple<sbyte, int>(bookType, charId);
					}
				}
			}
			return new ValueTuple<sbyte, int>(-1, -1);
		}

		// Token: 0x06001D3C RID: 7484 RVA: 0x0018968C File Offset: 0x0018788C
		public static bool CheckBlockHasAnimal(MapBlockData mapBlock)
		{
			return DomainManager.Extra.IsLocationContainsAnimal(new Location(mapBlock.AreaId, mapBlock.BlockId));
		}

		// Token: 0x06001D3D RID: 7485 RVA: 0x001896BC File Offset: 0x001878BC
		[Obsolete]
		public static int GetTaiwuChickenRemainEmptySlot()
		{
			return int.MaxValue;
		}

		// Token: 0x06001D3E RID: 7486 RVA: 0x001896D4 File Offset: 0x001878D4
		public static bool CheckBlockHasInfectedCharacter(MapBlockData mapBlock)
		{
			return mapBlock != null && mapBlock.InfectedCharacterSet != null && mapBlock.InfectedCharacterSet.Count > 0;
		}

		// Token: 0x06001D3F RID: 7487 RVA: 0x00189704 File Offset: 0x00187904
		public static int CheckEnemyEscapeRateFromTaiwu(short enemyTemplateId)
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			CharacterItem enemy = Config.Character.Instance[enemyTemplateId];
			return CharacterDomain.CalcEscapeSuccessRate(enemy.ConsummateLevel, taiwu.GetConsummateLevel());
		}

		// Token: 0x06001D40 RID: 7488 RVA: 0x00189740 File Offset: 0x00187940
		public static int CheckTaiwuEscapeRateFromEnemy(short enemyTemplateId)
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			CharacterItem enemy = Config.Character.Instance[enemyTemplateId];
			return CharacterDomain.CalcEscapeSuccessRate(taiwu.GetConsummateLevel(), enemy.ConsummateLevel);
		}

		// Token: 0x06001D41 RID: 7489 RVA: 0x0018977C File Offset: 0x0018797C
		public static int CheckEscapeSuccessRate(GameData.Domains.Character.Character selfChar, GameData.Domains.Character.Character targetChar)
		{
			return CharacterDomain.CalcEscapeSuccessRate(selfChar.GetConsummateLevel(), targetChar.GetConsummateLevel());
		}

		// Token: 0x06001D42 RID: 7490 RVA: 0x001897A0 File Offset: 0x001879A0
		[Obsolete]
		public static short GetBlockAnimalCharacterTemplateId(MapBlockData mapBlock)
		{
			return -1;
		}

		// Token: 0x06001D43 RID: 7491 RVA: 0x001897B4 File Offset: 0x001879B4
		public static GameData.Domains.Character.Character GetBlockXiangshuAvatar(MapBlockData mapBlock)
		{
			bool flag = mapBlock == null || mapBlock.FixedCharacterSet == null;
			GameData.Domains.Character.Character result;
			if (flag)
			{
				result = null;
			}
			else
			{
				foreach (int charId in mapBlock.FixedCharacterSet)
				{
					GameData.Domains.Character.Character character = DomainManager.Character.GetElement_Objects(charId);
					bool flag2 = character.GetXiangshuType() == 1;
					if (flag2)
					{
						return character;
					}
				}
				result = null;
			}
			return result;
		}

		// Token: 0x06001D44 RID: 7492 RVA: 0x00189844 File Offset: 0x00187A44
		public static GameData.Domains.Character.Character GetBlockPurpleBambooAvatar(MapBlockData mapBlock)
		{
			bool flag = mapBlock == null || mapBlock.FixedCharacterSet == null;
			GameData.Domains.Character.Character result;
			if (flag)
			{
				result = null;
			}
			else
			{
				foreach (int charId in mapBlock.FixedCharacterSet)
				{
					GameData.Domains.Character.Character character = DomainManager.Character.GetElement_Objects(charId);
					bool flag2 = character.GetXiangshuType() == 3;
					if (flag2)
					{
						return character;
					}
				}
				result = null;
			}
			return result;
		}

		// Token: 0x06001D45 RID: 7493 RVA: 0x001898D4 File Offset: 0x00187AD4
		public static bool IsTaiwuAvoidMapBlockEnemies()
		{
			return DomainManager.Taiwu.IsTaiwuAvoidMapBlockEnemies();
		}

		// Token: 0x06001D46 RID: 7494 RVA: 0x001898E0 File Offset: 0x00187AE0
		public static bool LocationIsAtSettlementOfArea(Location location, short areaId)
		{
			bool flag = location.AreaId != areaId;
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				MapAreaData mapAreaData = DomainManager.Map.GetElement_Areas((int)areaId);
				for (int i = 0; i < mapAreaData.SettlementInfos.Length; i++)
				{
					SettlementInfo settlementInfo = mapAreaData.SettlementInfos[i];
					MapBlockData blockData = DomainManager.Map.GetBlockData(location.AreaId, location.BlockId);
					Location rootLocation = blockData.GetRootBlock().GetLocation();
					bool flag2 = settlementInfo.BlockId == rootLocation.BlockId;
					if (flag2)
					{
						return true;
					}
				}
				result = false;
			}
			return result;
		}

		// Token: 0x06001D47 RID: 7495 RVA: 0x0018997C File Offset: 0x00187B7C
		public static bool LocationIsAtSettlementOfState(Location location, short stateTemplateId)
		{
			sbyte stateId = DomainManager.Map.GetStateIdByStateTemplateId(stateTemplateId);
			List<short> areaIds = ObjectPool<List<short>>.Instance.Get();
			DomainManager.Map.GetAllAreaInState(stateId, areaIds);
			bool flag = !areaIds.Contains(location.AreaId);
			bool result;
			if (flag)
			{
				ObjectPool<List<short>>.Instance.Return(areaIds);
				result = false;
			}
			else
			{
				for (int i = 0; i < areaIds.Count; i++)
				{
					bool flag2 = EventHelper.LocationIsAtSettlementOfArea(location, areaIds[i]);
					if (flag2)
					{
						ObjectPool<List<short>>.Instance.Return(areaIds);
						return true;
					}
				}
				ObjectPool<List<short>>.Instance.Return(areaIds);
				result = false;
			}
			return result;
		}

		// Token: 0x06001D48 RID: 7496 RVA: 0x00189A25 File Offset: 0x00187C25
		public static bool IsSecretInformationBroadcast(int metaDataId)
		{
			return DomainManager.Information.IsSecretInformationInBroadcast(metaDataId);
		}

		// Token: 0x06001D49 RID: 7497 RVA: 0x00189A34 File Offset: 0x00187C34
		public static bool IsSecretInformationCharacterAlive(int metaDataId, int partyIndex)
		{
			SecretInformationMetaData metaData;
			bool flag = DomainManager.Information.TryGetElement_SecretInformationMetaData(metaDataId, out metaData);
			bool result2;
			if (flag)
			{
				EventArgBox argBox = DomainManager.TaiwuEvent.GetEventArgBox();
				DomainManager.Information.MakeSecretInformationEventArgBox(metaData, argBox);
				short templateId = argBox.GetShort("templateId");
				SecretInformationItem config = SecretInformation.Instance.GetItem(templateId);
				bool flag2 = config == null;
				if (flag2)
				{
					DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(34, 1);
					defaultInterpolatedStringHandler.AppendLiteral("metaDataId has invalid templateId ");
					defaultInterpolatedStringHandler.AppendFormatted<short>(templateId);
					throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
				}
				bool flag3 = config.Parameters[partyIndex] != "Character";
				if (flag3)
				{
					result2 = false;
				}
				else
				{
					bool result = false;
					DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(3, 1);
					defaultInterpolatedStringHandler.AppendLiteral("arg");
					defaultInterpolatedStringHandler.AppendFormatted<int>(partyIndex);
					string key = defaultInterpolatedStringHandler.ToStringAndClear();
					bool flag4 = argBox.Contains<int>(key);
					if (flag4)
					{
						int charId = argBox.GetInt(key);
						result = DomainManager.Character.IsCharacterAlive(charId);
					}
					DomainManager.TaiwuEvent.ReturnArgBox(argBox);
					result2 = result;
				}
			}
			else
			{
				result2 = false;
			}
			return result2;
		}

		// Token: 0x06001D4A RID: 7498 RVA: 0x00189B4C File Offset: 0x00187D4C
		private static void AddAdmonishSucceed(int charId)
		{
			GameData.Domains.Character.Character taiwuChar = DomainManager.Taiwu.GetTaiwu();
			Location location = taiwuChar.GetLocation();
			LifeRecordCollection lifeRecordCollection = DomainManager.LifeRecord.GetLifeRecordCollection();
			int currDate = DomainManager.World.GetCurrDate();
			lifeRecordCollection.AddAdmonishSucceed(taiwuChar.GetId(), currDate, charId, location);
		}

		// Token: 0x06001D4B RID: 7499 RVA: 0x00189B94 File Offset: 0x00187D94
		private static void AddChangeBehaviorTypeByAdmonishedGood(int charId)
		{
			GameData.Domains.Character.Character taiwuChar = DomainManager.Taiwu.GetTaiwu();
			Location location = taiwuChar.GetLocation();
			LifeRecordCollection lifeRecordCollection = DomainManager.LifeRecord.GetLifeRecordCollection();
			int currDate = DomainManager.World.GetCurrDate();
			lifeRecordCollection.AddChangeBehaviorTypeByAdmonishedGood(charId, currDate, taiwuChar.GetId(), location);
		}

		// Token: 0x06001D4C RID: 7500 RVA: 0x00189BDC File Offset: 0x00187DDC
		private static void AddChangeBehaviorTypeByAdmonishedBad(int charId)
		{
			GameData.Domains.Character.Character taiwuChar = DomainManager.Taiwu.GetTaiwu();
			Location location = taiwuChar.GetLocation();
			LifeRecordCollection lifeRecordCollection = DomainManager.LifeRecord.GetLifeRecordCollection();
			int currDate = DomainManager.World.GetCurrDate();
			lifeRecordCollection.AddChangeBehaviorTypeByAdmonishedBad(charId, currDate, taiwuChar.GetId(), location);
		}

		// Token: 0x06001D4D RID: 7501 RVA: 0x00189C24 File Offset: 0x00187E24
		private static void AddReduceDebtByAdmonished(int charId)
		{
			GameData.Domains.Character.Character taiwuChar = DomainManager.Taiwu.GetTaiwu();
			Location location = taiwuChar.GetLocation();
			LifeRecordCollection lifeRecordCollection = DomainManager.LifeRecord.GetLifeRecordCollection();
			int currDate = DomainManager.World.GetCurrDate();
			lifeRecordCollection.AddReduceDebtByAdmonished(charId, currDate, taiwuChar.GetId(), location);
		}

		// Token: 0x06001D4E RID: 7502 RVA: 0x00189C6C File Offset: 0x00187E6C
		public static void ApplyLeadToGoodByCombatFavorabilityChange(int charId, int metaDataId)
		{
			int valueChange = SecretInformationConfig.GetLeadToGoodByCombatFavorabilityChange(charId, metaDataId);
			GameData.Domains.Character.Character npcChar = DomainManager.Character.GetElement_Objects(charId);
			GameData.Domains.Character.Character taiwuChar = DomainManager.Taiwu.GetTaiwu();
			EventHelper.ChangeFavorabilityOptional(npcChar, taiwuChar, (short)valueChange, 3);
		}

		// Token: 0x06001D4F RID: 7503 RVA: 0x00189CA4 File Offset: 0x00187EA4
		public static void ApplyLeadToGoodByCombatBehaviorTypeOffset(int charId, int metaDataId)
		{
			int offset = SecretInformationConfig.GetLeadToGoodByCombatBehaviorTypeOffset(metaDataId);
			GameData.Domains.Character.Character npcChar = DomainManager.Character.GetElement_Objects(charId);
			EventHelper.ChangeRoleBaseBehaviorValue(npcChar, offset);
			EventHelper.LeadToGoodSuccess(charId, metaDataId, offset);
		}

		// Token: 0x06001D50 RID: 7504 RVA: 0x00189CD8 File Offset: 0x00187ED8
		public static void ApplyLeadToEvilByCombatBehaviorTypeOffset(int charId, int metaDataId)
		{
			int offset = SecretInformationConfig.GetLeadToEvilByCombatBehaviorTypeOffset(metaDataId);
			GameData.Domains.Character.Character npcChar = DomainManager.Character.GetElement_Objects(charId);
			EventHelper.ChangeRoleBaseBehaviorValue(npcChar, offset);
			EventHelper.LeadToEvilSuccess(charId, metaDataId, offset);
		}

		// Token: 0x06001D51 RID: 7505 RVA: 0x00189D0C File Offset: 0x00187F0C
		public static void ApplyWriteOffDebtsByCombat(int charId, int metaDataId)
		{
			int worth = SecretInformationConfig.WriteOffDebtsByCombatDebtsWorth(charId, metaDataId);
			EventHelper.DirectlyReduceDebt(charId, worth, true);
			EventHelper.AddReduceDebtByAdmonished(charId);
		}

		// Token: 0x06001D52 RID: 7506 RVA: 0x00189D34 File Offset: 0x00187F34
		public static void ApplyLeadToGoodByRationalityFavorabilityChange(int charId, int metaDataId)
		{
			int valueChange = SecretInformationConfig.GetLeadToGoodByRationalityFavorabilityChange(charId, metaDataId);
			GameData.Domains.Character.Character npcChar = DomainManager.Character.GetElement_Objects(charId);
			GameData.Domains.Character.Character taiwuChar = DomainManager.Taiwu.GetTaiwu();
			EventHelper.ChangeFavorabilityOptional(npcChar, taiwuChar, (short)valueChange, 3);
		}

		// Token: 0x06001D53 RID: 7507 RVA: 0x00189D6C File Offset: 0x00187F6C
		public static void ApplyLeadToGoodByRationalityBehaviorTypeOffset(int charId, int metaDataId)
		{
			int offset = SecretInformationConfig.GetLeadToGoodByRationalityBehaviorTypeOffset(metaDataId);
			GameData.Domains.Character.Character npcChar = DomainManager.Character.GetElement_Objects(charId);
			EventHelper.ChangeRoleBaseBehaviorValue(npcChar, offset);
			EventHelper.LeadToGoodSuccess(charId, metaDataId, offset);
		}

		// Token: 0x06001D54 RID: 7508 RVA: 0x00189DA0 File Offset: 0x00187FA0
		public static void ApplyLeadToEvilByRationalityBehaviorTypeOffset(int charId, int metaDataId)
		{
			int offset = SecretInformationConfig.GetLeadToEvilByRationalityBehaviorTypeOffset(metaDataId);
			GameData.Domains.Character.Character npcChar = DomainManager.Character.GetElement_Objects(charId);
			EventHelper.ChangeRoleBaseBehaviorValue(npcChar, offset);
			EventHelper.LeadToEvilSuccess(charId, metaDataId, offset);
		}

		// Token: 0x06001D55 RID: 7509 RVA: 0x00189DD4 File Offset: 0x00187FD4
		public static void ApplyWriteOffDebtsByRationality(int charId, int metaDataId)
		{
			int worth = SecretInformationConfig.WriteOffDebtsByRationalityDebtsWorth(charId, metaDataId);
			EventHelper.DirectlyReduceDebt(charId, worth, true);
			EventHelper.AddReduceDebtByAdmonished(charId);
		}

		// Token: 0x06001D56 RID: 7510 RVA: 0x00189DFC File Offset: 0x00187FFC
		public static bool GetByEmotionResult(int charId, int metaDataId)
		{
			return SecretInformationConfig.GetLeadToGoodByEmotionEffectValue(charId, metaDataId) >= SecretInformationConfig.GetLeadToGoodByEmotionDifficultyValue(charId);
		}

		// Token: 0x06001D57 RID: 7511 RVA: 0x00189E24 File Offset: 0x00188024
		public static void ApplyLeadToGoodByEmotionBehaviorTypeOffset(int charId, int metaDataId)
		{
			int offset = SecretInformationConfig.GetLeadToGoodByEmotionBehaviorTypeOffset(metaDataId);
			GameData.Domains.Character.Character npcChar = DomainManager.Character.GetElement_Objects(charId);
			EventHelper.ChangeRoleBaseBehaviorValue(npcChar, offset);
			EventHelper.LeadToGoodSuccess(charId, metaDataId, offset);
		}

		// Token: 0x06001D58 RID: 7512 RVA: 0x00189E58 File Offset: 0x00188058
		public static void ApplyLeadToEvilByEmotionBehaviorTypeOffset(int charId, int metaDataId)
		{
			int offset = SecretInformationConfig.GetLeadToEvilByEmotionBehaviorTypeOffset(metaDataId);
			GameData.Domains.Character.Character npcChar = DomainManager.Character.GetElement_Objects(charId);
			EventHelper.ChangeRoleBaseBehaviorValue(npcChar, offset);
			EventHelper.LeadToEvilSuccess(charId, metaDataId, offset);
		}

		// Token: 0x06001D59 RID: 7513 RVA: 0x00189E8C File Offset: 0x0018808C
		public static void ApplyWriteOffDebtsByEmotion(int charId, int metaDataId)
		{
			int worth = SecretInformationConfig.WriteOffDebtsByEmotionDebtsWorth(charId, metaDataId);
			EventHelper.DirectlyReduceDebt(charId, worth, true);
			EventHelper.AddReduceDebtByAdmonished(charId);
		}

		// Token: 0x06001D5A RID: 7514 RVA: 0x00189EB4 File Offset: 0x001880B4
		private static void LeadToGoodSuccess(int charId, int metaDataId, int offset)
		{
			EventHelper.AddAdmonishSucceed(charId);
			EventHelper.AddChangeBehaviorTypeByAdmonishedGood(charId);
			EventHelper.ApplyLeadToGoodAiEffect(charId, metaDataId, offset);
			bool flag = SecretInformationProcessor_Event.Instance.IsContentAskKeepContent();
			if (flag)
			{
				EventHelper.DiscardSecretInformation(DomainManager.Taiwu.GetTaiwuCharId(), metaDataId);
			}
		}

		// Token: 0x06001D5B RID: 7515 RVA: 0x00189EFC File Offset: 0x001880FC
		private static void LeadToEvilSuccess(int charId, int metaDataId, int offset)
		{
			EventHelper.AddAdmonishSucceed(charId);
			EventHelper.AddChangeBehaviorTypeByAdmonishedBad(charId);
			EventHelper.ApplyLeadToEvilAiEffect(charId, metaDataId, offset);
			bool flag = SecretInformationProcessor_Event.Instance.IsContentAskKeepContent();
			if (flag)
			{
				EventHelper.DiscardSecretInformation(DomainManager.Taiwu.GetTaiwuCharId(), metaDataId);
			}
		}

		// Token: 0x06001D5C RID: 7516 RVA: 0x00189F44 File Offset: 0x00188144
		private static int WriteOffDebtsByThreatenDebtsWorth(int charId, int metaDataId)
		{
			GameData.Domains.Character.Character character = DomainManager.Character.GetElement_Objects(charId);
			SecretInformationItem config = DomainManager.Information.GetSecretInformationConfig(metaDataId);
			return (int)((config.SortValue - 1) * 50) * EventHelper.WriteOffDebtsByThreatenDebtsBehaviorTypeParam[(int)character.GetBehaviorType()] + 2000;
		}

		// Token: 0x06001D5D RID: 7517 RVA: 0x00189F90 File Offset: 0x00188190
		private static void ApplyWriteOffDebtsByThreaten(int charId, int metaDataId)
		{
			int worth = EventHelper.WriteOffDebtsByThreatenDebtsWorth(charId, metaDataId);
			EventHelper.DirectlyReduceDebt(charId, worth, true);
		}

		// Token: 0x06001D5E RID: 7518 RVA: 0x00189FB0 File Offset: 0x001881B0
		public static bool CanWriteOffDebts(int charId)
		{
			Debts debts = DomainManager.Character.GetDebts(charId);
			bool flag = debts != null;
			return flag && debts.GetTotalWorthLentToTaiwu() > 0L;
		}

		// Token: 0x06001D5F RID: 7519 RVA: 0x00189FE8 File Offset: 0x001881E8
		private static int GetLeadToGoodAiEffectTime(int charId, int metaDataId, int offsetValue)
		{
			GameData.Domains.Character.Character character = DomainManager.Character.GetElement_Objects(charId);
			SecretInformationItem config = DomainManager.Information.GetSecretInformationConfig(metaDataId);
			return (int)(config.SortValue * 12 / 2) + offsetValue / 10 + EventHelper.LeadToGoodAiBehaviorTypeParam[(int)character.GetBehaviorType()];
		}

		// Token: 0x06001D60 RID: 7520 RVA: 0x0018A034 File Offset: 0x00188234
		private static int GetLeadToEvilAiEffectTime(int charId, int metaDataId, int offsetValue)
		{
			GameData.Domains.Character.Character character = DomainManager.Character.GetElement_Objects(charId);
			SecretInformationItem config = DomainManager.Information.GetSecretInformationConfig(metaDataId);
			return (int)(config.SortValue * 12 / 2) + Math.Abs(offsetValue) / 10 + EventHelper.LeadToEvilAiBehaviorTypeParam[(int)character.GetBehaviorType()];
		}

		// Token: 0x06001D61 RID: 7521 RVA: 0x0018A084 File Offset: 0x00188284
		private static void ApplyLeadToGoodAiEffect(int charId, int metaDataId, int offset)
		{
			SecretInformationItem config = DomainManager.Information.GetSecretInformationConfig(metaDataId);
			ValueTuple<sbyte, sbyte> actionType = EventHelper.GetSecretInformationType(config);
			int effectTime = EventHelper.GetLeadToGoodAiEffectTime(charId, metaDataId, offset);
			EventHelper.ForbidCharacterAiAction(charId, actionType.Item1, actionType.Item2, effectTime);
		}

		// Token: 0x06001D62 RID: 7522 RVA: 0x0018A0C4 File Offset: 0x001882C4
		private static void ApplyLeadToEvilAiEffect(int charId, int metaDataId, int offset)
		{
			SecretInformationItem config = DomainManager.Information.GetSecretInformationConfig(metaDataId);
			ValueTuple<sbyte, sbyte> actionType = EventHelper.GetSecretInformationType(config);
			int effectTime = EventHelper.GetLeadToEvilAiEffectTime(charId, metaDataId, offset);
			EventHelper.AddCharacterAiActionRateAdjust(charId, actionType.Item1, actionType.Item2, 20, effectTime);
		}

		// Token: 0x06001D63 RID: 7523 RVA: 0x0018A104 File Offset: 0x00188304
		private static ValueTuple<sbyte, sbyte> GetSecretInformationType(SecretInformationItem config)
		{
			bool flag = config.TemplateId == 87;
			ValueTuple<sbyte, sbyte> result;
			if (flag)
			{
				result = new ValueTuple<sbyte, sbyte>(1, 4);
			}
			else
			{
				bool flag2 = config.TemplateId == 88;
				if (flag2)
				{
					result = new ValueTuple<sbyte, sbyte>(1, 1);
				}
				else
				{
					bool flag3 = config.TemplateId == 89;
					if (flag3)
					{
						result = new ValueTuple<sbyte, sbyte>(1, 2);
					}
					else
					{
						bool flag4 = config.TemplateId == 90;
						if (flag4)
						{
							result = new ValueTuple<sbyte, sbyte>(1, 3);
						}
						else
						{
							bool flag5 = config.TemplateId == 91;
							if (flag5)
							{
								result = new ValueTuple<sbyte, sbyte>(0, 4);
							}
							else
							{
								bool flag6 = config.TemplateId == 92;
								if (flag6)
								{
									result = new ValueTuple<sbyte, sbyte>(0, 1);
								}
								else
								{
									bool flag7 = config.TemplateId == 93;
									if (flag7)
									{
										result = new ValueTuple<sbyte, sbyte>(0, 2);
									}
									else
									{
										bool flag8 = config.TemplateId == 94;
										if (flag8)
										{
											result = new ValueTuple<sbyte, sbyte>(0, 3);
										}
										else
										{
											bool flag9 = config.TemplateId == 95;
											if (flag9)
											{
												result = new ValueTuple<sbyte, sbyte>(7, -1);
											}
											else
											{
												bool flag10 = config.TemplateId == 96;
												if (flag10)
												{
													result = new ValueTuple<sbyte, sbyte>(8, -1);
												}
												else
												{
													bool flag11 = config.TemplateId == 97;
													if (flag11)
													{
														result = new ValueTuple<sbyte, sbyte>(5, 1);
													}
													else
													{
														bool flag12 = config.TemplateId == 98;
														if (flag12)
														{
															result = new ValueTuple<sbyte, sbyte>(5, 2);
														}
														else
														{
															bool flag13 = config.TemplateId == 99;
															if (flag13)
															{
																result = new ValueTuple<sbyte, sbyte>(3, 1);
															}
															else
															{
																bool flag14 = config.TemplateId == 100;
																if (flag14)
																{
																	result = new ValueTuple<sbyte, sbyte>(3, 2);
																}
																else
																{
																	bool flag15 = config.TemplateId == 101;
																	if (flag15)
																	{
																		result = new ValueTuple<sbyte, sbyte>(2, 1);
																	}
																	else
																	{
																		bool flag16 = config.TemplateId == 102;
																		if (flag16)
																		{
																			result = new ValueTuple<sbyte, sbyte>(2, 2);
																		}
																		else
																		{
																			bool flag17 = config.TemplateId == 103;
																			if (flag17)
																			{
																				result = new ValueTuple<sbyte, sbyte>(9, -1);
																			}
																			else
																			{
																				bool flag18 = config.TemplateId == 104;
																				if (flag18)
																				{
																					result = new ValueTuple<sbyte, sbyte>(6, -1);
																				}
																				else
																				{
																					bool flag19 = config.TemplateId == 105;
																					if (flag19)
																					{
																						result = new ValueTuple<sbyte, sbyte>(4, 1);
																					}
																					else
																					{
																						bool flag20 = config.TemplateId == 106;
																						if (flag20)
																						{
																							result = new ValueTuple<sbyte, sbyte>(4, 3);
																						}
																						else
																						{
																							bool flag21 = config.TemplateId == 110;
																							if (!flag21)
																							{
																								DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(36, 1);
																								defaultInterpolatedStringHandler.AppendLiteral("Wrong SecretInformation TemplateId: ");
																								defaultInterpolatedStringHandler.AppendFormatted<short>(config.TemplateId);
																								throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
																							}
																							result = new ValueTuple<sbyte, sbyte>(11, -1);
																						}
																					}
																				}
																			}
																		}
																	}
																}
															}
														}
													}
												}
											}
										}
									}
								}
							}
						}
					}
				}
			}
			return result;
		}

		// Token: 0x06001D64 RID: 7524 RVA: 0x0018A3B0 File Offset: 0x001885B0
		public static bool IsInAnySect(int charId)
		{
			return DomainManager.Organization.IsInAnySect(charId);
		}

		// Token: 0x06001D65 RID: 7525 RVA: 0x0018A3D0 File Offset: 0x001885D0
		public static bool IsInTargetOrganization(GameData.Domains.Character.Character character, sbyte targetOrganizationTemplateId)
		{
			bool flag = character == null;
			if (flag)
			{
				throw new Exception("null character to check IsInTargetOrganization!");
			}
			return character.GetOrganizationInfo().OrgTemplateId == targetOrganizationTemplateId;
		}

		// Token: 0x06001D66 RID: 7526 RVA: 0x0018A404 File Offset: 0x00188604
		public static bool IsCharactersInHostileSects(GameData.Domains.Character.Character charA, GameData.Domains.Character.Character charB)
		{
			sbyte charAOrgTemplateId = charA.GetOrganizationInfo().OrgTemplateId;
			sbyte charBOrgTemplateId = charB.GetOrganizationInfo().OrgTemplateId;
			return DomainManager.Organization.GetSectFavorability(charAOrgTemplateId, charBOrgTemplateId) == -1;
		}

		// Token: 0x06001D67 RID: 7527 RVA: 0x0018A440 File Offset: 0x00188640
		public static bool IsHostileSects(sbyte orgTemplateIdA, sbyte orgTemplateIdB)
		{
			return DomainManager.Organization.GetSectFavorability(orgTemplateIdA, orgTemplateIdB) == -1;
		}

		// Token: 0x06001D68 RID: 7528 RVA: 0x0018A464 File Offset: 0x00188664
		public static sbyte GetHostileSect(sbyte orgTemplateId)
		{
			for (sbyte i = 1; i < 15; i += 1)
			{
				bool flag = orgTemplateId == i;
				if (!flag)
				{
					bool flag2 = EventHelper.IsHostileSects(orgTemplateId, i);
					if (flag2)
					{
						return i;
					}
				}
			}
			return -1;
		}

		// Token: 0x06001D69 RID: 7529 RVA: 0x0018A4A8 File Offset: 0x001886A8
		public static bool IsCharacterAtTargetSectLocation(GameData.Domains.Character.Character character, sbyte sectTemplateId)
		{
			bool flag = character == null;
			if (flag)
			{
				throw new Exception("null character to check IsCharacterAtTargetSectLocation!");
			}
			bool flag2 = !character.GetLocation().IsValid();
			bool result;
			if (flag2)
			{
				result = false;
			}
			else
			{
				short settlementId = DomainManager.Organization.GetSettlementIdByOrgTemplateId(sectTemplateId);
				result = DomainManager.Map.IsLocationOnSettlementBlock(character.GetLocation(), settlementId);
			}
			return result;
		}

		// Token: 0x06001D6A RID: 7530 RVA: 0x0018A508 File Offset: 0x00188708
		public static bool IsCharacterAtTargetSectLocation(GameData.Domains.Character.Character character, short settlementId)
		{
			bool flag = character == null;
			if (flag)
			{
				throw new Exception("null character to check IsCharacterAtTargetSectLocation!");
			}
			bool flag2 = !character.GetLocation().IsValid();
			return !flag2 && DomainManager.Map.IsLocationOnSettlementBlock(character.GetLocation(), settlementId);
		}

		// Token: 0x06001D6B RID: 7531 RVA: 0x0018A558 File Offset: 0x00188758
		public static bool IsCharacterAtOrganizationRange(GameData.Domains.Character.Character character, sbyte orgTemplateId)
		{
			Location location = character.GetLocation();
			bool flag = !location.IsValid();
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				Settlement settlement = DomainManager.Organization.GetSettlementByOrgTemplateId(orgTemplateId);
				result = EventHelper.IsLocationAtSettlementRange(location, settlement.GetId());
			}
			return result;
		}

		// Token: 0x06001D6C RID: 7532 RVA: 0x0018A59C File Offset: 0x0018879C
		public static bool IsCharacterAtOrganizationRange(GameData.Domains.Character.Character character, short settlementId)
		{
			Location location = character.GetLocation();
			bool flag = !location.IsValid();
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				Settlement settlement = DomainManager.Organization.GetSettlement(settlementId);
				result = EventHelper.IsLocationAtSettlementRange(location, settlement.GetId());
			}
			return result;
		}

		// Token: 0x06001D6D RID: 7533 RVA: 0x0018A5E0 File Offset: 0x001887E0
		public static bool IsLocationAtOrganizationRange(Location currLocation, sbyte orgTemplateId)
		{
			Settlement settlement = DomainManager.Organization.GetSettlementByOrgTemplateId(orgTemplateId);
			return EventHelper.IsLocationAtSettlementRange(currLocation, settlement.GetId());
		}

		// Token: 0x06001D6E RID: 7534 RVA: 0x0018A60C File Offset: 0x0018880C
		public static bool IsLocationAtSettlementRange(Location currLocation, short settlementId)
		{
			return DomainManager.Map.IsLocationInSettlementInfluenceRange(currLocation, settlementId);
		}

		// Token: 0x06001D6F RID: 7535 RVA: 0x0018A62C File Offset: 0x0018882C
		public static bool IsSectCharApprovedTaiwu(int charId)
		{
			return DomainManager.Organization.GetElement_SectCharacters(charId).GetApprovedTaiwu();
		}

		// Token: 0x06001D70 RID: 7536 RVA: 0x0018A650 File Offset: 0x00188850
		public static bool IsSectAllowLearning(sbyte sectId)
		{
			short settlementId = DomainManager.Organization.GetSettlementByOrgTemplateId(sectId).GetId();
			return DomainManager.Organization.GetElement_Sects(settlementId).GetTaiwuExploreStatus() == 2;
		}

		// Token: 0x06001D71 RID: 7537 RVA: 0x0018A688 File Offset: 0x00188888
		public static bool HasSectSpiritualDebtInteractionOccurred(sbyte sectId)
		{
			short settlementId = DomainManager.Organization.GetSettlementByOrgTemplateId(sectId).GetId();
			return DomainManager.Organization.GetElement_Sects(settlementId).GetSpiritualDebtInteractionOccurred();
		}

		// Token: 0x06001D72 RID: 7538 RVA: 0x0018A6BC File Offset: 0x001888BC
		public static bool IsSectNoMeatEating(sbyte sectId)
		{
			return Organization.Instance[sectId].NoMeatEating;
		}

		// Token: 0x06001D73 RID: 7539 RVA: 0x0018A6E0 File Offset: 0x001888E0
		public static bool IsSectNoDrinking(sbyte sectId)
		{
			return Organization.Instance[sectId].NoDrinking;
		}

		// Token: 0x06001D74 RID: 7540 RVA: 0x0018A704 File Offset: 0x00188904
		public static bool HasCurrentTaiwuSendWorshipPostToSect(sbyte orgTemplateId)
		{
			Settlement settlement = DomainManager.Organization.GetSettlementByOrgTemplateId(orgTemplateId);
			return DomainManager.Organization.GetElement_Sects(settlement.GetId()).GetTaiwuExploreStatus() > 0;
		}

		// Token: 0x06001D75 RID: 7541 RVA: 0x0018A73C File Offset: 0x0018893C
		public static bool IsPrincipal(int charId)
		{
			return DomainManager.Character.GetElement_Objects(charId).GetOrganizationInfo().Principal;
		}

		// Token: 0x06001D76 RID: 7542 RVA: 0x0018A764 File Offset: 0x00188964
		public static bool CharacterInjuryPoisonDisorderOfQiLess(GameData.Domains.Character.Character character, int value)
		{
			int count = 0;
			count += character.GetInjuries().GetSum();
			count += character.GetPoisonMarkCount();
			count += (int)DefeatMarkCollection.CalcQiDisorderMarkCount((int)character.GetDisorderOfQi());
			return count < value;
		}

		// Token: 0x06001D77 RID: 7543 RVA: 0x0018A7A4 File Offset: 0x001889A4
		public static bool HasTeammates(bool ignoreBaby = false)
		{
			bool flag = !ignoreBaby;
			bool result;
			if (flag)
			{
				result = (DomainManager.Taiwu.GetGroupCharIds().GetCount() > 1);
			}
			else
			{
				result = (EventHelper.GetValidGroupCharacterCount(true, false, true) > 0);
			}
			return result;
		}

		// Token: 0x06001D78 RID: 7544 RVA: 0x0018A7E4 File Offset: 0x001889E4
		[Obsolete]
		public static bool IsInGroup(int characterId)
		{
			return DomainManager.Taiwu.IsInGroup(characterId);
		}

		// Token: 0x06001D79 RID: 7545 RVA: 0x0018A804 File Offset: 0x00188A04
		public static bool IsTaiwuGroupFull()
		{
			return EventHelper.GetValidGroupCharacterCount(true, false, true) >= DomainManager.Taiwu.GetTaiwuGroupMaxCount();
		}

		// Token: 0x06001D7A RID: 7546 RVA: 0x0018A830 File Offset: 0x00188A30
		[Obsolete("事件中使用OptionAvailableConditions实现")]
		public static bool TaiwuHasShavingCondition(int characterId)
		{
			int leftDaysInMonth = DomainManager.World.GetLeftDaysInCurrMonth();
			int money = DomainManager.Taiwu.GetTaiwu().GetResource(6);
			short favorability = DomainManager.Character.GetFavorability(characterId, DomainManager.Taiwu.GetTaiwuCharId());
			sbyte favorLevel = FavorabilityType.GetFavorabilityType(favorability);
			return leftDaysInMonth >= 3 && money >= 500 && favorLevel >= 1;
		}

		// Token: 0x06001D7B RID: 7547 RVA: 0x0018A894 File Offset: 0x00188A94
		[Obsolete("事件中使用OptionAvailableConditions/TaiwuGroupHaveAdult实现")]
		public static bool HasMatchTeammate(short ruleTemplateId)
		{
			List<Predicate<GameData.Domains.Character.Character>> matcherList = new List<Predicate<GameData.Domains.Character.Character>>();
			GameData.Domains.Character.Filters.CharacterFilterRules.ToPredicates(ruleTemplateId, matcherList, -1);
			foreach (int charId in DomainManager.Taiwu.GetGroupCharIds().GetCollection())
			{
				GameData.Domains.Character.Character character;
				bool flag = DomainManager.Character.TryGetElement_Objects(charId, out character);
				if (flag)
				{
					bool flag2 = CharacterMatchers.MatchAll(character, matcherList);
					if (flag2)
					{
						return true;
					}
				}
			}
			return false;
		}

		// Token: 0x06001D7C RID: 7548 RVA: 0x0018A930 File Offset: 0x00188B30
		[Obsolete("事件中使用OptionAvailableConditions/TaiwuPrisonerHaveInfectedCharacter实现")]
		public static bool RoleHasMatchPrisoner(short ruleTemplateId, int charId = -1)
		{
			bool flag = charId == -1;
			if (flag)
			{
				charId = EventArgBox.TaiwuCharacterId;
			}
			List<Predicate<GameData.Domains.Character.Character>> matcherList = new List<Predicate<GameData.Domains.Character.Character>>();
			GameData.Domains.Character.Filters.CharacterFilterRules.ToPredicates(ruleTemplateId, matcherList, -1);
			GameData.Domains.Character.Character character;
			bool flag2 = !DomainManager.Character.TryGetElement_Objects(charId, out character) || !character.IsActiveExternalRelationState(2);
			bool result;
			if (flag2)
			{
				result = false;
			}
			else
			{
				KidnappedCharacterList kidnappedCharacterList = DomainManager.Character.GetKidnappedCharacters(charId);
				foreach (KidnappedCharacter prisoner in kidnappedCharacterList.GetCollection())
				{
					GameData.Domains.Character.Character prisonerChar;
					bool flag3 = DomainManager.Character.TryGetElement_Objects(prisoner.CharId, out prisonerChar);
					if (flag3)
					{
						bool flag4 = CharacterMatchers.MatchAll(prisonerChar, matcherList);
						if (flag4)
						{
							return true;
						}
					}
				}
				result = false;
			}
			return result;
		}

		// Token: 0x06001D7D RID: 7549 RVA: 0x0018AA0C File Offset: 0x00188C0C
		public static bool IsTaiwuAwayForeverLover(int charId)
		{
			return EventHelper.Domain.GetAwayForeverLoverCharId() == charId;
		}

		// Token: 0x06001D7E RID: 7550 RVA: 0x0018AA2C File Offset: 0x00188C2C
		[Obsolete]
		public static bool HasSeizedCharacterInCombat(EventArgBox eventArgBox)
		{
			bool flag = eventArgBox == null;
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				int charId = -1;
				result = eventArgBox.Get("CharIdSeizedInCombat", ref charId);
			}
			return result;
		}

		// Token: 0x06001D7F RID: 7551 RVA: 0x0018AA5C File Offset: 0x00188C5C
		public static bool IsTaiwuTraveling()
		{
			return DomainManager.Map.IsTraveling;
		}

		// Token: 0x06001D80 RID: 7552 RVA: 0x0018AA78 File Offset: 0x00188C78
		public static bool NeedTriggerReincarnation()
		{
			bool hasReincarnationRelatedItem = EventHelper.IsTaiwuHasItem(12, 199, true, true);
			Location taiwuVillageLocation = DomainManager.Taiwu.GetTaiwuVillageLocation();
			bool hasReincarnationRelatedBuilding = EventHelper.IsBuildingAreaHasBuilding(taiwuVillageLocation, 50, -1);
			return !hasReincarnationRelatedItem && !hasReincarnationRelatedBuilding;
		}

		// Token: 0x06001D81 RID: 7553 RVA: 0x0018AAB8 File Offset: 0x00188CB8
		public static bool NeedTriggerTeaHorseStory()
		{
			bool hasTeaHorseRelatedItem = EventHelper.IsTaiwuHasItem(12, 198, true, true);
			Location taiwuVillageLocation = DomainManager.Taiwu.GetTaiwuVillageLocation();
			bool hasTeaHorseRelatedBuilding = EventHelper.IsBuildingAreaHasBuilding(taiwuVillageLocation, 51, -1);
			return !hasTeaHorseRelatedItem && !hasTeaHorseRelatedBuilding;
		}

		// Token: 0x06001D82 RID: 7554 RVA: 0x0018AAF8 File Offset: 0x00188CF8
		public static void ExpelVillager(int charId)
		{
			DomainManager.Taiwu.ExpelVillager(EventHelper.Domain.MainThreadDataContext, charId);
		}

		// Token: 0x06001D83 RID: 7555 RVA: 0x0018AB14 File Offset: 0x00188D14
		public static bool IsLegacyPassingUnlocked()
		{
			return DomainManager.World.GetMainStoryLineProgress() > 10;
		}

		// Token: 0x06001D84 RID: 7556 RVA: 0x0018AB34 File Offset: 0x00188D34
		public static bool HasLeftBornArea()
		{
			return DomainManager.World.GetMainStoryLineProgress() > 2;
		}

		// Token: 0x06001D85 RID: 7557 RVA: 0x0018AB54 File Offset: 0x00188D54
		public static bool CheckMainStoryLineProgress(short progress)
		{
			bool flag = progress < 29;
			bool result;
			if (flag)
			{
				result = (DomainManager.World.GetMainStoryLineProgress() >= progress);
			}
			else
			{
				result = (DomainManager.World.GetMainStoryLineProgress() == progress);
			}
			return result;
		}

		// Token: 0x06001D86 RID: 7558 RVA: 0x0018AB90 File Offset: 0x00188D90
		public static bool IsInMainStoryLineProgress(short progress)
		{
			return DomainManager.World.GetMainStoryLineProgress() == progress;
		}

		// Token: 0x06001D87 RID: 7559 RVA: 0x0018ABB0 File Offset: 0x00188DB0
		public static bool GetAllowRandomTaiwuHeir()
		{
			return DomainManager.World.GetAllowRandomTaiwuHeir();
		}

		// Token: 0x06001D88 RID: 7560 RVA: 0x0018ABCC File Offset: 0x00188DCC
		public static void FinishAdventureEvent()
		{
			DomainManager.Adventure.OnEventHandleFinished(EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x06001D89 RID: 7561 RVA: 0x0018ABE4 File Offset: 0x00188DE4
		public static void SelectAdventureBranch(string branchKey)
		{
			DomainManager.Adventure.SelectBranch(EventHelper.Domain.MainThreadDataContext, branchKey);
		}

		// Token: 0x06001D8A RID: 7562 RVA: 0x0018ABFD File Offset: 0x00188DFD
		public static void SwitchToSiblingBranch(string branchKey)
		{
			DomainManager.Adventure.SelectBranch(EventHelper.Domain.MainThreadDataContext, branchKey);
			DomainManager.Adventure.SetAdventureState(4, EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x06001D8B RID: 7563 RVA: 0x0018AC2C File Offset: 0x00188E2C
		public static string GetCurAdventureBranchKey()
		{
			int branchIndex = DomainManager.Adventure.GetCurMapTrunk().BranchIndex;
			bool flag = branchIndex < DomainManager.Adventure.AdventureCfg.BaseBranches.Count;
			string branchKey;
			if (flag)
			{
				branchKey = DomainManager.Adventure.AdventureCfg.BaseBranches[branchIndex].BranchKey;
			}
			else
			{
				branchIndex = DomainManager.Adventure.AdventureCfg.AdvancedBranches[branchIndex].ParentBranchId;
				branchKey = DomainManager.Adventure.AdventureCfg.BaseBranches[branchIndex].BranchKey;
			}
			return branchKey;
		}

		// Token: 0x06001D8C RID: 7564 RVA: 0x0018ACBB File Offset: 0x00188EBB
		public static void GenerateAdventureMap(string startNodeKey)
		{
			DomainManager.Adventure.GenerateAdventureMap(EventHelper.Domain.MainThreadDataContext, startNodeKey);
		}

		// Token: 0x06001D8D RID: 7565 RVA: 0x0018ACD4 File Offset: 0x00188ED4
		public static short GetCurAdventureId()
		{
			return DomainManager.Adventure.GetCurAdventureId();
		}

		// Token: 0x06001D8E RID: 7566 RVA: 0x0018ACF0 File Offset: 0x00188EF0
		public static int GetAdventureParameter(string parameterName)
		{
			return DomainManager.Adventure.GetAdvParameter(parameterName);
		}

		// Token: 0x06001D8F RID: 7567 RVA: 0x0018AD0D File Offset: 0x00188F0D
		public static void AddNextBranchExtraEvent(string eventGuid, sbyte personality, short weight)
		{
			DomainManager.Adventure.AddNextBranchExtraEvent(eventGuid, personality, weight);
		}

		// Token: 0x06001D90 RID: 7568 RVA: 0x0018AD1E File Offset: 0x00188F1E
		public static void AddNextBranchEmptyNode(short weight)
		{
			DomainManager.Adventure.AddNextBranchExtraEvent("", -1, weight);
		}

		// Token: 0x06001D91 RID: 7569 RVA: 0x0018AD33 File Offset: 0x00188F33
		public static void SetAdventureParameter(string parameterName, int val)
		{
			DomainManager.Adventure.SetAdvParameter(parameterName, val, EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x06001D92 RID: 7570 RVA: 0x0018AD4D File Offset: 0x00188F4D
		public static void SetAllowExitAdventure(bool allowExitAdventure)
		{
			DomainManager.Adventure.SetAllowExitAdventure(allowExitAdventure, EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x06001D93 RID: 7571 RVA: 0x0018AD68 File Offset: 0x00188F68
		public static void SetCurrentAdventureSiteInitData(int val)
		{
			short curAdvId = DomainManager.Adventure.GetCurAdventureId();
			bool flag = curAdvId < 0;
			if (!flag)
			{
				Location location = DomainManager.Taiwu.GetTaiwu().GetLocation();
				DomainManager.Adventure.SetAdventureSiteInitData(EventHelper.Domain.MainThreadDataContext, location.AreaId, location.BlockId, val);
			}
		}

		// Token: 0x06001D94 RID: 7572 RVA: 0x0018ADC0 File Offset: 0x00188FC0
		public static int GetCurrentAdventureSiteInitData()
		{
			short curAdvId = DomainManager.Adventure.GetCurAdventureId();
			bool flag = curAdvId < 0;
			int result;
			if (flag)
			{
				result = int.MinValue;
			}
			else
			{
				Location location = DomainManager.Taiwu.GetTaiwu().GetLocation();
				result = DomainManager.Adventure.GetAdventureSiteInitData(location.AreaId, location.BlockId);
			}
			return result;
		}

		// Token: 0x06001D95 RID: 7573 RVA: 0x0018AE14 File Offset: 0x00189014
		public static bool IsCurrLegendaryBookAdventureCreatedByConsumedCharacter()
		{
			Location location = DomainManager.Taiwu.GetTaiwu().GetLocation();
			AreaAdventureData adventuresInArea = DomainManager.Adventure.GetAdventuresInArea(location.AreaId);
			AdventureSiteData siteData = adventuresInArea.AdventureSites[location.BlockId];
			LegendaryBookMonthlyAction monthlyAction = (LegendaryBookMonthlyAction)DomainManager.TaiwuEvent.GetMonthlyAction(siteData.MonthlyActionKey);
			return monthlyAction.BookAppearType == 1;
		}

		// Token: 0x06001D96 RID: 7574 RVA: 0x0018AE7C File Offset: 0x0018907C
		public static int GetXDistanceToNextTransferNode()
		{
			return DomainManager.Adventure.GetXDistanceToNextTransferNode();
		}

		// Token: 0x06001D97 RID: 7575 RVA: 0x0018AE98 File Offset: 0x00189098
		public static void ExitAdventure(bool isAdventureCompleted = false)
		{
			bool flag = DomainManager.Adventure.GetCurAdventureId() < 0;
			if (!flag)
			{
				DomainManager.Adventure.ExitAdventure(EventHelper.Domain.MainThreadDataContext, isAdventureCompleted);
				GameDataBridge.AddDisplayEvent(DisplayEventType.ExitAdventure);
			}
		}

		// Token: 0x06001D98 RID: 7576 RVA: 0x0018AED8 File Offset: 0x001890D8
		public static List<ItemKey> GetAdventureEnterItems()
		{
			return DomainManager.Adventure.GetEnterItems();
		}

		// Token: 0x06001D99 RID: 7577 RVA: 0x0018AEF4 File Offset: 0x001890F4
		public static void SetHealingInnerInjuryRestriction(bool val)
		{
			DomainManager.Taiwu.SetHealingInnerInjuryRestriction(val, EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x06001D9A RID: 7578 RVA: 0x0018AF0D File Offset: 0x0018910D
		public static void SetHealingOuterInjuryRestriction(bool val)
		{
			DomainManager.Taiwu.SetHealingOuterInjuryRestriction(val, EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x06001D9B RID: 7579 RVA: 0x0018AF26 File Offset: 0x00189126
		public static void SetNeiliAllocationTypeRestriction(byte neiliAllocationType, bool isRestricted)
		{
			DomainManager.Taiwu.SetNeiliAllocationTypeRestriction(EventHelper.Domain.MainThreadDataContext, neiliAllocationType, isRestricted);
		}

		// Token: 0x06001D9C RID: 7580 RVA: 0x0018AF40 File Offset: 0x00189140
		public static void ClearAllTemporaryRestrictions()
		{
			DomainManager.Taiwu.ClearAllTemporaryRestrictions(EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x06001D9D RID: 7581 RVA: 0x0018AF58 File Offset: 0x00189158
		public static bool IsHealingInnerInjuryRestricted()
		{
			return DomainManager.Taiwu.GetHealingInnerInjuryRestriction();
		}

		// Token: 0x06001D9E RID: 7582 RVA: 0x0018AF74 File Offset: 0x00189174
		public static bool IsHealingOuterInjuryRestricted()
		{
			return DomainManager.Taiwu.GetHealingOuterInjuryRestriction();
		}

		// Token: 0x06001D9F RID: 7583 RVA: 0x0018AF90 File Offset: 0x00189190
		public static bool IsNeiliAllocationTypeRestricted(byte neiliAllocationType)
		{
			return DomainManager.Taiwu.IsNeiliAllocationTypeRestricted(neiliAllocationType);
		}

		// Token: 0x06001DA0 RID: 7584 RVA: 0x0018AFB0 File Offset: 0x001891B0
		public static bool IsTemporaryIntelligentCharacter(int charId)
		{
			return DomainManager.Character.IsTemporaryIntelligentCharacter(charId);
		}

		// Token: 0x06001DA1 RID: 7585 RVA: 0x0018AFCD File Offset: 0x001891CD
		public static void KeepTemporaryCharacterAfterAdventure(GameData.Domains.Character.Character character)
		{
			DomainManager.Character.ConvertTemporaryIntelligentCharacter(EventHelper.Domain.MainThreadDataContext, character);
		}

		// Token: 0x06001DA2 RID: 7586 RVA: 0x0018AFE8 File Offset: 0x001891E8
		public static EventActorData CreateAdventureActor(short templateId, string key, EventArgBox argBox)
		{
			EventActorData data = EventActorDataHelper.CreateActor(EventHelper.Domain.MainThreadDataContext.Random, templateId);
			argBox.Set(key, data);
			return data;
		}

		// Token: 0x06001DA3 RID: 7587 RVA: 0x0018B01A File Offset: 0x0018921A
		public static void SortAdventureCharacters(EventArgBox eventArgBox, bool isMajorChar, int groupId, CharacterSortType characterSortType, bool ascendingOrder)
		{
			AdventureCharacterSortUtils.Sort(eventArgBox, isMajorChar, groupId, characterSortType, ascendingOrder);
		}

		// Token: 0x06001DA4 RID: 7588 RVA: 0x0018B02C File Offset: 0x0018922C
		public static bool AddHusbandOrWifeRelationsInAdventure(int charId, int relatedCharId)
		{
			bool flag = !RelationTypeHelper.AllowAddingHusbandOrWifeRelation(charId, relatedCharId);
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				bool flag2 = EventHelper.IsTemporaryIntelligentCharacter(charId);
				if (flag2)
				{
					EventHelper.KeepTemporaryCharacterAfterAdventure(DomainManager.Character.GetElement_Objects(charId));
				}
				bool flag3 = EventHelper.IsTemporaryIntelligentCharacter(relatedCharId);
				if (flag3)
				{
					EventHelper.KeepTemporaryCharacterAfterAdventure(DomainManager.Character.GetElement_Objects(relatedCharId));
				}
				DomainManager.Character.AddHusbandOrWifeRelations(EventHelper.Domain.MainThreadDataContext, charId, relatedCharId, int.MinValue);
				EventHelper.AddLegacyPoint(3, 100);
				DomainManager.Character.AddRelation(EventHelper.Domain.MainThreadDataContext, charId, relatedCharId, 16384, int.MinValue);
				DomainManager.Character.AddRelation(EventHelper.Domain.MainThreadDataContext, relatedCharId, charId, 16384, int.MinValue);
				int taiwuCharId = DomainManager.Taiwu.GetTaiwuCharId();
				bool flag4 = taiwuCharId == charId;
				if (flag4)
				{
					DomainManager.Taiwu.JoinGroup(EventHelper.Domain.MainThreadDataContext, relatedCharId, true);
					EventHelper.ShowGetItemPageForCharacters(new List<int>
					{
						relatedCharId
					}, false, "", null);
					DomainManager.Adventure.AddCharacterToResultDisplay(relatedCharId);
				}
				else
				{
					bool flag5 = taiwuCharId == relatedCharId;
					if (flag5)
					{
						DomainManager.Taiwu.JoinGroup(EventHelper.Domain.MainThreadDataContext, charId, true);
						EventHelper.ShowGetItemPageForCharacters(new List<int>
						{
							charId
						}, false, "", null);
						DomainManager.Adventure.AddCharacterToResultDisplay(charId);
					}
					else
					{
						GameData.Domains.Character.Character bride = DomainManager.Character.GetElement_Objects(charId);
						GameData.Domains.Character.Character husband = DomainManager.Character.GetElement_Objects(relatedCharId);
						DomainManager.Organization.UpdateOrganizationAfterMarriage(EventHelper.Domain.MainThreadDataContext, bride, husband);
					}
				}
				result = true;
			}
			return result;
		}

		// Token: 0x06001DA5 RID: 7589 RVA: 0x0018B1CC File Offset: 0x001893CC
		public static void KillCharacterInAdventure(GameData.Domains.Character.Character character)
		{
			bool flag = character.GetCreatingType() == 1;
			if (flag)
			{
				DomainManager.Adventure.KillIntelligentCharacterInAdventure(EventHelper.Domain.MainThreadDataContext, character);
			}
		}

		// Token: 0x06001DA6 RID: 7590 RVA: 0x0018B200 File Offset: 0x00189400
		public static void DestroyEnemyNest(EventArgBox argBox, sbyte behaviorType)
		{
			AdventureSiteData siteData;
			argBox.Get<AdventureSiteData>("AdventureSite", out siteData);
			Location location;
			argBox.Get<Location>("AdventureLocation", out location);
			short enemyNestId = EnemyNest.Instance.First((EnemyNestItem nest) => nest.AdventureId == siteData.TemplateId).TemplateId;
			DomainManager.Adventure.DestroyEnemyNest(EventHelper.Domain.MainThreadDataContext, location.AreaId, enemyNestId, behaviorType);
		}

		// Token: 0x06001DA7 RID: 7591 RVA: 0x0018B270 File Offset: 0x00189470
		public static GameData.Domains.Character.Character CreateForcedToFollowCharacter(short areaId, sbyte gender, short adventureId)
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			sbyte enemyNestId = AdventureDomain.GetEnemyNestTemplateId(adventureId);
			EnemyNestItem enemyNestCfg = EnemyNest.Instance[(short)enemyNestId];
			sbyte stateTemplateId = DomainManager.Map.GetStateTemplateIdByAreaId(areaId);
			sbyte orgTemplateId = MapState.Instance[stateTemplateId].SectID;
			short charTemplateId = OrganizationDomain.GetCharacterTemplateId(orgTemplateId, stateTemplateId, gender);
			int leaderIndex = (adventureId == 33) ? ((int)(orgTemplateId - 1)) : (enemyNestCfg.Members.Count - 1);
			CharacterItem enemyLeaderCfg = Config.Character.Instance[enemyNestCfg.Members[leaderIndex]];
			OrganizationInfo orgInfo = taiwu.GetOrganizationInfo();
			orgInfo.Grade = 0;
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			IntelligentCharacterCreationInfo info = new IntelligentCharacterCreationInfo(taiwu.GetLocation(), orgInfo, charTemplateId);
			info.BaseAttraction = (short)context.Random.Next((int)(enemyLeaderCfg.BaseAttraction / 2), (int)(enemyLeaderCfg.BaseAttraction + 1));
			info.Age = (short)context.Random.Next(12, 25);
			GameData.Domains.Character.Character newCharacter = DomainManager.Character.CreateIntelligentCharacter(context, ref info);
			DomainManager.Character.CompleteCreatingCharacter(newCharacter.GetId());
			newCharacter.AddFeature(context, 198, false);
			DomainManager.Character.ChangeFavorabilityOptional(context, newCharacter, taiwu, -10000, 0);
			return newCharacter;
		}

		// Token: 0x06001DA8 RID: 7592 RVA: 0x0018B3B4 File Offset: 0x001895B4
		public static bool CheckEscapingRandomEnemy(short templateId)
		{
			return DomainManager.Adventure.GetEscapingRandomEnemies().Contains(templateId);
		}

		// Token: 0x06001DA9 RID: 7593 RVA: 0x0018B3D8 File Offset: 0x001895D8
		public static void ConquerEnemyNest(EventArgBox argBox)
		{
			Location location;
			argBox.Get<Location>("AdventureLocation", out location);
			DomainManager.Adventure.ConquerEnemyNest(EventHelper.Domain.MainThreadDataContext, location.AreaId, location.BlockId);
		}

		// Token: 0x06001DAA RID: 7594 RVA: 0x0018B418 File Offset: 0x00189618
		public unsafe static ItemKey GetTraitorsGangTributeCombatSkillBook(sbyte orgTemplateId)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			IntPtr intPtr = stackalloc byte[(UIntPtr)9];
			cpblk(intPtr, ref <PrivateImplementationDetails>.515C077002A7481D297D90D3DEB5CA9846BD71EDF57BA60EA9820CDF8AF09D59, 9);
			sbyte* weights = intPtr;
			sbyte grade = (sbyte)CollectionUtils.GetRandomWeightedElement(context.Random, weights, 9, 100);
			short combatSkillTemplateId = (from skill in Config.CombatSkill.Instance
			where skill.SectId == orgTemplateId && skill.Grade == grade
			select skill).ToList<CombatSkillItem>().GetRandom(context.Random).TemplateId;
			short bookTemplateId = Config.CombatSkill.Instance[combatSkillTemplateId].BookId;
			ItemKey book = DomainManager.Item.CreateSkillBook(context, bookTemplateId, -1, -1, -1, 50, true);
			taiwu.AddInventoryItem(context, book, 1, false);
			return book;
		}

		// Token: 0x06001DAB RID: 7595 RVA: 0x0018B4DC File Offset: 0x001896DC
		public static void TaiwuCollectTribute()
		{
			int taiwuCharId = DomainManager.Taiwu.GetTaiwuCharId();
			Location location = DomainManager.Taiwu.GetTaiwu().GetLocation();
			DomainManager.Adventure.CollectTribute(EventHelper.Domain.MainThreadDataContext, taiwuCharId, location.AreaId, location.BlockId);
		}

		// Token: 0x06001DAC RID: 7596 RVA: 0x0018B528 File Offset: 0x00189728
		public static bool TriggerBrideOpenContest(short settlementId)
		{
			MonthlyActionKey key = MonthlyEventActionsManager.PredefinedKeys["BrideOpenContestDefault"];
			ConfigWrapperAction wrapperAction = (ConfigWrapperAction)EventHelper.Domain.GetMonthlyAction(key);
			bool flag = wrapperAction.CurrConfigMonthlyAction != null;
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				Settlement settlement = DomainManager.Organization.GetSettlement(settlementId);
				sbyte stateTemplateId = DomainManager.Map.GetStateTemplateIdByAreaId(settlement.GetLocation().AreaId);
				wrapperAction.CreateWrappedAction(ConfigMonthlyActionDefines.OrgTemplateIdToContestForTaiwuBride[stateTemplateId], -1);
				result = (wrapperAction.CurrConfigMonthlyAction != null);
			}
			return result;
		}

		// Token: 0x06001DAD RID: 7597 RVA: 0x0018B5B0 File Offset: 0x001897B0
		public static bool IsAnyBrideOpenContestTriggered()
		{
			MonthlyActionKey key = MonthlyEventActionsManager.PredefinedKeys["BrideOpenContestDefault"];
			ConfigWrapperAction wrapperAction = (ConfigWrapperAction)EventHelper.Domain.GetMonthlyAction(key);
			return wrapperAction.CurrConfigMonthlyAction != null;
		}

		// Token: 0x06001DAE RID: 7598 RVA: 0x0018B5EC File Offset: 0x001897EC
		public static MonthlyActionKey TriggerTaiwuWeddingAdventure(int spouseCharId, Location location)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			MarriageTriggerAction action = new MarriageTriggerAction
			{
				SpouseCharId = spouseCharId,
				Location = location
			};
			DomainManager.TaiwuEvent.AddTempDynamicAction<MarriageTriggerAction>(context, action);
			return action.Key;
		}

		// Token: 0x06001DAF RID: 7599 RVA: 0x0018B630 File Offset: 0x00189830
		public static void SetCharacterMarriageStyle1(int charId, bool isShowMarriageStyle1)
		{
			if (isShowMarriageStyle1)
			{
				EventHelper.Domain.AppendMarriageLook1CharId(charId);
			}
			else
			{
				EventHelper.Domain.RemoveMarriageLook1CharId(charId);
			}
		}

		// Token: 0x06001DB0 RID: 7600 RVA: 0x0018B660 File Offset: 0x00189860
		public static void SetCharacterMarriageStyle2(int charId, bool isShowMarriageStyle1)
		{
			if (isShowMarriageStyle1)
			{
				EventHelper.Domain.AppendMarriageLook2CharId(charId);
			}
			else
			{
				EventHelper.Domain.RemoveMarriageLook2CharId(charId);
			}
		}

		// Token: 0x06001DB1 RID: 7601 RVA: 0x0018B690 File Offset: 0x00189890
		public static ItemKey RandomGiftForTaiwuMarriageAdventure(int charId, bool firstMarriage)
		{
			GameData.Domains.Character.Character character;
			bool flag = !DomainManager.Character.TryGetElement_Objects(charId, out character);
			if (flag)
			{
				DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(69, 1);
				defaultInterpolatedStringHandler.AppendFormatted<int>(charId);
				defaultInterpolatedStringHandler.AppendLiteral(" is not an exist character id for RandomGiftForTaiwuMarriageAdventure");
				throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
			}
			Inventory inventory = character.GetInventory();
			EventHelper.<>c__DisplayClass224_0 CS$<>8__locals1;
			CS$<>8__locals1.bestItemList = new List<ItemKey>();
			CS$<>8__locals1.midItemList = new List<ItemKey>();
			CS$<>8__locals1.lowItemList = new List<ItemKey>();
			foreach (KeyValuePair<ItemKey, int> pair in inventory.Items)
			{
				short subType = ItemTemplateHelper.GetItemSubType(pair.Key.ItemType, pair.Key.TemplateId);
				bool flag2 = subType == 1203;
				if (!flag2)
				{
					bool flag3 = !ItemTemplateHelper.IsTransferable(pair.Key.ItemType, pair.Key.TemplateId);
					if (!flag3)
					{
						bool flag4 = EventHelper.IsItemPoisoned(pair.Key);
						if (!flag4)
						{
							sbyte itemGrade = ItemTemplateHelper.GetGrade(pair.Key.ItemType, pair.Key.TemplateId);
							bool flag5 = itemGrade >= 6;
							if (flag5)
							{
								CS$<>8__locals1.bestItemList.Add(pair.Key);
							}
							else
							{
								bool flag6 = itemGrade >= 3;
								if (flag6)
								{
									CS$<>8__locals1.midItemList.Add(pair.Key);
								}
								else
								{
									CS$<>8__locals1.lowItemList.Add(pair.Key);
								}
							}
						}
					}
				}
			}
			bool flag7 = CS$<>8__locals1.lowItemList.Count + CS$<>8__locals1.midItemList.Count + CS$<>8__locals1.bestItemList.Count <= 0;
			ItemKey result;
			if (flag7)
			{
				result = ItemKey.Invalid;
			}
			else
			{
				switch (EventHelper.GetFavorabilityType(character, DomainManager.Taiwu.GetTaiwu()))
				{
				case 4:
				{
					List<ItemKey> list;
					if (firstMarriage)
					{
						list = EventHelper.<RandomGiftForTaiwuMarriageAdventure>g__GetRandomResult|224_0(50, 50, 0, CS$<>8__locals1.lowItemList, ref CS$<>8__locals1);
					}
					else
					{
						list = EventHelper.<RandomGiftForTaiwuMarriageAdventure>g__GetRandomResult|224_0(75, 25, 0, CS$<>8__locals1.lowItemList, ref CS$<>8__locals1);
					}
					bool flag8 = list.Count <= 0;
					if (flag8)
					{
						list.AddRange(CS$<>8__locals1.lowItemList);
					}
					bool flag9 = list.Count <= 0;
					if (flag9)
					{
						list.AddRange(CS$<>8__locals1.midItemList);
					}
					bool flag10 = list.Count <= 0;
					if (flag10)
					{
						list.AddRange(CS$<>8__locals1.bestItemList);
					}
					result = list.Sample<ItemKey>();
					break;
				}
				case 5:
				{
					List<ItemKey> list;
					if (firstMarriage)
					{
						list = EventHelper.<RandomGiftForTaiwuMarriageAdventure>g__GetRandomResult|224_0(25, 75, 0, CS$<>8__locals1.midItemList, ref CS$<>8__locals1);
					}
					else
					{
						list = EventHelper.<RandomGiftForTaiwuMarriageAdventure>g__GetRandomResult|224_0(50, 50, 0, CS$<>8__locals1.lowItemList, ref CS$<>8__locals1);
					}
					bool flag11 = list.Count <= 0;
					if (flag11)
					{
						list.AddRange(CS$<>8__locals1.midItemList);
					}
					bool flag12 = list.Count <= 0;
					if (flag12)
					{
						list.AddRange(CS$<>8__locals1.lowItemList);
					}
					bool flag13 = list.Count <= 0;
					if (flag13)
					{
						list.AddRange(CS$<>8__locals1.bestItemList);
					}
					result = list.Sample<ItemKey>();
					break;
				}
				case 6:
				{
					List<ItemKey> list;
					if (firstMarriage)
					{
						list = EventHelper.<RandomGiftForTaiwuMarriageAdventure>g__GetRandomResult|224_0(0, 75, 25, CS$<>8__locals1.midItemList, ref CS$<>8__locals1);
					}
					else
					{
						list = EventHelper.<RandomGiftForTaiwuMarriageAdventure>g__GetRandomResult|224_0(25, 75, 0, CS$<>8__locals1.midItemList, ref CS$<>8__locals1);
					}
					bool flag14 = list.Count <= 0;
					if (flag14)
					{
						list.AddRange(CS$<>8__locals1.bestItemList);
					}
					bool flag15 = list.Count <= 0;
					if (flag15)
					{
						list.AddRange(CS$<>8__locals1.midItemList);
					}
					bool flag16 = list.Count <= 0;
					if (flag16)
					{
						list.AddRange(CS$<>8__locals1.lowItemList);
					}
					result = list.Sample<ItemKey>();
					break;
				}
				default:
				{
					List<ItemKey> list;
					if (firstMarriage)
					{
						list = EventHelper.<RandomGiftForTaiwuMarriageAdventure>g__GetRandomResult|224_0(75, 25, 0, CS$<>8__locals1.lowItemList, ref CS$<>8__locals1);
					}
					else
					{
						list = EventHelper.<RandomGiftForTaiwuMarriageAdventure>g__GetRandomResult|224_0(100, 0, 0, CS$<>8__locals1.lowItemList, ref CS$<>8__locals1);
					}
					bool flag17 = list.Count <= 0;
					if (flag17)
					{
						list.AddRange(CS$<>8__locals1.lowItemList);
					}
					bool flag18 = list.Count <= 0;
					if (flag18)
					{
						list.AddRange(CS$<>8__locals1.midItemList);
					}
					bool flag19 = list.Count <= 0;
					if (flag19)
					{
						list.AddRange(CS$<>8__locals1.bestItemList);
					}
					result = list.Sample<ItemKey>();
					break;
				}
				}
			}
			return result;
		}

		// Token: 0x06001DB2 RID: 7602 RVA: 0x0018BB48 File Offset: 0x00189D48
		public static Location CreateJuniorXiangshuAdventure(int juniorXiangshuCharId, short adventureId, Location bestLocation)
		{
			bool flag = EventHelper.CheckMainStoryLineProgress(28);
			Location result;
			if (flag)
			{
				result = bestLocation;
			}
			else
			{
				bool flag2 = !EventHelper.CheckBlockHasAdventure(bestLocation);
				if (flag2)
				{
					bool flag3 = EventHelper.TryCreateAdventureSite(bestLocation.AreaId, bestLocation.BlockId, adventureId, true);
					if (flag3)
					{
						return bestLocation;
					}
				}
				Location randomLocation = EventHelper.GetAdventureGenerateRandomLocation(bestLocation, 1, 4, new short[]
				{
					118,
					119,
					120,
					121,
					122,
					123
				});
				GameData.Domains.Character.Character xiangshuChar;
				bool flag4 = DomainManager.Character.TryGetElement_Objects(juniorXiangshuCharId, out xiangshuChar);
				if (flag4)
				{
					EventHelper.MoveFixedCharacter(xiangshuChar, randomLocation);
				}
				EventHelper.TryCreateAdventureSite(randomLocation.AreaId, randomLocation.BlockId, adventureId, true);
				result = randomLocation;
			}
			return result;
		}

		// Token: 0x06001DB3 RID: 7603 RVA: 0x0018BBE4 File Offset: 0x00189DE4
		public static void CreateAndEnterAdventure(Location location, short templateId)
		{
			bool flag = EventHelper.TryCreateAdventureSite(location.AreaId, location.BlockId, templateId, false);
			if (flag)
			{
				EventHelper.EnterAdventureFromEvent(templateId, location.BlockId);
			}
		}

		// Token: 0x06001DB4 RID: 7604 RVA: 0x0018BC18 File Offset: 0x00189E18
		public static void EnterAdventureFromEvent(short templateId, short blockId)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			DomainManager.Adventure.EnterAdventure(context, templateId, null);
			GameDataBridge.AddDisplayEvent<short, short>(DisplayEventType.EnterAdventureFromEvent, templateId, blockId);
		}

		// Token: 0x06001DB5 RID: 7605 RVA: 0x0018BC4C File Offset: 0x00189E4C
		public static short GetXiangshuAvatarTemplateIdByXiangshuProgress(short startTemplateId)
		{
			sbyte xiangshuProgress = EventHelper.GetXiangshuProgress();
			int index = Math.Clamp((int)(xiangshuProgress / 2), 0, 8);
			return (short)((int)startTemplateId + index);
		}

		// Token: 0x06001DB6 RID: 7606 RVA: 0x0018BC74 File Offset: 0x00189E74
		public static void AddElopeLifeRecord(EventArgBox argBox)
		{
			GameData.Domains.Character.Character lover = argBox.GetCharacter("Lover");
			sbyte behaviorType = argBox.GetSbyte("SuccessLifeRecordBehaviorType");
			LifeRecordCollection collection = EventHelper.GetLifeRecordCollection();
			int taiwuId = DomainManager.Taiwu.GetTaiwuCharId();
			int date = DomainManager.World.GetCurrDate();
			Settlement settlement = DomainManager.Organization.GetSettlementByOrgTemplateId(lover.GetOrganizationInfo().OrgTemplateId);
			bool flag = settlement == null;
			if (!flag)
			{
				switch (behaviorType)
				{
				case 0:
					collection.AddSectPunishElopeSucceedJust(taiwuId, date, lover.GetId(), settlement.GetId());
					break;
				case 1:
					collection.AddSectPunishElopeSucceedKind(taiwuId, date, lover.GetId(), settlement.GetId());
					break;
				case 2:
					collection.AddSectPunishElopeSucceedEven(taiwuId, date, lover.GetId(), settlement.GetId());
					break;
				default:
					collection.AddSectPunishElopeSucceed(taiwuId, date, lover.GetId(), settlement.GetId());
					break;
				}
			}
		}

		// Token: 0x06001DB7 RID: 7607 RVA: 0x0018BD60 File Offset: 0x00189F60
		public static string MartialArtContestSetChiefNeutral(EventArgBox argBox)
		{
			short approve0 = EventHelper.GetSectApprovingRate(6);
			short approve = EventHelper.GetSectApprovingRate(7);
			short approve2 = EventHelper.GetSectApprovingRate(8);
			short approve3 = EventHelper.GetSectApprovingRate(9);
			short approve4 = EventHelper.GetSectApprovingRate(10);
			short nowMax = 0;
			int maxSect = 0;
			List<short> nowApprove = new List<short>
			{
				approve0,
				approve,
				approve2,
				approve3,
				approve4
			};
			for (int i = 0; i < nowApprove.Count; i++)
			{
				bool flag = nowApprove[i] > nowMax || (nowApprove[i] == nowMax && EventHelper.CheckProbability(50));
				if (flag)
				{
					maxSect = i;
					nowMax = nowApprove[i];
				}
			}
			EventHelper.SetAdventureParameter("SectsPraise", (int)(nowMax / 10));
			string result;
			switch (maxSect)
			{
			case 0:
			{
				EventHelper.SetChief(argBox, 6);
				GameData.Domains.Character.Character chief = argBox.GetCharacter("Chief");
				bool flag2 = (int)EventHelper.GetRoleAge(chief) >= GlobalConfig.Instance.AgeBaby;
				if (flag2)
				{
					result = "757f180a-7c43-4d89-ae08-a5866d1858e9";
				}
				else
				{
					result = "d92b0bf9-3530-4289-aaa8-15cf285e8313";
				}
				break;
			}
			case 1:
			{
				EventHelper.SetChief(argBox, 7);
				GameData.Domains.Character.Character chief2 = argBox.GetCharacter("Chief");
				bool flag3 = (int)EventHelper.GetRoleAge(chief2) >= GlobalConfig.Instance.AgeBaby;
				if (flag3)
				{
					result = "2bfa3320-4508-4913-bfdf-fe5270cb5960";
				}
				else
				{
					result = "0ae8b931-82e9-4fb6-b8e5-ec07783b4d5b";
				}
				break;
			}
			case 2:
			{
				EventHelper.SetChief(argBox, 8);
				GameData.Domains.Character.Character chief3 = argBox.GetCharacter("Chief");
				bool flag4 = (int)EventHelper.GetRoleAge(chief3) >= GlobalConfig.Instance.AgeBaby;
				if (flag4)
				{
					result = "de2c394a-9b06-4f2d-8b25-dd9b3ed2e751";
				}
				else
				{
					result = "02af8062-5582-4581-873e-c5a089652dc6";
				}
				break;
			}
			case 3:
			{
				EventHelper.SetChief(argBox, 9);
				GameData.Domains.Character.Character chief4 = argBox.GetCharacter("Chief");
				bool flag5 = (int)EventHelper.GetRoleAge(chief4) >= GlobalConfig.Instance.AgeBaby;
				if (flag5)
				{
					result = "b854ab03-2bdd-4cc1-8c3a-14f3bdcbd28d";
				}
				else
				{
					result = "ce4700fc-3e12-4fab-8244-84251a1f9197";
				}
				break;
			}
			case 4:
			{
				EventHelper.SetChief(argBox, 10);
				GameData.Domains.Character.Character chief5 = argBox.GetCharacter("Chief");
				bool flag6 = (int)EventHelper.GetRoleAge(chief5) >= GlobalConfig.Instance.AgeBaby;
				if (flag6)
				{
					result = "154273d8-e744-4653-8def-22e05b95a12d";
				}
				else
				{
					result = "54c81ea6-e9a0-494a-8560-34b0b3e453c6";
				}
				break;
			}
			default:
				result = string.Empty;
				break;
			}
			return result;
		}

		// Token: 0x06001DB8 RID: 7608 RVA: 0x0018BFCC File Offset: 0x0018A1CC
		private static void SetChief(EventArgBox argBox, sbyte sectTemplateId)
		{
			int count = argBox.GetAdventureParticipateCharacterCount(1);
			for (int i = 0; i < count; i++)
			{
				GameData.Domains.Character.Character character = argBox.GetAdventureParticipateCharacter(1, i);
				bool flag = character.GetOrganizationInfo().OrgTemplateId == sectTemplateId;
				if (flag)
				{
					argBox.Set("Chief", character.GetId());
					break;
				}
			}
		}

		// Token: 0x06001DB9 RID: 7609 RVA: 0x0018C028 File Offset: 0x0018A228
		public static string MartialArtContestSetChiefEvil(EventArgBox argBox)
		{
			short approve0 = EventHelper.GetSectApprovingRate(11);
			short approve = EventHelper.GetSectApprovingRate(12);
			short approve2 = EventHelper.GetSectApprovingRate(13);
			short approve3 = EventHelper.GetSectApprovingRate(14);
			short approve4 = EventHelper.GetSectApprovingRate(15);
			EventHelper.Log("Approve0" + approve0.ToString());
			EventHelper.Log("Approve1" + approve.ToString());
			EventHelper.Log("Approve2" + approve2.ToString());
			EventHelper.Log("Approve3" + approve3.ToString());
			EventHelper.Log("Approve4" + approve4.ToString());
			short nowMax = 0;
			int maxSect = 0;
			List<short> nowApprove = new List<short>
			{
				approve0,
				approve,
				approve2,
				approve3,
				approve4
			};
			for (int i = 0; i < nowApprove.Count; i++)
			{
				bool flag = nowApprove[i] > nowMax || (nowApprove[i] == nowMax && EventHelper.CheckProbability(50));
				if (flag)
				{
					maxSect = i;
					nowMax = nowApprove[i];
				}
			}
			EventHelper.SetAdventureParameter("SectsPraise", (int)(nowMax / 10));
			string result;
			switch (maxSect)
			{
			case 0:
			{
				EventHelper.SetChief(argBox, 11);
				GameData.Domains.Character.Character chief = argBox.GetCharacter("Chief");
				bool flag2 = (int)EventHelper.GetRoleAge(chief) >= GlobalConfig.Instance.AgeBaby;
				if (flag2)
				{
					result = "4cc81136-f946-454c-bcd1-c1d7feddad31";
				}
				else
				{
					result = "f97291aa-1e31-4d20-ac16-62ac2fadcc80";
				}
				break;
			}
			case 1:
			{
				EventHelper.SetChief(argBox, 12);
				GameData.Domains.Character.Character chief2 = argBox.GetCharacter("Chief");
				bool flag3 = (int)EventHelper.GetRoleAge(chief2) >= GlobalConfig.Instance.AgeBaby;
				if (flag3)
				{
					result = "40035a37-511d-46ad-a9c8-653440b61374";
				}
				else
				{
					result = "67b309e2-83e5-499e-9d9f-4af56d276812";
				}
				break;
			}
			case 2:
			{
				EventHelper.SetChief(argBox, 13);
				GameData.Domains.Character.Character chief3 = argBox.GetCharacter("Chief");
				bool flag4 = (int)EventHelper.GetRoleAge(chief3) >= GlobalConfig.Instance.AgeBaby;
				if (flag4)
				{
					result = "3cec2064-5218-4a0e-958e-99f2eb8d919b";
				}
				else
				{
					result = "737b38ae-723f-44ce-9e26-1a270c5f5081";
				}
				break;
			}
			case 3:
			{
				EventHelper.SetChief(argBox, 14);
				GameData.Domains.Character.Character chief4 = argBox.GetCharacter("Chief");
				bool flag5 = (int)EventHelper.GetRoleAge(chief4) >= GlobalConfig.Instance.AgeBaby;
				if (flag5)
				{
					result = "ee3c872f-560f-4093-a263-75fda1a81a89";
				}
				else
				{
					result = "5dc62583-38f1-4dfd-a681-5e563bd9b0d4";
				}
				break;
			}
			case 4:
			{
				EventHelper.SetChief(argBox, 15);
				GameData.Domains.Character.Character chief5 = argBox.GetCharacter("Chief");
				bool flag6 = (int)EventHelper.GetRoleAge(chief5) >= GlobalConfig.Instance.AgeBaby;
				if (flag6)
				{
					result = "ca44d23e-a8e5-47cc-971c-5cb60645de85";
				}
				else
				{
					result = "eec59f50-30d7-4378-9881-a48ea7879686";
				}
				break;
			}
			default:
				result = string.Empty;
				break;
			}
			return result;
		}

		// Token: 0x06001DBA RID: 7610 RVA: 0x0018C310 File Offset: 0x0018A510
		public static string MartialArtContestSetChiefGood(EventArgBox argBox)
		{
			short approve0 = EventHelper.GetSectApprovingRate(1);
			short approve = EventHelper.GetSectApprovingRate(2);
			short approve2 = EventHelper.GetSectApprovingRate(3);
			short approve3 = EventHelper.GetSectApprovingRate(4);
			short approve4 = EventHelper.GetSectApprovingRate(5);
			short nowMax = 0;
			int maxSect = 0;
			List<short> nowApprove = new List<short>
			{
				approve0,
				approve,
				approve2,
				approve3,
				approve4
			};
			for (int i = 0; i < nowApprove.Count; i++)
			{
				bool flag = nowApprove[i] > nowMax || (nowApprove[i] == nowMax && EventHelper.CheckProbability(50));
				if (flag)
				{
					maxSect = i;
					nowMax = nowApprove[i];
				}
			}
			EventHelper.SetAdventureParameter("SectsPraise", (int)(nowMax / 10));
			string result;
			switch (maxSect)
			{
			case 0:
			{
				EventHelper.SetChief(argBox, 1);
				GameData.Domains.Character.Character chief = argBox.GetCharacter("Chief");
				bool flag2 = (int)EventHelper.GetRoleAge(chief) >= GlobalConfig.Instance.AgeBaby;
				if (flag2)
				{
					result = "d6842127-784f-4916-96f7-16dab9ad999a";
				}
				else
				{
					result = "c98e04bb-03de-4064-86f7-df74f9168d4b";
				}
				break;
			}
			case 1:
			{
				EventHelper.SetChief(argBox, 2);
				GameData.Domains.Character.Character chief2 = argBox.GetCharacter("Chief");
				bool flag3 = (int)EventHelper.GetRoleAge(chief2) >= GlobalConfig.Instance.AgeBaby;
				if (flag3)
				{
					result = "3a9022cf-278b-409d-94da-b3c827b4cb71";
				}
				else
				{
					result = "446ef9c7-f48f-48d4-bbcc-5c27b607f450";
				}
				break;
			}
			case 2:
			{
				EventHelper.SetChief(argBox, 3);
				GameData.Domains.Character.Character chief3 = argBox.GetCharacter("Chief");
				bool flag4 = (int)EventHelper.GetRoleAge(chief3) >= GlobalConfig.Instance.AgeBaby;
				if (flag4)
				{
					result = "e8f45ddc-6e92-407b-9a32-81aa188d9b09";
				}
				else
				{
					result = "06de1b1d-bbd1-4503-bead-a7806f9f1381";
				}
				break;
			}
			case 3:
			{
				EventHelper.SetChief(argBox, 4);
				GameData.Domains.Character.Character chief4 = argBox.GetCharacter("Chief");
				bool flag5 = (int)EventHelper.GetRoleAge(chief4) >= GlobalConfig.Instance.AgeBaby;
				if (flag5)
				{
					result = "c73f9c93-18ce-4a8e-bccf-ead376d4c4a8";
				}
				else
				{
					result = "4c2b723c-18c1-4202-a6d4-b7bfaf38dfad";
				}
				break;
			}
			case 4:
			{
				EventHelper.SetChief(argBox, 5);
				GameData.Domains.Character.Character chief5 = argBox.GetCharacter("Chief");
				bool flag6 = (int)EventHelper.GetRoleAge(chief5) >= GlobalConfig.Instance.AgeBaby;
				if (flag6)
				{
					result = "f6aa3b41-0f1d-4387-96f6-abc74ff691fc";
				}
				else
				{
					result = "b8e9c419-b4a1-4269-bb36-08a81c13c974";
				}
				break;
			}
			default:
				result = string.Empty;
				break;
			}
			return result;
		}

		// Token: 0x06001DBB RID: 7611 RVA: 0x0018C578 File Offset: 0x0018A778
		public static GameData.Domains.Character.Animal TryGetAnimal(int id)
		{
			GameData.Domains.Character.Animal animal;
			bool flag = DomainManager.Extra.TryGetAnimal(id, out animal);
			if (flag)
			{
				return animal;
			}
			DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(29, 1);
			defaultInterpolatedStringHandler.AppendLiteral("Cannot find animal,animalId: ");
			defaultInterpolatedStringHandler.AppendFormatted<int>(id);
			throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
		}

		// Token: 0x06001DBC RID: 7612 RVA: 0x0018C5CA File Offset: 0x0018A7CA
		public static void RemoveAnimal(GameData.Domains.Character.Animal animal)
		{
			DomainManager.Extra.RemoveAnimal(EventHelper.Domain.MainThreadDataContext, animal);
		}

		// Token: 0x06001DBD RID: 7613 RVA: 0x0018C5E4 File Offset: 0x0018A7E4
		public static GameData.Domains.Character.Animal GetOrCreateAnimalByItemKey(ItemKey itemKey)
		{
			return DomainManager.Extra.GetOrCreateAnimalByItemKey(EventHelper.Domain.MainThreadDataContext, itemKey);
		}

		// Token: 0x06001DBE RID: 7614 RVA: 0x0018C60C File Offset: 0x0018A80C
		public static int GetAnimalByLocationAndTemplateId(Location location, short characterTemplateId)
		{
			return DomainManager.Extra.GetAnimalByLocationAndTemplateId(EventHelper.Domain.MainThreadDataContext, location, characterTemplateId);
		}

		// Token: 0x06001DBF RID: 7615 RVA: 0x0018C634 File Offset: 0x0018A834
		public static void RemoveSingleMapAnimalOnBlock(Location location, short animalCharacterId)
		{
			bool flag = location.IsValid();
			if (flag)
			{
				DomainManager.Extra.RemoveAnimalByLocationAndTemplateId(EventHelper.Domain.MainThreadDataContext, location, animalCharacterId);
			}
		}

		// Token: 0x06001DC0 RID: 7616 RVA: 0x0018C664 File Offset: 0x0018A864
		public static void MapAnimalEscapeToNearbyBlock(Location location)
		{
			bool flag = !location.IsValid();
			if (!flag)
			{
				List<GameData.Domains.Character.Animal> animals;
				bool flag2 = !DomainManager.Extra.TryGetAnimalsByLocation(location, out animals);
				if (!flag2)
				{
					MapBlockData blockData = DomainManager.Map.GetBlock(location);
					List<MapBlockData> neighborBlocks = ObjectPool<List<MapBlockData>>.Instance.Get();
					DataContext context = EventHelper.Domain.MainThreadDataContext;
					DomainManager.Adventure.GetValidBlocksForRandomEnemy(location.AreaId, blockData.BlockId, 2, false, false, true, neighborBlocks);
					foreach (GameData.Domains.Character.Animal animal in animals)
					{
						MapBlockData targetBlock = neighborBlocks.GetRandom(context.Random);
						Location dstLocation = targetBlock.GetLocation();
						DomainManager.Extra.SetAnimalLocation(context, animal, dstLocation);
					}
					ObjectPool<List<MapBlockData>>.Instance.Return(neighborBlocks);
				}
			}
		}

		// Token: 0x06001DC1 RID: 7617 RVA: 0x0018C754 File Offset: 0x0018A954
		public static void RemoveFleeCarrierLocation(ItemKey itemKey)
		{
			DomainManager.Extra.RemoveFleeCarrierLocation(EventHelper.Domain.MainThreadDataContext, itemKey);
		}

		// Token: 0x06001DC2 RID: 7618 RVA: 0x0018C770 File Offset: 0x0018A970
		public static string HandleAnimalCombatResult(EventArgBox argBox, bool isDieCombat)
		{
			GameData.Domains.Character.Character taiwu = argBox.GetCharacter("RoleTaiwu");
			int animalId = -1;
			argBox.Get("AnimalId", ref animalId);
			GameData.Domains.Character.Animal animal = EventHelper.TryGetAnimal(animalId);
			short animalTemplateId = -1;
			argBox.Get("AnimalCharacterTemplateId", ref animalTemplateId);
			CharacterItem animalConfig = Config.Character.Instance[animalTemplateId];
			ItemKey escapeCarrier = animal.ItemKey;
			bool useHunterSkill = false;
			ItemKey animalItem;
			bool flag = argBox.Get<ItemKey>("CarrierItemKeyGotInCombat", out animalItem);
			string result;
			if (flag)
			{
				ItemKey seizeItem;
				argBox.Get<ItemKey>("ItemKeySeizeCarrierInCombat", out seizeItem);
				argBox.Remove<ItemKey>("CarrierItemKeyGotInCombat");
				argBox.Remove<ItemKey>("ItemKeySeizeCharacterInCombat");
				ProfessionFormulaItem formulaItemHunter3 = ProfessionFormula.Instance[10];
				EventHelper.ChangeProfessionSeniority(1, formulaItemHunter3.Calculate((int)animalConfig.ConsummateLevel), false);
				string nextString = "";
				bool flag2 = escapeCarrier.IsValid();
				if (flag2)
				{
					EventHelper.RemoveInventoryOrEquipItem(taiwu, animalItem, 1, true);
					animalItem = escapeCarrier;
					EventHelper.RemoveFleeCarrierLocation(animalItem);
					argBox.Set("EscapeCarriers", Config.Carrier.Instance[animalItem.TemplateId].Name);
					EventHelper.AddItemToRole(taiwu, escapeCarrier, 1, -1);
					EventHelper.ApplyAnimalTamingResult(taiwu, animal, true, taiwu.GetLocation(), seizeItem);
					LifeRecordCollection lifeRecordCollection = EventHelper.GetLifeRecordCollection();
					int date = EventHelper.GetGameDate();
					lifeRecordCollection.AddTameCarrierSucceed(taiwu.GetId(), date, escapeCarrier.ItemType, escapeCarrier.TemplateId, taiwu.GetLocation());
					nextString = "33fb78b2-c124-4919-96d6-6b98d4ce3712";
				}
				EventHelper.ShowGetItemPageForItems(new List<ValueTuple<ItemKey, int>>
				{
					new ValueTuple<ItemKey, int>(animalItem, 1)
				}, nextString, argBox, false);
				EventHelper.RemoveAnimal(animal);
				EventHelper.SetOnHandlingMonthlyEventBlock(false);
				result = string.Empty;
			}
			else
			{
				ProfessionFormulaItem formulaItemHunter4 = ProfessionFormula.Instance[9];
				int combatResult = 0;
				bool flag3 = argBox.Get("CombatResult", ref combatResult);
				if (flag3)
				{
					switch (combatResult)
					{
					case 0:
					case 5:
					{
						EventHelper.ChangeProfessionSeniority(1, formulaItemHunter4.Calculate((int)animalConfig.ConsummateLevel), false);
						bool flag4 = argBox.Get("UseHunterSkill1", ref useHunterSkill) && useHunterSkill;
						if (flag4)
						{
							Dictionary<Location, List<short>> dict = new Dictionary<Location, List<short>>();
							dict.Add(taiwu.GetLocation(), new List<short>
							{
								animalTemplateId
							});
							List<ItemKey> escapeCarriers = new List<ItemKey>();
							List<ValueTuple<ItemKey, int>> items = EventHelper.HunterGetCarriers(dict, ref escapeCarriers);
							bool flag5 = escapeCarriers.Count > 0;
							if (flag5)
							{
								string itemKeyName = "";
								for (int i = 0; i < escapeCarriers.Count; i++)
								{
									CarrierItem config = Config.Carrier.Instance[escapeCarriers[i].TemplateId];
									itemKeyName += config.Name;
									bool flag6 = i != escapeCarriers.Count - 1;
									if (flag6)
									{
										itemKeyName += "、";
									}
								}
								argBox.Set("EscapeCarriers", itemKeyName);
							}
							string nextString2 = (escapeCarriers.Count > 0) ? "33fb78b2-c124-4919-96d6-6b98d4ce3712" : string.Empty;
							EventHelper.ShowGetItemPageForItems(items, nextString2, argBox, false);
						}
						else
						{
							bool flag7 = escapeCarrier.IsValid();
							if (flag7)
							{
								string nextString3 = "33fb78b2-c124-4919-96d6-6b98d4ce3712";
								EventHelper.RemoveFleeCarrierLocation(escapeCarrier);
								argBox.Set("EscapeCarriers", Config.Carrier.Instance[escapeCarrier.TemplateId].Name);
								EventHelper.AddItemToRole(taiwu, escapeCarrier, 1, -1);
								EventHelper.ApplyAnimalTamingResult(taiwu, animal, true, taiwu.GetLocation(), ItemKey.Invalid);
								LifeRecordCollection lifeRecordCollection2 = EventHelper.GetLifeRecordCollection();
								int date2 = EventHelper.GetGameDate();
								lifeRecordCollection2.AddTameCarrierSucceed(taiwu.GetId(), date2, escapeCarrier.ItemType, escapeCarrier.TemplateId, taiwu.GetLocation());
								EventHelper.ShowGetItemPageForItems(new List<ValueTuple<ItemKey, int>>
								{
									new ValueTuple<ItemKey, int>(escapeCarrier, 1)
								}, nextString3, argBox, false);
							}
						}
						EventHelper.RemoveAnimal(animal);
						EventHelper.SetOnHandlingMonthlyEventBlock(false);
						result = string.Empty;
						break;
					}
					case 1:
					case 2:
					case 4:
					{
						bool flag8 = combatResult != 2 && isDieCombat;
						if (flag8)
						{
							result = "36747168-c095-4365-8f5c-69795b1c216c";
						}
						else
						{
							bool flag9 = escapeCarrier.IsValid();
							if (flag9)
							{
								LifeRecordCollection lifeRecordCollection3 = EventHelper.GetLifeRecordCollection();
								int date3 = EventHelper.GetGameDate();
								lifeRecordCollection3.AddTameCarrierFail(taiwu.GetId(), date3, escapeCarrier.ItemType, escapeCarrier.TemplateId, taiwu.GetLocation());
							}
							result = "91afe2cb-ae83-4167-a834-811b7dcf7008";
						}
						break;
					}
					case 3:
					{
						EventHelper.ChangeProfessionSeniority(1, formulaItemHunter4.Calculate((int)animalConfig.ConsummateLevel), false);
						bool flag10 = escapeCarrier.IsValid();
						if (flag10)
						{
							LifeRecordCollection lifeRecordCollection4 = EventHelper.GetLifeRecordCollection();
							int date4 = EventHelper.GetGameDate();
							lifeRecordCollection4.AddTameCarrierFail(taiwu.GetId(), date4, escapeCarrier.ItemType, escapeCarrier.TemplateId, taiwu.GetLocation());
						}
						result = "3a863e8f-5dc2-46d5-8f20-d405c7dcd98b";
						break;
					}
					default:
						result = string.Empty;
						break;
					}
				}
				else
				{
					EventHelper.SetOnHandlingMonthlyEventBlock(false);
					result = string.Empty;
				}
			}
			return result;
		}

		// Token: 0x06001DC3 RID: 7619 RVA: 0x0018CC34 File Offset: 0x0018AE34
		[Obsolete]
		public static void RemoveFleeCarrierLocation(int itemId)
		{
			ItemKey itemKey = ItemKey.Invalid;
			GameData.Domains.Item.Carrier carrier;
			bool flag = DomainManager.Item.TryGetElement_Carriers(itemId, out carrier);
			if (flag)
			{
				itemKey = carrier.GetItemKey();
			}
			else
			{
				GameData.Domains.Item.Material material;
				bool flag2 = DomainManager.Item.TryGetElement_Materials(itemId, out material);
				if (flag2)
				{
					itemKey = material.GetItemKey();
				}
				else
				{
					GameData.Domains.Item.Medicine medicine;
					bool flag3 = DomainManager.Item.TryGetElement_Medicines(itemId, out medicine);
					if (flag3)
					{
						itemKey = medicine.GetItemKey();
					}
				}
			}
			GameData.Domains.Character.Animal animal;
			bool flag4 = !DomainManager.Extra.TryGetAnimalByItemKey(itemKey, out animal);
			if (!flag4)
			{
				DomainManager.Extra.RemoveFleeCarrierLocation(EventHelper.Domain.MainThreadDataContext, itemKey);
			}
		}

		// Token: 0x06001DC4 RID: 7620 RVA: 0x0018CCC8 File Offset: 0x0018AEC8
		[Obsolete]
		public static ItemKey GetFleeCarrierByLocation(short templateId, Location location)
		{
			return DomainManager.Extra.GetFleeCarrierByLocation(templateId, location);
		}

		// Token: 0x06001DC5 RID: 7621 RVA: 0x0018CCE6 File Offset: 0x0018AEE6
		[Obsolete]
		public static void RemoveMapAnimalOnBlock(Location location)
		{
			DomainManager.Map.RemoveBlockAnimal(location, EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x06001DC6 RID: 7622 RVA: 0x0018CD00 File Offset: 0x0018AF00
		public static EventArgBox GetGlobalArgBox()
		{
			return EventHelper.Domain.GetGlobalEventArgumentBox();
		}

		// Token: 0x06001DC7 RID: 7623 RVA: 0x0018CD1C File Offset: 0x0018AF1C
		public static void SaveGlobalArg<T>(string key, T value)
		{
			EventHelper.Domain.SaveArgToGlobalArgBox<T>(key, value);
		}

		// Token: 0x06001DC8 RID: 7624 RVA: 0x0018CD2C File Offset: 0x0018AF2C
		public static void ClearGlobalArgBox()
		{
			EventHelper.Domain.ClearGlobalEventArgumentBox();
		}

		// Token: 0x06001DC9 RID: 7625 RVA: 0x0018CD3C File Offset: 0x0018AF3C
		public static bool GlobalArgBoxContainsKey<T>(string key)
		{
			return EventHelper.GetGlobalArgBox().Contains<T>(key);
		}

		// Token: 0x06001DCA RID: 7626 RVA: 0x0018CD59 File Offset: 0x0018AF59
		public static void RemoveFromGlobalArgBox<T>(string key)
		{
			EventHelper.GetGlobalArgBox().Remove<T>(key);
			EventHelper.Domain.SaveGlobalEventArgumentBox();
		}

		// Token: 0x06001DCB RID: 7627 RVA: 0x0018CD74 File Offset: 0x0018AF74
		public static byte GetByteFromGlobalArgBox(string key)
		{
			byte value = 0;
			EventHelper.GetGlobalArgBox().Get(key, ref value);
			return value;
		}

		// Token: 0x06001DCC RID: 7628 RVA: 0x0018CD98 File Offset: 0x0018AF98
		public static sbyte GetSbyteFromGlobalArgBox(string key)
		{
			sbyte value = 0;
			EventHelper.GetGlobalArgBox().Get(key, ref value);
			return value;
		}

		// Token: 0x06001DCD RID: 7629 RVA: 0x0018CDBC File Offset: 0x0018AFBC
		public static short GetShortFromGlobalArgBox(string key)
		{
			short value = 0;
			EventHelper.GetGlobalArgBox().Get(key, ref value);
			return value;
		}

		// Token: 0x06001DCE RID: 7630 RVA: 0x0018CDE0 File Offset: 0x0018AFE0
		public static ushort GetUshortFromGlobalArgBox(string key)
		{
			ushort value = 0;
			EventHelper.GetGlobalArgBox().Get(key, ref value);
			return value;
		}

		// Token: 0x06001DCF RID: 7631 RVA: 0x0018CE04 File Offset: 0x0018B004
		public static int GetIntFromGlobalArgBox(string key)
		{
			int value = 0;
			EventHelper.GetGlobalArgBox().Get(key, ref value);
			return value;
		}

		// Token: 0x06001DD0 RID: 7632 RVA: 0x0018CE28 File Offset: 0x0018B028
		public static float GetFloatFromGlobalArgBox(string key)
		{
			float value = 0f;
			EventHelper.GetGlobalArgBox().Get(key, ref value);
			return value;
		}

		// Token: 0x06001DD1 RID: 7633 RVA: 0x0018CE50 File Offset: 0x0018B050
		public static bool GetBoolFromGlobalArgBox(string key)
		{
			bool value = false;
			EventHelper.GetGlobalArgBox().Get(key, ref value);
			return value;
		}

		// Token: 0x06001DD2 RID: 7634 RVA: 0x0018CE74 File Offset: 0x0018B074
		public static string GetStringFromGlobalArgBox(string key)
		{
			string value = string.Empty;
			EventHelper.GetGlobalArgBox().Get(key, ref value);
			return value;
		}

		// Token: 0x06001DD3 RID: 7635 RVA: 0x0018CE9C File Offset: 0x0018B09C
		public static T GetObjectFromGlobalArgBox<T>(string key) where T : ISerializableGameData
		{
			T value;
			EventHelper.GetGlobalArgBox().Get<T>(key, out value);
			return value;
		}

		// Token: 0x06001DD4 RID: 7636 RVA: 0x0018CEC0 File Offset: 0x0018B0C0
		public unsafe static short GetRoleCurrentMainAttributes(GameData.Domains.Character.Character character, sbyte attrType)
		{
			bool flag = character == null;
			short result;
			if (flag)
			{
				result = 0;
			}
			else
			{
				result = *(ref character.GetCurrMainAttributes().Items.FixedElementField + (IntPtr)attrType * 2);
			}
			return result;
		}

		// Token: 0x06001DD5 RID: 7637 RVA: 0x0018CEF8 File Offset: 0x0018B0F8
		public unsafe static int GetRoleHitValue(GameData.Domains.Character.Character character, sbyte attackHitType)
		{
			bool flag = character == null;
			if (flag)
			{
				throw new Exception("null character to change GetRoleHitValue!");
			}
			return *(ref character.GetHitValues().Items.FixedElementField + (IntPtr)attackHitType * 4);
		}

		// Token: 0x06001DD6 RID: 7638 RVA: 0x0018CF38 File Offset: 0x0018B138
		public unsafe static int GetRoleAvoidValue(GameData.Domains.Character.Character character, sbyte attackHitType)
		{
			bool flag = character == null;
			if (flag)
			{
				throw new Exception("null character to change GetRoleAvoidValue!");
			}
			return *(ref character.GetAvoidValues().Items.FixedElementField + (IntPtr)attackHitType * 4);
		}

		// Token: 0x06001DD7 RID: 7639 RVA: 0x0018CF78 File Offset: 0x0018B178
		public static int GetRolePenetrationValue(GameData.Domains.Character.Character character, bool inner)
		{
			bool flag = character == null;
			if (flag)
			{
				throw new Exception("null character to change GetRoleAvoidValue!");
			}
			OuterAndInnerInts penetrationInts = character.GetPenetrations();
			return inner ? penetrationInts.Inner : penetrationInts.Outer;
		}

		// Token: 0x06001DD8 RID: 7640 RVA: 0x0018CFB8 File Offset: 0x0018B1B8
		public static int GetRolePenetrationResistValue(GameData.Domains.Character.Character character, bool inner)
		{
			bool flag = character == null;
			if (flag)
			{
				throw new Exception("null character to change GetRolePenetrationResistValue!");
			}
			OuterAndInnerInts penetrationResistInts = character.GetPenetrationResists();
			return inner ? penetrationResistInts.Inner : penetrationResistInts.Outer;
		}

		// Token: 0x06001DD9 RID: 7641 RVA: 0x0018CFF8 File Offset: 0x0018B1F8
		public unsafe static short GetRoleMaxMainAttributes(GameData.Domains.Character.Character character, sbyte attrType)
		{
			bool flag = character == null;
			short result;
			if (flag)
			{
				result = 0;
			}
			else
			{
				result = *(ref character.GetMaxMainAttributes().Items.FixedElementField + (IntPtr)attrType * 2);
			}
			return result;
		}

		// Token: 0x06001DDA RID: 7642 RVA: 0x0018D030 File Offset: 0x0018B230
		public unsafe static int GetRolePoisonByType(GameData.Domains.Character.Character character, sbyte poisonType)
		{
			bool flag = character == null;
			int result;
			if (flag)
			{
				result = 0;
			}
			else
			{
				result = *(ref character.GetPoisoned().Items.FixedElementField + (IntPtr)poisonType * 4);
			}
			return result;
		}

		// Token: 0x06001DDB RID: 7643 RVA: 0x0018D064 File Offset: 0x0018B264
		public unsafe static int GetRolePoisonResistByType(GameData.Domains.Character.Character character, sbyte poisonType)
		{
			bool flag = character == null;
			int result;
			if (flag)
			{
				result = 0;
			}
			else
			{
				bool flag2 = character.HasPoisonImmunity(poisonType);
				if (flag2)
				{
					result = -1;
				}
				else
				{
					result = *(ref character.GetPoisonResists().Items.FixedElementField + (IntPtr)poisonType * 4);
				}
			}
			return result;
		}

		// Token: 0x06001DDC RID: 7644 RVA: 0x0018D0A8 File Offset: 0x0018B2A8
		public static short GetRoleDisorderOfQiMaxValue()
		{
			return DisorderLevelOfQi.MaxValue;
		}

		// Token: 0x06001DDD RID: 7645 RVA: 0x0018D0C0 File Offset: 0x0018B2C0
		public static short GetRoleDisorderOfQi(GameData.Domains.Character.Character character)
		{
			bool flag = character == null;
			short result;
			if (flag)
			{
				result = 0;
			}
			else
			{
				result = character.GetDisorderOfQi();
			}
			return result;
		}

		// Token: 0x06001DDE RID: 7646 RVA: 0x0018D0E4 File Offset: 0x0018B2E4
		public static sbyte GetDisorderLevelOfQi(GameData.Domains.Character.Character character)
		{
			return DisorderLevelOfQi.GetDisorderLevelOfQi(EventHelper.GetRoleDisorderOfQi(character));
		}

		// Token: 0x06001DDF RID: 7647 RVA: 0x0018D101 File Offset: 0x0018B301
		public static void ChangeBaseMainAttribute(GameData.Domains.Character.Character character, sbyte mainAttributeType, short delta)
		{
			character.ChangeBaseMainAttribute(EventHelper.Domain.MainThreadDataContext, mainAttributeType, delta);
		}

		// Token: 0x06001DE0 RID: 7648 RVA: 0x0018D117 File Offset: 0x0018B317
		public static void PrenatalEducateForMainAttribute(short bonus)
		{
			DomainManager.Taiwu.PrenatalEducateForMainAttribute(EventHelper.Domain.MainThreadDataContext, bonus);
		}

		// Token: 0x06001DE1 RID: 7649 RVA: 0x0018D130 File Offset: 0x0018B330
		public static void PrenatalEducateForLifeSkill(short bonus)
		{
			DomainManager.Taiwu.PrenatalEducateForLifeSkill(EventHelper.Domain.MainThreadDataContext, bonus);
		}

		// Token: 0x06001DE2 RID: 7650 RVA: 0x0018D149 File Offset: 0x0018B349
		public static void PrenatalEducateForCombatSkill(short bonus)
		{
			DomainManager.Taiwu.PrenatalEducateForCombatSkill(EventHelper.Domain.MainThreadDataContext, bonus);
		}

		// Token: 0x06001DE3 RID: 7651 RVA: 0x0018D164 File Offset: 0x0018B364
		public static void ChangeRoleDisorderOfQi(GameData.Domains.Character.Character character, short delta)
		{
			bool flag = character == null;
			if (flag)
			{
				throw new Exception("null character to change DisorderOfQi!");
			}
			short beforeValue = character.GetDisorderOfQi();
			character.ChangeDisorderOfQi(EventHelper.Domain.MainThreadDataContext, (int)delta);
			bool flag2 = character.GetId() != DomainManager.Taiwu.GetTaiwuCharId();
			if (!flag2)
			{
				bool flag3 = DomainManager.Taiwu.IsInGroup(character.GetId());
				if (flag3)
				{
					short afterValue = character.GetDisorderOfQi();
					int changeValue = (int)(afterValue - beforeValue);
					InstantNotificationCollection collection = DomainManager.World.GetInstantNotificationCollection();
					bool flag4 = changeValue > 0;
					if (flag4)
					{
						collection.AddDisorderOfQiIncreased(character.GetId(), changeValue / 10);
					}
					else
					{
						bool flag5 = changeValue < 0;
						if (flag5)
						{
							collection.AddDisorderOfQiDecreased(character.GetId(), -changeValue / 10);
						}
					}
				}
			}
		}

		// Token: 0x06001DE4 RID: 7652 RVA: 0x0018D228 File Offset: 0x0018B428
		public unsafe static short GetRoleLifeSkillQualificationByType(GameData.Domains.Character.Character character, sbyte skillType)
		{
			bool flag = character == null;
			short result;
			if (flag)
			{
				result = 0;
			}
			else
			{
				result = *(ref character.GetLifeSkillQualifications().Items.FixedElementField + (IntPtr)skillType * 2);
			}
			return result;
		}

		// Token: 0x06001DE5 RID: 7653 RVA: 0x0018D25C File Offset: 0x0018B45C
		public unsafe static short GetRoleBaseLifeSkillQualificationByType(GameData.Domains.Character.Character character, sbyte skillType)
		{
			bool flag = character == null;
			short result;
			if (flag)
			{
				result = 0;
			}
			else
			{
				result = *(ref character.GetBaseLifeSkillQualifications().Items.FixedElementField + (IntPtr)skillType * 2);
			}
			return result;
		}

		// Token: 0x06001DE6 RID: 7654 RVA: 0x0018D290 File Offset: 0x0018B490
		public static short GetRoleLifeSkillAttainmentByType(GameData.Domains.Character.Character character, sbyte skillType)
		{
			bool flag = character == null;
			short result;
			if (flag)
			{
				result = 0;
			}
			else
			{
				result = character.GetLifeSkillAttainment(skillType);
			}
			return result;
		}

		// Token: 0x06001DE7 RID: 7655 RVA: 0x0018D2B8 File Offset: 0x0018B4B8
		public static short GetRoleLifeSkillAttainmentWithQualification(GameData.Domains.Character.Character character, sbyte skillType)
		{
			bool flag = character == null;
			short result;
			if (flag)
			{
				result = 0;
			}
			else
			{
				result = character.GetLifeSkillAttainment(skillType);
			}
			return result;
		}

		// Token: 0x06001DE8 RID: 7656 RVA: 0x0018D2E0 File Offset: 0x0018B4E0
		public unsafe static short GetRoleCombatSkillQualificationByType(GameData.Domains.Character.Character character, sbyte skillType)
		{
			bool flag = character == null;
			short result;
			if (flag)
			{
				result = 0;
			}
			else
			{
				result = *(ref character.GetCombatSkillQualifications().Items.FixedElementField + (IntPtr)skillType * 2);
			}
			return result;
		}

		// Token: 0x06001DE9 RID: 7657 RVA: 0x0018D314 File Offset: 0x0018B514
		public unsafe static short GetRoleBaseCombatSkillQualificationByType(GameData.Domains.Character.Character character, sbyte skillType)
		{
			bool flag = character == null;
			short result;
			if (flag)
			{
				result = 0;
			}
			else
			{
				result = *(ref character.GetBaseCombatSkillQualifications().Items.FixedElementField + (IntPtr)skillType * 2);
			}
			return result;
		}

		// Token: 0x06001DEA RID: 7658 RVA: 0x0018D348 File Offset: 0x0018B548
		public static short GetRoleCombatSkillAttainmentByType(GameData.Domains.Character.Character character, sbyte skillType)
		{
			bool flag = character == null;
			short result;
			if (flag)
			{
				result = 0;
			}
			else
			{
				result = character.GetCombatSkillAttainment(skillType);
			}
			return result;
		}

		// Token: 0x06001DEB RID: 7659 RVA: 0x0018D370 File Offset: 0x0018B570
		public static short GetRoleCombatSkillAttainmentWithQualification(GameData.Domains.Character.Character character, sbyte skillType)
		{
			bool flag = character == null;
			short result;
			if (flag)
			{
				result = 0;
			}
			else
			{
				result = character.GetCombatSkillAttainment(skillType);
			}
			return result;
		}

		// Token: 0x06001DEC RID: 7660 RVA: 0x0018D398 File Offset: 0x0018B598
		public static short GetRoleAge(GameData.Domains.Character.Character character)
		{
			bool flag = character == null;
			short result;
			if (flag)
			{
				result = 0;
			}
			else
			{
				result = character.GetPhysiologicalAge();
			}
			return result;
		}

		// Token: 0x06001DED RID: 7661 RVA: 0x0018D3BC File Offset: 0x0018B5BC
		public static short GetRoleCurrAge(GameData.Domains.Character.Character character)
		{
			bool flag = character == null;
			short result;
			if (flag)
			{
				result = 0;
			}
			else
			{
				result = character.GetCurrAge();
			}
			return result;
		}

		// Token: 0x06001DEE RID: 7662 RVA: 0x0018D3E0 File Offset: 0x0018B5E0
		public static short GetRoleActualAge(GameData.Domains.Character.Character character)
		{
			bool flag = character == null;
			short result;
			if (flag)
			{
				result = 0;
			}
			else
			{
				result = character.GetActualAge();
			}
			return result;
		}

		// Token: 0x06001DEF RID: 7663 RVA: 0x0018D404 File Offset: 0x0018B604
		public static bool GetRoleAgeAvailableForLove(GameData.Domains.Character.Character character)
		{
			bool flag = character == null;
			return !flag && AgeGroup.GetAgeGroup(EventHelper.GetRoleAge(character)) == 2 && AgeGroup.GetAgeGroup(EventHelper.GetRoleActualAge(character)) == 2;
		}

		// Token: 0x06001DF0 RID: 7664 RVA: 0x0018D444 File Offset: 0x0018B644
		public static short GetRoleHealthMax(GameData.Domains.Character.Character character)
		{
			bool flag = character == null;
			short result;
			if (flag)
			{
				result = 0;
			}
			else
			{
				result = character.GetMaxHealth();
			}
			return result;
		}

		// Token: 0x06001DF1 RID: 7665 RVA: 0x0018D468 File Offset: 0x0018B668
		public static short GetRoleLeftMaxHealth(GameData.Domains.Character.Character character)
		{
			bool flag = character == null;
			short result;
			if (flag)
			{
				result = 0;
			}
			else
			{
				result = character.GetLeftMaxHealth(false);
			}
			return result;
		}

		// Token: 0x06001DF2 RID: 7666 RVA: 0x0018D490 File Offset: 0x0018B690
		public static void ChangeRoleBaseHealth(GameData.Domains.Character.Character character, short delta)
		{
			bool flag = delta == 0;
			if (!flag)
			{
				bool flag2 = character == null;
				if (flag2)
				{
					throw new Exception("null character to ChangeRoleBaseHealth!");
				}
				short newBaseHealth = (short)Math.Clamp((int)(character.GetBaseMaxHealth() + delta), -32768, 32767);
				character.SetBaseMaxHealth(newBaseHealth, EventHelper.Domain.MainThreadDataContext);
			}
		}

		// Token: 0x06001DF3 RID: 7667 RVA: 0x0018D4E8 File Offset: 0x0018B6E8
		public static short GetRoleBirthMonth(GameData.Domains.Character.Character character)
		{
			bool flag = character == null;
			short result;
			if (flag)
			{
				result = 0;
			}
			else
			{
				result = (short)character.GetBirthMonth();
			}
			return result;
		}

		// Token: 0x06001DF4 RID: 7668 RVA: 0x0018D50C File Offset: 0x0018B70C
		public static sbyte GetRoleGender(GameData.Domains.Character.Character character)
		{
			bool flag = character == null;
			sbyte result;
			if (flag)
			{
				result = -1;
			}
			else
			{
				result = character.GetGender();
			}
			return result;
		}

		// Token: 0x06001DF5 RID: 7669 RVA: 0x0018D530 File Offset: 0x0018B730
		public static sbyte GetRoleBehavior(GameData.Domains.Character.Character character)
		{
			bool flag = character == null;
			sbyte result;
			if (flag)
			{
				result = -1;
			}
			else
			{
				result = character.GetBehaviorType();
			}
			return result;
		}

		// Token: 0x06001DF6 RID: 7670 RVA: 0x0018D554 File Offset: 0x0018B754
		public static void ChangeRoleBaseBehaviorValue(GameData.Domains.Character.Character character, int delta)
		{
			bool flag = delta == 0;
			if (!flag)
			{
				bool flag2 = character == null;
				if (flag2)
				{
					throw new Exception("null character to ChangeRoleBaseBehaviorValue!");
				}
				sbyte lastType = character.GetBehaviorType();
				character.ChangeBaseMorality(EventHelper.Domain.MainThreadDataContext, delta);
				sbyte curType = character.GetBehaviorType();
				bool flag3 = lastType != curType && DomainManager.Taiwu.IsInGroup(character.GetId());
				if (flag3)
				{
					InstantNotificationCollection instantNotifications = DomainManager.World.GetInstantNotificationCollection();
					instantNotifications.AddBehaviorTypeChanged(character.GetId(), curType);
				}
			}
		}

		// Token: 0x06001DF7 RID: 7671 RVA: 0x0018D5DC File Offset: 0x0018B7DC
		public static void ChangeRoleBehaviorType(GameData.Domains.Character.Character character, sbyte behaviorType)
		{
			sbyte lastType = character.GetBehaviorType();
			int finalValue = (int)((GameData.Domains.Character.BehaviorType.Ranges[(int)behaviorType].Item2 + GameData.Domains.Character.BehaviorType.Ranges[(int)behaviorType].Item1) / 2);
			character.SetBaseMorality((short)finalValue, EventHelper.Domain.MainThreadDataContext);
			sbyte curType = character.GetBehaviorType();
			bool flag = lastType != curType && DomainManager.Taiwu.IsInGroup(character.GetId());
			if (flag)
			{
				InstantNotificationCollection instantNotifications = DomainManager.World.GetInstantNotificationCollection();
				instantNotifications.AddBehaviorTypeChanged(character.GetId(), curType);
			}
		}

		// Token: 0x06001DF8 RID: 7672 RVA: 0x0018D668 File Offset: 0x0018B868
		public static sbyte GetRoleFameType(GameData.Domains.Character.Character character)
		{
			bool flag = character == null;
			sbyte result;
			if (flag)
			{
				result = -1;
			}
			else
			{
				result = character.GetFameType();
			}
			return result;
		}

		// Token: 0x06001DF9 RID: 7673 RVA: 0x0018D68C File Offset: 0x0018B88C
		public static sbyte GetRoleFame(GameData.Domains.Character.Character character)
		{
			bool flag = character == null;
			sbyte result;
			if (flag)
			{
				result = 0;
			}
			else
			{
				result = character.GetFame();
			}
			return result;
		}

		// Token: 0x06001DFA RID: 7674 RVA: 0x0018D6B0 File Offset: 0x0018B8B0
		public static int GetRoleResource(GameData.Domains.Character.Character character, sbyte resourceType)
		{
			bool flag = character == null;
			int result;
			if (flag)
			{
				result = 0;
			}
			else
			{
				result = character.GetResource(resourceType);
			}
			return result;
		}

		// Token: 0x06001DFB RID: 7675 RVA: 0x0018D6D8 File Offset: 0x0018B8D8
		public static void ChangeRoleResource(GameData.Domains.Character.Character character, sbyte resourceType, int delta, bool addNotification = true)
		{
			bool flag = character == null;
			if (flag)
			{
				throw new Exception("null character to change resource!");
			}
			int taiwuId = DomainManager.Taiwu.GetTaiwuCharId();
			bool flag2 = taiwuId == character.GetId();
			if (flag2)
			{
				character.ChangeResource(EventHelper.Domain.MainThreadDataContext, resourceType, delta);
				bool flag3 = addNotification && DomainManager.Taiwu.IsInGroup(character.GetId());
				if (flag3)
				{
					InstantNotificationCollection collection = DomainManager.World.GetInstantNotificationCollection();
					bool flag4 = delta > 0;
					if (flag4)
					{
						collection.AddResourceIncreased(character.GetId(), resourceType, delta);
					}
					else
					{
						bool flag5 = delta < 0;
						if (flag5)
						{
							collection.AddResourceDecreased(character.GetId(), resourceType, -delta);
						}
					}
				}
			}
			else
			{
				character.ChangeResource(EventHelper.Domain.MainThreadDataContext, resourceType, delta);
			}
		}

		// Token: 0x06001DFC RID: 7676 RVA: 0x0018D79C File Offset: 0x0018B99C
		public static int CalcResourceChangeByWorldResourceAmount(int delta)
		{
			bool flag = DomainManager.Adventure.GetCurAdventureId() >= 0;
			if (flag)
			{
				delta = delta * DomainManager.World.GetGainResourcePercent(5) / 100;
			}
			return delta;
		}

		// Token: 0x06001DFD RID: 7677 RVA: 0x0018D7D8 File Offset: 0x0018B9D8
		public static void ChangeRoleExp(GameData.Domains.Character.Character character, int delta)
		{
			character.ChangeExp(EventHelper.Domain.MainThreadDataContext, delta);
			bool flag = character.GetId() != DomainManager.Taiwu.GetTaiwuCharId();
			if (!flag)
			{
				InstantNotificationCollection collection = DomainManager.World.GetInstantNotificationCollection();
				bool flag2 = DomainManager.Taiwu.IsInGroup(character.GetId());
				if (flag2)
				{
					bool flag3 = delta > 0;
					if (flag3)
					{
						collection.AddExpIncreased(character.GetId(), delta);
					}
					else
					{
						bool flag4 = delta < 0;
						if (flag4)
						{
							collection.AddExpDecreased(character.GetId(), -delta);
						}
					}
				}
			}
		}

		// Token: 0x06001DFE RID: 7678 RVA: 0x0018D868 File Offset: 0x0018BA68
		public static int GetRoleExp(GameData.Domains.Character.Character character)
		{
			return character.GetExp();
		}

		// Token: 0x06001DFF RID: 7679 RVA: 0x0018D880 File Offset: 0x0018BA80
		public unsafe static sbyte GetRolePersonality(GameData.Domains.Character.Character character, sbyte personalityType)
		{
			bool flag = character == null;
			sbyte result;
			if (flag)
			{
				result = 0;
			}
			else
			{
				result = *(ref character.GetPersonalities().Items.FixedElementField + personalityType);
			}
			return result;
		}

		// Token: 0x06001E00 RID: 7680 RVA: 0x0018D8B4 File Offset: 0x0018BAB4
		public static byte GetRoleMonkType(GameData.Domains.Character.Character character)
		{
			bool flag = character == null;
			byte result;
			if (flag)
			{
				result = 0;
			}
			else
			{
				result = character.GetMonkType();
			}
			return result;
		}

		// Token: 0x06001E01 RID: 7681 RVA: 0x0018D8D8 File Offset: 0x0018BAD8
		public static short GetRoleCharm(GameData.Domains.Character.Character character)
		{
			bool flag = character == null;
			short result;
			if (flag)
			{
				result = 0;
			}
			else
			{
				result = character.GetAttraction();
			}
			return result;
		}

		// Token: 0x06001E02 RID: 7682 RVA: 0x0018D8FC File Offset: 0x0018BAFC
		public static sbyte GetRoleCharmType(GameData.Domains.Character.Character character)
		{
			bool flag = character == null;
			sbyte result;
			if (flag)
			{
				result = 3;
			}
			else
			{
				result = AttractionType.GetAttractionType(character.GetAttraction());
			}
			return result;
		}

		// Token: 0x06001E03 RID: 7683 RVA: 0x0018D928 File Offset: 0x0018BB28
		public static sbyte GetRoleHappiness(GameData.Domains.Character.Character character)
		{
			bool flag = character == null;
			sbyte result;
			if (flag)
			{
				result = 0;
			}
			else
			{
				result = character.GetHappiness();
			}
			return result;
		}

		// Token: 0x06001E04 RID: 7684 RVA: 0x0018D94C File Offset: 0x0018BB4C
		public static sbyte GetRoleHappinessType(GameData.Domains.Character.Character character)
		{
			bool flag = character == null;
			sbyte result;
			if (flag)
			{
				result = -1;
			}
			else
			{
				result = character.GetHappinessType();
			}
			return result;
		}

		// Token: 0x06001E05 RID: 7685 RVA: 0x0018D970 File Offset: 0x0018BB70
		public static int GetRoleSamsaraCount(GameData.Domains.Character.Character character)
		{
			bool flag = character == null;
			int result;
			if (flag)
			{
				result = 0;
			}
			else
			{
				result = character.GetPreexistenceCharIds().Count;
			}
			return result;
		}

		// Token: 0x06001E06 RID: 7686 RVA: 0x0018D99C File Offset: 0x0018BB9C
		public static sbyte GetRoleGrade(GameData.Domains.Character.Character character)
		{
			bool flag = character == null;
			sbyte result;
			if (flag)
			{
				result = 0;
			}
			else
			{
				result = character.GetInteractionGrade();
			}
			return result;
		}

		// Token: 0x06001E07 RID: 7687 RVA: 0x0018D9C0 File Offset: 0x0018BBC0
		public static short GetFavorability(GameData.Domains.Character.Character characterA, GameData.Domains.Character.Character characterB)
		{
			bool flag = characterA == null || characterB == null;
			short result;
			if (flag)
			{
				result = short.MinValue;
			}
			else
			{
				result = DomainManager.Character.GetFavorability(characterA.GetId(), characterB.GetId());
			}
			return result;
		}

		// Token: 0x06001E08 RID: 7688 RVA: 0x0018D9FE File Offset: 0x0018BBFE
		[Obsolete("Use ChangeFavorabilityOptional instead")]
		public static void ChangeFavorability(GameData.Domains.Character.Character characterA, GameData.Domains.Character.Character characterB, short changeValue, sbyte personalityType = -1, sbyte requiredPersonality = 0)
		{
			EventHelper.ChangeFavorabilityOptional(characterA, characterB, changeValue, -1);
		}

		// Token: 0x06001E09 RID: 7689 RVA: 0x0018DA0C File Offset: 0x0018BC0C
		public static void ChangeFavorabilityOptional(GameData.Domains.Character.Character characterA, GameData.Domains.Character.Character characterB, short changeValue, short type)
		{
			bool flag = characterA == null || characterB == null;
			if (flag)
			{
				throw new Exception("can not set character favorability for null character!");
			}
			int charAId = characterA.GetId();
			int charBId = characterB.GetId();
			bool flag2 = charAId == charBId;
			if (!flag2)
			{
				short prevFavorability = DomainManager.Character.GetFavorability(charAId, charBId);
				bool flag3 = prevFavorability == short.MinValue;
				if (flag3)
				{
					DomainManager.Character.TryCreateGeneralRelation(EventHelper.Domain.MainThreadDataContext, characterA, characterB);
					prevFavorability = DomainManager.Character.GetFavorability(charAId, charBId);
				}
				DomainManager.Character.ChangeFavorabilityOptional(EventHelper.Domain.MainThreadDataContext, characterA, characterB, (int)changeValue, type);
				bool flag4 = charBId == DomainManager.Taiwu.GetTaiwuCharId();
				if (flag4)
				{
					DomainManager.TaiwuEvent.RecordFavorabilityToTaiwuChanged(charAId, changeValue);
				}
				DomainManager.Character.AddFavorabilityChangeInstantNotification(characterA, characterB, changeValue > 0);
			}
		}

		// Token: 0x06001E0A RID: 7690 RVA: 0x0018DAE0 File Offset: 0x0018BCE0
		public static short ClampFavorabilityChangeValue(int changeValue)
		{
			return (short)Math.Clamp(changeValue, -32768, 32767);
		}

		// Token: 0x06001E0B RID: 7691 RVA: 0x0018DB03 File Offset: 0x0018BD03
		public static void ChangeFavorabilityOptionalFirstSightFavorability(GameData.Domains.Character.Character characterA, GameData.Domains.Character.Character characterB, short changeValue)
		{
			EventHelper.ChangeFavorabilityOptional(characterA, characterB, changeValue, 0);
		}

		// Token: 0x06001E0C RID: 7692 RVA: 0x0018DB10 File Offset: 0x0018BD10
		public static void ChangeFavorabilityOptionalGiftItem(GameData.Domains.Character.Character characterA, GameData.Domains.Character.Character characterB, short changeValue)
		{
			EventHelper.ChangeFavorabilityOptional(characterA, characterB, changeValue, 1);
		}

		// Token: 0x06001E0D RID: 7693 RVA: 0x0018DB1D File Offset: 0x0018BD1D
		public static void ChangeFavorabilityOptionalShareInformation(GameData.Domains.Character.Character characterA, GameData.Domains.Character.Character characterB, short changeValue)
		{
			EventHelper.ChangeFavorabilityOptional(characterA, characterB, changeValue, 2);
		}

		// Token: 0x06001E0E RID: 7694 RVA: 0x0018DB2A File Offset: 0x0018BD2A
		public static void ChangeFavorabilityOptionalRepeatedEvent(GameData.Domains.Character.Character characterA, GameData.Domains.Character.Character characterB, short changeValue)
		{
			EventHelper.ChangeFavorabilityOptional(characterA, characterB, changeValue, 3);
		}

		// Token: 0x06001E0F RID: 7695 RVA: 0x0018DB37 File Offset: 0x0018BD37
		public static void ChangeFavorabilityOptionalStoryEvent(GameData.Domains.Character.Character characterA, GameData.Domains.Character.Character characterB, short changeValue)
		{
			EventHelper.ChangeFavorabilityOptional(characterA, characterB, changeValue, 4);
		}

		// Token: 0x06001E10 RID: 7696 RVA: 0x0018DB44 File Offset: 0x0018BD44
		public static void ChangeFavorabilityOptionalMonthlyEvolution(GameData.Domains.Character.Character characterA, GameData.Domains.Character.Character characterB, short changeValue)
		{
			EventHelper.ChangeFavorabilityOptional(characterA, characterB, changeValue, 5);
		}

		// Token: 0x06001E11 RID: 7697 RVA: 0x0018DB51 File Offset: 0x0018BD51
		[Obsolete("Use ChangeFavorabilityWithMergeOptional instead")]
		public static void ChangeFavorabilityWithMerge(GameData.Domains.Character.Character characterA, GameData.Domains.Character.Character characterB, short changeValue, sbyte personalityType = -1, sbyte requiredPersonality = 0, bool isMerge = false)
		{
			EventHelper.ChangeFavorabilityWithMergeOptional(characterA, characterB, changeValue, -1, isMerge);
		}

		// Token: 0x06001E12 RID: 7698 RVA: 0x0018DB60 File Offset: 0x0018BD60
		public static void ChangeFavorabilityWithMergeOptional(GameData.Domains.Character.Character characterA, GameData.Domains.Character.Character characterB, short changeValue, short type, bool isMerge = false)
		{
			bool flag = characterA == null || characterB == null;
			if (flag)
			{
				throw new Exception("can not set character favorability for null character!");
			}
			int charAId = characterA.GetId();
			int charBId = characterB.GetId();
			bool flag2 = charAId == charBId;
			if (!flag2)
			{
				DomainManager.Character.ChangeFavorabilityOptional(EventHelper.Domain.MainThreadDataContext, characterA, characterB, (int)changeValue, type);
				bool flag3 = charBId == DomainManager.Taiwu.GetTaiwuCharId();
				if (flag3)
				{
					DomainManager.TaiwuEvent.RecordFavorabilityToTaiwuChanged(charAId, changeValue);
				}
				DomainManager.Character.AddFavorabilityChangeInstantNotification(characterA, characterB, changeValue > 0);
			}
		}

		// Token: 0x06001E13 RID: 7699 RVA: 0x0018DBEB File Offset: 0x0018BDEB
		[Obsolete("Use DirectlyChangeFavorabilityOptional instead")]
		public static void DirectlyChangeFavorability(GameData.Domains.Character.Character character, GameData.Domains.Character.Character relatedChar, int delta)
		{
			EventHelper.DirectlyChangeFavorabilityOptional(character, relatedChar, delta, -1);
		}

		// Token: 0x06001E14 RID: 7700 RVA: 0x0018DBF8 File Offset: 0x0018BDF8
		public static void DirectlyChangeFavorabilityOptional(GameData.Domains.Character.Character character, GameData.Domains.Character.Character relatedChar, int delta, short type = -1)
		{
			DataContext content = EventHelper.Domain.MainThreadDataContext;
			DomainManager.Character.DirectlyChangeFavorabilityOptional(content, character, relatedChar, delta, type);
		}

		// Token: 0x06001E15 RID: 7701 RVA: 0x0018DC24 File Offset: 0x0018BE24
		public static void DirectlyChangeFavorabilityOptionalStoryEvent(GameData.Domains.Character.Character character, GameData.Domains.Character.Character relatedChar, int delta)
		{
			DataContext content = EventHelper.Domain.MainThreadDataContext;
			DomainManager.Character.DirectlyChangeFavorabilityOptional(content, character, relatedChar, delta, 4);
		}

		// Token: 0x06001E16 RID: 7702 RVA: 0x0018DC50 File Offset: 0x0018BE50
		public static void DirectlySetFavorabilities(int charId, int relatedCharId, short value, short relatedValue)
		{
			DataContext content = EventHelper.Domain.MainThreadDataContext;
			DomainManager.Character.DirectlySetFavorabilities(content, charId, relatedCharId, value, relatedValue);
		}

		// Token: 0x06001E17 RID: 7703 RVA: 0x0018DC7C File Offset: 0x0018BE7C
		public static void DirectlyUpgradeFavorability(int charA, int charB)
		{
			DataContext content = EventHelper.Domain.MainThreadDataContext;
			DomainManager.Character.DirectlyUpgradeFavorability(content, charA, charB);
		}

		// Token: 0x06001E18 RID: 7704 RVA: 0x0018DCA4 File Offset: 0x0018BEA4
		public static sbyte GetFavorabilityType(GameData.Domains.Character.Character characterA, GameData.Domains.Character.Character characterB)
		{
			bool flag = characterA == null || characterB == null;
			sbyte result;
			if (flag)
			{
				result = sbyte.MinValue;
			}
			else
			{
				result = FavorabilityType.GetFavorabilityType(DomainManager.Character.GetFavorability(characterA.GetId(), characterB.GetId()));
			}
			return result;
		}

		// Token: 0x06001E19 RID: 7705 RVA: 0x0018DCE4 File Offset: 0x0018BEE4
		public static void ChangeXiangshuAvatarFavorability(sbyte xiangshuAvatarId, int delta)
		{
			DomainManager.World.ChangeXiangshuAvatarFavorability(EventHelper.Domain.MainThreadDataContext, xiangshuAvatarId, delta);
		}

		// Token: 0x06001E1A RID: 7706 RVA: 0x0018DD00 File Offset: 0x0018BF00
		public static sbyte GetXiangshuAvatarFavorabilityType(sbyte xiangshuAvatarId)
		{
			return DomainManager.World.GetXiangshuAvatarFavorabilityType(xiangshuAvatarId);
		}

		// Token: 0x06001E1B RID: 7707 RVA: 0x0018DD20 File Offset: 0x0018BF20
		public static void RecordRoleFameAction(GameData.Domains.Character.Character character, short fameActionId, int targetCharId = -1, short fameMultiplier = 1)
		{
			character.RecordFameAction(EventHelper.Domain.MainThreadDataContext, fameActionId, targetCharId, fameMultiplier, true);
			bool flag = character.GetId() != DomainManager.Taiwu.GetTaiwuCharId();
			if (!flag)
			{
				InstantNotificationCollection collection = DomainManager.World.GetInstantNotificationCollection();
				sbyte changeValue = FameAction.Instance[fameActionId].Fame;
				bool flag2 = changeValue > 0;
				if (flag2)
				{
					collection.AddFameIncreased(character.GetId());
				}
				else
				{
					bool flag3 = changeValue < 0;
					if (flag3)
					{
						collection.AddFameDecreased(character.GetId());
					}
				}
			}
		}

		// Token: 0x06001E1C RID: 7708 RVA: 0x0018DDA8 File Offset: 0x0018BFA8
		public static void RecordRoleFameActionJumpByFameType(GameData.Domains.Character.Character character, short fameActionId, sbyte targetFameType = -1, short fameMultiplier = 1)
		{
			character.RecordFameAction(EventHelper.Domain.MainThreadDataContext, fameActionId, targetFameType, fameMultiplier);
			bool flag = character.GetId() != DomainManager.Taiwu.GetTaiwuCharId();
			if (!flag)
			{
				InstantNotificationCollection collection = DomainManager.World.GetInstantNotificationCollection();
				sbyte changeValue = FameAction.Instance[fameActionId].Fame;
				bool flag2 = changeValue > 0;
				if (flag2)
				{
					collection.AddFameIncreased(character.GetId());
				}
				else
				{
					bool flag3 = changeValue < 0;
					if (flag3)
					{
						collection.AddFameDecreased(character.GetId());
					}
				}
			}
		}

		// Token: 0x06001E1D RID: 7709 RVA: 0x0018DE30 File Offset: 0x0018C030
		public unsafe static void SetRoleMainAttribute(GameData.Domains.Character.Character character, sbyte attrType, short attrValue)
		{
			bool flag = character == null;
			if (flag)
			{
				throw new Exception("null character to set MainAttributes!");
			}
			MainAttributes maxMainAttributes = character.GetMaxMainAttributes();
			MainAttributes currMainAttributes = character.GetCurrMainAttributes();
			bool flag2 = *(ref maxMainAttributes.Items.FixedElementField + (IntPtr)attrType * 2) <= 0;
			if (flag2)
			{
				attrValue = 0;
			}
			else
			{
				attrValue = Math.Clamp(attrValue, 0, *(ref maxMainAttributes.Items.FixedElementField + (IntPtr)attrType * 2));
			}
			*(ref currMainAttributes.Items.FixedElementField + (IntPtr)attrType * 2) = attrValue;
			character.SetCurrMainAttributes(currMainAttributes, EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x06001E1E RID: 7710 RVA: 0x0018DEC4 File Offset: 0x0018C0C4
		public static void ChangeRoleMainAttribute(GameData.Domains.Character.Character character, sbyte attrType, int changeValue)
		{
			bool flag = character == null;
			if (flag)
			{
				throw new Exception("null character to change MainAttributes!");
			}
			character.ChangeCurrMainAttribute(EventHelper.Domain.MainThreadDataContext, attrType, changeValue);
			InstantNotificationCollection collection = DomainManager.World.GetInstantNotificationCollection();
			short referencedType = (short)(attrType + 0);
			bool flag2 = changeValue > 0;
			if (flag2)
			{
				collection.AddMainAttributeRecovered(character.GetId(), referencedType, changeValue);
			}
			else
			{
				bool flag3 = changeValue < 0;
				if (flag3)
				{
					collection.AddMainAttributeConsumed(character.GetId(), referencedType, -changeValue);
				}
			}
		}

		// Token: 0x06001E1F RID: 7711 RVA: 0x0018DF40 File Offset: 0x0018C140
		public static void SetRoleHappiness(GameData.Domains.Character.Character character, sbyte newValue)
		{
			bool flag = character == null;
			if (flag)
			{
				throw new Exception("null character to set Happiness!");
			}
			newValue = Math.Clamp(newValue, -119, 119);
			character.SetHappiness(newValue, EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x06001E20 RID: 7712 RVA: 0x0018DF80 File Offset: 0x0018C180
		public static void ChangeRoleHappiness(GameData.Domains.Character.Character character, int deltaValue)
		{
			bool flag = character == null;
			if (flag)
			{
				throw new Exception("null character to change Happiness!");
			}
			character.ChangeHappiness(EventHelper.Domain.MainThreadDataContext, deltaValue);
			bool flag2 = DomainManager.Taiwu.IsInGroup(character.GetId());
			if (flag2)
			{
				InstantNotificationCollection collection = DomainManager.World.GetInstantNotificationCollection();
				bool flag3 = deltaValue > 0;
				if (flag3)
				{
					collection.AddHappinessIncreased(character.GetId());
				}
				else
				{
					bool flag4 = deltaValue < 0;
					if (flag4)
					{
						collection.AddHappinessDecreased(character.GetId());
					}
				}
			}
		}

		// Token: 0x06001E21 RID: 7713 RVA: 0x0018E004 File Offset: 0x0018C204
		public static void ChangeRoleBodyPartInjuryByLevel(GameData.Domains.Character.Character character, bool isInnerInjury, sbyte deltaLevel, sbyte bodyPart = -1)
		{
			bool flag = character == null;
			if (flag)
			{
				throw new Exception("null character to add injury value!");
			}
			bool flag2 = bodyPart == -1;
			if (flag2)
			{
				bodyPart = BodyPartType.GetRandomBodyPartType(EventHelper.Domain.MainThreadDataContext.Random);
			}
			character.ChangeInjury(EventHelper.Domain.MainThreadDataContext, bodyPart, isInnerInjury, deltaLevel);
			bool flag3 = DomainManager.Taiwu.IsInGroup(character.GetId());
			if (flag3)
			{
				InstantNotificationCollection collection = DomainManager.World.GetInstantNotificationCollection();
				bool flag4 = deltaLevel > 0;
				if (flag4)
				{
					collection.AddInjuryIncreased(character.GetId(), bodyPart, isInnerInjury ? 1 : 0);
				}
				else
				{
					bool flag5 = deltaLevel < 0;
					if (flag5)
					{
						collection.AddInjuryDecreased(character.GetId(), bodyPart, isInnerInjury ? 1 : 0);
					}
				}
			}
		}

		// Token: 0x06001E22 RID: 7714 RVA: 0x0018E0B8 File Offset: 0x0018C2B8
		public static void ChangePoisonByType(GameData.Domains.Character.Character character, sbyte poisonType, int changeValue, sbyte poisonLevel = 3)
		{
			bool flag = character == null;
			if (flag)
			{
				throw new Exception("null character to change poison value!");
			}
			character.ChangePoisoned(EventHelper.Domain.MainThreadDataContext, poisonType, poisonLevel, changeValue);
			InstantNotificationCollection collection = DomainManager.World.GetInstantNotificationCollection();
			bool flag2 = DomainManager.Taiwu.IsInGroup(character.GetId()) && !character.HasPoisonImmunity(poisonType);
			if (flag2)
			{
				bool flag3 = changeValue > 0;
				if (flag3)
				{
					collection.AddPoisonIncreased(character.GetId(), poisonType, changeValue);
				}
				else
				{
					bool flag4 = changeValue < 0;
					if (flag4)
					{
						collection.AddPoisonDecreased(character.GetId(), poisonType, -changeValue);
					}
				}
			}
		}

		// Token: 0x06001E23 RID: 7715 RVA: 0x0018E150 File Offset: 0x0018C350
		public static void RandomChangePoison(GameData.Domains.Character.Character character, int poisonPoint)
		{
			IRandomSource random = EventHelper.Domain.MainThreadDataContext.Random;
			List<int> poisonList = ObjectPool<List<int>>.Instance.Get();
			poisonList.Clear();
			while (poisonList.Count < 5)
			{
				int num = random.Next(0, poisonPoint);
				poisonList.Add(num);
			}
			poisonList.Add(0);
			poisonList.Add(poisonPoint);
			poisonList.Sort((int l, int r) => l.CompareTo(r));
			for (sbyte i = 0; i < 6; i += 1)
			{
				bool flag = poisonList[(int)(i + 1)] > poisonList[(int)i];
				if (flag)
				{
					EventHelper.ChangePoisonByType(character, i, poisonList[(int)(i + 1)] - poisonList[(int)i], 3);
				}
			}
			ObjectPool<List<int>>.Instance.Return(poisonList);
		}

		// Token: 0x06001E24 RID: 7716 RVA: 0x0018E234 File Offset: 0x0018C434
		public static void RandomChangeInjury(GameData.Domains.Character.Character character, int injuryPoint, bool isInner)
		{
			IRandomSource random = EventHelper.Domain.MainThreadDataContext.Random;
			List<int> injuryList = ObjectPool<List<int>>.Instance.Get();
			injuryList.Clear();
			while (injuryList.Count < 6)
			{
				int num = random.Next(0, injuryPoint + 1);
				injuryList.Add(num);
			}
			injuryList.Add(0);
			injuryList.Add(injuryPoint);
			injuryList.Sort((int l, int r) => l.CompareTo(r));
			for (sbyte i = 0; i < 6; i += 1)
			{
				bool flag = injuryList[(int)(i + 1)] > injuryList[(int)i];
				if (flag)
				{
					EventHelper.ChangeRoleBodyPartInjuryByLevel(character, isInner, (sbyte)(injuryList[(int)(i + 1)] - injuryList[(int)i]), i);
				}
			}
			ObjectPool<List<int>>.Instance.Return(injuryList);
		}

		// Token: 0x06001E25 RID: 7717 RVA: 0x0018E31C File Offset: 0x0018C51C
		public unsafe static short GetCharacterNeiliAllocationTypeValue(GameData.Domains.Character.Character character, sbyte neiliType)
		{
			bool flag = character == null;
			if (flag)
			{
				throw new Exception("null character to get NeiliAllocation type value!");
			}
			return *(ref character.GetNeiliAllocation().Items.FixedElementField + (IntPtr)neiliType * 2);
		}

		// Token: 0x06001E26 RID: 7718 RVA: 0x0018E35C File Offset: 0x0018C55C
		public static short GetRoleWearingCloth(GameData.Domains.Character.Character character)
		{
			bool flag = character == null;
			if (flag)
			{
				throw new Exception("null character to get Wearing Cloth!");
			}
			short clothDisplayId = character.GetClothingDisplayId();
			return ItemTemplateHelper.GetClothingTemplateIdByDisplayId((byte)clothDisplayId);
		}

		// Token: 0x06001E27 RID: 7719 RVA: 0x0018E390 File Offset: 0x0018C590
		public static byte GetRoleInfectedValue(GameData.Domains.Character.Character character)
		{
			bool flag = character == null;
			if (flag)
			{
				throw new Exception("null character to GetRoleInfectedValue!");
			}
			return character.GetXiangshuInfection();
		}

		// Token: 0x06001E28 RID: 7720 RVA: 0x0018E3BC File Offset: 0x0018C5BC
		public static void ChangeRoleInfectedValue(GameData.Domains.Character.Character character, int delta)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			bool flag = character == null;
			if (flag)
			{
				throw new Exception("null character to ChangeRoleInfectedValue!");
			}
			character.ChangeXiangshuInfection(context, delta);
			character.UpdateXiangshuInfectionState(context);
		}

		// Token: 0x06001E29 RID: 7721 RVA: 0x0018E3FC File Offset: 0x0018C5FC
		public static void SetRoleInfectedValue(GameData.Domains.Character.Character character, int setValue)
		{
			byte nowValue = EventHelper.GetRoleInfectedValue(character);
			EventHelper.ChangeRoleInfectedValue(character, -((int)nowValue - setValue));
		}

		// Token: 0x06001E2A RID: 7722 RVA: 0x0018E41C File Offset: 0x0018C61C
		public static void SetRoleInfectionValue(GameData.Domains.Character.Character character, byte infectionValue)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			bool flag = character == null;
			if (flag)
			{
				throw new Exception("null character to SetRoleInfectionType!");
			}
			character.SetXiangshuInfection(infectionValue, context);
			character.UpdateXiangshuInfectionState(context);
		}

		// Token: 0x06001E2B RID: 7723 RVA: 0x0018E45C File Offset: 0x0018C65C
		public static int GetSpiritualDebtChangeByInfected(GameData.Domains.Character.Character character)
		{
			bool flag = character == null;
			if (flag)
			{
				throw new Exception("null character to GetCharacterAvatarDataCopy!");
			}
			return DomainManager.Character.GetSpiritualDebtChangeByInfected(character, 100);
		}

		// Token: 0x06001E2C RID: 7724 RVA: 0x0018E490 File Offset: 0x0018C690
		public static AvatarData GetCharacterAvatarDataCopy(GameData.Domains.Character.Character character)
		{
			bool flag = character == null;
			if (flag)
			{
				throw new Exception("null character to GetCharacterAvatarDataCopy!");
			}
			return new AvatarData(character.GetAvatar());
		}

		// Token: 0x06001E2D RID: 7725 RVA: 0x0018E4C0 File Offset: 0x0018C6C0
		public static void HandleEffect_YuJingChenSi(GameData.Domains.Character.Character character, bool isGoodFeature)
		{
			bool flag = character == null;
			if (flag)
			{
				throw new Exception("null character to HandleEffect_YuJingChenSi!");
			}
			List<short> featureIds = character.GetFeatureIds();
			List<short[]> randomCore = new List<short[]>();
			for (int i = 0; i < featureIds.Count; i++)
			{
				CharacterFeatureItem config2 = CharacterFeature.Instance.GetItem(featureIds[i]);
				bool flag2 = !config2.Mergeable;
				if (!flag2)
				{
					bool flag3;
					if (isGoodFeature)
					{
						sbyte level = config2.Level;
						flag3 = (level > 0 && level < 3);
					}
					else
					{
						flag3 = false;
					}
					bool flag4 = flag3;
					if (flag4)
					{
						randomCore.Add(new short[]
						{
							config2.TemplateId,
							(short)config2.AppearProb
						});
					}
					bool flag5 = !isGoodFeature && config2.Level < -1;
					if (flag5)
					{
						randomCore.Add(new short[]
						{
							config2.TemplateId,
							(short)config2.AppearProb
						});
					}
				}
			}
			bool flag6 = randomCore.Count <= 0;
			if (!flag6)
			{
				short[] targetFeature = EventHelper.GetRandomCellFromWeightCore(randomCore);
				CharacterFeatureItem targetFeatureConfig = CharacterFeature.Instance.GetItem(targetFeature[0]);
				short replaceFeatureId = targetFeatureConfig.TemplateId;
				CharacterFeature.Instance.Iterate(delegate(CharacterFeatureItem config)
				{
					bool flag9 = config.MutexGroupId == targetFeatureConfig.MutexGroupId && config.Level == targetFeatureConfig.Level + 1;
					bool result;
					if (flag9)
					{
						replaceFeatureId = config.TemplateId;
						result = false;
					}
					else
					{
						result = true;
					}
					return result;
				});
				bool flag7 = replaceFeatureId != targetFeatureConfig.TemplateId;
				if (flag7)
				{
					for (int j = 0; j < featureIds.Count; j++)
					{
						bool flag8 = featureIds[j] == targetFeatureConfig.TemplateId;
						if (flag8)
						{
							featureIds[j] = replaceFeatureId;
							break;
						}
					}
					character.SetFeatureIds(featureIds, EventHelper.Domain.MainThreadDataContext);
				}
			}
		}

		// Token: 0x06001E2E RID: 7726 RVA: 0x0018E68C File Offset: 0x0018C88C
		public unsafe static List<ValueTuple<ItemKey, short, bool>> GetCharacterEatingItems(GameData.Domains.Character.Character character)
		{
			bool flag = character == null;
			if (flag)
			{
				throw new Exception("null character to GetCharacterEatingItems!");
			}
			EatingItems eatingItems = *character.GetEatingItems();
			List<ValueTuple<ItemKey, short, bool>> resultList = new List<ValueTuple<ItemKey, short, bool>>(9);
			for (int i = 0; i < 9; i++)
			{
				ItemKey itemKey = (ItemKey)(*(ref eatingItems.ItemKeys.FixedElementField + (IntPtr)i * 8));
				short duration = *(ref eatingItems.Durations.FixedElementField + (IntPtr)i * 2);
				bool isWug = EatingItems.IsWug(itemKey);
				resultList.Add(new ValueTuple<ItemKey, short, bool>(itemKey, duration, isWug));
			}
			return resultList;
		}

		// Token: 0x06001E2F RID: 7727 RVA: 0x0018E728 File Offset: 0x0018C928
		public static void HealCharacterRandomInjury(GameData.Domains.Character.Character character)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			List<sbyte> bodyPartTypeList = ObjectPool<List<sbyte>>.Instance.Get();
			for (sbyte i = 0; i < 7; i += 1)
			{
				bool flag = EventHelper.CheckRoleBodyPartInjured(character, i);
				if (flag)
				{
					bodyPartTypeList.Add(i);
				}
			}
			bool flag2 = bodyPartTypeList.Count == 0;
			if (!flag2)
			{
				sbyte bodyPartType = bodyPartTypeList.GetRandom(context.Random);
				EventHelper.ChangeRoleBodyPartInjuryByLevel(character, true, -6, bodyPartType);
				EventHelper.ChangeRoleBodyPartInjuryByLevel(character, false, -6, bodyPartType);
				ObjectPool<List<sbyte>>.Instance.Return(bodyPartTypeList);
			}
		}

		// Token: 0x06001E30 RID: 7728 RVA: 0x0018E7B8 File Offset: 0x0018C9B8
		public static void HealCharacterAllInjury(GameData.Domains.Character.Character character)
		{
			for (sbyte bodyPartType = 0; bodyPartType < 7; bodyPartType += 1)
			{
				EventHelper.ChangeRoleBodyPartInjuryByLevel(character, true, -6, bodyPartType);
				EventHelper.ChangeRoleBodyPartInjuryByLevel(character, false, -6, bodyPartType);
			}
		}

		// Token: 0x06001E31 RID: 7729 RVA: 0x0018E7F0 File Offset: 0x0018C9F0
		public unsafe static void HealCharacterAllPoison(GameData.Domains.Character.Character character)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			PoisonInts poisoned = *character.GetPoisoned();
			for (sbyte poisonType = 0; poisonType < 6; poisonType += 1)
			{
				bool flag = *(ref poisoned.Items.FixedElementField + (IntPtr)poisonType * 4) > 0;
				if (flag)
				{
					character.ChangePoisoned(context, poisonType, 3, -(*(ref poisoned.Items.FixedElementField + (IntPtr)poisonType * 4)));
				}
			}
		}

		// Token: 0x06001E32 RID: 7730 RVA: 0x0018E862 File Offset: 0x0018CA62
		public static void RecoverCharacterDisorderOfQi(GameData.Domains.Character.Character character)
		{
			character.ChangeDisorderOfQi(EventHelper.Domain.MainThreadDataContext, (int)(-(int)character.GetDisorderOfQi()));
		}

		// Token: 0x06001E33 RID: 7731 RVA: 0x0018E87D File Offset: 0x0018CA7D
		public static void TemporarilyModifyHappiness(GameData.Domains.Character.Character character, sbyte targetValue)
		{
			DomainManager.Character.TemporarilyModifyHappiness(EventHelper.Domain.MainThreadDataContext, character, targetValue);
		}

		// Token: 0x06001E34 RID: 7732 RVA: 0x0018E897 File Offset: 0x0018CA97
		public static void TemporarilyModifyBaseMorality(GameData.Domains.Character.Character character, short targetValue)
		{
			DomainManager.Character.TemporarilyModifyBaseMorality(EventHelper.Domain.MainThreadDataContext, character, targetValue);
		}

		// Token: 0x06001E35 RID: 7733 RVA: 0x0018E8B1 File Offset: 0x0018CAB1
		public static void TemporarilyModifyFeatureIds(GameData.Domains.Character.Character character, List<short> targetValue)
		{
			DomainManager.Character.TemporarilyModifyFeatureIds(EventHelper.Domain.MainThreadDataContext, character, targetValue);
		}

		// Token: 0x06001E36 RID: 7734 RVA: 0x0018E8CB File Offset: 0x0018CACB
		public static void TemporarilyModifyBaseMainAttributes(GameData.Domains.Character.Character character, MainAttributes targetValue)
		{
			DomainManager.Character.TemporarilyModifyBaseMainAttributes(EventHelper.Domain.MainThreadDataContext, character, targetValue);
		}

		// Token: 0x06001E37 RID: 7735 RVA: 0x0018E8E5 File Offset: 0x0018CAE5
		public static void TemporarilyModifyDisorderOfQi(GameData.Domains.Character.Character character, short targetValue)
		{
			DomainManager.Character.TemporarilyModifyDisorderOfQi(EventHelper.Domain.MainThreadDataContext, character, targetValue);
		}

		// Token: 0x06001E38 RID: 7736 RVA: 0x0018E8FF File Offset: 0x0018CAFF
		public static void TemporarilyModifyInjuries(GameData.Domains.Character.Character character, Injuries targetValue)
		{
			DomainManager.Character.TemporarilyModifyInjuries(EventHelper.Domain.MainThreadDataContext, character, targetValue);
		}

		// Token: 0x06001E39 RID: 7737 RVA: 0x0018E919 File Offset: 0x0018CB19
		public static void TemporarilyModifyExtraNeili(GameData.Domains.Character.Character character, int targetValue)
		{
			DomainManager.Character.TemporarilyModifyExtraNeili(EventHelper.Domain.MainThreadDataContext, character, targetValue);
		}

		// Token: 0x06001E3A RID: 7738 RVA: 0x0018E933 File Offset: 0x0018CB33
		public static void TemporarilyModifyConsummateLevel(GameData.Domains.Character.Character character, sbyte targetValue)
		{
			DomainManager.Character.TemporarilyModifyConsummateLevel(EventHelper.Domain.MainThreadDataContext, character, targetValue);
		}

		// Token: 0x06001E3B RID: 7739 RVA: 0x0018E94D File Offset: 0x0018CB4D
		public static void TemporarilyModifyBaseLifeSkillQualifications(GameData.Domains.Character.Character character, ref LifeSkillShorts targetValue)
		{
			DomainManager.Character.TemporarilyModifyBaseLifeSkillQualifications(EventHelper.Domain.MainThreadDataContext, character, ref targetValue);
		}

		// Token: 0x06001E3C RID: 7740 RVA: 0x0018E967 File Offset: 0x0018CB67
		public static void TemporarilyModifyBaseCombatSkillQualifications(GameData.Domains.Character.Character character, ref CombatSkillShorts targetValue)
		{
			DomainManager.Character.TemporarilyModifyBaseCombatSkillQualifications(EventHelper.Domain.MainThreadDataContext, character, ref targetValue);
		}

		// Token: 0x06001E3D RID: 7741 RVA: 0x0018E981 File Offset: 0x0018CB81
		public static void TemporarilyModifyResources(GameData.Domains.Character.Character character, ref ResourceInts targetValue)
		{
			DomainManager.Character.TemporarilyModifyResources(EventHelper.Domain.MainThreadDataContext, character, ref targetValue);
		}

		// Token: 0x06001E3E RID: 7742 RVA: 0x0018E99B File Offset: 0x0018CB9B
		public static void TemporarilyModifyCurrMainAttributes(GameData.Domains.Character.Character character, MainAttributes targetValue)
		{
			DomainManager.Character.TemporarilyModifyCurrMainAttributes(EventHelper.Domain.MainThreadDataContext, character, targetValue);
		}

		// Token: 0x06001E3F RID: 7743 RVA: 0x0018E9B5 File Offset: 0x0018CBB5
		public static void TemporarilyModifyPoisoned(GameData.Domains.Character.Character character, ref PoisonInts targetValue)
		{
			DomainManager.Character.TemporarilyModifyPoisoned(EventHelper.Domain.MainThreadDataContext, character, ref targetValue);
		}

		// Token: 0x06001E40 RID: 7744 RVA: 0x0018E9CF File Offset: 0x0018CBCF
		public static void TemporarilyModifyCurrNeili(GameData.Domains.Character.Character character, int targetValue)
		{
			DomainManager.Character.TemporarilyModifyCurrNeili(EventHelper.Domain.MainThreadDataContext, character, targetValue);
		}

		// Token: 0x06001E41 RID: 7745 RVA: 0x0018E9E9 File Offset: 0x0018CBE9
		public static void TemporarilyModifyExtraNeiliAllocation(GameData.Domains.Character.Character character, NeiliAllocation targetValue)
		{
			DomainManager.Character.TemporarilyModifyExtraNeiliAllocation(EventHelper.Domain.MainThreadDataContext, character, targetValue);
		}

		// Token: 0x06001E42 RID: 7746 RVA: 0x0018EA03 File Offset: 0x0018CC03
		public static void TemporarilyModifyXiangshuInfection(GameData.Domains.Character.Character character, byte targetValue)
		{
			DomainManager.Character.TemporarilyModifyXiangshuInfection(EventHelper.Domain.MainThreadDataContext, character, targetValue);
		}

		// Token: 0x06001E43 RID: 7747 RVA: 0x0018EA1D File Offset: 0x0018CC1D
		public static void TemporarilyChangeInjury(GameData.Domains.Character.Character character, sbyte bodyPartType, bool isInnerInjury, sbyte delta)
		{
			DomainManager.Character.BeginTemporaryModification(character, RevertibleCharacterPropertyType.Injuries);
			character.ChangeInjury(EventHelper.Domain.MainThreadDataContext, bodyPartType, isInnerInjury, delta);
			DomainManager.Character.RecordTemporaryModification();
		}

		// Token: 0x06001E44 RID: 7748 RVA: 0x0018EA4C File Offset: 0x0018CC4C
		public unsafe static void TemporarilyChangeBaseLifeSkillQualification(GameData.Domains.Character.Character character, sbyte lifeSkillType, short delta)
		{
			LifeSkillShorts lifeSkillShorts;
			lifeSkillShorts.Initialize();
			*(ref lifeSkillShorts.Items.FixedElementField + (IntPtr)lifeSkillType * 2) = delta;
			DomainManager.Character.BeginTemporaryModification(character, RevertibleCharacterPropertyType.BaseLifeSkillQualifications);
			character.ChangeBaseLifeSkillQualifications(EventHelper.Domain.MainThreadDataContext, ref lifeSkillShorts);
			DomainManager.Character.RecordTemporaryModification();
		}

		// Token: 0x06001E45 RID: 7749 RVA: 0x0018EAA0 File Offset: 0x0018CCA0
		public unsafe static void TemporarilyChangeBaseCombatSkillQualification(GameData.Domains.Character.Character character, sbyte combatSkillType, short delta)
		{
			CombatSkillShorts combatSkillShorts;
			combatSkillShorts.Initialize();
			*(ref combatSkillShorts.Items.FixedElementField + (IntPtr)combatSkillType * 2) = delta;
			DomainManager.Character.BeginTemporaryModification(character, RevertibleCharacterPropertyType.BaseCombatSkillQualifications);
			character.ChangeBaseCombatSkillQualifications(EventHelper.Domain.MainThreadDataContext, ref combatSkillShorts);
			DomainManager.Character.RecordTemporaryModification();
		}

		// Token: 0x06001E46 RID: 7750 RVA: 0x0018EAF5 File Offset: 0x0018CCF5
		public static void TemporarilyChangeResource(GameData.Domains.Character.Character character, sbyte resourceType, int delta)
		{
			DomainManager.Character.BeginTemporaryModification(character, RevertibleCharacterPropertyType.Resources);
			character.ChangeResource(EventHelper.Domain.MainThreadDataContext, resourceType, delta);
			DomainManager.Character.RecordTemporaryModification();
		}

		// Token: 0x06001E47 RID: 7751 RVA: 0x0018EB24 File Offset: 0x0018CD24
		public unsafe static void TemporarilyChangeBaseMainAttribute(GameData.Domains.Character.Character character, sbyte mainAttributeType, short delta)
		{
			DomainManager.Character.BeginTemporaryModification(character, RevertibleCharacterPropertyType.BaseMainAttributes);
			MainAttributes changes;
			changes.Initialize();
			*(ref changes.Items.FixedElementField + (IntPtr)mainAttributeType * 2) = delta;
			character.ChangeBaseMainAttributes(EventHelper.Domain.MainThreadDataContext, changes);
			DomainManager.Character.RecordTemporaryModification();
		}

		// Token: 0x06001E48 RID: 7752 RVA: 0x0018EB77 File Offset: 0x0018CD77
		public static void TemporarilyChangeCurrMainAttribute(GameData.Domains.Character.Character character, sbyte mainAttributeType, short delta)
		{
			DomainManager.Character.BeginTemporaryModification(character, RevertibleCharacterPropertyType.CurrMainAttributes);
			character.ChangeCurrMainAttribute(EventHelper.Domain.MainThreadDataContext, mainAttributeType, (int)delta);
			DomainManager.Character.RecordTemporaryModification();
		}

		// Token: 0x06001E49 RID: 7753 RVA: 0x0018EBA8 File Offset: 0x0018CDA8
		public unsafe static void TemporarilyChangeExtraNeiliAllocation(GameData.Domains.Character.Character character, byte neiliAllocationType, short delta)
		{
			DomainManager.Character.BeginTemporaryModification(character, RevertibleCharacterPropertyType.ExtraNeiliAllocation);
			NeiliAllocation neiliAllocationChange;
			neiliAllocationChange.Initialize();
			*(ref neiliAllocationChange.Items.FixedElementField + (IntPtr)neiliAllocationType * 2) = delta;
			character.ChangeExtraNeiliAllocation(EventHelper.Domain.MainThreadDataContext, neiliAllocationChange);
			DomainManager.Character.RecordTemporaryModification();
		}

		// Token: 0x06001E4A RID: 7754 RVA: 0x0018EBFC File Offset: 0x0018CDFC
		public static void TemporarilyAddFeatureId(GameData.Domains.Character.Character character, short featureId)
		{
			DomainManager.Character.BeginTemporaryModification(character, RevertibleCharacterPropertyType.FeatureIds);
			character.AddFeature(EventHelper.Domain.MainThreadDataContext, featureId, false);
			DomainManager.Character.RecordTemporaryModification();
		}

		// Token: 0x06001E4B RID: 7755 RVA: 0x0018EC2A File Offset: 0x0018CE2A
		public static void TemporarilyChangePoisoned(GameData.Domains.Character.Character character, sbyte poisonType, int delta)
		{
			DomainManager.Character.BeginTemporaryModification(character, RevertibleCharacterPropertyType.Poisoned);
			DomainManager.Character.RecordTemporaryModification();
		}

		// Token: 0x06001E4C RID: 7756 RVA: 0x0018EC46 File Offset: 0x0018CE46
		public static void ClearAllTemporaryModifications()
		{
			DomainManager.Character.RevertAllTemporaryModificationsOfAllCharacters(EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x06001E4D RID: 7757 RVA: 0x0018EC60 File Offset: 0x0018CE60
		public static List<int> GetCharacterManagedChickenList(int characterId)
		{
			GameData.Domains.Character.Character character = DomainManager.Character.GetElement_Objects(characterId);
			OrganizationInfo organizationInfo = character.GetOrganizationInfo();
			bool flag = organizationInfo.Grade != 8;
			if (!flag)
			{
				bool flag2 = organizationInfo.SettlementId < 0;
				if (!flag2)
				{
					return DomainManager.Building.GetSettlementChickenList((int)organizationInfo.SettlementId, true);
				}
			}
			return new List<int>();
		}

		// Token: 0x06001E4E RID: 7758 RVA: 0x0018ECC8 File Offset: 0x0018CEC8
		public static void TransferChickenToTaiwuVillageBySpiritualDebt(int chickenId)
		{
			GameData.Domains.Building.Chicken chicken = DomainManager.Building.GetElement_Chicken(chickenId);
			short areaId = DomainManager.Organization.GetSettlement((short)chicken.CurrentSettlementId).GetLocation().AreaId;
			DomainManager.Extra.ChangeAreaSpiritualDebt(EventHelper.Domain.MainThreadDataContext, areaId, -1000, true, true);
			DomainManager.Building.TransferChicken(EventHelper.Domain.MainThreadDataContext, chickenId, (int)DomainManager.Taiwu.GetTaiwuVillageSettlementId());
		}

		// Token: 0x06001E4F RID: 7759 RVA: 0x0018ED3C File Offset: 0x0018CF3C
		public static int GetChickenTemplateIdByChickenId(int chickenId)
		{
			GameData.Domains.Building.Chicken chicken = DomainManager.Building.GetChickenData(chickenId);
			return (int)chicken.TemplateId;
		}

		// Token: 0x06001E50 RID: 7760 RVA: 0x0018ED60 File Offset: 0x0018CF60
		public static void ApplyEffect_WuShengMiYu(int charId)
		{
			EventHelper.ClearCharPoison(charId);
			EventHelper.RemoveRandomNormalWugs(charId, GlobalConfig.Instance.WuxianSpiritualDebtInteractionRemoveWugCount);
			EventHelper.ChangeWugKingDurations(charId, GlobalConfig.Instance.WuxianSpiritualDebtInteractionChangeWugKingDuration);
		}

		// Token: 0x06001E51 RID: 7761 RVA: 0x0018ED8C File Offset: 0x0018CF8C
		public static void ApplyEffect_TianfuGuilve()
		{
			DomainManager.Building.TaiwuResourceGrow(EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x06001E52 RID: 7762 RVA: 0x0018EDA4 File Offset: 0x0018CFA4
		public static void TaiwuVillageBuildingMaxLevelUp(sbyte addCount)
		{
			DomainManager.Taiwu.AddBuildingSpaceExtra(EventHelper.Domain.MainThreadDataContext, (int)addCount);
		}

		// Token: 0x06001E53 RID: 7763 RVA: 0x0018EDBD File Offset: 0x0018CFBD
		public static void HideBuildingArea()
		{
			GameDataBridge.AddDisplayEvent(DisplayEventType.HideBuildingArea);
		}

		// Token: 0x06001E54 RID: 7764 RVA: 0x0018EDC8 File Offset: 0x0018CFC8
		public static void AddStoneRoomCharacter(GameData.Domains.Character.Character character)
		{
			DomainManager.Extra.AddStoneRoomCharacter(EventHelper.Domain.MainThreadDataContext, character);
		}

		// Token: 0x06001E55 RID: 7765 RVA: 0x0018EDE4 File Offset: 0x0018CFE4
		public static int GetMonthEventCaravanId()
		{
			return DomainManager.Merchant.GetMonthEventCaravanId(EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x06001E56 RID: 7766 RVA: 0x0018EE0C File Offset: 0x0018D00C
		public static void CaravanFilterGiftForCharacter(int caravanId, int getGiftCharId, EventArgBox argBox)
		{
			MerchantData caravanData = DomainManager.Merchant.GetCaravanMerchantData(EventHelper.Domain.MainThreadDataContext, caravanId);
			Tester.Assert(caravanData != null, "");
			GameData.Domains.Character.Character getGiftChar;
			bool flag = !DomainManager.Character.TryGetElement_Objects(getGiftCharId, out getGiftChar);
			if (flag)
			{
				DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(38, 1);
				defaultInterpolatedStringHandler.AppendLiteral("can not get character to getGift,Id = ");
				defaultInterpolatedStringHandler.AppendFormatted<int>(getGiftCharId);
				throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
			}
			EventSelectItemData selectItemData;
			bool flag2 = !argBox.Get<EventSelectItemData>("SelectItemInfo", out selectItemData);
			if (flag2)
			{
				selectItemData = new EventSelectItemData();
				selectItemData.CanSelectItemList = new List<ItemDisplayData>();
				selectItemData.FilterList = new List<SelectItemFilter>();
				argBox.Set("SelectItemInfo", selectItemData);
			}
			SelectItemFilter filter = default(SelectItemFilter);
			filter.Key = "GiftKey1";
			filter.DisplayDataFilterId = 0;
			filter.FilterTemplateId = -1;
			SelectItemFilter filter2 = default(SelectItemFilter);
			filter2.Key = "GiftKey2";
			filter2.DisplayDataFilterId = 0;
			filter2.FilterTemplateId = -1;
			Inventory inventory = caravanData.GetGoodsList(1);
			foreach (KeyValuePair<ItemKey, int> pair in inventory.Items)
			{
				selectItemData.CanSelectItemList.Add(DomainManager.Item.GetItemDisplayData(pair.Key, -1));
			}
			selectItemData.LoveAndHateItemInfo = DomainManager.Character.GetCharacterLoveAndHateItemInfo(EventHelper.Domain.MainThreadDataContext, getGiftCharId);
			selectItemData.FilterList.Add(filter);
			selectItemData.FilterList.Add(filter2);
		}

		// Token: 0x06001E57 RID: 7767 RVA: 0x0018EFB0 File Offset: 0x0018D1B0
		public static void DeleteCaravanItem(int caravanId, int index, ItemKey itemKey)
		{
			DomainManager.Merchant.DeleteCaravanItem(EventHelper.Domain.MainThreadDataContext, caravanId, index, itemKey);
		}

		// Token: 0x06001E58 RID: 7768 RVA: 0x0018EFCC File Offset: 0x0018D1CC
		public static bool IsCaravanRobbed(int caravanId)
		{
			CaravanExtraData caravanExtraData;
			CaravanState state = (CaravanState)(DomainManager.Extra.TryGetCaravanExtraData(caravanId, out caravanExtraData) ? caravanExtraData.State : 0);
			return state == CaravanState.Robbed;
		}

		// Token: 0x06001E59 RID: 7769 RVA: 0x0018EFFC File Offset: 0x0018D1FC
		public static int CreateRobCaravanEnemy(int caravanId)
		{
			MerchantData merchantData = DomainManager.Merchant.GetCaravanMerchantData(EventHelper.Domain.MainThreadDataContext, caravanId);
			return EventHelper.CreateNonIntelligentCharacter(merchantData.MerchantConfig.Enemy);
		}

		// Token: 0x06001E5A RID: 7770 RVA: 0x0018F036 File Offset: 0x0018D236
		public static void ApplyMerchantRobbedResult(int caravanId, bool win)
		{
			DomainManager.Merchant.ApplyMerchantRobbedResult(EventHelper.Domain.MainThreadDataContext, caravanId, win, true);
		}

		// Token: 0x06001E5B RID: 7771 RVA: 0x0018F051 File Offset: 0x0018D251
		public static void RemovePrisonerFromCharacter(int prisonerCharId, int charId, bool isEscaped)
		{
			DomainManager.Character.RemoveKidnappedCharacter(EventHelper.Domain.MainThreadDataContext, prisonerCharId, charId, isEscaped);
		}

		// Token: 0x06001E5C RID: 7772 RVA: 0x0018F06C File Offset: 0x0018D26C
		public static KidnappedCharacter GetKidnappedCharacter(int kidnapperId, int kidnappedCharId)
		{
			KidnappedCharacterList kidnappedChars = DomainManager.Character.GetKidnappedCharacters(kidnapperId);
			int index = kidnappedChars.IndexOf(kidnappedCharId);
			return kidnappedChars.Get(index);
		}

		// Token: 0x06001E5D RID: 7773 RVA: 0x0018F09C File Offset: 0x0018D29C
		public static void AddPrisonerToCharacter(int prisonerCharId, int charId, ItemKey ropeItemKey)
		{
			GameData.Domains.Character.Character character = DomainManager.Character.GetElement_Objects(charId);
			bool flag = character.IsActiveExternalRelationState(2);
			if (flag)
			{
				KidnappedCharacterList kidnappedCharacterList = DomainManager.Character.GetKidnappedCharacters(charId);
				bool flag2 = kidnappedCharacterList.IndexOf(prisonerCharId) > 0;
				if (flag2)
				{
					DomainManager.Character.ChangeKidnappedCharacterRope(EventHelper.Domain.MainThreadDataContext, charId, prisonerCharId, ropeItemKey);
				}
				else
				{
					DomainManager.Character.AddKidnappedCharacter(EventHelper.Domain.MainThreadDataContext, charId, prisonerCharId, ropeItemKey);
				}
			}
			else
			{
				DomainManager.Character.AddKidnappedCharacter(EventHelper.Domain.MainThreadDataContext, charId, prisonerCharId, ropeItemKey);
			}
			bool flag3 = charId == DomainManager.Taiwu.GetTaiwuCharId();
			if (flag3)
			{
				EventHelper.TryInterruptCharacterPrioritizedAction(prisonerCharId, 22);
			}
		}

		// Token: 0x06001E5E RID: 7774 RVA: 0x0018F148 File Offset: 0x0018D348
		public static int GetPrisonerResistance(int prisonerCharId)
		{
			GameData.Domains.Character.Character prisoner;
			bool flag = !DomainManager.Character.TryGetElement_Objects(prisonerCharId, out prisoner);
			if (flag)
			{
				DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(52, 1);
				defaultInterpolatedStringHandler.AppendLiteral("failed get character of id ");
				defaultInterpolatedStringHandler.AppendFormatted<int>(prisonerCharId);
				defaultInterpolatedStringHandler.AppendLiteral(" to GetPrisonerResistance");
				throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
			}
			int kidnapperCharId = prisoner.GetKidnapperId();
			bool flag2 = kidnapperCharId < 0;
			int result;
			if (flag2)
			{
				result = 0;
			}
			else
			{
				KidnappedCharacterList kidnappedCharacterList = DomainManager.Character.GetKidnappedCharacters(kidnapperCharId);
				int index = kidnappedCharacterList.IndexOf(prisonerCharId);
				bool flag3 = index < 0;
				if (flag3)
				{
					result = 0;
				}
				else
				{
					KidnappedCharacter kidnappedCharacter = kidnappedCharacterList.Get(index);
					GameData.Domains.Character.Character kidnapper = DomainManager.Character.GetElement_Objects(kidnapperCharId);
					int totalResistance = DomainManager.Character.CalcKidnappedCharacterTotalResistance(kidnapper, kidnappedCharacter);
					result = totalResistance;
				}
			}
			return result;
		}

		// Token: 0x06001E5F RID: 7775 RVA: 0x0018F210 File Offset: 0x0018D410
		public static void ChangePrisonerResistance(int prisonerCharId, sbyte delta)
		{
			GameData.Domains.Character.Character prisoner;
			bool flag = !DomainManager.Character.TryGetElement_Objects(prisonerCharId, out prisoner);
			if (flag)
			{
				DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(55, 1);
				defaultInterpolatedStringHandler.AppendLiteral("failed get character of id ");
				defaultInterpolatedStringHandler.AppendFormatted<int>(prisonerCharId);
				defaultInterpolatedStringHandler.AppendLiteral(" to ChangePrisonerResistance");
				throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
			}
			int kidnapperCharId = prisoner.GetKidnapperId();
			bool flag2 = kidnapperCharId < 0;
			if (flag2)
			{
				DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(50, 1);
				defaultInterpolatedStringHandler.AppendLiteral("character ");
				defaultInterpolatedStringHandler.AppendFormatted<int>(prisonerCharId);
				defaultInterpolatedStringHandler.AppendLiteral(" not kidnapped,can not change resistance");
				throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
			}
			KidnappedCharacterList kidnappedCharacterList = DomainManager.Character.GetKidnappedCharacters(kidnapperCharId);
			int index = kidnappedCharacterList.IndexOf(prisonerCharId);
			bool flag3 = index < 0;
			if (flag3)
			{
				DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(70, 2);
				defaultInterpolatedStringHandler.AppendLiteral("character ");
				defaultInterpolatedStringHandler.AppendFormatted<int>(prisonerCharId);
				defaultInterpolatedStringHandler.AppendLiteral(" 's kidnapper do not has prisoner ");
				defaultInterpolatedStringHandler.AppendFormatted<int>(prisonerCharId);
				defaultInterpolatedStringHandler.AppendLiteral(",can not change resistance");
				throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
			}
			KidnappedCharacter kidnappedCharacter = kidnappedCharacterList.Get(index);
			kidnappedCharacter.ExtraResistance = (sbyte)Math.Clamp((int)(kidnappedCharacter.ExtraResistance + delta), 0, 127);
		}

		// Token: 0x06001E60 RID: 7776 RVA: 0x0018F34C File Offset: 0x0018D54C
		public static void TransferPrisoner(int prisonerCharId, int newKidnapperCharId)
		{
			GameData.Domains.Character.Character prisoner;
			bool flag = !DomainManager.Character.TryGetElement_Objects(prisonerCharId, out prisoner);
			if (flag)
			{
				DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(47, 1);
				defaultInterpolatedStringHandler.AppendLiteral("failed get character of id ");
				defaultInterpolatedStringHandler.AppendFormatted<int>(prisonerCharId);
				defaultInterpolatedStringHandler.AppendLiteral(" to TransferPrisoner");
				throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
			}
			int kidnapperCharId = prisoner.GetKidnapperId();
			bool flag2 = kidnapperCharId < 0;
			if (flag2)
			{
				DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(50, 1);
				defaultInterpolatedStringHandler.AppendLiteral("character ");
				defaultInterpolatedStringHandler.AppendFormatted<int>(prisonerCharId);
				defaultInterpolatedStringHandler.AppendLiteral(" not kidnapped,can not transfer prisoner");
				throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
			}
			KidnappedCharacterList kidnappedCharacterList = DomainManager.Character.GetKidnappedCharacters(kidnapperCharId);
			int index = kidnappedCharacterList.IndexOf(prisonerCharId);
			bool flag3 = index < 0;
			if (flag3)
			{
				DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(70, 2);
				defaultInterpolatedStringHandler.AppendLiteral("character ");
				defaultInterpolatedStringHandler.AppendFormatted<int>(prisonerCharId);
				defaultInterpolatedStringHandler.AppendLiteral(" 's kidnapper do not has prisoner ");
				defaultInterpolatedStringHandler.AppendFormatted<int>(prisonerCharId);
				defaultInterpolatedStringHandler.AppendLiteral(",can not transfer prisoner");
				throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
			}
			KidnappedCharacter kidnappedCharacter = kidnappedCharacterList.Get(index);
			DomainManager.Character.TransferKidnappedCharacter(EventHelper.Domain.MainThreadDataContext, newKidnapperCharId, kidnapperCharId, kidnappedCharacter);
		}

		// Token: 0x06001E61 RID: 7777 RVA: 0x0018F488 File Offset: 0x0018D688
		public static void HandleCombatResultKidnapEnemy(GameData.Domains.Character.Character winner, GameData.Domains.Character.Character loser, bool isInPublic)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			DomainManager.Character.CombatResultHandle_KidnapEnemy(context, winner, loser, isInPublic);
		}

		// Token: 0x06001E62 RID: 7778 RVA: 0x0018F4B0 File Offset: 0x0018D6B0
		public static void HandleCombatResultReleaseEnemy(GameData.Domains.Character.Character winner, GameData.Domains.Character.Character loser)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			DomainManager.Character.CombatResultHandle_ReleaseEnemy(context, winner, loser);
		}

		// Token: 0x06001E63 RID: 7779 RVA: 0x0018F4D8 File Offset: 0x0018D6D8
		public static void HandleCombatResultKillEnemy(GameData.Domains.Character.Character winner, GameData.Domains.Character.Character loser, bool isInPublic)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			DomainManager.Character.CombatResultHandle_KillEnemy(context, winner, loser, isInPublic);
			bool flag = winner.GetId() == DomainManager.Taiwu.GetTaiwuCharId();
			if (flag)
			{
				EventHelper.TryInterruptCharacterPrioritizedAction(loser.GetId(), 22);
			}
		}

		// Token: 0x06001E64 RID: 7780 RVA: 0x0018F528 File Offset: 0x0018D728
		public static void MoveFixedCharacter(GameData.Domains.Character.Character character, Location targetLocation)
		{
			bool condition = character.GetCreatingType() == 0;
			DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(59, 1);
			defaultInterpolatedStringHandler.AppendLiteral("character-");
			defaultInterpolatedStringHandler.AppendFormatted<int>(character.GetId());
			defaultInterpolatedStringHandler.AppendLiteral(".GetCreatingType() == CreatingType.FixedCharacter");
			Tester.Assert(condition, defaultInterpolatedStringHandler.ToStringAndClear());
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			Events.RaiseFixedCharacterLocationChanged(context, character.GetId(), character.GetLocation(), targetLocation);
			character.SetLocation(targetLocation, context);
		}

		// Token: 0x06001E65 RID: 7781 RVA: 0x0018F5A8 File Offset: 0x0018D7A8
		public static void MoveFixedEnemy(GameData.Domains.Character.Character character, Location targetLocation)
		{
			bool condition = character.GetCreatingType() == 3;
			DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(55, 1);
			defaultInterpolatedStringHandler.AppendLiteral("character-");
			defaultInterpolatedStringHandler.AppendFormatted<int>(character.GetId());
			defaultInterpolatedStringHandler.AppendLiteral(".GetCreatingType() == CreatingType.FixedEnemy");
			Tester.Assert(condition, defaultInterpolatedStringHandler.ToStringAndClear());
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			Events.RaiseEnemyCharacterLocationChanged(context, character.GetId(), character.GetLocation(), targetLocation);
			character.SetLocation(targetLocation, context);
		}

		// Token: 0x06001E66 RID: 7782 RVA: 0x0018F628 File Offset: 0x0018D828
		public static void MoveIntelligentCharacter(GameData.Domains.Character.Character character, Location targetLocation)
		{
			bool condition = character.GetCreatingType() == 1;
			DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(65, 1);
			defaultInterpolatedStringHandler.AppendLiteral("character-");
			defaultInterpolatedStringHandler.AppendFormatted<int>(character.GetId());
			defaultInterpolatedStringHandler.AppendLiteral(".GetCreatingType() == CreatingType.IntelligentCharacter");
			Tester.Assert(condition, defaultInterpolatedStringHandler.ToStringAndClear());
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			character.DeactivateExternalRelationState(context, 16);
			DomainManager.Character.GroupMove(context, character, targetLocation);
		}

		// Token: 0x06001E67 RID: 7783 RVA: 0x0018F6A4 File Offset: 0x0018D8A4
		public static void HideIntelligentCharacter(GameData.Domains.Character.Character character)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			DomainManager.Character.HideCharacterOnMap(context, character, 16, true);
		}

		// Token: 0x06001E68 RID: 7784 RVA: 0x0018F6D0 File Offset: 0x0018D8D0
		public static byte GetDiffRandomHairColor(byte prevHairColorId)
		{
			AvatarHairColorsItem config = AvatarHairColors.Instance.GetItem(prevHairColorId);
			List<byte> canUseTemplateIdList = new List<byte>();
			AvatarHairColors.Instance.Iterate(delegate(AvatarHairColorsItem e)
			{
				bool flag = config != null && e.DisplayDesc != config.DisplayDesc;
				if (flag)
				{
					canUseTemplateIdList.Add(e.TemplateId);
				}
				return true;
			});
			return canUseTemplateIdList.GetRandom(EventHelper.Domain.MainThreadDataContext.Random);
		}

		// Token: 0x06001E69 RID: 7785 RVA: 0x0018F738 File Offset: 0x0018D938
		public static byte GetDiffRandomEyeballColor(byte prevEyeballColorId)
		{
			AvatarEyeballColorsItem config = AvatarEyeballColors.Instance.GetItem(prevEyeballColorId);
			List<byte> canUseTemplateIdList = new List<byte>();
			AvatarEyeballColors.Instance.Iterate(delegate(AvatarEyeballColorsItem e)
			{
				bool flag = config != null && e.DisplayDesc != config.DisplayDesc;
				if (flag)
				{
					canUseTemplateIdList.Add(e.TemplateId);
				}
				return true;
			});
			return canUseTemplateIdList.GetRandom(EventHelper.Domain.MainThreadDataContext.Random);
		}

		// Token: 0x06001E6A RID: 7786 RVA: 0x0018F7A0 File Offset: 0x0018D9A0
		public static byte GetDiffRandomSkinColor(byte prevSkinColorId)
		{
			AvatarSkinColorsItem config = AvatarSkinColors.Instance.GetItem(prevSkinColorId);
			List<byte> canUseTemplateIdList = new List<byte>();
			AvatarSkinColors.Instance.Iterate(delegate(AvatarSkinColorsItem e)
			{
				bool flag = config != null && e.DisplayDesc != config.DisplayDesc;
				if (flag)
				{
					canUseTemplateIdList.Add(e.TemplateId);
				}
				return true;
			});
			return canUseTemplateIdList.GetRandom(EventHelper.Domain.MainThreadDataContext.Random);
		}

		// Token: 0x06001E6B RID: 7787 RVA: 0x0018F808 File Offset: 0x0018DA08
		public static byte GetDiffRandomClothColor(byte prevClothColorId)
		{
			AvatarClothColorsItem config = AvatarClothColors.Instance.GetItem(prevClothColorId);
			List<byte> canUseTemplateIdList = new List<byte>();
			AvatarClothColors.Instance.Iterate(delegate(AvatarClothColorsItem e)
			{
				bool flag = config != null && e.DisplayDesc != config.DisplayDesc;
				if (flag)
				{
					canUseTemplateIdList.Add(e.TemplateId);
				}
				return true;
			});
			return canUseTemplateIdList.GetRandom(EventHelper.Domain.MainThreadDataContext.Random);
		}

		// Token: 0x06001E6C RID: 7788 RVA: 0x0018F870 File Offset: 0x0018DA70
		public static byte GetDiffRandomAvatarId(byte prevAvatarId)
		{
			List<byte> canUseTemplateIdList = new List<byte>();
			List<byte> keysList = AvatarHead.Instance.GetAllKeys();
			for (int i = 0; i < keysList.Count; i++)
			{
				bool flag = keysList[i] >= 6;
				if (flag)
				{
					break;
				}
				AvatarHeadItem cell = AvatarHead.Instance.GetItem(keysList[i]);
				bool flag2 = cell == null || prevAvatarId == cell.AvatarId || cell.AvatarId % 2 != prevAvatarId % 2;
				if (!flag2)
				{
					canUseTemplateIdList.Add(cell.AvatarId);
				}
			}
			return canUseTemplateIdList.GetRandom(EventHelper.Domain.MainThreadDataContext.Random);
		}

		// Token: 0x06001E6D RID: 7789 RVA: 0x0018F920 File Offset: 0x0018DB20
		public static string GetCharacterDisplayName(GameData.Domains.Character.Character character)
		{
			bool flag = character == null;
			if (flag)
			{
				throw new Exception("null character can not GetCharacterDisplayName");
			}
			ValueTuple<string, string> displayName = DomainManager.Character.GetNameRelatedData(character.GetId()).GetDisplayName(character.GetId() == DomainManager.Taiwu.GetTaiwuCharId());
			string surName = displayName.Item1;
			string givenName = displayName.Item2;
			return surName + givenName;
		}

		// Token: 0x06001E6E RID: 7790 RVA: 0x0018F988 File Offset: 0x0018DB88
		public static ValueTuple<string, string> GetRandomCharacterHanName(sbyte gender)
		{
			return CharacterDomain.GenerateRandomHanName(EventHelper.Domain.MainThreadDataContext.Random, -1, -1, gender, -1).GetName(gender, DomainManager.World.GetCustomTexts());
		}

		// Token: 0x06001E6F RID: 7791 RVA: 0x0018F9C8 File Offset: 0x0018DBC8
		public static short GetCharacterOrganizationAreaId(GameData.Domains.Character.Character character)
		{
			short settlementId = character.GetOrganizationInfo().SettlementId;
			bool flag = settlementId < 0;
			short result;
			if (flag)
			{
				result = -1;
			}
			else
			{
				Settlement settlement = DomainManager.Organization.GetSettlement(settlementId);
				result = settlement.GetLocation().AreaId;
			}
			return result;
		}

		// Token: 0x06001E70 RID: 7792 RVA: 0x0018FA0C File Offset: 0x0018DC0C
		public static short GetCharacterInfluencePower(int charId)
		{
			SettlementCharacter settlementChar;
			return DomainManager.Organization.TryGetSettlementCharacter(charId, out settlementChar) ? settlementChar.GetInfluencePower() : 0;
		}

		// Token: 0x06001E71 RID: 7793 RVA: 0x0018FA38 File Offset: 0x0018DC38
		[Obsolete("need to change influence power to cache data before setting it in events")]
		public static void SetCharacterInfluencePower(int charId, short influencePower)
		{
			SettlementCharacter settlementChar;
			bool flag = DomainManager.Organization.TryGetSettlementCharacter(charId, out settlementChar);
			if (flag)
			{
				settlementChar.SetInfluencePower(influencePower, EventHelper.Domain.MainThreadDataContext);
			}
		}

		// Token: 0x06001E72 RID: 7794 RVA: 0x0018FA6C File Offset: 0x0018DC6C
		public static short GetApprovingRate(int charId)
		{
			SettlementCharacter settlementChar;
			return DomainManager.Organization.TryGetSettlementCharacter(charId, out settlementChar) ? settlementChar.GetApprovingRate() : 0;
		}

		// Token: 0x06001E73 RID: 7795 RVA: 0x0018FA98 File Offset: 0x0018DC98
		public static sbyte GetCharacterChildGrade(GameData.Domains.Character.Character character)
		{
			return OrganizationDomain.GetOrgMemberConfig(character.GetOrganizationInfo()).ChildGrade;
		}

		// Token: 0x06001E74 RID: 7796 RVA: 0x0018FABC File Offset: 0x0018DCBC
		public static void KillCharacter(int killerId, int victimId, EKillCharacterType killType)
		{
			GameData.Domains.Character.Character victim;
			bool flag = !DomainManager.Character.TryGetElement_Objects(victimId, out victim);
			if (flag)
			{
				DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(53, 1);
				defaultInterpolatedStringHandler.AppendLiteral("can not find character ");
				defaultInterpolatedStringHandler.AppendFormatted<int>(victimId);
				defaultInterpolatedStringHandler.AppendLiteral(" to be killed in KillCharacter");
				throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
			}
			EventHelper.KillAddTianJieFuLu(killerId, victim, true);
			if (!true)
			{
			}
			short num;
			if (killType != EKillCharacterType.KillInPublic)
			{
				if (killType != EKillCharacterType.KillInPrivate)
				{
					num = 0;
				}
				else
				{
					num = 3;
				}
			}
			else
			{
				num = 4;
			}
			if (!true)
			{
			}
			short deathType = num;
			GameData.Domains.Character.Character killer;
			bool flag2 = DomainManager.Character.TryGetElement_Objects(killerId, out killer);
			if (flag2)
			{
				bool flag3 = killer.GetTemplateId() == 446;
				if (flag3)
				{
					deathType = 11;
				}
			}
			DomainManager.Character.MakeCharacterDead(EventHelper.Domain.MainThreadDataContext, victim, deathType, new CharacterDeathInfo(victim.GetValidLocation())
			{
				KillerId = killerId,
				AdventureId = DomainManager.Adventure.GetCurAdventureId()
			});
		}

		// Token: 0x06001E75 RID: 7797 RVA: 0x0018FBB0 File Offset: 0x0018DDB0
		public static void KillAddTianJieFuLu(int killerId, GameData.Domains.Character.Character victim, bool needCompletelyInfected = true)
		{
			bool completelyInfected = EventHelper.CheckRoleInfection(victim, 2);
			bool flag = !needCompletelyInfected;
			if (flag)
			{
				completelyInfected = true;
			}
			bool unlock = DomainManager.Extra.IsProfessionalSkillUnlocked(5, 2);
			bool flag2 = killerId == DomainManager.Taiwu.GetTaiwuCharId() && completelyInfected && unlock;
			if (flag2)
			{
				int consummateLevel = Math.Min((int)victim.GetConsummateLevel(), ProfessionRelatedConstants.TaoistMonkSkill2GetSecretSignCount.Length - 1);
				int secretSignCount = (int)ProfessionRelatedConstants.TaoistMonkSkill2GetSecretSignCount[consummateLevel];
				ItemKey itemKey = EventHelper.AddItemToRole(DomainManager.Taiwu.GetTaiwu(), 12, 234, secretSignCount, -1);
				DomainManager.World.GetInstantNotificationCollection().AddGetItem(DomainManager.Taiwu.GetTaiwuCharId(), 12, 234);
				EventHelper.Domain.OnEvent_TaiwuGotTianjieFulu(victim.GetId(), itemKey, secretSignCount);
			}
		}

		// Token: 0x06001E76 RID: 7798 RVA: 0x0018FC65 File Offset: 0x0018DE65
		public static void SaveInfected(GameData.Domains.Character.Character victim)
		{
			EventHelper.SaveInfectedAddTianJieFuLu(victim);
			victim.SavedFromInfected(EventHelper.Domain.MainThreadDataContext, false);
		}

		// Token: 0x06001E77 RID: 7799 RVA: 0x0018FC84 File Offset: 0x0018DE84
		public static void SaveInfectedAddTianJieFuLu(GameData.Domains.Character.Character victim)
		{
			bool flag = DomainManager.Extra.IsProfessionalSkillUnlocked(5, 2);
			if (flag)
			{
				int consummateLevel = Math.Min((int)victim.GetConsummateLevel(), ProfessionRelatedConstants.TaoistMonkSkill2GetSecretSignCount.Length - 1);
				int secretSignCount = (int)ProfessionRelatedConstants.TaoistMonkSkill2GetSecretSignCountBySave[consummateLevel];
				ItemKey itemKey = EventHelper.AddItemToRole(DomainManager.Taiwu.GetTaiwu(), 12, 234, secretSignCount, -1);
				DomainManager.World.GetInstantNotificationCollection().AddGetItem(DomainManager.Taiwu.GetTaiwuCharId(), 12, 234);
				EventHelper.Domain.OnEvent_TaiwuGotTianjieFulu(victim.GetId(), itemKey, secretSignCount);
			}
		}

		// Token: 0x06001E78 RID: 7800 RVA: 0x0018FD10 File Offset: 0x0018DF10
		public static bool IsCharacterAlive(int charId)
		{
			return DomainManager.Character.IsCharacterAlive(charId);
		}

		// Token: 0x06001E79 RID: 7801 RVA: 0x0018FD30 File Offset: 0x0018DF30
		public static void CharacterDie(int victimId)
		{
			GameData.Domains.Character.Character victim;
			bool flag = !DomainManager.Character.TryGetElement_Objects(victimId, out victim);
			if (flag)
			{
				DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(53, 1);
				defaultInterpolatedStringHandler.AppendLiteral("can not find character ");
				defaultInterpolatedStringHandler.AppendFormatted<int>(victimId);
				defaultInterpolatedStringHandler.AppendLiteral(" to be killed in KillCharacter");
				throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
			}
			DomainManager.Character.MakeCharacterDead(EventHelper.Domain.MainThreadDataContext, victim, 0);
		}

		// Token: 0x06001E7A RID: 7802 RVA: 0x0018FDA4 File Offset: 0x0018DFA4
		public static void SetCharacterVeilShowState(int charId, bool showVeil)
		{
			GameData.Domains.Character.Character character = DomainManager.Character.GetElement_Objects(charId);
			bool flag = character == null;
			if (flag)
			{
				DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(52, 1);
				defaultInterpolatedStringHandler.AppendLiteral("can not find character ");
				defaultInterpolatedStringHandler.AppendFormatted<int>(charId);
				defaultInterpolatedStringHandler.AppendLiteral(" to SetCharacterVeilShowState");
				throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
			}
			AvatarData avatarData = character.GetAvatar();
			avatarData.ShowVeil = showVeil;
			character.SetAvatar(avatarData, EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x06001E7B RID: 7803 RVA: 0x0018FE20 File Offset: 0x0018E020
		public static bool SetGrowableElementShowingAbility(int charId, sbyte growableElementType, bool showable)
		{
			GameData.Domains.Character.Character character;
			bool flag = !DomainManager.Character.TryGetElement_Objects(charId, out character);
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				AvatarData avatar = character.GetAvatar();
				avatar.SetGrowableElementShowingAbility(growableElementType, showable);
				character.SetAvatar(avatar, EventHelper.Domain.MainThreadDataContext);
				result = true;
			}
			return result;
		}

		// Token: 0x06001E7C RID: 7804 RVA: 0x0018FE70 File Offset: 0x0018E070
		public static void ClearCharInjury(int charId)
		{
			DomainManager.Character.GetElement_Objects(charId).SetInjuries(default(Injuries), EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x06001E7D RID: 7805 RVA: 0x0018FEA2 File Offset: 0x0018E0A2
		public static void SetInjury(int charId, Injuries injuries)
		{
			DomainManager.Character.GetElement_Objects(charId).SetInjuries(injuries, EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x06001E7E RID: 7806 RVA: 0x0018FEC4 File Offset: 0x0018E0C4
		public static ValueTuple<Injuries, sbyte> HealInjury(int patientId, int doctorCharId)
		{
			int allHealMarkCount;
			int num;
			int num2;
			Injuries newInjuries = DomainManager.Combat.HealInjury(patientId, DomainManager.Character.GetElement_Objects(doctorCharId), out allHealMarkCount, out num, out num2, true, false, false, null, null, false);
			return new ValueTuple<Injuries, sbyte>(newInjuries, (sbyte)allHealMarkCount);
		}

		// Token: 0x06001E7F RID: 7807 RVA: 0x0018FF03 File Offset: 0x0018E103
		public static void SetPoisoned(int charId, PoisonInts poison)
		{
			DomainManager.Character.GetElement_Objects(charId).SetPoisoned(ref poison, EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x06001E80 RID: 7808 RVA: 0x0018FF24 File Offset: 0x0018E124
		public static ValueTuple<PoisonInts, sbyte, int> HealPoison(int patientId, int doctorCharId)
		{
			int healMarkCount;
			int healPoisonValue;
			int num;
			PoisonInts newPoison = DomainManager.Combat.HealPoison(patientId, DomainManager.Character.GetElement_Objects(doctorCharId), out healMarkCount, out healPoisonValue, out num, true, false, false, false);
			return new ValueTuple<PoisonInts, sbyte, int>(newPoison, (sbyte)healMarkCount, healPoisonValue);
		}

		// Token: 0x06001E81 RID: 7809 RVA: 0x0018FF64 File Offset: 0x0018E164
		public static ValueTuple<bool, sbyte> GetMedicineTopicalEffectResult(GameData.Domains.Character.Character targetChar, ItemKey medicineItemKey)
		{
			bool flag = medicineItemKey.ItemType != 8;
			if (flag)
			{
				DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(19, 1);
				defaultInterpolatedStringHandler.AppendLiteral("Invalid item type: ");
				defaultInterpolatedStringHandler.AppendFormatted<sbyte>(medicineItemKey.ItemType);
				throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
			}
			MedicineItem medicineCfg = Config.Medicine.Instance[medicineItemKey.TemplateId];
			bool flag2 = medicineCfg.EffectType != EMedicineEffectType.RecoverOuterInjury && medicineCfg.EffectType != EMedicineEffectType.RecoverInnerInjury;
			if (flag2)
			{
				DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(20, 1);
				defaultInterpolatedStringHandler.AppendLiteral("Invalid EffectType: ");
				defaultInterpolatedStringHandler.AppendFormatted<EMedicineEffectType>(medicineCfg.EffectType);
				throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
			}
			bool isInnerInjury = medicineCfg.EffectType == EMedicineEffectType.RecoverInnerInjury;
			Injuries injuries = targetChar.GetInjuries();
			sbyte minLevel = sbyte.MaxValue;
			sbyte minLevelBodyPart = -1;
			for (sbyte bodyPart = 0; bodyPart < 7; bodyPart += 1)
			{
				sbyte injuryLevel = injuries.Get(bodyPart, isInnerInjury);
				bool flag3 = injuryLevel <= 0 || injuryLevel >= minLevel;
				if (!flag3)
				{
					minLevel = injuryLevel;
					minLevelBodyPart = bodyPart;
				}
			}
			return (minLevelBodyPart == -1) ? new ValueTuple<bool, sbyte>(false, minLevelBodyPart) : new ValueTuple<bool, sbyte>(true, minLevelBodyPart);
		}

		// Token: 0x06001E82 RID: 7810 RVA: 0x00190090 File Offset: 0x0018E290
		public static bool CanMedicineApplyInstantEffect(GameData.Domains.Character.Character targetChar, ItemKey medicineItemKey)
		{
			bool flag = medicineItemKey.ItemType != 8;
			if (flag)
			{
				DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(19, 1);
				defaultInterpolatedStringHandler.AppendLiteral("Invalid item type: ");
				defaultInterpolatedStringHandler.AppendFormatted<sbyte>(medicineItemKey.ItemType);
				throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
			}
			MedicineItem medicineCfg = Config.Medicine.Instance[medicineItemKey.TemplateId];
			bool flag2 = medicineCfg.EffectType != EMedicineEffectType.RecoverOuterInjury && medicineCfg.EffectType != EMedicineEffectType.RecoverInnerInjury;
			if (flag2)
			{
				DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(20, 1);
				defaultInterpolatedStringHandler.AppendLiteral("Invalid EffectType: ");
				defaultInterpolatedStringHandler.AppendFormatted<EMedicineEffectType>(medicineCfg.EffectType);
				throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
			}
			bool isInnerInjury = medicineCfg.EffectType == EMedicineEffectType.RecoverInnerInjury;
			Injuries injuries = targetChar.GetInjuries();
			for (sbyte bodyPart = 0; bodyPart < 7; bodyPart += 1)
			{
				sbyte injuryLevel = injuries.Get(bodyPart, isInnerInjury);
				bool flag3 = injuryLevel > 0;
				if (flag3)
				{
					return true;
				}
			}
			return false;
		}

		// Token: 0x06001E83 RID: 7811 RVA: 0x00190190 File Offset: 0x0018E390
		public unsafe static bool TopicalConsumeIsSatisfy(GameData.Domains.Character.Character targetChar, ItemKey medicineItemKey)
		{
			MainAttributes currMainAttributes = targetChar.GetCurrMainAttributes();
			MedicineItem medicineCfg = Config.Medicine.Instance[medicineItemKey.TemplateId];
			sbyte mainAttrType = medicineCfg.RequiredMainAttributeType;
			sbyte mainAttrVal = medicineCfg.RequiredMainAttributeValue;
			return mainAttrType < 0 || *(ref currMainAttributes.Items.FixedElementField + (IntPtr)mainAttrType * 2) >= (short)mainAttrVal;
		}

		// Token: 0x06001E84 RID: 7812 RVA: 0x001901EC File Offset: 0x0018E3EC
		public unsafe static bool CanEatItem(GameData.Domains.Character.Character targetChar, ItemKey itemKey)
		{
			EatingItems eatingItems = *targetChar.GetEatingItems();
			sbyte currMaxEatingSlotsCount = targetChar.GetCurrMaxEatingSlotsCount();
			sbyte index = eatingItems.GetAvailableEatingSlot(currMaxEatingSlotsCount);
			bool flag = itemKey.ItemType == 8;
			if (flag)
			{
				MedicineItem cfg = Config.Medicine.Instance[itemKey.TemplateId];
				bool flag2 = cfg != null && cfg.RequiredMainAttributeType >= 0 && *targetChar.GetCurrMainAttributes()[(int)cfg.RequiredMainAttributeType] < (short)cfg.RequiredMainAttributeValue;
				if (flag2)
				{
					return false;
				}
				bool flag3 = Config.Medicine.Instance[itemKey.TemplateId].Duration == 0;
				if (flag3)
				{
					return true;
				}
			}
			return itemKey.ItemType == 12 || index >= 0;
		}

		// Token: 0x06001E85 RID: 7813 RVA: 0x001902B0 File Offset: 0x0018E4B0
		public unsafe static bool CanEatItemExceptMisc(GameData.Domains.Character.Character targetChar)
		{
			EatingItems eatingItems = *targetChar.GetEatingItems();
			sbyte currMaxEatingSlotsCount = targetChar.GetCurrMaxEatingSlotsCount();
			sbyte index = eatingItems.GetAvailableEatingSlot(currMaxEatingSlotsCount);
			bool flag = index < 0;
			return !flag;
		}

		// Token: 0x06001E86 RID: 7814 RVA: 0x001902F0 File Offset: 0x0018E4F0
		public unsafe static void ClearCharPoison(int charId)
		{
			GameData.Domains.Character.Character character = DomainManager.Character.GetElement_Objects(charId);
			PoisonInts poisoned = *character.GetPoisoned();
			poisoned.Initialize();
			character.SetPoisoned(ref poisoned, EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x06001E87 RID: 7815 RVA: 0x00190334 File Offset: 0x0018E534
		public unsafe static void RemoveRandomNormalWugs(int charId, int count)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			List<short> prefer = ObjectPool<List<short>>.Instance.Get();
			List<short> normal = ObjectPool<List<short>>.Instance.Get();
			prefer.Clear();
			normal.Clear();
			GameData.Domains.Character.Character character = DomainManager.Character.GetElement_Objects(charId);
			EatingItems eatingItems = *character.GetEatingItems();
			for (int i = 0; i < 9; i++)
			{
				ItemKey itemKey = eatingItems.Get(i);
				bool flag = !EatingItems.IsWug(itemKey) || EatingItems.IsWugKing(itemKey);
				if (!flag)
				{
					MedicineItem config = Config.Medicine.Instance[itemKey.TemplateId];
					bool flag2 = WugGrowthType.IsBad(config.WugGrowthType);
					if (flag2)
					{
						prefer.Add(itemKey.TemplateId);
					}
					else
					{
						normal.Add(itemKey.TemplateId);
					}
				}
			}
			foreach (short templateId in RandomUtils.GetRandomUnrepeated<short>(context.Random, count, prefer, normal))
			{
				character.RemoveWug(context, templateId);
			}
			ObjectPool<List<short>>.Instance.Return(prefer);
			ObjectPool<List<short>>.Instance.Return(normal);
		}

		// Token: 0x06001E88 RID: 7816 RVA: 0x00190478 File Offset: 0x0018E678
		public unsafe static void ChangeWugKingDurations(int charId, short deltaDuration)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			GameData.Domains.Character.Character character = DomainManager.Character.GetElement_Objects(charId);
			EatingItems eatingItems = *character.GetEatingItems();
			int index = eatingItems.IndexOfWugKing();
			bool flag = index < 0;
			if (!flag)
			{
				ItemKey itemKey = eatingItems.Get(index);
				short wugTemplateId = itemKey.TemplateId;
				ref eatingItems.ChangeDuration(context, index, deltaDuration);
				character.SetEatingItems(ref eatingItems, context);
				bool flag2 = eatingItems.Get(index) != ItemKey.Invalid;
				if (!flag2)
				{
					Events.RaiseRemoveWug(context, charId, wugTemplateId);
					InstantNotificationCollection instantNotificationCollection = DomainManager.World.GetInstantNotificationCollection();
					bool flag3 = character.ChangeFeatureByWugKing(context.Random);
					if (flag3)
					{
						character.SetFeatureIds(character.GetFeatureIds(), context);
						instantNotificationCollection.AddWugKingDead(charId, itemKey.ItemType, itemKey.TemplateId);
					}
					else
					{
						instantNotificationCollection.AddWugKingDeadSpecial(charId, itemKey.ItemType, itemKey.TemplateId);
					}
				}
			}
		}

		// Token: 0x06001E89 RID: 7817 RVA: 0x0019056C File Offset: 0x0018E76C
		public static long GetTotalDebtWorth(int targetCharId)
		{
			Debts debts = DomainManager.Character.GetDebts(targetCharId);
			return (debts != null) ? debts.GetTotalWorthLentToTaiwu() : 0L;
		}

		// Token: 0x06001E8A RID: 7818 RVA: 0x00190598 File Offset: 0x0018E798
		public static long GetDebtWorth(int targetCharId, bool isEquivalent)
		{
			long result;
			if (isEquivalent)
			{
				Debts debts = DomainManager.Character.GetDebts(targetCharId);
				result = ((debts != null) ? debts.GetEquivalentWorth() : 0L);
			}
			else
			{
				Debts debts2 = DomainManager.Character.GetDebts(targetCharId);
				result = ((debts2 != null) ? debts2.GetTotalNonEquivalentWorth() : 0L);
			}
			return result;
		}

		// Token: 0x06001E8B RID: 7819 RVA: 0x001905E4 File Offset: 0x0018E7E4
		public static void DirectlyAddDebt(int targetCharId, int worth, bool isEquivalent)
		{
			bool flag = worth == 0;
			if (!flag)
			{
				DomainManager.Character.DirectlyAddDebt(EventHelper.Domain.MainThreadDataContext, targetCharId, (long)worth, isEquivalent);
			}
		}

		// Token: 0x06001E8C RID: 7820 RVA: 0x00190615 File Offset: 0x0018E815
		public static void DirectlyReduceDebt(int targetCharId, int worth, bool isEquivalent)
		{
			DomainManager.Character.DirectlyReduceDebt(EventHelper.Domain.MainThreadDataContext, targetCharId, (long)worth, isEquivalent);
		}

		// Token: 0x06001E8D RID: 7821 RVA: 0x00190634 File Offset: 0x0018E834
		public static int GetAvailableEatingSlotsCount(int charId)
		{
			GameData.Domains.Character.Character character = DomainManager.Character.GetElement_Objects(charId);
			return character.GetEatingItems().GetAvailableEatingSlotsCount(character.GetCurrMaxEatingSlotsCount());
		}

		// Token: 0x06001E8E RID: 7822 RVA: 0x00190664 File Offset: 0x0018E864
		public static short GetRandomEnemyCharTemplateId(sbyte orgTemplateId, sbyte expectedGrade)
		{
			IRandomSource random = EventHelper.Domain.MainThreadDataContext.Random;
			return CharacterDomain.GetRandomEnemyCharTemplateId(random, orgTemplateId, expectedGrade);
		}

		// Token: 0x06001E8F RID: 7823 RVA: 0x00190690 File Offset: 0x0018E890
		public static sbyte GetInteractionGrade(GameData.Domains.Character.Character character)
		{
			return character.GetInteractionGrade();
		}

		// Token: 0x06001E90 RID: 7824 RVA: 0x001906A8 File Offset: 0x0018E8A8
		public static GameData.Domains.Character.Character GetOrCreateFixedCharacterByTemplateId(short templateId)
		{
			return DomainManager.Character.GetOrCreateFixedCharacterByTemplateId(EventHelper.Domain.MainThreadDataContext, templateId);
		}

		// Token: 0x06001E91 RID: 7825 RVA: 0x001906D0 File Offset: 0x0018E8D0
		public static GameData.Domains.Character.Character CreateAnimal(short templateId, ItemKey itemKey)
		{
			sbyte gender = Config.Character.Instance[templateId].Gender;
			bool flag = gender == -1;
			if (flag)
			{
				gender = Gender.GetRandom(EventHelper.Domain.MainThreadDataContext.Random);
			}
			bool flag2 = itemKey.IsValid();
			if (flag2)
			{
				int jiaoId;
				GameData.DLC.FiveLoong.Jiao jiao;
				bool flag3 = DomainManager.Extra.TryGetJiaoIdByItemKey(itemKey, out jiaoId) && DomainManager.Extra.TryGetJiao(jiaoId, out jiao);
				if (flag3)
				{
					gender = (jiao.Gender ? 1 : 0);
				}
				else
				{
					int loongId;
					ChildrenOfLoong loong;
					bool flag4 = DomainManager.Extra.TryGetChildrenOfLoongIdByItemKey(itemKey, out loongId) && DomainManager.Extra.TryGetLoong(loongId, out loong);
					if (flag4)
					{
						gender = (loong.Gender ? 1 : 0);
					}
				}
			}
			FixedEnemyCreationInfo creationInfo = new FixedEnemyCreationInfo
			{
				Gender = gender
			};
			GameData.Domains.Character.Character fixedEnemy = DomainManager.Character.CreateFixedEnemyWithCreationInfo(EventHelper.Domain.MainThreadDataContext, templateId, ref creationInfo);
			int enemyId = fixedEnemy.GetId();
			DomainManager.Character.CompleteCreatingCharacter(enemyId);
			DomainManager.Adventure.AddTemporaryEnemyId(enemyId);
			return fixedEnemy;
		}

		// Token: 0x06001E92 RID: 7826 RVA: 0x001907DB File Offset: 0x0018E9DB
		public static void ConvertFixedCharacter(GameData.Domains.Character.Character character, Location location, bool recreateAttributesAndQualifications)
		{
			DomainManager.Character.ConvertFixedCharacter(EventHelper.Domain.MainThreadDataContext, character, location, recreateAttributesAndQualifications);
		}

		// Token: 0x06001E93 RID: 7827 RVA: 0x001907F6 File Offset: 0x0018E9F6
		public static void ConvertRandomEnemy(GameData.Domains.Character.Character fixedChar, Location location)
		{
			DomainManager.Character.ConvertRandomEnemy(EventHelper.Domain.MainThreadDataContext, fixedChar, location);
		}

		// Token: 0x06001E94 RID: 7828 RVA: 0x00190810 File Offset: 0x0018EA10
		public static int CreateFixedCharacterGrave(short templateId, Location location, sbyte level, int deathDate = -2147483648)
		{
			GameData.Domains.Character.Character character = EventHelper.GetOrCreateFixedCharacterByTemplateId(templateId);
			int charId = character.GetId();
			DomainManager.Character.CreateGraveForFixedCharacter(EventHelper.Domain.MainThreadDataContext, character, location, level, deathDate);
			return charId;
		}

		// Token: 0x06001E95 RID: 7829 RVA: 0x0019084C File Offset: 0x0018EA4C
		public static void RemoveGrave(int graveId)
		{
			Grave grave;
			bool flag = !DomainManager.Character.TryGetElement_Graves(graveId, out grave);
			if (!flag)
			{
				DomainManager.Character.RemoveGrave(EventHelper.Domain.MainThreadDataContext, grave);
			}
		}

		// Token: 0x06001E96 RID: 7830 RVA: 0x00190888 File Offset: 0x0018EA88
		public static int GetFixedCharacterIdByTemplateId(short templateId)
		{
			return DomainManager.Character.GetFixedCharacterIdByTemplateId(templateId);
		}

		// Token: 0x06001E97 RID: 7831 RVA: 0x001908A8 File Offset: 0x0018EAA8
		public static GameData.Domains.Character.Character GetCharacterById(int charId)
		{
			GameData.Domains.Character.Character character;
			bool flag = DomainManager.Character.TryGetElement_Objects(charId, out character);
			GameData.Domains.Character.Character result;
			if (flag)
			{
				result = character;
			}
			else
			{
				result = null;
			}
			return result;
		}

		// Token: 0x06001E98 RID: 7832 RVA: 0x001908D0 File Offset: 0x0018EAD0
		public static DeadCharacter GetDeadCharacterById(int charId)
		{
			return DomainManager.Character.TryGetDeadCharacter(charId);
		}

		// Token: 0x06001E99 RID: 7833 RVA: 0x001908F0 File Offset: 0x0018EAF0
		public static void JoinGroup(int charId, int targetCharId)
		{
			GameData.Domains.Character.Character targetChar;
			bool flag = !DomainManager.Character.TryGetElement_Objects(targetCharId, out targetChar);
			if (flag)
			{
				DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(39, 1);
				defaultInterpolatedStringHandler.AppendLiteral("target character not found exception : ");
				defaultInterpolatedStringHandler.AppendFormatted<int>(targetCharId);
				throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
			}
			GameData.Domains.Character.Character character;
			bool flag2 = !DomainManager.Character.TryGetElement_Objects(charId, out character);
			if (flag2)
			{
				DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(39, 1);
				defaultInterpolatedStringHandler.AppendLiteral("source character not found exception : ");
				defaultInterpolatedStringHandler.AppendFormatted<int>(charId);
				throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
			}
			DomainManager.Character.JoinGroup(EventHelper.Domain.MainThreadDataContext, character, targetChar);
		}

		// Token: 0x06001E9A RID: 7834 RVA: 0x0019099C File Offset: 0x0018EB9C
		public static void StartSelectFrame(int charId, EventArgBox argBox)
		{
			bool flag = charId < 0;
			if (flag)
			{
				throw new Exception("wrong argument received : charId is not a valid character id!");
			}
			GameData.Domains.Character.Character character;
			bool flag2 = !DomainManager.Character.TryGetElement_Objects(charId, out character);
			if (flag2)
			{
				DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(39, 1);
				defaultInterpolatedStringHandler.AppendLiteral("source character not found exception : ");
				defaultInterpolatedStringHandler.AppendFormatted<int>(charId);
				throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
			}
			EventSelectFameData data = new EventSelectFameData();
			List<FameActionRecord> fameActionRecords = new List<FameActionRecord>();
			foreach (FameActionRecord item in character.GetFameActionRecords())
			{
				FameActionItem config = FameAction.Instance[item.Id];
				bool flag3 = config.ReductionTime > 0;
				if (flag3)
				{
					fameActionRecords.Add(item);
				}
			}
			data.fameActionRecords = fameActionRecords;
			argBox.Set("SelectFameData", data);
		}

		// Token: 0x06001E9B RID: 7835 RVA: 0x00190A94 File Offset: 0x0018EC94
		public static void ChangeFameActionDuration(GameData.Domains.Character.Character character, short fameActionTemplateId, int deltaTime, bool isCostAuthority)
		{
			int currDate = DomainManager.World.GetCurrDate();
			List<FameActionRecord> fameActionRecords = character.GetFameActionRecords();
			for (int index = fameActionRecords.Count - 1; index >= 0; index--)
			{
				FameActionRecord fameRecord = fameActionRecords[index];
				bool flag = fameRecord.Id != fameActionTemplateId;
				if (!flag)
				{
					fameRecord.EndDate += deltaTime;
					fameActionRecords[index] = fameRecord;
					bool flag2 = fameActionRecords[index].EndDate < currDate;
					if (flag2)
					{
						CollectionUtils.SwapAndRemove<FameActionRecord>(fameActionRecords, index);
					}
					if (isCostAuthority)
					{
						character.ChangeResource(EventHelper.Domain.MainThreadDataContext, 7, (int)Math.Abs(fameRecord.Value) * deltaTime * 20);
					}
				}
			}
			character.SetFameActionRecords(fameActionRecords, EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x06001E9C RID: 7836 RVA: 0x00190B60 File Offset: 0x0018ED60
		public static void RemoveAllInventoryAndEquippedItems(GameData.Domains.Character.Character character)
		{
			DomainManager.Character.RemoveAllInventoryAndEquippedItems(EventHelper.Domain.MainThreadDataContext, character);
		}

		// Token: 0x06001E9D RID: 7837 RVA: 0x00190B7C File Offset: 0x0018ED7C
		public static void RevokeAllCombatSkills(GameData.Domains.Character.Character character)
		{
			List<short> combatSkills = character.GetLearnedCombatSkills();
			foreach (short combatSkillId in combatSkills)
			{
				DomainManager.Character.RevokeCombatSkill(EventHelper.Domain.MainThreadDataContext, character, combatSkillId);
			}
		}

		// Token: 0x06001E9E RID: 7838 RVA: 0x00190BE4 File Offset: 0x0018EDE4
		public static void RevokeNeiliAndConsummateLevel(GameData.Domains.Character.Character character)
		{
			character.SetCurrNeili(0, EventHelper.Domain.MainThreadDataContext);
			character.SetExtraNeili(0, EventHelper.Domain.MainThreadDataContext);
			character.SetConsummateLevel(0, EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x06001E9F RID: 7839 RVA: 0x00190C20 File Offset: 0x0018EE20
		public static void JoinNearbyVillageTownAsBeggar(GameData.Domains.Character.Character character, short settlementId = -1)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			DomainManager.Organization.JoinNearbyVillageTownAsBeggar(context, character, settlementId);
		}

		// Token: 0x06001EA0 RID: 7840 RVA: 0x00190C48 File Offset: 0x0018EE48
		public static void AddSectPunishmentFeature(GameData.Domains.Character.Character character, short orgTemplateId)
		{
			short featureId = Organization.Instance[(int)orgTemplateId].PunishmentFeature;
			bool flag = featureId >= 0;
			if (flag)
			{
				character.AddFeature(EventHelper.Domain.MainThreadDataContext, featureId, false);
			}
		}

		// Token: 0x06001EA1 RID: 7841 RVA: 0x00190C88 File Offset: 0x0018EE88
		public static bool AddFeature(GameData.Domains.Character.Character character, short featureId, bool removeMutexFeature = false)
		{
			return character.AddFeature(EventHelper.Domain.MainThreadDataContext, featureId, removeMutexFeature);
		}

		// Token: 0x06001EA2 RID: 7842 RVA: 0x00190CAC File Offset: 0x0018EEAC
		public static void RemoveFeature(GameData.Domains.Character.Character character, short featureId)
		{
			List<short> featureIds = character.GetFeatureIds();
			bool flag = featureIds.Contains(featureId);
			if (flag)
			{
				character.RemoveFeature(EventHelper.Domain.MainThreadDataContext, featureId);
			}
		}

		// Token: 0x06001EA3 RID: 7843 RVA: 0x00190CE0 File Offset: 0x0018EEE0
		public static short GetRandomOneYearOldCatchFeature()
		{
			return CharacterDomain.GenerateOneYearOldCatchFeature(EventHelper.Domain.MainThreadDataContext.Random);
		}

		// Token: 0x06001EA4 RID: 7844 RVA: 0x00190D06 File Offset: 0x0018EF06
		public static void AddCharacterExtraTitle(GameData.Domains.Character.Character character, short titleTemplateId, int expireDate = -1)
		{
			DomainManager.Extra.AddCharacterExtraTitle(EventHelper.Domain.MainThreadDataContext, character.GetId(), titleTemplateId, expireDate);
		}

		// Token: 0x06001EA5 RID: 7845 RVA: 0x00190D28 File Offset: 0x0018EF28
		public static Grave GetGrave(int graveId)
		{
			Grave grave;
			return DomainManager.Character.TryGetElement_Graves(graveId, out grave) ? grave : null;
		}

		// Token: 0x06001EA6 RID: 7846 RVA: 0x00190D50 File Offset: 0x0018EF50
		public static void UpgradeGrave(int targetGraveId, sbyte targetLevel)
		{
			Grave grave = DomainManager.Character.GetElement_Graves(targetGraveId);
			grave.SetLevel(targetLevel, EventHelper.Domain.MainThreadDataContext);
			short maxDurability = GlobalConfig.Instance.GraveDurabilities[(int)targetLevel];
			grave.SetDurability(maxDurability, EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x06001EA7 RID: 7847 RVA: 0x00190D9C File Offset: 0x0018EF9C
		public static GameData.Domains.Character.Character CreateSkeletonCharacter(int graveId)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			Grave grave = DomainManager.Character.GetElement_Graves(graveId);
			GameData.Domains.Character.Character skeletonCharacter = DomainManager.Character.CreateSkeletonCharacter(context, grave);
			DomainManager.Adventure.AddTemporaryEnemyId(skeletonCharacter.GetId());
			return skeletonCharacter;
		}

		// Token: 0x06001EA8 RID: 7848 RVA: 0x00190DE4 File Offset: 0x0018EFE4
		public static sbyte GetGraveLevel(int targetGraveId)
		{
			Grave grave = DomainManager.Character.GetElement_Graves(targetGraveId);
			return grave.GetLevel();
		}

		// Token: 0x06001EA9 RID: 7849 RVA: 0x00190E08 File Offset: 0x0018F008
		public static int GetBloodParentId(int charId, sbyte gender)
		{
			return DomainManager.Character.GetBloodParent(charId, gender);
		}

		// Token: 0x06001EAA RID: 7850 RVA: 0x00190E28 File Offset: 0x0018F028
		public static int GetOtherBloodParent(int charId, int parentId)
		{
			return DomainManager.Character.GetOtherBloodParent(charId, parentId);
		}

		// Token: 0x06001EAB RID: 7851 RVA: 0x00190E48 File Offset: 0x0018F048
		public static ItemKey AddCricketToInventory(GameData.Domains.Character.Character character, short colorId, short partId)
		{
			ItemKey itemKey = DomainManager.Item.CreateCricket(EventHelper.Domain.MainThreadDataContext, colorId, partId);
			character.AddInventoryItem(EventHelper.Domain.MainThreadDataContext, itemKey, 1, false);
			return itemKey;
		}

		// Token: 0x06001EAC RID: 7852 RVA: 0x00190E88 File Offset: 0x0018F088
		public static ItemKey AddSmartCricketToInventory(GameData.Domains.Character.Character character, short colorId, short partId)
		{
			bool flag = ItemTemplateHelper.GetCricketGrade(colorId, partId) >= 7 || CricketParts.Instance[colorId].Type == ECricketPartsType.Trash;
			ItemKey result;
			if (flag)
			{
				result = ItemKey.Invalid;
			}
			else
			{
				ItemKey itemKey = EventHelper.AddCricketToInventory(character, colorId, partId);
				DomainManager.Extra.ForceCricketSmart(EventHelper.Domain.MainThreadDataContext, itemKey);
				GameData.Domains.Item.Cricket cricket = DomainManager.Item.GetElement_Crickets(itemKey.Id);
				cricket.SetWinsCount(15, EventHelper.Domain.MainThreadDataContext);
				result = itemKey;
			}
			return result;
		}

		// Token: 0x06001EAD RID: 7853 RVA: 0x00190F0C File Offset: 0x0018F10C
		public static ItemKey AddRandomCricketKingToInventory(GameData.Domains.Character.Character character)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			List<ValueTuple<short, short>> weightTable = context.AdvanceMonthRelatedData.WeightTable.Occupy();
			foreach (CricketPartsItem config in ((IEnumerable<CricketPartsItem>)CricketParts.Instance))
			{
				bool flag = config.Type == ECricketPartsType.King;
				if (flag)
				{
					weightTable.Add(new ValueTuple<short, short>(config.TemplateId, (short)config.Rate));
				}
			}
			short templateId = RandomUtils.GetRandomResult<short>(weightTable, context.Random);
			ItemKey itemKey = DomainManager.Item.CreateCricket(context, templateId, 0);
			character.AddInventoryItem(context, itemKey, 1, false);
			context.AdvanceMonthRelatedData.WeightTable.Release(ref weightTable);
			return itemKey;
		}

		// Token: 0x06001EAE RID: 7854 RVA: 0x00190FE4 File Offset: 0x0018F1E4
		public static void AddEatingItem(GameData.Domains.Character.Character itemOwner, GameData.Domains.Character.Character itemEater, ItemKey itemKey)
		{
			itemOwner.RemoveInventoryItem(EventHelper.Domain.MainThreadDataContext, itemKey, 1, false, false);
			itemEater.AddEatingItem(EventHelper.Domain.MainThreadDataContext, itemKey, null);
		}

		// Token: 0x06001EAF RID: 7855 RVA: 0x0019100F File Offset: 0x0018F20F
		public static void ApplyTopicalMedicine(GameData.Domains.Character.Character itemOwner, GameData.Domains.Character.Character itemUser, ItemKey itemKey)
		{
			itemUser.ApplyTopicalMedicine(EventHelper.Domain.MainThreadDataContext, itemKey);
			itemOwner.RemoveInventoryItem(EventHelper.Domain.MainThreadDataContext, itemKey, 1, true, false);
		}

		// Token: 0x06001EB0 RID: 7856 RVA: 0x00191039 File Offset: 0x0018F239
		public static void ApplyGeneralActionChanges(IGeneralAction generalAction, GameData.Domains.Character.Character selfChar, GameData.Domains.Character.Character targetChar)
		{
			generalAction.ApplyChanges(EventHelper.Domain.MainThreadDataContext, selfChar, targetChar);
			EventHelper.CommitLifeRecords();
		}

		// Token: 0x06001EB1 RID: 7857 RVA: 0x00191055 File Offset: 0x0018F255
		public static void AllocateNeili(int charId, byte neiliAllocationType)
		{
			DomainManager.Character.GetElement_Objects(charId).AllocateNeili(EventHelper.Domain.MainThreadDataContext, neiliAllocationType);
		}

		// Token: 0x06001EB2 RID: 7858 RVA: 0x00191074 File Offset: 0x0018F274
		public static short AddExtraNeiliAllocationProgressToGainExtraNeiliAllocation(GameData.Domains.Character.Character character, byte neiliAllocationType, int deltaNeiliAllocation)
		{
			return DomainManager.CombatSkill.AddExtraNeiliAllocationProgressToGainExtraNeiliAllocation(EventHelper.Domain.MainThreadDataContext, character, neiliAllocationType, deltaNeiliAllocation, false);
		}

		// Token: 0x06001EB3 RID: 7859 RVA: 0x0019109E File Offset: 0x0018F29E
		[Obsolete]
		public static void SetCombatSkillSlot(int charId, sbyte equipType, int index, short skillTemplateId)
		{
			EventHelper.AddEquippedCombatSkill(charId, skillTemplateId);
		}

		// Token: 0x06001EB4 RID: 7860 RVA: 0x001910A9 File Offset: 0x0018F2A9
		public static void AddEquippedCombatSkill(int charId, short skillTemplateId)
		{
			DomainManager.Character.AddEquippedCombatSkill(EventHelper.Domain.MainThreadDataContext, charId, skillTemplateId);
		}

		// Token: 0x06001EB5 RID: 7861 RVA: 0x001910C4 File Offset: 0x0018F2C4
		public static void CreateCombatSkillSelectRequestOfCharacter(TaiwuEventItem eventItem, int optionIndex, int charId, string resultSaveKey, List<short> combatSKillIdList)
		{
			bool flag = eventItem == null;
			if (flag)
			{
				throw new Exception("wrong argument received : null eventItem!");
			}
			bool flag2 = !eventItem.EventOptions.CheckIndex(optionIndex);
			if (flag2)
			{
				throw new Exception("wrong argument received : optionIndex is out of range!");
			}
			bool flag3 = charId < 0;
			if (flag3)
			{
				throw new Exception("wrong argument received : charId is not a valid character id!");
			}
			bool flag4 = string.IsNullOrEmpty(resultSaveKey);
			if (flag4)
			{
				throw new Exception("wrong argument received : resultSaveKey can not empty!");
			}
			bool flag5 = combatSKillIdList == null || combatSKillIdList.Count <= 0;
			if (flag5)
			{
				throw new Exception("wrong argument received : combatSKillIdList can not be null and must has at least one element!");
			}
			EventSelectCombatSkillData data = new EventSelectCombatSkillData
			{
				CharId = charId,
				OptionKey = eventItem.EventOptions[optionIndex].OptionKey,
				ResultSaveKey = resultSaveKey,
				CanSelectCombatSkillIdList = combatSKillIdList
			};
			EventHelper.Domain.SetSelectCombatSkillData(data, EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x06001EB6 RID: 7862 RVA: 0x00191198 File Offset: 0x0018F398
		public static void StartSelectCombatSkill(int charId, List<short> combatSKillIdList, string nextEventGuid, EventArgBox argBox)
		{
			bool flag = charId < 0;
			if (flag)
			{
				throw new Exception("wrong argument received : charId is not a valid character id!");
			}
			bool flag2 = !string.IsNullOrEmpty(nextEventGuid);
			if (flag2)
			{
				EventHelper.AddEventInListenWithActionName(nextEventGuid, argBox, "FinishSelectCombatSkill");
			}
			GameDataBridge.AddDisplayEvent<int, List<short>>(DisplayEventType.SelectCombatSkill, charId, combatSKillIdList);
		}

		// Token: 0x06001EB7 RID: 7863 RVA: 0x001911E0 File Offset: 0x0018F3E0
		public static void CreateLifeSkillSelectRequestOfCharacter(TaiwuEventItem eventItem, int optionIndex, int charId, string resultSaveKey, List<short> lifeSKillIdList)
		{
			bool flag = eventItem == null;
			if (flag)
			{
				throw new Exception("wrong argument received : null eventItem!");
			}
			bool flag2 = !eventItem.EventOptions.CheckIndex(optionIndex);
			if (flag2)
			{
				throw new Exception("wrong argument received : optionIndex is out of range!");
			}
			bool flag3 = charId < 0;
			if (flag3)
			{
				throw new Exception("wrong argument received : charId is not a valid character id!");
			}
			bool flag4 = string.IsNullOrEmpty(resultSaveKey);
			if (flag4)
			{
				throw new Exception("wrong argument received : resultSaveKey can not empty!");
			}
			bool flag5 = lifeSKillIdList == null || lifeSKillIdList.Count <= 0;
			if (flag5)
			{
				throw new Exception("wrong argument received : combatSKillIdList can not be null and must has at least one element!");
			}
			EventSelectLifeSkillData data = new EventSelectLifeSkillData
			{
				CharId = charId,
				OptionKey = eventItem.EventOptions[optionIndex].OptionKey,
				ResultSaveKey = resultSaveKey,
				CanSelectLifeSkillIdList = lifeSKillIdList
			};
			EventHelper.Domain.SetSelectLifeSkillData(data, EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x06001EB8 RID: 7864 RVA: 0x001912B4 File Offset: 0x0018F4B4
		public static void ChangeEquipment(int charId, sbyte srcSlot, sbyte destSlot, ItemKey srcItemKey)
		{
			GameData.Domains.Character.Character character = DomainManager.Character.GetElement_Objects(charId);
			character.ChangeEquipment(EventHelper.Domain.MainThreadDataContext, srcSlot, destSlot, srcItemKey);
		}

		// Token: 0x06001EB9 RID: 7865 RVA: 0x001912E4 File Offset: 0x0018F4E4
		public static string GetNpcRandomWord(GameData.Domains.Character.Character npcChar)
		{
			return EventHelper.GetNpcRandomWordByType(npcChar, ENpcRandomWordsType.Normal);
		}

		// Token: 0x06001EBA RID: 7866 RVA: 0x00191300 File Offset: 0x0018F500
		public static string GetNpcRandomWordByType(GameData.Domains.Character.Character npcChar, ENpcRandomWordsType type)
		{
			bool flag = npcChar == null;
			if (flag)
			{
				throw new Exception("null character can not get random word");
			}
			return type.RandomContent(EventHelper.Domain.MainThreadDataContext.Random, npcChar, ENpcRandomWordsType.Count);
		}

		// Token: 0x06001EBB RID: 7867 RVA: 0x00191340 File Offset: 0x0018F540
		public static string GetNpcRandomWordByTypeWithNormal(GameData.Domains.Character.Character npcChar, ENpcRandomWordsType type)
		{
			bool flag = npcChar == null;
			if (flag)
			{
				throw new Exception("null character can not get random word");
			}
			return type.RandomContent(EventHelper.Domain.MainThreadDataContext.Random, npcChar, ENpcRandomWordsType.Normal);
		}

		// Token: 0x06001EBC RID: 7868 RVA: 0x0019137C File Offset: 0x0018F57C
		public static string GetNpcRandomWordFirstInType(GameData.Domains.Character.Character npcChar, ENpcRandomWordsType type)
		{
			string word = EventHelper.GetNpcRandomWordByType(npcChar, type);
			return string.IsNullOrEmpty(word) ? EventHelper.GetNpcRandomWord(npcChar) : word;
		}

		// Token: 0x06001EBD RID: 7869 RVA: 0x001913A8 File Offset: 0x0018F5A8
		public static sbyte GetMaxLifeSkillAttainmentType(int charId)
		{
			GameData.Domains.Character.Character character = DomainManager.Character.GetElement_Objects(charId);
			return character.GetMaxLifeSkillAttainmentType(DomainManager.TaiwuEvent.MainThreadDataContext);
		}

		// Token: 0x06001EBE RID: 7870 RVA: 0x001913D8 File Offset: 0x0018F5D8
		public static GameData.Domains.Character.Character GetMaxCombatPowerCharacter(List<GameData.Domains.Character.Character> characters)
		{
			bool flag = characters == null || characters.Count == 0;
			GameData.Domains.Character.Character result;
			if (flag)
			{
				result = null;
			}
			else
			{
				int index = -1;
				int maxCombatPower = -1;
				for (int i = 0; i < characters.Count; i++)
				{
					bool flag2 = characters[i].GetCombatPower() > maxCombatPower;
					if (flag2)
					{
						maxCombatPower = characters[i].GetCombatPower();
						index = i;
					}
				}
				bool flag3 = index == -1;
				if (flag3)
				{
					result = null;
				}
				else
				{
					result = characters[index];
				}
			}
			return result;
		}

		// Token: 0x06001EBF RID: 7871 RVA: 0x00191460 File Offset: 0x0018F660
		public static bool CompareCombatPower(int charIdA, int charIdB)
		{
			return AdventureCharacterSortUtils.CompareCombatPower(charIdA, charIdB) >= 0;
		}

		// Token: 0x06001EC0 RID: 7872 RVA: 0x00191480 File Offset: 0x0018F680
		public static int GetSimulateCharacterCombatWinRate(GameData.Domains.Character.Character charA, GameData.Domains.Character.Character charB)
		{
			return DomainManager.Character.GetSimulateCharacterCombatWinRate(EventHelper.Domain.MainThreadDataContext, charA, charB, 1, 1, true);
		}

		// Token: 0x06001EC1 RID: 7873 RVA: 0x001914AC File Offset: 0x0018F6AC
		public static int GetSimulateCharacterCombatWinRate(GameData.Domains.Character.Character charA, GameData.Domains.Character.Character charB, int powerA, int powerB)
		{
			bool charAInvincible = charA.IsInvincibleInNpcCombat();
			bool charBInvincible = charB.IsInvincibleInNpcCombat();
			return DomainManager.Character.GetSimulateCharacterCombatWinRate(powerA, powerB, charAInvincible, charBInvincible, EventHelper.Domain.MainThreadDataContext.Random.NextBool());
		}

		// Token: 0x06001EC2 RID: 7874 RVA: 0x001914F0 File Offset: 0x0018F6F0
		public static bool TryGetFixedCharacterByTemplateId(short templateId, out GameData.Domains.Character.Character character)
		{
			return DomainManager.Character.TryGetFixedCharacterByTemplateId(templateId, out character);
		}

		// Token: 0x06001EC3 RID: 7875 RVA: 0x00191510 File Offset: 0x0018F710
		public static void StartSelectChar(string selectCompleteEvent, EventArgBox argBox, Predicate<GameData.Domains.Character.Character> predicate = null)
		{
			CharacterSet characterSet = DomainManager.Taiwu.GetGroupCharIds();
			characterSet.Remove(DomainManager.Taiwu.GetTaiwuCharId());
			List<int> charIdList = ObjectPool<List<int>>.Instance.Get();
			charIdList.Clear();
			foreach (int charId in characterSet.GetCollection())
			{
				GameData.Domains.Character.Character character = DomainManager.Character.GetElement_Objects(charId);
				bool flag = character.GetAgeGroup() <= 1;
				if (!flag)
				{
					bool flag2 = predicate != null && !predicate(character);
					if (!flag2)
					{
						charIdList.Add(charId);
					}
				}
			}
			List<CharacterDisplayData> characterDisplayDataList = DomainManager.Character.GetCharacterDisplayDataList(charIdList);
			EventHelper.Domain.SetListenerWithActionName(selectCompleteEvent, argBox, "SelectCharOver");
			bool flag3 = characterDisplayDataList.Count == 0;
			if (flag3)
			{
				throw new Exception("no available teammate can selected !");
			}
			GameDataBridge.AddDisplayEvent<List<int>, List<CharacterDisplayData>>(DisplayEventType.SelectCharSoul, charIdList, characterDisplayDataList);
			ObjectPool<List<int>>.Instance.Return(charIdList);
		}

		// Token: 0x06001EC4 RID: 7876 RVA: 0x00191628 File Offset: 0x0018F828
		public static void StartUltimateSelectCharacterForDirectSamsaraMother(string selectCompleteEvent, EventArgBox argBox)
		{
			EventHelper.Domain.SetListenerWithActionName(selectCompleteEvent, argBox, " UltimateSelectCharOver");
			CharacterSortFilterSettings sortFilterSettings = new CharacterSortFilterSettings();
			sortFilterSettings.FilterType = 0;
			sortFilterSettings.FilterSubType = 0;
			DomainManager.Character.InitializeCharacterSortFilter(sortFilterSettings);
			GameDataBridge.AddDisplayEvent<CharacterSortFilterSettings>(DisplayEventType.UltimateSelectCharacterForDirectSamsaraMother, sortFilterSettings);
		}

		// Token: 0x06001EC5 RID: 7877 RVA: 0x00191674 File Offset: 0x0018F874
		public static void StartSelectChar(string selectCompleteEvent, EventArgBox argBox, List<GameData.Domains.Character.Character> characters)
		{
			List<int> charIdList = ObjectPool<List<int>>.Instance.Get();
			charIdList.Clear();
			for (int i = 0; i < characters.Count; i++)
			{
				charIdList.Add(characters[i].GetId());
			}
			List<CharacterDisplayData> characterDisplayDataList = DomainManager.Character.GetCharacterDisplayDataList(charIdList);
			EventHelper.Domain.SetListenerWithActionName(selectCompleteEvent, argBox, "SelectCharOver");
			bool flag = characterDisplayDataList.Count == 0;
			if (flag)
			{
				throw new Exception("no available teammate can selected !");
			}
			GameDataBridge.AddDisplayEvent<List<int>, List<CharacterDisplayData>>(DisplayEventType.SelectCharSoul, charIdList, characterDisplayDataList);
			ObjectPool<List<int>>.Instance.Return(charIdList);
		}

		// Token: 0x06001EC6 RID: 7878 RVA: 0x0019170C File Offset: 0x0018F90C
		public static void StartSelectSoul(string selectCompleteEvent, EventArgBox argBox)
		{
			HashSet<int> waitingReincarnationChars = ObjectPool<HashSet<int>>.Instance.Get();
			List<int> charIdList = ObjectPool<List<int>>.Instance.Get();
			charIdList.Clear();
			DomainManager.Character.GetAllWaitingReincarnationCharIds(waitingReincarnationChars);
			foreach (int charId in waitingReincarnationChars)
			{
				bool flag = EventHelper.CanSelectSoul(charId);
				if (flag)
				{
					charIdList.Add(charId);
				}
				bool flag2 = charIdList.Count >= 12;
				if (flag2)
				{
					break;
				}
			}
			EventHelper.Domain.SetListenerWithActionName(selectCompleteEvent, argBox, "SelectCharOver");
			bool flag3 = charIdList.Count == 0;
			if (flag3)
			{
				throw new Exception("no available teammate can selected !");
			}
			GameDataBridge.AddDisplayEvent<List<int>, sbyte, bool>(DisplayEventType.SelectCharSoul, charIdList, 12, true);
			ObjectPool<List<int>>.Instance.Return(charIdList);
			ObjectPool<HashSet<int>>.Instance.Return(waitingReincarnationChars);
		}

		// Token: 0x06001EC7 RID: 7879 RVA: 0x001917FC File Offset: 0x0018F9FC
		private static bool CanSelectSoul(int charId)
		{
			bool flag = DomainManager.Building.IsCharOnSamsaraPlatform(charId, true);
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				bool flag2 = DomainManager.Extra.IsSavedSoul(charId);
				if (flag2)
				{
					result = false;
				}
				else
				{
					DeadCharacter deadCharacter;
					bool flag3 = DomainManager.Character.TryGetDeadCharacter(charId, out deadCharacter);
					if (flag3)
					{
						bool flag4 = deadCharacter.IsCompletelyInfected();
						if (flag4)
						{
							return false;
						}
					}
					result = true;
				}
			}
			return result;
		}

		// Token: 0x06001EC8 RID: 7880 RVA: 0x0019185C File Offset: 0x0018FA5C
		public static bool HasSoulToSelect()
		{
			HashSet<int> waitingReincarnationChars = ObjectPool<HashSet<int>>.Instance.Get();
			List<int> charIdList = ObjectPool<List<int>>.Instance.Get();
			DomainManager.Character.GetAllWaitingReincarnationCharIds(waitingReincarnationChars);
			foreach (int charId in waitingReincarnationChars)
			{
				bool flag = EventHelper.CanSelectSoul(charId);
				if (flag)
				{
					charIdList.Add(charId);
				}
			}
			int count = charIdList.Count;
			ObjectPool<HashSet<int>>.Instance.Return(waitingReincarnationChars);
			ObjectPool<List<int>>.Instance.Return(charIdList);
			return count > 0;
		}

		// Token: 0x06001EC9 RID: 7881 RVA: 0x0019190C File Offset: 0x0018FB0C
		public static CharacterSet GetGroup(int leaderId)
		{
			return DomainManager.Character.GetGroup(leaderId);
		}

		// Token: 0x06001ECA RID: 7882 RVA: 0x0019192C File Offset: 0x0018FB2C
		public static List<int> GetTaiwuAdultGroups()
		{
			List<int> groups = new List<int>();
			HashSet<int> collection = DomainManager.Taiwu.GetGroupCharIds().GetCollection();
			foreach (int charId in collection)
			{
				bool flag = charId == DomainManager.Taiwu.GetTaiwuCharId();
				if (!flag)
				{
					GameData.Domains.Character.Character character;
					bool flag2 = DomainManager.Character.TryGetElement_Objects(charId, out character);
					if (flag2)
					{
						bool flag3 = character.GetAgeGroup() >= 2;
						if (flag3)
						{
							groups.Add(charId);
						}
					}
				}
			}
			return groups;
		}

		// Token: 0x06001ECB RID: 7883 RVA: 0x001919E4 File Offset: 0x0018FBE4
		public static bool IsCharacterAdult(int id)
		{
			GameData.Domains.Character.Character character;
			return DomainManager.Character.TryGetElement_Objects(id, out character) && character.GetAgeGroup() == 2;
		}

		// Token: 0x06001ECC RID: 7884 RVA: 0x00191A14 File Offset: 0x0018FC14
		public static sbyte GetEnemyConsummateLevelByTemplateId(short charTemplateId)
		{
			return Config.Character.Instance[charTemplateId].ConsummateLevel;
		}

		// Token: 0x06001ECD RID: 7885 RVA: 0x00191A38 File Offset: 0x0018FC38
		public static bool IsCharacterAllPoisonImmune(GameData.Domains.Character.Character character)
		{
			for (sbyte i = 0; i < 6; i += 1)
			{
				bool flag = character.GetPoisonResist(i) < 1000;
				if (flag)
				{
					return false;
				}
			}
			return true;
		}

		// Token: 0x06001ECE RID: 7886 RVA: 0x00191A74 File Offset: 0x0018FC74
		public static CharacterLoveAndHateItemInfo GetCharacterLoveAndHateItemInfo(int charId)
		{
			return DomainManager.Character.GetCharacterLoveAndHateItemInfo(EventHelper.Domain.MainThreadDataContext, charId);
		}

		// Token: 0x06001ECF RID: 7887 RVA: 0x00191A9C File Offset: 0x0018FC9C
		public static void SetFixedCharacterNonOrganization(GameData.Domains.Character.Character character)
		{
			Tester.Assert(Config.Character.Instance[character.GetTemplateId()].CreatingType == 0, "");
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			character.SetOrganizationInfo(OrganizationInfo.None, context);
		}

		// Token: 0x06001ED0 RID: 7888 RVA: 0x00191AE8 File Offset: 0x0018FCE8
		public unsafe static bool CheckCharacterSamsara(int charA, int charB)
		{
			CharacterSamsaraData characterSamsaraData = DomainManager.Character.GetCharacterSamsaraData(charA);
			PreexistenceCharIds preexistenceCharIds = characterSamsaraData.PreexistenceCharIds;
			for (int i = 0; i < preexistenceCharIds.Count; i++)
			{
				bool flag = *(ref preexistenceCharIds.CharIds.FixedElementField + (IntPtr)i * 4) == charB;
				if (flag)
				{
					return true;
				}
			}
			return false;
		}

		// Token: 0x06001ED1 RID: 7889 RVA: 0x00191B48 File Offset: 0x0018FD48
		public static string GetRefuseAppointmentText(GameData.Domains.Character.Character character)
		{
			BasePrioritizedAction prevAction;
			return (DomainManager.Character.TryGetCharacterPrioritizedAction(character.GetId(), out prevAction) && prevAction.ActionType >= 0) ? PrioritizedActions.Instance[prevAction.ActionType].RefuseAppointment : string.Empty;
		}

		// Token: 0x06001ED2 RID: 7890 RVA: 0x00191B94 File Offset: 0x0018FD94
		public static GameData.Domains.CombatSkill.CombatSkill CharacterLearnNewCombatSkill(GameData.Domains.Character.Character character, short combatSkillTemplateId, ushort readingState)
		{
			return character.LearnNewCombatSkill(EventHelper.Domain.MainThreadDataContext, combatSkillTemplateId, readingState);
		}

		// Token: 0x06001ED3 RID: 7891 RVA: 0x00191BB8 File Offset: 0x0018FDB8
		public static GameData.Domains.Character.Character CreateCloseFriend(sbyte gender = -1)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			GameData.Domains.Character.Character taiwuChar = DomainManager.Taiwu.GetTaiwu();
			bool flag = gender == -1;
			if (flag)
			{
				gender = Gender.Flip(taiwuChar.GetGender());
			}
			sbyte growingSectId = OrganizationDomain.GetRandomSectOrgTemplateId(context.Random, gender);
			sbyte stateTemplateId = DomainManager.Map.GetStateTemplateIdByAreaId(taiwuChar.GetLocation().AreaId);
			short charTemplateId = OrganizationDomain.GetCharacterTemplateId(growingSectId, stateTemplateId, gender);
			short morality = taiwuChar.GetMorality();
			GameData.Domains.Character.Character character = DomainManager.Character.CreateCloseFriend(context, charTemplateId, morality, taiwuChar);
			int charId = character.GetId();
			DomainManager.Taiwu.JoinGroup(context, charId, true);
			EventHelper.ShowGetItemPageForCharacters(new List<int>
			{
				charId
			}, false, "", null);
			return character;
		}

		// Token: 0x06001ED4 RID: 7892 RVA: 0x00191C78 File Offset: 0x0018FE78
		public static GameData.Domains.Character.Character CreateIntelligentCharacter(Location location, sbyte gender, short age, short baseAttraction, short settlementId, sbyte grade)
		{
			Settlement settlement = DomainManager.Organization.GetSettlement(settlementId);
			sbyte orgTemplateId = settlement.GetOrgTemplateId();
			OrganizationInfo orgInfo = new OrganizationInfo(orgTemplateId, grade, true, settlementId);
			sbyte stateTemplateId = DomainManager.Map.GetStateTemplateIdByAreaId(location.AreaId);
			short charTemplateId = OrganizationDomain.GetCharacterTemplateId(orgTemplateId, stateTemplateId, gender);
			IntelligentCharacterCreationInfo info = new IntelligentCharacterCreationInfo(location, orgInfo, charTemplateId)
			{
				BaseAttraction = baseAttraction,
				Age = age
			};
			GameData.Domains.Character.Character character = DomainManager.Character.CreateIntelligentCharacter(EventHelper.Domain.MainThreadDataContext, ref info);
			DomainManager.Character.CompleteCreatingCharacter(character.GetId());
			return character;
		}

		// Token: 0x06001ED5 RID: 7893 RVA: 0x00191D14 File Offset: 0x0018FF14
		public static GameData.Domains.Character.Character CreateTemporaryIntelligentCharacter(Location location, sbyte gender, short age, short baseAttraction, short settlementId, sbyte grade)
		{
			Settlement settlement = DomainManager.Organization.GetSettlement(settlementId);
			sbyte orgTemplateId = settlement.GetOrgTemplateId();
			OrganizationInfo orgInfo = new OrganizationInfo(orgTemplateId, grade, true, settlementId);
			sbyte stateTemplateId = DomainManager.Map.GetStateTemplateIdByAreaId(location.AreaId);
			short charTemplateId = OrganizationDomain.GetCharacterTemplateId(orgTemplateId, stateTemplateId, gender);
			TemporaryIntelligentCharacterCreationInfo info = new TemporaryIntelligentCharacterCreationInfo
			{
				Location = location,
				OrgInfo = orgInfo,
				CharTemplateId = charTemplateId,
				BaseAttraction = new short?(baseAttraction),
				ActualAge = new short?(age)
			};
			GameData.Domains.Character.Character character = DomainManager.Character.CreateTemporaryIntelligentCharacter(EventHelper.Domain.MainThreadDataContext, ref info);
			int charId = character.GetId();
			DomainManager.Adventure.AddTemporaryIntelligentCharacter(charId);
			return character;
		}

		// Token: 0x06001ED6 RID: 7894 RVA: 0x00191DD4 File Offset: 0x0018FFD4
		public static GameData.Domains.Character.Character CreateMissNingOfTaiwuVillage()
		{
			Location location = DomainManager.Taiwu.GetTaiwuVillageLocation();
			short settlementId = DomainManager.Taiwu.GetTaiwuVillageSettlementId();
			OrganizationInfo orgInfo = new OrganizationInfo(16, 0, true, settlementId);
			sbyte stateTemplateId = DomainManager.Map.GetStateTemplateIdByAreaId(location.AreaId);
			sbyte growingSectId = MapState.Instance[stateTemplateId].SectID;
			short charTemplateId = OrganizationDomain.GetCharacterTemplateId(growingSectId, stateTemplateId, 0);
			IntelligentCharacterCreationInfo info = new IntelligentCharacterCreationInfo(location, orgInfo, charTemplateId)
			{
				Age = 13,
				BaseAttraction = 750,
				GrowingSectId = growingSectId,
				GrowingSectGrade = 3,
				ReferenceFullName = new FullName(-1, -1, 1303, -1, -1, -1),
				Race = 0
			};
			GameData.Domains.Character.Character character = DomainManager.Character.CreateIntelligentCharacter(EventHelper.Domain.MainThreadDataContext, ref info);
			int charId = character.GetId();
			DomainManager.Character.CompleteCreatingCharacter(charId);
			return character;
		}

		// Token: 0x06001ED7 RID: 7895 RVA: 0x00191EBC File Offset: 0x001900BC
		[Obsolete]
		public unsafe static void CreateIntelligentCharacterWithQualificationBonus(sbyte gender, bool hasLifeSkillAdjustBonus, bool hasCombatSkillAdjustBonus)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			GameData.Domains.Character.Character taiwuChar = DomainManager.Taiwu.GetTaiwu();
			Location location = taiwuChar.GetLocation();
			OrganizationInfo orgInfo = taiwuChar.GetOrganizationInfo();
			orgInfo.Grade = 0;
			bool flag = gender < 0;
			if (flag)
			{
				gender = Gender.GetRandom(context.Random);
			}
			short age = (short)context.Random.Next(12, 25);
			sbyte stateTemplateId = DomainManager.Map.GetStateTemplateIdByAreaId(location.AreaId);
			sbyte orgTemplateId = MapState.Instance[stateTemplateId].SectID;
			short charTemplateId = OrganizationDomain.GetCharacterTemplateId(orgTemplateId, stateTemplateId, gender);
			short[] lifeSkillsAdjustBonus = null;
			if (hasLifeSkillAdjustBonus)
			{
				int mixiangzhenLifeSkillAdjustTypeCount = GlobalConfig.Instance.MixiangzhenLifeSkillAdjustTypeCount;
				Span<int> span = new Span<int>(stackalloc byte[checked(unchecked((UIntPtr)mixiangzhenLifeSkillAdjustTypeCount) * 4)], mixiangzhenLifeSkillAdjustTypeCount);
				Span<int> lifeSkillTypesWithBonus = span;
				RandomUtils.GetRandomUnrepeated(context.Random, 0, 15, lifeSkillTypesWithBonus);
				lifeSkillsAdjustBonus = new short[16];
				for (int i = 0; i < GlobalConfig.Instance.MixiangzhenLifeSkillAdjustTypeCount; i++)
				{
					int lifeSkillType = *lifeSkillTypesWithBonus[i];
					lifeSkillsAdjustBonus[lifeSkillType] = GlobalConfig.Instance.MixiangzhenLifeSkillAdjustBonus;
				}
			}
			short[] combatSkillsAdjustBonus = null;
			if (hasCombatSkillAdjustBonus)
			{
				int xiuluochangCombatSkillAdjustTypeCount = GlobalConfig.Instance.XiuluochangCombatSkillAdjustTypeCount;
				Span<int> span = new Span<int>(stackalloc byte[checked(unchecked((UIntPtr)xiuluochangCombatSkillAdjustTypeCount) * 4)], xiuluochangCombatSkillAdjustTypeCount);
				Span<int> combatSkillTypesWithBonus = span;
				RandomUtils.GetRandomUnrepeated(context.Random, 0, 13, combatSkillTypesWithBonus);
				combatSkillsAdjustBonus = new short[16];
				for (int j = 0; j < GlobalConfig.Instance.XiuluochangCombatSkillAdjustTypeCount; j++)
				{
					int lifeSkillType2 = *combatSkillTypesWithBonus[j];
					combatSkillsAdjustBonus[lifeSkillType2] = GlobalConfig.Instance.XiuluochangCombatSkillAdjustBonus;
				}
			}
			IntelligentCharacterCreationInfo info = new IntelligentCharacterCreationInfo(location, orgInfo, charTemplateId)
			{
				Age = age,
				LifeSkillsLowerBound = lifeSkillsAdjustBonus,
				CombatSkillsLowerBound = combatSkillsAdjustBonus,
				InitializeSectSkills = false
			};
			GameData.Domains.Character.Character character = DomainManager.Character.CreateIntelligentCharacter(EventHelper.Domain.MainThreadDataContext, ref info);
			int charId = character.GetId();
			DomainManager.Character.CompleteCreatingCharacter(charId);
			DomainManager.Taiwu.JoinGroup(context, charId, true);
			EventHelper.ShowGetItemPageForCharacters(new List<int>
			{
				charId
			}, false, "", null);
			DomainManager.Adventure.AddCharacterToResultDisplay(charId);
		}

		// Token: 0x06001ED8 RID: 7896 RVA: 0x001920EC File Offset: 0x001902EC
		public unsafe static int CreateIntelligentCharacterWithQualificationBonusWithReturn(sbyte gender, bool hasLifeSkillAdjustBonus, bool hasCombatSkillAdjustBonus)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			GameData.Domains.Character.Character taiwuChar = DomainManager.Taiwu.GetTaiwu();
			Location location = taiwuChar.GetLocation();
			OrganizationInfo orgInfo = taiwuChar.GetOrganizationInfo();
			orgInfo.Grade = 0;
			bool flag = gender < 0;
			if (flag)
			{
				gender = Gender.GetRandom(context.Random);
			}
			short age = (short)context.Random.Next(12, 25);
			sbyte stateTemplateId = DomainManager.Map.GetStateTemplateIdByAreaId(location.AreaId);
			sbyte orgTemplateId = MapState.Instance[stateTemplateId].SectID;
			short charTemplateId = OrganizationDomain.GetCharacterTemplateId(orgTemplateId, stateTemplateId, gender);
			short[] lifeSkillsAdjustBonus = null;
			if (hasLifeSkillAdjustBonus)
			{
				int mixiangzhenLifeSkillAdjustTypeCount = GlobalConfig.Instance.MixiangzhenLifeSkillAdjustTypeCount;
				Span<int> span = new Span<int>(stackalloc byte[checked(unchecked((UIntPtr)mixiangzhenLifeSkillAdjustTypeCount) * 4)], mixiangzhenLifeSkillAdjustTypeCount);
				Span<int> lifeSkillTypesWithBonus = span;
				RandomUtils.GetRandomUnrepeated(context.Random, 0, 15, lifeSkillTypesWithBonus);
				lifeSkillsAdjustBonus = new short[16];
				for (int i = 0; i < GlobalConfig.Instance.MixiangzhenLifeSkillAdjustTypeCount; i++)
				{
					int lifeSkillType = *lifeSkillTypesWithBonus[i];
					lifeSkillsAdjustBonus[lifeSkillType] = GlobalConfig.Instance.MixiangzhenLifeSkillAdjustBonus;
				}
			}
			short[] combatSkillsAdjustBonus = null;
			if (hasCombatSkillAdjustBonus)
			{
				int xiuluochangCombatSkillAdjustTypeCount = GlobalConfig.Instance.XiuluochangCombatSkillAdjustTypeCount;
				Span<int> span = new Span<int>(stackalloc byte[checked(unchecked((UIntPtr)xiuluochangCombatSkillAdjustTypeCount) * 4)], xiuluochangCombatSkillAdjustTypeCount);
				Span<int> combatSkillTypesWithBonus = span;
				RandomUtils.GetRandomUnrepeated(context.Random, 0, 13, combatSkillTypesWithBonus);
				combatSkillsAdjustBonus = new short[16];
				for (int j = 0; j < GlobalConfig.Instance.XiuluochangCombatSkillAdjustTypeCount; j++)
				{
					int lifeSkillType2 = *combatSkillTypesWithBonus[j];
					combatSkillsAdjustBonus[lifeSkillType2] = GlobalConfig.Instance.XiuluochangCombatSkillAdjustBonus;
				}
			}
			IntelligentCharacterCreationInfo info = new IntelligentCharacterCreationInfo(location, orgInfo, charTemplateId)
			{
				Age = age,
				LifeSkillsLowerBound = lifeSkillsAdjustBonus,
				CombatSkillsLowerBound = combatSkillsAdjustBonus,
				InitializeSectSkills = false
			};
			GameData.Domains.Character.Character character = DomainManager.Character.CreateIntelligentCharacter(EventHelper.Domain.MainThreadDataContext, ref info);
			int charId = character.GetId();
			DomainManager.Character.CompleteCreatingCharacter(charId);
			DomainManager.Taiwu.JoinGroup(context, charId, true);
			EventHelper.ShowGetItemPageForCharacters(new List<int>
			{
				charId
			}, false, "", null);
			return charId;
		}

		// Token: 0x06001ED9 RID: 7897 RVA: 0x00192316 File Offset: 0x00190516
		public static void MakeLove(GameData.Domains.Character.Character selfChar, GameData.Domains.Character.Character targetChar, bool isRape)
		{
			selfChar.MakeLove(EventHelper.Domain.MainThreadDataContext, targetChar, isRape);
		}

		// Token: 0x06001EDA RID: 7898 RVA: 0x0019232C File Offset: 0x0019052C
		public static void ConvertPregnantWithCricketToHuman(int motherId)
		{
			DomainManager.Character.ConvertPregnantWithCricketToHuman(EventHelper.Domain.MainThreadDataContext, motherId);
		}

		// Token: 0x06001EDB RID: 7899 RVA: 0x00192348 File Offset: 0x00190548
		public static void DefaultHandleNewbornChild(int babyCharId, int motherCharId, int fatherCharId, int actualFatherCharId)
		{
			bool flag = babyCharId < 0;
			if (!flag)
			{
				DataContext context = EventHelper.Domain.MainThreadDataContext;
				GameData.Domains.Character.Character baby = DomainManager.Character.GetElement_Objects(babyCharId);
				bool createMotherRelation = DomainManager.Character.OrgAndMonkTypeAllowMarriage(motherCharId);
				int spouseId = DomainManager.Character.GetAliveSpouse(fatherCharId);
				bool createFatherRelation = DomainManager.Character.OrgAndMonkTypeAllowMarriage(fatherCharId) && (spouseId < 0 || spouseId == motherCharId);
				bool isMotherAlive = DomainManager.Character.IsCharacterAlive(motherCharId);
				bool isFatherAlive = DomainManager.Character.IsCharacterAlive(fatherCharId);
				bool flag2 = EventHelper.CheckParentAbandonNewbornChild(motherCharId, fatherCharId);
				if (flag2)
				{
					EventHelper.AbandonNewbornChild(babyCharId, motherCharId, (actualFatherCharId >= 0) ? actualFatherCharId : fatherCharId);
				}
				else
				{
					DomainManager.Character.HandleNotAbandonedNewbornChildRelationsAndGroup(context, baby, motherCharId, fatherCharId, actualFatherCharId, createMotherRelation, createFatherRelation, isMotherAlive, isFatherAlive);
				}
			}
		}

		// Token: 0x06001EDC RID: 7900 RVA: 0x00192404 File Offset: 0x00190604
		public static void AdoptAbandonedNewbornChild(int adopterCharId, int babyCharId, int motherCharId, int fatherCharId)
		{
			bool flag = babyCharId < 0;
			if (!flag)
			{
				DataContext context = EventHelper.Domain.MainThreadDataContext;
				GameData.Domains.Character.Character adopter = DomainManager.Character.GetElement_Objects(adopterCharId);
				GameData.Domains.Character.Character baby = DomainManager.Character.GetElement_Objects(babyCharId);
				DomainManager.Character.AbandonNewbornChild(context, baby, adopter, motherCharId, fatherCharId);
			}
		}

		// Token: 0x06001EDD RID: 7901 RVA: 0x00192450 File Offset: 0x00190650
		public static void AbandonNewbornChild(int babyCharId, int motherCharId, int fatherCharId)
		{
			bool flag = babyCharId < 0;
			if (!flag)
			{
				DataContext context = EventHelper.Domain.MainThreadDataContext;
				GameData.Domains.Character.Character baby = DomainManager.Character.GetElement_Objects(babyCharId);
				DomainManager.Character.RemoveAllRelations(context, babyCharId, true);
				DomainManager.Character.AbandonNewbornChild(context, baby, null, motherCharId, fatherCharId);
			}
		}

		// Token: 0x06001EDE RID: 7902 RVA: 0x001924A0 File Offset: 0x001906A0
		public static void SetCharacterCustomName(GameData.Domains.Character.Character character, int parentId, string customGivenName)
		{
			GameData.Domains.Character.Character parentChar;
			FullName parentFullName = DomainManager.Character.TryGetElement_Objects(parentId, out parentChar) ? parentChar.GetFullName() : DomainManager.Character.GetDeadCharacter(parentId).FullName;
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			int customGivenNameId = DomainManager.World.RegisterCustomText(context, customGivenName);
			FullName fullName = new FullName(parentFullName.CustomSurnameId, customGivenNameId, parentFullName.SurnameId, -1, -1, -1);
			character.SetFullName(fullName, context);
		}

		// Token: 0x06001EDF RID: 7903 RVA: 0x00192510 File Offset: 0x00190710
		public static void SetCharacterSurname(GameData.Domains.Character.Character character, int parentId)
		{
			GameData.Domains.Character.Character parentChar;
			FullName parentFullName = DomainManager.Character.TryGetElement_Objects(parentId, out parentChar) ? parentChar.GetFullName() : DomainManager.Character.GetDeadCharacter(parentId).FullName;
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			FullName curFullName = character.GetFullName();
			bool flag = (curFullName.Type | 2) != curFullName.Type;
			if (flag)
			{
				bool flag2 = (parentFullName.Type | 2) == parentFullName.Type;
				if (flag2)
				{
					curFullName = CharacterDomain.GenerateRandomZangName(context.Random, character.GetGender());
				}
				else
				{
					curFullName.InheritSurname(parentFullName);
				}
			}
			else
			{
				bool flag3 = (parentFullName.Type | 2) != parentFullName.Type;
				if (flag3)
				{
					ValueTuple<string, string> realName = CharacterDomain.GetRealName(character);
					int customTextId = DomainManager.World.RegisterCustomText(context, realName.Item2);
					curFullName.InheritSurname(parentFullName);
					curFullName.SetCustomGivenName(customTextId);
				}
			}
			character.SetFullName(curFullName, context);
		}

		// Token: 0x06001EE0 RID: 7904 RVA: 0x001925FC File Offset: 0x001907FC
		public static void SetCharacterGivenName(GameData.Domains.Character.Character character, string customGivenName)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			int customGivenNameId = DomainManager.World.RegisterCustomText(context, customGivenName);
			FullName curFullName = character.GetFullName();
			curFullName.SetCustomGivenName(customGivenNameId);
			character.SetFullName(curFullName, context);
		}

		// Token: 0x06001EE1 RID: 7905 RVA: 0x0019263C File Offset: 0x0019083C
		public static void ApplyRelationBecomeEnemy(GameData.Domains.Character.Character selfChar, GameData.Domains.Character.Character targetChar)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			bool selfIsTaiwuPeople = DomainManager.Character.IsTaiwuPeople(selfChar.GetId());
			GameData.Domains.Character.Character.ApplyAddRelation_Enemy(context, selfChar, targetChar, selfIsTaiwuPeople, 0);
			bool flag = !DomainManager.Character.HasRelation(selfChar.GetId(), targetChar.GetId(), 32768);
			if (!flag)
			{
				DomainManager.TaiwuEvent.RecordCharacterRelationChanged(false, selfChar.GetId(), targetChar.GetId(), 32768);
			}
		}

		// Token: 0x06001EE2 RID: 7906 RVA: 0x001926B4 File Offset: 0x001908B4
		public static void ApplyRelationSeverEnemy(GameData.Domains.Character.Character selfChar, GameData.Domains.Character.Character targetChar)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			sbyte selfBehaviorType = selfChar.GetBehaviorType();
			bool selfIsTaiwuPeople = DomainManager.Character.IsTaiwuPeople(selfChar.GetId());
			GameData.Domains.Character.Character.ApplySeverEnemy(context, selfChar, targetChar, selfBehaviorType, selfIsTaiwuPeople);
			DomainManager.TaiwuEvent.RecordCharacterRelationChanged(true, selfChar.GetId(), targetChar.GetId(), 32768);
		}

		// Token: 0x06001EE3 RID: 7907 RVA: 0x00192710 File Offset: 0x00190910
		public static void ApplyRelationBecomeFriend(GameData.Domains.Character.Character selfChar, GameData.Domains.Character.Character targetChar)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			sbyte selfBehaviorType = selfChar.GetBehaviorType();
			bool selfIsTaiwuPeople = DomainManager.Character.IsTaiwuPeople(selfChar.GetId());
			bool targetIsTaiwuPeople = DomainManager.Character.IsTaiwuPeople(targetChar.GetId());
			GameData.Domains.Character.Character.ApplyBecomeFriend(context, selfChar, targetChar, selfBehaviorType, selfIsTaiwuPeople, targetIsTaiwuPeople);
			bool flag = !DomainManager.Character.HasRelation(targetChar.GetId(), selfChar.GetId(), 8192);
			if (!flag)
			{
				DomainManager.TaiwuEvent.RecordCharacterRelationChanged(false, selfChar.GetId(), targetChar.GetId(), 8192);
			}
		}

		// Token: 0x06001EE4 RID: 7908 RVA: 0x001927A4 File Offset: 0x001909A4
		public static void ApplyRelationSeverFriend(GameData.Domains.Character.Character selfChar, GameData.Domains.Character.Character targetChar)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			sbyte selfBehaviorType = selfChar.GetBehaviorType();
			bool selfIsTaiwuPeople = DomainManager.Character.IsTaiwuPeople(selfChar.GetId());
			bool targetIsTaiwuPeople = DomainManager.Character.IsTaiwuPeople(targetChar.GetId());
			GameData.Domains.Character.Character.ApplySeverFriend(context, selfChar, targetChar, selfBehaviorType, selfIsTaiwuPeople, targetIsTaiwuPeople);
			bool flag = DomainManager.Character.HasRelation(targetChar.GetId(), selfChar.GetId(), 8192);
			if (!flag)
			{
				DomainManager.TaiwuEvent.RecordCharacterRelationChanged(true, selfChar.GetId(), targetChar.GetId(), 8192);
			}
		}

		// Token: 0x06001EE5 RID: 7909 RVA: 0x00192834 File Offset: 0x00190A34
		public static void ApplyRelationBecomeAdore(GameData.Domains.Character.Character selfChar, GameData.Domains.Character.Character targetChar, bool targetLoveBack)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			sbyte selfBehaviorType = selfChar.GetBehaviorType();
			bool selfIsTaiwuPeople = DomainManager.Character.IsTaiwuPeople(selfChar.GetId());
			bool targetIsTaiwuPeople = DomainManager.Character.IsTaiwuPeople(targetChar.GetId());
			GameData.Domains.Character.Character.ApplyAddRelation_Adore(context, selfChar, targetChar, selfBehaviorType, targetLoveBack, selfIsTaiwuPeople, targetIsTaiwuPeople);
			bool flag = !DomainManager.Character.HasRelation(selfChar.GetId(), targetChar.GetId(), 16384);
			if (!flag)
			{
				DomainManager.TaiwuEvent.RecordCharacterRelationChanged(false, selfChar.GetId(), targetChar.GetId(), 16384);
			}
		}

		// Token: 0x06001EE6 RID: 7910 RVA: 0x001928C8 File Offset: 0x00190AC8
		public static void ApplyRelationBecomeBoyOrGirlFriend(GameData.Domains.Character.Character selfChar, GameData.Domains.Character.Character targetChar, bool succeed)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			sbyte selfBehaviorType = selfChar.GetBehaviorType();
			bool selfIsTaiwuPeople = DomainManager.Character.IsTaiwuPeople(selfChar.GetId());
			bool targetIsTaiwuPeople = DomainManager.Character.IsTaiwuPeople(targetChar.GetId());
			GameData.Domains.Character.Character.ApplyBecomeBoyOrGirlFriend(context, selfChar, targetChar, selfBehaviorType, succeed, selfIsTaiwuPeople, targetIsTaiwuPeople);
			if (succeed)
			{
				bool flag = !DomainManager.Character.HasRelation(targetChar.GetId(), selfChar.GetId(), 16384);
				if (!flag)
				{
					DomainManager.TaiwuEvent.RecordCharacterRelationChanged(false, selfChar.GetId(), targetChar.GetId(), 16384);
				}
			}
			else
			{
				bool flag2 = !DomainManager.Character.HasRelation(selfChar.GetId(), targetChar.GetId(), 32768);
				if (!flag2)
				{
					DomainManager.TaiwuEvent.RecordCharacterRelationChanged(false, selfChar.GetId(), targetChar.GetId(), 32768);
				}
			}
		}

		// Token: 0x06001EE7 RID: 7911 RVA: 0x001929AC File Offset: 0x00190BAC
		public static void ApplyRelationBreakupWithBoyOrGirlFriend(GameData.Domains.Character.Character selfChar, GameData.Domains.Character.Character targetChar, bool targetStillLoveSelf)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			sbyte selfBehaviorType = selfChar.GetBehaviorType();
			bool selfIsTaiwuPeople = DomainManager.Character.IsTaiwuPeople(selfChar.GetId());
			bool targetIsTaiwuPeople = DomainManager.Character.IsTaiwuPeople(targetChar.GetId());
			GameData.Domains.Character.Character.ApplyBreakupWithBoyOrGirlFriend(context, selfChar, targetChar, selfBehaviorType, targetStillLoveSelf, selfIsTaiwuPeople, targetIsTaiwuPeople);
			bool flag = DomainManager.Character.HasRelation(selfChar.GetId(), targetChar.GetId(), 16384);
			if (!flag)
			{
				DomainManager.TaiwuEvent.RecordCharacterRelationChanged(true, selfChar.GetId(), targetChar.GetId(), 16384);
				bool flag2 = !DomainManager.Character.HasRelation(targetChar.GetId(), selfChar.GetId(), 32768);
				if (!flag2)
				{
					DomainManager.TaiwuEvent.RecordCharacterRelationChanged(false, selfChar.GetId(), targetChar.GetId(), 32768);
				}
			}
		}

		// Token: 0x06001EE8 RID: 7912 RVA: 0x00192A80 File Offset: 0x00190C80
		public static void ApplyRelationBecomeSwornBrotherOrSister(GameData.Domains.Character.Character selfChar, GameData.Domains.Character.Character targetChar)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			sbyte selfBehaviorType = selfChar.GetBehaviorType();
			bool selfIsTaiwuPeople = DomainManager.Character.IsTaiwuPeople(selfChar.GetId());
			bool targetIsTaiwuPeople = DomainManager.Character.IsTaiwuPeople(targetChar.GetId());
			GameData.Domains.Character.Character.ApplyBecomeSwornBrotherOrSister(context, selfChar, targetChar, selfBehaviorType, selfIsTaiwuPeople, targetIsTaiwuPeople);
			EventHelper.AddLegacyPoint(5, 100);
			bool flag = !DomainManager.Character.HasRelation(targetChar.GetId(), selfChar.GetId(), 512);
			if (!flag)
			{
				DomainManager.TaiwuEvent.RecordCharacterRelationChanged(false, selfChar.GetId(), targetChar.GetId(), 512);
			}
		}

		// Token: 0x06001EE9 RID: 7913 RVA: 0x00192B1C File Offset: 0x00190D1C
		public static void ApplyRelationSeverSwornBrotherOrSister(GameData.Domains.Character.Character selfChar, GameData.Domains.Character.Character targetChar)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			sbyte selfBehaviorType = selfChar.GetBehaviorType();
			bool selfIsTaiwuPeople = DomainManager.Character.IsTaiwuPeople(selfChar.GetId());
			bool targetIsTaiwuPeople = DomainManager.Character.IsTaiwuPeople(targetChar.GetId());
			GameData.Domains.Character.Character.ApplySeverSwornBrotherOrSister(context, selfChar, targetChar, selfBehaviorType, selfIsTaiwuPeople, targetIsTaiwuPeople);
			bool flag = DomainManager.Character.HasRelation(targetChar.GetId(), selfChar.GetId(), 512);
			if (!flag)
			{
				DomainManager.TaiwuEvent.RecordCharacterRelationChanged(true, selfChar.GetId(), targetChar.GetId(), 512);
			}
		}

		// Token: 0x06001EEA RID: 7914 RVA: 0x00192BAC File Offset: 0x00190DAC
		public static void ApplyRelationBecomeHusbandOrWife(GameData.Domains.Character.Character selfChar, GameData.Domains.Character.Character targetChar, bool succeed)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			sbyte selfBehaviorType = selfChar.GetBehaviorType();
			bool selfIsTaiwuPeople = DomainManager.Character.IsTaiwuPeople(selfChar.GetId());
			bool targetIsTaiwuPeople = DomainManager.Character.IsTaiwuPeople(targetChar.GetId());
			GameData.Domains.Character.Character.ApplyBecomeHusbandOrWife(context, selfChar, targetChar, selfBehaviorType, succeed, selfIsTaiwuPeople, targetIsTaiwuPeople);
			if (succeed)
			{
				bool flag = !DomainManager.Character.HasRelation(targetChar.GetId(), selfChar.GetId(), 1024);
				if (!flag)
				{
					EventHelper.AddLegacyPoint(3, 100);
					DomainManager.TaiwuEvent.RecordCharacterRelationChanged(false, selfChar.GetId(), targetChar.GetId(), 1024);
				}
			}
			else
			{
				bool flag2 = !DomainManager.Character.HasRelation(selfChar.GetId(), targetChar.GetId(), 32768);
				if (!flag2)
				{
					DomainManager.TaiwuEvent.RecordCharacterRelationChanged(false, selfChar.GetId(), targetChar.GetId(), 32768);
				}
			}
		}

		// Token: 0x06001EEB RID: 7915 RVA: 0x00192C98 File Offset: 0x00190E98
		public static void ApplyRelationSeverHusbandOrWife(GameData.Domains.Character.Character selfChar, GameData.Domains.Character.Character targetChar)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			sbyte selfBehaviorType = selfChar.GetBehaviorType();
			bool selfIsTaiwuPeople = DomainManager.Character.IsTaiwuPeople(selfChar.GetId());
			bool targetIsTaiwuPeople = DomainManager.Character.IsTaiwuPeople(targetChar.GetId());
			GameData.Domains.Character.Character.ApplySeverHusbandOrWife(context, selfChar, targetChar, selfBehaviorType, selfIsTaiwuPeople, targetIsTaiwuPeople);
			bool flag = DomainManager.Character.HasRelation(targetChar.GetId(), selfChar.GetId(), 1024);
			if (!flag)
			{
				DomainManager.TaiwuEvent.RecordCharacterRelationChanged(true, selfChar.GetId(), targetChar.GetId(), 1024);
			}
		}

		// Token: 0x06001EEC RID: 7916 RVA: 0x00192D28 File Offset: 0x00190F28
		public static void ApplyRelationAdoptChild(GameData.Domains.Character.Character selfChar, GameData.Domains.Character.Character targetChar)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			sbyte selfBehaviorType = selfChar.GetBehaviorType();
			bool selfIsTaiwuPeople = DomainManager.Character.IsTaiwuPeople(selfChar.GetId());
			bool targetIsTaiwuPeople = DomainManager.Character.IsTaiwuPeople(targetChar.GetId());
			GameData.Domains.Character.Character.ApplyAddRelation_AdoptiveChild(context, selfChar, targetChar, selfBehaviorType, selfIsTaiwuPeople, targetIsTaiwuPeople);
			bool flag = !DomainManager.Character.HasRelation(selfChar.GetId(), targetChar.GetId(), 128);
			if (!flag)
			{
				DomainManager.TaiwuEvent.RecordCharacterRelationChanged(false, selfChar.GetId(), targetChar.GetId(), 128);
			}
		}

		// Token: 0x06001EED RID: 7917 RVA: 0x00192DBC File Offset: 0x00190FBC
		public static void ApplyRelationSeverAdoptedChild(GameData.Domains.Character.Character selfChar, GameData.Domains.Character.Character targetChar)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			sbyte selfBehaviorType = selfChar.GetBehaviorType();
			bool selfIsTaiwuPeople = DomainManager.Character.IsTaiwuPeople(selfChar.GetId());
			bool targetIsTaiwuPeople = DomainManager.Character.IsTaiwuPeople(targetChar.GetId());
			GameData.Domains.Character.Character.ApplyEndRelation_AdoptiveChild(context, selfChar, targetChar, selfBehaviorType, selfIsTaiwuPeople, targetIsTaiwuPeople);
			bool flag = DomainManager.Character.HasRelation(selfChar.GetId(), targetChar.GetId(), 128);
			if (!flag)
			{
				DomainManager.TaiwuEvent.RecordCharacterRelationChanged(true, selfChar.GetId(), targetChar.GetId(), 128);
			}
		}

		// Token: 0x06001EEE RID: 7918 RVA: 0x00192E4C File Offset: 0x0019104C
		public static void ApplyRelationGetAdopted(GameData.Domains.Character.Character selfChar, GameData.Domains.Character.Character targetChar)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			sbyte selfBehaviorType = selfChar.GetBehaviorType();
			bool selfIsTaiwuPeople = DomainManager.Character.IsTaiwuPeople(selfChar.GetId());
			bool targetIsTaiwuPeople = DomainManager.Character.IsTaiwuPeople(targetChar.GetId());
			GameData.Domains.Character.Character.ApplyAddRelation_AdoptiveParent(context, selfChar, targetChar, selfBehaviorType, selfIsTaiwuPeople, targetIsTaiwuPeople);
			bool flag = !DomainManager.Character.HasRelation(selfChar.GetId(), targetChar.GetId(), 64);
			if (!flag)
			{
				DomainManager.TaiwuEvent.RecordCharacterRelationChanged(false, selfChar.GetId(), targetChar.GetId(), 64);
				bool flag2 = selfChar.GetId() == DomainManager.Taiwu.GetTaiwuCharId();
				if (flag2)
				{
					EventHelper.AddLegacyPoint(7, 100);
				}
			}
		}

		// Token: 0x06001EEF RID: 7919 RVA: 0x00192EF8 File Offset: 0x001910F8
		public static void ApplyRelationSeverAdoptiveParent(GameData.Domains.Character.Character selfChar, GameData.Domains.Character.Character targetChar)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			sbyte selfBehaviorType = selfChar.GetBehaviorType();
			bool selfIsTaiwuPeople = DomainManager.Character.IsTaiwuPeople(selfChar.GetId());
			bool targetIsTaiwuPeople = DomainManager.Character.IsTaiwuPeople(targetChar.GetId());
			GameData.Domains.Character.Character.ApplyEndRelation_AdoptiveParent(context, selfChar, targetChar, selfBehaviorType, selfIsTaiwuPeople, targetIsTaiwuPeople);
			bool flag = DomainManager.Character.HasRelation(selfChar.GetId(), targetChar.GetId(), 64);
			if (!flag)
			{
				DomainManager.TaiwuEvent.RecordCharacterRelationChanged(true, selfChar.GetId(), targetChar.GetId(), 64);
			}
		}

		// Token: 0x06001EF0 RID: 7920 RVA: 0x00192F80 File Offset: 0x00191180
		public static void ApplyRelationBecomeMentor(GameData.Domains.Character.Character selfChar, GameData.Domains.Character.Character targetChar)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			sbyte selfBehaviorType = selfChar.GetBehaviorType();
			bool selfIsTaiwuPeople = DomainManager.Character.IsTaiwuPeople(selfChar.GetId());
			bool targetIsTaiwuPeople = DomainManager.Character.IsTaiwuPeople(targetChar.GetId());
			GameData.Domains.Character.Character.ApplyAddRelation_Mentor(context, selfChar, targetChar, selfBehaviorType, selfIsTaiwuPeople, targetIsTaiwuPeople);
			bool flag = !DomainManager.Character.HasRelation(selfChar.GetId(), targetChar.GetId(), 2048);
			if (!flag)
			{
				DomainManager.TaiwuEvent.RecordCharacterRelationChanged(false, selfChar.GetId(), targetChar.GetId(), 2048);
			}
		}

		// Token: 0x06001EF1 RID: 7921 RVA: 0x00193014 File Offset: 0x00191214
		public static void ApplyRelationSeverMentor(GameData.Domains.Character.Character selfChar, GameData.Domains.Character.Character targetChar)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			sbyte selfBehaviorType = selfChar.GetBehaviorType();
			bool selfIsTaiwuPeople = DomainManager.Character.IsTaiwuPeople(selfChar.GetId());
			bool targetIsTaiwuPeople = DomainManager.Character.IsTaiwuPeople(targetChar.GetId());
			GameData.Domains.Character.Character.ApplyEndRelation_Mentor(context, selfChar, targetChar, selfBehaviorType, selfIsTaiwuPeople, targetIsTaiwuPeople);
			bool flag = DomainManager.Character.HasRelation(selfChar.GetId(), targetChar.GetId(), 2048);
			if (!flag)
			{
				DomainManager.TaiwuEvent.RecordCharacterRelationChanged(true, selfChar.GetId(), targetChar.GetId(), 2048);
			}
		}

		// Token: 0x06001EF2 RID: 7922 RVA: 0x001930A4 File Offset: 0x001912A4
		public static void ClearHatredTowardTaiwu()
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			int taiwuCharId = taiwu.GetId();
			CharacterSet hateTaiwuCharIds = DomainManager.Character.GetReversedRelatedCharIds(taiwuCharId, 32768);
			bool flag = hateTaiwuCharIds.GetCount() == 0;
			if (!flag)
			{
				HashSet<int> collection = hateTaiwuCharIds.GetCollection();
				foreach (int charId in collection)
				{
					DomainManager.Character.ChangeRelationType(context, charId, taiwuCharId, 32768, 0);
					DomainManager.TaiwuEvent.RecordCharacterRelationChanged(true, charId, taiwuCharId, 32768);
				}
				hateTaiwuCharIds.Clear();
			}
		}

		// Token: 0x06001EF3 RID: 7923 RVA: 0x00193170 File Offset: 0x00191370
		public static void AddRelation(int charId, int relatedCharId, ushort relationType)
		{
			bool flag = RelationType.ContainBloodRelatedRelations(relationType);
			if (flag)
			{
				DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(48, 1);
				defaultInterpolatedStringHandler.AppendLiteral("Unable to add blood related relations ");
				defaultInterpolatedStringHandler.AppendFormatted<ushort>(relationType);
				defaultInterpolatedStringHandler.AppendLiteral(" in event.");
				throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
			}
			DomainManager.Character.AddRelation(EventHelper.Domain.MainThreadDataContext, charId, relatedCharId, relationType, int.MinValue);
			DomainManager.TaiwuEvent.RecordCharacterRelationChanged(false, charId, relatedCharId, relationType);
			bool flag2 = relationType == 16384;
			if (flag2)
			{
				EventHelper.AddLegacyPoint(2, 100);
			}
		}

		// Token: 0x06001EF4 RID: 7924 RVA: 0x00193205 File Offset: 0x00191405
		public static void AddAdoptiveParent(int charId, int relatedCharId)
		{
			DomainManager.Character.AddAdoptiveParentRelations(EventHelper.Domain.MainThreadDataContext, charId, relatedCharId, int.MinValue);
			DomainManager.TaiwuEvent.RecordCharacterRelationChanged(false, charId, relatedCharId, 64);
		}

		// Token: 0x06001EF5 RID: 7925 RVA: 0x00193234 File Offset: 0x00191434
		public static void AddHusbandOrWifeRelations(int charId, int relatedCharId)
		{
			DomainManager.Character.AddHusbandOrWifeRelations(EventHelper.Domain.MainThreadDataContext, charId, relatedCharId, int.MinValue);
			DomainManager.TaiwuEvent.RecordCharacterRelationChanged(false, charId, relatedCharId, 1024);
		}

		// Token: 0x06001EF6 RID: 7926 RVA: 0x00193268 File Offset: 0x00191468
		public static void RestoreActualParentRelation(int childId, int parentId)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			List<ParentAndChild> nominalBloodParentRelations = DomainManager.Character.GetNominalBloodParentRelations(parentId);
			DomainManager.Character.TryCreateRelation(context, childId, parentId);
			RelatedCharacter relation = DomainManager.Character.GetRelation(childId, parentId);
			for (int i = 0; i < nominalBloodParentRelations.Count; i++)
			{
				ParentAndChild nominalParentAndChild = nominalBloodParentRelations[i];
				bool flag = nominalParentAndChild.ChildId != childId;
				if (!flag)
				{
					bool flag2 = RelationType.HasRelation(relation.RelationType, 64);
					if (flag2)
					{
						DomainManager.Character.ChangeRelationType(context, childId, parentId, 64, 0);
					}
					bool flag3 = RelationType.HasRelation(relation.RelationType, 8);
					if (flag3)
					{
						DomainManager.Character.ChangeRelationType(context, childId, parentId, 8, 0);
					}
					bool flag4 = RelationType.HasRelation(relation.RelationType, 512);
					if (flag4)
					{
						DomainManager.Character.ChangeRelationType(context, childId, parentId, 512, 0);
					}
					bool flag5 = nominalParentAndChild.ParentId >= 0;
					if (flag5)
					{
					}
					DomainManager.Character.AddRelation(context, childId, parentId, 1, int.MinValue);
					break;
				}
			}
		}

		// Token: 0x06001EF7 RID: 7927 RVA: 0x00193384 File Offset: 0x00191584
		public static void EndRelation(int charId, int relatedCharId, ushort relationType)
		{
			bool flag = RelationType.ContainsNonRemovableRelations(relationType);
			if (flag)
			{
				DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(47, 1);
				defaultInterpolatedStringHandler.AppendLiteral("Unable to end blood related relation ");
				defaultInterpolatedStringHandler.AppendFormatted<ushort>(relationType);
				defaultInterpolatedStringHandler.AppendLiteral(" in event.");
				throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
			}
			DomainManager.Character.ChangeRelationType(EventHelper.Domain.MainThreadDataContext, charId, relatedCharId, relationType, 0);
			DomainManager.TaiwuEvent.RecordCharacterRelationChanged(true, charId, relatedCharId, relationType);
		}

		// Token: 0x06001EF8 RID: 7928 RVA: 0x00193400 File Offset: 0x00191600
		public static HashSet<int> GetRelatedCharacters(int charId, ushort relationType, bool aliveOnly)
		{
			HashSet<int> charSet = new HashSet<int>();
			HashSet<int> allRelatedCharIds = DomainManager.Character.GetRelatedCharIds(charId, relationType);
			if (aliveOnly)
			{
				foreach (int relatedCharId in allRelatedCharIds)
				{
					bool flag = DomainManager.Character.IsCharacterAlive(relatedCharId);
					if (flag)
					{
						charSet.Add(relatedCharId);
					}
				}
			}
			else
			{
				charSet.UnionWith(allRelatedCharIds);
			}
			return charSet;
		}

		// Token: 0x06001EF9 RID: 7929 RVA: 0x00193494 File Offset: 0x00191694
		public static HashSet<int> GetRelatedToTaiwuCharacters(bool includeTaiwu = true, bool excludeDead = true)
		{
			int taiwuCharId = DomainManager.Taiwu.GetTaiwuCharId();
			RelatedCharacters relatedCharacters = DomainManager.Character.GetRelatedCharacters(taiwuCharId);
			HashSet<int> charIdList = new HashSet<int>();
			if (includeTaiwu)
			{
				charIdList.Add(taiwuCharId);
			}
			bool flag = relatedCharacters.BloodParents.GetCount() > 0;
			if (flag)
			{
				charIdList.UnionWith(relatedCharacters.BloodParents.GetCollection());
			}
			bool flag2 = relatedCharacters.BloodChildren.GetCount() > 0;
			if (flag2)
			{
				charIdList.UnionWith(relatedCharacters.BloodChildren.GetCollection());
			}
			bool flag3 = relatedCharacters.BloodBrothersAndSisters.GetCount() > 0;
			if (flag3)
			{
				charIdList.UnionWith(relatedCharacters.BloodBrothersAndSisters.GetCollection());
			}
			bool flag4 = relatedCharacters.StepParents.GetCount() > 0;
			if (flag4)
			{
				charIdList.UnionWith(relatedCharacters.StepParents.GetCollection());
			}
			bool flag5 = relatedCharacters.StepChildren.GetCount() > 0;
			if (flag5)
			{
				charIdList.UnionWith(relatedCharacters.StepChildren.GetCollection());
			}
			bool flag6 = relatedCharacters.StepBrothersAndSisters.GetCount() > 0;
			if (flag6)
			{
				charIdList.UnionWith(relatedCharacters.StepBrothersAndSisters.GetCollection());
			}
			bool flag7 = relatedCharacters.AdoptiveParents.GetCount() > 0;
			if (flag7)
			{
				charIdList.UnionWith(relatedCharacters.AdoptiveParents.GetCollection());
			}
			bool flag8 = relatedCharacters.AdoptiveChildren.GetCount() > 0;
			if (flag8)
			{
				charIdList.UnionWith(relatedCharacters.AdoptiveChildren.GetCollection());
			}
			bool flag9 = relatedCharacters.AdoptiveBrothersAndSisters.GetCount() > 0;
			if (flag9)
			{
				charIdList.UnionWith(relatedCharacters.AdoptiveBrothersAndSisters.GetCollection());
			}
			bool flag10 = relatedCharacters.SwornBrothersAndSisters.GetCount() > 0;
			if (flag10)
			{
				charIdList.UnionWith(relatedCharacters.SwornBrothersAndSisters.GetCollection());
			}
			bool flag11 = relatedCharacters.HusbandsAndWives.GetCount() > 0;
			if (flag11)
			{
				charIdList.UnionWith(relatedCharacters.HusbandsAndWives.GetCollection());
			}
			bool flag12 = relatedCharacters.Mentors.GetCount() > 0;
			if (flag12)
			{
				charIdList.UnionWith(relatedCharacters.Mentors.GetCollection());
			}
			bool flag13 = relatedCharacters.Mentees.GetCount() > 0;
			if (flag13)
			{
				charIdList.UnionWith(relatedCharacters.Mentees.GetCollection());
			}
			bool flag14 = relatedCharacters.Friends.GetCount() > 0;
			if (flag14)
			{
				charIdList.UnionWith(relatedCharacters.Friends.GetCollection());
			}
			bool flag15 = relatedCharacters.Adored.GetCount() > 0;
			if (flag15)
			{
				charIdList.UnionWith(relatedCharacters.Adored.GetCollection());
			}
			bool flag16 = relatedCharacters.Enemies.GetCount() > 0;
			if (flag16)
			{
				charIdList.UnionWith(relatedCharacters.Enemies.GetCollection());
			}
			if (excludeDead)
			{
				charIdList.RemoveWhere((int e) => !DomainManager.Character.IsCharacterAlive(e));
			}
			return charIdList;
		}

		// Token: 0x06001EFA RID: 7930 RVA: 0x00193760 File Offset: 0x00191960
		public static void RemoveCharactersOfRelationsFromCore(int mainCharId, List<int> charIdCore, ushort relationFlag)
		{
			bool flag = charIdCore == null || charIdCore.Count <= 0 || mainCharId < 0;
			if (!flag)
			{
				for (int i = charIdCore.Count - 1; i >= 0; i--)
				{
					int charId = charIdCore[i];
					RelatedCharacter relatedCharacter;
					bool flag2 = DomainManager.Character.TryGetRelation(charId, mainCharId, out relatedCharacter);
					if (flag2)
					{
						bool flag3 = (relatedCharacter.RelationType & relationFlag) > 0;
						if (flag3)
						{
							charIdCore.RemoveAt(i);
						}
					}
				}
			}
		}

		// Token: 0x06001EFB RID: 7931 RVA: 0x001937DC File Offset: 0x001919DC
		public static GameData.Domains.Character.Character GetAliveSpouse(int charId)
		{
			int spouseId = DomainManager.Character.GetAliveSpouse(charId);
			return (spouseId >= 0) ? DomainManager.Character.GetElement_Objects(spouseId) : null;
		}

		// Token: 0x06001EFC RID: 7932 RVA: 0x0019380C File Offset: 0x00191A0C
		public static sbyte GetCharacterSettlementStateSectTemplateId(int charId)
		{
			GameData.Domains.Character.Character character;
			bool flag = DomainManager.Character.TryGetElement_Objects(charId, out character);
			sbyte result;
			if (flag)
			{
				short settlementId = character.GetOrganizationInfo().SettlementId;
				bool flag2 = settlementId < 0;
				if (flag2)
				{
					result = -1;
				}
				else
				{
					Settlement settlement = DomainManager.Organization.GetSettlement(settlementId);
					sbyte stateTemplateId = DomainManager.Map.GetStateTemplateIdByAreaId(settlement.GetLocation().AreaId);
					result = MapState.Instance[stateTemplateId].SectID;
				}
			}
			else
			{
				result = -1;
			}
			return result;
		}

		// Token: 0x06001EFD RID: 7933 RVA: 0x00193888 File Offset: 0x00191A88
		public static sbyte GetStealActionPhase(GameData.Domains.Character.Character selfChar, GameData.Domains.Character.Character targetChar, ItemKey itemKey, int amount, bool showCheckAnimation = false)
		{
			sbyte resourceType = ItemTemplateHelper.GetMiscResourceType(itemKey.ItemType, itemKey.TemplateId);
			int alertFactor = (resourceType == -1) ? targetChar.GetItemAlertFactor(itemKey, amount) : targetChar.GetResourceAlertFactor(resourceType);
			return EventHelper.GetStealActionPhase(selfChar, targetChar, alertFactor, showCheckAnimation);
		}

		// Token: 0x06001EFE RID: 7934 RVA: 0x001938CC File Offset: 0x00191ACC
		public static sbyte GetStealActionPhase(GameData.Domains.Character.Character selfChar, GameData.Domains.Character.Character targetChar, sbyte resourceType, int amount)
		{
			int alertFactor = targetChar.GetResourceAlertFactor(resourceType);
			return EventHelper.GetStealActionPhase(selfChar, targetChar, alertFactor, false);
		}

		// Token: 0x06001EFF RID: 7935 RVA: 0x001938F0 File Offset: 0x00191AF0
		public static sbyte GetStealActionPhase(GameData.Domains.Character.Character selfChar, GameData.Domains.Character.Character targetChar, GameData.Domains.Character.Character prisoner)
		{
			int alertFactor = targetChar.GetGradeAlertFactor(prisoner.GetInteractionGrade(), 1);
			return EventHelper.GetStealActionPhase(selfChar, targetChar, alertFactor, false);
		}

		// Token: 0x06001F00 RID: 7936 RVA: 0x0019391C File Offset: 0x00191B1C
		public static sbyte GetStealActionPhase(GameData.Domains.Character.Character selfChar, GameData.Domains.Character.Character targetChar, int alertFactor = 100, bool showCheckAnim = false)
		{
			IRandomSource random = EventHelper.Domain.MainThreadDataContext.Random;
			targetChar = targetChar.GetGuardForCalculation(random);
			return selfChar.GetStealActionPhase(random, targetChar, alertFactor, showCheckAnim);
		}

		// Token: 0x06001F01 RID: 7937 RVA: 0x00193954 File Offset: 0x00191B54
		public static sbyte GetScamActionPhase(GameData.Domains.Character.Character selfChar, GameData.Domains.Character.Character targetChar, ItemKey itemKey, int amount, bool showCheckAnim = false)
		{
			sbyte resourceType = ItemTemplateHelper.GetMiscResourceType(itemKey.ItemType, itemKey.TemplateId);
			int alertFactor = (resourceType == -1) ? targetChar.GetItemAlertFactor(itemKey, amount) : targetChar.GetResourceAlertFactor(resourceType);
			return EventHelper.GetScamActionPhase(selfChar, targetChar, alertFactor, showCheckAnim);
		}

		// Token: 0x06001F02 RID: 7938 RVA: 0x00193998 File Offset: 0x00191B98
		public static sbyte GetScamActionPhase(GameData.Domains.Character.Character selfChar, GameData.Domains.Character.Character targetChar, sbyte resourceType, int amount, bool showCheckAnim = false)
		{
			int alertFactor = targetChar.GetResourceAlertFactor(resourceType);
			return EventHelper.GetScamActionPhase(selfChar, targetChar, alertFactor, showCheckAnim);
		}

		// Token: 0x06001F03 RID: 7939 RVA: 0x001939BC File Offset: 0x00191BBC
		public static sbyte GetScamActionPhase(GameData.Domains.Character.Character selfChar, GameData.Domains.Character.Character targetChar, GameData.Domains.Character.Character prisoner)
		{
			int alertFactor = targetChar.GetGradeAlertFactor(prisoner.GetInteractionGrade(), 1);
			return EventHelper.GetScamActionPhase(selfChar, targetChar, alertFactor, false);
		}

		// Token: 0x06001F04 RID: 7940 RVA: 0x001939E8 File Offset: 0x00191BE8
		public static sbyte GetScamActionPhase(GameData.Domains.Character.Character selfChar, GameData.Domains.Character.Character targetChar, int alertFactor = 100, bool showCheckAnim = false)
		{
			IRandomSource random = EventHelper.Domain.MainThreadDataContext.Random;
			targetChar = targetChar.GetGuardForCalculation(random);
			return selfChar.GetScamActionPhase(random, targetChar, alertFactor, showCheckAnim);
		}

		// Token: 0x06001F05 RID: 7941 RVA: 0x00193A20 File Offset: 0x00191C20
		public static sbyte GetRobActionPhase(GameData.Domains.Character.Character selfChar, GameData.Domains.Character.Character targetChar, ItemKey itemKey, int amount, bool showCheckAnim = false)
		{
			sbyte resourceType = ItemTemplateHelper.GetMiscResourceType(itemKey.ItemType, itemKey.TemplateId);
			int alertFactor = (resourceType == -1) ? targetChar.GetItemAlertFactor(itemKey, amount) : targetChar.GetResourceAlertFactor(resourceType);
			return EventHelper.GetRobActionPhase(selfChar, targetChar, alertFactor, showCheckAnim);
		}

		// Token: 0x06001F06 RID: 7942 RVA: 0x00193A64 File Offset: 0x00191C64
		public static sbyte GetRobActionPhase(GameData.Domains.Character.Character selfChar, GameData.Domains.Character.Character targetChar, sbyte resourceType, int amount)
		{
			int alertFactor = targetChar.GetResourceAlertFactor(resourceType);
			return EventHelper.GetRobActionPhase(selfChar, targetChar, alertFactor, false);
		}

		// Token: 0x06001F07 RID: 7943 RVA: 0x00193A88 File Offset: 0x00191C88
		public static sbyte GetRobActionPhase(GameData.Domains.Character.Character selfChar, GameData.Domains.Character.Character targetChar, GameData.Domains.Character.Character prisoner)
		{
			int alertFactor = targetChar.GetGradeAlertFactor(prisoner.GetInteractionGrade(), 1);
			return EventHelper.GetRobActionPhase(selfChar, targetChar, alertFactor, false);
		}

		// Token: 0x06001F08 RID: 7944 RVA: 0x00193AB4 File Offset: 0x00191CB4
		public static sbyte GetRobActionPhase(GameData.Domains.Character.Character selfChar, GameData.Domains.Character.Character targetChar, int alertFactor = 100, bool showCheckAnim = false)
		{
			IRandomSource random = EventHelper.Domain.MainThreadDataContext.Random;
			targetChar = targetChar.GetGuardForCalculation(random);
			return selfChar.GetRobActionPhase(random, targetChar, alertFactor, showCheckAnim);
		}

		// Token: 0x06001F09 RID: 7945 RVA: 0x00193AEC File Offset: 0x00191CEC
		public static sbyte GetPoisonActionPhase(GameData.Domains.Character.Character selfChar, GameData.Domains.Character.Character targetChar, int alertFactor = 100, bool showCheckAnim = false)
		{
			IRandomSource random = EventHelper.Domain.MainThreadDataContext.Random;
			targetChar = targetChar.GetGuardForCalculation(random);
			return selfChar.GetPoisonActionPhase(random, targetChar, alertFactor, showCheckAnim);
		}

		// Token: 0x06001F0A RID: 7946 RVA: 0x00193B24 File Offset: 0x00191D24
		public static sbyte GetPlotHarmActionPhase(GameData.Domains.Character.Character selfChar, GameData.Domains.Character.Character targetChar, int alertFactor = 100, bool showCheckAnim = false)
		{
			IRandomSource random = EventHelper.Domain.MainThreadDataContext.Random;
			targetChar = targetChar.GetGuardForCalculation(random);
			return selfChar.GetPlotHarmActionPhase(random, targetChar, alertFactor, showCheckAnim);
		}

		// Token: 0x06001F0B RID: 7947 RVA: 0x00193B5C File Offset: 0x00191D5C
		public static sbyte GetStealCombatSkillActionPhase(GameData.Domains.Character.Character selfChar, GameData.Domains.Character.Character targetChar, short combatSkillTemplateId, bool showCheckAnim = false)
		{
			IRandomSource random = EventHelper.Domain.MainThreadDataContext.Random;
			sbyte combatSkillType = Config.CombatSkill.Instance[combatSkillTemplateId].Type;
			sbyte grade = Config.CombatSkill.Instance[combatSkillTemplateId].Grade;
			targetChar = targetChar.GetGuardForCalculation(random);
			return selfChar.GetStealCombatSkillActionPhase(random, targetChar, combatSkillType, grade, showCheckAnim);
		}

		// Token: 0x06001F0C RID: 7948 RVA: 0x00193BB4 File Offset: 0x00191DB4
		public static sbyte GetStealLifeSkillActionPhase(GameData.Domains.Character.Character selfChar, GameData.Domains.Character.Character targetChar, short lifeSkillTemplateId, bool showCheckAnim = false)
		{
			IRandomSource random = EventHelper.Domain.MainThreadDataContext.Random;
			sbyte lifeSkillType = LifeSkill.Instance[lifeSkillTemplateId].Type;
			sbyte lifeSkillGrade = LifeSkill.Instance[lifeSkillTemplateId].Grade;
			targetChar = targetChar.GetGuardForCalculation(random);
			return selfChar.GetStealLifeSkillActionPhase(random, targetChar, lifeSkillType, lifeSkillGrade, showCheckAnim);
		}

		// Token: 0x06001F0D RID: 7949 RVA: 0x00193C0C File Offset: 0x00191E0C
		public static void HandlePoisonAction(GameData.Domains.Character.Character selfChar, GameData.Domains.Character.Character targetChar, ItemKey itemKey, sbyte actionPhase)
		{
			DomainManager.Character.HandlePoisonAction(EventHelper.Domain.MainThreadDataContext, selfChar, targetChar, itemKey, actionPhase);
		}

		// Token: 0x06001F0E RID: 7950 RVA: 0x00193C28 File Offset: 0x00191E28
		public static void HandlePlotHarmAction(GameData.Domains.Character.Character selfChar, GameData.Domains.Character.Character targetChar, ItemKey itemKey, sbyte actionPhase)
		{
			DomainManager.Character.HandlePlotHarmAction(EventHelper.Domain.MainThreadDataContext, selfChar, targetChar, itemKey, actionPhase);
		}

		// Token: 0x06001F0F RID: 7951 RVA: 0x00193C44 File Offset: 0x00191E44
		public static void AddNpcTravelTarget(int selfCharId, int targetCharId, int maxDuration = 3)
		{
			GameData.Domains.Character.Character selfChar = DomainManager.Character.GetElement_Objects(selfCharId);
			selfChar.AddTravelTarget(EventHelper.Domain.MainThreadDataContext, new NpcTravelTarget(targetCharId, maxDuration));
		}

		// Token: 0x06001F10 RID: 7952 RVA: 0x00193C78 File Offset: 0x00191E78
		public static void AddNpcTravelTarget(int selfCharId, Location targetLocation, int maxDuration = 3)
		{
			GameData.Domains.Character.Character selfChar = DomainManager.Character.GetElement_Objects(selfCharId);
			selfChar.AddTravelTarget(EventHelper.Domain.MainThreadDataContext, new NpcTravelTarget(targetLocation, maxDuration));
		}

		// Token: 0x06001F11 RID: 7953 RVA: 0x00193CAC File Offset: 0x00191EAC
		public static void AddNeedForRevenge(int selfCharId, int targetCharId)
		{
			GameData.Domains.Character.Character selfChar = DomainManager.Character.GetElement_Objects(selfCharId);
			GameData.Domains.Character.Ai.PersonalNeed personalNeed = GameData.Domains.Character.Ai.PersonalNeed.CreatePersonalNeed(21, targetCharId);
			selfChar.AddPersonalNeed(EventHelper.Domain.MainThreadDataContext, personalNeed);
		}

		// Token: 0x06001F12 RID: 7954 RVA: 0x00193CE4 File Offset: 0x00191EE4
		public static void RemovePersonalNeed(int charId, sbyte templateId, sbyte type)
		{
			GameData.Domains.Character.Character selfChar = DomainManager.Character.GetElement_Objects(charId);
			GameData.Domains.Character.Ai.PersonalNeed personalNeed = GameData.Domains.Character.Ai.PersonalNeed.CreatePersonalNeed(templateId, type);
			selfChar.RemovePersonalNeed(EventHelper.Domain.MainThreadDataContext, personalNeed);
		}

		// Token: 0x06001F13 RID: 7955 RVA: 0x00193D18 File Offset: 0x00191F18
		public static void RemovePersonalNeed(int charId, sbyte templateId, ushort relationType)
		{
			GameData.Domains.Character.Character selfChar = DomainManager.Character.GetElement_Objects(charId);
			GameData.Domains.Character.Ai.PersonalNeed personalNeed = GameData.Domains.Character.Ai.PersonalNeed.CreatePersonalNeed(templateId, relationType);
			selfChar.RemovePersonalNeed(EventHelper.Domain.MainThreadDataContext, personalNeed);
		}

		// Token: 0x06001F14 RID: 7956 RVA: 0x00193D4C File Offset: 0x00191F4C
		public static int SelectRandomBlockTarget(Location location, Predicate<GameData.Domains.Character.Character> predicate = null, bool includeBaby = false)
		{
			bool flag = !location.IsValid();
			int result;
			if (flag)
			{
				result = -1;
			}
			else
			{
				MapBlockData blockData = DomainManager.Map.GetBlock(location);
				bool flag2 = blockData.CharacterSet == null || blockData.CharacterSet.Count == 0;
				if (flag2)
				{
					result = -1;
				}
				else
				{
					List<int> charIdList = ObjectPool<List<int>>.Instance.Get();
					charIdList.Clear();
					foreach (int charId in blockData.CharacterSet)
					{
						GameData.Domains.Character.Character character;
						bool flag3 = !DomainManager.Character.TryGetElement_Objects(charId, out character);
						if (!flag3)
						{
							bool flag4 = !includeBaby && character.GetAgeGroup() == 0;
							if (!flag4)
							{
								bool flag5 = predicate == null || predicate(character);
								if (flag5)
								{
									charIdList.Add(charId);
								}
							}
						}
					}
					bool flag6 = charIdList.Count == 0;
					if (flag6)
					{
						result = -1;
					}
					else
					{
						IRandomSource random = EventHelper.Domain.MainThreadDataContext.Random;
						int targetCharId = charIdList.GetRandom(random);
						ObjectPool<List<int>>.Instance.Return(charIdList);
						result = targetCharId;
					}
				}
			}
			return result;
		}

		// Token: 0x06001F15 RID: 7957 RVA: 0x00193E8C File Offset: 0x0019208C
		public static AiHelper.NpcCombatResultType SimulateNpcCombat(GameData.Domains.Character.Character selfChar, GameData.Domains.Character.Character targetChar, CombatType combatType, int killBaseChance, int kidnapBaseChance, int releaseBaseChance)
		{
			int taiwuCharId = DomainManager.Taiwu.GetTaiwuCharId();
			Tester.Assert(selfChar.GetId() != taiwuCharId, "");
			Tester.Assert(targetChar.GetId() != taiwuCharId, "");
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			AiHelper.NpcCombatResultType result = DomainManager.Character.SimulateCharacterCombat(context, selfChar, targetChar, CombatType.Die, true, 1);
			bool flag = result <= AiHelper.NpcCombatResultType.MinorVictory;
			bool flag2 = flag;
			if (flag2)
			{
				DomainManager.Character.SimulateCharacterCombatResult(context, selfChar, targetChar, killBaseChance, kidnapBaseChance, releaseBaseChance);
			}
			else
			{
				DomainManager.Character.SimulateCharacterCombatResult(context, targetChar, selfChar, killBaseChance, kidnapBaseChance, releaseBaseChance);
			}
			return result;
		}

		// Token: 0x06001F16 RID: 7958 RVA: 0x00193F34 File Offset: 0x00192134
		public static void SimulateNpcCombatOthers(GameData.Domains.Character.Character selfChar)
		{
			List<MapBlockData> mapBlockList = ObjectPool<List<MapBlockData>>.Instance.Get();
			Location location = selfChar.GetLocation();
			Predicate<GameData.Domains.Character.Character> predicate = (GameData.Domains.Character.Character character) => character.GetAgeGroup() != 1 && character.GetId() != DomainManager.Taiwu.GetTaiwuCharId() && character.GetId() != selfChar.GetId();
			int targetCharId = EventHelper.SelectRandomBlockTarget(location, predicate, false);
			bool flag = -1 == targetCharId;
			if (flag)
			{
				for (int step = 3; step < 30; step += 2)
				{
					DomainManager.Map.GetNeighborBlocks(location.AreaId, location.BlockId, mapBlockList, step);
					for (int i = 0; i < mapBlockList.Count; i++)
					{
						Location nowLocation = new Location(mapBlockList[i].AreaId, mapBlockList[i].BlockId);
						targetCharId = EventHelper.SelectRandomBlockTarget(nowLocation, predicate, false);
						bool flag2 = targetCharId != -1;
						if (flag2)
						{
							break;
						}
					}
					bool flag3 = targetCharId != -1;
					if (flag3)
					{
						break;
					}
				}
			}
			GameData.Domains.Character.Character targetChar;
			bool flag4 = targetCharId != -1 && DomainManager.Character.TryGetElement_Objects(targetCharId, out targetChar);
			if (flag4)
			{
				selfChar.SetLocation(targetChar.GetLocation(), EventHelper.Domain.MainThreadDataContext);
				EventHelper.SimulateNpcCombat(selfChar, targetChar, CombatType.Die, 60, 60, 60);
			}
			ObjectPool<List<MapBlockData>>.Instance.Return(mapBlockList);
		}

		// Token: 0x06001F17 RID: 7959 RVA: 0x00194090 File Offset: 0x00192290
		public static void AddCharacterAiActionRateAdjust(int charId, sbyte aiActionType, sbyte actionSubType, short rateAdjust, int duration)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			Tester.Assert(DomainManager.Character.IsCharacterAlive(charId), "");
			DomainManager.Extra.AddAiActionRateAdjust(context, charId, aiActionType, actionSubType, rateAdjust, duration);
		}

		// Token: 0x06001F18 RID: 7960 RVA: 0x001940D4 File Offset: 0x001922D4
		public static void ForbidCharacterAiAction(int charId, sbyte aiActionType, sbyte actionSubType, int duration)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			Tester.Assert(DomainManager.Character.IsCharacterAlive(charId), "");
			DomainManager.Extra.AddAiActionRateAdjust(context, charId, aiActionType, actionSubType, short.MinValue, duration);
		}

		// Token: 0x06001F19 RID: 7961 RVA: 0x00194118 File Offset: 0x00192318
		public static string GetCharacterClickedSpecialNextEvent(GameData.Domains.Character.Character character, EventArgBox argBox, bool createRelation)
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			int charId = character.GetId();
			short age = EventHelper.GetRoleAge(character);
			bool flag = createRelation && character.GetCreatingType() == 1;
			if (flag)
			{
				DomainManager.Character.TryCreateRelation(EventHelper.Domain.MainThreadDataContext, EventArgBox.TaiwuCharacterId, character.GetId());
			}
			bool flag2 = DomainManager.Extra.IsSpecialGroupMember(character);
			string result2;
			if (flag2)
			{
				result2 = "f65f0df8-60e2-476e-b9cc-3298cd3d4d9e";
			}
			else
			{
				bool flag3 = character.IsCompletelyInfected();
				if (flag3)
				{
					result2 = "b268b0c6-0704-41e7-bbb4-d4faf244ebfc";
				}
				else
				{
					bool flag4 = DomainManager.Extra.IsLegendaryBookConsumed(charId);
					if (flag4)
					{
						sbyte bookType = DomainManager.LegendaryBook.GetConsumedCharacterLegendaryBookType(character);
						result2 = EventHelper.LegendaryBookConsumedBookTypeToEvent[(int)bookType];
					}
					else
					{
						bool flag5 = (int)age < GlobalConfig.Instance.AgeBaby;
						if (flag5)
						{
							result2 = "0f6a8d46-c065-4d8d-b4cc-2a85be694bd8";
						}
						else
						{
							OrganizationInfo characterOrgInfo = character.GetOrganizationInfo();
							bool flag6 = EventHelper.GlobalArgBoxContainsKey<int>("ForeverLoverId") && EventHelper.GetIntFromGlobalArgBox("ForeverLoverId") == charId;
							if (flag6)
							{
								bool flag7 = EventHelper.GetCharacterChildGrade(character) < 0;
								if (flag7)
								{
									return "dc4047f7-f266-4d2f-a2e1-37694c3c3247";
								}
								EventHelper.RemoveFromGlobalArgBox<int>("ForeverLoverId");
							}
							else
							{
								bool flag8 = EventHelper.CanTriggerHuntFugitiveInteraction(character);
								if (flag8)
								{
									return "d742c92c-470a-496c-8b4a-eccddcc8baee";
								}
								bool flag9 = EventHelper.CheckHasRelationship(character, taiwu, 32768);
								if (flag9)
								{
									return "3fd8291d-6f22-4b24-88ff-e11e9c5dbc6b";
								}
								bool flag10 = EventHelper.CanTriggerTaiwuWantedInteraction(character.GetId(), argBox);
								if (flag10)
								{
									return "2dc9389a-1341-4671-bc01-d7881a59e432";
								}
								short settlementId;
								bool flag11 = EventHelper.TryGetAppointmentOfCharacter(charId, out settlementId);
								if (flag11)
								{
									DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(15, 1);
									defaultInterpolatedStringHandler.AppendLiteral("settlementId = ");
									defaultInterpolatedStringHandler.AppendFormatted<short>(settlementId);
									AdaptableLog.Info(defaultInterpolatedStringHandler.ToStringAndClear());
									Location location = EventHelper.GetSettlementLocation(settlementId);
									MapBlockData mapBlockData = DomainManager.Map.GetBlock(location);
									short blockId = mapBlockData.BlockId;
									bool flag12 = mapBlockData.RootBlockId >= 0;
									if (flag12)
									{
										blockId = mapBlockData.RootBlockId;
									}
									List<short> blockIdList = new List<short>();
									DomainManager.Map.GetSettlementBlocks(location.AreaId, blockId, blockIdList);
									Location nowLocation = taiwu.GetLocation();
									for (int i = 0; i < blockIdList.Count; i++)
									{
										bool flag13 = location.AreaId == nowLocation.AreaId && blockIdList[i] == nowLocation.BlockId;
										if (flag13)
										{
											return "629311a9-de4e-4189-81b3-cc837948c2ce";
										}
									}
								}
								else
								{
									bool flag14 = EventHelper.CharacterIsOrganizationLeader(character, 10);
									if (flag14)
									{
										bool flag15 = EventHelper.IsCharacterAtTargetSectLocation(character, 10);
										if (flag15)
										{
											EventArgBox sectArgBox = EventHelper.GetSectMainStoryEventArgBox(10);
											bool partOneStoryTriggered = false;
											sectArgBox.Get("ConchShip_PresetKey_KongsangStoryParyOneTriggered", ref partOneStoryTriggered);
											bool flag16 = !partOneStoryTriggered && EventHelper.GetSectApprovingRate(10) >= 500 && !sectArgBox.Contains<int>(SectMainStoryEventArgKeys.TriggeringStatus);
											if (flag16)
											{
												argBox.Set("SectLeader", charId);
												EventHelper.CreateAdventureActor(71, "SectGuideKongsang", argBox);
												GameData.Domains.Character.Character liaoWuming = EventHelper.GetOrCreateFixedCharacterByTemplateId(668);
												EventHelper.DirectlySetFavorabilities(liaoWuming.GetId(), taiwu.GetId(), 9999, 9999);
												EventHelper.AddPoisonToLiaoWuming(liaoWuming);
												argBox.Set("LiaoWuming", liaoWuming.GetId());
												return "cde605ed-0bc1-4b0b-ae72-cb0247d09da2";
											}
											bool result = false;
											bool flag17 = partOneStoryTriggered && EventHelper.IsExtraTaskInProgress(105) && sectArgBox.Get("ConchShip_PresetKey_MissionUnacceptedEventTriggeredSameMonth", ref result) && result;
											if (flag17)
											{
												argBox.Set("SectLeader", charId);
												EventHelper.SaveArgToSectMainStory<bool>(10, "ConchShip_PresetKey_MissionUnacceptedEventTriggeredSameMonth", false);
												return "b474ca28-4cd8-46bf-8abb-e808c0d67de7";
											}
										}
									}
									else
									{
										bool flag18 = EventHelper.IsExtraTaskInProgress(154);
										if (flag18)
										{
											OrganizationInfo orgInfo = character.GetOrganizationInfo();
											bool flag19 = orgInfo.OrgTemplateId == 4;
											if (flag19)
											{
												return "c8c836eb-4fa4-4f4e-bbd2-caed35028969";
											}
										}
										else
										{
											bool flag20 = EventHelper.CharacterIsOrganizationLeader(character, 5);
											if (flag20)
											{
												bool flag21 = EventHelper.IsExtraTaskInProgress(158);
												if (flag21)
												{
													return "d33119ef-9896-455d-b8e5-b911830452bc";
												}
												bool flag22 = EventHelper.IsExtraTaskInProgress(161);
												if (flag22)
												{
													return "d33119ef-9896-455d-b8e5-b911830452bc";
												}
												bool flag23 = EventHelper.IsExtraTaskInProgress(166);
												if (flag23)
												{
													return "fc9306e4-f0fe-4d93-aede-e6919e1e9ead";
												}
											}
										}
									}
								}
							}
							bool flag24 = EventHelper.GetIsDreamBack() && !EventHelper.IsDejaVuEventCharacter(charId) && (EventHelper.IsPastRelationship(charId) || EventHelper.IsPastTaiwu(charId));
							if (flag24)
							{
								EventHelper.AddDejaVuEventCharacter(charId);
								result2 = "7abe76fd-ad0c-4d7e-ad04-6d2c75f89367";
							}
							else
							{
								short num;
								bool flag25 = EventHelper.GetIsDreamBack() && !EventHelper.IsDejaVuEventCharacter(charId) && EventHelper.TryGetDreamBackLifeRecordByRelatedCharId(charId, out num);
								if (flag25)
								{
									EventHelper.AddDejaVuEventCharacter(charId);
									result2 = "bfa202f2-0d5e-4ed4-a709-5f200eee3bb0";
								}
								else
								{
									bool flag26 = DomainManager.Extra.IsExtraTaskInProgress(338);
									if (flag26)
									{
										short settlementId2 = character.GetOrganizationInfo().SettlementId;
										bool flag27 = settlementId2 >= 0 && character.GetOrganizationInfo().Grade == 8;
										if (flag27)
										{
											EventArgBox eventArgBox = DomainManager.Extra.GetSectMainStoryEventArgBox(14);
											GameData.Utilities.ShortList triggeredSettlements = eventArgBox.Get<GameData.Utilities.ShortList>("ConchShip_PresetKey_FulongLoseChickenFeatherInteractionSettlements");
											bool flag28 = triggeredSettlements.Items == null || !triggeredSettlements.Items.Contains(settlementId2);
											if (flag28)
											{
												Settlement settlement = DomainManager.Organization.GetSettlement(settlementId2);
												Location location2 = settlement.GetLocation();
												List<int> chickenIds = DomainManager.Building.GetLocationChicken(location2);
												List<int> loseFeatherChickens = DomainManager.Extra.GetSectFulongLoseFeatherChickens();
												for (int j = 0; j < chickenIds.Count; j++)
												{
													bool flag29 = loseFeatherChickens.Contains(chickenIds[j]);
													if (flag29)
													{
														return "eb4f0e4d-8fed-474b-960a-df783a915a5b";
													}
												}
											}
										}
									}
									result2 = string.Empty;
								}
							}
						}
					}
				}
			}
			return result2;
		}

		// Token: 0x06001F1A RID: 7962 RVA: 0x001946E8 File Offset: 0x001928E8
		public static bool IsSpecialGroupMember(GameData.Domains.Character.Character character)
		{
			return DomainManager.Extra.IsSpecialGroupMember(character);
		}

		// Token: 0x06001F1B RID: 7963 RVA: 0x00194705 File Offset: 0x00192905
		public static void GearMateJoinGroup(int charId)
		{
			DomainManager.Extra.GearMateJoinGroup(EventHelper.Domain.MainThreadDataContext, charId);
		}

		// Token: 0x06001F1C RID: 7964 RVA: 0x0019471E File Offset: 0x0019291E
		public static void GearMateLeaveGroup(int charId)
		{
			DomainManager.Extra.GearMateLeaveGroup(EventHelper.Domain.MainThreadDataContext, charId);
		}

		// Token: 0x06001F1D RID: 7965 RVA: 0x00194738 File Offset: 0x00192938
		public static void TryInterruptCharacterPrioritizedAction(int charId, short templateId)
		{
			BasePrioritizedAction prioritizedAction;
			bool flag = DomainManager.Character.TryGetCharacterPrioritizedAction(charId, out prioritizedAction) && prioritizedAction.ActionType == templateId;
			if (flag)
			{
				GameData.Domains.Character.Character character;
				bool flag2 = DomainManager.Character.TryGetElement_Objects(charId, out character);
				if (flag2)
				{
					prioritizedAction.OnInterrupt(EventHelper.Domain.MainThreadDataContext, character);
					DomainManager.Character.RemoveCharacterPrioritizedAction(EventHelper.Domain.MainThreadDataContext, charId);
					character.ResetPrioritizedActionCooldown(EventHelper.Domain.MainThreadDataContext, templateId, false);
				}
			}
		}

		// Token: 0x06001F1E RID: 7966 RVA: 0x001947B5 File Offset: 0x001929B5
		public static void StartEnemyInteractionEscapeCheck()
		{
			DomainManager.TaiwuEvent.ShowInteractCheckAnimation = true;
			DomainManager.TaiwuEvent.InteractCheckData.IsEscape = true;
		}

		// Token: 0x06001F1F RID: 7967 RVA: 0x001947D4 File Offset: 0x001929D4
		public static string ExecuteScamAction_Item(EventArgBox argBox)
		{
			ItemKey targetItem;
			argBox.Get<ItemKey>("GetItemKey", out targetItem);
			int count = 0;
			bool flag = !argBox.Get("GetItemKeyCount", ref count);
			if (flag)
			{
				count = 1;
			}
			bool isMiscResource = ItemTemplateHelper.IsMiscResource(targetItem.ItemType, targetItem.TemplateId);
			bool flag2 = isMiscResource;
			string result;
			if (flag2)
			{
				sbyte resourceType = ItemTemplateHelper.GetMiscResourceType(targetItem.ItemType, targetItem.TemplateId);
				argBox.Set("GetResType", resourceType);
				argBox.Set("InputResult", count);
				bool flag3 = resourceType != -1;
				if (flag3)
				{
					result = EventHelper.ExecuteScamAction_ItemResource(argBox);
				}
				else
				{
					result = string.Empty;
				}
			}
			else
			{
				EventHelper.AdvanceDays(5);
				GameData.Domains.Character.Character taiwu = argBox.GetCharacter("RoleTaiwu");
				EventHelper.ChangeRoleMainAttribute(taiwu, 2, -20);
				int charId = -1;
				argBox.Get("CharacterId", ref charId);
				GameData.Domains.Character.Character character = argBox.GetCharacter("CharacterId");
				sbyte thenState = EventHelper.GetScamActionPhase(taiwu, character, targetItem, count, true);
				argBox.Set("ActionThenState", thenState);
				bool flag4 = thenState == 0;
				if (flag4)
				{
					result = "84cc0e2c-7fe1-43cf-becf-f19d9681a92f";
				}
				else
				{
					bool flag5 = thenState == 1;
					if (flag5)
					{
						result = "e5459805-135e-4c3d-b7a7-677cc2668df3";
					}
					else
					{
						bool flag6 = thenState == 2;
						if (flag6)
						{
							result = "66f62a92-372a-43e4-ad3f-6e66cb13f2f2";
						}
						else
						{
							bool flag7 = thenState >= 3;
							if (flag7)
							{
								result = "7e580097-a8a6-4807-986f-d6a49391b8dd";
							}
							else
							{
								result = string.Empty;
							}
						}
					}
				}
			}
			return result;
		}

		// Token: 0x06001F20 RID: 7968 RVA: 0x00194930 File Offset: 0x00192B30
		public static string ExecuteScamAction_ItemResource(EventArgBox argBox)
		{
			EventHelper.AdvanceDays(5);
			GameData.Domains.Character.Character taiwu = argBox.GetCharacter("RoleTaiwu");
			EventHelper.ChangeRoleMainAttribute(taiwu, 2, -20);
			int charId = -1;
			argBox.Get("CharacterId", ref charId);
			GameData.Domains.Character.Character character = argBox.GetCharacter("CharacterId");
			sbyte resType = -1;
			argBox.Get("GetResType", ref resType);
			int getNum = 0;
			argBox.Get("InputResult", ref getNum);
			sbyte thenState = EventHelper.GetScamActionPhase(taiwu, character, resType, getNum, true);
			argBox.Set("ActionThenState", thenState);
			bool flag = thenState == 0;
			string result;
			if (flag)
			{
				result = "e8324e2b-39d1-44c1-9461-cdd58612bc14";
			}
			else
			{
				bool flag2 = thenState == 1;
				if (flag2)
				{
					result = "b6ed0819-9baf-45b3-a464-b88d80d3505c";
				}
				else
				{
					bool flag3 = thenState == 2;
					if (flag3)
					{
						result = "f47397bf-9e91-46f4-ac0e-226ac1c288d7";
					}
					else
					{
						bool flag4 = thenState >= 3;
						if (flag4)
						{
							result = "86222c08-a464-4408-a3f3-fb736fa58f8e";
						}
						else
						{
							result = string.Empty;
						}
					}
				}
			}
			return result;
		}

		// Token: 0x06001F21 RID: 7969 RVA: 0x00194A14 File Offset: 0x00192C14
		public static string ExecuteScamAction_NormalInformation(EventArgBox argBox)
		{
			EventHelper.AdvanceDays(5);
			GameData.Domains.Character.Character taiwu = argBox.GetCharacter("RoleTaiwu");
			EventHelper.ChangeRoleMainAttribute(taiwu, 2, -20);
			int charId = -1;
			argBox.Get("CharacterId", ref charId);
			GameData.Domains.Character.Character character = argBox.GetCharacter("CharacterId");
			IEnumerable<NormalInformation> charNormalInfo = EventHelper.GetExceptedCharacterNormalInformation(EventArgBox.TaiwuCharacterId, charId);
			bool flag = !charNormalInfo.Any<NormalInformation>();
			string result;
			if (flag)
			{
				result = "081fe73b-e498-432c-a4f5-d94fb13ce478";
			}
			else
			{
				sbyte thenState = EventHelper.GetScamActionPhase(taiwu, character, 100, true);
				argBox.Set("ActionThenState", thenState);
				bool flag2 = thenState == 0;
				if (flag2)
				{
					result = "57d71fe2-d264-4eaa-a89e-1b833f9ae8b8";
				}
				else
				{
					bool flag3 = thenState == 1;
					if (flag3)
					{
						result = "3515a7f6-32d7-472c-b399-8c6c5c5bf9c3";
					}
					else
					{
						bool flag4 = thenState == 2;
						if (flag4)
						{
							result = "7ecef08c-89ac-4d76-8ac4-34e6b625bd2b";
						}
						else
						{
							bool flag5 = thenState >= 3;
							if (flag5)
							{
								result = "2c8ff1e0-3d05-43b1-8f62-b2feaa848f13";
							}
							else
							{
								result = string.Empty;
							}
						}
					}
				}
			}
			return result;
		}

		// Token: 0x06001F22 RID: 7970 RVA: 0x00194AF8 File Offset: 0x00192CF8
		public static string ExecuteScamAction_SecretInformation(EventArgBox argBox)
		{
			EventHelper.AdvanceDays(5);
			GameData.Domains.Character.Character taiwu = argBox.GetCharacter("RoleTaiwu");
			EventHelper.ChangeRoleMainAttribute(taiwu, 2, -20);
			int charId = -1;
			argBox.Get("CharacterId", ref charId);
			GameData.Domains.Character.Character character = argBox.GetCharacter("CharacterId");
			List<int> charSecrets = EventHelper.GetSecretInformationOfCharacter(charId, false);
			bool hasUsefulSecret = false;
			bool flag = charSecrets != null && charSecrets.Count > 0;
			if (flag)
			{
				ICollection<int> diff = EventHelper.GetSecretInformationKnownDiff(charId, EventArgBox.TaiwuCharacterId);
				bool flag2 = diff != null && diff.Count > 0;
				if (flag2)
				{
					hasUsefulSecret = true;
				}
			}
			bool flag3 = !hasUsefulSecret;
			string result;
			if (flag3)
			{
				result = "2d12dfba-0dfb-4b64-affc-2c2e55d27954";
			}
			else
			{
				sbyte thenState = EventHelper.GetScamActionPhase(taiwu, character, 100, true);
				argBox.Set("ActionThenState", thenState);
				bool flag4 = thenState == 0;
				if (flag4)
				{
					result = "aa204ed4-52f2-43c3-bebe-dd0d6de0d5e2";
				}
				else
				{
					bool flag5 = thenState == 1;
					if (flag5)
					{
						result = "1b40413d-c806-401e-883e-9508a4952701";
					}
					else
					{
						bool flag6 = thenState == 2;
						if (flag6)
						{
							result = "c070f96b-099a-40f8-9f9e-6d2e447906c0";
						}
						else
						{
							bool flag7 = thenState >= 3;
							if (flag7)
							{
								result = "9c143b43-9c19-47dd-a1f8-8fcc911addf8";
							}
							else
							{
								result = string.Empty;
							}
						}
					}
				}
			}
			return result;
		}

		// Token: 0x06001F23 RID: 7971 RVA: 0x00194C18 File Offset: 0x00192E18
		public static string ExecuteScamAction_LifeSkill(EventArgBox argBox)
		{
			int charId = -1;
			argBox.Get("CharacterId", ref charId);
			GameData.Domains.Character.Character taiwu = argBox.GetCharacter("RoleTaiwu");
			GameData.Domains.Character.Character character = argBox.GetCharacter("CharacterId");
			EventHelper.ChangeRoleMainAttribute(taiwu, 2, -20);
			sbyte learnGrade = EventHelper.GetXiangshuLevel() + 1;
			bool flag = learnGrade < 0;
			string result;
			if (flag)
			{
				result = "cead9ba5-d26d-4c83-8ca5-0101c31d72ad";
			}
			else
			{
				List<short> canLearn = EventHelper.GetCharLifeSkillList(charId, -1, 0, learnGrade, 3, true);
				bool flag2 = canLearn.Count <= 0;
				if (flag2)
				{
					result = "cead9ba5-d26d-4c83-8ca5-0101c31d72ad";
				}
				else
				{
					List<short> lowCanLearn = EventHelper.GetMinGradeLifeSkillList(canLearn);
					int rd = EventHelper.GetRandom(0, lowCanLearn.Count);
					argBox.Set("SkillCanLearn", canLearn[rd]);
					sbyte thenState = EventHelper.GetScamActionPhase(taiwu, character, 100, true);
					argBox.Set("ThenState", thenState);
					bool flag3 = thenState == 0;
					if (flag3)
					{
						result = "c8925ce9-a92e-4352-9e3d-3bbf796bfd29";
					}
					else
					{
						bool flag4 = thenState == 1;
						if (flag4)
						{
							result = "d69c33c4-c436-4ffa-9606-63e84fa3a3b2";
						}
						else
						{
							bool flag5 = thenState == 2;
							if (flag5)
							{
								result = "b867e9ce-4515-4397-ad71-3e19f2994d46";
							}
							else
							{
								result = "9cf3c423-085e-48e7-9330-6b2e58c1e011";
							}
						}
					}
				}
			}
			return result;
		}

		// Token: 0x06001F24 RID: 7972 RVA: 0x00194D34 File Offset: 0x00192F34
		public static string ExecuteScamAction_CombatSkill(EventArgBox argBox)
		{
			int charId = -1;
			argBox.Get("CharacterId", ref charId);
			GameData.Domains.Character.Character taiwu = argBox.GetCharacter("RoleTaiwu");
			GameData.Domains.Character.Character character = argBox.GetCharacter("CharacterId");
			EventHelper.ChangeRoleMainAttribute(taiwu, 2, -20);
			sbyte learnGrade = EventHelper.GetXiangshuLevel() + 1;
			bool flag = learnGrade < 0;
			string result;
			if (flag)
			{
				result = "74a98aab-8afb-4a7d-b205-840408a2098c";
			}
			else
			{
				List<short> canLearn = EventHelper.GetCharCombatSkillList(charId, -1, -1, 0, learnGrade, false, true);
				bool flag2 = canLearn.Count <= 0;
				if (flag2)
				{
					result = "74a98aab-8afb-4a7d-b205-840408a2098c";
				}
				else
				{
					List<short> lowCanLearn = EventHelper.GetMinGradeCombatSkillList(canLearn);
					int rd = EventHelper.GetRandom(0, lowCanLearn.Count);
					argBox.Set("TeachCombat", lowCanLearn[rd]);
					sbyte thenState = EventHelper.GetScamActionPhase(taiwu, character, 100, true);
					argBox.Set("ThenState", thenState);
					bool flag3 = thenState == 0;
					if (flag3)
					{
						result = "54f7b9d8-2d97-4807-863d-dd52d6ba4b9e";
					}
					else
					{
						bool flag4 = thenState == 1;
						if (flag4)
						{
							result = "ec834371-5f74-4f50-bd15-1aee198e1240";
						}
						else
						{
							bool flag5 = thenState == 2;
							if (flag5)
							{
								result = "90b660fb-6354-4cfa-aec9-09a5bff0b522";
							}
							else
							{
								result = "e3306c1f-0d4d-408b-afdc-dcbb67c8459d";
							}
						}
					}
				}
			}
			return result;
		}

		// Token: 0x06001F25 RID: 7973 RVA: 0x00194E50 File Offset: 0x00193050
		public static string ExecuteStealAction_Item(EventArgBox argBox)
		{
			ItemKey targetItem;
			argBox.Get<ItemKey>("GetItemKey", out targetItem);
			int count = 0;
			bool flag = !argBox.Get("GetItemKeyCount", ref count);
			if (flag)
			{
				count = 1;
			}
			bool isMiscResource = ItemTemplateHelper.IsMiscResource(targetItem.ItemType, targetItem.TemplateId);
			EventHelper.AdvanceDays(5);
			bool flag2 = isMiscResource;
			string result;
			if (flag2)
			{
				sbyte resourceType = ItemTemplateHelper.GetMiscResourceType(targetItem.ItemType, targetItem.TemplateId);
				argBox.Set("GetResType", resourceType);
				argBox.Set("InputResult", count);
				bool flag3 = resourceType != -1;
				if (flag3)
				{
					result = EventHelper.ExecuteStealAction_ItemResource(argBox);
				}
				else
				{
					result = string.Empty;
				}
			}
			else
			{
				GameData.Domains.Character.Character taiwu = argBox.GetCharacter("RoleTaiwu");
				EventHelper.ChangeRoleMainAttribute(taiwu, 1, -20);
				argBox.Set("ConchShip_PresetKey_ConfirmWaitOptionSignal", "SteelItem");
				int charId = -1;
				argBox.Get("CharacterId", ref charId);
				GameData.Domains.Character.Character character = argBox.GetCharacter("CharacterId");
				sbyte thenState = EventHelper.GetStealActionPhase(taiwu, character, targetItem, count, true);
				argBox.Set("ActionThenState", thenState);
				bool flag4 = thenState == 0;
				if (flag4)
				{
					result = "e9c9b536-0e1c-45b3-b870-1a45f83f7cd5";
				}
				else
				{
					bool flag5 = thenState == 1;
					if (flag5)
					{
						result = "db843c3a-a090-4aae-903d-6025fc8d51e8";
					}
					else
					{
						bool flag6 = thenState == 2;
						if (flag6)
						{
							result = "9331fbd0-d888-4772-b9d5-3e871390fed7";
						}
						else
						{
							bool flag7 = thenState == 3;
							if (flag7)
							{
								result = "36b3a30c-17dc-4e39-bba6-d36a86a36526";
							}
							else
							{
								result = "d3806f6b-5445-4e86-86a8-cf9686646320";
							}
						}
					}
				}
			}
			return result;
		}

		// Token: 0x06001F26 RID: 7974 RVA: 0x00194FB8 File Offset: 0x001931B8
		public static string ExecuteStealAction_ItemResource(EventArgBox argBox)
		{
			GameData.Domains.Character.Character taiwu = argBox.GetCharacter("RoleTaiwu");
			EventHelper.ChangeRoleMainAttribute(taiwu, 1, -20);
			argBox.Set("ConchShip_PresetKey_ConfirmWaitOptionSignal", "SteelResource");
			int charId = -1;
			argBox.Get("CharacterId", ref charId);
			GameData.Domains.Character.Character character = argBox.GetCharacter("CharacterId");
			sbyte thenState = EventHelper.GetStealActionPhase(taiwu, character, 100, true);
			argBox.Set("ActionThenState", thenState);
			bool flag = thenState == 0;
			string result;
			if (flag)
			{
				result = "88160cf5-7c56-42c6-bf8a-c5cc4d95b1be";
			}
			else
			{
				bool flag2 = thenState == 1;
				if (flag2)
				{
					result = "763bc615-e708-4746-8324-aec76e0f5546";
				}
				else
				{
					bool flag3 = thenState == 2;
					if (flag3)
					{
						result = "be24ac56-d7e8-4ba9-85fa-f0235b4d5097";
					}
					else
					{
						bool flag4 = thenState == 3;
						if (flag4)
						{
							result = "f213fb6c-3cb9-4432-8bde-46da6bb0f633";
						}
						else
						{
							result = "69418696-d98e-424c-b12d-deb179b25344";
						}
					}
				}
			}
			return result;
		}

		// Token: 0x06001F27 RID: 7975 RVA: 0x00195078 File Offset: 0x00193278
		public static string ExecuteRobAction_Item(EventArgBox argBox)
		{
			ItemKey targetItem;
			argBox.Get<ItemKey>("GetItemKey", out targetItem);
			int count = 0;
			bool flag = !argBox.Get("GetItemKeyCount", ref count);
			if (flag)
			{
				count = 1;
			}
			bool isMiscResource = ItemTemplateHelper.IsMiscResource(targetItem.ItemType, targetItem.TemplateId);
			bool flag2 = isMiscResource;
			string result;
			if (flag2)
			{
				sbyte resourceType = ItemTemplateHelper.GetMiscResourceType(targetItem.ItemType, targetItem.TemplateId);
				argBox.Set("GetResType", resourceType);
				argBox.Set("InputResult", count);
				bool flag3 = resourceType != -1;
				if (flag3)
				{
					result = EventHelper.ExecuteRobAction_ItemResource(argBox);
				}
				else
				{
					result = string.Empty;
				}
			}
			else
			{
				EventHelper.AdvanceDays(5);
				GameData.Domains.Character.Character taiwu = argBox.GetCharacter("RoleTaiwu");
				EventHelper.ChangeRoleMainAttribute(taiwu, 0, -20);
				argBox.Set("ConchShip_PresetKey_ConfirmWaitOptionSignal", "RobItem");
				int charId = -1;
				argBox.Get("CharacterId", ref charId);
				GameData.Domains.Character.Character character = argBox.GetCharacter("CharacterId");
				sbyte thenState = EventHelper.GetRobActionPhase(taiwu, character, targetItem, count, true);
				argBox.Set("ActionThenState", thenState);
				bool flag4 = thenState == 0;
				if (flag4)
				{
					result = "350e2536-df08-484b-9a69-75a1e30803e7";
				}
				else
				{
					bool flag5 = thenState == 1;
					if (flag5)
					{
						result = "9acc1344-cb7c-4cc2-8643-9a63a9c13903";
					}
					else
					{
						bool flag6 = thenState == 2;
						if (flag6)
						{
							result = "87814d6f-6953-4e03-bc6f-60ad975e1783";
						}
						else
						{
							bool flag7 = thenState == 3;
							if (flag7)
							{
								result = "893cef33-efac-4c23-aae8-9af20d19b7cf";
							}
							else
							{
								result = "0cb877f7-0b08-4e47-9e18-e774a3f981a1";
							}
						}
					}
				}
			}
			return result;
		}

		// Token: 0x06001F28 RID: 7976 RVA: 0x001951E0 File Offset: 0x001933E0
		public static string ExecuteRobAction_ItemResource(EventArgBox argBox)
		{
			EventHelper.AdvanceDays(5);
			GameData.Domains.Character.Character taiwu = argBox.GetCharacter("RoleTaiwu");
			EventHelper.ChangeRoleMainAttribute(taiwu, 0, -20);
			argBox.Set("ConchShip_PresetKey_ConfirmWaitOptionSignal", "RobResource");
			int charId = -1;
			argBox.Get("CharacterId", ref charId);
			GameData.Domains.Character.Character character = argBox.GetCharacter("CharacterId");
			sbyte thenState = EventHelper.GetRobActionPhase(taiwu, character, 100, true);
			argBox.Set("ActionThenState", thenState);
			bool flag = thenState == 0;
			string result;
			if (flag)
			{
				result = "90f19f43-2454-46da-b8b8-dccd052d067d";
			}
			else
			{
				bool flag2 = thenState == 1;
				if (flag2)
				{
					result = "a90c339c-e10d-4b67-9c61-a60a86603117";
				}
				else
				{
					bool flag3 = thenState == 2;
					if (flag3)
					{
						result = "425ef556-2dd9-4585-acf7-6cd39fd5743c";
					}
					else
					{
						bool flag4 = thenState == 3;
						if (flag4)
						{
							result = "1b04b65a-7751-4df9-b9a2-e97175ac87c2";
						}
						else
						{
							result = "88b05e12-7e7a-46c8-9c9e-fe5224586cde";
						}
					}
				}
			}
			return result;
		}

		// Token: 0x06001F29 RID: 7977 RVA: 0x001952A8 File Offset: 0x001934A8
		public static string ExecutePoisonAction(EventArgBox argBox)
		{
			EventHelper.AdvanceDays(3);
			GameData.Domains.Character.Character taiwu = argBox.GetCharacter("RoleTaiwu");
			EventHelper.ChangeRoleMainAttribute(taiwu, 4, -20);
			argBox.Set("ConchShip_PresetKey_ConfirmWaitOptionSignal", "UsePoison");
			int charId = -1;
			argBox.Get("CharacterId", ref charId);
			GameData.Domains.Character.Character character = argBox.GetCharacter("CharacterId");
			sbyte thenState = EventHelper.GetPoisonActionPhase(taiwu, character, 100, true);
			argBox.Set("ActionThenState", thenState);
			bool flag = thenState < 4;
			if (flag)
			{
				ItemKey poisonKey;
				EventHelper.HandlePoisonAction(argBox.GetCharacter("RoleTaiwu"), argBox.GetCharacter("CharacterId"), argBox.Get<ItemKey>("GiftKey", out poisonKey) ? poisonKey : ItemKey.Invalid, thenState);
			}
			bool flag2 = thenState == 0;
			string result;
			if (flag2)
			{
				result = "b42e0309-4791-47fb-a569-9b68292bce74";
			}
			else
			{
				bool flag3 = thenState == 1;
				if (flag3)
				{
					result = "2a338104-5aa4-4640-94d4-5b671cf015c2";
				}
				else
				{
					bool flag4 = thenState == 2;
					if (flag4)
					{
						result = "c3cc6fe7-b9cb-4a13-acf9-90a06cbc47fe";
					}
					else
					{
						bool flag5 = thenState == 3;
						if (flag5)
						{
							result = "ed802fcb-73a7-4fe8-a7c1-9bec9be09d45";
						}
						else
						{
							ItemKey itemKey;
							bool flag6 = argBox.Get<ItemKey>("GiftKey", out itemKey);
							if (flag6)
							{
								result = "c9dc4592-afe6-4402-9592-a5b8bb99b840";
							}
							else
							{
								result = "619d2917-6f3b-4a42-b37c-7903225b968e";
							}
						}
					}
				}
			}
			return result;
		}

		// Token: 0x06001F2A RID: 7978 RVA: 0x001953CC File Offset: 0x001935CC
		public static string ExecutePlotHarmAction(EventArgBox argBox)
		{
			EventHelper.AdvanceDays(5);
			GameData.Domains.Character.Character taiwu = argBox.GetCharacter("RoleTaiwu");
			EventHelper.ChangeRoleMainAttribute(taiwu, 4, -20);
			argBox.Set("ConchShip_PresetKey_ConfirmWaitOptionSignal", "UseMedicine");
			int charId = -1;
			argBox.Get("CharacterId", ref charId);
			GameData.Domains.Character.Character character = argBox.GetCharacter("CharacterId");
			sbyte thenState = EventHelper.GetPlotHarmActionPhase(taiwu, character, 100, true);
			argBox.Set("ActionThenState", thenState);
			bool flag = thenState < 4;
			if (flag)
			{
				ItemKey itemKey;
				EventHelper.HandlePlotHarmAction(argBox.GetCharacter("RoleTaiwu"), argBox.GetCharacter("CharacterId"), argBox.Get<ItemKey>("GiftKey", out itemKey) ? itemKey : ItemKey.Invalid, thenState);
			}
			bool flag2 = thenState == 0;
			string result;
			if (flag2)
			{
				result = "6d95cbd1-3fb3-4d8a-9f5c-10705d5059e3";
			}
			else
			{
				bool flag3 = thenState == 1;
				if (flag3)
				{
					result = "b05de8bf-b755-48cf-97f9-568fa385ce73";
				}
				else
				{
					bool flag4 = thenState == 2;
					if (flag4)
					{
						result = "01841986-a003-4bad-b465-f753f9c31a4f";
					}
					else
					{
						bool flag5 = thenState == 3;
						if (flag5)
						{
							result = "f5db0121-1039-4ff9-8a6a-b217a3c5fd37";
						}
						else
						{
							ItemKey itemKey2;
							bool flag6 = argBox.Get<ItemKey>("GiftKey", out itemKey2);
							if (flag6)
							{
								result = "e3f3995f-82aa-4dd9-b73f-5242ba268a20";
							}
							else
							{
								result = "b68d2a56-34eb-4194-a065-06955ccd100a";
							}
						}
					}
				}
			}
			return result;
		}

		// Token: 0x06001F2B RID: 7979 RVA: 0x001954F0 File Offset: 0x001936F0
		public static string ExecuteConfessionLove(EventArgBox argBox)
		{
			GameData.Domains.Character.Character taiwu = argBox.GetCharacter("RoleTaiwu");
			GameData.Domains.Character.Character character = argBox.GetCharacter("CharacterId");
			bool flag = EventHelper.CheckConfessLoveSucceed(taiwu.GetId(), character.GetId());
			if (flag)
			{
				bool flag2 = EventHelper.IsDlcInstalled(2305890U);
				if (flag2)
				{
					InteractOfLoveEventHelper.SetConfessionLoveResult(character.GetId(), 2);
					InteractOfLoveEventHelper.AddStartRelationSuccessRate(taiwu.GetId(), character.GetId(), 10, RelationType.GetTypeId(16384), 0, 1);
				}
				bool flag3 = !EventHelper.CheckHasRelationship(character, taiwu, 16384);
				if (flag3)
				{
					EventHelper.ApplyRelationBecomeBoyOrGirlFriend(taiwu, character, true);
				}
				EventHelper.AddRelation(taiwu.GetId(), character.GetId(), 16384);
				bool flag4 = EventHelper.GetRoleBehavior(character) == 0;
				if (flag4)
				{
					bool flag5 = EventHelper.IsDlcInstalled(2305890U);
					if (flag5)
					{
						return "a51ee3fc-bcbb-4f25-b3f4-dd9c3b9a05fa";
					}
					return "2b3a082e-d12b-492a-9539-634aa80bbca7";
				}
				else
				{
					bool flag6 = EventHelper.GetRoleBehavior(character) == 1;
					if (flag6)
					{
						bool flag7 = EventHelper.IsDlcInstalled(2305890U);
						if (flag7)
						{
							return "3df07665-f907-45e5-99cd-1c67cdc87186";
						}
						return "8b83baba-3429-41c8-baee-832e8af04349";
					}
					else
					{
						bool flag8 = EventHelper.GetRoleBehavior(character) == 2;
						if (flag8)
						{
							bool flag9 = EventHelper.IsDlcInstalled(2305890U);
							if (flag9)
							{
								return "255a434c-5c9a-4f65-bd1b-6e9db5143186";
							}
							return "ace4423d-fc88-4a9a-8b3a-c715b3f1e29f";
						}
						else
						{
							bool flag10 = EventHelper.GetRoleBehavior(character) == 3;
							if (flag10)
							{
								bool flag11 = EventHelper.IsDlcInstalled(2305890U);
								if (flag11)
								{
									return "8ecdbe26-a61e-49ab-80e9-248a899f709b";
								}
								return "97afbfce-3251-465e-a566-9bad8ddffa46";
							}
							else
							{
								bool flag12 = EventHelper.GetRoleBehavior(character) == 4;
								if (flag12)
								{
									bool flag13 = EventHelper.IsDlcInstalled(2305890U);
									if (flag13)
									{
										return "f375d1a2-2450-4794-b58f-6939569b179f";
									}
									return "4e13a531-ff44-4b63-b996-df654f81b9dd";
								}
							}
						}
					}
				}
			}
			else
			{
				bool flag14 = EventHelper.IsDlcInstalled(2305890U);
				if (flag14)
				{
					InteractOfLoveEventHelper.SetConfessionLoveResult(character.GetId(), 1);
				}
				EventHelper.ApplyRelationBecomeBoyOrGirlFriend(taiwu, character, false);
				EventHelper.AddRelation(taiwu.GetId(), character.GetId(), 16384);
				bool flag15 = EventHelper.GetRoleBehavior(character) == 0;
				if (flag15)
				{
					return "dab05150-6700-4b1f-8454-818901a79dd8";
				}
				bool flag16 = EventHelper.GetRoleBehavior(character) == 1;
				if (flag16)
				{
					return "a7c4ac21-8924-4d9b-a69c-95673082220e";
				}
				bool flag17 = EventHelper.GetRoleBehavior(character) == 2;
				if (flag17)
				{
					return "d521f555-ea0a-40c6-8327-1a24aaccaa26";
				}
				bool flag18 = EventHelper.GetRoleBehavior(character) == 3;
				if (flag18)
				{
					return "8c2a24f4-333c-4f14-a12f-703cc3586e47";
				}
				bool flag19 = EventHelper.GetRoleBehavior(character) == 4;
				if (flag19)
				{
					return "1ee6cc38-a32c-4c1f-9fb4-3f62b593fd4f";
				}
			}
			return string.Empty;
		}

		// Token: 0x06001F2C RID: 7980 RVA: 0x0019578C File Offset: 0x0019398C
		public static string ExecuteStealLifeSkill(EventArgBox argBox)
		{
			int charId = -1;
			argBox.Get("CharacterId", ref charId);
			GameData.Domains.Character.Character taiwu = argBox.GetCharacter("RoleTaiwu");
			GameData.Domains.Character.Character character = argBox.GetCharacter("CharacterId");
			EventHelper.ChangeRoleMainAttribute(taiwu, 5, -20);
			sbyte learnGrade = EventHelper.GetXiangshuLevel() + 1;
			bool flag = learnGrade < 0;
			string result;
			if (flag)
			{
				result = "9758c896-0972-41d6-9a9c-7c1ff3a88d3b";
			}
			else
			{
				List<short> canLearn = EventHelper.GetCharLifeSkillList(charId, -1, 0, learnGrade, 3, true);
				bool flag2 = canLearn.Count <= 0;
				if (flag2)
				{
					result = "9758c896-0972-41d6-9a9c-7c1ff3a88d3b";
				}
				else
				{
					List<short> lowCanLearn = EventHelper.GetMinGradeLifeSkillList(canLearn);
					int rd = EventHelper.GetRandom(0, lowCanLearn.Count);
					argBox.Set("SkillCanLearn", canLearn[rd]);
					sbyte thenState = EventHelper.GetStealLifeSkillActionPhase(taiwu, character, canLearn[0], true);
					argBox.Set("ThenState", thenState);
					bool flag3 = thenState == 0;
					if (flag3)
					{
						result = "8de6c99c-bf5b-4557-a7a3-148a4ae85f33";
					}
					else
					{
						bool flag4 = thenState == 1;
						if (flag4)
						{
							result = "d69c33c4-c436-4ffa-9606-63e84fa3a3b2";
						}
						else
						{
							bool flag5 = thenState == 2;
							if (flag5)
							{
								result = "a33c2d04-0f48-4869-b7df-2994a002f94e";
							}
							else
							{
								bool flag6 = thenState == 3;
								if (flag6)
								{
									result = "87d09a27-2393-4558-b8b8-bdc225dbe8b6";
								}
								else
								{
									result = "79697f58-62b1-4b03-b9b0-8f4ed49733b3";
								}
							}
						}
					}
				}
			}
			return result;
		}

		// Token: 0x06001F2D RID: 7981 RVA: 0x001958C0 File Offset: 0x00193AC0
		public static string ExecuteStealCombatSkill(EventArgBox argBox)
		{
			int charId = -1;
			argBox.Get("CharacterId", ref charId);
			GameData.Domains.Character.Character taiwu = argBox.GetCharacter("RoleTaiwu");
			GameData.Domains.Character.Character character = argBox.GetCharacter("CharacterId");
			EventHelper.ChangeRoleMainAttribute(taiwu, 5, -20);
			sbyte learnGrade = EventHelper.GetXiangshuLevel() + 1;
			bool flag = learnGrade < 0;
			string result;
			if (flag)
			{
				result = "37a585d2-dabd-4e00-a6ea-68138beb6838";
			}
			else
			{
				List<short> canLearn = EventHelper.GetCharCombatSkillList(charId, -1, -1, 0, learnGrade, false, true);
				bool flag2 = canLearn.Count <= 0;
				if (flag2)
				{
					result = "37a585d2-dabd-4e00-a6ea-68138beb6838";
				}
				else
				{
					List<short> lowCanLearn = EventHelper.GetMinGradeCombatSkillList(canLearn);
					int rd = EventHelper.GetRandom(0, lowCanLearn.Count);
					argBox.Set("TeachCombat", lowCanLearn[rd]);
					sbyte thenState = EventHelper.GetStealCombatSkillActionPhase(taiwu, character, lowCanLearn[rd], true);
					argBox.Set("ThenState", thenState);
					bool flag3 = thenState == 0;
					if (flag3)
					{
						result = "9d5a6366-bf7f-4b54-8169-50a8f00102df";
					}
					else
					{
						bool flag4 = thenState == 1;
						if (flag4)
						{
							result = "df9672e7-141e-4252-a57e-34434dab5d60";
						}
						else
						{
							bool flag5 = thenState == 2;
							if (flag5)
							{
								result = "cee84f58-6280-4623-88b4-5983bb46abd9";
							}
							else
							{
								bool flag6 = thenState == 3;
								if (flag6)
								{
									result = "e36f9751-7d67-4d50-abf1-22001fcec70e";
								}
								else
								{
									result = "302979ca-c086-4616-af00-1468288f07e6";
								}
							}
						}
					}
				}
			}
			return result;
		}

		// Token: 0x06001F2E RID: 7982 RVA: 0x001959F8 File Offset: 0x00193BF8
		public static GameData.Domains.Character.Character CreateFulongServant(string nextEventGuid, EventArgBox argBox)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			GameData.Domains.Character.Character taiwuChar = DomainManager.Taiwu.GetTaiwu();
			Location location = taiwuChar.GetLocation();
			OrganizationInfo orgInfo = taiwuChar.GetOrganizationInfo();
			orgInfo.Grade = 0;
			sbyte gender = Gender.GetRandom(context.Random);
			bool flag = argBox.Contains<sbyte>("FulongServantSetGender");
			if (flag)
			{
				gender = argBox.GetSbyte("FulongServantSetGender");
			}
			bool transGender = false;
			argBox.Get("FulongServantSetTransgender", ref transGender);
			sbyte growingSectId = OrganizationDomain.GetRandomSectOrgTemplateId(context.Random, gender);
			sbyte growingGrade = (sbyte)context.Random.Next(6);
			sbyte stateTemplateId = DomainManager.Map.GetStateTemplateIdByAreaId(location.AreaId);
			short charTemplateId = OrganizationDomain.GetCharacterTemplateId(growingSectId, stateTemplateId, gender);
			short age = (short)context.Random.Next(12, 25);
			IntelligentCharacterCreationInfo info = new IntelligentCharacterCreationInfo(location, orgInfo, charTemplateId)
			{
				Age = age,
				GrowingSectId = growingSectId,
				GrowingSectGrade = growingGrade,
				InitializeSectSkills = false,
				Gender = gender,
				Transgender = transGender
			};
			bool flag2 = argBox.Contains<sbyte>("FulongServantSetGender");
			if (flag2)
			{
				info.BaseAttraction = (short)context.Random.Next((int)GlobalConfig.Instance.FulongServantBaseAttraction, 900);
			}
			GameData.Domains.Character.Character character = DomainManager.Character.CreateIntelligentCharacter(context, ref info);
			int charId = character.GetId();
			DomainManager.Character.CompleteCreatingCharacter(charId);
			character.AddFeature(EventHelper.Domain.MainThreadDataContext, 199, false);
			character.SetIdealSect(growingSectId, context);
			DomainManager.Character.TryCreateGeneralRelation(context, taiwuChar, character);
			DomainManager.Character.ChangeFavorabilityOptional(context, character, taiwuChar, 10000, 0);
			bool flag3 = argBox.Contains<sbyte>("FulongServantSetBehaviorType");
			if (flag3)
			{
				sbyte behaviorType = argBox.GetSbyte("FulongServantSetBehaviorType");
				EventHelper.ChangeRoleBehaviorType(character, behaviorType);
			}
			bool flag4 = argBox.Contains<sbyte>("FulongServantSetMainAttributeType");
			if (flag4)
			{
				sbyte mainAttributeType = argBox.GetSbyte("FulongServantSetMainAttributeType");
				short[] adjust = new short[6];
				for (int i = 0; i < adjust.Length; i++)
				{
					bool flag5 = i == (int)mainAttributeType;
					if (flag5)
					{
						adjust[i] = 12;
					}
					else
					{
						adjust[i] = -1;
					}
				}
				MainAttributes value = CharacterCreation.CreateMainAttributes(context.Random, 7, adjust, null, 0, 0);
				character.SetBaseMainAttributes(value, context);
				MainAttributes maxValue = character.GetMaxMainAttributes();
				character.SetCurrMainAttributes(maxValue, context);
			}
			bool flag6 = argBox.Contains<sbyte>("FulongServantSetLifeSkillType");
			if (flag6)
			{
				int record = argBox.GetInt("FulongServantSetLifeSkillType");
				short[] adjust2 = new short[16];
				for (int j = 0; j < adjust2.Length; j++)
				{
					bool flag7 = (record & 1 << j) != 0;
					if (flag7)
					{
						adjust2[j] = 12;
					}
					else
					{
						adjust2[j] = -1;
					}
				}
				LifeSkillShorts value2 = CharacterCreation.CreateLifeSkillQualifications(context.Random, 7, adjust2, null, 0, 0);
				character.SetBaseLifeSkillQualifications(ref value2, context);
			}
			bool flag8 = argBox.Contains<sbyte>("FulongServantSetCombatSkillType");
			if (flag8)
			{
				int record2 = argBox.GetInt("FulongServantSetCombatSkillType");
				short[] adjust3 = new short[14];
				for (int k = 0; k < adjust3.Length; k++)
				{
					bool flag9 = (record2 & 1 << k) != 0;
					if (flag9)
					{
						adjust3[k] = 12;
					}
					else
					{
						adjust3[k] = -1;
					}
				}
				CombatSkillShorts value3 = CharacterCreation.CreateCombatSkillQualifications(context.Random, 7, adjust3, null, 0, 0);
				character.SetBaseCombatSkillQualifications(ref value3, context);
			}
			DomainManager.Taiwu.JoinGroup(context, charId, true);
			EventHelper.ShowGetItemPageForCharacters(new List<int>
			{
				charId
			}, false, nextEventGuid, argBox);
			return character;
		}

		// Token: 0x06001F2F RID: 7983 RVA: 0x00195D90 File Offset: 0x00193F90
		public static bool FulongServantHasAnySet(EventArgBox argBox)
		{
			return EventHelper.FulongServantIsSetGenderAndTransgender(argBox) || EventHelper.FulongServantIsSetBehaviorType(argBox) || EventHelper.FulongServantIsSetLifeSkillType(argBox) || EventHelper.FulongServantIsSetCombatSkillType(argBox) || EventHelper.FulongServantIsSetMainAttributeType(argBox);
		}

		// Token: 0x06001F30 RID: 7984 RVA: 0x00195DCB File Offset: 0x00193FCB
		public static void FulongServantSetGender(EventArgBox argBox, sbyte gender)
		{
			argBox.Set("FulongServantSetGender", gender);
		}

		// Token: 0x06001F31 RID: 7985 RVA: 0x00195DDB File Offset: 0x00193FDB
		public static void FulongServantSetTransgender(EventArgBox argBox, bool transgender)
		{
			argBox.Set("FulongServantSetTransgender", transgender);
		}

		// Token: 0x06001F32 RID: 7986 RVA: 0x00195DEB File Offset: 0x00193FEB
		public static void FulongServantClearSetGenderAndTransgender(EventArgBox argBox)
		{
			argBox.Remove<sbyte>("FulongServantSetGender");
			argBox.Remove<bool>("FulongServantSetTransgender");
		}

		// Token: 0x06001F33 RID: 7987 RVA: 0x00195E08 File Offset: 0x00194008
		public static bool FulongServantIsSetGenderAndTransgender(EventArgBox argBox)
		{
			return argBox.Contains<sbyte>("FulongServantSetGender") || argBox.Contains<bool>("FulongServantSetTransgender");
		}

		// Token: 0x06001F34 RID: 7988 RVA: 0x00195E38 File Offset: 0x00194038
		public static bool FulongServantIsSetGenderAndTransgender(EventArgBox argBox, sbyte gender, bool transgender)
		{
			sbyte setGender = -1;
			bool setTransgender = false;
			bool flag = argBox.Get("FulongServantSetGender", ref setGender) && argBox.Get("FulongServantSetTransgender", ref setTransgender);
			return flag && setGender == gender && setTransgender == transgender;
		}

		// Token: 0x06001F35 RID: 7989 RVA: 0x00195E81 File Offset: 0x00194081
		public static void FulongServantSetBehaviorType(EventArgBox argBox, sbyte behaviorType)
		{
			argBox.Set("FulongServantSetBehaviorType", behaviorType);
		}

		// Token: 0x06001F36 RID: 7990 RVA: 0x00195E94 File Offset: 0x00194094
		public static bool FulongServantIsSetBehaviorType(EventArgBox argBox)
		{
			return argBox.Contains<sbyte>("FulongServantSetBehaviorType");
		}

		// Token: 0x06001F37 RID: 7991 RVA: 0x00195EB4 File Offset: 0x001940B4
		public static bool FulongServantIsSetBehaviorType(EventArgBox argBox, sbyte behaviorType)
		{
			sbyte setBehaviorType = -1;
			bool flag = argBox.Get("FulongServantSetBehaviorType", ref setBehaviorType);
			return flag && behaviorType == setBehaviorType;
		}

		// Token: 0x06001F38 RID: 7992 RVA: 0x00195EE1 File Offset: 0x001940E1
		public static void FulongServantClearSetBehaviorType(EventArgBox argBox)
		{
			argBox.Remove<sbyte>("FulongServantSetBehaviorType");
		}

		// Token: 0x06001F39 RID: 7993 RVA: 0x00195EF0 File Offset: 0x001940F0
		public static void FulongServantSetLifeSkillType(EventArgBox argBox, sbyte lifeSkillType)
		{
			int record = 0;
			bool flag = argBox.Contains<int>("FulongServantSetLifeSkillType");
			if (flag)
			{
				argBox.Get("FulongServantSetLifeSkillType", ref record);
			}
			record |= 1 << (int)lifeSkillType;
			argBox.Set("FulongServantSetLifeSkillType", record);
		}

		// Token: 0x06001F3A RID: 7994 RVA: 0x00195F33 File Offset: 0x00194133
		public static void FulongServantClearSetLifeSkillType(EventArgBox argBox)
		{
			argBox.Remove<int>("FulongServantSetLifeSkillType");
		}

		// Token: 0x06001F3B RID: 7995 RVA: 0x00195F44 File Offset: 0x00194144
		public static bool FulongServantIsSetLifeSkillType(EventArgBox argBox)
		{
			return argBox.Contains<int>("FulongServantSetLifeSkillType");
		}

		// Token: 0x06001F3C RID: 7996 RVA: 0x00195F64 File Offset: 0x00194164
		public static bool FulongServantIsSetLifeSkillType(EventArgBox argBox, sbyte lifeSkillType)
		{
			int record = 0;
			bool flag = argBox.Get("FulongServantSetLifeSkillType", ref record);
			return flag && (record & 1 << (int)lifeSkillType) != 0;
		}

		// Token: 0x06001F3D RID: 7997 RVA: 0x00195F9C File Offset: 0x0019419C
		public static void FulongServantSetCombatSkillType(EventArgBox argBox, sbyte combatSkillType)
		{
			int record = 0;
			bool flag = argBox.Contains<int>("FulongServantSetCombatSkillType");
			if (flag)
			{
				argBox.Get("FulongServantSetCombatSkillType", ref record);
			}
			record |= 1 << (int)combatSkillType;
			argBox.Set("FulongServantSetCombatSkillType", record);
		}

		// Token: 0x06001F3E RID: 7998 RVA: 0x00195FDF File Offset: 0x001941DF
		public static void FulongServantClearSetCombatSkillType(EventArgBox argBox)
		{
			argBox.Remove<int>("FulongServantSetCombatSkillType");
		}

		// Token: 0x06001F3F RID: 7999 RVA: 0x00195FF0 File Offset: 0x001941F0
		public static bool FulongServantIsSetCombatSkillType(EventArgBox argBox)
		{
			return argBox.Contains<int>("FulongServantSetCombatSkillType");
		}

		// Token: 0x06001F40 RID: 8000 RVA: 0x00196010 File Offset: 0x00194210
		public static bool FulongServantIsSetCombatSkillType(EventArgBox argBox, sbyte lifeSkillType)
		{
			int record = 0;
			bool flag = argBox.Get("FulongServantSetCombatSkillType", ref record);
			return flag && (record & 1 << (int)lifeSkillType) != 0;
		}

		// Token: 0x06001F41 RID: 8001 RVA: 0x00196045 File Offset: 0x00194245
		public static void FulongServantSetMainAttributeType(EventArgBox argBox, sbyte attributeType)
		{
			argBox.Set("FulongServantSetMainAttributeType", attributeType);
		}

		// Token: 0x06001F42 RID: 8002 RVA: 0x00196055 File Offset: 0x00194255
		public static void FulongServantClearSetMainAttributeType(EventArgBox argBox)
		{
			argBox.Remove<sbyte>("FulongServantSetMainAttributeType");
		}

		// Token: 0x06001F43 RID: 8003 RVA: 0x00196064 File Offset: 0x00194264
		public static bool FulongServantIsSetMainAttributeType(EventArgBox argBox)
		{
			return argBox.Contains<sbyte>("FulongServantSetMainAttributeType");
		}

		// Token: 0x06001F44 RID: 8004 RVA: 0x00196084 File Offset: 0x00194284
		public static bool FulongServantIsSetMainAttributeType(EventArgBox argBox, sbyte attributeType)
		{
			sbyte setAttributeType = -1;
			bool flag = argBox.Get("FulongServantSetMainAttributeType", ref setAttributeType);
			return flag && attributeType == setAttributeType;
		}

		// Token: 0x06001F45 RID: 8005 RVA: 0x001960B4 File Offset: 0x001942B4
		public static string FulongServantGetGenderDesc(EventArgBox argBox)
		{
			string desc = "";
			sbyte setGender = -1;
			bool setTransgender = false;
			bool flag = argBox.Get("FulongServantSetGender", ref setGender) && argBox.Get("FulongServantSetTransgender", ref setTransgender);
			if (flag)
			{
				bool flag2 = setGender == 0 && !setTransgender;
				if (flag2)
				{
					desc = "<Language Key=LK_FulongServant_GenderFemale_NoTransgender/>";
				}
				bool flag3 = setGender == 1 && !setTransgender;
				if (flag3)
				{
					desc = "<Language Key=LK_FulongServant_GenderMale_NoTransgender/>";
				}
				bool flag4 = setGender == 0 && setTransgender;
				if (flag4)
				{
					desc = "<Language Key=LK_FulongServant_GenderFemale_Transgender/>";
				}
				bool flag5 = setGender == 1 && setTransgender;
				if (flag5)
				{
					desc = "<Language Key=LK_FulongServant_GenderMale_Transgender/>";
				}
				bool flag6 = !EventHelper.FulongServantGetBehaviorTypeDesc(argBox).Equals("") || !EventHelper.FulongServantGetLifeSKillTypeDesc(argBox).Equals("") || !EventHelper.FulongServantGetCombatSKillTypeDesc(argBox).Equals("") || !EventHelper.FulongServantGetMainAttributeTypeDesc(argBox).Equals("");
				if (flag6)
				{
					desc += "、";
				}
			}
			return desc;
		}

		// Token: 0x06001F46 RID: 8006 RVA: 0x001961AC File Offset: 0x001943AC
		public static string FulongServantGetBehaviorTypeDesc(EventArgBox argBox)
		{
			string desc = "";
			sbyte setBehaviorType = -1;
			bool flag = argBox.Get("FulongServantSetBehaviorType", ref setBehaviorType);
			if (flag)
			{
				DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(46, 1);
				defaultInterpolatedStringHandler.AppendLiteral("<Language Key=LK_FulongServant_BehaviorType_");
				defaultInterpolatedStringHandler.AppendFormatted<sbyte>(setBehaviorType);
				defaultInterpolatedStringHandler.AppendLiteral("/>");
				desc = defaultInterpolatedStringHandler.ToStringAndClear();
				bool flag2 = !EventHelper.FulongServantGetLifeSKillTypeDesc(argBox).Equals("") || !EventHelper.FulongServantGetCombatSKillTypeDesc(argBox).Equals("") || !EventHelper.FulongServantGetMainAttributeTypeDesc(argBox).Equals("");
				if (flag2)
				{
					desc += "、";
				}
			}
			return desc;
		}

		// Token: 0x06001F47 RID: 8007 RVA: 0x00196260 File Offset: 0x00194460
		public static string FulongServantGetLifeSKillTypeDesc(EventArgBox argBox)
		{
			string desc = "";
			int record = -1;
			bool flag = argBox.Get("FulongServantSetLifeSkillType", ref record);
			if (flag)
			{
				bool flag2 = (record & 1) != 0;
				if (flag2)
				{
					desc = "<Language Key=LK_FulongServant_LifeSkillType_Music/>";
				}
				bool flag3 = (record & 8192) != 0;
				if (flag3)
				{
					desc = "<Language Key=LK_FulongServant_LifeSkillType_Buddhism/>";
				}
				bool flag4 = (record & 256) != 0;
				if (flag4)
				{
					desc = "<Language Key=LK_FulongServant_LifeSkillType_Medicine/>";
				}
				bool flag5 = (record & 64) != 0;
				if (flag5)
				{
					desc = "<Language Key=LK_FulongServant_LifeSkillType_Forging/>";
				}
				bool flag6 = (record & 16) != 0;
				if (flag6)
				{
					desc = "<Language Key=LK_FulongServant_LifeSkillType_Math/>";
				}
				bool flag7 = !EventHelper.FulongServantGetCombatSKillTypeDesc(argBox).Equals("") || !EventHelper.FulongServantGetMainAttributeTypeDesc(argBox).Equals("");
				if (flag7)
				{
					desc += "、";
				}
			}
			return desc;
		}

		// Token: 0x06001F48 RID: 8008 RVA: 0x00196330 File Offset: 0x00194530
		public static string FulongServantGetCombatSKillTypeDesc(EventArgBox argBox)
		{
			string desc = "";
			int record = -1;
			bool flag = argBox.Get("FulongServantSetCombatSkillType", ref record);
			if (flag)
			{
				bool flag2 = (record & 1) != 0;
				if (flag2)
				{
					desc = "<Language Key=LK_FulongServant_CombatSkillType_Neigong/>";
				}
				bool flag3 = (record & 8) != 0;
				if (flag3)
				{
					desc = "<Language Key=LK_FulongServant_CombatSkillType_FistAndPalm/>";
				}
				bool flag4 = (record & 128) != 0;
				if (flag4)
				{
					desc = "<Language Key=LK_FulongServant_CombatSkillType_Sword/>";
				}
				bool flag5 = (record & 64) != 0;
				if (flag5)
				{
					desc = "<Language Key=LK_FulongServant_CombatSkillType_Throw/>";
				}
				bool flag6 = !EventHelper.FulongServantGetMainAttributeTypeDesc(argBox).Equals("");
				if (flag6)
				{
					desc += "、";
				}
			}
			return desc;
		}

		// Token: 0x06001F49 RID: 8009 RVA: 0x001963D0 File Offset: 0x001945D0
		public static string FulongServantGetMainAttributeTypeDesc(EventArgBox argBox)
		{
			string desc = "";
			sbyte setMainAttributeType = 0;
			bool flag = argBox.Get("FulongServantSetMainAttributeType", ref setMainAttributeType);
			if (flag)
			{
				DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(51, 1);
				defaultInterpolatedStringHandler.AppendLiteral("<Language Key=LK_FulongServant_MainAttributeType_");
				defaultInterpolatedStringHandler.AppendFormatted<sbyte>(setMainAttributeType);
				defaultInterpolatedStringHandler.AppendLiteral("/>");
				desc = defaultInterpolatedStringHandler.ToStringAndClear();
			}
			return desc;
		}

		// Token: 0x06001F4A RID: 8010 RVA: 0x00196438 File Offset: 0x00194638
		public static void SetGraveLevel(int targetGraveId, sbyte targetLevel)
		{
			bool flag = targetLevel < 0;
			if (flag)
			{
				EventHelper.RemoveGrave(targetGraveId);
			}
			else
			{
				bool flag2 = targetLevel > 3;
				if (!flag2)
				{
					Grave grave = DomainManager.Character.GetElement_Graves(targetGraveId);
					grave.SetLevel(targetLevel, EventHelper.Domain.MainThreadDataContext);
					short maxDurability = GlobalConfig.Instance.GraveDurabilities[(int)targetLevel];
					grave.SetDurability(maxDurability, EventHelper.Domain.MainThreadDataContext);
					MapBlockData blockData = DomainManager.Map.GetBlock(grave.GetLocation());
					DomainManager.Map.SetBlockData(EventHelper.Domain.MainThreadDataContext, blockData);
				}
			}
		}

		// Token: 0x06001F4B RID: 8011 RVA: 0x001964C8 File Offset: 0x001946C8
		public static sbyte GetGraveRobMeetSkeletonRate(int targetCharId)
		{
			DeadCharacter deadCharacter = DomainManager.Character.GetDeadCharacter(targetCharId);
			bool flag = deadCharacter == null;
			sbyte result;
			if (flag)
			{
				result = 0;
			}
			else
			{
				CharacterItem config = Config.Character.Instance.GetItem(deadCharacter.TemplateId);
				bool flag2 = config == null || !string.IsNullOrEmpty(config.FixedAvatarName);
				if (flag2)
				{
					result = 0;
				}
				else
				{
					sbyte consummateLevelOfTaiwu = DomainManager.Taiwu.GetTaiwu().GetConsummateLevel();
					sbyte consummateLevelOfTarget = deadCharacter.GetConsummateLevel();
					result = (sbyte)Math.Clamp((int)GlobalConfig.Instance.RobGraveEventWeight[2] + Math.Max((int)(consummateLevelOfTarget - consummateLevelOfTaiwu), 0) * 5, -128, 127);
				}
			}
			return result;
		}

		// Token: 0x06001F4C RID: 8012 RVA: 0x00196560 File Offset: 0x00194760
		public unsafe static bool ApplyRobResourceFromGrave(int selfCharId, int targetGraveId, out sbyte gainedResourceType, out int gainedResourceCount)
		{
			gainedResourceType = -1;
			gainedResourceCount = 0;
			Grave grave;
			bool flag = !DomainManager.Character.TryGetElement_Graves(targetGraveId, out grave);
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				GameData.Domains.Character.Character selfChar;
				bool flag2 = !DomainManager.Character.TryGetElement_Objects(selfCharId, out selfChar);
				if (flag2)
				{
					result = false;
				}
				else
				{
					ResourceInts graveResources = *grave.GetResources();
					List<sbyte> resourcePool = new List<sbyte>();
					for (sbyte i = 0; i < 8; i += 1)
					{
						bool flag3 = i == 7;
						if (!flag3)
						{
							bool flag4 = *(ref graveResources.Items.FixedElementField + (IntPtr)i * 4) > 0;
							if (flag4)
							{
								resourcePool.Add(i);
							}
						}
					}
					bool flag5 = resourcePool.Count == 0;
					if (flag5)
					{
						result = false;
					}
					else
					{
						sbyte targetResourceType = resourcePool.Sample<sbyte>();
						int oriAmount = *(ref graveResources.Items.FixedElementField + (IntPtr)targetResourceType * 4);
						int deltaAmount = oriAmount / 4;
						bool flag6 = deltaAmount == 0;
						if (flag6)
						{
							deltaAmount = 1;
						}
						EventHelper.ChangeRoleResource(selfChar, targetResourceType, deltaAmount, true);
						*(ref graveResources.Items.FixedElementField + (IntPtr)targetResourceType * 4) -= deltaAmount;
						grave.SetResources(ref graveResources, EventHelper.Domain.MainThreadDataContext);
						gainedResourceCount = deltaAmount;
						gainedResourceType = targetResourceType;
						LifeRecordCollection lifeRecordCollection = DomainManager.LifeRecord.GetLifeRecordCollection();
						int currDate = DomainManager.World.GetCurrDate();
						Location location = selfChar.GetLocation();
						lifeRecordCollection.AddRobResourceFromGraveSucceed(selfCharId, currDate, targetGraveId, location, targetResourceType, deltaAmount);
						SecretInformationCollection secretInformationCollection = DomainManager.Information.GetSecretInformationCollection();
						int secretInfoOffset = secretInformationCollection.AddRobGraveResource(selfCharId, targetGraveId, gainedResourceType);
						DomainManager.Information.AddSecretInformationMetaData(EventHelper.Domain.MainThreadDataContext, secretInfoOffset, true);
						result = true;
					}
				}
			}
			return result;
		}

		// Token: 0x06001F4D RID: 8013 RVA: 0x00196700 File Offset: 0x00194900
		public static bool ApplyRobItemFromGrave(int selfCharId, int targetGraveId, out ItemKey targetItemKey)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			targetItemKey = ItemKey.Invalid;
			Grave grave;
			bool flag = !DomainManager.Character.TryGetElement_Graves(targetGraveId, out grave);
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				GameData.Domains.Character.Character selfChar;
				bool flag2 = !DomainManager.Character.TryGetElement_Objects(selfCharId, out selfChar);
				if (flag2)
				{
					result = false;
				}
				else
				{
					targetItemKey = EventHelper.GetRandomItemFromGrave(context.Random, grave);
					bool flag3 = !targetItemKey.IsValid();
					if (flag3)
					{
						result = false;
					}
					else
					{
						int amount = grave.GetInventory().Items[targetItemKey];
						grave.RemoveInventoryItem(context, targetItemKey, amount, false);
						selfChar.AddInventoryItem(context, targetItemKey, amount, false);
						LifeRecordCollection lifeRecordCollection = DomainManager.LifeRecord.GetLifeRecordCollection();
						int currDate = DomainManager.World.GetCurrDate();
						Location location = selfChar.GetLocation();
						lifeRecordCollection.AddRobItemFromGraveSucceed(selfCharId, currDate, targetGraveId, location, targetItemKey.ItemType, targetItemKey.TemplateId);
						SecretInformationCollection secretInformationCollection = DomainManager.Information.GetSecretInformationCollection();
						int secretInfoOffset = secretInformationCollection.AddRobGraveItem(selfCharId, targetGraveId, (ulong)targetItemKey);
						DomainManager.Information.AddSecretInformationMetaData(context, secretInfoOffset, true);
						result = true;
					}
				}
			}
			return result;
		}

		// Token: 0x06001F4E RID: 8014 RVA: 0x00196834 File Offset: 0x00194A34
		private static ItemKey GetRandomItemFromGrave(IRandomSource random, Grave grave)
		{
			Inventory graveInventory = grave.GetInventory();
			bool flag = graveInventory.Items.Count <= 0;
			ItemKey result2;
			if (flag)
			{
				result2 = ItemKey.Invalid;
			}
			else
			{
				List<ItemKey> preferList = ObjectPool<List<ItemKey>>.Instance.Get();
				List<ItemKey> lowList = ObjectPool<List<ItemKey>>.Instance.Get();
				List<ItemKey> midList = ObjectPool<List<ItemKey>>.Instance.Get();
				List<ItemKey> highList = ObjectPool<List<ItemKey>>.Instance.Get();
				preferList.Clear();
				lowList.Clear();
				midList.Clear();
				highList.Clear();
				foreach (ItemKey itemKey in graveInventory.Items.Keys)
				{
					sbyte grade = ItemTemplateHelper.GetGrade(itemKey.ItemType, itemKey.TemplateId);
					bool flag2 = EatingItems.IsWugKing(itemKey);
					if (flag2)
					{
						preferList.Add(itemKey);
					}
					else
					{
						bool flag3 = grade <= 2;
						if (flag3)
						{
							lowList.Add(itemKey);
						}
						else
						{
							bool flag4 = grade <= 5;
							if (flag4)
							{
								midList.Add(itemKey);
							}
							else
							{
								highList.Add(itemKey);
							}
						}
					}
				}
				ItemKey result = ItemKey.Invalid;
				bool flag5 = preferList.Count > 0;
				if (flag5)
				{
					result = preferList.GetRandom(random);
				}
				else
				{
					bool flag6 = lowList.Count > 0;
					if (flag6)
					{
						result = lowList.GetRandom(random);
					}
					else
					{
						bool flag7 = midList.Count > 0 && EventHelper.CheckProbability(50);
						if (flag7)
						{
							result = midList.GetRandom(random);
						}
						else
						{
							bool flag8 = highList.Count > 0 && EventHelper.CheckProbability(50);
							if (flag8)
							{
								result = highList.GetRandom(random);
							}
						}
					}
				}
				ObjectPool<List<ItemKey>>.Instance.Return(preferList);
				ObjectPool<List<ItemKey>>.Instance.Return(lowList);
				ObjectPool<List<ItemKey>>.Instance.Return(midList);
				ObjectPool<List<ItemKey>>.Instance.Return(highList);
				result2 = result;
			}
			return result2;
		}

		// Token: 0x06001F4F RID: 8015 RVA: 0x00196A28 File Offset: 0x00194C28
		public static void DiscardSecretInformationInThreatenEvent(EventArgBox argBox)
		{
			int taiwuId = EventArgBox.TaiwuCharacterId;
			int metaDataId = -1;
			bool flag = !argBox.Get("metaDataId", ref metaDataId);
			if (!flag)
			{
				List<int> infoList = EventHelper.GetSecretInformationOfCharacter(taiwuId, false);
				bool flag2 = !infoList.Contains(metaDataId);
				if (!flag2)
				{
					EventHelper.DiscardSecretInformation(taiwuId, metaDataId);
				}
			}
		}

		// Token: 0x06001F50 RID: 8016 RVA: 0x00196A78 File Offset: 0x00194C78
		public static void ApplyBecomeSwornSiblingsByThreatening(int selfCharId, int threatenedCharId, int nominatedCharId)
		{
			GameData.Domains.Character.Character nominatedChar;
			GameData.Domains.Character.Character threatenedChar;
			bool flag = !DomainManager.Character.TryGetElement_Objects(nominatedCharId, out nominatedChar) || !DomainManager.Character.TryGetElement_Objects(threatenedCharId, out threatenedChar);
			if (!flag)
			{
				bool flag2 = !RelationTypeHelper.AllowAddingSwornBrotherOrSisterRelation(threatenedCharId, nominatedCharId);
				if (!flag2)
				{
					int taiwuId = EventArgBox.TaiwuCharacterId;
					Location location = threatenedChar.GetLocation();
					int currDate = DomainManager.World.GetCurrDate();
					LifeRecordCollection lifeRecordCollection = DomainManager.LifeRecord.GetLifeRecordCollection();
					DomainManager.Character.AddRelation(EventHelper.Domain.MainThreadDataContext, threatenedCharId, nominatedCharId, 512, currDate);
					lifeRecordCollection.AddBecomeSwornSiblingByThreatened(threatenedCharId, currDate, nominatedCharId, location, taiwuId);
					lifeRecordCollection.AddThreatenSucceed(selfCharId, currDate, threatenedCharId, location);
					SecretInformationCollection secretInformationCollection = DomainManager.Information.GetSecretInformationCollection();
					int secretInfoOffset = secretInformationCollection.AddBecomeSwornBrothersAndSisters(threatenedCharId, nominatedCharId);
					int secretInfoId = DomainManager.Information.AddSecretInformationMetaData(EventHelper.Domain.MainThreadDataContext, secretInfoOffset, true);
					bool flag3 = !EventHelper.GetSecretInformationOfCharacter(taiwuId, true).Contains(secretInfoId);
					if (flag3)
					{
						EventHelper.DistributeSecretInformationToCharacter(secretInfoId, taiwuId, -1);
					}
					EventHelper.ApplyDebtHappinessAndMoodChangeOfAddingRelationByThreaten(selfCharId, threatenedCharId, nominatedCharId);
				}
			}
		}

		// Token: 0x06001F51 RID: 8017 RVA: 0x00196B80 File Offset: 0x00194D80
		public static void ApplyBecomeHusbandOrWifeByThreatening(int selfCharId, int threatenedCharId, int nominatedCharId)
		{
			GameData.Domains.Character.Character nominatedChar;
			GameData.Domains.Character.Character threatenedChar;
			bool flag = !DomainManager.Character.TryGetElement_Objects(nominatedCharId, out nominatedChar) || !DomainManager.Character.TryGetElement_Objects(threatenedCharId, out threatenedChar);
			if (!flag)
			{
				bool flag2 = !RelationTypeHelper.AllowAddingHusbandOrWifeRelation(threatenedCharId, nominatedCharId);
				if (!flag2)
				{
					Location location = threatenedChar.GetLocation();
					int currDate = DomainManager.World.GetCurrDate();
					LifeRecordCollection lifeRecordCollection = DomainManager.LifeRecord.GetLifeRecordCollection();
					DomainManager.Character.AddHusbandOrWifeRelations(EventHelper.Domain.MainThreadDataContext, threatenedCharId, nominatedCharId, currDate);
					lifeRecordCollection.AddMarriedByThreatened(threatenedCharId, currDate, nominatedCharId, location, selfCharId);
					lifeRecordCollection.AddThreatenSucceed(selfCharId, currDate, threatenedCharId, location);
					SecretInformationCollection secretInformationCollection = DomainManager.Information.GetSecretInformationCollection();
					int secretInfoOffset = secretInformationCollection.AddBecomeHusbandAndWife(threatenedCharId, nominatedCharId);
					int secretInfoId = DomainManager.Information.AddSecretInformationMetaData(EventHelper.Domain.MainThreadDataContext, secretInfoOffset, true);
					bool flag3 = !EventHelper.GetSecretInformationOfCharacter(selfCharId, true).Contains(secretInfoId);
					if (flag3)
					{
						EventHelper.DistributeSecretInformationToCharacter(secretInfoId, selfCharId, -1);
					}
					EventHelper.ApplyDebtHappinessAndMoodChangeOfAddingRelationByThreaten(selfCharId, threatenedCharId, nominatedCharId);
				}
			}
		}

		// Token: 0x06001F52 RID: 8018 RVA: 0x00196C7C File Offset: 0x00194E7C
		public static void ApplyAddMentorByThreatening(int selfCharId, int threatenedCharId, int nominatedCharId)
		{
			GameData.Domains.Character.Character nominatedChar;
			GameData.Domains.Character.Character threatenedChar;
			bool flag = !DomainManager.Character.TryGetElement_Objects(nominatedCharId, out nominatedChar) || !DomainManager.Character.TryGetElement_Objects(threatenedCharId, out threatenedChar);
			if (!flag)
			{
				bool flag2 = !RelationTypeHelper.AllowAddingMentorRelation(threatenedCharId, nominatedCharId);
				if (!flag2)
				{
					int taiwuId = EventArgBox.TaiwuCharacterId;
					Location location = threatenedChar.GetLocation();
					int currDate = DomainManager.World.GetCurrDate();
					LifeRecordCollection lifeRecordCollection = DomainManager.LifeRecord.GetLifeRecordCollection();
					DomainManager.Character.AddRelation(EventHelper.Domain.MainThreadDataContext, threatenedCharId, nominatedCharId, 2048, currDate);
					lifeRecordCollection.AddAddMentorByThreatened(threatenedCharId, currDate, nominatedCharId, location, taiwuId);
					lifeRecordCollection.AddThreatenSucceed(selfCharId, currDate, threatenedCharId, location);
					EventHelper.ApplyDebtHappinessAndMoodChangeOfAddingRelationByThreaten(selfCharId, threatenedCharId, nominatedCharId);
				}
			}
		}

		// Token: 0x06001F53 RID: 8019 RVA: 0x00196D30 File Offset: 0x00194F30
		public static void ApplyAddMenteeByThreatening(int selfCharId, int threatenedCharId, int nominatedCharId)
		{
			GameData.Domains.Character.Character nominatedChar;
			GameData.Domains.Character.Character threatenedChar;
			bool flag = !DomainManager.Character.TryGetElement_Objects(nominatedCharId, out nominatedChar) || !DomainManager.Character.TryGetElement_Objects(threatenedCharId, out threatenedChar);
			if (!flag)
			{
				bool flag2 = !RelationTypeHelper.AllowAddingMenteeRelation(threatenedCharId, nominatedCharId);
				if (!flag2)
				{
					Location location = threatenedChar.GetLocation();
					int currDate = DomainManager.World.GetCurrDate();
					LifeRecordCollection lifeRecordCollection = DomainManager.LifeRecord.GetLifeRecordCollection();
					DomainManager.Character.AddRelation(EventHelper.Domain.MainThreadDataContext, threatenedCharId, nominatedCharId, 4096, currDate);
					EventHelper.ApplyDebtHappinessAndMoodChangeOfAddingRelationByThreaten(selfCharId, threatenedCharId, nominatedCharId);
				}
			}
		}

		// Token: 0x06001F54 RID: 8020 RVA: 0x00196DC0 File Offset: 0x00194FC0
		public static void ApplyAddAdoptiveChildByThreatening(int selfCharId, int threatenedCharId, int nominatedCharId)
		{
			GameData.Domains.Character.Character nominatedChar;
			GameData.Domains.Character.Character threatenedChar;
			bool flag = !DomainManager.Character.TryGetElement_Objects(nominatedCharId, out nominatedChar) || !DomainManager.Character.TryGetElement_Objects(threatenedCharId, out threatenedChar);
			if (!flag)
			{
				bool flag2 = !RelationTypeHelper.AllowAddingAdoptiveChildRelation(threatenedCharId, nominatedCharId);
				if (!flag2)
				{
					Location location = threatenedChar.GetLocation();
					int currDate = DomainManager.World.GetCurrDate();
					LifeRecordCollection lifeRecordCollection = DomainManager.LifeRecord.GetLifeRecordCollection();
					DomainManager.Character.AddAdoptiveParentRelations(EventHelper.Domain.MainThreadDataContext, nominatedCharId, threatenedCharId, currDate);
					int spouseId = DomainManager.Character.GetAliveSpouse(threatenedCharId);
					bool flag3 = spouseId >= 0;
					if (flag3)
					{
						DomainManager.Character.AddAdoptiveParentRelations(EventHelper.Domain.MainThreadDataContext, nominatedCharId, spouseId, currDate);
					}
					short relatedRecordId = (threatenedChar.GetGender() == 1) ? 459 : 460;
					bool flag4 = nominatedChar.GetGender() == 1;
					if (flag4)
					{
						lifeRecordCollection.AddGetAdoptedSonByThreatened(threatenedCharId, currDate, nominatedCharId, location, selfCharId, relatedRecordId);
					}
					else
					{
						lifeRecordCollection.AddGetAdoptedDaughterByThreatened(threatenedCharId, currDate, nominatedCharId, location, selfCharId, relatedRecordId);
					}
					lifeRecordCollection.AddThreatenSucceed(selfCharId, currDate, threatenedCharId, location);
					SecretInformationCollection secretInformationCollection = DomainManager.Information.GetSecretInformationCollection();
					int secretInfoOffset = secretInformationCollection.AddAdoptChild(threatenedCharId, nominatedCharId);
					int secretInfoId = DomainManager.Information.AddSecretInformationMetaData(EventHelper.Domain.MainThreadDataContext, secretInfoOffset, true);
					secretInfoOffset = secretInformationCollection.AddGetAdopted(nominatedCharId, threatenedCharId);
					int secretInfoIdExtra = DomainManager.Information.AddSecretInformationMetaData(EventHelper.Domain.MainThreadDataContext, secretInfoOffset, true);
					bool flag5 = !EventHelper.GetSecretInformationOfCharacter(selfCharId, true).Contains(secretInfoId);
					if (flag5)
					{
						EventHelper.DistributeSecretInformationToCharacter(secretInfoId, selfCharId, -1);
					}
					bool flag6 = !EventHelper.GetSecretInformationOfCharacter(selfCharId, true).Contains(secretInfoIdExtra);
					if (flag6)
					{
						EventHelper.DistributeSecretInformationToCharacter(secretInfoIdExtra, selfCharId, -1);
					}
					EventHelper.ApplyDebtHappinessAndMoodChangeOfAddingRelationByThreaten(selfCharId, threatenedCharId, nominatedCharId);
				}
			}
		}

		// Token: 0x06001F55 RID: 8021 RVA: 0x00196F6C File Offset: 0x0019516C
		public static void ApplyAddAdoptiveParentByThreatening(int selfCharId, int threatenedCharId, int nominatedCharId)
		{
			GameData.Domains.Character.Character nominatedChar;
			GameData.Domains.Character.Character threatenedChar;
			bool flag = !DomainManager.Character.TryGetElement_Objects(nominatedCharId, out nominatedChar) || !DomainManager.Character.TryGetElement_Objects(threatenedCharId, out threatenedChar);
			if (!flag)
			{
				bool flag2 = !RelationTypeHelper.AllowAddingAdoptiveParentRelation(threatenedCharId, nominatedCharId);
				if (!flag2)
				{
					Location location = threatenedChar.GetLocation();
					int currDate = DomainManager.World.GetCurrDate();
					LifeRecordCollection lifeRecordCollection = DomainManager.LifeRecord.GetLifeRecordCollection();
					DomainManager.Character.AddAdoptiveParentRelations(EventHelper.Domain.MainThreadDataContext, threatenedCharId, nominatedCharId, currDate);
					int spouseId = DomainManager.Character.GetAliveSpouse(nominatedCharId);
					bool flag3 = spouseId >= 0;
					if (flag3)
					{
						DomainManager.Character.AddAdoptiveParentRelations(EventHelper.Domain.MainThreadDataContext, threatenedCharId, spouseId, currDate);
					}
					short relatedRecordId = (threatenedChar.GetGender() == 1) ? 461 : 462;
					bool flag4 = nominatedChar.GetGender() == 1;
					if (flag4)
					{
						lifeRecordCollection.AddGetAdoptedFatherByThreatened(threatenedCharId, currDate, nominatedCharId, location, selfCharId, relatedRecordId);
					}
					else
					{
						lifeRecordCollection.AddGetAdoptedMotherByThreatened(threatenedCharId, currDate, nominatedCharId, location, selfCharId, relatedRecordId);
					}
					lifeRecordCollection.AddThreatenSucceed(selfCharId, currDate, threatenedCharId, location);
					SecretInformationCollection secretInformationCollection = DomainManager.Information.GetSecretInformationCollection();
					int secretInfoOffset = secretInformationCollection.AddGetAdopted(threatenedCharId, nominatedCharId);
					int secretInfoId = DomainManager.Information.AddSecretInformationMetaData(EventHelper.Domain.MainThreadDataContext, secretInfoOffset, true);
					secretInfoOffset = secretInformationCollection.AddAdoptChild(nominatedCharId, threatenedCharId);
					int secretInfoIdExtra = DomainManager.Information.AddSecretInformationMetaData(EventHelper.Domain.MainThreadDataContext, secretInfoOffset, true);
					bool flag5 = !EventHelper.GetSecretInformationOfCharacter(selfCharId, true).Contains(secretInfoId);
					if (flag5)
					{
						EventHelper.DistributeSecretInformationToCharacter(secretInfoId, selfCharId, -1);
					}
					bool flag6 = !EventHelper.GetSecretInformationOfCharacter(selfCharId, true).Contains(secretInfoIdExtra);
					if (flag6)
					{
						EventHelper.DistributeSecretInformationToCharacter(secretInfoIdExtra, selfCharId, -1);
					}
					EventHelper.ApplyDebtHappinessAndMoodChangeOfAddingRelationByThreaten(selfCharId, threatenedCharId, nominatedCharId);
				}
			}
		}

		// Token: 0x06001F56 RID: 8022 RVA: 0x00197118 File Offset: 0x00195318
		public static void ApplySeverSwornSiblingsByThreatening(int selfCharId, int threatenedCharId, int nominatedCharId)
		{
			GameData.Domains.Character.Character threatenedChar;
			GameData.Domains.Character.Character nominatedChar;
			bool flag = !DomainManager.Character.TryGetElement_Objects(threatenedCharId, out threatenedChar) || !DomainManager.Character.TryGetElement_Objects(nominatedCharId, out nominatedChar);
			if (!flag)
			{
				bool flag2 = !DomainManager.Character.HasRelation(threatenedCharId, nominatedCharId, 512);
				if (!flag2)
				{
					Location location = threatenedChar.GetLocation();
					int currDate = DomainManager.World.GetCurrDate();
					LifeRecordCollection lifeRecordCollection = DomainManager.LifeRecord.GetLifeRecordCollection();
					DomainManager.Character.ChangeRelationType(EventHelper.Domain.MainThreadDataContext, threatenedCharId, nominatedCharId, 512, 0);
					DomainManager.Character.ChangeRelationType(EventHelper.Domain.MainThreadDataContext, threatenedCharId, nominatedCharId, 512, 0);
					lifeRecordCollection.AddSeverSwornSiblingByThreatened(threatenedCharId, currDate, nominatedCharId, location, selfCharId);
					lifeRecordCollection.AddThreatenSucceed(selfCharId, currDate, threatenedCharId, location);
					SecretInformationCollection secretInformationCollection = DomainManager.Information.GetSecretInformationCollection();
					int secretInfoOffset = secretInformationCollection.AddSeverSwornBrothersAndSisters(threatenedCharId, nominatedCharId);
					int secretInfoId = DomainManager.Information.AddSecretInformationMetaData(EventHelper.Domain.MainThreadDataContext, secretInfoOffset, true);
					bool flag3 = !EventHelper.GetSecretInformationOfCharacter(selfCharId, true).Contains(secretInfoId);
					if (flag3)
					{
						EventHelper.DistributeSecretInformationToCharacter(secretInfoId, selfCharId, -1);
					}
					EventHelper.ApplyDebtHappinessAndMoodChangeOfEndingRelationByThreaten(selfCharId, threatenedCharId, nominatedCharId);
				}
			}
		}

		// Token: 0x06001F57 RID: 8023 RVA: 0x00197240 File Offset: 0x00195440
		public static void ApplyDivorceByThreatening(int selfCharId, int threatenedCharId, int nominatedCharId)
		{
			GameData.Domains.Character.Character threatenedChar;
			GameData.Domains.Character.Character nominatedChar;
			bool flag = !DomainManager.Character.TryGetElement_Objects(threatenedCharId, out threatenedChar) || !DomainManager.Character.TryGetElement_Objects(nominatedCharId, out nominatedChar);
			if (!flag)
			{
				bool flag2 = !DomainManager.Character.HasRelation(threatenedCharId, nominatedCharId, 1024) || !DomainManager.Character.HasRelation(nominatedCharId, threatenedCharId, 1024);
				if (!flag2)
				{
					EventHelper.EndRelation(threatenedCharId, nominatedCharId, 1024);
					EventHelper.EndRelation(nominatedCharId, threatenedCharId, 1024);
					DataContext context = EventHelper.Domain.MainThreadDataContext;
					OrganizationInfo threatenedCharOrgInfo = threatenedChar.GetOrganizationInfo();
					OrganizationInfo nominatedCharOrgInfo = nominatedChar.GetOrganizationInfo();
					bool principal = threatenedCharOrgInfo.Principal;
					if (principal)
					{
						DomainManager.Organization.TryDowngradeDeputySpouse(context, threatenedCharId, threatenedCharOrgInfo, nominatedCharId);
					}
					else
					{
						DomainManager.Organization.TryDowngradeDeputySpouse(context, nominatedCharId, nominatedCharOrgInfo, threatenedCharId);
					}
					Location location = threatenedChar.GetLocation();
					int currDate = DomainManager.World.GetCurrDate();
					LifeRecordCollection lifeRecordCollection = DomainManager.LifeRecord.GetLifeRecordCollection();
					lifeRecordCollection.AddDivorceByThreatened(threatenedCharId, currDate, nominatedCharId, location, selfCharId);
					lifeRecordCollection.AddThreatenSucceed(selfCharId, currDate, threatenedCharId, location);
					EventHelper.ApplyDebtHappinessAndMoodChangeOfEndingRelationByThreaten(selfCharId, threatenedCharId, nominatedCharId);
				}
			}
		}

		// Token: 0x06001F58 RID: 8024 RVA: 0x00197358 File Offset: 0x00195558
		public static void ApplySeverMentorByThreatening(int selfCharId, int threatenedCharId, int nominatedCharId)
		{
			GameData.Domains.Character.Character threatenedChar;
			GameData.Domains.Character.Character nominatedChar;
			bool flag = !DomainManager.Character.TryGetElement_Objects(threatenedCharId, out threatenedChar) || !DomainManager.Character.TryGetElement_Objects(nominatedCharId, out nominatedChar);
			if (!flag)
			{
				bool flag2 = !DomainManager.Character.HasRelation(threatenedCharId, nominatedCharId, 2048) || !DomainManager.Character.HasRelation(nominatedCharId, threatenedCharId, 4096);
				if (!flag2)
				{
					EventHelper.EndRelation(threatenedCharId, nominatedCharId, 2048);
					EventHelper.EndRelation(nominatedCharId, threatenedCharId, 4096);
					Location location = threatenedChar.GetLocation();
					int currDate = DomainManager.World.GetCurrDate();
					LifeRecordCollection lifeRecordCollection = DomainManager.LifeRecord.GetLifeRecordCollection();
					lifeRecordCollection.AddSeverMentorByThreatened(threatenedCharId, currDate, nominatedCharId, location, selfCharId);
					lifeRecordCollection.AddThreatenSucceed(selfCharId, currDate, threatenedCharId, location);
					EventHelper.ApplyDebtHappinessAndMoodChangeOfEndingRelationByThreaten(selfCharId, threatenedCharId, nominatedCharId);
				}
			}
		}

		// Token: 0x06001F59 RID: 8025 RVA: 0x00197420 File Offset: 0x00195620
		public static void ApplySeverMenteeByThreatening(int selfCharId, int threatenedCharId, int nominatedCharId)
		{
			GameData.Domains.Character.Character threatenedChar;
			GameData.Domains.Character.Character nominatedChar;
			bool flag = !DomainManager.Character.TryGetElement_Objects(threatenedCharId, out threatenedChar) || !DomainManager.Character.TryGetElement_Objects(nominatedCharId, out nominatedChar);
			if (!flag)
			{
				bool flag2 = !DomainManager.Character.HasRelation(threatenedCharId, nominatedCharId, 4096) || !DomainManager.Character.HasRelation(nominatedCharId, threatenedCharId, 2048);
				if (!flag2)
				{
					EventHelper.EndRelation(threatenedCharId, nominatedCharId, 4096);
					EventHelper.EndRelation(nominatedCharId, threatenedCharId, 2048);
					int taiwuId = EventArgBox.TaiwuCharacterId;
					Location location = threatenedChar.GetLocation();
					int currDate = DomainManager.World.GetCurrDate();
					LifeRecordCollection lifeRecordCollection = DomainManager.LifeRecord.GetLifeRecordCollection();
					EventHelper.ApplyDebtHappinessAndMoodChangeOfEndingRelationByThreaten(selfCharId, threatenedCharId, nominatedCharId);
				}
			}
		}

		// Token: 0x06001F5A RID: 8026 RVA: 0x001974D4 File Offset: 0x001956D4
		public static void ApplySeverAdoptiveParentByThreatening(int selfCharId, int threatenedCharId, int nominatedCharId)
		{
			GameData.Domains.Character.Character threatenedChar;
			GameData.Domains.Character.Character nominatedChar;
			bool flag = !DomainManager.Character.TryGetElement_Objects(threatenedCharId, out threatenedChar) || !DomainManager.Character.TryGetElement_Objects(nominatedCharId, out nominatedChar);
			if (!flag)
			{
				bool flag2 = !DomainManager.Character.HasRelation(threatenedCharId, nominatedCharId, 64) || !DomainManager.Character.HasRelation(nominatedCharId, threatenedCharId, 128);
				if (!flag2)
				{
					EventHelper.EndRelation(threatenedCharId, nominatedCharId, 64);
					EventHelper.EndRelation(nominatedCharId, threatenedCharId, 128);
					Location location = threatenedChar.GetLocation();
					int currDate = DomainManager.World.GetCurrDate();
					LifeRecordCollection lifeRecordCollection = DomainManager.LifeRecord.GetLifeRecordCollection();
					bool flag3 = nominatedChar.GetGender() == 1;
					if (flag3)
					{
						lifeRecordCollection.AddSeverAdoptiveFatherByThreatened(threatenedCharId, currDate, nominatedCharId, location, selfCharId);
					}
					else
					{
						lifeRecordCollection.AddSeverAdoptiveMotherByThreatened(threatenedCharId, currDate, nominatedCharId, location, selfCharId);
					}
					lifeRecordCollection.AddThreatenSucceed(selfCharId, currDate, threatenedCharId, location);
					EventHelper.ApplyDebtHappinessAndMoodChangeOfEndingRelationByThreaten(selfCharId, threatenedCharId, nominatedCharId);
				}
			}
		}

		// Token: 0x06001F5B RID: 8027 RVA: 0x001975B4 File Offset: 0x001957B4
		public static void ApplySeverAdoptiveChildByThreatening(int selfCharId, int threatenedCharId, int nominatedCharId)
		{
			GameData.Domains.Character.Character threatenedChar;
			GameData.Domains.Character.Character nominatedChar;
			bool flag = !DomainManager.Character.TryGetElement_Objects(threatenedCharId, out threatenedChar) || !DomainManager.Character.TryGetElement_Objects(nominatedCharId, out nominatedChar);
			if (!flag)
			{
				bool flag2 = !DomainManager.Character.HasRelation(threatenedCharId, nominatedCharId, 128) || !DomainManager.Character.HasRelation(nominatedCharId, threatenedCharId, 64);
				if (!flag2)
				{
					EventHelper.EndRelation(threatenedCharId, nominatedCharId, 128);
					EventHelper.EndRelation(nominatedCharId, threatenedCharId, 64);
					Location location = threatenedChar.GetLocation();
					int currDate = DomainManager.World.GetCurrDate();
					LifeRecordCollection lifeRecordCollection = DomainManager.LifeRecord.GetLifeRecordCollection();
					bool flag3 = nominatedChar.GetGender() == 1;
					if (flag3)
					{
						lifeRecordCollection.AddSeverAdoptiveSonByThreatened(threatenedCharId, currDate, nominatedCharId, location, selfCharId);
					}
					else
					{
						lifeRecordCollection.AddSeverAdoptiveDaughterByThreatened(threatenedCharId, currDate, nominatedCharId, location, selfCharId);
					}
					lifeRecordCollection.AddThreatenSucceed(selfCharId, currDate, threatenedCharId, location);
					EventHelper.ApplyDebtHappinessAndMoodChangeOfEndingRelationByThreaten(selfCharId, threatenedCharId, nominatedCharId);
				}
			}
		}

		// Token: 0x06001F5C RID: 8028 RVA: 0x00197694 File Offset: 0x00195894
		public static void ApplyTransferItemByThreaten(int nominatedCharId, int threatenedCharId, ItemKey itemKey)
		{
			GameData.Domains.Character.Character threatenedChar;
			GameData.Domains.Character.Character nominatedChar;
			bool flag = !DomainManager.Character.TryGetElement_Objects(threatenedCharId, out threatenedChar) || !DomainManager.Character.TryGetElement_Objects(nominatedCharId, out nominatedChar);
			if (!flag)
			{
				EventHelper.TransferInventoryItemWithDebt(threatenedCharId, nominatedCharId, itemKey, 1, true);
				EventHelper.ChangeCharacterHappinessByItemChange(itemKey, threatenedCharId, false);
				Location location = threatenedChar.GetLocation();
				int currDate = DomainManager.World.GetCurrDate();
				LifeRecordCollection lifeRecordCollection = DomainManager.LifeRecord.GetLifeRecordCollection();
				lifeRecordCollection.AddScamItemSucceed(nominatedCharId, currDate, threatenedCharId, location, itemKey.ItemType, itemKey.TemplateId);
				lifeRecordCollection.AddThreatenSucceed(nominatedCharId, currDate, threatenedCharId, location);
				int metaDataId = EventHelper.CreateSecretInformationMetaData(EventHelper.GetSecretInformationCollection().AddScamItem(nominatedCharId, threatenedCharId, (ulong)itemKey), true);
			}
		}

		// Token: 0x06001F5D RID: 8029 RVA: 0x0019773C File Offset: 0x0019593C
		public static void ApplyTransferResourceByThreaten(int nominatedCharId, int threatenedCharId, sbyte resourceType, int amount)
		{
			GameData.Domains.Character.Character threatenedChar;
			GameData.Domains.Character.Character nominatedChar;
			bool flag = !DomainManager.Character.TryGetElement_Objects(threatenedCharId, out threatenedChar) || !DomainManager.Character.TryGetElement_Objects(nominatedCharId, out nominatedChar);
			if (!flag)
			{
				EventHelper.TransferResourcesWithDebt(threatenedCharId, nominatedCharId, resourceType, amount, true);
				short moodDelta = EventHelper.GetResourceHappinessChange(resourceType, amount);
				EventHelper.ChangeRoleHappiness(threatenedChar, (int)moodDelta);
				Location location = threatenedChar.GetLocation();
				int currDate = DomainManager.World.GetCurrDate();
				LifeRecordCollection lifeRecordCollection = DomainManager.LifeRecord.GetLifeRecordCollection();
				lifeRecordCollection.AddScamResourceSucceed(nominatedCharId, currDate, threatenedCharId, location, resourceType, amount);
				lifeRecordCollection.AddThreatenSucceed(nominatedCharId, currDate, threatenedCharId, location);
				int metaDataId = EventHelper.CreateSecretInformationMetaData(EventHelper.GetSecretInformationCollection().AddScamResource(nominatedCharId, threatenedCharId, resourceType), true);
			}
		}

		// Token: 0x06001F5E RID: 8030 RVA: 0x001977E0 File Offset: 0x001959E0
		public static void SetSectCharApprovedTaiwuWithDebt(int nominatedCharId, int threatenedCharId)
		{
			GameData.Domains.Character.Character threatenedChar;
			GameData.Domains.Character.Character nominatedChar;
			bool flag = !DomainManager.Character.TryGetElement_Objects(threatenedCharId, out threatenedChar) || !DomainManager.Character.TryGetElement_Objects(nominatedCharId, out nominatedChar);
			if (!flag)
			{
				bool flag2 = !EventHelper.IsInAnySect(threatenedCharId) || EventHelper.IsSectCharApprovedTaiwu(threatenedCharId);
				if (!flag2)
				{
					EventHelper.SetSectCharApprovedTaiwu(threatenedCharId, true);
					short influence = EventHelper.GetCharacterInfluencePower(threatenedCharId);
					short favorDelta = influence * 50;
					EventHelper.ChangeFavorabilityOptional(threatenedChar, nominatedChar, favorDelta, 3);
					int moodDelta = (int)(threatenedChar.GetOrganizationInfo().Grade + 1);
					EventHelper.ChangeRoleHappiness(threatenedChar, -moodDelta);
					int debt = (int)(favorDelta * 10);
					bool flag3 = debt > 0;
					if (flag3)
					{
						EventHelper.DirectlyAddDebt(threatenedCharId, debt, false);
					}
					Location location = threatenedChar.GetLocation();
					int currDate = DomainManager.World.GetCurrDate();
					LifeRecordCollection lifeRecordCollection = DomainManager.LifeRecord.GetLifeRecordCollection();
					lifeRecordCollection.AddApproveTaiwuByThreatened(threatenedCharId, currDate, nominatedCharId, location);
					lifeRecordCollection.AddThreatenSucceed(nominatedCharId, currDate, threatenedCharId, location);
				}
			}
		}

		// Token: 0x06001F5F RID: 8031 RVA: 0x001978C8 File Offset: 0x00195AC8
		public static void ReduceDebtByThreaten(int selfCharId, int threatenedCharId, int metaDataId)
		{
			GameData.Domains.Character.Character threatenedChar;
			GameData.Domains.Character.Character selfChar;
			bool flag = !DomainManager.Character.TryGetElement_Objects(threatenedCharId, out threatenedChar) || !DomainManager.Character.TryGetElement_Objects(selfCharId, out selfChar);
			if (!flag)
			{
				SecretInformationProcessor processor = DomainManager.Information.SecretInformationProcessorPool.Get();
				bool flag2 = !processor.Initialize(metaDataId);
				if (flag2)
				{
					throw new Exception("Can not Initialize Processor of (metaDataId)!)");
				}
				EventHelper.ApplyWriteOffDebtsByThreaten(threatenedCharId, metaDataId);
				Location location = threatenedChar.GetLocation();
				int currDate = DomainManager.World.GetCurrDate();
				LifeRecordCollection lifeRecordCollection = DomainManager.LifeRecord.GetLifeRecordCollection();
				lifeRecordCollection.AddReduceDebtByThreatened(threatenedCharId, currDate, selfCharId, location);
				lifeRecordCollection.AddThreatenSucceed(selfCharId, currDate, threatenedCharId, location);
			}
		}

		// Token: 0x06001F60 RID: 8032 RVA: 0x0019796C File Offset: 0x00195B6C
		public static void ApplyDebtHappinessAndMoodChangeOfAddingRelationByThreaten(int selfCharId, int threatenedCharId, int nominatedCharId)
		{
			GameData.Domains.Character.Character threatenedChar;
			GameData.Domains.Character.Character nominatedChar;
			GameData.Domains.Character.Character selfChar;
			bool flag = !DomainManager.Character.TryGetElement_Objects(threatenedCharId, out threatenedChar) || !DomainManager.Character.TryGetElement_Objects(nominatedCharId, out nominatedChar) || !DomainManager.Character.TryGetElement_Objects(selfCharId, out selfChar);
			if (!flag)
			{
				short favor = DomainManager.Character.GetFavorability(threatenedCharId, nominatedCharId);
				sbyte favorType = FavorabilityType.GetFavorabilityType(favor);
				short favorDelta = (short)(9000 - (int)Math.Max(favorType, 0) * 1000);
				EventHelper.ChangeFavorabilityOptional(threatenedChar, selfChar, -favorDelta, 3);
				int debt = (int)(favorDelta * 10);
				bool flag2 = debt > 0;
				if (flag2)
				{
					EventHelper.DirectlyAddDebt(threatenedCharId, debt, false);
				}
				int moodDelta = (int)(9 - Math.Max(favorType, 0));
				EventHelper.ChangeRoleHappiness(threatenedChar, moodDelta);
			}
		}

		// Token: 0x06001F61 RID: 8033 RVA: 0x00197A20 File Offset: 0x00195C20
		public static void ApplyDebtHappinessAndMoodChangeOfEndingRelationByThreaten(int selfCharId, int threatenedCharId, int nominatedCharId)
		{
			GameData.Domains.Character.Character threatenedChar;
			GameData.Domains.Character.Character nominatedChar;
			GameData.Domains.Character.Character selfChar;
			bool flag = !DomainManager.Character.TryGetElement_Objects(threatenedCharId, out threatenedChar) || !DomainManager.Character.TryGetElement_Objects(nominatedCharId, out nominatedChar) || !DomainManager.Character.TryGetElement_Objects(selfCharId, out selfChar);
			if (!flag)
			{
				short favor = DomainManager.Character.GetFavorability(threatenedCharId, nominatedCharId);
				sbyte favorType = FavorabilityType.GetFavorabilityType(favor);
				short favorDelta = (short)(3000 + (int)Math.Max(favorType, 0) * 1500);
				EventHelper.ChangeFavorabilityOptional(threatenedChar, selfChar, -favorDelta, 3);
				int debt = (int)(favorDelta * 10);
				bool flag2 = debt > 0;
				if (flag2)
				{
					EventHelper.DirectlyAddDebt(threatenedCharId, debt, false);
				}
				int moodDelta = (int)(3 + Math.Max(favorType, 0));
				EventHelper.ChangeRoleHappiness(threatenedChar, -moodDelta);
			}
		}

		// Token: 0x06001F62 RID: 8034 RVA: 0x00197AD4 File Offset: 0x00195CD4
		public static bool AllowAddingRelationByThreadNeedle(EventArgBox argBox, ushort relationType)
		{
			GameData.Domains.Character.Character character = argBox.GetCharacter("CharacterId");
			int charId = character.GetId();
			GameData.Domains.Character.Character relatedChar = argBox.GetCharacter("SelectedCharIdForThreadNeedleAdding");
			int relatedCharId = relatedChar.GetId();
			return RelationTypeHelper.AllowAddingRelation(charId, relatedCharId, relationType);
		}

		// Token: 0x06001F63 RID: 8035 RVA: 0x00197B18 File Offset: 0x00195D18
		public static bool AllowEndingRelationByThreadNeedle(EventArgBox argBox, ushort relationType)
		{
			GameData.Domains.Character.Character character = argBox.GetCharacter("CharacterId");
			int charId = character.GetId();
			GameData.Domains.Character.Character relatedChar = argBox.GetCharacter("SelectedCharIdForThreadNeedleEnding");
			int relatedCharId = relatedChar.GetId();
			if (relationType <= 1024)
			{
				if (relationType <= 128)
				{
					if (relationType != 64 && relationType != 128)
					{
						goto IL_CD;
					}
					goto IL_C1;
				}
				else if (relationType != 512)
				{
					if (relationType != 1024)
					{
						goto IL_CD;
					}
					goto IL_C1;
				}
			}
			else if (relationType <= 4096)
			{
				if (relationType != 2048 && relationType != 4096)
				{
					goto IL_CD;
				}
				goto IL_C1;
			}
			else if (relationType != 8192 && relationType != 16384)
			{
				if (relationType != 32768)
				{
					goto IL_CD;
				}
				return EventHelper.CanEndRelation(relatedCharId, charId, relationType);
			}
			return EventHelper.CanEndRelation(charId, relatedCharId, relationType);
			IL_C1:
			return EventHelper.CheckHasRelationship(character, relatedChar, relationType);
			IL_CD:
			DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(47, 1);
			defaultInterpolatedStringHandler.AppendLiteral("Unsupported relation type for ending in event: ");
			defaultInterpolatedStringHandler.AppendFormatted<ushort>(relationType);
			throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
		}

		// Token: 0x06001F64 RID: 8036 RVA: 0x00197C24 File Offset: 0x00195E24
		public static void ApplyStartRelationByThreadNeedle(int charIdA, int charIdB, ushort relationType, bool succeed, bool isBothWayRelation = true)
		{
			GameData.Domains.Character.Character characterA;
			GameData.Domains.Character.Character characterB;
			bool flag = !DomainManager.Character.TryGetElement_Objects(charIdA, out characterA) || !DomainManager.Character.TryGetElement_Objects(charIdB, out characterB);
			if (!flag)
			{
				if (relationType <= 1024)
				{
					if (relationType <= 128)
					{
						if (relationType == 64)
						{
							if (succeed)
							{
								EventHelper.ApplyRelationGetAdopted(characterA, characterB);
							}
							return;
						}
						if (relationType == 128)
						{
							if (succeed)
							{
								EventHelper.ApplyRelationAdoptChild(characterA, characterB);
							}
							return;
						}
					}
					else
					{
						if (relationType == 512)
						{
							if (succeed)
							{
								EventHelper.ApplyRelationBecomeSwornBrotherOrSister(characterA, characterB);
							}
							return;
						}
						if (relationType == 1024)
						{
							EventHelper.ApplyRelationBecomeHusbandOrWife(characterA, characterB, succeed);
							return;
						}
					}
				}
				else if (relationType <= 8192)
				{
					if (relationType == 2048)
					{
						if (succeed)
						{
							EventHelper.ApplyRelationBecomeMentor(characterA, characterB);
						}
						return;
					}
					if (relationType == 8192)
					{
						if (succeed)
						{
							EventHelper.ApplyRelationBecomeFriend(characterA, characterB);
						}
						return;
					}
				}
				else
				{
					if (relationType == 16384)
					{
						if (isBothWayRelation)
						{
							EventHelper.AddRelation(charIdA, charIdB, 16384);
							EventHelper.ApplyRelationBecomeBoyOrGirlFriend(characterA, characterB, succeed);
						}
						else
						{
							EventHelper.ApplyRelationBecomeAdore(characterA, characterB, succeed);
						}
						return;
					}
					if (relationType == 32768)
					{
						EventHelper.ApplyRelationBecomeEnemy(characterA, characterB);
						if (succeed)
						{
							EventHelper.ApplyRelationBecomeEnemy(characterB, characterA);
						}
						return;
					}
				}
				DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(29, 1);
				defaultInterpolatedStringHandler.AppendLiteral("Wrong Adding Relation Quest: ");
				defaultInterpolatedStringHandler.AppendFormatted<ushort>(relationType);
				throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
			}
		}

		// Token: 0x06001F65 RID: 8037 RVA: 0x00197DC4 File Offset: 0x00195FC4
		public static void ApplyEndRelationByThreadNeedle(int charIdA, int charIdB, ushort relationType, bool succeed, bool isBothWayRelation = true)
		{
			GameData.Domains.Character.Character characterA;
			GameData.Domains.Character.Character characterB;
			bool flag = !DomainManager.Character.TryGetElement_Objects(charIdA, out characterA) || !DomainManager.Character.TryGetElement_Objects(charIdB, out characterB);
			if (!flag)
			{
				if (relationType <= 1024)
				{
					if (relationType <= 128)
					{
						if (relationType == 64)
						{
							if (succeed)
							{
								EventHelper.ApplyRelationSeverAdoptiveParent(characterA, characterB);
							}
							return;
						}
						if (relationType == 128)
						{
							if (succeed)
							{
								EventHelper.ApplyRelationSeverAdoptedChild(characterA, characterB);
							}
							return;
						}
					}
					else
					{
						if (relationType == 512)
						{
							if (succeed)
							{
								EventHelper.ApplyRelationSeverSwornBrotherOrSister(characterA, characterB);
							}
							return;
						}
						if (relationType == 1024)
						{
							if (succeed)
							{
								EventHelper.ApplyRelationSeverHusbandOrWife(characterA, characterB);
							}
							return;
						}
					}
				}
				else if (relationType <= 8192)
				{
					if (relationType == 2048)
					{
						if (succeed)
						{
							EventHelper.ApplyRelationSeverMentor(characterA, characterB);
						}
						return;
					}
					if (relationType == 8192)
					{
						if (succeed)
						{
							EventHelper.ApplyRelationSeverFriend(characterA, characterB);
						}
						return;
					}
				}
				else
				{
					if (relationType == 16384)
					{
						if (isBothWayRelation)
						{
							EventHelper.ApplyRelationBreakupWithBoyOrGirlFriend(characterA, characterB, !succeed);
						}
						else
						{
							sbyte behaviorType = characterA.GetBehaviorType();
							bool selfIsTaiwuPeople = DomainManager.Character.IsTaiwuPeople(charIdA);
							bool targetIsTaiwuPeople = DomainManager.Character.IsTaiwuPeople(charIdB);
							GameData.Domains.Character.Character.ApplySeverAdore(EventHelper.Domain.MainThreadDataContext, characterA, characterB, behaviorType, selfIsTaiwuPeople);
						}
						return;
					}
					if (relationType == 32768)
					{
						EventHelper.ApplyRelationSeverEnemy(characterA, characterB);
						if (succeed)
						{
							EventHelper.ApplyRelationSeverEnemy(characterB, characterA);
						}
						return;
					}
				}
				DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(29, 1);
				defaultInterpolatedStringHandler.AppendLiteral("Wrong Ending Relation Quest: ");
				defaultInterpolatedStringHandler.AppendFormatted<ushort>(relationType);
				throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
			}
		}

		// Token: 0x06001F66 RID: 8038 RVA: 0x00197F90 File Offset: 0x00196190
		public static void RemoveCannotSwornCharacters(int charId, HashSet<int> charIdCore)
		{
			charIdCore.RemoveWhere((int charIdElem) => charId == charIdElem || !EventHelper.IsIntelligentCharacter(charIdElem) || !RelationTypeHelper.AllowAddingRelation(charId, charIdElem, 512));
		}

		// Token: 0x06001F67 RID: 8039 RVA: 0x00197FC0 File Offset: 0x001961C0
		public static void RemoveCannotMarriageCharacters(int charId, HashSet<int> charIdCore)
		{
			charIdCore.RemoveWhere(delegate(int charIdElem)
			{
				GameData.Domains.Character.Character elementCharacter = EventHelper.GetCharacterById(charIdElem);
				return charId == charIdElem || !EventHelper.IsIntelligentCharacter(charIdElem) || elementCharacter.GetAgeGroup() != 2 || !RelationTypeHelper.AllowAddingRelation(charId, charIdElem, 1024);
			});
		}

		// Token: 0x06001F68 RID: 8040 RVA: 0x00197FF0 File Offset: 0x001961F0
		public static void RemoveCannotAcknowledgeCharacters(int charId, HashSet<int> charIdCore)
		{
			GameData.Domains.Character.Character character = EventHelper.GetCharacterById(charId);
			charIdCore.RemoveWhere(delegate(int charIdElem)
			{
				GameData.Domains.Character.Character elementCharacter = EventHelper.GetCharacterById(charIdElem);
				return charId == charIdElem || !EventHelper.IsIntelligentCharacter(charIdElem) || EventHelper.CheckHasRelationship(character, elementCharacter, 2048) || EventHelper.CheckHasRelationship(elementCharacter, character, 2048);
			});
		}

		// Token: 0x06001F69 RID: 8041 RVA: 0x00198030 File Offset: 0x00196230
		public static void RemoveCannotAdoptiveChildCharacters(int charId, HashSet<int> charIdCore)
		{
			charIdCore.RemoveWhere((int charIdElem) => charId == charIdElem || !EventHelper.IsIntelligentCharacter(charIdElem) || !RelationTypeHelper.AllowAddingRelation(charIdElem, charId, 64));
		}

		// Token: 0x06001F6A RID: 8042 RVA: 0x00198060 File Offset: 0x00196260
		public static void RemoveCannotAdoptiveParentCharacters(int charId, HashSet<int> charIdCore)
		{
			charIdCore.RemoveWhere((int charIdElem) => charId == charIdElem || !EventHelper.IsIntelligentCharacter(charIdElem) || !RelationTypeHelper.AllowAddingRelation(charId, charIdElem, 64));
		}

		// Token: 0x06001F6B RID: 8043 RVA: 0x00198090 File Offset: 0x00196290
		public static void RemoveCannotSplitAdoptiveCharacters(int charId, HashSet<int> charIdCore)
		{
			GameData.Domains.Character.Character character = EventHelper.GetCharacterById(charId);
			charIdCore.RemoveWhere(delegate(int charIdElem)
			{
				GameData.Domains.Character.Character elementCharacter = EventHelper.GetCharacterById(charIdElem);
				bool flag = elementCharacter == null;
				return flag || charId == charIdElem || !EventHelper.IsIntelligentCharacter(charIdElem) || !EventHelper.CheckHasRelationship(character, elementCharacter, 512);
			});
		}

		// Token: 0x06001F6C RID: 8044 RVA: 0x001980D0 File Offset: 0x001962D0
		public static void RemoveCannotDivorceCharacters(int charId, HashSet<int> charIdCore)
		{
			GameData.Domains.Character.Character character = EventHelper.GetCharacterById(charId);
			charIdCore.RemoveWhere(delegate(int charIdElem)
			{
				GameData.Domains.Character.Character elementCharacter = EventHelper.GetCharacterById(charIdElem);
				return charId == charIdElem || !EventHelper.IsIntelligentCharacter(charIdElem) || !EventHelper.CheckHasRelationship(character, elementCharacter, 1024);
			});
		}

		// Token: 0x06001F6D RID: 8045 RVA: 0x00198110 File Offset: 0x00196310
		public static void RemoveCannotSplitAdoptiveParentCharacters(int charId, HashSet<int> charIdCore)
		{
			GameData.Domains.Character.Character character = EventHelper.GetCharacterById(charId);
			charIdCore.RemoveWhere(delegate(int charIdElem)
			{
				GameData.Domains.Character.Character elementCharacter = EventHelper.GetCharacterById(charIdElem);
				return charId == charIdElem || !EventHelper.IsIntelligentCharacter(charIdElem) || !EventHelper.CheckHasRelationship(character, elementCharacter, 64);
			});
		}

		// Token: 0x06001F6E RID: 8046 RVA: 0x00198150 File Offset: 0x00196350
		public static void RemoveCannotSplitAdoptiveChildCharacters(int charId, HashSet<int> charIdCore)
		{
			GameData.Domains.Character.Character character = EventHelper.GetCharacterById(charId);
			charIdCore.RemoveWhere(delegate(int charIdElem)
			{
				GameData.Domains.Character.Character elementCharacter = EventHelper.GetCharacterById(charIdElem);
				return charId == charIdElem || !EventHelper.IsIntelligentCharacter(charIdElem) || !EventHelper.CheckHasRelationship(character, elementCharacter, 128);
			});
		}

		// Token: 0x06001F6F RID: 8047 RVA: 0x00198190 File Offset: 0x00196390
		public static List<int> PrepareCombatEnemy(int charId, short combatConfigId, bool noGuard = false)
		{
			List<int> enemyTeam = new List<int>();
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			GameData.Domains.Character.Character character = DomainManager.Character.GetElement_Objects(charId);
			bool flag = DomainManager.TaiwuEvent.GetGlobalEventArgumentBox().GetBool("IsGuardCombat") && character.IsTreasuryGuard();
			if (flag)
			{
				enemyTeam.Add(charId);
				OrganizationInfo orgInfo = character.GetOrganizationInfo();
				short num;
				if (orgInfo.SettlementId >= 0)
				{
					Sect sect = DomainManager.Organization.GetSettlement(orgInfo.SettlementId) as Sect;
					if (sect != null)
					{
						num = GameData.Domains.Character.Character.GetSectRandomEnemyTemplateIdByGrade(sect.GetOrgTemplateId(), orgInfo.Grade);
						goto IL_9C;
					}
				}
				num = CivilianSettlement.GetTreasuryGuardTemplateId(orgInfo.Grade);
				IL_9C:
				short templateId = num;
				int i = 3;
				while (i-- > 0)
				{
					enemyTeam.Add(EventHelper.CreateNonIntelligentCharacter(templateId));
				}
			}
			else
			{
				bool flag2 = character.GetCreatingType() == 1;
				if (flag2)
				{
					CombatConfigItem config = CombatConfig.Instance[combatConfigId];
					CombatType combatType = (CombatType)config.CombatType;
					bool flag3 = DomainManager.Taiwu.IsInGroup(charId) && config != null && config.IsGroupMemberLeave;
					if (flag3)
					{
						DomainManager.Taiwu.LeaveGroup(EventHelper.Domain.MainThreadDataContext, charId, true, true, false);
					}
					if (noGuard)
					{
						enemyTeam.Add(charId);
					}
					else
					{
						DomainManager.Character.GetTaiwuCombatEnemyTeam(context, character, combatType, enemyTeam);
					}
				}
				else
				{
					enemyTeam.Add(character.GetId());
					CharacterItem config2 = Config.Character.Instance[character.GetTemplateId()];
					bool flag4 = config2.MinionGroupId >= 0;
					if (flag4)
					{
						MinionGroupItem minionGroup = MinionGroup.Instance[config2.MinionGroupId];
						foreach (short templateId2 in minionGroup.Minions)
						{
							enemyTeam.Add(EventHelper.CreateNonIntelligentCharacter(templateId2));
						}
					}
				}
			}
			return enemyTeam;
		}

		// Token: 0x06001F70 RID: 8048 RVA: 0x00198390 File Offset: 0x00196590
		public static void CharacterLoseGuard(int charId, int combatType)
		{
			bool flag = combatType - 1 <= 1;
			bool flag2 = flag;
			if (flag2)
			{
				DomainManager.Character.LoseGuard(EventHelper.Domain.MainThreadDataContext, charId, null);
			}
		}

		// Token: 0x06001F71 RID: 8049 RVA: 0x001983C8 File Offset: 0x001965C8
		public static void StartCombat(int charId, short combatConfigId, string combatCompleteEvent, EventArgBox argBox, bool noGuard = false)
		{
			List<int> enemyTeam = EventHelper.PrepareCombatEnemy(charId, combatConfigId, noGuard);
			EventHelper.StartCombat(enemyTeam, combatConfigId, combatCompleteEvent, argBox);
		}

		// Token: 0x06001F72 RID: 8050 RVA: 0x001983EC File Offset: 0x001965EC
		public static void StartCombat(List<int> enemyTeam, short combatConfigId, string combatCompleteEvent, EventArgBox argBox)
		{
			bool flag = enemyTeam == null || enemyTeam.Count <= 0;
			if (flag)
			{
				throw new Exception("no available enemyTeam passed !");
			}
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			if (argBox != null)
			{
				argBox.Set("ProtectedByWeiQiCharacter", DomainManager.Character.GetAvoidDeathCharId());
			}
			EventHelper.Domain.SetListenerWithActionName(combatCompleteEvent, argBox, "CombatOver");
			DomainManager.TaiwuEvent.RecordCharacterEnterCombat();
			DomainManager.Combat.CombatEntry(context, enemyTeam, combatConfigId);
		}

		// Token: 0x06001F73 RID: 8051 RVA: 0x0019846C File Offset: 0x0019666C
		public static int CreateNonIntelligentCharacter(short templateId)
		{
			return DomainManager.Character.CreateNonIntelligentCharacter(EventHelper.Domain.MainThreadDataContext, templateId);
		}

		// Token: 0x06001F74 RID: 8052 RVA: 0x00198494 File Offset: 0x00196694
		public static int GetDefeatMarksCountOutOfCombat(int charId)
		{
			return CombatDomain.GetDefeatMarksCountOutOfCombat(DomainManager.Character.GetElement_Objects(charId));
		}

		// Token: 0x06001F75 RID: 8053 RVA: 0x001984B8 File Offset: 0x001966B8
		public static bool IsCharacterDirectFallenInCombat(int charId, CombatType combatType)
		{
			return DomainManager.Character.GetElement_Objects(charId).ReachFallenInCombat(combatType);
		}

		// Token: 0x06001F76 RID: 8054 RVA: 0x001984DC File Offset: 0x001966DC
		public static bool CheckRopeHitOutOfCombat(GameData.Domains.Character.Character useChar, GameData.Domains.Character.Character targetChar, sbyte combatType, ItemKey ropeKey, bool useMaxMarkCount = true)
		{
			return CombatDomain.CheckRopeHitOutOfCombat(EventHelper.Domain.MainThreadDataContext.Random, useChar, targetChar, combatType, useMaxMarkCount, (int)ItemTemplateHelper.GetGrade(ropeKey.ItemType, ropeKey.TemplateId));
		}

		// Token: 0x06001F77 RID: 8055 RVA: 0x00198518 File Offset: 0x00196718
		public static void GetExpAndAuthorityAndAreaSpiritualDebtOutOfCombat(List<short> enemyTemplateIdList)
		{
			DomainManager.Combat.GetExpAndAuthorityAndAreaSpiritualDebtOutOfCombat(EventHelper.Domain.MainThreadDataContext, enemyTemplateIdList, 1);
		}

		// Token: 0x06001F78 RID: 8056 RVA: 0x00198534 File Offset: 0x00196734
		public static bool CanWipeOut(short enemyLeaderId)
		{
			return EventHelper.CheckEscapingRandomEnemy(enemyLeaderId) || DomainManager.Combat.CanWipeOut(enemyLeaderId);
		}

		// Token: 0x06001F79 RID: 8057 RVA: 0x0019855C File Offset: 0x0019675C
		public static bool CanAutoWipeOut(short enemyLeaderId)
		{
			WipeOutType type;
			return EventHelper.CanWipeOut(enemyLeaderId) && DomainManager.Combat.TryGetWipeOutType(enemyLeaderId, out type) && GlobalDomain.Settings.IsTypeAutoWipeOutOn(type);
		}

		// Token: 0x06001F7A RID: 8058 RVA: 0x00198594 File Offset: 0x00196794
		public static string GetTriggeringRandomEnemyEventGuid(short enemyLeaderId)
		{
			WipeOutType type;
			bool flag = !DomainManager.Combat.TryGetWipeOutType(enemyLeaderId, out type);
			string result;
			if (flag)
			{
				result = "e5ecfaee-b6bc-4d5a-a15b-71b633b5a17a";
			}
			else
			{
				bool flag2 = EventHelper.CanWipeOut(enemyLeaderId);
				if (flag2)
				{
					result = ((type == WipeOutType.Righteous) ? "9cc242b6-e839-4c95-8100-ce948847533e" : "bcece724-0aa5-4fde-bb58-c820d648e03b");
				}
				else
				{
					result = ((type == WipeOutType.Righteous) ? "00be2f9c-1215-4cca-a308-699664e60de3" : "e5ecfaee-b6bc-4d5a-a15b-71b633b5a17a");
				}
			}
			return result;
		}

		// Token: 0x06001F7B RID: 8059 RVA: 0x001985F0 File Offset: 0x001967F0
		public static bool TryTriggerRandomEnemy(EventArgBox argBox)
		{
			bool flag = EventHelper.IsTaiwuAvoidMapBlockEnemies();
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
				Location location = taiwu.GetLocation();
				bool flag2 = !location.IsValid();
				if (flag2)
				{
					result = false;
				}
				else
				{
					MapBlockData blockData = DomainManager.Map.GetBlock(location);
					List<MapTemplateEnemyInfo> templateEnemyList = blockData.TemplateEnemyList;
					bool flag3 = templateEnemyList == null || templateEnemyList.Count <= 0;
					if (flag3)
					{
						result = false;
					}
					else
					{
						List<MapTemplateEnemyInfo> group = EventHelper.GetMapRandomEnemyGroupForChar(blockData, EventArgBox.TaiwuCharacterId, true);
						bool flag4 = group == null || group.Count == 0;
						if (flag4)
						{
							result = false;
						}
						else
						{
							EventHelper.SetMapRandomEnemyListToArgBox(argBox, "EnemyGroup", group);
							short enemyLeaderId = group[0].TemplateId;
							bool flag5 = enemyLeaderId >= 307 && enemyLeaderId <= 315 && taiwu.GetFameType() > 1;
							if (flag5)
							{
								result = false;
							}
							else
							{
								bool flag6 = EventHelper.CanWipeOut(enemyLeaderId) && !EventHelper.CanAutoWipeOut(enemyLeaderId);
								if (flag6)
								{
									result = false;
								}
								else
								{
									bool flag7 = EventHelper.GlobalArgBoxContainsKey<bool>("BattleWithXiangshuMinion") && enemyLeaderId == 298 && EventHelper.SmallVillageXiangshu((short)Config.Character.Instance[enemyLeaderId].OrganizationInfo.OrgTemplateId);
									if (flag7)
									{
										argBox.Set("EnemyLeader", enemyLeaderId);
										argBox.Set("NextEventGuid", "a114a545-3e31-49d7-b856-2a8940570a66");
										result = true;
									}
									else
									{
										string toEventGuid;
										bool flag8 = EventHelper.MoveRandomEnemyJumpEventGuid.TryGetValue(enemyLeaderId, out toEventGuid);
										if (flag8)
										{
											argBox.Set("EnemyLeader", enemyLeaderId);
											argBox.Set("NextEventGuid", EventHelper.CanAutoWipeOut(enemyLeaderId) ? "c83b76cc-e844-49dd-bdd3-52c45ef93a45" : toEventGuid);
											result = true;
										}
										else
										{
											result = false;
										}
									}
								}
							}
						}
					}
				}
			}
			return result;
		}

		// Token: 0x06001F7C RID: 8060 RVA: 0x001987B4 File Offset: 0x001969B4
		public static string GetTriggeringRandomBeastEventGuid(short enemyLeaderId)
		{
			bool flag = EventHelper.CanWipeOut(enemyLeaderId);
			string result;
			if (flag)
			{
				result = "99527a50-a51b-45bd-924a-cb8b10b91c78";
			}
			else
			{
				switch (enemyLeaderId)
				{
				case 210:
					result = "b6d3eb2f-b14a-4bd7-b9a6-7c59fe541390";
					break;
				case 211:
					result = "e877affa-a263-4856-9499-7d73aa18d5d4";
					break;
				case 212:
					result = "50d7e804-472a-413b-8a5a-1cbfa5e697ce";
					break;
				case 213:
					result = "6af7af8c-05dc-4cec-a95c-4f9bd8f48713";
					break;
				case 214:
					result = "6bd15afb-582f-4f2f-a437-72b9a93a54a2";
					break;
				case 215:
					result = "03cac70f-52cf-44dc-81d5-d0a831c6ed1a";
					break;
				case 216:
					result = "da84e74c-7b69-4b40-ad57-5c5dd81bf8bb";
					break;
				case 217:
					result = "6e13473d-03fa-45c0-83ed-4d9927e89abf";
					break;
				case 218:
					result = "c121bee9-0aff-44a2-8fe5-6aca0f27d239";
					break;
				case 219:
					result = "19cccc52-6989-4d95-9037-f45bccf6b09a";
					break;
				case 220:
					result = "d1ec8917-2add-4801-bf42-bbe3c08e02e0";
					break;
				case 221:
					result = "e0da94b7-94a7-41ca-be8e-188150fa5c3c";
					break;
				case 222:
					result = "d5ec35d6-e453-46d2-8fe5-cc5a44d32944";
					break;
				case 223:
					result = "26e43789-35c6-4f06-a48b-b1f360351f14";
					break;
				case 224:
					result = "92189a76-df7c-4758-8d8f-8f60f642426a";
					break;
				case 225:
					result = "53241e52-4492-472b-aa62-b7a7e992352d";
					break;
				case 226:
					result = "d2a7ce78-ac75-496f-b3b3-4a4352feb9d9";
					break;
				case 227:
					result = "31a3349e-5246-4b97-be46-8eb990eeb49d";
					break;
				default:
					result = string.Empty;
					break;
				}
			}
			return result;
		}

		// Token: 0x06001F7D RID: 8061 RVA: 0x001988D8 File Offset: 0x00196AD8
		public static string WipeOut(EventArgBox argBox)
		{
			short enemyLeaderId = -1;
			argBox.Get("EnemyLeader", ref enemyLeaderId);
			bool flag = EventHelper.GlobalArgBoxContainsKey<int>("DefeatXiangshuMinion");
			if (flag)
			{
				bool flag2 = enemyLeaderId - 304 <= 2;
				bool flag3 = flag2;
				if (flag3)
				{
					int amount = EventHelper.GetIntFromGlobalArgBox("DefeatXiangshuMinion");
					EventHelper.SaveGlobalArg<int>("DefeatXiangshuMinion", ++amount);
					EventHelper.Log("amount of DefeatXiangshuMinion:" + amount.ToString());
				}
			}
			List<MapTemplateEnemyInfo> group;
			EventHelper.GetMapRandomEnemyListFromArgBox(argBox, "EnemyGroup", out group);
			int animalId = -1;
			GameData.Domains.Character.Animal animal;
			bool flag4 = argBox.Get("AnimalId", ref animalId) && DomainManager.Extra.TryGetAnimal(animalId, out animal);
			if (flag4)
			{
				EventHelper.WipeOutAnimals(new List<GameData.Domains.Character.Animal>
				{
					animal
				});
			}
			else
			{
				List<short> templateIds = new List<short>();
				foreach (MapTemplateEnemyInfo e in group)
				{
					templateIds.Add(e.TemplateId);
				}
				DomainManager.Combat.WipeOut(EventHelper.Domain.MainThreadDataContext, templateIds);
				Location location = DomainManager.Taiwu.GetTaiwu().GetLocation();
				EventHelper.RemoveMapRandomEnemiesOnBlock(location, group);
				EventHelper.MapRandomEnemiesEscapeByCharacter(location, EventArgBox.TaiwuCharacterId);
			}
			EventHelper.SetOnHandlingMonthlyEventBlock(false);
			bool flag5 = EventHelper.IsExtraTaskInProgress(173) && EventHelper.IsShixiangSettlementEnemyClean();
			string result;
			if (flag5)
			{
				argBox.Set("EnemyTemplateId", enemyLeaderId);
				result = "1010bcdb-c7eb-4667-a085-efbcdb104135";
			}
			else
			{
				bool flag6 = (EventHelper.IsExtraTaskInProgress(236) || EventHelper.IsExtraTaskInProgress(405)) && GameData.Domains.Character.Character.IsXiangshuMinion(enemyLeaderId);
				if (flag6)
				{
					argBox.Set("EnemyTemplateId", enemyLeaderId);
					bool flag7 = EventHelper.IsRandomEnemyBelongHeavenlyTree(argBox);
					if (flag7)
					{
						EventArgBox sectArgBox = EventHelper.GetSectMainStoryEventArgBox(4);
						bool flag8 = !sectArgBox.Contains<bool>("ConchShip_PresetKey_WudangKillRandomEnemyTriggered");
						if (flag8)
						{
							return "6134ab9d-cb0a-419b-8c07-727997310fa5";
						}
						GameData.Domains.Character.Character character = argBox.GetCharacter("CharacterId");
						EventHelper.HeavenlyTreeGrewUp(character, 20, argBox);
					}
				}
				result = string.Empty;
			}
			return result;
		}

		// Token: 0x06001F7E RID: 8062 RVA: 0x00198B08 File Offset: 0x00196D08
		public static void WipeOutInTravel(EventArgBox argBox)
		{
			short enemyLeaderId = -1;
			argBox.Get("EnemyLeader", ref enemyLeaderId);
			List<short> templateIds = new List<short>
			{
				enemyLeaderId
			};
			CharacterItem config = Config.Character.Instance[enemyLeaderId];
			bool flag = config.MinionGroupId >= 0;
			if (flag)
			{
				MinionGroupItem minionGroup = MinionGroup.Instance[config.MinionGroupId];
				foreach (short templateId in minionGroup.Minions)
				{
					templateIds.Add(templateId);
				}
			}
			DomainManager.Combat.WipeOut(EventHelper.Domain.MainThreadDataContext, templateIds);
			TravelingEventCollection travelingCollection = EventHelper.GetTravelingEventCollection();
			travelingCollection.AddTravelBattlePerfectWin(DomainManager.Taiwu.GetTaiwuCharId(), enemyLeaderId);
			EventHelper.SetEventSeriesTexture(string.Empty);
			EventHelper.SetOnHandlingTravelingEventBlock(false);
		}

		// Token: 0x06001F7F RID: 8063 RVA: 0x00198BF4 File Offset: 0x00196DF4
		public static void TryWipeOutAnimals()
		{
			bool flag = !GlobalDomain.Settings.IsTypeAutoWipeOutOn(WipeOutType.Beast);
			if (!flag)
			{
				Location location = DomainManager.Taiwu.GetTaiwu().GetLocation();
				List<GameData.Domains.Character.Animal> animals;
				bool flag2 = !DomainManager.Extra.TryGetAnimalsByLocation(location, out animals);
				if (!flag2)
				{
					List<GameData.Domains.Character.Animal> res = new List<GameData.Domains.Character.Animal>();
					foreach (GameData.Domains.Character.Animal animal in animals)
					{
						bool flag3 = EventHelper.CanAutoWipeOut(animal.CharacterTemplateId);
						if (flag3)
						{
							res.Add(animal);
						}
					}
					EventHelper.WipeOutAnimals(res);
				}
			}
		}

		// Token: 0x06001F80 RID: 8064 RVA: 0x00198CA4 File Offset: 0x00196EA4
		public static void WipeOutAnimals(List<GameData.Domains.Character.Animal> animals)
		{
			List<short> templateIds = new List<short>();
			foreach (GameData.Domains.Character.Animal animal in animals)
			{
				ProfessionFormulaItem formulaItemHunter2 = ProfessionFormula.Instance[9];
				sbyte level = Config.Character.Instance[animal.CharacterTemplateId].ConsummateLevel;
				int value = formulaItemHunter2.Calculate((int)level);
				EventHelper.RemoveAnimal(animal);
				templateIds.Add(animal.CharacterTemplateId);
				EventHelper.ChangeProfessionSeniority(1, value, false);
			}
			DomainManager.Combat.WipeOut(EventHelper.Domain.MainThreadDataContext, templateIds);
		}

		// Token: 0x06001F81 RID: 8065 RVA: 0x00198D58 File Offset: 0x00196F58
		public static bool GetAllowExecute()
		{
			return DomainManager.World.GetAllowExecute();
		}

		// Token: 0x06001F82 RID: 8066 RVA: 0x00198D74 File Offset: 0x00196F74
		[Obsolete]
		public static sbyte GetRoleCombatSkillPracticeLevel(int roleId, short skillId)
		{
			return 100;
		}

		// Token: 0x06001F83 RID: 8067 RVA: 0x00198D78 File Offset: 0x00196F78
		public static sbyte GetRoleCombatSkillDirection(int roleId, short skillId)
		{
			GameData.Domains.CombatSkill.CombatSkill skill = DomainManager.CombatSkill.GetElement_CombatSkills(new CombatSkillKey(roleId, skillId));
			return CombatSkillStateHelper.GetCombatSkillDirection(skill.GetActivationState());
		}

		// Token: 0x06001F84 RID: 8068 RVA: 0x00198DA7 File Offset: 0x00196FA7
		[Obsolete]
		public static void SetCharCombatSkillPracticeLevel(int charId, short skillId, sbyte practiceLevel)
		{
		}

		// Token: 0x06001F85 RID: 8069 RVA: 0x00198DAC File Offset: 0x00196FAC
		public static void ChangeCharBaseCombatSkillQualification(int charId, sbyte skillType, int delta)
		{
			GameData.Domains.Character.Character character = DomainManager.Character.GetElement_Objects(charId);
			character.ChangeBaseCombatSkillQualification(EventHelper.Domain.MainThreadDataContext, skillType, delta);
		}

		// Token: 0x06001F86 RID: 8070 RVA: 0x00198DDC File Offset: 0x00196FDC
		public unsafe static void SetCharBaseCombatSkillQualification(int charId, sbyte skillType, short qualification)
		{
			GameData.Domains.Character.Character character = DomainManager.Character.GetElement_Objects(charId);
			CombatSkillShorts qualifications = *character.GetBaseCombatSkillQualifications();
			*(ref qualifications.Items.FixedElementField + (IntPtr)skillType * 2) = qualification;
			character.SetBaseCombatSkillQualifications(ref qualifications, EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x06001F87 RID: 8071 RVA: 0x00198E28 File Offset: 0x00197028
		public static sbyte GetCharCombatSkillBehaviorType(int charId, short skillId)
		{
			GameData.Domains.CombatSkill.CombatSkill skill = DomainManager.CombatSkill.GetElement_CombatSkills(new CombatSkillKey(charId, skillId));
			return CombatSkillStateHelper.GetActiveOutlinePageType(skill.GetActivationState());
		}

		// Token: 0x06001F88 RID: 8072 RVA: 0x00198E58 File Offset: 0x00197058
		public static sbyte GetCombatSkillGrade(short skillId)
		{
			return Config.CombatSkill.Instance[skillId].Grade;
		}

		// Token: 0x06001F89 RID: 8073 RVA: 0x00198E7C File Offset: 0x0019707C
		public static List<short> GetCharCombatSkillList(int charId, sbyte type = -1, sbyte sectId = -1, sbyte minGrade = 0, sbyte maxGrade = 8, bool needBreak = false, bool requireTaiwuNotLearnAndRead = false)
		{
			List<short> skillIdList = new List<short>();
			skillIdList.AddRange(DomainManager.Character.GetElement_Objects(charId).GetLearnedCombatSkills());
			skillIdList.RemoveAll(delegate(short skillId)
			{
				CombatSkillItem skillConfig = Config.CombatSkill.Instance[skillId];
				GameData.Domains.CombatSkill.CombatSkill combatSkill = DomainManager.CombatSkill.GetElement_CombatSkills(new CombatSkillKey(charId, skillId));
				bool remove = (type >= 0 && skillConfig.Type != type) || (sectId >= 0 && skillConfig.SectId != sectId) || skillConfig.Grade < minGrade || skillConfig.Grade > maxGrade || (needBreak && !CombatSkillStateHelper.IsBrokenOut(combatSkill.GetActivationState()));
				bool flag = !remove & requireTaiwuNotLearnAndRead;
				if (flag)
				{
					TaiwuCombatSkill taiwuCombatSkill;
					remove = (DomainManager.Taiwu.TryGetTaiwuCombatSkill(skillId, out taiwuCombatSkill) || DomainManager.Taiwu.TryGetNotLearnCombatSkillReadingProgress(skillId, out taiwuCombatSkill));
				}
				return remove;
			});
			return skillIdList;
		}

		// Token: 0x06001F8A RID: 8074 RVA: 0x00198F00 File Offset: 0x00197100
		public static bool CheckCharCombatSkill(int charId, short skillId)
		{
			GameData.Domains.CombatSkill.CombatSkill combatSkill;
			return DomainManager.CombatSkill.TryGetElement_CombatSkills(new CombatSkillKey(charId, skillId), out combatSkill);
		}

		// Token: 0x06001F8B RID: 8075 RVA: 0x00198F28 File Offset: 0x00197128
		public static List<short> GetMinGradeCombatSkillList(List<short> skillIdList)
		{
			List<short> minGradeSkillList = new List<short>();
			sbyte minGrade = sbyte.MaxValue;
			for (int i = 0; i < skillIdList.Count; i++)
			{
				short skillId = skillIdList[i];
				sbyte grade = Config.CombatSkill.Instance[skillId].Grade;
				bool flag = grade < minGrade;
				if (flag)
				{
					minGradeSkillList.Clear();
					minGradeSkillList.Add(skillId);
					minGrade = grade;
				}
				else
				{
					bool flag2 = grade == minGrade;
					if (flag2)
					{
						minGradeSkillList.Add(skillId);
					}
				}
			}
			return minGradeSkillList;
		}

		// Token: 0x06001F8C RID: 8076 RVA: 0x00198FB0 File Offset: 0x001971B0
		public static short GetCombatSkillId(sbyte type, sbyte sectId, sbyte grade)
		{
			for (int i = 0; i < Config.CombatSkill.Instance.Count; i++)
			{
				CombatSkillItem skillConfig = Config.CombatSkill.Instance[i];
				bool flag = skillConfig.Type == type && skillConfig.SectId == sectId && skillConfig.Grade == grade;
				if (flag)
				{
					return skillConfig.TemplateId;
				}
			}
			return -1;
		}

		// Token: 0x06001F8D RID: 8077 RVA: 0x00199017 File Offset: 0x00197217
		public static void LearnCombatSkill(int charId, short skillId)
		{
			DomainManager.Character.LearnCombatSkill(EventHelper.Domain.MainThreadDataContext, charId, skillId, 0);
		}

		// Token: 0x06001F8E RID: 8078 RVA: 0x00199034 File Offset: 0x00197234
		public static ItemKey GetCombatSkillBook(int charId, short skillId, sbyte outlinePageType, bool[] pageIsDirect, sbyte completePagesCount = -1)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			byte pageTypes = 0;
			pageTypes = SkillBookStateHelper.SetOutlinePageType(pageTypes, outlinePageType);
			for (byte pageId = 1; pageId < 6; pageId += 1)
			{
				pageTypes = SkillBookStateHelper.SetNormalPageType(pageTypes, pageId, pageIsDirect[(int)(pageId - 1)] ? 0 : 1);
			}
			ItemKey itemKey = DomainManager.Item.CreateSkillBook(context, Config.CombatSkill.Instance[skillId].BookId, pageTypes, completePagesCount, -1, true);
			DomainManager.Character.GetElement_Objects(charId).AddInventoryItem(context, itemKey, 1, false);
			return itemKey;
		}

		// Token: 0x06001F8F RID: 8079 RVA: 0x001990BC File Offset: 0x001972BC
		public static void RevokeSectCombatSkill(int charId, sbyte sectId, bool onlyRemoveGradeAboveChar = false)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			GameData.Domains.Character.Character character = DomainManager.Character.GetElement_Objects(charId);
			List<short> learnedCombatSkills = character.GetLearnedCombatSkills();
			sbyte charGrade = character.GetOrganizationInfo().Grade;
			for (int i = 0; i < learnedCombatSkills.Count; i++)
			{
				short skillId = learnedCombatSkills[i];
				CombatSkillItem skillConfig = Config.CombatSkill.Instance[skillId];
				bool flag = skillConfig.SectId != sectId || (onlyRemoveGradeAboveChar && skillConfig.Grade <= charGrade);
				if (!flag)
				{
					DomainManager.Character.RevokeCombatSkill(context, character, skillId);
				}
			}
		}

		// Token: 0x06001F90 RID: 8080 RVA: 0x00199160 File Offset: 0x00197360
		public static ItemKey ExchangeSpecialWeaponByCombatSkillIdForTaiwu(short skillTemplateId)
		{
			return DomainManager.Extra.ExchangeSpecialWeaponByCombatSkillIdForTaiwu(EventHelper.Domain.MainThreadDataContext, skillTemplateId);
		}

		// Token: 0x06001F91 RID: 8081 RVA: 0x00199188 File Offset: 0x00197388
		public static List<short> FilterDirectCombatSkillOfCharacter(int charId, sbyte equipType = -1, sbyte type = -1, sbyte sectId = -1)
		{
			GameData.Domains.Character.Character character;
			bool flag = !DomainManager.Character.TryGetElement_Objects(charId, out character);
			List<short> result;
			if (flag)
			{
				result = null;
			}
			else
			{
				List<short> learnedCombatSkills = character.GetLearnedCombatSkills();
				List<short> resultList = new List<short>();
				for (int i = 0; i < learnedCombatSkills.Count; i++)
				{
					short skillTemplateId = learnedCombatSkills[i];
					bool flag2 = DomainManager.CombatSkill.GetSkillDirection(charId, skillTemplateId) != 0;
					if (!flag2)
					{
						CombatSkillItem cellConfig = Config.CombatSkill.Instance.GetItem(skillTemplateId);
						bool flag3 = equipType >= 0 && cellConfig.EquipType != equipType;
						if (!flag3)
						{
							bool flag4 = type >= 0 && cellConfig.Type != type;
							if (!flag4)
							{
								bool flag5 = sectId >= 0 && cellConfig.SectId != sectId;
								if (!flag5)
								{
									resultList.Add(skillTemplateId);
								}
							}
						}
					}
				}
				result = resultList;
			}
			return result;
		}

		// Token: 0x06001F92 RID: 8082 RVA: 0x00199278 File Offset: 0x00197478
		public static List<short> GetNorLearnCombatSkillList(int charId, sbyte grade, sbyte type = -1, sbyte sectId = -1)
		{
			List<short> notLearnSkillList = new List<short>();
			List<short> learnedSkillList = DomainManager.Character.GetElement_Objects(charId).GetLearnedCombatSkills();
			for (int i = 0; i < Config.CombatSkill.Instance.Count; i++)
			{
				CombatSkillItem skillConfig = Config.CombatSkill.Instance[i];
				bool flag = skillConfig.Grade == grade && skillConfig.BookId > 0 && (type < 0 || skillConfig.Type == type) && (sectId < 0 || skillConfig.SectId == sectId) && !learnedSkillList.Contains(skillConfig.TemplateId);
				if (flag)
				{
					notLearnSkillList.Add(skillConfig.TemplateId);
				}
			}
			return notLearnSkillList;
		}

		// Token: 0x06001F93 RID: 8083 RVA: 0x00199320 File Offset: 0x00197520
		public static ValueTuple<ItemKey, byte, byte, byte> GetTeachCombatSkillBook(int charId, short combatSkillTemplateId)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			Dictionary<short, GameData.Domains.CombatSkill.CombatSkill> combatSkills = DomainManager.CombatSkill.GetCharCombatSkills(charId);
			short bookId = Config.CombatSkill.Instance[combatSkillTemplateId].BookId;
			ushort readingState = combatSkills[combatSkillTemplateId].GetReadingState();
			byte generatedPageTypes = CombatSkillStateHelper.GeneratePageTypesFromReadingState(context.Random, readingState);
			byte internalIndex;
			for (internalIndex = 0; internalIndex < 15; internalIndex += 1)
			{
				bool flag = CombatSkillStateHelper.IsPageRead(readingState, internalIndex);
				if (flag)
				{
					break;
				}
			}
			ItemKey itemKey = DomainManager.Item.CreateDemandedSkillBook(context, bookId, internalIndex, generatedPageTypes);
			GameData.Domains.Item.SkillBook book = DomainManager.Item.GetElement_SkillBooks(itemKey.Id);
			return new ValueTuple<ItemKey, byte, byte, byte>(itemKey, internalIndex, generatedPageTypes, book.GetPageTypes());
		}

		// Token: 0x06001F94 RID: 8084 RVA: 0x001993D8 File Offset: 0x001975D8
		public static List<short> GetTeachTaiwuCombatSkillList(int charId)
		{
			GameData.Utilities.ShortList skillList;
			return DomainManager.Taiwu.TryGetElement_TeachTaiwuCombatSkillDict(charId, out skillList) ? skillList.Items : null;
		}

		// Token: 0x06001F95 RID: 8085 RVA: 0x00199402 File Offset: 0x00197602
		public static void ClearTeachTaiwuCombatSkillList(int charId)
		{
			DomainManager.Taiwu.ClearTeachTaiwuCombatSkillList(EventHelper.Domain.MainThreadDataContext, charId);
		}

		// Token: 0x06001F96 RID: 8086 RVA: 0x0019941B File Offset: 0x0019761B
		public static void AddTeachTaiwuCombatSkill(int charId, short skillId)
		{
			DomainManager.Taiwu.AddTeachTaiwuCombatSkill(EventHelper.Domain.MainThreadDataContext, charId, skillId);
		}

		// Token: 0x06001F97 RID: 8087 RVA: 0x00199435 File Offset: 0x00197635
		[Obsolete]
		public static sbyte GetLearnCombatSkillPracticeLevel(short combatSkillTemplateId)
		{
			return 0;
		}

		// Token: 0x06001F98 RID: 8088 RVA: 0x00199438 File Offset: 0x00197638
		public static string LearnTargetCombatSkillDependSectApprovingRate(sbyte combatSkillType, EventArgBox argBox)
		{
			GameData.Domains.Character.Character taiwu = argBox.GetCharacter("RoleTaiwu");
			GameData.Domains.Character.Character character = argBox.GetCharacter("CharacterId");
			sbyte sectId = character.GetOrganizationInfo().OrgTemplateId;
			List<short> canLearn = EventHelper.GetCharCombatSkillList(character.GetId(), combatSkillType, sectId, 0, 8, false, true);
			bool flag = canLearn == null || canLearn.Count == 0;
			string result;
			if (flag)
			{
				string nextEventGuid = argBox.GetString("CombatSkillNoneTeachEventGuid");
				result = nextEventGuid;
			}
			else
			{
				short lowestCombatSkill = EventHelper.GetMinGradeCombatSkillList(canLearn).Sample<short>();
				sbyte canLearnGrade = (sbyte)Math.Max(0, (int)(EventHelper.GetSectApprovingRate(sectId) / 100 - 1));
				sbyte lowestGrade = EventHelper.GetCombatSkillGrade(lowestCombatSkill);
				List<short> taiwuList = EventHelper.GetCharCombatSkillList(taiwu.GetId(), combatSkillType, sectId, 0, 8, false, false);
				bool flag2 = lowestGrade > canLearnGrade;
				if (flag2)
				{
					argBox.Set("CantTeachCombat", lowestCombatSkill);
					string nextEventGuid = argBox.GetString("CombatSkillBeyondApprovingEventGuid");
					result = nextEventGuid;
				}
				else
				{
					bool flag3 = EventHelper.GetCombatSkillGrade(lowestCombatSkill) == 0;
					if (flag3)
					{
						argBox.Set("TeachCombat", lowestCombatSkill);
						string nextEventGuid = argBox.GetString("CombatSkillTeachEventGuid");
						result = nextEventGuid;
					}
					else
					{
						for (sbyte eGrade = 0; eGrade < lowestGrade; eGrade += 1)
						{
							short eSkillId = EventHelper.GetCombatSkillId(combatSkillType, sectId, eGrade);
							bool flag4 = !taiwuList.Contains(eSkillId) || !EventHelper.TaiwuCanLearnCombatSkill(eSkillId);
							if (flag4)
							{
								argBox.Set("TeachCombatBefore", eSkillId);
								return argBox.GetString("CombatSkillTeachBeforeEventGuid");
							}
						}
						argBox.Set("TeachCombat", lowestCombatSkill);
						string nextEventGuid = argBox.GetString("CombatSkillTeachEventGuid");
						result = nextEventGuid;
					}
				}
			}
			return result;
		}

		// Token: 0x06001F99 RID: 8089 RVA: 0x001995D0 File Offset: 0x001977D0
		public static void LearnCombatSkillInSectCompetition(GameData.Domains.Character.Character teacher, GameData.Domains.Character.Character student, short combatSkillId)
		{
			sbyte skillBehaviorType = EventHelper.GetCharCombatSkillBehaviorType(teacher.GetId(), combatSkillId);
			bool flag = skillBehaviorType < 0;
			if (flag)
			{
				skillBehaviorType = EventHelper.GetRoleBehavior(teacher);
			}
			bool[] pageIsDirect = new bool[]
			{
				true,
				true,
				true,
				true,
				true
			};
			sbyte fullCount = (13 - EventHelper.GetCombatSkillGrade(combatSkillId)) / 3;
			sbyte skillDirection = EventHelper.GetRoleCombatSkillDirection(teacher.GetId(), combatSkillId);
			bool flag2 = skillDirection == -2;
			if (flag2)
			{
				skillDirection = -1;
			}
			short prob = GlobalConfig.CombatSkillPageReverseProb[(int)(skillDirection + 1)];
			for (int i = 0; i < 5; i++)
			{
				bool flag3 = EventHelper.GetRandom(0, 100) < (int)prob;
				if (flag3)
				{
					pageIsDirect[i] = false;
				}
			}
			EventHelper.GetCombatSkillBook(student.GetId(), combatSkillId, skillBehaviorType, pageIsDirect, fullCount);
			short bookTemplateId = Config.CombatSkill.Instance[combatSkillId].BookId;
			EventHelper.ChangeRoleHappiness(student, (int)(ItemTemplateHelper.GetBaseHappinessChange(10, bookTemplateId) / 2));
			short change = (short)ItemTemplateHelper.GetBaseFavorabilityChange(10, bookTemplateId);
			EventHelper.ChangeFavorabilityOptional(student, teacher, change, 3);
			List<short> charCombatSkillList = EventHelper.GetCharCombatSkillList(student.GetId(), -1, -1, 0, 8, false, false);
			bool flag4 = !charCombatSkillList.Contains(combatSkillId);
			if (flag4)
			{
				EventHelper.LearnCombatSkill(student.GetId(), combatSkillId);
			}
		}

		// Token: 0x06001F9A RID: 8090 RVA: 0x001996F0 File Offset: 0x001978F0
		public static ItemKey TaiwuLearnCombatSkillInSectCompetition(GameData.Domains.Character.Character teacher, short combatSkillTemplateId)
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			List<short> taiwuList = EventHelper.GetCharCombatSkillList(taiwu.GetId(), -1, -1, 0, 8, false, false);
			bool flag = !taiwuList.Contains(combatSkillTemplateId);
			if (flag)
			{
				EventHelper.LearnCombatSkill(EventArgBox.TaiwuCharacterId, combatSkillTemplateId);
			}
			sbyte skillBehaviorType = (sbyte)EventHelper.GetRandom(0, 5);
			bool[] pageIsDirect = new bool[]
			{
				true,
				true,
				true,
				true,
				true
			};
			for (int i = 0; i < 5; i++)
			{
				bool flag2 = EventHelper.GetRandom(0, 100) < (int)GlobalConfig.CombatSkillPageReverseProb[0];
				if (flag2)
				{
					pageIsDirect[i] = false;
				}
			}
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			ProfessionFormulaItem seniorityFormula = ProfessionFormula.Instance[50];
			int addSeniority = seniorityFormula.Calculate((int)Config.CombatSkill.Instance[combatSkillTemplateId].Grade);
			DomainManager.Extra.ChangeProfessionSeniority(context, 7, addSeniority, true, false);
			return EventHelper.GetCombatSkillBook(EventArgBox.TaiwuCharacterId, combatSkillTemplateId, skillBehaviorType, pageIsDirect, 5);
		}

		// Token: 0x06001F9B RID: 8091 RVA: 0x001997E8 File Offset: 0x001979E8
		public static ItemKey LearnCombatSkillFromNpc(GameData.Domains.Character.Character character, short combatSkillId)
		{
			EventHelper.LearnCombatSkill(EventArgBox.TaiwuCharacterId, combatSkillId);
			sbyte fullCount = (13 - EventHelper.GetCombatSkillGrade(combatSkillId)) / 3;
			sbyte skillBehaviorType = EventHelper.GetRoleBehavior(character);
			bool[] pageIsDirect = new bool[]
			{
				true,
				true,
				true,
				true,
				true
			};
			sbyte skillDirection = EventHelper.GetRoleCombatSkillDirection(character.GetId(), combatSkillId);
			bool flag = skillDirection == -2;
			if (flag)
			{
				skillDirection = -1;
			}
			short prob = GlobalConfig.CombatSkillPageReverseProb[(int)(skillDirection + 1)];
			for (int i = 0; i < 5; i++)
			{
				bool flag2 = EventHelper.GetRandom(0, 100) < (int)prob;
				if (flag2)
				{
					pageIsDirect[i] = false;
				}
			}
			ItemKey bookKey = EventHelper.GetCombatSkillBook(EventArgBox.TaiwuCharacterId, combatSkillId, skillBehaviorType, pageIsDirect, fullCount);
			EventHelper.AddTeachTaiwuCombatSkill(character.GetId(), combatSkillId);
			short bookTemplateId = Config.CombatSkill.Instance[combatSkillId].BookId;
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			LifeRecordCollection lifeRecordCollection = EventHelper.GetLifeRecordCollection();
			int currDate = DomainManager.World.GetCurrDate();
			Location location = taiwu.GetLocation();
			lifeRecordCollection.AddRequestInstructionOnCombatSkillSucceed(taiwu.GetId(), currDate, character.GetId(), location, 10, Config.CombatSkill.Instance[combatSkillId].BookId, 1);
			EventHelper.ChangeRoleHappiness(taiwu, (int)(ItemTemplateHelper.GetBaseHappinessChange(10, bookTemplateId) / 2));
			short change = (short)ItemTemplateHelper.GetBaseFavorabilityChange(10, bookTemplateId);
			EventHelper.ChangeFavorabilityOptional(taiwu, character, change, 3);
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			ProfessionFormulaItem seniorityFormula = ProfessionFormula.Instance[50];
			int addSeniority = seniorityFormula.Calculate((int)Config.CombatSkill.Instance[combatSkillId].Grade);
			DomainManager.Extra.ChangeProfessionSeniority(context, 7, addSeniority, true, false);
			return bookKey;
		}

		// Token: 0x06001F9C RID: 8092 RVA: 0x0019997C File Offset: 0x00197B7C
		public static bool TaiwuCanLearnCombatSkill(short templateId)
		{
			GameData.Domains.CombatSkill.CombatSkill combatSkill = DomainManager.CombatSkill.GetElement_CombatSkills(new CombatSkillKey(DomainManager.Taiwu.GetTaiwuCharId(), templateId));
			return CombatSkillStateHelper.GetReadNormalPagesCount(combatSkill.GetReadingState()) >= 3;
		}

		// Token: 0x06001F9D RID: 8093 RVA: 0x001999BC File Offset: 0x00197BBC
		public static bool XuannvTaiwuCanLearnCombatSkill(short templateId)
		{
			GameData.Domains.CombatSkill.CombatSkill combatSkill = DomainManager.CombatSkill.GetElement_CombatSkills(new CombatSkillKey(DomainManager.Taiwu.GetTaiwuCharId(), templateId));
			return CombatSkillStateHelper.IsBrokenOut(combatSkill.GetActivationState());
		}

		// Token: 0x06001F9E RID: 8094 RVA: 0x001999F4 File Offset: 0x00197BF4
		public static string MartialArtTournamentTeachCombatSkill(EventArgBox argBox, sbyte combatSkillType)
		{
			GameData.Domains.Character.Character taiwu = argBox.GetCharacter("RoleTaiwu");
			GameData.Domains.Character.Character character = argBox.GetCharacter("CharacterId");
			sbyte sectId = character.GetOrganizationInfo().OrgTemplateId;
			List<short> canLearn = EventHelper.GetCharCombatSkillList(character.GetId(), combatSkillType, sectId, 0, 8, false, true);
			bool flag = canLearn == null || canLearn.Count == 0;
			string result;
			if (flag)
			{
				result = "9c406637-b6b7-40f0-b43d-4f5090df8d8d";
			}
			else
			{
				short lowestCombatSkill = EventHelper.GetMinGradeCombatSkillList(canLearn)[0];
				sbyte canLearnGrade = (sbyte)Math.Max(0, (int)(EventHelper.GetSectApprovingRate(sectId) / 100 - 1));
				sbyte lowestGrade = EventHelper.GetCombatSkillGrade(lowestCombatSkill);
				List<short> taiwuList = EventHelper.GetCharCombatSkillList(taiwu.GetId(), combatSkillType, sectId, 0, 8, false, false);
				bool flag2 = lowestGrade > canLearnGrade;
				if (flag2)
				{
					argBox.Set("CantTeachCombat", lowestCombatSkill);
					result = "a26405b7-1714-4ddf-8c85-6e774e04eb29";
				}
				else
				{
					bool flag3 = EventHelper.GetCombatSkillGrade(lowestCombatSkill) == 0;
					if (flag3)
					{
						argBox.Set("TeachCombat", lowestCombatSkill);
						result = "2885a46f-6727-4ae1-baae-3512849b443a";
					}
					else
					{
						for (sbyte eGrade = 0; eGrade < lowestGrade; eGrade += 1)
						{
							short eSkillId = EventHelper.GetCombatSkillId(combatSkillType, sectId, eGrade);
							bool flag4 = !taiwuList.Contains(eSkillId) || !EventHelper.TaiwuCanLearnCombatSkill(eSkillId);
							if (flag4)
							{
								argBox.Set("TeachCombatBefore", eSkillId);
								return "c76a1871-e087-4009-b557-91ce2177defe";
							}
						}
						argBox.Set("TeachCombat", lowestCombatSkill);
						result = "2885a46f-6727-4ae1-baae-3512849b443a";
					}
				}
			}
			return result;
		}

		// Token: 0x06001F9F RID: 8095 RVA: 0x00199B5C File Offset: 0x00197D5C
		public static bool CanPerformIdentityExtendFavor(sbyte resourceType, int charId)
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			return taiwu.GetResource(resourceType) >= EventHelper.IdentityExtendFavorResourceCost;
		}

		// Token: 0x06001FA0 RID: 8096 RVA: 0x00199B8C File Offset: 0x00197D8C
		public static int CalcIdentityExtendFavorValue(sbyte resourceType, int charId)
		{
			GameData.Domains.Character.Character target = DomainManager.Character.GetElement_Objects(charId);
			Settlement targetSettlement = DomainManager.Organization.GetSettlement(target.GetOrganizationInfo().SettlementId);
			MapAreaData targetArea = DomainManager.Map.GetAreaByAreaId(targetSettlement.GetLocation().AreaId);
			MapAreaItem targetAreaConfig = targetArea.GetConfig();
			short templateId = targetAreaConfig.TemplateId;
			bool flag = templateId >= 1 && templateId <= 15;
			int factor;
			if (flag)
			{
				factor = (int)GlobalConfig.Instance.ExtendFavorSafetyAndCultureAreaFactor[0];
			}
			else
			{
				sbyte[] organizationId = targetAreaConfig.OrganizationId;
				bool flag2 = organizationId != null && organizationId.Length > 0 && Organization.Instance[targetAreaConfig.OrganizationId[0]].IsSect;
				if (flag2)
				{
					factor = (int)GlobalConfig.Instance.ExtendFavorSafetyAndCultureAreaFactor[1];
				}
				else
				{
					factor = (int)GlobalConfig.Instance.ExtendFavorSafetyAndCultureAreaFactor[2];
				}
			}
			return (150 + (int)target.GetFame()) * factor / 10;
		}

		// Token: 0x06001FA1 RID: 8097 RVA: 0x00199C78 File Offset: 0x00197E78
		public static void PerformIdentityExtendFavor(sbyte resourceType, int charId)
		{
			DataContext ctx = EventHelper.Domain.MainThreadDataContext;
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			taiwu.ChangeResource(ctx, resourceType, -EventHelper.IdentityExtendFavorResourceCost);
			GameData.Domains.Character.Character target = DomainManager.Character.GetElement_Objects(charId);
			Settlement targetSettlement = DomainManager.Organization.GetSettlement(target.GetOrganizationInfo().SettlementId);
			MapAreaData targetArea = DomainManager.Map.GetAreaByAreaId(targetSettlement.GetLocation().AreaId);
			DomainManager.Extra.ChangeAreaSpiritualDebt(ctx, targetArea.GetAreaId(), EventHelper.CalcIdentityExtendFavorValue(resourceType, charId), true, true);
		}

		// Token: 0x06001FA2 RID: 8098 RVA: 0x00199D00 File Offset: 0x00197F00
		public static bool CanPerformIdentityMakeLineAndBridge(int charId, int targetId, bool isIncrease)
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			return taiwu.GetResource(7) >= EventHelper.IdentityMakeLineAndBridgeAuthorityCost;
		}

		// Token: 0x06001FA3 RID: 8099 RVA: 0x00199D30 File Offset: 0x00197F30
		public static HashSet<int> CalcIdentityMakeLineAndBridgeTargetCharacterIds(int charId)
		{
			CharacterDomain domainCharacter = DomainManager.Character;
			MapDomain domainMap = DomainManager.Map;
			OrganizationDomain domainOrg = DomainManager.Organization;
			int taiwuCharId = DomainManager.Taiwu.GetTaiwuCharId();
			GameData.Domains.Character.Character character = domainCharacter.GetElement_Objects(charId);
			sbyte stateId = domainMap.GetStateIdByAreaId(domainOrg.GetSettlement(character.GetOrganizationInfo().SettlementId).GetLocation().AreaId);
			HashSet<int> result = new HashSet<int>();
			domainCharacter.GetRelatedCharacters(taiwuCharId).GetAllRelatedCharIds(result, true);
			result.Remove(taiwuCharId);
			result.Remove(charId);
			result.RemoveWhere(delegate(int id)
			{
				GameData.Domains.Character.Character c;
				bool flag = !domainCharacter.TryGetElement_Objects(id, out c);
				bool result2;
				if (flag)
				{
					result2 = false;
				}
				else
				{
					OrganizationInfo orgInfo = c.GetOrganizationInfo();
					bool flag2 = orgInfo.SettlementId < 0;
					if (flag2)
					{
						result2 = true;
					}
					else
					{
						Location orgL = domainOrg.GetSettlement(orgInfo.SettlementId).GetLocation();
						result2 = (!orgL.IsValid() || domainMap.GetStateIdByAreaId(orgL.AreaId) != stateId);
					}
				}
				return result2;
			});
			result.RemoveWhere((int id) => !EventHelper.IsIntelligentCharacter(id));
			return result;
		}

		// Token: 0x06001FA4 RID: 8100 RVA: 0x00199E18 File Offset: 0x00198018
		public static void PerformIdentityMakeLineAndBridge(int charId, int targetId, bool isIncrease)
		{
			DataContext ctx = EventHelper.Domain.MainThreadDataContext;
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			taiwu.ChangeResource(ctx, 7, -EventHelper.IdentityMakeLineAndBridgeAuthorityCost);
			GameData.Domains.Character.Character character = DomainManager.Character.GetElement_Objects(charId);
			GameData.Domains.Character.Character target = DomainManager.Character.GetElement_Objects(targetId);
			int delta = 0;
			if (isIncrease)
			{
				delta += (150 + (int)character.GetFame()) * 50;
			}
			else
			{
				delta += ((int)character.GetFame() - 150) * 50;
			}
			DomainManager.Character.ChangeFavorabilityOptional(ctx, target, taiwu, delta, 3);
			DomainManager.Character.AddFavorabilityChangeInstantNotification(target, taiwu, delta > 0);
		}

		// Token: 0x06001FA5 RID: 8101 RVA: 0x00199EC0 File Offset: 0x001980C0
		public static bool CanPerformIdentitySafetyAndCulture(int charId, bool isSafetyElseCulture, bool isIncrease)
		{
			GameData.Domains.Character.Character target = DomainManager.Character.GetElement_Objects(charId);
			Settlement targetSettlement = DomainManager.Organization.GetSettlement(target.GetOrganizationInfo().SettlementId);
			if (isIncrease)
			{
				if (isSafetyElseCulture)
				{
					bool flag = targetSettlement.GetSafety() >= targetSettlement.GetMaxSafety();
					if (flag)
					{
						return false;
					}
				}
				else
				{
					bool flag2 = targetSettlement.GetCulture() >= targetSettlement.GetMaxCulture();
					if (flag2)
					{
						return false;
					}
				}
			}
			else if (isSafetyElseCulture)
			{
				bool flag3 = targetSettlement.GetSafety() <= 0;
				if (flag3)
				{
					return false;
				}
			}
			else
			{
				bool flag4 = targetSettlement.GetCulture() <= 0;
				if (flag4)
				{
					return false;
				}
			}
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			return taiwu.GetResource(6) >= EventHelper.IdentitySafetyAndCultureMoneyCost;
		}

		// Token: 0x06001FA6 RID: 8102 RVA: 0x00199FA0 File Offset: 0x001981A0
		public static void PerformIdentitySafetyAndCulture(int charId, bool isSafetyElseCulture, bool isIncrease)
		{
			DataContext ctx = EventHelper.Domain.MainThreadDataContext;
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			GameData.Domains.Character.Character target = DomainManager.Character.GetElement_Objects(charId);
			taiwu.ChangeResource(ctx, 6, -EventHelper.IdentitySafetyAndCultureMoneyCost);
			Settlement targetSettlement = DomainManager.Organization.GetSettlement(target.GetOrganizationInfo().SettlementId);
			MapAreaData targetArea = DomainManager.Map.GetAreaByAreaId(targetSettlement.GetLocation().AreaId);
			MapAreaItem targetAreaConfig = targetArea.GetConfig();
			short templateId = targetAreaConfig.TemplateId;
			bool flag = templateId >= 1 && templateId <= 15;
			int factor;
			if (flag)
			{
				factor = (int)GlobalConfig.Instance.ExtendFavorSafetyAndCultureAreaFactor[0];
			}
			else
			{
				sbyte[] organizationId = targetAreaConfig.OrganizationId;
				bool flag2 = organizationId != null && organizationId.Length > 0 && Organization.Instance[targetAreaConfig.OrganizationId[0]].IsSect;
				if (flag2)
				{
					factor = (int)GlobalConfig.Instance.ExtendFavorSafetyAndCultureAreaFactor[1];
				}
				else
				{
					factor = (int)GlobalConfig.Instance.ExtendFavorSafetyAndCultureAreaFactor[2];
				}
			}
			int delta = 0;
			if (isIncrease)
			{
				delta += (150 + (int)target.GetFame()) * factor / 100;
			}
			else
			{
				delta += ((int)target.GetFame() - 150) * factor / 100;
			}
			InstantNotificationCollection c = DomainManager.World.GetInstantNotificationCollection();
			if (isSafetyElseCulture)
			{
				targetSettlement.SetSafety((short)Math.Clamp((int)targetSettlement.GetSafety() + delta, 0, (int)targetSettlement.GetMaxSafety()), ctx);
				if (isIncrease)
				{
					c.AddSecurityUp(targetSettlement.GetId(), delta);
				}
				else
				{
					c.AddSecurityDown(targetSettlement.GetId(), -delta);
				}
			}
			else
			{
				targetSettlement.SetCulture((short)Math.Clamp((int)targetSettlement.GetCulture() + delta, 0, (int)targetSettlement.GetMaxCulture()), ctx);
				if (isIncrease)
				{
					c.AddCultureUp(targetSettlement.GetId(), delta);
				}
				else
				{
					c.AddCultureDown(targetSettlement.GetId(), -delta);
				}
			}
		}

		// Token: 0x06001FA7 RID: 8103 RVA: 0x0019A188 File Offset: 0x00198388
		public static bool CanPerformIdentityPoemAndImage(int charId, int targetId, bool isIncrease)
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			return taiwu.GetResource(7) >= EventHelper.IdentityPoemAndImageAuthorityCost;
		}

		// Token: 0x06001FA8 RID: 8104 RVA: 0x0019A1B8 File Offset: 0x001983B8
		public static void PerformIdentityPoemAndImage(int charId, int targetId, bool isIncrease)
		{
			DataContext ctx = EventHelper.Domain.MainThreadDataContext;
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			taiwu.ChangeResource(ctx, 7, -EventHelper.IdentityPoemAndImageAuthorityCost);
			GameData.Domains.Character.Character character = DomainManager.Character.GetElement_Objects(charId);
			GameData.Domains.Character.Character target = DomainManager.Character.GetElement_Objects(targetId);
			int delta = (int)(character.GetMaxLifeSkillAttainment() / 10);
			bool flag = !isIncrease;
			if (flag)
			{
				delta *= -1;
			}
			target.ChangeHappiness(ctx, delta);
			bool flag2 = delta != 0;
			if (flag2)
			{
				InstantNotificationCollection collection = DomainManager.World.GetInstantNotificationCollection();
				if (isIncrease)
				{
					collection.AddHappinessIncreased(targetId);
				}
				else
				{
					collection.AddHappinessDecreased(targetId);
				}
			}
		}

		// Token: 0x06001FA9 RID: 8105 RVA: 0x0019A25C File Offset: 0x0019845C
		public static bool CanPerformIdentityMoneyCharity(int charId)
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			return taiwu.GetResource(6) >= EventHelper.IdentityMoneyCharityMoneyCost;
		}

		// Token: 0x06001FAA RID: 8106 RVA: 0x0019A28C File Offset: 0x0019848C
		public static void PerformIdentityMoneyCharity(int charId)
		{
			DataContext ctx = EventHelper.Domain.MainThreadDataContext;
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			GameData.Domains.Character.Character target = DomainManager.Character.GetElement_Objects(charId);
			taiwu.ChangeResource(ctx, 6, -EventHelper.IdentityMoneyCharityMoneyCost);
			Settlement targetSettlement = DomainManager.Organization.GetSettlement(target.GetOrganizationInfo().SettlementId);
			MapAreaData targetArea = DomainManager.Map.GetAreaByAreaId(targetSettlement.GetLocation().AreaId);
			DomainManager.Extra.ChangeAreaSpiritualDebt(ctx, targetArea.GetAreaId(), 10, true, true);
		}

		// Token: 0x06001FAB RID: 8107 RVA: 0x0019A310 File Offset: 0x00198510
		public static void PerformIdentityMerchantPraise(int charId, sbyte merchantType)
		{
			DataContext ctx = EventHelper.Domain.MainThreadDataContext;
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			GameData.Domains.Character.Character target = DomainManager.Character.GetElement_Objects(charId);
			Settlement targetSettlement = DomainManager.Organization.GetSettlement(target.GetOrganizationInfo().SettlementId);
			MapAreaData targetArea = DomainManager.Map.GetAreaByAreaId(targetSettlement.GetLocation().AreaId);
			MapAreaItem targetAreaConfig = targetArea.GetConfig();
			bool flag = targetAreaConfig.TemplateId >= 1 && targetAreaConfig.TemplateId <= 15;
			int factor;
			if (flag)
			{
				factor = 20;
			}
			else
			{
				sbyte[] organizationId = targetAreaConfig.OrganizationId;
				bool flag2 = organizationId != null && organizationId.Length > 0 && Organization.Instance[targetAreaConfig.OrganizationId[0]].IsSect;
				if (flag2)
				{
					factor = 10;
				}
				else
				{
					factor = 5;
				}
			}
			int gain = (150 + (int)target.GetFame()) * 50 * factor / 5;
			EventHelper.ChangeMerchantFavorability(merchantType, gain);
			DomainManager.Extra.ChangeAreaSpiritualDebt(ctx, targetArea.GetAreaId(), -InteractionEventOption.Instance[130].SpiritualDebtCost, true, true);
			DomainManager.Merchant.RefreshCaravanInTaiwuState(ctx);
		}

		// Token: 0x06001FAC RID: 8108 RVA: 0x0019A438 File Offset: 0x00198638
		public unsafe static void PerformIdentityFixLandResource(int charId)
		{
			DataContext ctx = EventHelper.Domain.MainThreadDataContext;
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			GameData.Domains.Character.Character target = DomainManager.Character.GetElement_Objects(charId);
			Settlement targetSettlement = DomainManager.Organization.GetSettlement(target.GetOrganizationInfo().SettlementId);
			MapAreaData targetArea = DomainManager.Map.GetAreaByAreaId(targetSettlement.GetLocation().AreaId);
			List<MapBlockData> blocks = new List<MapBlockData>();
			MapBlockData mainBlock = DomainManager.Map.GetBlock(targetSettlement.GetLocation());
			Span<MapBlockData> areaBlocks = DomainManager.Map.GetAreaBlocks(targetArea.GetAreaId());
			for (int i = 0; i < areaBlocks.Length; i++)
			{
				MapBlockData block = *areaBlocks[i];
				bool flag = block.BelongBlockId == mainBlock.BlockId;
				if (flag)
				{
					blocks.Add(block);
				}
			}
			bool flag2 = blocks.Count > 1;
			if (flag2)
			{
				CollectionUtils.Shuffle<MapBlockData>(ctx.Random, blocks);
				blocks.RemoveRange(0, blocks.Count / 2);
			}
			foreach (MapBlockData block2 in blocks)
			{
				for (sbyte type = 0; type < 6; type += 1)
				{
					short max = *(ref block2.MaxResources.Items.FixedElementField + (IntPtr)type * 2);
					*(ref block2.CurrResources.Items.FixedElementField + (IntPtr)type * 2) = (short)Math.Clamp((int)(*(ref block2.CurrResources.Items.FixedElementField + (IntPtr)type * 2) + max * 33 / 100), 0, (int)max);
				}
				DomainManager.Map.SetBlockData(ctx, block2);
			}
			DomainManager.Extra.ChangeAreaSpiritualDebt(ctx, targetArea.GetAreaId(), -InteractionEventOption.Instance[131].SpiritualDebtCost, true, true);
		}

		// Token: 0x06001FAD RID: 8109 RVA: 0x0019A630 File Offset: 0x00198830
		public static int RequiredAreaDebtToPerformGiveExchangeTool(int charId, List<ItemKey> itemKeys)
		{
			ItemKey itemKey = itemKeys[0];
			sbyte grade = ItemTemplateHelper.GetGrade(itemKey.ItemType, itemKey.TemplateId);
			return GameData.Domains.Extra.SharedMethods.GetExchangeToolSpiritualDebtCost(grade);
		}

		// Token: 0x06001FAE RID: 8110 RVA: 0x0019A664 File Offset: 0x00198864
		public static void PerformGiveExchangeTool(int charId, List<ItemKey> itemKeys)
		{
			DataContext ctx = EventHelper.Domain.MainThreadDataContext;
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			GameData.Domains.Character.Character target = DomainManager.Character.GetElement_Objects(charId);
			taiwu.RemoveInventoryItemList(ctx, itemKeys, true);
			ItemKey itemKey = itemKeys[0];
			ItemKey newItemKey = EventHelper.CreateItem(itemKey.ItemType, itemKey.TemplateId);
			short maxDurability = ItemTemplateHelper.GetBaseMaxDurability(newItemKey.ItemType, newItemKey.TemplateId);
			ItemBase itemBase = DomainManager.Item.GetBaseItem(newItemKey);
			itemBase.SetMaxDurability(maxDurability, EventHelper.Domain.MainThreadDataContext);
			itemBase.SetCurrDurability(maxDurability, EventHelper.Domain.MainThreadDataContext);
			EventHelper.AddInventoryItem(taiwu, newItemKey, 1);
			Settlement targetSettlement = DomainManager.Organization.GetSettlement(target.GetOrganizationInfo().SettlementId);
			MapAreaData targetArea = DomainManager.Map.GetAreaByAreaId(targetSettlement.GetLocation().AreaId);
			DomainManager.Extra.ChangeAreaSpiritualDebt(ctx, targetArea.GetAreaId(), -EventHelper.RequiredAreaDebtToPerformGiveExchangeTool(charId, itemKeys), true, true);
			EventHelper.ShowGetItemPageForSingleItem(newItemKey);
		}

		// Token: 0x06001FAF RID: 8111 RVA: 0x0019A764 File Offset: 0x00198964
		private static string GiveExchangeToolSelectionKey(int index)
		{
			DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(7, 1);
			defaultInterpolatedStringHandler.AppendLiteral("ToolKey");
			defaultInterpolatedStringHandler.AppendFormatted<int>(index);
			return defaultInterpolatedStringHandler.ToStringAndClear();
		}

		// Token: 0x06001FB0 RID: 8112 RVA: 0x0019A798 File Offset: 0x00198998
		public static void TaiwuSelectItemForGiveExchangeTool(EventArgBox argBox)
		{
			GameData.Domains.Character.Character taiwuChar = DomainManager.Taiwu.GetTaiwu();
			EventSelectItemData data;
			bool flag = !argBox.Get<EventSelectItemData>("SelectItemInfo", out data);
			if (flag)
			{
				data = new EventSelectItemData();
				argBox.Set("SelectItemInfo", data);
			}
			EventSelectItemData eventSelectItemData = data;
			if (eventSelectItemData.CanSelectItemList == null)
			{
				eventSelectItemData.CanSelectItemList = new List<ItemDisplayData>();
			}
			eventSelectItemData = data;
			if (eventSelectItemData.FilterList == null)
			{
				eventSelectItemData.FilterList = new List<SelectItemFilter>();
			}
			data.ItemOperationType = 9;
			for (int i = 0; i < EventHelper.GiveExchangeToolAmount; i++)
			{
				SelectItemFilter filter = new SelectItemFilter
				{
					FilterTemplateId = -1,
					DisplayDataFilterId = 0,
					Key = EventHelper.GiveExchangeToolSelectionKey(i)
				};
				data.FilterList.Add(filter);
			}
			List<ValueTuple<ItemKey, int>> items = new List<ValueTuple<ItemKey, int>>();
			taiwuChar.FindItems((ItemBase _) => true, items, true, false);
			List<ItemDisplayData> filterItems = CharacterDomain.GetItemDisplayData(taiwuChar.GetId(), items, ItemSourceType.Inventory);
			using (List<ItemDisplayData>.Enumerator enumerator = filterItems.GetEnumerator())
			{
				while (enumerator.MoveNext())
				{
					ItemDisplayData itemDisplayData = enumerator.Current;
					bool flag2 = data.CanSelectItemList.Exists((ItemDisplayData d) => d.Key.Equals(itemDisplayData.Key));
					if (!flag2)
					{
						bool flag3 = itemDisplayData.Key.ItemType != 6;
						if (!flag3)
						{
							data.CanSelectItemList.Add(itemDisplayData);
						}
					}
				}
			}
		}

		// Token: 0x06001FB1 RID: 8113 RVA: 0x0019A944 File Offset: 0x00198B44
		public static List<ItemKey> GetGiveExchangeToolSelections(EventArgBox argBox)
		{
			List<ItemKey> result = new List<ItemKey>();
			for (int i = 0; i < EventHelper.GiveExchangeToolAmount; i++)
			{
				ItemKey itemKey;
				bool flag = argBox.Get<ItemKey>(EventHelper.GiveExchangeToolSelectionKey(i), out itemKey);
				if (flag)
				{
					result.Add(itemKey);
				}
			}
			return result;
		}

		// Token: 0x06001FB2 RID: 8114 RVA: 0x0019A994 File Offset: 0x00198B94
		public static void StartFixItem(EventArgBox argBox)
		{
			SelectItemFilter filter = default(SelectItemFilter);
			filter.DisplayDataFilterId = 1;
			filter.Key = "RepairKey";
			EventHelper.SelectCharacterItemRequest(EventArgBox.TaiwuCharacterId, argBox, filter, null, true, false);
			EventSelectItemData data;
			argBox.Get<EventSelectItemData>("SelectItemInfo", out data);
			data.ItemOperationType = 10;
		}

		// Token: 0x06001FB3 RID: 8115 RVA: 0x0019A9E4 File Offset: 0x00198BE4
		public static EventArgBox GetDlcArgBox()
		{
			return DomainManager.Extra.DlcArgBox;
		}

		// Token: 0x06001FB4 RID: 8116 RVA: 0x0019AA00 File Offset: 0x00198C00
		public static void SaveDlcArgBox()
		{
			DomainManager.Extra.SaveDlcArgBox(EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x06001FB5 RID: 8117 RVA: 0x0019AA18 File Offset: 0x00198C18
		public static EventArgBox GetDreamBackDlcEventArgBox()
		{
			return DomainManager.Extra.GetDreamBackDlcEventArgBoxPublic();
		}

		// Token: 0x06001FB6 RID: 8118 RVA: 0x0019AA34 File Offset: 0x00198C34
		public static bool GetDlcArgBoxBool(string key)
		{
			return EventHelper.GetDlcArgBox().GetBool(key) || EventHelper.GetDreamBackDlcEventArgBox().GetBool(key);
		}

		// Token: 0x06001FB7 RID: 8119 RVA: 0x0019AA54 File Offset: 0x00198C54
		public static bool IsDlcYearOfSnakeClothCanEnter()
		{
			bool flag = !EventHelper.IsYearOfSnakeClothInstalled();
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				bool fuyuHiltGuiding = EventHelper.GetBoolFromGlobalArgBox("ConchShip_PresetKey_FuyuHiltGuiding");
				bool flag2 = fuyuHiltGuiding;
				result = (!flag2 && (!EventHelper.GetDlcArgBoxBool(YearOfSnakeClothConstants.ClothGetFlag) || !EventHelper.GetDlcArgBoxBool(YearOfSnakeClothConstants.ClothGetFlagExtra)));
			}
			return result;
		}

		// Token: 0x06001FB8 RID: 8120 RVA: 0x0019AAA8 File Offset: 0x00198CA8
		public static void AddDlcYearOfSnakeCloth(string afterEvent, EventArgBox argBox)
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			List<ValueTuple<ItemKey, int>> items = new List<ValueTuple<ItemKey, int>>();
			bool flag = !EventHelper.GetDlcArgBoxBool(YearOfSnakeClothConstants.ClothGetFlag);
			if (flag)
			{
				ItemKey itemKey = EventHelper.CreateItem(3, 92);
				items.Add(new ValueTuple<ItemKey, int>(itemKey, 1));
				EventHelper.AddInventoryItem(taiwu, itemKey, 1);
			}
			bool flag2 = !EventHelper.GetDlcArgBoxBool(YearOfSnakeClothConstants.ClothGetFlagExtra);
			if (flag2)
			{
				ItemKey clothBlue = EventHelper.CreateItem(3, 93);
				ItemKey clothYellow = EventHelper.CreateItem(3, 94);
				items.Add(new ValueTuple<ItemKey, int>(clothBlue, 1));
				items.Add(new ValueTuple<ItemKey, int>(clothYellow, 1));
				EventHelper.AddInventoryItem(taiwu, clothBlue, 1);
				EventHelper.AddInventoryItem(taiwu, clothYellow, 1);
			}
			EventHelper.ShowGetItemPageForItems(items, afterEvent, argBox, false);
		}

		// Token: 0x06001FB9 RID: 8121 RVA: 0x0019AB60 File Offset: 0x00198D60
		public static void OnExitDlcYearOfSnakeCloth()
		{
			EventArgBox argBox = EventHelper.GetDlcArgBox();
			argBox.Set(YearOfSnakeClothConstants.ClothGetFlag, true);
			argBox.Set(YearOfSnakeClothConstants.ClothGetFlagExtra, true);
			EventHelper.SaveDlcArgBox();
		}

		// Token: 0x06001FBA RID: 8122 RVA: 0x0019AB94 File Offset: 0x00198D94
		public static void TriggerExtraTask(int taskChainId, int taskInfoId)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			DomainManager.Extra.TriggerExtraTask(context, taskChainId, taskInfoId);
		}

		// Token: 0x06001FBB RID: 8123 RVA: 0x0019ABBC File Offset: 0x00198DBC
		public static void FinishExtraTask(int taskChainId, int taskInfoId)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			DomainManager.Extra.FinishTriggeredExtraTask(context, taskChainId, taskInfoId);
		}

		// Token: 0x06001FBC RID: 8124 RVA: 0x0019ABE4 File Offset: 0x00198DE4
		public static void FinishAllTaskInChain(int taskChainId)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			DomainManager.Extra.FinishAllTaskInChain(context, taskChainId);
		}

		// Token: 0x06001FBD RID: 8125 RVA: 0x0019AC0C File Offset: 0x00198E0C
		public static bool IsExtraTaskInProgress(int taskInfoId)
		{
			return DomainManager.Extra.IsExtraTaskInProgress(taskInfoId);
		}

		// Token: 0x06001FBE RID: 8126 RVA: 0x0019AC2C File Offset: 0x00198E2C
		public static bool IsExtraTaskChainInProgress(int taskChainId)
		{
			return DomainManager.Extra.IsExtraTaskChainInProgress(taskChainId);
		}

		// Token: 0x06001FBF RID: 8127 RVA: 0x0019AC4C File Offset: 0x00198E4C
		public static int GetExtraTaskChainCurrentTask(int taskChainId)
		{
			return DomainManager.Extra.GetExtraTaskChainCurrentTask(taskChainId);
		}

		// Token: 0x06001FC0 RID: 8128 RVA: 0x0019AC6C File Offset: 0x00198E6C
		public static ItemKey AddEquipmentItemToRole(GameData.Domains.Character.Character character, sbyte itemType, short itemTemplateId, short equipmentEffectId = -1, bool tryEquipOn = true)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			ItemKey itemKey = DomainManager.Item.CreateItem(context, itemType, itemTemplateId);
			EquipmentBase equipment = DomainManager.Item.GetBaseEquipment(itemKey);
			bool flag = equipmentEffectId >= 0;
			if (flag)
			{
				bool flag2 = equipmentEffectId == 54;
				if (flag2)
				{
					short durability = equipment.GetMaxDurability() * 2;
					equipment.SetMaxDurability(durability, context);
					equipment.SetCurrDurability(durability, context);
				}
				equipment.SetEquipmentEffectId(equipmentEffectId, context);
			}
			EventHelper.AddInventoryItem(character, itemKey, 1);
			if (tryEquipOn)
			{
				ItemKey[] equipments = character.GetEquipment();
				bool equipFlag = false;
				sbyte equipType = equipment.GetEquipmentType();
				sbyte[] slotsArray = EquipmentSlot.EquipmentType2Slots[(int)equipType];
				for (int i = 0; i < slotsArray.Length; i++)
				{
					bool flag3 = !equipments[(int)slotsArray[i]].IsValid();
					if (flag3)
					{
						character.ChangeEquipment(EventHelper.Domain.MainThreadDataContext, -1, slotsArray[i], itemKey);
						equipFlag = true;
					}
					bool flag4 = equipFlag;
					if (flag4)
					{
						break;
					}
				}
			}
			return itemKey;
		}

		// Token: 0x06001FC1 RID: 8129 RVA: 0x0019AD74 File Offset: 0x00198F74
		public static ItemKey AddItemToRole(GameData.Domains.Character.Character character, sbyte itemType, short itemTemplateId, int amount, short currDurability = -1)
		{
			bool flag = character == null;
			if (flag)
			{
				throw new Exception("null character to add item");
			}
			ItemKey itemKey = DomainManager.Item.CreateItem(EventHelper.Domain.MainThreadDataContext, itemType, itemTemplateId);
			EventHelper.AddInventoryItem(character, itemKey, amount);
			bool flag2 = currDurability >= 0;
			if (flag2)
			{
				List<ValueTuple<ItemKey, int>> findResult = new List<ValueTuple<ItemKey, int>>();
				CharacterItemFilterWrappers.FindByTemplateId(character, itemType, itemTemplateId, findResult, true, false);
				DomainManager.Item.GetBaseItem(findResult[0].Item1).SetCurrDurability(currDurability, EventHelper.Domain.MainThreadDataContext);
			}
			EventHelper.AddSeniorityOnFindMaterialAdventure(itemKey);
			return itemKey;
		}

		// Token: 0x06001FC2 RID: 8130 RVA: 0x0019AE0C File Offset: 0x0019900C
		public static ItemKey AddItemToRole(GameData.Domains.Character.Character character, ItemKey itemKey, int amount, short currDurability = -1)
		{
			bool flag = character == null;
			if (flag)
			{
				throw new Exception("null character to add item");
			}
			EventHelper.AddInventoryItem(character, itemKey, amount);
			bool flag2 = currDurability >= 0;
			if (flag2)
			{
				List<ValueTuple<ItemKey, int>> findResult = new List<ValueTuple<ItemKey, int>>();
				CharacterItemFilterWrappers.FindByTemplateId(character, itemKey.ItemType, itemKey.TemplateId, findResult, true, false);
				DomainManager.Item.GetBaseItem(findResult[0].Item1).SetCurrDurability(currDurability, EventHelper.Domain.MainThreadDataContext);
			}
			EventHelper.AddSeniorityOnFindMaterialAdventure(itemKey);
			return itemKey;
		}

		// Token: 0x06001FC3 RID: 8131 RVA: 0x0019AE94 File Offset: 0x00199094
		public static ItemKey CreateItem(sbyte itemType, short itemTemplateId)
		{
			return DomainManager.Item.CreateItem(EventHelper.Domain.MainThreadDataContext, itemType, itemTemplateId);
		}

		// Token: 0x06001FC4 RID: 8132 RVA: 0x0019AEC0 File Offset: 0x001990C0
		public static ItemKey AddRandomMedicineToRole(GameData.Domains.Character.Character character, short itemSubType, int amount, sbyte expectedGrade = -1)
		{
			Tester.Assert(ItemSubType.GetType(itemSubType) == 8, "");
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			IRandomSource random = EventHelper.Domain.MainThreadDataContext.Random;
			bool flag = expectedGrade < 0;
			if (flag)
			{
				expectedGrade = (sbyte)random.Next(8);
			}
			sbyte grade = ItemDomain.GenerateRandomItemGrade(random, expectedGrade);
			grade = ItemDomain.GetRandomMedicineGrade(grade);
			short itemTemplateId = ItemDomain.GetRandomItemIdInSubType(random, itemSubType, grade);
			ItemKey itemKey = DomainManager.Item.CreateMedicine(context, itemTemplateId);
			EventHelper.AddInventoryItem(character, itemKey, amount);
			return itemKey;
		}

		// Token: 0x06001FC5 RID: 8133 RVA: 0x0019AF4C File Offset: 0x0019914C
		public static ItemKey GetRandomItemByGrade(sbyte grade, short itemSubType = -1)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			return DomainManager.Building.GetRandomItemByGrade(context.Random, grade, itemSubType);
		}

		// Token: 0x06001FC6 RID: 8134 RVA: 0x0019AF7C File Offset: 0x0019917C
		public static ItemKey GetRandomItemByGradeAndSubType(sbyte grade, List<short> itemSubTypeList)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			bool flag = itemSubTypeList == null || itemSubTypeList.Count == 0;
			ItemKey result;
			if (flag)
			{
				result = ItemKey.Invalid;
			}
			else
			{
				short subType = itemSubTypeList[context.Random.Next(itemSubTypeList.Count)];
				ItemKey itemKey = DomainManager.Building.GetRandomItemByGrade(context.Random, grade, subType);
				result = itemKey;
			}
			return result;
		}

		// Token: 0x06001FC7 RID: 8135 RVA: 0x0019AFE4 File Offset: 0x001991E4
		public static ItemKey GetWestRandomItemByGarde(sbyte grade)
		{
			return DomainManager.Building.GetWestRandomItemByGarde(EventHelper.Domain.MainThreadDataContext, grade);
		}

		// Token: 0x06001FC8 RID: 8136 RVA: 0x0019B00C File Offset: 0x0019920C
		public static ItemKey GetInventoryItem(GameData.Domains.Character.Character character, sbyte itemType, short itemTemplateId)
		{
			return character.GetInventory().GetInventoryItemKey(itemType, itemTemplateId);
		}

		// Token: 0x06001FC9 RID: 8137 RVA: 0x0019B02C File Offset: 0x0019922C
		public static bool InventoryHasItem(GameData.Domains.Character.Character character, ItemKey itemKey)
		{
			Inventory inventory = character.GetInventory();
			foreach (KeyValuePair<ItemKey, int> pair in inventory.Items)
			{
				bool flag = pair.Key.Equals(itemKey);
				if (flag)
				{
					return true;
				}
			}
			return false;
		}

		// Token: 0x06001FCA RID: 8138 RVA: 0x0019B0A8 File Offset: 0x001992A8
		public static bool InventoryHasItem(GameData.Domains.Character.Character character, sbyte itemType, short templateId)
		{
			Inventory inventory = character.GetInventory();
			foreach (KeyValuePair<ItemKey, int> pair in inventory.Items)
			{
				bool flag = pair.Key.ItemType == itemType && pair.Key.TemplateId == templateId;
				if (flag)
				{
					return true;
				}
			}
			return false;
		}

		// Token: 0x06001FCB RID: 8139 RVA: 0x0019B134 File Offset: 0x00199334
		public static void TransferInventoryItem(GameData.Domains.Character.Character srcChar, GameData.Domains.Character.Character destChar, ItemKey itemKey, int amount = 1)
		{
			DomainManager.Character.TransferInventoryItem(EventHelper.Domain.MainThreadDataContext, srcChar, destChar, itemKey, amount);
		}

		// Token: 0x06001FCC RID: 8140 RVA: 0x0019B150 File Offset: 0x00199350
		public static void TransferInventoryItemWithDebt(int srcCharId, int destCharId, ItemKey itemKey, int amount, bool changeFavor = false)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			GameData.Domains.Character.Character srcChar = EventHelper.GetCharacterById(srcCharId);
			GameData.Domains.Character.Character destChar = EventHelper.GetCharacterById(destCharId);
			ItemKey[] equipments = srcChar.GetEquipment();
			int slotIndex = equipments.IndexOf(itemKey);
			bool flag = slotIndex >= 0;
			if (flag)
			{
				srcChar.ChangeEquipment(EventHelper.Domain.MainThreadDataContext, (sbyte)slotIndex, -1, ItemKey.Invalid);
			}
			DomainManager.Character.TransferInventoryItem(EventHelper.Domain.MainThreadDataContext, srcChar, destChar, itemKey, amount);
			DomainManager.Character.UpdateDebtByItemTransfer(EventHelper.Domain.MainThreadDataContext, srcChar, destChar, itemKey, amount, changeFavor);
			InteractOfLove.SetLoveTokenHolder(context, itemKey, destCharId);
		}

		// Token: 0x06001FCD RID: 8141 RVA: 0x0019B1EC File Offset: 0x001993EC
		public unsafe static void TransferResourcesWithDebt(int srcCharId, int destCharId, sbyte resourceType, int amount, bool changeFavor = false)
		{
			Tester.Assert(resourceType >= 0 && resourceType < 8, "");
			ResourceInts resources = default(ResourceInts);
			resources.Initialize();
			*(ref resources.Items.FixedElementField + (IntPtr)resourceType * 4) = amount;
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			GameData.Domains.Character.Character srcChar = EventHelper.GetCharacterById(srcCharId);
			GameData.Domains.Character.Character destChar = EventHelper.GetCharacterById(destCharId);
			DomainManager.Character.UpdateDebtByResourceTransfer(context, srcChar, destChar, resources, changeFavor);
			DomainManager.Character.TransferResource(context, srcChar, destChar, ref resources);
		}

		// Token: 0x06001FCE RID: 8142 RVA: 0x0019B270 File Offset: 0x00199470
		public static void TransferInventoryOrEquipItem(GameData.Domains.Character.Character srcChar, GameData.Domains.Character.Character destChar, ItemKey itemKey, int amount = 1)
		{
			ItemKey[] equipments = srcChar.GetEquipment();
			int slotIndex = equipments.IndexOf(itemKey);
			bool flag = slotIndex >= 0;
			if (flag)
			{
				srcChar.ChangeEquipment(EventHelper.Domain.MainThreadDataContext, (sbyte)slotIndex, -1, ItemKey.Invalid);
			}
			EventHelper.TransferInventoryItem(srcChar, destChar, itemKey, amount);
		}

		// Token: 0x06001FCF RID: 8143 RVA: 0x0019B2BC File Offset: 0x001994BC
		public static void RemoveInventoryItem(GameData.Domains.Character.Character character, ItemKey itemKey, int amount = 1, bool deleteItem = true)
		{
			bool flag = character == null;
			if (flag)
			{
				throw new Exception("Character is null when removing inventory item");
			}
			bool flag2 = itemKey == ItemKey.Invalid;
			if (flag2)
			{
				throw new Exception("ItemKey is Invalid");
			}
			character.RemoveInventoryItem(EventHelper.Domain.MainThreadDataContext, itemKey, amount, deleteItem, false);
		}

		// Token: 0x06001FD0 RID: 8144 RVA: 0x0019B30C File Offset: 0x0019950C
		public static void RemoveInventoryOrEquipItem(GameData.Domains.Character.Character character, ItemKey itemKey, int amount = 1, bool deleteItem = true)
		{
			int slotIndex = EventHelper.GetEquipmentsSlotIndex(character, itemKey);
			bool flag = slotIndex >= 0;
			if (flag)
			{
				character.ChangeEquipment(EventHelper.Domain.MainThreadDataContext, (sbyte)slotIndex, -1, ItemKey.Invalid);
			}
			Inventory inventory = character.GetInventory();
			bool flag2 = inventory.Items.ContainsKey(itemKey);
			if (flag2)
			{
				character.RemoveInventoryItem(EventHelper.Domain.MainThreadDataContext, itemKey, amount, deleteItem, false);
			}
		}

		// Token: 0x06001FD1 RID: 8145 RVA: 0x0019B374 File Offset: 0x00199574
		public static void AddInventoryItem(GameData.Domains.Character.Character character, ItemKey itemKey, int amount = 1)
		{
			bool flag = character == null;
			if (flag)
			{
				throw new Exception("Character is null when adding inventory item");
			}
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			character.AddInventoryItem(context, itemKey, amount, false);
			bool flag2 = character == DomainManager.Taiwu.GetTaiwu();
			if (flag2)
			{
				InstantNotificationCollection instantNotification = DomainManager.World.GetInstantNotifications();
				instantNotification.AddGetItem(character.GetId(), itemKey.ItemType, itemKey.TemplateId);
			}
		}

		// Token: 0x06001FD2 RID: 8146 RVA: 0x0019B3E4 File Offset: 0x001995E4
		public static void TransformInventoryItem(GameData.Domains.Character.Character fromCharacter, GameData.Domains.Character.Character toCharacter, ItemKey itemKey, int amount = 1)
		{
			bool flag = fromCharacter == null;
			if (flag)
			{
				throw new Exception("fromCharacter is null when transform inventory item");
			}
			bool flag2 = toCharacter == null;
			if (flag2)
			{
				throw new Exception("toCharacter is null when transform inventory item");
			}
			bool flag3 = fromCharacter.GetId() == toCharacter.GetId();
			if (!flag3)
			{
				EventHelper.RemoveInventoryItem(fromCharacter, itemKey, amount, false);
				EventHelper.AddInventoryItem(toCharacter, itemKey, amount);
			}
		}

		// Token: 0x06001FD3 RID: 8147 RVA: 0x0019B43F File Offset: 0x0019963F
		public static void RemoveItem(ItemKey itemKey)
		{
			DomainManager.Item.RemoveItem(EventHelper.Domain.MainThreadDataContext, itemKey);
		}

		// Token: 0x06001FD4 RID: 8148 RVA: 0x0019B458 File Offset: 0x00199658
		public static ItemKey GetLegendaryBookItem(sbyte combatSkillType)
		{
			return DomainManager.LegendaryBook.GetLegendaryBookItem(combatSkillType);
		}

		// Token: 0x06001FD5 RID: 8149 RVA: 0x0019B478 File Offset: 0x00199678
		public static sbyte GetItemGrade(ItemKey itemKey)
		{
			return ItemTemplateHelper.GetGrade(itemKey.ItemType, itemKey.TemplateId);
		}

		// Token: 0x06001FD6 RID: 8150 RVA: 0x0019B49C File Offset: 0x0019969C
		public static short GetItemCurrDurability(ItemKey itemKey)
		{
			return DomainManager.Item.GetBaseItem(itemKey).GetCurrDurability();
		}

		// Token: 0x06001FD7 RID: 8151 RVA: 0x0019B4C0 File Offset: 0x001996C0
		public static void SetItemCurrDurability(ItemKey itemKey, short durability)
		{
			ItemBase item = DomainManager.Item.GetBaseItem(itemKey);
			item.SetCurrDurability(durability, EventHelper.Domain.MainThreadDataContext);
			EquipmentBase equipment = item as EquipmentBase;
			bool flag = equipment == null || equipment.GetEquippedCharId() < 0;
			if (!flag)
			{
				GameData.Domains.Character.Character character;
				bool flag2 = !DomainManager.Character.TryGetElement_Objects(equipment.GetEquippedCharId(), out character);
				if (!flag2)
				{
					character.SetEquipment(character.GetEquipment(), EventHelper.Domain.MainThreadDataContext);
				}
			}
		}

		// Token: 0x06001FD8 RID: 8152 RVA: 0x0019B53C File Offset: 0x0019973C
		public static short GetItemMaxDurability(ItemKey itemKey)
		{
			return DomainManager.Item.GetBaseItem(itemKey).GetMaxDurability();
		}

		// Token: 0x06001FD9 RID: 8153 RVA: 0x0019B560 File Offset: 0x00199760
		public static int GetRepairItemNeedResourceCount(ItemKey itemKey, short targetDurability = -1)
		{
			return DomainManager.Item.GetRepairItemNeedResourceCount(itemKey, targetDurability);
		}

		// Token: 0x06001FDA RID: 8154 RVA: 0x0019B580 File Offset: 0x00199780
		public static sbyte GetItemRequireLifeSkillType(ItemKey itemKey)
		{
			return GameData.Domains.Extra.SharedMethods.GetItemRequireLifeSkillType(itemKey);
		}

		// Token: 0x06001FDB RID: 8155 RVA: 0x0019B598 File Offset: 0x00199798
		public static void AddEatingItem(int charId, ItemKey itemKey)
		{
			DomainManager.Character.AddEatingItem(EventHelper.Domain.MainThreadDataContext, charId, itemKey, null);
		}

		// Token: 0x06001FDC RID: 8156 RVA: 0x0019B5B4 File Offset: 0x001997B4
		public static int GetItemFavorabilityChange(ItemKey itemKey)
		{
			return DomainManager.Item.GetBaseItem(itemKey).GetFavorabilityChange();
		}

		// Token: 0x06001FDD RID: 8157 RVA: 0x0019B5D8 File Offset: 0x001997D8
		public static int GetGiftItemFavorabilityChange(ItemKey itemKey, GameData.Domains.Character.Character character)
		{
			int favorChange = DomainManager.Item.GetBaseItem(itemKey).GetFavorabilityChange();
			OrganizationInfo charOrgInfo = character.GetOrganizationInfo();
			OrganizationItem orgCfg = Organization.Instance[charOrgInfo.OrgTemplateId];
			bool flag = DomainManager.Extra.MartialArtistSkill0Useful(orgCfg);
			int result;
			if (flag)
			{
				ProfessionData martialArtistProfessionData = DomainManager.Extra.GetProfessionData(3);
				result = (int)((float)favorChange + (float)favorChange * ((float)martialArtistProfessionData.GetSeniorityFavorAddPercent() / 100f));
			}
			else
			{
				bool flag2 = DomainManager.Extra.CivilianSkill0Useful(orgCfg);
				if (flag2)
				{
					ProfessionData civilianProfessionData = DomainManager.Extra.GetProfessionData(10);
					result = (int)((float)favorChange + (float)favorChange * ((float)civilianProfessionData.GetSeniorityFavorAddPercent() / 100f));
				}
				else
				{
					result = favorChange;
				}
			}
			return result;
		}

		// Token: 0x06001FDE RID: 8158 RVA: 0x0019B688 File Offset: 0x00199888
		[Obsolete]
		public static void AddSeniorityByGiftItem(short favorChange, GameData.Domains.Character.Character targetChar)
		{
			OrganizationInfo charOrgInfo = targetChar.GetOrganizationInfo();
			OrganizationItem orgCfg = Organization.Instance[charOrgInfo.OrgTemplateId];
			bool flag = DomainManager.Extra.MartialArtistSkill0Useful(orgCfg) || DomainManager.Extra.CivilianSkill0Useful(orgCfg);
			if (flag)
			{
				int value = (int)(favorChange / 200);
				EventHelper.OnSkillExecutedAddExpSpecial(value, false);
			}
		}

		// Token: 0x06001FDF RID: 8159 RVA: 0x0019B6E0 File Offset: 0x001998E0
		public static sbyte GetItemHappinessChange(ItemKey itemKey)
		{
			return DomainManager.Item.GetBaseItem(itemKey).GetHappinessChange();
		}

		// Token: 0x06001FE0 RID: 8160 RVA: 0x0019B704 File Offset: 0x00199904
		public static short GetCharLovingItemSubType(int charId)
		{
			return DomainManager.Character.GetElement_Objects(charId).GetLovingItemSubType();
		}

		// Token: 0x06001FE1 RID: 8161 RVA: 0x0019B726 File Offset: 0x00199926
		public static void SetCharLovingItemSubTypeRevealed(int charId, bool revealed = true)
		{
			DomainManager.Character.GetElement_Objects(charId).SetLovingItemRevealed(revealed, EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x06001FE2 RID: 8162 RVA: 0x0019B748 File Offset: 0x00199948
		public static short GetCharHatingItemSubType(int charId)
		{
			return DomainManager.Character.GetElement_Objects(charId).GetHatingItemSubType();
		}

		// Token: 0x06001FE3 RID: 8163 RVA: 0x0019B76A File Offset: 0x0019996A
		public static void SetCharHatingItemSubTypeRevealed(int charId, bool revealed = true)
		{
			DomainManager.Character.GetElement_Objects(charId).SetHatingItemRevealed(revealed, EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x06001FE4 RID: 8164 RVA: 0x0019B78C File Offset: 0x0019998C
		public static bool ConfiscateMaxGradeItem(int charId)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			GameData.Domains.Character.Character character = DomainManager.Character.GetElement_Objects(charId);
			OrganizationInfo orgInfo = character.GetOrganizationInfo();
			bool flag = !OrganizationDomain.IsSect(orgInfo.OrgTemplateId) || orgInfo.SettlementId < 0;
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				List<ItemKey> itemKeys = ObjectPool<List<ItemKey>>.Instance.Get();
				ItemKey targetItem = character.GetMaxGradeItemToLose(context.Random);
				itemKeys.Clear();
				bool flag2 = targetItem.IsValid();
				if (flag2)
				{
					itemKeys.Add(targetItem);
				}
				Settlement settlement = DomainManager.Organization.GetSettlement(orgInfo.SettlementId);
				settlement.ConfiscateItem(context, character, itemKeys);
				ObjectPool<List<ItemKey>>.Instance.Return(itemKeys);
				result = false;
			}
			return result;
		}

		// Token: 0x06001FE5 RID: 8165 RVA: 0x0019B844 File Offset: 0x00199A44
		public static void ConfiscateAllItems(int charId, bool onlyTakeGradeAboveChar = false)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			GameData.Domains.Character.Character character = DomainManager.Character.GetElement_Objects(charId);
			OrganizationInfo orgInfo = character.GetOrganizationInfo();
			bool flag = !OrganizationDomain.IsSect(orgInfo.OrgTemplateId) || orgInfo.SettlementId < 0;
			if (!flag)
			{
				List<ItemKey> itemKeys = ObjectPool<List<ItemKey>>.Instance.Get();
				sbyte minGrade = onlyTakeGradeAboveChar ? (character.GetOrganizationInfo().Grade + 1) : 0;
				character.GetItemsToLose(itemKeys, minGrade, 8);
				Settlement settlement = DomainManager.Organization.GetSettlement(orgInfo.SettlementId);
				settlement.ConfiscateItem(context, character, itemKeys);
				ObjectPool<List<ItemKey>>.Instance.Return(itemKeys);
			}
		}

		// Token: 0x06001FE6 RID: 8166 RVA: 0x0019B8E8 File Offset: 0x00199AE8
		public static void GenerateSectClothing(int charId, sbyte orgTemplateId, sbyte grade)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			OrganizationMemberItem orgMemberCfg = OrganizationDomain.GetOrgMemberConfig(new OrganizationInfo(orgTemplateId, grade, true, -1));
			short clothTemplateId = orgMemberCfg.Clothing.TemplateId;
			bool flag = clothTemplateId < 0;
			if (flag)
			{
				clothTemplateId = 9;
			}
			ItemKey itemKey = DomainManager.Item.CreateItem(context, 3, clothTemplateId);
			GameData.Domains.Character.Character character = DomainManager.Character.GetElement_Objects(charId);
			EventHelper.AddInventoryItem(character, itemKey, 1);
		}

		// Token: 0x06001FE7 RID: 8167 RVA: 0x0019B950 File Offset: 0x00199B50
		public static void SelectAndEquipClothing(int charId)
		{
			GameData.Domains.Character.Character character = DomainManager.Character.GetElement_Objects(charId);
			bool flag = character.GetEquipment()[4].IsValid();
			if (!flag)
			{
				DataContext context = EventHelper.Domain.MainThreadDataContext;
				ItemKey clothKey = context.Equipping.SelectClothing(context, character);
				bool flag2 = clothKey.IsValid();
				if (flag2)
				{
					character.ChangeEquipment(context, -1, 4, clothKey);
				}
			}
		}

		// Token: 0x06001FE8 RID: 8168 RVA: 0x0019B9B4 File Offset: 0x00199BB4
		public static void FilterGiftForCharacter(int sendGiftCharId, int getGiftCharId, EventArgBox argBox)
		{
			GameData.Domains.Character.Character sendGiftChar;
			bool flag = !DomainManager.Character.TryGetElement_Objects(sendGiftCharId, out sendGiftChar);
			if (flag)
			{
				DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(39, 1);
				defaultInterpolatedStringHandler.AppendLiteral("can not get character to sendGift,Id = ");
				defaultInterpolatedStringHandler.AppendFormatted<int>(sendGiftCharId);
				throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
			}
			GameData.Domains.Character.Character getGiftChar;
			bool flag2 = !DomainManager.Character.TryGetElement_Objects(getGiftCharId, out getGiftChar);
			if (flag2)
			{
				DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(38, 1);
				defaultInterpolatedStringHandler.AppendLiteral("can not get character to getGift,Id = ");
				defaultInterpolatedStringHandler.AppendFormatted<int>(getGiftCharId);
				throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
			}
			OrganizationItem organizationItem = Organization.Instance.GetItem(getGiftChar.GetOrganizationInfo().OrgTemplateId);
			sbyte grade = getGiftChar.GetInteractionGrade();
			bool flag3 = DomainManager.Extra.MartialArtistSkill0Useful(organizationItem);
			if (flag3)
			{
				ProfessionData martialArtistProfessionData = DomainManager.Extra.GetProfessionData(3);
				grade -= martialArtistProfessionData.GetSeniorityGiftLevelReduce();
				bool flag4 = grade < 0;
				if (flag4)
				{
					grade = 0;
				}
			}
			bool flag5 = DomainManager.Extra.CivilianSkill0Useful(organizationItem);
			if (flag5)
			{
				ProfessionData civilianProfessionData = DomainManager.Extra.GetProfessionData(10);
				grade -= civilianProfessionData.GetSeniorityGiftLevelReduce();
				bool flag6 = grade < 0;
				if (flag6)
				{
					grade = 0;
				}
			}
			EventSelectItemData selectItemData;
			bool flag7 = !argBox.Get<EventSelectItemData>("SelectItemInfo", out selectItemData);
			if (flag7)
			{
				selectItemData = new EventSelectItemData();
				selectItemData.CanSelectItemList = new List<ItemDisplayData>();
				selectItemData.FilterList = new List<SelectItemFilter>();
				argBox.Set("SelectItemInfo", selectItemData);
			}
			SelectItemFilter filter = default(SelectItemFilter);
			filter.Key = "GiftKey";
			filter.DisplayDataFilterId = 0;
			filter.FilterTemplateId = -1;
			List<ItemDisplayData> inventoryItems = DomainManager.Character.GetAllInventoryItems(sendGiftChar.GetId());
			foreach (ItemDisplayData displayData in inventoryItems)
			{
				ItemKey itemKey = displayData.Key;
				short subType = ItemTemplateHelper.GetItemSubType(itemKey.ItemType, itemKey.TemplateId);
				bool flag8 = subType != 1202;
				if (flag8)
				{
					bool flag9 = !ItemTemplateHelper.IsTransferable(itemKey.ItemType, itemKey.TemplateId);
					if (flag9)
					{
						continue;
					}
				}
				short itemSubType = ItemTemplateHelper.GetItemSubType(itemKey.ItemType, itemKey.TemplateId);
				bool flag10 = organizationItem != null;
				if (flag10)
				{
					bool flag11 = organizationItem.NoMeatEating && itemSubType == 701;
					if (flag11)
					{
						displayData.UnavailableType = ItemDisplayData.ItemUnavailableType.NoMeat;
					}
					bool flag12 = organizationItem.NoDrinking && itemSubType == 901;
					if (flag12)
					{
						displayData.UnavailableType = ItemDisplayData.ItemUnavailableType.NoAlcohol;
					}
				}
				bool flag13 = grade > ItemTemplateHelper.GetGiftLevel(itemKey.ItemType, itemKey.TemplateId);
				if (flag13)
				{
					displayData.UnavailableType = ItemDisplayData.ItemUnavailableType.HighGrade;
				}
				selectItemData.CanSelectItemList.Add(displayData);
			}
			selectItemData.LoveAndHateItemInfo = DomainManager.Character.GetCharacterLoveAndHateItemInfo(EventHelper.Domain.MainThreadDataContext, getGiftCharId);
			selectItemData.FilterList.Add(filter);
		}

		// Token: 0x06001FE9 RID: 8169 RVA: 0x0019BCC4 File Offset: 0x00199EC4
		public static void FilterAllItemForCharacter(int charId, string itemNameKey, EventArgBox argBox)
		{
			EventHelper.FilterAllItemForCharacterWithParam(charId, itemNameKey, argBox, -1, false);
		}

		// Token: 0x06001FEA RID: 8170 RVA: 0x0019BCD4 File Offset: 0x00199ED4
		public static void FilterAllItemForCharacterWithParam(int charId, string itemNameKey, EventArgBox argBox, sbyte maxGrade = -1, bool includeEquipment = false)
		{
			EventHelper.<>c__DisplayClass800_0 CS$<>8__locals1;
			CS$<>8__locals1.charId = charId;
			CS$<>8__locals1.maxGrade = maxGrade;
			GameData.Domains.Character.Character character;
			bool flag = !DomainManager.Character.TryGetElement_Objects(CS$<>8__locals1.charId, out character);
			if (flag)
			{
				DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(27, 1);
				defaultInterpolatedStringHandler.AppendLiteral("can not get character,Id = ");
				defaultInterpolatedStringHandler.AppendFormatted<int>(CS$<>8__locals1.charId);
				throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
			}
			bool flag2 = !argBox.Get<EventSelectItemData>("SelectItemInfo", out CS$<>8__locals1.selectItemData);
			if (flag2)
			{
				CS$<>8__locals1.selectItemData = new EventSelectItemData();
				CS$<>8__locals1.selectItemData.CanSelectItemList = new List<ItemDisplayData>();
				CS$<>8__locals1.selectItemData.FilterList = new List<SelectItemFilter>();
				argBox.Set("SelectItemInfo", CS$<>8__locals1.selectItemData);
			}
			List<ItemDisplayData> inventoryItems = DomainManager.Character.GetAllInventoryItems(CS$<>8__locals1.charId);
			foreach (ItemDisplayData itemDisplayData in inventoryItems)
			{
				EventHelper.<FilterAllItemForCharacterWithParam>g__Add|800_0(itemDisplayData, ref CS$<>8__locals1);
			}
			if (includeEquipment)
			{
				List<ItemDisplayData> equipmentItems = DomainManager.Character.GetAllEquipmentItems(CS$<>8__locals1.charId);
				foreach (ItemDisplayData itemDisplayData2 in equipmentItems)
				{
					EventHelper.<FilterAllItemForCharacterWithParam>g__Add|800_0(itemDisplayData2, ref CS$<>8__locals1);
				}
			}
			SelectItemFilter filter = default(SelectItemFilter);
			filter.Key = itemNameKey;
			filter.DisplayDataFilterId = 0;
			filter.FilterTemplateId = -1;
			CS$<>8__locals1.selectItemData.FilterList.Add(filter);
		}

		// Token: 0x06001FEB RID: 8171 RVA: 0x0019BE88 File Offset: 0x0019A088
		public static void FilterItemForCharacterByType(int charId, string itemNameKey, EventArgBox argBox, sbyte itemType = -1, short itemSubType = -1, bool includeTransferable = false, List<Predicate<ItemKey>> predicates = null)
		{
			GameData.Domains.Character.Character character;
			bool flag = !DomainManager.Character.TryGetElement_Objects(charId, out character);
			if (flag)
			{
				DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(27, 1);
				defaultInterpolatedStringHandler.AppendLiteral("can not get character,Id = ");
				defaultInterpolatedStringHandler.AppendFormatted<int>(charId);
				throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
			}
			EventSelectItemData selectItemData;
			bool flag2 = !argBox.Get<EventSelectItemData>("SelectItemInfo", out selectItemData);
			if (flag2)
			{
				selectItemData = new EventSelectItemData();
				argBox.Set("SelectItemInfo", selectItemData);
			}
			SelectItemFilter filter = default(SelectItemFilter);
			filter.Key = itemNameKey;
			filter.DisplayDataFilterId = 0;
			filter.FilterTemplateId = -1;
			List<ItemDisplayData> inventoryItems = DomainManager.Character.GetAllInventoryItems(charId);
			foreach (ItemDisplayData itemDisplayData in inventoryItems)
			{
				ItemKey itemKey = itemDisplayData.Key;
				bool flag3 = !includeTransferable && !ItemTemplateHelper.IsTransferable(itemKey.ItemType, itemKey.TemplateId);
				if (!flag3)
				{
					bool flag4 = itemKey.ItemType != itemType && itemType != -1;
					if (!flag4)
					{
						short subType = ItemTemplateHelper.GetItemSubType(itemKey.ItemType, itemKey.TemplateId);
						bool flag5 = subType != itemSubType && itemSubType != -1;
						if (!flag5)
						{
							bool flag6 = InteractOfLove.IsInstalled() && charId != DomainManager.Taiwu.GetTaiwuCharId();
							if (flag6)
							{
								bool flag7 = InteractOfLoveEventHelper.IsCurrentLoveToken(itemKey, charId);
								if (flag7)
								{
									continue;
								}
							}
							bool flag8 = ((predicates != null) ? new bool?(predicates.Any((Predicate<ItemKey> predicate) => !predicate(itemKey))) : null) ?? false;
							if (!flag8)
							{
								selectItemData.CanSelectItemList.Add(itemDisplayData);
							}
						}
					}
				}
			}
			selectItemData.FilterList.Add(filter);
		}

		// Token: 0x06001FEC RID: 8172 RVA: 0x0019C0C4 File Offset: 0x0019A2C4
		public static List<ItemKey> GetCharacterItemByPredicates(int charId, List<Predicate<ItemKey>> predicates)
		{
			GameData.Domains.Character.Character character;
			bool flag = !DomainManager.Character.TryGetElement_Objects(charId, out character);
			if (flag)
			{
				DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(27, 1);
				defaultInterpolatedStringHandler.AppendLiteral("can not get character,Id = ");
				defaultInterpolatedStringHandler.AppendFormatted<int>(charId);
				throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
			}
			List<ItemKey> items = new List<ItemKey>();
			Inventory inventory = character.GetInventory();
			foreach (KeyValuePair<ItemKey, int> pair in inventory.Items)
			{
				ItemKey itemKey = pair.Key;
				bool flag2 = ((predicates != null) ? new bool?(predicates.Any((Predicate<ItemKey> predicate) => !predicate(itemKey))) : null) ?? false;
				if (!flag2)
				{
					items.Add(itemKey);
				}
			}
			return items;
		}

		// Token: 0x06001FED RID: 8173 RVA: 0x0019C1D4 File Offset: 0x0019A3D4
		public static ItemKey SelectCharacterItemByGrade(int charId, sbyte minGrade, sbyte maxGrade, bool includeTransferable = false, sbyte itemType = -1, short itemSubType = -1, List<Predicate<ItemKey>> predicates = null)
		{
			GameData.Domains.Character.Character character;
			bool flag = !DomainManager.Character.TryGetElement_Objects(charId, out character);
			if (flag)
			{
				DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(27, 1);
				defaultInterpolatedStringHandler.AppendLiteral("can not get character,Id = ");
				defaultInterpolatedStringHandler.AppendFormatted<int>(charId);
				throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
			}
			Inventory inventory = character.GetInventory();
			List<ItemKey> itemsCanSelect = ObjectPool<List<ItemKey>>.Instance.Get();
			foreach (KeyValuePair<ItemKey, int> pair in inventory.Items)
			{
				ItemKey itemKey = pair.Key;
				bool flag2 = !includeTransferable && !ItemTemplateHelper.IsTransferable(itemKey.ItemType, itemKey.TemplateId);
				if (!flag2)
				{
					bool flag3 = itemKey.ItemType != itemType && itemType != -1;
					if (!flag3)
					{
						short subType = ItemTemplateHelper.GetItemSubType(itemKey.ItemType, itemKey.TemplateId);
						bool flag4 = subType != itemSubType && itemSubType != -1;
						if (!flag4)
						{
							sbyte grade = ItemTemplateHelper.GetGrade(itemKey.ItemType, itemKey.TemplateId);
							bool flag5 = grade < minGrade || grade > maxGrade;
							if (!flag5)
							{
								bool flag6 = ((predicates != null) ? new bool?(predicates.Any((Predicate<ItemKey> predicate) => !predicate(itemKey))) : null) ?? false;
								if (!flag6)
								{
									bool flag7 = InteractOfLove.IsInstalled() && charId != DomainManager.Taiwu.GetTaiwuCharId();
									if (flag7)
									{
										bool flag8 = InteractOfLoveEventHelper.IsCurrentLoveToken(itemKey, charId);
										if (flag8)
										{
											continue;
										}
									}
									itemsCanSelect.Add(itemKey);
								}
							}
						}
					}
				}
			}
			bool flag9 = itemsCanSelect.Count == 0;
			ItemKey result;
			if (flag9)
			{
				ObjectPool<List<ItemKey>>.Instance.Return(itemsCanSelect);
				result = ItemKey.Invalid;
			}
			else
			{
				ItemKey item = itemsCanSelect[EventHelper.Domain.MainThreadDataContext.Random.Next(itemsCanSelect.Count)];
				ObjectPool<List<ItemKey>>.Instance.Return(itemsCanSelect);
				result = item;
			}
			return result;
		}

		// Token: 0x06001FEE RID: 8174 RVA: 0x0019C454 File Offset: 0x0019A654
		public static ItemKey SelectCharacterTopGradeItem(int charId, bool includeTransferable = false)
		{
			GameData.Domains.Character.Character character;
			bool flag = !DomainManager.Character.TryGetElement_Objects(charId, out character);
			if (flag)
			{
				DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(27, 1);
				defaultInterpolatedStringHandler.AppendLiteral("can not get character,Id = ");
				defaultInterpolatedStringHandler.AppendFormatted<int>(charId);
				throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
			}
			sbyte maxGrade = EventHelper.GetCharacterTopGradeOfItem(charId, includeTransferable);
			bool flag2 = maxGrade == -1;
			ItemKey result;
			if (flag2)
			{
				result = ItemKey.Invalid;
			}
			else
			{
				Inventory inventory = character.GetInventory();
				List<ItemKey> itemsCanSelect = ObjectPool<List<ItemKey>>.Instance.Get();
				foreach (KeyValuePair<ItemKey, int> pair in inventory.Items)
				{
					ItemKey itemKey = pair.Key;
					bool flag3 = !includeTransferable && !ItemTemplateHelper.IsTransferable(itemKey.ItemType, itemKey.TemplateId);
					if (!flag3)
					{
						sbyte grade = ItemTemplateHelper.GetGrade(itemKey.ItemType, itemKey.TemplateId);
						bool flag4 = grade != maxGrade;
						if (!flag4)
						{
							bool flag5 = InteractOfLove.IsInstalled() && charId != DomainManager.Taiwu.GetTaiwuCharId();
							if (flag5)
							{
								bool flag6 = InteractOfLoveEventHelper.IsCurrentLoveToken(itemKey, charId);
								if (flag6)
								{
									continue;
								}
							}
							itemsCanSelect.Add(itemKey);
						}
					}
				}
				bool flag7 = itemsCanSelect.Count == 0;
				if (flag7)
				{
					ObjectPool<List<ItemKey>>.Instance.Return(itemsCanSelect);
					result = ItemKey.Invalid;
				}
				else
				{
					ItemKey item = itemsCanSelect[EventHelper.Domain.MainThreadDataContext.Random.Next(itemsCanSelect.Count)];
					ObjectPool<List<ItemKey>>.Instance.Return(itemsCanSelect);
					result = item;
				}
			}
			return result;
		}

		// Token: 0x06001FEF RID: 8175 RVA: 0x0019C60C File Offset: 0x0019A80C
		public static sbyte GetCharacterTopGradeOfItem(int charId, bool includeTransferable = false)
		{
			GameData.Domains.Character.Character character;
			bool flag = !DomainManager.Character.TryGetElement_Objects(charId, out character);
			if (flag)
			{
				DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(27, 1);
				defaultInterpolatedStringHandler.AppendLiteral("can not get character,Id = ");
				defaultInterpolatedStringHandler.AppendFormatted<int>(charId);
				throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
			}
			Inventory inventory = character.GetInventory();
			sbyte maxGrade = -1;
			foreach (KeyValuePair<ItemKey, int> pair in inventory.Items)
			{
				ItemKey itemKey = pair.Key;
				bool flag2 = !includeTransferable && !ItemTemplateHelper.IsTransferable(itemKey.ItemType, itemKey.TemplateId);
				if (!flag2)
				{
					bool flag3 = InteractOfLove.IsInstalled() && charId != DomainManager.Taiwu.GetTaiwuCharId();
					if (flag3)
					{
						bool flag4 = InteractOfLoveEventHelper.IsCurrentLoveToken(itemKey, charId);
						if (flag4)
						{
							continue;
						}
					}
					sbyte grade = ItemTemplateHelper.GetGrade(itemKey.ItemType, itemKey.TemplateId);
					bool flag5 = grade > maxGrade;
					if (flag5)
					{
						maxGrade = grade;
					}
				}
			}
			return maxGrade;
		}

		// Token: 0x06001FF0 RID: 8176 RVA: 0x0019C73C File Offset: 0x0019A93C
		public static void StartSelectReadingBookCount(EventArgBox argBox, string selectItemKey)
		{
			ItemKey itemKey;
			bool flag = !argBox.Get<ItemKey>(selectItemKey, out itemKey);
			if (!flag)
			{
				EventSelectReadingBookCountData readingBookCountData;
				bool flag2 = !argBox.Get<EventSelectReadingBookCountData>("SelectReadingBookCount", out readingBookCountData);
				if (flag2)
				{
					readingBookCountData = new EventSelectReadingBookCountData();
				}
				ItemDisplayData itemDisplayData = DomainManager.Item.GetItemDisplayData(itemKey, -1);
				readingBookCountData.SelectedBookData = itemDisplayData;
				readingBookCountData.MaxReadingBookCount = (int)Math.Min(itemDisplayData.Durability, GlobalConfig.Instance.SpiritualDebtInteractionRanshanMaxReadingCount);
				argBox.Set("SelectReadingBookCount", readingBookCountData);
			}
		}

		// Token: 0x06001FF1 RID: 8177 RVA: 0x0019C7B8 File Offset: 0x0019A9B8
		public static void StartSelectNeigongLoopingCount(EventArgBox argBox, int charId, short combatSkillTemplateId)
		{
			EventSelectNeigongLoopingCountData selectNeigongLoopingCount;
			bool flag = !argBox.Get<EventSelectNeigongLoopingCountData>("SelectNeigongLoopingCount", out selectNeigongLoopingCount);
			if (flag)
			{
				selectNeigongLoopingCount = new EventSelectNeigongLoopingCountData();
			}
			CombatSkillDisplayData combatSkillDisplayData = DomainManager.CombatSkill.GetCombatSkillDisplayDataOnce(charId, combatSkillTemplateId);
			selectNeigongLoopingCount.SelectedCombatSkill = combatSkillDisplayData;
			selectNeigongLoopingCount.MaxLoopingCount = (int)GlobalConfig.Instance.SpiritualDebtInteractionRanshanMaxNeigongLoopingCount;
			argBox.Set("SelectNeigongLoopingCount", selectNeigongLoopingCount);
		}

		// Token: 0x06001FF2 RID: 8178 RVA: 0x0019C814 File Offset: 0x0019AA14
		public static void StartSelectFuyuFaithCount(EventArgBox argBox, GameData.Domains.Character.Character character)
		{
			EventSelectFuyuFaithCountData fuyuFaithCountData;
			bool flag = !argBox.Get<EventSelectFuyuFaithCountData>("SelectFuyuFaithCount", out fuyuFaithCountData);
			if (flag)
			{
				fuyuFaithCountData = new EventSelectFuyuFaithCountData();
			}
			fuyuFaithCountData.Counter = character.GetDarkAshCounter();
			fuyuFaithCountData.Curr = DomainManager.Extra.GetFuyuFaith();
			fuyuFaithCountData.Max = (int)character.GetLeftMaxHealth(false);
			argBox.Set("SelectFuyuFaithCount", fuyuFaithCountData);
		}

		// Token: 0x06001FF3 RID: 8179 RVA: 0x0019C874 File Offset: 0x0019AA74
		public static int GetTaiwuInventoryItemCount(sbyte itemType, short itemTemplateId)
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			Inventory inventory = taiwu.GetInventory();
			return inventory.GetInventoryItemCount(itemType, itemTemplateId);
		}

		// Token: 0x06001FF4 RID: 8180 RVA: 0x0019C8A0 File Offset: 0x0019AAA0
		public static int GetCharCricketCount(int charId)
		{
			GameData.Domains.Character.Character character = DomainManager.Character.GetElement_Objects(charId);
			Dictionary<ItemKey, int> inventoryItems = character.GetInventory().Items;
			int counter = 0;
			foreach (ItemKey itemKey in inventoryItems.Keys)
			{
				bool flag = itemKey.ItemType == 11;
				if (flag)
				{
					counter++;
				}
			}
			return counter;
		}

		// Token: 0x06001FF5 RID: 8181 RVA: 0x0019C928 File Offset: 0x0019AB28
		public static List<ItemKey> GetCharCricketList(int charId, int minWinCount = 0)
		{
			Dictionary<ItemKey, int> inventoryItems = DomainManager.Character.GetElement_Objects(charId).GetInventory().Items;
			List<ItemKey> cricketList = new List<ItemKey>();
			foreach (ItemKey itemKey in inventoryItems.Keys)
			{
				bool flag = itemKey.ItemType == 11;
				if (flag)
				{
					CricketData cricketData = DomainManager.Item.GetCricketData(itemKey.Id);
					bool flag2 = (int)cricketData[5] >= minWinCount;
					if (flag2)
					{
						cricketList.Add(itemKey);
					}
				}
			}
			return cricketList;
		}

		// Token: 0x06001FF6 RID: 8182 RVA: 0x0019C9DC File Offset: 0x0019ABDC
		public static ItemKey CreateCricket(int charId, sbyte grade)
		{
			GameData.Domains.Character.Character character = DomainManager.Character.GetElement_Objects(charId);
			ItemKey itemKey = DomainManager.Item.CreateCricket(EventHelper.Domain.MainThreadDataContext, (short)grade);
			EventHelper.AddInventoryItem(character, itemKey, 1);
			return itemKey;
		}

		// Token: 0x06001FF7 RID: 8183 RVA: 0x0019CA1C File Offset: 0x0019AC1C
		public static void KillCricket(ItemKey itemKey)
		{
			GameData.Domains.Item.Cricket cricket;
			bool flag = DomainManager.Item.TryGetElement_Crickets(itemKey.Id, out cricket);
			if (flag)
			{
				cricket.SetCurrDurability(0, EventHelper.Domain.MainThreadDataContext);
			}
		}

		// Token: 0x06001FF8 RID: 8184 RVA: 0x0019CA54 File Offset: 0x0019AC54
		public static void SetCricketLeftLife(ItemKey itemKey, int leftLife)
		{
			GameData.Domains.Item.Cricket cricket;
			bool flag = DomainManager.Item.TryGetElement_Crickets(itemKey.Id, out cricket);
			if (flag)
			{
				cricket.SetAge((sbyte)Math.Max(cricket.CalcMaxAge() - leftLife, 0), EventHelper.Domain.MainThreadDataContext);
			}
		}

		// Token: 0x06001FF9 RID: 8185 RVA: 0x0019CA98 File Offset: 0x0019AC98
		public static void AdjustCricketLife(ItemKey itemKey, int lifeDelta)
		{
			GameData.Domains.Item.Cricket cricket;
			bool flag = DomainManager.Item.TryGetElement_Crickets(itemKey.Id, out cricket);
			if (flag)
			{
				DomainManager.Extra.AdjustCricketExtraAge(EventHelper.Domain.MainThreadDataContext, cricket.GetId(), (short)lifeDelta);
			}
		}

		// Token: 0x06001FFA RID: 8186 RVA: 0x0019CADC File Offset: 0x0019ACDC
		public static void ChangeCharacterHappinessByItemChange(ItemKey itemKey, int charId, bool isGetItem)
		{
			GameData.Domains.Character.Character character;
			bool flag = DomainManager.Character.TryGetElement_Objects(charId, out character);
			if (flag)
			{
				sbyte happinessChange = DomainManager.Item.GetBaseItem(itemKey).GetHappinessChange();
				bool flag2 = !isGetItem;
				if (flag2)
				{
					happinessChange *= -1;
				}
				character.ChangeHappiness(EventHelper.Domain.MainThreadDataContext, (int)happinessChange);
			}
		}

		// Token: 0x06001FFB RID: 8187 RVA: 0x0019CB30 File Offset: 0x0019AD30
		public static bool GetSimulateCricketBattleResult(int leftCharId, int rightCharId)
		{
			bool flag = !DomainManager.Character.IsCharacterAlive(leftCharId);
			if (flag)
			{
				DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(62, 1);
				defaultInterpolatedStringHandler.AppendLiteral("GetSimulateCricketBattleResult: unable to get character of id ");
				defaultInterpolatedStringHandler.AppendFormatted<int>(leftCharId);
				throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
			}
			bool flag2 = !DomainManager.Character.IsCharacterAlive(rightCharId);
			if (flag2)
			{
				DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(62, 1);
				defaultInterpolatedStringHandler.AppendLiteral("GetSimulateCricketBattleResult: unable to get character of id ");
				defaultInterpolatedStringHandler.AppendFormatted<int>(rightCharId);
				throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
			}
			List<ItemDisplayData> leftCharacterCricketsDisplayDataList = DomainManager.Item.GetNpcCricketDisplayDataListForCricketBattle(EventHelper.Domain.MainThreadDataContext, leftCharId, EventHelper.Domain.GetTempCreateItemList(), -1);
			List<ItemDisplayData> rightCharacterCricketsDisplayDataList = DomainManager.Item.GetNpcCricketDisplayDataListForCricketBattle(EventHelper.Domain.MainThreadDataContext, rightCharId, EventHelper.Domain.GetTempCreateItemList(), -1);
			EventHelper.Domain.SetItemListOfLeft(leftCharacterCricketsDisplayDataList.ToArray(), EventHelper.Domain.MainThreadDataContext);
			EventHelper.Domain.SetItemListOfRight(rightCharacterCricketsDisplayDataList.ToArray(), EventHelper.Domain.MainThreadDataContext);
			EventHelper.Domain.SetShowItemWithCricketBattleGuess(true, EventHelper.Domain.MainThreadDataContext);
			CollectionUtils.Shuffle<ItemDisplayData>(EventHelper.Domain.MainThreadDataContext.Random, leftCharacterCricketsDisplayDataList);
			CollectionUtils.Shuffle<ItemDisplayData>(EventHelper.Domain.MainThreadDataContext.Random, rightCharacterCricketsDisplayDataList);
			int leftWinCount = 0;
			for (int i = 0; i < 3; i++)
			{
				CricketBattleSimulator.SetBattlers(leftCharacterCricketsDisplayDataList[i].Key, rightCharacterCricketsDisplayDataList[i].Key, EventHelper.Domain.MainThreadDataContext);
				bool flag3 = CricketBattleSimulator.GetBattleResult() == 0;
				if (flag3)
				{
					leftWinCount++;
				}
				bool flag4 = leftWinCount >= 2;
				if (flag4)
				{
					break;
				}
			}
			return leftWinCount >= 2;
		}

		// Token: 0x06001FFC RID: 8188 RVA: 0x0019CCEC File Offset: 0x0019AEEC
		public static ItemKey CreateSkillBook(short templateId, sbyte completePagesCount = -1, sbyte lostPagesCount = -1, sbyte outlinePageType = -1, sbyte normalPagesDirectProb = 50, bool outlineAlwaysComplete = true)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			return DomainManager.Item.CreateSkillBook(context, templateId, completePagesCount, lostPagesCount, outlinePageType, normalPagesDirectProb, outlineAlwaysComplete);
		}

		// Token: 0x06001FFD RID: 8189 RVA: 0x0019CD1C File Offset: 0x0019AF1C
		public static int GetEquipmentsSlotIndex(GameData.Domains.Character.Character character, ItemKey itemKey)
		{
			ItemKey[] equipments = character.GetEquipment();
			return equipments.IndexOf(itemKey);
		}

		// Token: 0x06001FFE RID: 8190 RVA: 0x0019CD40 File Offset: 0x0019AF40
		[Obsolete]
		public static void ApplyTamingResult(GameData.Domains.Character.Character character, ItemKey carrier, bool isWin, Location location, ItemKey rope)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			bool flag = carrier.ItemType == 5;
			if (flag)
			{
				DomainManager.Extra.ApplyJiaoTamingResult(context, EventHelper.GetOrCreateAnimalByItemKey(carrier), isWin, location, rope);
			}
			else
			{
				DomainManager.Extra.ApplyTamingResult(context, character, carrier, isWin, location, rope);
			}
		}

		// Token: 0x06001FFF RID: 8191 RVA: 0x0019CD94 File Offset: 0x0019AF94
		public static void ApplyAnimalTamingResult(GameData.Domains.Character.Character character, GameData.Domains.Character.Animal animal, bool isWin, Location location, ItemKey rope)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			bool flag = animal.Type == 2;
			if (flag)
			{
				DomainManager.Extra.ApplyJiaoTamingResult(context, animal, isWin, location, rope);
			}
			else
			{
				DomainManager.Extra.ApplyTamingResult(context, character, animal.ItemKey, isWin, location, rope);
			}
		}

		// Token: 0x06002000 RID: 8192 RVA: 0x0019CDE8 File Offset: 0x0019AFE8
		public static void SetCarrierTamePoint(int carrierId, int point = 100)
		{
			DomainManager.Extra.SetCarrierTamePoint(EventHelper.Domain.MainThreadDataContext, carrierId, point);
		}

		// Token: 0x06002001 RID: 8193 RVA: 0x0019CE04 File Offset: 0x0019B004
		public static string TaiwuSendGiftToCharacter(GameData.Domains.Character.Character character, ItemKey gift)
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			int favorabilityValue = EventHelper.GetGiftItemFavorabilityChange(gift, character);
			short beforeChangeFavor = EventHelper.GetFavorability(character, taiwu);
			short happinessValue = (short)EventHelper.GetItemHappinessChange(gift);
			bool flag = InteractOfLoveEventHelper.IsCurrentLoveToken(gift, character.GetId());
			string result;
			if (flag)
			{
				result = "25a22ca7-64c1-4ed2-89ba-4bfae952644b";
			}
			else
			{
				bool flag2 = InteractOfLoveEventHelper.IsPreviousLoveToken(gift, character.GetId());
				if (flag2)
				{
					result = "d0fe7678-26c0-4f49-aafe-6d7a0fa57d06";
				}
				else
				{
					bool flag3 = gift.ItemType == 7 || gift.ItemType == 9;
					if (flag3)
					{
						bool flag4 = ItemTemplateHelper.GetItemSubType(gift.ItemType, gift.TemplateId) == 901 && EventHelper.IsSectNoDrinking(character.GetOrganizationInfo().OrgTemplateId);
						if (flag4)
						{
							result = "db7cfce2-ad10-43dd-919d-975b8d207ac0";
						}
						else
						{
							bool flag5 = ItemTemplateHelper.GetItemSubType(gift.ItemType, gift.TemplateId) == 701 && EventHelper.IsSectNoMeatEating(character.GetOrganizationInfo().OrgTemplateId);
							if (flag5)
							{
								result = "e6deec73-901e-46b2-88ee-cea3019c78d3";
							}
							else
							{
								bool flag6 = EventHelper.GetAvailableEatingSlotsCount(character.GetId()) > 0;
								if (flag6)
								{
									bool flag7 = EventHelper.IsItemPoisoned(gift) && character.TryDetectAttachedPoisons(gift);
									if (flag7)
									{
										result = "ed802fcb-73a7-4fe8-a7c1-9bec9be09d45";
									}
									else
									{
										EventHelper.TransferInventoryItemWithDebt(taiwu.GetId(), character.GetId(), gift, 1, false);
										EventHelper.AddEatingItem(character.GetId(), gift);
										bool flag8 = EventHelper.GetCharLovingItemSubType(character.GetId()) == ItemTemplateHelper.GetItemSubType(gift.ItemType, gift.TemplateId);
										if (flag8)
										{
											EventHelper.ChangeFavorabilityOptionalRepeatedEvent(character, taiwu, EventHelper.ClampFavorabilityChangeValue(favorabilityValue));
											EventHelper.ChangeRoleHappiness(character, (int)(happinessValue * 2));
											EventHelper.SetCharLovingItemSubTypeRevealed(character.GetId(), true);
											short afterChangeFavor = EventHelper.GetFavorability(character, taiwu);
											result = "a431b14a-a2ec-4799-baaf-c9eee30cfc30";
										}
										else
										{
											bool flag9 = EventHelper.GetCharHatingItemSubType(character.GetId()) == ItemTemplateHelper.GetItemSubType(gift.ItemType, gift.TemplateId);
											if (flag9)
											{
												EventHelper.ChangeFavorabilityOptionalRepeatedEvent(character, taiwu, EventHelper.ClampFavorabilityChangeValue(favorabilityValue / 2));
												EventHelper.ChangeRoleHappiness(character, (int)(happinessValue / 2));
												EventHelper.SetCharHatingItemSubTypeRevealed(character.GetId(), true);
												short afterChangeFavor2 = EventHelper.GetFavorability(character, taiwu);
												result = "5133fa31-d3ae-4516-9038-fde3bf92f03d";
											}
											else
											{
												EventHelper.ChangeFavorabilityOptionalRepeatedEvent(character, taiwu, EventHelper.ClampFavorabilityChangeValue(favorabilityValue));
												EventHelper.ChangeRoleHappiness(character, (int)happinessValue);
												short afterChangeFavor3 = EventHelper.GetFavorability(character, taiwu);
												result = "aa12fcb4-d645-4655-a077-4146f1ea0a85";
											}
										}
									}
								}
								else
								{
									result = "19e3e1c8-f38f-4337-b3c2-82b2f547c652";
								}
							}
						}
					}
					else
					{
						bool flag10 = gift.ItemType == 2 || gift.ItemType == 1 || gift.ItemType == 4 || gift.ItemType == 3 || gift.ItemType == 0;
						if (flag10)
						{
							bool flag11 = EventHelper.IsItemPoisoned(gift) && character.TryDetectAttachedPoisons(gift) && !Organization.Instance[character.GetOrganizationInfo().OrgTemplateId].AllowPoisoning;
							if (flag11)
							{
								EventHelper.TransferInventoryItemWithDebt(taiwu.GetId(), character.GetId(), gift, 1, false);
								favorabilityValue /= 2;
								bool flag12 = EventHelper.GetCharLovingItemSubType(character.GetId()) == ItemTemplateHelper.GetItemSubType(gift.ItemType, gift.TemplateId);
								if (flag12)
								{
									EventHelper.ChangeFavorabilityOptionalRepeatedEvent(character, taiwu, EventHelper.ClampFavorabilityChangeValue(favorabilityValue * 2));
									EventHelper.ChangeRoleHappiness(character, (int)(happinessValue * 2));
									EventHelper.SetCharLovingItemSubTypeRevealed(character.GetId(), true);
								}
								bool flag13 = EventHelper.GetCharHatingItemSubType(character.GetId()) == ItemTemplateHelper.GetItemSubType(gift.ItemType, gift.TemplateId);
								if (flag13)
								{
									EventHelper.ChangeFavorabilityOptionalRepeatedEvent(character, taiwu, EventHelper.ClampFavorabilityChangeValue(favorabilityValue / 2));
									EventHelper.ChangeRoleHappiness(character, (int)(happinessValue / 2));
									EventHelper.SetCharHatingItemSubTypeRevealed(character.GetId(), true);
								}
								else
								{
									EventHelper.ChangeFavorabilityOptionalRepeatedEvent(character, taiwu, EventHelper.ClampFavorabilityChangeValue(favorabilityValue));
									EventHelper.ChangeRoleHappiness(character, (int)happinessValue);
								}
								short afterChangeFavor4 = EventHelper.GetFavorability(character, taiwu);
								result = "40b3b323-9892-4f6c-a6d4-aa0fd6f09cd0";
							}
							else
							{
								EventHelper.TransferInventoryItemWithDebt(taiwu.GetId(), character.GetId(), gift, 1, false);
								bool flag14 = EventHelper.GetCharLovingItemSubType(character.GetId()) == ItemTemplateHelper.GetItemSubType(gift.ItemType, gift.TemplateId);
								if (flag14)
								{
									EventHelper.ChangeFavorabilityOptionalRepeatedEvent(character, taiwu, EventHelper.ClampFavorabilityChangeValue(favorabilityValue * 2));
									EventHelper.ChangeRoleHappiness(character, (int)(happinessValue * 2));
									EventHelper.SetCharLovingItemSubTypeRevealed(character.GetId(), true);
									short afterChangeFavor5 = EventHelper.GetFavorability(character, taiwu);
									result = "a431b14a-a2ec-4799-baaf-c9eee30cfc30";
								}
								else
								{
									bool flag15 = EventHelper.GetCharHatingItemSubType(character.GetId()) == ItemTemplateHelper.GetItemSubType(gift.ItemType, gift.TemplateId);
									if (flag15)
									{
										EventHelper.ChangeFavorabilityOptionalRepeatedEvent(character, taiwu, EventHelper.ClampFavorabilityChangeValue(favorabilityValue / 2));
										EventHelper.ChangeRoleHappiness(character, (int)(happinessValue / 2));
										EventHelper.SetCharHatingItemSubTypeRevealed(character.GetId(), true);
										short afterChangeFavor6 = EventHelper.GetFavorability(character, taiwu);
										result = "5133fa31-d3ae-4516-9038-fde3bf92f03d";
									}
									else
									{
										EventHelper.ChangeFavorabilityOptionalRepeatedEvent(character, taiwu, EventHelper.ClampFavorabilityChangeValue(favorabilityValue));
										EventHelper.ChangeRoleHappiness(character, (int)happinessValue);
										short afterChangeFavor7 = EventHelper.GetFavorability(character, taiwu);
										result = "aa12fcb4-d645-4655-a077-4146f1ea0a85";
									}
								}
							}
						}
						else
						{
							bool flag16 = ItemTemplateHelper.GetItemSubType(gift.ItemType, gift.TemplateId) == 1202;
							if (flag16)
							{
								bool flag17 = EventHelper.CheckCharacterWillAcceptLegendaryBookAsGift(character.GetId());
								if (flag17)
								{
									EventHelper.TransferInventoryItem(taiwu, character, gift, 1);
									EventHelper.ChangeFavorabilityOptionalRepeatedEvent(character, taiwu, EventHelper.ClampFavorabilityChangeValue(favorabilityValue));
									EventHelper.ChangeRoleHappiness(character, (int)happinessValue);
									short afterChangeFavor8 = EventHelper.GetFavorability(character, taiwu);
									int gameDate = EventHelper.GetGameDate();
									Location location = taiwu.GetLocation();
									EventHelper.GetLifeRecordCollection().AddGiveItem(taiwu.GetId(), gameDate, character.GetId(), location, gift.ItemType, gift.TemplateId);
									sbyte behaviorType = EventHelper.GetRoleBehavior(character);
									bool flag18 = behaviorType == 0;
									if (flag18)
									{
										result = "15c076ec-eafb-46f2-ac41-d380be6ce1c0";
									}
									else
									{
										bool flag19 = behaviorType == 1;
										if (flag19)
										{
											result = "4003bc5f-adb1-4966-ac0d-ef29858f0cc2";
										}
										else
										{
											bool flag20 = behaviorType == 2;
											if (flag20)
											{
												result = "9a143f7a-e237-4e20-b805-b789b6f5dabb";
											}
											else
											{
												bool flag21 = behaviorType == 3;
												if (flag21)
												{
													result = "69785bef-7610-406b-b003-447cf9565b4a";
												}
												else
												{
													bool flag22 = behaviorType == 4;
													if (flag22)
													{
														result = "afbe6948-2efb-48e3-887d-17de335dfbec";
													}
													else
													{
														result = string.Empty;
													}
												}
											}
										}
									}
								}
								else
								{
									result = "1f24a6d9-00b7-4982-bb62-13aca9af73e4";
								}
							}
							else
							{
								bool flag23 = EventHelper.IsItemPoisoned(gift) && character.TryDetectAttachedPoisons(gift);
								if (flag23)
								{
									result = "ed802fcb-73a7-4fe8-a7c1-9bec9be09d45";
								}
								else
								{
									EventHelper.TransferInventoryItemWithDebt(taiwu.GetId(), character.GetId(), gift, 1, false);
									bool flag24 = EventHelper.GetCharLovingItemSubType(character.GetId()) == ItemTemplateHelper.GetItemSubType(gift.ItemType, gift.TemplateId);
									if (flag24)
									{
										EventHelper.ChangeFavorabilityOptionalRepeatedEvent(character, taiwu, EventHelper.ClampFavorabilityChangeValue(favorabilityValue * 2));
										EventHelper.ChangeRoleHappiness(character, (int)(happinessValue * 2));
										EventHelper.SetCharLovingItemSubTypeRevealed(character.GetId(), true);
										short afterChangeFavor9 = EventHelper.GetFavorability(character, taiwu);
										result = "a431b14a-a2ec-4799-baaf-c9eee30cfc30";
									}
									else
									{
										bool flag25 = EventHelper.GetCharHatingItemSubType(character.GetId()) == ItemTemplateHelper.GetItemSubType(gift.ItemType, gift.TemplateId);
										if (flag25)
										{
											EventHelper.ChangeFavorabilityOptionalRepeatedEvent(character, taiwu, EventHelper.ClampFavorabilityChangeValue(favorabilityValue / 2));
											EventHelper.ChangeRoleHappiness(character, (int)(happinessValue / 2));
											EventHelper.SetCharHatingItemSubTypeRevealed(character.GetId(), true);
											short afterChangeFavor10 = EventHelper.GetFavorability(character, taiwu);
											result = "5133fa31-d3ae-4516-9038-fde3bf92f03d";
										}
										else
										{
											EventHelper.ChangeFavorabilityOptionalRepeatedEvent(character, taiwu, EventHelper.ClampFavorabilityChangeValue(favorabilityValue));
											EventHelper.ChangeRoleHappiness(character, (int)happinessValue);
											short afterChangeFavor11 = EventHelper.GetFavorability(character, taiwu);
											result = "aa12fcb4-d645-4655-a077-4146f1ea0a85";
										}
									}
								}
							}
						}
					}
				}
			}
			return result;
		}

		// Token: 0x06002002 RID: 8194 RVA: 0x0019D51C File Offset: 0x0019B71C
		public static sbyte GetCharacterOwnLegendaryBookState(int charId)
		{
			GameData.Domains.Character.Character character;
			bool flag = DomainManager.Character.TryGetElement_Objects(charId, out character);
			sbyte result;
			if (flag)
			{
				result = character.GetLegendaryBookOwnerState();
			}
			else
			{
				result = -1;
			}
			return result;
		}

		// Token: 0x06002003 RID: 8195 RVA: 0x0019D54C File Offset: 0x0019B74C
		public static bool CalcRequestLegendaryBookResult(int charId)
		{
			sbyte ownLegendaryBookState = EventHelper.GetCharacterOwnLegendaryBookState(charId);
			bool flag = ownLegendaryBookState == 2;
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				int score = 0;
				int taiwuCharId = EventArgBox.TaiwuCharacterId;
				bool flag2 = EventHelper.HasRelationBetweenCharacters(charId, taiwuCharId, 1) || EventHelper.HasRelationBetweenCharacters(charId, taiwuCharId, 64) || EventHelper.HasRelationBetweenCharacters(charId, taiwuCharId, 8);
				if (flag2)
				{
					score += 4;
				}
				bool flag3 = EventHelper.HasRelationBetweenCharacters(charId, taiwuCharId, 2) || EventHelper.HasRelationBetweenCharacters(charId, taiwuCharId, 128) || EventHelper.HasRelationBetweenCharacters(charId, taiwuCharId, 16);
				if (flag3)
				{
					score += 3;
				}
				bool flag4 = EventHelper.HasRelationBetweenCharacters(charId, taiwuCharId, 1024);
				if (flag4)
				{
					score += 3;
				}
				bool flag5 = EventHelper.HasRelationBetweenCharacters(charId, taiwuCharId, 512);
				if (flag5)
				{
					score += 2;
				}
				bool flag6 = EventHelper.HasRelationBetweenCharacters(charId, taiwuCharId, 4) || EventHelper.HasRelationBetweenCharacters(charId, taiwuCharId, 256) || EventHelper.HasRelationBetweenCharacters(charId, taiwuCharId, 32);
				if (flag6)
				{
					score += 2;
				}
				bool flag7 = EventHelper.HasRelationBetweenCharacters(charId, taiwuCharId, 16384);
				if (flag7)
				{
					score++;
				}
				bool flag8 = EventHelper.HasRelationBetweenCharacters(charId, taiwuCharId, 8192);
				if (flag8)
				{
					score++;
				}
				bool flag9 = EventHelper.HasRelationBetweenCharacters(charId, taiwuCharId, 32768);
				if (flag9)
				{
					score -= 4;
				}
				short favorability = DomainManager.Character.GetFavorability(charId, taiwuCharId);
				sbyte favorType = FavorabilityType.GetFavorabilityType(favorability);
				score += (int)favorType;
				int rankSelf = DomainManager.Character.GetTopThousandCharacterRanking(taiwuCharId);
				bool flag10 = rankSelf < 0 || rankSelf > 80;
				if (flag10)
				{
					result = false;
				}
				else
				{
					GameData.Domains.Character.Character character;
					bool flag11 = DomainManager.Character.TryGetElement_Objects(charId, out character);
					if (flag11)
					{
						int rankChar = DomainManager.Character.GetTopThousandCharacterRanking(charId);
						bool flag12 = rankSelf > rankChar && rankChar > 0;
						if (flag12)
						{
							return false;
						}
						sbyte behaviorType = character.GetBehaviorType();
						bool flag13 = ownLegendaryBookState == 0;
						if (flag13)
						{
							return score >= 7 && rankSelf <= GlobalConfig.Instance.RequestLegendaryBookRequireRankWhenOwningBook[(int)behaviorType];
						}
						bool flag14 = ownLegendaryBookState == 1;
						if (flag14)
						{
							return score >= 9 && rankSelf <= GlobalConfig.Instance.RequestLegendaryBookRequireRankWhenShocked[(int)behaviorType];
						}
					}
					result = false;
				}
			}
			return result;
		}

		// Token: 0x06002004 RID: 8196 RVA: 0x0019D754 File Offset: 0x0019B954
		public static int[] CalcExchangeLegendaryBookPrice(int charId)
		{
			GameData.Domains.Character.Character character;
			bool flag = !DomainManager.Character.TryGetElement_Objects(charId, out character);
			int[] result;
			if (flag)
			{
				result = new int[]
				{
					int.MaxValue,
					int.MaxValue,
					int.MaxValue
				};
			}
			else
			{
				int[] priceResult = new int[3];
				priceResult[0] = GlobalConfig.Instance.ExchangeLegendaryBookBasePriceInCoin;
				sbyte favorType = EventHelper.GetFavorabilityType(character, DomainManager.Taiwu.GetTaiwu());
				bool flag2 = favorType == sbyte.MinValue;
				if (flag2)
				{
					favorType = 0;
				}
				priceResult[0] -= (int)((float)priceResult[0] * ((float)favorType / 9f));
				bool flag3 = EventHelper.GetCharacterOwnLegendaryBookState(charId) == 1;
				if (flag3)
				{
					priceResult[0] *= 3;
				}
				priceResult[1] = priceResult[0] / 10;
				priceResult[2] = priceResult[0] / 2;
				result = priceResult;
			}
			return result;
		}

		// Token: 0x06002005 RID: 8197 RVA: 0x0019D80C File Offset: 0x0019BA0C
		public static void ProcessExchangeLegendaryBook(int fromCharId, int toCharId, int price, sbyte resourceType, bool isExp, Location location, ItemKey bookKey)
		{
			GameData.Domains.Character.Character fromChar;
			bool flag = !DomainManager.Character.TryGetElement_Objects(fromCharId, out fromChar);
			if (flag)
			{
				throw new Exception("from character id invalid,exchange legendary book failed!");
			}
			GameData.Domains.Character.Character toChar;
			bool flag2 = !DomainManager.Character.TryGetElement_Objects(toCharId, out toChar);
			if (flag2)
			{
				throw new Exception("to character id invalid,exchange legendary book failed!");
			}
			bool flag3 = isExp && toChar.GetExp() < price;
			if (flag3)
			{
				throw new Exception("to character exp not enough,exchange legendary book failed!");
			}
			bool flag4 = !isExp && toChar.GetResource(resourceType) < price;
			if (flag4)
			{
				DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(65, 1);
				defaultInterpolatedStringHandler.AppendLiteral("to character resource ");
				defaultInterpolatedStringHandler.AppendFormatted<sbyte>(resourceType);
				defaultInterpolatedStringHandler.AppendLiteral(" not enough,exchange legendary book failed!");
				throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
			}
			EventHelper.TransferInventoryItem(fromChar, toChar, bookKey, 1);
			if (isExp)
			{
				EventHelper.ChangeRoleExp(fromChar, price);
				EventHelper.ChangeRoleExp(toChar, -price);
				EventHelper.GetLifeRecordCollection().AddAcceptRequestExchangeLegendaryBookByExp(fromCharId, EventHelper.GetGameDate(), toCharId, location, bookKey.ItemType, bookKey.TemplateId, price);
			}
			else
			{
				EventHelper.ChangeRoleResource(fromChar, resourceType, price, fromCharId == DomainManager.Taiwu.GetTaiwuCharId());
				EventHelper.ChangeRoleResource(toChar, resourceType, -price, toCharId == DomainManager.Taiwu.GetTaiwuCharId());
				EventHelper.GetLifeRecordCollection().AddAcceptRequestExchangeLegendaryBook(fromCharId, EventHelper.GetGameDate(), toCharId, location, bookKey.ItemType, bookKey.TemplateId, resourceType, price);
			}
		}

		// Token: 0x06002006 RID: 8198 RVA: 0x0019D968 File Offset: 0x0019BB68
		public static void RegisterCharacterTemporaryFeature(int charId, short featureTemplateId, int expireDate = -1)
		{
			GameData.Domains.Character.Character character;
			bool flag = !DomainManager.Character.TryGetElement_Objects(charId, out character);
			if (!flag)
			{
				bool flag2 = !character.AddFeature(EventHelper.Domain.MainThreadDataContext, featureTemplateId, true) || expireDate < 0;
				if (!flag2)
				{
					DomainManager.Extra.RegisterCharacterTemporaryFeature(EventHelper.Domain.MainThreadDataContext, charId, featureTemplateId, expireDate);
				}
			}
		}

		// Token: 0x06002007 RID: 8199 RVA: 0x0019D9C8 File Offset: 0x0019BBC8
		public static sbyte GetConsumedCharacterLegendaryBookType(GameData.Domains.Character.Character character)
		{
			return DomainManager.LegendaryBook.GetConsumedCharacterLegendaryBookType(character);
		}

		// Token: 0x06002008 RID: 8200 RVA: 0x0019D9E8 File Offset: 0x0019BBE8
		public static List<ItemKey> GetShockedInsaneCharacterBooks(int charId)
		{
			List<ItemKey> books = new List<ItemKey>();
			List<sbyte> bookTypes = DomainManager.LegendaryBook.GetCharOwnedBookTypes(charId);
			for (int i = 0; i < bookTypes.Count; i++)
			{
				ItemKey book = DomainManager.LegendaryBook.GetLegendaryBookItem(bookTypes[i]);
				bool flag = book.IsValid();
				if (flag)
				{
					books.Add(book);
				}
			}
			return books;
		}

		// Token: 0x06002009 RID: 8201 RVA: 0x0019DA50 File Offset: 0x0019BC50
		public static void CreateRandomEnemiesOnValidBlocks(Location location, short maxSteps, int enemyAmount)
		{
			List<MapBlockData> mapBlockDataList = new List<MapBlockData>();
			DomainManager.Adventure.GetValidBlocksForRandomEnemy(location.AreaId, location.BlockId, maxSteps, false, false, true, mapBlockDataList);
			sbyte xiangshuLevel = DomainManager.World.GetXiangshuLevel();
			bool flag = xiangshuLevel == 9;
			if (flag)
			{
				xiangshuLevel = 8;
			}
			short enemyId = (short)(298 + (int)xiangshuLevel);
			DomainManager.Adventure.CreateTemporaryEnemiesOnValidBlocks(EventHelper.Domain.MainThreadDataContext, Location.Invalid, enemyId, enemyAmount, mapBlockDataList, sbyte.MinValue);
		}

		// Token: 0x0600200A RID: 8202 RVA: 0x0019DAC0 File Offset: 0x0019BCC0
		public static bool IsCharacterHaveLegendaryBook(int charId, ItemKey itemKey)
		{
			bool flag = !itemKey.IsValid();
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				int combatSkillType = (int)(itemKey.TemplateId - 211);
				result = (charId == DomainManager.LegendaryBook.GetOwner((sbyte)combatSkillType));
			}
			return result;
		}

		// Token: 0x0600200B RID: 8203 RVA: 0x0019DB00 File Offset: 0x0019BD00
		public static List<short> GetCharLifeSkillList(int charId, sbyte type = -1, sbyte minGrade = 0, sbyte maxGrade = 8, int minReadedPageCount = 0, bool requireTaiwuNotLearn = false)
		{
			List<GameData.Domains.Character.LifeSkillItem> learnedList = DomainManager.Character.GetElement_Objects(charId).GetLearnedLifeSkills();
			List<GameData.Domains.Character.LifeSkillItem> taiwuLearnedList = DomainManager.Taiwu.GetTaiwu().GetLearnedLifeSkills();
			List<short> skillIdList = new List<short>();
			for (int i = 0; i < learnedList.Count; i++)
			{
				GameData.Domains.Character.LifeSkillItem skillItem = learnedList[i];
				short skillId = skillItem.SkillTemplateId;
				Config.LifeSkillItem skillConfig = LifeSkill.Instance[skillId];
				bool flag = (type >= 0 && skillConfig.Type != type) || skillConfig.Grade < minGrade || skillConfig.Grade > maxGrade || learnedList.Find((GameData.Domains.Character.LifeSkillItem item) => item.SkillTemplateId == skillId).GetReadPagesCount() < minReadedPageCount;
				if (!flag)
				{
					TaiwuLifeSkill taiwuLifeSkill;
					bool flag2 = requireTaiwuNotLearn && (taiwuLearnedList.Exists((GameData.Domains.Character.LifeSkillItem item) => item.SkillTemplateId == skillId) || DomainManager.Taiwu.TryGetNotLearnLifeSkillReadingProgress(skillId, out taiwuLifeSkill));
					if (!flag2)
					{
						skillIdList.Add(skillId);
					}
				}
			}
			skillIdList.Sort((short skillIdL, short skillIdR) => LifeSkill.Instance[skillIdL].Grade.CompareTo(LifeSkill.Instance[skillIdR].Grade));
			return skillIdList;
		}

		// Token: 0x0600200C RID: 8204 RVA: 0x0019DC48 File Offset: 0x0019BE48
		public static List<short> GetMinGradeLifeSkillList(List<short> skillIdList)
		{
			List<short> minGradeSkillList = new List<short>();
			sbyte minGrade = sbyte.MaxValue;
			for (int i = 0; i < skillIdList.Count; i++)
			{
				short skillId = skillIdList[i];
				sbyte grade = LifeSkill.Instance[skillId].Grade;
				bool flag = grade < minGrade;
				if (flag)
				{
					minGradeSkillList.Clear();
					minGradeSkillList.Add(skillId);
					minGrade = grade;
				}
				else
				{
					bool flag2 = grade == minGrade;
					if (flag2)
					{
						minGradeSkillList.Add(skillId);
					}
				}
			}
			return minGradeSkillList;
		}

		// Token: 0x0600200D RID: 8205 RVA: 0x0019DCD0 File Offset: 0x0019BED0
		public unsafe static void SetCharBaseLifeSkillQualification(int charId, sbyte skillType, short qualification)
		{
			GameData.Domains.Character.Character character = DomainManager.Character.GetElement_Objects(charId);
			LifeSkillShorts qualifications = *character.GetBaseLifeSkillQualifications();
			*(ref qualifications.Items.FixedElementField + (IntPtr)skillType * 2) = qualification;
			character.SetBaseLifeSkillQualifications(ref qualifications, EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x0600200E RID: 8206 RVA: 0x0019DD1C File Offset: 0x0019BF1C
		public static void ChangeCharBaseLifeSkillQualification(int charId, sbyte skillType, int delta)
		{
			GameData.Domains.Character.Character character = DomainManager.Character.GetElement_Objects(charId);
			character.ChangeBaseLifeSkillQualification(EventHelper.Domain.MainThreadDataContext, skillType, delta);
		}

		// Token: 0x0600200F RID: 8207 RVA: 0x0019DD4C File Offset: 0x0019BF4C
		public static sbyte GetLifeSkillGrade(short skillId)
		{
			return LifeSkill.Instance[skillId].Grade;
		}

		// Token: 0x06002010 RID: 8208 RVA: 0x0019DD70 File Offset: 0x0019BF70
		public static short GetLifeSkillId(sbyte type, sbyte grade)
		{
			for (int i = 0; i < LifeSkill.Instance.Count; i++)
			{
				Config.LifeSkillItem skillConfig = LifeSkill.Instance[i];
				bool flag = skillConfig.Type == type && skillConfig.Grade == grade;
				if (flag)
				{
					return skillConfig.TemplateId;
				}
			}
			return -1;
		}

		// Token: 0x06002011 RID: 8209 RVA: 0x0019DDD0 File Offset: 0x0019BFD0
		public static int GetLifeSkillReadedPageCount(int charId, short skillId)
		{
			List<GameData.Domains.Character.LifeSkillItem> learnedList = DomainManager.Character.GetElement_Objects(charId).GetLearnedLifeSkills();
			int index = learnedList.FindIndex((GameData.Domains.Character.LifeSkillItem item) => item.SkillTemplateId == skillId);
			return (index < 0) ? 0 : learnedList[index].GetReadPagesCount();
		}

		// Token: 0x06002012 RID: 8210 RVA: 0x0019DE2B File Offset: 0x0019C02B
		public static void LearnLifeSkill(int charId, short skillId)
		{
			DomainManager.Character.LearnLifeSkill(EventHelper.Domain.MainThreadDataContext, charId, skillId, 0);
		}

		// Token: 0x06002013 RID: 8211 RVA: 0x0019DE48 File Offset: 0x0019C048
		public static ItemKey GetLifeSkillBook(int charId, short skillId)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			ItemKey itemKey = DomainManager.Item.CreateItem(context, 10, LifeSkill.Instance[skillId].SkillBookId);
			DomainManager.Character.GetElement_Objects(charId).AddInventoryItem(context, itemKey, 1, false);
			return itemKey;
		}

		// Token: 0x06002014 RID: 8212 RVA: 0x0019DE9C File Offset: 0x0019C09C
		public static ItemKey GetLifeSkillBook(int charId, sbyte lifeSkillType, sbyte grade, bool isPageComplete)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			Config.LifeSkillItem lifeSkillItem = LifeSkill.Instance.FirstOrDefault((Config.LifeSkillItem l) => l.Type == lifeSkillType && l.Grade == grade);
			int completePagesCount = isPageComplete ? 5 : -1;
			ItemKey itemKey = DomainManager.Item.CreateSkillBook(context, lifeSkillItem.SkillBookId, (sbyte)completePagesCount, -1, -1, 50, true);
			DomainManager.Character.GetElement_Objects(charId).AddInventoryItem(context, itemKey, 1, false);
			return itemKey;
		}

		// Token: 0x06002015 RID: 8213 RVA: 0x0019DF20 File Offset: 0x0019C120
		public static List<short> GetNorLearnLifeSkillList(int charId, sbyte grade, sbyte type = -1)
		{
			List<short> notLearnSkillList = new List<short>();
			List<GameData.Domains.Character.LifeSkillItem> learnedSkillList = DomainManager.Character.GetElement_Objects(charId).GetLearnedLifeSkills();
			List<short> learnedSkillIdList = ObjectPool<List<short>>.Instance.Get();
			learnedSkillIdList.Clear();
			for (int i = 0; i < learnedSkillList.Count; i++)
			{
				learnedSkillIdList.Add(learnedSkillList[i].SkillTemplateId);
			}
			for (int j = 0; j < LifeSkill.Instance.Count; j++)
			{
				Config.LifeSkillItem skillConfig = LifeSkill.Instance[j];
				bool flag = skillConfig.Grade == grade && (type < 0 || skillConfig.Type == type) && !learnedSkillIdList.Contains(skillConfig.TemplateId);
				if (flag)
				{
					notLearnSkillList.Add(skillConfig.TemplateId);
				}
			}
			ObjectPool<List<short>>.Instance.Return(learnedSkillIdList);
			return notLearnSkillList;
		}

		// Token: 0x06002016 RID: 8214 RVA: 0x0019E004 File Offset: 0x0019C204
		public static void SyncLifeSkillReadingStateToCharacter(int sourceCharacterId, int targetCharacterId, sbyte lifeSkillType)
		{
			GameData.Domains.Character.Character sourceCharacter = DomainManager.Character.GetElement_Objects(sourceCharacterId);
			GameData.Domains.Character.Character targetCharacter = DomainManager.Character.GetElement_Objects(targetCharacterId);
			bool flag = lifeSkillType == 16;
			if (flag)
			{
				List<GameData.Domains.Character.LifeSkillItem> targetNewLearnedLifeSkills = new List<GameData.Domains.Character.LifeSkillItem>();
				targetNewLearnedLifeSkills.AddRange(sourceCharacter.GetLearnedLifeSkills());
				targetCharacter.SetLearnedLifeSkills(targetNewLearnedLifeSkills, EventHelper.Domain.MainThreadDataContext);
			}
			else
			{
				DomainManager.Character.SyncLifeSkillReadingStateToCharacter(EventHelper.Domain.MainThreadDataContext, sourceCharacter, targetCharacter, lifeSkillType);
			}
		}

		// Token: 0x06002017 RID: 8215 RVA: 0x0019E078 File Offset: 0x0019C278
		public static List<short> GetTeachTaiwuLifeSkillList(int charId)
		{
			GameData.Utilities.ShortList skillList;
			return DomainManager.Taiwu.TryGetElement_TeachTaiwuLifeSkillDict(charId, out skillList) ? skillList.Items : null;
		}

		// Token: 0x06002018 RID: 8216 RVA: 0x0019E0A2 File Offset: 0x0019C2A2
		public static void ClearTeachTaiwuLifeSkillList(int charId)
		{
			DomainManager.Taiwu.ClearTeachTaiwuLifeSkillList(EventHelper.Domain.MainThreadDataContext, charId);
		}

		// Token: 0x06002019 RID: 8217 RVA: 0x0019E0BC File Offset: 0x0019C2BC
		public static void AddTeachTaiwuLifeSkill(int charId, short skillId)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			DomainManager.Taiwu.AddTeachTaiwuLifeSkill(context, charId, skillId);
			ProfessionFormulaItem seniorityFormula = ProfessionFormula.Instance[101];
			int addSeniority = seniorityFormula.Calculate((int)LifeSkill.Instance[skillId].Grade);
			DomainManager.Extra.ChangeProfessionSeniority(context, 16, addSeniority, true, false);
		}

		// Token: 0x0600201A RID: 8218 RVA: 0x0019E118 File Offset: 0x0019C318
		public static string LearnTargetLifeSkillDependSectApprovingRate(sbyte lifeSkillType, EventArgBox argBox)
		{
			GameData.Domains.Character.Character taiwu = argBox.GetCharacter("RoleTaiwu");
			GameData.Domains.Character.Character character = argBox.GetCharacter("CharacterId");
			sbyte sectId = character.GetOrganizationInfo().OrgTemplateId;
			List<short> canLearn = EventHelper.GetCharLifeSkillList(character.GetId(), lifeSkillType, 0, 8, 3, true);
			bool flag = canLearn == null || canLearn.Count == 0;
			string result;
			if (flag)
			{
				string nextEventGuid = argBox.GetString("LifeSkillNoneTeachEventGuid");
				result = nextEventGuid;
			}
			else
			{
				short lowestLifeSkill = EventHelper.GetMinGradeLifeSkillList(canLearn).Sample<short>();
				sbyte canLearnGrade = (sbyte)Math.Max(0, (int)(EventHelper.GetSectApprovingRate(sectId) / 100 - 1));
				sbyte lowestGrade = EventHelper.GetLifeSkillGrade(lowestLifeSkill);
				List<short> taiwuList = EventHelper.GetCharLifeSkillList(taiwu.GetId(), lifeSkillType, 0, 8, 0, false);
				bool flag2 = lowestGrade > canLearnGrade;
				if (flag2)
				{
					argBox.Set("CantTeachLife", lowestLifeSkill);
					string nextEventGuid = argBox.GetString("LifeSkillBeyondApprovingEventGuid");
					result = nextEventGuid;
				}
				else
				{
					bool flag3 = EventHelper.GetLifeSkillGrade(lowestLifeSkill) == 0;
					if (flag3)
					{
						argBox.Set("SkillCanLearn", lowestLifeSkill);
						string nextEventGuid = argBox.GetString("LifeSkillTeachEventGuid");
						result = nextEventGuid;
					}
					else
					{
						for (sbyte eGrade = 0; eGrade < lowestGrade; eGrade += 1)
						{
							short eSkillId = EventHelper.GetLifeSkillId(lifeSkillType, eGrade);
							bool flag4 = !taiwuList.Contains(eSkillId) || EventHelper.GetLifeSkillReadedPageCount(taiwu.GetId(), eSkillId) < 3;
							if (flag4)
							{
								argBox.Set("SkillBefore", eSkillId);
								return argBox.GetString("LifeSkillTeachBeforeEventGuid");
							}
						}
						argBox.Set("SkillCanLearn", lowestLifeSkill);
						string nextEventGuid = argBox.GetString("LifeSkillTeachEventGuid");
						result = nextEventGuid;
					}
				}
			}
			return result;
		}

		// Token: 0x0600201B RID: 8219 RVA: 0x0019E2B0 File Offset: 0x0019C4B0
		public static string LearnTargetLifeSkillDependConsummateLevel(sbyte lifeSkillType, EventArgBox argBox)
		{
			GameData.Domains.Character.Character taiwu = argBox.GetCharacter("RoleTaiwu");
			GameData.Domains.Character.Character character = argBox.GetCharacter("CharacterId");
			List<short> canLearn = EventHelper.GetCharLifeSkillList(character.GetId(), lifeSkillType, 0, 8, 3, true);
			bool flag = canLearn == null || canLearn.Count == 0;
			string result;
			if (flag)
			{
				result = "4f1e6679-8a59-4f88-bf46-682e8c155ce7";
			}
			else
			{
				short lowestLifeSkill = EventHelper.GetMinGradeLifeSkillList(canLearn).Sample<short>();
				sbyte lowestGrade = EventHelper.GetLifeSkillGrade(lowestLifeSkill);
				int canLearnGrade = (int)(taiwu.GetConsummateLevel() / 2 + 1);
				bool flag2 = (int)lowestGrade <= canLearnGrade;
				if (flag2)
				{
					argBox.Set("SkillCanLearn", lowestLifeSkill);
					result = "2636780e-0cc9-432d-a025-267f218e6c18";
				}
				else
				{
					argBox.Set("CantTeachLife", lowestLifeSkill);
					result = "4a987e91-d35d-4bc7-b8a8-212cafa99a6a";
				}
			}
			return result;
		}

		// Token: 0x0600201C RID: 8220 RVA: 0x0019E364 File Offset: 0x0019C564
		public static bool LearnTargetLifeSkillOptionVisible(GameData.Domains.Character.Character character, sbyte lifeSkillType)
		{
			sbyte orgTemplateId = character.GetOrganizationInfo().OrgTemplateId;
			OrganizationItem config = Organization.Instance[orgTemplateId];
			return config.LearnLifeSkillTypes.Contains(lifeSkillType);
		}

		// Token: 0x0600201D RID: 8221 RVA: 0x0019E39C File Offset: 0x0019C59C
		public static bool IsCanThreaten(int charA, int charB)
		{
			GameData.Domains.Character.Character characterA = DomainManager.Character.GetElement_Objects(charA);
			GameData.Domains.Character.Character characterB = DomainManager.Character.GetElement_Objects(charB);
			return characterA.GetConsummateLevel() > characterB.GetConsummateLevel();
		}

		// Token: 0x0600201E RID: 8222 RVA: 0x0019E3D4 File Offset: 0x0019C5D4
		public static bool IsThreatenSuccess(int charA, int charB, sbyte concessionCount)
		{
			GameData.Domains.Character.Character characterA = DomainManager.Character.GetElement_Objects(charA);
			GameData.Domains.Character.Character characterB = DomainManager.Character.GetElement_Objects(charB);
			bool flag = characterB.GetBehaviorType() == 0 || characterB.GetBehaviorType() == 4;
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				int consummateDiff = (int)(characterA.GetConsummateLevel() - characterB.GetConsummateLevel());
				bool flag2 = characterB.GetBehaviorType() == 2;
				if (flag2)
				{
					int rate = (int)((Math.Pow(1.149999976158142, (double)consummateDiff) - 1.0) * 100.0);
					result = EventHelper.CheckProbability(rate);
				}
				else
				{
					bool flag3 = characterB.GetBehaviorType() == 1;
					if (flag3)
					{
						int rate2 = (int)((Math.Pow((double)(1.2f + (float)concessionCount * 0.05f), (double)consummateDiff) - 1.0) * 100.0);
						result = EventHelper.CheckProbability(rate2);
					}
					else
					{
						bool flag4 = characterB.GetBehaviorType() == 3;
						if (!flag4)
						{
							DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(46, 1);
							defaultInterpolatedStringHandler.AppendLiteral("Error characterB.GetBehaviorType(), charId= : ");
							defaultInterpolatedStringHandler.AppendFormatted<GameData.Domains.Character.Character>(characterB);
							throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
						}
						int rate3 = (int)((Math.Pow((double)(1.2f - (float)concessionCount * 0.05f), (double)consummateDiff) - 1.0) * 100.0);
						result = EventHelper.CheckProbability(rate3);
					}
				}
			}
			return result;
		}

		// Token: 0x0600201F RID: 8223 RVA: 0x0019E530 File Offset: 0x0019C730
		public static bool IsLureSuccess(ItemKey itemKey, int charId, sbyte inducementCount)
		{
			GameData.Domains.Character.Character character = DomainManager.Character.GetElement_Objects(charId);
			bool flag = character.GetBehaviorType() == 0 || character.GetBehaviorType() == 4;
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				int favorabilityChange = EventHelper.GetItemFavorabilityChange(itemKey);
				short itemSubType = ItemTemplateHelper.GetItemSubType(itemKey.ItemType, itemKey.TemplateId);
				short loveSubType = character.GetLovingItemSubType();
				short hateSubType = character.GetHatingItemSubType();
				bool flag2 = itemSubType == loveSubType;
				if (flag2)
				{
					favorabilityChange *= 2;
				}
				else
				{
					bool flag3 = itemSubType == hateSubType;
					if (flag3)
					{
						favorabilityChange /= 2;
					}
				}
				bool flag4 = character.GetBehaviorType() == 2;
				if (flag4)
				{
					int rate = 50 + (favorabilityChange - 4800) / 108;
					result = EventHelper.CheckProbability(rate);
				}
				else
				{
					bool flag5 = character.GetBehaviorType() == 1;
					if (flag5)
					{
						int rate2 = 40 + (favorabilityChange - 4800) / 108;
						rate2 = (int)((double)rate2 * Math.Pow(1.1, (double)inducementCount));
						result = EventHelper.CheckProbability(rate2);
					}
					else
					{
						bool flag6 = character.GetBehaviorType() == 3;
						if (!flag6)
						{
							DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(42, 1);
							defaultInterpolatedStringHandler.AppendLiteral("Error charId.GetBehaviorType(), charId= : ");
							defaultInterpolatedStringHandler.AppendFormatted<int>(charId);
							throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
						}
						int rate3 = 40 + (favorabilityChange - 4800) / 108;
						result = EventHelper.CheckProbability(rate3);
					}
				}
			}
			return result;
		}

		// Token: 0x06002020 RID: 8224 RVA: 0x0019E67F File Offset: 0x0019C87F
		public static void SetLockItemForLifeSkillCombat(ItemKey lockItemKey)
		{
			DomainManager.Taiwu.SetLifeSkillCombatLockItem(EventHelper.Domain.MainThreadDataContext, lockItemKey);
		}

		// Token: 0x06002021 RID: 8225 RVA: 0x0019E698 File Offset: 0x0019C898
		public static void SetNextLifeSkillCombatForceOperationForbid(bool isForbidForceSilent, bool isForbidForceGiveUp)
		{
			DomainManager.Taiwu.SetNextLifeSkillCombatForceOperationForbid(isForbidForceSilent, isForbidForceGiveUp);
		}

		// Token: 0x06002022 RID: 8226 RVA: 0x0019E6A8 File Offset: 0x0019C8A8
		public static EventArgBox GetFiveLoongEventArgBox()
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			return DomainManager.Extra.GetOrCreateDlcArgBox(2764950UL, context);
		}

		// Token: 0x06002023 RID: 8227 RVA: 0x0019E6D8 File Offset: 0x0019C8D8
		public static void SetFiveLoongEventArgBox(EventArgBox argBox)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			DomainManager.Extra.SetDlcArgBox(2764950UL, argBox, context);
		}

		// Token: 0x06002024 RID: 8228 RVA: 0x0019E704 File Offset: 0x0019C904
		public static void CreateFiveLoongInWorld()
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			FiveLoongDlcEntry.CreateAllFiveLoong(context);
		}

		// Token: 0x06002025 RID: 8229 RVA: 0x0019E724 File Offset: 0x0019C924
		public static int GetFiveLoongDictCount()
		{
			return DomainManager.Extra.GetFiveLoongDictCount(EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x06002026 RID: 8230 RVA: 0x0019E74C File Offset: 0x0019C94C
		public static int DefeatFiveLoong(short characterTemplateId)
		{
			int retVal = FiveLoongDlcEntry.DefeatFiveLoong(EventHelper.Domain.MainThreadDataContext, characterTemplateId);
			bool flag = EventHelper.IsExtraTaskInProgress(265);
			if (flag)
			{
				int count = DomainManager.Extra.GetFiveLoongAppearCount();
				bool flag2 = count == 0;
				if (flag2)
				{
					EventHelper.FinishExtraTask(46, 265);
				}
			}
			return retVal;
		}

		// Token: 0x06002027 RID: 8231 RVA: 0x0019E7A4 File Offset: 0x0019C9A4
		public static bool HaveDefeatAllLoong()
		{
			bool allDefeat = true;
			for (short i = 686; i <= 690; i += 1)
			{
				LoongInfo loongInfo;
				bool flag = DomainManager.Extra.TryGetElement_FiveLoongDict(i, out loongInfo);
				if (flag)
				{
					bool flag2 = loongInfo.DisappearDate == 0;
					if (flag2)
					{
						allDefeat = false;
					}
				}
				else
				{
					allDefeat = false;
				}
				bool flag3 = !allDefeat;
				if (flag3)
				{
					break;
				}
			}
			return allDefeat;
		}

		// Token: 0x06002028 RID: 8232 RVA: 0x0019E814 File Offset: 0x0019CA14
		public static bool IsTriggeredDefeatAllLoongTalk()
		{
			EventArgBox argBox = EventHelper.GetFiveLoongEventArgBox();
			bool fiveLoongDlcDefeatAllLoongTalkTriggered = false;
			return argBox.Get("ConchShip_PresetKey_FiveLoongDlcDefeatAllLoongTalkTriggered", ref fiveLoongDlcDefeatAllLoongTalkTriggered) && fiveLoongDlcDefeatAllLoongTalkTriggered;
		}

		// Token: 0x06002029 RID: 8233 RVA: 0x0019E848 File Offset: 0x0019CA48
		public static bool HaveDefeatFiveLoong()
		{
			EventArgBox argBox = EventHelper.GetFiveLoongEventArgBox();
			bool fiveLoongDlcHaveDefeatFiveLoong = false;
			return argBox.Get("ConchShip_PresetKey_FiveLoongDlcHaveDefeatFiveLoong", ref fiveLoongDlcHaveDefeatFiveLoong) && fiveLoongDlcHaveDefeatFiveLoong;
		}

		// Token: 0x0600202A RID: 8234 RVA: 0x0019E87C File Offset: 0x0019CA7C
		public static bool HaveDefeatMinionLoong()
		{
			EventArgBox argBox = EventHelper.GetFiveLoongEventArgBox();
			bool fiveLoongDlcDefeatMinionLoong = false;
			return argBox.Get("ConchShip_PresetKey_FiveLoongDlcDefeatMinionLoong", ref fiveLoongDlcDefeatMinionLoong) && fiveLoongDlcDefeatMinionLoong;
		}

		// Token: 0x0600202B RID: 8235 RVA: 0x0019E8B0 File Offset: 0x0019CAB0
		public static bool GotJiaoEgg()
		{
			EventArgBox argBox = EventHelper.GetFiveLoongEventArgBox();
			bool fiveLoongDlcGotJiaoEgg = false;
			return argBox.Get("ConchShip_PresetKey_FiveLoongDlcGotJiaoEgg", ref fiveLoongDlcGotJiaoEgg) && fiveLoongDlcGotJiaoEgg;
		}

		// Token: 0x0600202C RID: 8236 RVA: 0x0019E8E4 File Offset: 0x0019CAE4
		public static bool GotLoongScale()
		{
			EventArgBox argBox = EventHelper.GetFiveLoongEventArgBox();
			bool fiveLoongDlcGotLoongScale = false;
			return argBox.Get("ConchShip_PresetKey_FiveLoongDlcGotLoongScale", ref fiveLoongDlcGotLoongScale) && fiveLoongDlcGotLoongScale;
		}

		// Token: 0x0600202D RID: 8237 RVA: 0x0019E918 File Offset: 0x0019CB18
		public static bool IsTaiwuHaveLoongCombatMark(short characterTemplateId)
		{
			short fiveLoongCharacterTemplateId = characterTemplateId;
			bool flag = FiveLoongDlcEntry.IsCharacterMinionLoong(characterTemplateId);
			if (flag)
			{
				fiveLoongCharacterTemplateId = FiveLoongDlcEntry.MinionLoongToLoong(characterTemplateId);
			}
			else
			{
				bool flag2 = !FiveLoongDlcEntry.IsCharacterLoong(characterTemplateId);
				if (flag2)
				{
					DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(36, 1);
					defaultInterpolatedStringHandler.AppendLiteral("Wrong FiveLoongCharacterTemplateId: ");
					defaultInterpolatedStringHandler.AppendFormatted<short>(characterTemplateId);
					throw new ArgumentOutOfRangeException(defaultInterpolatedStringHandler.ToStringAndClear());
				}
			}
			LoongInfo loongInfo;
			bool flag3 = DomainManager.Extra.TryGetElement_FiveLoongDict(fiveLoongCharacterTemplateId, out loongInfo);
			bool result;
			if (flag3)
			{
				int taiwuId = DomainManager.Taiwu.GetTaiwuCharId();
				result = (loongInfo.GetCharacterDebuffCount(taiwuId) > 0);
			}
			else
			{
				result = false;
			}
			return result;
		}

		// Token: 0x0600202E RID: 8238 RVA: 0x0019E9AC File Offset: 0x0019CBAC
		public static void SetJiaoPoolOpen()
		{
			FiveLoongDlcEntry entry;
			bool flag = !DomainManager.Extra.TryGetDlcEntry<FiveLoongDlcEntry>(2764950UL, out entry);
			if (!flag)
			{
				entry.IsJiaoPoolOpen = true;
				EventHelper.TriggerExtraTask(47, 266);
				EventHelper.TriggerExtraTask(47, 273);
			}
		}

		// Token: 0x0600202F RID: 8239 RVA: 0x0019E9F8 File Offset: 0x0019CBF8
		public static bool GetJiaoPoolIsOpen()
		{
			FiveLoongDlcEntry entry;
			bool flag = !DomainManager.Extra.TryGetDlcEntry<FiveLoongDlcEntry>(2764950UL, out entry);
			return !flag && entry.IsJiaoPoolOpen;
		}

		// Token: 0x06002030 RID: 8240 RVA: 0x0019EA30 File Offset: 0x0019CC30
		public static short GetLoongTerrainCharacterTemplateId()
		{
			Location taiwuLocation = DomainManager.Taiwu.GetTaiwu().GetLocation();
			MapBlockData mapBlockData = DomainManager.Map.GetBlockData(taiwuLocation.AreaId, taiwuLocation.BlockId);
			short mapBlockTemplateId = mapBlockData.TemplateId;
			bool flag = mapBlockTemplateId >= 137 && mapBlockTemplateId <= 141;
			short result;
			if (flag)
			{
				result = mapBlockTemplateId - 137 + 686;
			}
			else
			{
				result = -1;
			}
			return result;
		}

		// Token: 0x06002031 RID: 8241 RVA: 0x0019EAA0 File Offset: 0x0019CCA0
		public static bool FirstArriveLoongTerrainTriggered()
		{
			EventArgBox argBox = EventHelper.GetFiveLoongEventArgBox();
			bool fiveLoongDlcFirstArriveLoongTerrainTriggered = false;
			return argBox.Get("ConchShip_PresetKey_FiveLoongDlcFirstArriveLoongTerrainTriggered", ref fiveLoongDlcFirstArriveLoongTerrainTriggered) && fiveLoongDlcFirstArriveLoongTerrainTriggered;
		}

		// Token: 0x06002032 RID: 8242 RVA: 0x0019EAD4 File Offset: 0x0019CCD4
		public static bool IsArriveLoongWhiteTerrainTriggered()
		{
			EventArgBox argBox = EventHelper.GetFiveLoongEventArgBox();
			bool fiveLoongDlcArriveLoongWhiteTerrain = false;
			return argBox.Get("ConchShip_PresetKey_FiveLoongDlcArriveLoongWhiteTerrain", ref fiveLoongDlcArriveLoongWhiteTerrain) && fiveLoongDlcArriveLoongWhiteTerrain;
		}

		// Token: 0x06002033 RID: 8243 RVA: 0x0019EB08 File Offset: 0x0019CD08
		public static bool IsArriveLoongBlackTerrainTriggered()
		{
			EventArgBox argBox = EventHelper.GetFiveLoongEventArgBox();
			bool fiveLoongDlcArriveLoongBlackTerrain = false;
			return argBox.Get("ConchShip_PresetKey_FiveLoongDlcArriveLoongBlackTerrain", ref fiveLoongDlcArriveLoongBlackTerrain) && fiveLoongDlcArriveLoongBlackTerrain;
		}

		// Token: 0x06002034 RID: 8244 RVA: 0x0019EB3C File Offset: 0x0019CD3C
		public static bool IsArriveLoongRedTerrainTriggered()
		{
			EventArgBox argBox = EventHelper.GetFiveLoongEventArgBox();
			bool fiveLoongDlcArriveLoongRedTerrain = false;
			return argBox.Get("ConchShip_PresetKey_FiveLoongDlcArriveLoongRedTerrain", ref fiveLoongDlcArriveLoongRedTerrain) && fiveLoongDlcArriveLoongRedTerrain;
		}

		// Token: 0x06002035 RID: 8245 RVA: 0x0019EB70 File Offset: 0x0019CD70
		public static bool IsArriveLoongGreenTerrainTriggered()
		{
			EventArgBox argBox = EventHelper.GetFiveLoongEventArgBox();
			bool fiveLoongDlcArriveLoongGreenTerrain = false;
			return argBox.Get("ConchShip_PresetKey_FiveLoongDlcArriveLoongGreenTerrain", ref fiveLoongDlcArriveLoongGreenTerrain) && fiveLoongDlcArriveLoongGreenTerrain;
		}

		// Token: 0x06002036 RID: 8246 RVA: 0x0019EBA4 File Offset: 0x0019CDA4
		public static bool IsArriveLoongYellowTerrainTriggered()
		{
			EventArgBox argBox = EventHelper.GetFiveLoongEventArgBox();
			bool fiveLoongDlcArriveLoongYellowTerrain = false;
			return argBox.Get("ConchShip_PresetKey_FiveLoongDlcArriveLoongYellowTerrain", ref fiveLoongDlcArriveLoongYellowTerrain) && fiveLoongDlcArriveLoongYellowTerrain;
		}

		// Token: 0x06002037 RID: 8247 RVA: 0x0019EBD8 File Offset: 0x0019CDD8
		public static bool IsLoongTerrainEventPossibleTriggered()
		{
			EventArgBox argBox = EventHelper.GetFiveLoongEventArgBox();
			bool fiveLoongDlcArrivedLoongWhiteTerrain = false;
			bool fiveLoongDlcArrivedLoongBlackTerrain = false;
			bool fiveLoongDlcArrivedLoongGreenTerrain = false;
			bool fiveLoongDlcArrivedLoongRedTerrain = false;
			bool fiveLoongDlcArrivedLoongYellowTerrain = false;
			argBox.Get("ConchShip_PresetKey_FiveLoongDlcArriveLoongWhiteTerrain", ref fiveLoongDlcArrivedLoongWhiteTerrain);
			argBox.Get("ConchShip_PresetKey_FiveLoongDlcArriveLoongBlackTerrain", ref fiveLoongDlcArrivedLoongBlackTerrain);
			argBox.Get("ConchShip_PresetKey_FiveLoongDlcArriveLoongGreenTerrain", ref fiveLoongDlcArrivedLoongGreenTerrain);
			argBox.Get("ConchShip_PresetKey_FiveLoongDlcArriveLoongRedTerrain", ref fiveLoongDlcArrivedLoongRedTerrain);
			argBox.Get("ConchShip_PresetKey_FiveLoongDlcArriveLoongYellowTerrain", ref fiveLoongDlcArrivedLoongYellowTerrain);
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			Location taiwuLocation = taiwu.GetLocation();
			MapBlockData blockData = DomainManager.Map.GetBlockData(taiwuLocation.AreaId, taiwuLocation.BlockId);
			MapBlockItem config = blockData.GetConfig();
			bool flag = config.TemplateId == 137;
			bool result;
			if (flag)
			{
				result = !fiveLoongDlcArrivedLoongWhiteTerrain;
			}
			else
			{
				bool flag2 = config.TemplateId == 138;
				if (flag2)
				{
					result = !fiveLoongDlcArrivedLoongBlackTerrain;
				}
				else
				{
					bool flag3 = config.TemplateId == 139;
					if (flag3)
					{
						result = !fiveLoongDlcArrivedLoongGreenTerrain;
					}
					else
					{
						bool flag4 = config.TemplateId == 140;
						if (flag4)
						{
							result = !fiveLoongDlcArrivedLoongRedTerrain;
						}
						else
						{
							result = !fiveLoongDlcArrivedLoongYellowTerrain;
						}
					}
				}
			}
			return result;
		}

		// Token: 0x06002038 RID: 8248 RVA: 0x0019ECF4 File Offset: 0x0019CEF4
		public static short GetMapBlockLoongTemplateId(Location location, bool isCharacterClicked)
		{
			bool flag = EventHelper.IsTaiwuAvoidMapBlockEnemies() && !isCharacterClicked;
			short result;
			if (flag)
			{
				result = -1;
			}
			else
			{
				List<int> animalIds;
				bool flag2 = !DomainManager.Extra.TryGetAnimalIdsByLocation(location, out animalIds);
				if (flag2)
				{
					result = -1;
				}
				else
				{
					foreach (int animalId in animalIds)
					{
						GameData.Domains.Character.Animal animal;
						bool flag3 = DomainManager.Extra.TryGetAnimal(animalId, out animal);
						if (flag3)
						{
							for (short i = 686; i <= 695; i += 1)
							{
								bool flag4 = animal.CharacterTemplateId == i;
								if (flag4)
								{
									return i;
								}
							}
						}
					}
					result = -1;
				}
			}
			return result;
		}

		// Token: 0x06002039 RID: 8249 RVA: 0x0019EDCC File Offset: 0x0019CFCC
		public static ItemKey DefeatLoongGetJiaoEgg(short characterTemplateId, sbyte forceGender = -1)
		{
			bool isIgnoreDropRate = FiveLoongDlcEntry.IsCharacterLoong(characterTemplateId);
			ItemKey jiaoEgg = DomainManager.Extra.DropJiaoEgg(EventHelper.Domain.MainThreadDataContext, isIgnoreDropRate, characterTemplateId, forceGender);
			bool condition = !isIgnoreDropRate || jiaoEgg.IsValid();
			DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(37, 1);
			defaultInterpolatedStringHandler.AppendLiteral("Failed to create jiao egg for loong ");
			defaultInterpolatedStringHandler.AppendFormatted<short>(characterTemplateId);
			defaultInterpolatedStringHandler.AppendLiteral(".");
			Tester.Assert(condition, defaultInterpolatedStringHandler.ToStringAndClear());
			return jiaoEgg;
		}

		// Token: 0x0600203A RID: 8250 RVA: 0x0019EE48 File Offset: 0x0019D048
		public static string PlayLoongDebuffAnimation(short characterTemplateId, string afterEvent, EventArgBox argBox)
		{
			bool flag = characterTemplateId >= 691 && characterTemplateId <= 695;
			if (flag)
			{
				characterTemplateId -= 5;
			}
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			LoongInfo loongInfo = DomainManager.Extra.GetElement_FiveLoongDict(characterTemplateId);
			ushort debuffCount = loongInfo.GetCharacterDebuffCount(taiwu.GetId());
			bool flag2 = debuffCount <= 0;
			string result;
			if (flag2)
			{
				result = afterEvent;
			}
			else
			{
				bool flag3 = !string.IsNullOrEmpty(afterEvent);
				if (flag3)
				{
					EventHelper.AddEventInListenWithActionName(afterEvent, argBox, "PlayLoongDebuffAnimation");
				}
				GameDataBridge.AddDisplayEvent<short>(DisplayEventType.PlayLoongDebuffAnimation, characterTemplateId);
				EventHelper.LoongDebuffEffect(characterTemplateId);
				result = string.Empty;
			}
			return result;
		}

		// Token: 0x0600203B RID: 8251 RVA: 0x0019EEE8 File Offset: 0x0019D0E8
		public unsafe static void LoongDebuffEffect(short loongCharacterTemplateId)
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			LoongInfo loongInfo = DomainManager.Extra.GetElement_FiveLoongDict(loongCharacterTemplateId);
			ushort debuffCount = loongInfo.GetCharacterDebuffCount(taiwu.GetId());
			bool flag = debuffCount <= 0;
			if (!flag)
			{
				DataContext context = EventHelper.Domain.MainThreadDataContext;
				int totalHealthReduceLevel = 0;
				sbyte injuryChange = (sbyte)EventHelper.GetRandom(2, 5);
				switch (loongCharacterTemplateId)
				{
				case 686:
				{
					for (int i = 0; i < (int)debuffCount; i++)
					{
						Injuries injuries = taiwu.GetInjuries();
						sbyte bodyType = injuries.GetLightestPart(true, true);
						ValueTuple<sbyte, sbyte> tuple = injuries.Get(bodyType);
						int beyondCount = (int)(tuple.Item2 + injuryChange - 6);
						bool flag2 = beyondCount > 0;
						if (flag2)
						{
							totalHealthReduceLevel += beyondCount;
						}
						taiwu.ChangeInjury(context, bodyType, true, injuryChange);
					}
					bool flag3 = totalHealthReduceLevel > 0;
					if (flag3)
					{
						int totalHealthReduce = Math.Clamp(totalHealthReduceLevel * 6, 0, 36);
						taiwu.ChangeHealth(context, -totalHealthReduce);
					}
					break;
				}
				case 687:
				{
					int poisonAddValue = EventHelper.GetRandom(500, 1000);
					for (int j = 0; j < (int)debuffCount; j++)
					{
						for (int k = 0; k < 3; k++)
						{
							PoisonInts poisoned = *taiwu.GetPoisoned();
							sbyte poisonType = poisoned.GetLightestType();
							int beforeMark = taiwu.GetPoisonMarkCount();
							taiwu.ChangePoisoned(context, poisonType, 1, poisonAddValue);
							int afterMark = taiwu.GetPoisonMarkCount();
							bool flag4 = afterMark - beforeMark > 0;
							if (flag4)
							{
								totalHealthReduceLevel += afterMark - beforeMark;
							}
						}
					}
					int totalHealthReduce = Math.Clamp(totalHealthReduceLevel * 2, 0, 36);
					taiwu.ChangeHealth(context, -totalHealthReduce);
					break;
				}
				case 688:
				{
					int disorderChange = EventHelper.GetRandom(400, 800);
					int totalDisorderChange = disorderChange * (int)debuffCount;
					EventHelper.ChangeRoleDisorderOfQi(taiwu, (short)totalDisorderChange);
					int totalHealthReduce = Math.Clamp(totalDisorderChange / 1000 * 3, 0, 24);
					taiwu.ChangeHealth(context, -totalHealthReduce);
					break;
				}
				case 689:
				{
					for (int l = 0; l < (int)debuffCount; l++)
					{
						Injuries injuries2 = taiwu.GetInjuries();
						sbyte bodyType2 = injuries2.GetLightestPart(false, true);
						ValueTuple<sbyte, sbyte> tuple2 = injuries2.Get(bodyType2);
						int beyondCount2 = (int)(tuple2.Item1 + injuryChange - 6);
						bool flag5 = beyondCount2 > 0;
						if (flag5)
						{
							totalHealthReduceLevel += beyondCount2;
						}
						taiwu.ChangeInjury(context, bodyType2, false, injuryChange);
					}
					bool flag6 = totalHealthReduceLevel > 0;
					if (flag6)
					{
						int totalHealthReduce = Math.Clamp(totalHealthReduceLevel * 6, 0, 36);
						taiwu.ChangeHealth(context, -totalHealthReduce);
					}
					break;
				}
				case 690:
				{
					int totalHealthReduce = (int)(debuffCount * 12);
					taiwu.ChangeHealth(context, -totalHealthReduce);
					break;
				}
				}
			}
		}

		// Token: 0x0600203C RID: 8252 RVA: 0x0019F194 File Offset: 0x0019D394
		public static void AddCharacterToLoongTalked(int charId)
		{
			EventArgBox argBox = EventHelper.GetFiveLoongEventArgBox();
			IntList characters;
			bool flag = !argBox.Get<IntList>("ConchShip_PresetKey_FiveLoongDlcArriveLoongYellowTerrain", out characters);
			if (flag)
			{
				characters = IntList.Create();
			}
			characters.Items.Add(charId);
			argBox.Set("ConchShip_PresetKey_FiveLoongDlcArriveLoongYellowTerrain", characters);
			EventHelper.SetFiveLoongEventArgBox(argBox);
		}

		// Token: 0x0600203D RID: 8253 RVA: 0x0019F1EC File Offset: 0x0019D3EC
		public static bool IsCharacterLoongTalked(int charId)
		{
			EventArgBox argBox = EventHelper.GetFiveLoongEventArgBox();
			IntList characters;
			bool flag = !argBox.Get<IntList>("ConchShip_PresetKey_FiveLoongDlcArriveLoongYellowTerrain", out characters);
			return !flag && characters.Items.Contains(charId);
		}

		// Token: 0x0600203E RID: 8254 RVA: 0x0019F22C File Offset: 0x0019D42C
		public static bool IsTriggerLoongDreamBackEvent()
		{
			EventArgBox argoBox = EventHelper.GetFiveLoongEventArgBox();
			bool taiwuCrossArchiveInheritBuilding = false;
			bool flag = argoBox.Get("ConchShip_TaiwuCrossArchiveInheritBuilding", ref taiwuCrossArchiveInheritBuilding) && taiwuCrossArchiveInheritBuilding;
			return flag && DomainManager.Extra.GetIsJiaoPoolOpen();
		}

		// Token: 0x0600203F RID: 8255 RVA: 0x0019F268 File Offset: 0x0019D468
		public static void SetLoongDreamBackParam()
		{
			EventHelper.TriggerExtraTask(47, 266);
			EventHelper.TriggerExtraTask(47, 273);
			EventHelper.TriggerExtraTask(47, 274);
			EventArgBox argBox = EventHelper.GetFiveLoongEventArgBox();
			argBox.Set("ConchShip_PresetKey_FiveLoongDlcGotLoongScale", true);
			argBox.Set("ConchShip_PresetKey_FiveLoongDlcGotJiaoEgg", true);
			EventHelper.SetFiveLoongEventArgBox(argBox);
		}

		// Token: 0x06002040 RID: 8256 RVA: 0x0019F2C4 File Offset: 0x0019D4C4
		public static GameData.DLC.FiveLoong.Jiao TryGetJiaoData(int jiaoId)
		{
			GameData.DLC.FiveLoong.Jiao jiao;
			bool flag = DomainManager.Extra.TryGetElement_Jiaos(jiaoId, out jiao);
			if (flag)
			{
				return jiao;
			}
			DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(14, 1);
			defaultInterpolatedStringHandler.AppendLiteral("Wrong JiaoId:");
			defaultInterpolatedStringHandler.AppendFormatted<int>(jiaoId);
			defaultInterpolatedStringHandler.AppendLiteral(" ");
			throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
		}

		// Token: 0x06002041 RID: 8257 RVA: 0x0019F324 File Offset: 0x0019D524
		public static short TryGetChildrenOfLoongCharacterTemplateId(int childOfLoongId)
		{
			ChildrenOfLoong childOfLoong;
			bool flag = DomainManager.Extra.TryGetElement_ChildrenOfLoong(childOfLoongId, out childOfLoong);
			if (flag)
			{
				return Config.Jiao.Instance[FiveLoongDlcEntry.CarrierToJiaoTemplate[childOfLoong.Key.TemplateId]].IndexOfCharacterTemplate;
			}
			DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(14, 1);
			defaultInterpolatedStringHandler.AppendLiteral("Wrong JiaoId:");
			defaultInterpolatedStringHandler.AppendFormatted<int>(childOfLoongId);
			defaultInterpolatedStringHandler.AppendLiteral(" ");
			throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
		}

		// Token: 0x06002042 RID: 8258 RVA: 0x0019F3A8 File Offset: 0x0019D5A8
		public static int BringUpJiaoFailProb(int jiaoId)
		{
			GameData.DLC.FiveLoong.Jiao jiao = EventHelper.TryGetJiaoData(jiaoId);
			return DomainManager.Extra.BringUpJiaoFailProb(jiao);
		}

		// Token: 0x06002043 RID: 8259 RVA: 0x0019F3CC File Offset: 0x0019D5CC
		public static int CalcCaptureEscapeJiaoRandomPropertyChangeProb(int jiaoId)
		{
			GameData.DLC.FiveLoong.Jiao jiao = EventHelper.TryGetJiaoData(jiaoId);
			int reduceProb = 50 + jiao.AggressiveTimes * 15 - jiao.NegativeTimes * 5;
			return Math.Clamp(reduceProb, 0, 100);
		}

		// Token: 0x06002044 RID: 8260 RVA: 0x0019F408 File Offset: 0x0019D608
		public static void AddJiaoProperty(int jiaoId, short jiaoPropertyTemplateId, sbyte attitudeType)
		{
			bool condition = jiaoPropertyTemplateId >= 0 && (int)jiaoPropertyTemplateId < Config.JiaoProperty.Instance.Count;
			DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(29, 1);
			defaultInterpolatedStringHandler.AppendLiteral("jiaoPropertyTemplateId wrong:");
			defaultInterpolatedStringHandler.AppendFormatted<short>(jiaoPropertyTemplateId);
			Tester.Assert(condition, defaultInterpolatedStringHandler.ToStringAndClear());
			GameData.DLC.FiveLoong.Jiao jiao = EventHelper.TryGetJiaoData(jiaoId);
			int poolId = DomainManager.Extra.GetJiaoPoolIdByJiaoId(jiaoId);
			DomainManager.Extra.AddJiaoPropertyInEvent(EventHelper.Domain.MainThreadDataContext, jiao, jiaoPropertyTemplateId, attitudeType, poolId);
		}

		// Token: 0x06002045 RID: 8261 RVA: 0x0019F484 File Offset: 0x0019D684
		public static short AddJiaoExteriorPropertyRandom(int jiaoId)
		{
			GameData.DLC.FiveLoong.Jiao jiao = EventHelper.TryGetJiaoData(jiaoId);
			return DomainManager.Extra.RandomAddJiaoPresentProperty(EventHelper.Domain.MainThreadDataContext, jiao);
		}

		// Token: 0x06002046 RID: 8262 RVA: 0x0019F4B4 File Offset: 0x0019D6B4
		public static void ChangeJiaoTamePoint(int jiaoId, short jiaoPropertyTemplateId, sbyte attitudeType, bool isComfort = true)
		{
			GameData.DLC.FiveLoong.Jiao jiao = EventHelper.TryGetJiaoData(jiaoId);
			JiaoPropertyItem jiaoPropertyConfig = Config.JiaoProperty.Instance[jiaoPropertyTemplateId];
			bool flag = attitudeType == 0;
			int tamePointChange;
			if (flag)
			{
				tamePointChange = (isComfort ? jiaoPropertyConfig.AggressiveComfortParam : jiaoPropertyConfig.AggressiveNotComfortParam);
			}
			else
			{
				bool flag2 = attitudeType == 1;
				if (flag2)
				{
					return;
				}
				tamePointChange = jiaoPropertyConfig.ConservedTameParam;
			}
			DomainManager.Extra.ChangeJiaoTamePoint(EventHelper.Domain.MainThreadDataContext, jiao, tamePointChange);
		}

		// Token: 0x06002047 RID: 8263 RVA: 0x0019F520 File Offset: 0x0019D720
		public static void AddJiaoAggressiveTimes(int jiaoId, short jiaoPropertyTemplateId)
		{
			GameData.DLC.FiveLoong.Jiao jiao = EventHelper.TryGetJiaoData(jiaoId);
			DomainManager.Extra.AddJiaoAggressiveTimes(EventHelper.Domain.MainThreadDataContext, jiao);
			EventHelper.SetJiaoLastChoiceIsAggressive(jiao, true);
			JiaoPropertyItem jiaoPropertyConfig = Config.JiaoProperty.Instance[jiaoPropertyTemplateId];
			DomainManager.Extra.ChangeJiaoTamePoint(EventHelper.Domain.MainThreadDataContext, jiao, jiaoPropertyConfig.AggressiveComfortParam);
		}

		// Token: 0x06002048 RID: 8264 RVA: 0x0019F57C File Offset: 0x0019D77C
		public static void AddJiaoNegativeTimes(int jiaoId)
		{
			GameData.DLC.FiveLoong.Jiao jiao = EventHelper.TryGetJiaoData(jiaoId);
			DomainManager.Extra.AddJiaoNegativeTimes(EventHelper.Domain.MainThreadDataContext, jiao);
			EventHelper.SetJiaoLastChoiceIsAggressive(jiao, false);
		}

		// Token: 0x06002049 RID: 8265 RVA: 0x0019F5AF File Offset: 0x0019D7AF
		public static void SetJiaoLastChoiceIsAggressive(GameData.DLC.FiveLoong.Jiao jiao, bool isAggressive)
		{
			DomainManager.Extra.SetJiaoLastChoiceIsAggressive(EventHelper.Domain.MainThreadDataContext, jiao, isAggressive);
		}

		// Token: 0x0600204A RID: 8266 RVA: 0x0019F5CC File Offset: 0x0019D7CC
		public static int GetTaiwuLoongScaleCount()
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			return taiwu.GetInventory().GetInventoryItemCount(12, 286);
		}

		// Token: 0x0600204B RID: 8267 RVA: 0x0019F600 File Offset: 0x0019D800
		public static string GetJiaoName(int jiaoId)
		{
			string jiaoLoongName = string.Empty;
			GameData.DLC.FiveLoong.Jiao jiao;
			bool flag = DomainManager.Extra.TryGetElement_Jiaos(jiaoId, out jiao);
			if (flag)
			{
				bool flag2 = jiao.NameId < 0;
				if (flag2)
				{
					jiaoLoongName = ItemTemplateHelper.GetName(jiao.Key.ItemType, jiao.Key.TemplateId);
				}
				else
				{
					IReadOnlyDictionary<int, string> customTexts = DomainManager.World.GetCustomTexts();
					string text;
					bool flag3 = customTexts.TryGetValue(jiao.NameId, out text);
					if (flag3)
					{
						jiaoLoongName = text;
					}
				}
			}
			return jiaoLoongName;
		}

		// Token: 0x0600204C RID: 8268 RVA: 0x0019F684 File Offset: 0x0019D884
		public static int TryGetJiaoIdByItemKey(ItemKey key)
		{
			int id;
			bool flag = DomainManager.Extra.TryGetJiaoIdByItemKey(key, out id);
			if (flag)
			{
				return id;
			}
			DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(15, 1);
			defaultInterpolatedStringHandler.AppendLiteral("Wrong ItemKey:");
			defaultInterpolatedStringHandler.AppendFormatted<ItemKey>(key);
			defaultInterpolatedStringHandler.AppendLiteral(" ");
			throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
		}

		// Token: 0x0600204D RID: 8269 RVA: 0x0019F6E4 File Offset: 0x0019D8E4
		public static int TryGetChildrenOfLoongIdByItemKey(ItemKey key)
		{
			int id;
			bool flag = DomainManager.Extra.TryGetChildrenOfLoongIdByItemKey(key, out id);
			if (flag)
			{
				return id;
			}
			DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(15, 1);
			defaultInterpolatedStringHandler.AppendLiteral("Wrong ItemKey:");
			defaultInterpolatedStringHandler.AppendFormatted<ItemKey>(key);
			defaultInterpolatedStringHandler.AppendLiteral(" ");
			throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
		}

		// Token: 0x0600204E RID: 8270 RVA: 0x0019F744 File Offset: 0x0019D944
		public static ValueTuple<bool, short> KidnapMiscJiao(int jiaoId)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			GameData.DLC.FiveLoong.Jiao jiao = EventHelper.TryGetJiaoData(jiaoId);
			short propertyTemplateId = (short)context.Random.Next(0, 9);
			int isDecrease = DomainManager.Extra.GetIsDecreaseProperty(context, jiao);
			int delta = DomainManager.Extra.GetRandomEventPropertyDelta(propertyTemplateId, jiao, isDecrease);
			DomainManager.Extra.AddJiaoProperty(context, jiao, propertyTemplateId, delta);
			return new ValueTuple<bool, short>(isDecrease > 0, propertyTemplateId);
		}

		// Token: 0x0600204F RID: 8271 RVA: 0x0019F7B0 File Offset: 0x0019D9B0
		public static void SetChildOfLoongName(int characterId, int childOfLoongId)
		{
			ChildrenOfLoong childrenOfLoong = DomainManager.Extra.GetChildrenOfLoongById(childOfLoongId);
			bool flag = childrenOfLoong.NameId >= 0;
			if (flag)
			{
				string jiaoName = DomainManager.World.GetElement_CustomTexts(childrenOfLoong.NameId);
				bool flag2 = !string.IsNullOrEmpty(jiaoName);
				if (flag2)
				{
					DomainManager.Extra.AssignCharacterCustomDisplayName(EventHelper.Domain.MainThreadDataContext, characterId, jiaoName);
					GameData.Domains.Character.Character character = DomainManager.Character.GetElement_Objects(characterId);
					FullName fullName = character.GetFullName();
					fullName.Type = 8;
					character.SetFullName(fullName, EventHelper.Domain.MainThreadDataContext);
				}
			}
		}

		// Token: 0x06002050 RID: 8272 RVA: 0x0019F848 File Offset: 0x0019DA48
		public static void UpdateJiaoEvolveRemainingMonth(int jiaoId)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			GameData.DLC.FiveLoong.Jiao jiao = EventHelper.TryGetJiaoData(jiaoId);
			DomainManager.Extra.UpdateJiaoEvolveRemainingMonth(context, jiao);
		}

		// Token: 0x06002051 RID: 8273 RVA: 0x0019F878 File Offset: 0x0019DA78
		public static void JiaoPutInto(int poolId, ItemKey egg, short nurturanceTemplateId)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			int jiaoId = DomainManager.Extra.GetJiaoByItemKey(egg).Id;
			DomainManager.Extra.PutJiaoInPool(context, poolId, jiaoId);
			DomainManager.Extra.ChangeNurturance(context, poolId, nurturanceTemplateId);
		}

		// Token: 0x06002052 RID: 8274 RVA: 0x0019F8C0 File Offset: 0x0019DAC0
		public static ItemKey JiaoTakeOut(int poolId)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			List<ItemKey> takeOutResult = DomainManager.Extra.PutJiaoOutOfPool(context, poolId);
			return (takeOutResult != null && takeOutResult.Count > 0) ? takeOutResult[0] : ItemKey.Invalid;
		}

		// Token: 0x06002053 RID: 8275 RVA: 0x0019F904 File Offset: 0x0019DB04
		public static void JiaoConfirmNurturance(string afterEvent, EventArgBox argBox)
		{
			int poolId = argBox.GetInt("PoolId");
			short nurturanceTemplateId = argBox.GetShort("Nurturance");
			JiaoPool jiaoPool;
			bool isChange = DomainManager.Extra.TryGetJiaoPool(poolId, out jiaoPool) && jiaoPool.Jiaos.Count > 0;
			bool flag = !string.IsNullOrEmpty(afterEvent);
			if (flag)
			{
				EventHelper.AddEventInListenWithActionName(afterEvent, argBox, "DlcLoongJiaoDialog");
			}
			GameDataBridge.AddDisplayEvent<short, bool>(DisplayEventType.ConfirmJiaoNurturanceDialog, nurturanceTemplateId, isChange);
		}

		// Token: 0x06002054 RID: 8276 RVA: 0x0019F974 File Offset: 0x0019DB74
		public static void JiaoChangeNurturance(int poolId, short nurturanceTemplateId)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			DomainManager.Extra.ChangeNurturance(context, poolId, nurturanceTemplateId);
			DomainManager.Extra.SetJiaoPoolStatus(new IntPair(poolId, 5), context);
		}

		// Token: 0x06002055 RID: 8277 RVA: 0x0019F9B0 File Offset: 0x0019DBB0
		public static void JiaoAddTamePoint(int poolId, int addValue)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			GameData.DLC.FiveLoong.Jiao jiao;
			bool flag = !DomainManager.Extra.TryGetJiaoFromPool(poolId, out jiao, -1, 0);
			if (!flag)
			{
				DomainManager.Extra.ChangeJiaoTamePoint(context, jiao, addValue);
			}
		}

		// Token: 0x06002056 RID: 8278 RVA: 0x0019F9F0 File Offset: 0x0019DBF0
		public static void JiaoInterruptNurture(int poolId)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			DomainManager.Extra.SetJiaoPoolStatus(new IntPair(poolId, 6), context);
			DomainManager.Extra.JiaoEvolveToCarrier(context, poolId);
		}

		// Token: 0x06002057 RID: 8279 RVA: 0x0019FA2C File Offset: 0x0019DC2C
		public static string JiaoGetNameByPool(int poolId, int index = 0)
		{
			GameData.DLC.FiveLoong.Jiao jiao;
			bool flag = !DomainManager.Extra.TryGetJiaoFromPool(poolId, out jiao, -1, index);
			string result;
			if (flag)
			{
				result = string.Empty;
			}
			else
			{
				result = jiao.GetNameText();
			}
			return result;
		}

		// Token: 0x06002058 RID: 8280 RVA: 0x0019FA64 File Offset: 0x0019DC64
		public static int JiaoGetIdByPool(int poolId, int index = 0)
		{
			GameData.DLC.FiveLoong.Jiao jiao;
			bool flag = !DomainManager.Extra.TryGetJiaoFromPool(poolId, out jiao, -1, index);
			int result;
			if (flag)
			{
				result = -1;
			}
			else
			{
				result = jiao.Id;
			}
			return result;
		}

		// Token: 0x06002059 RID: 8281 RVA: 0x0019FA98 File Offset: 0x0019DC98
		public static short JiaoGetCharIdByPool(int poolId)
		{
			GameData.DLC.FiveLoong.Jiao jiao;
			bool flag = !DomainManager.Extra.TryGetJiaoFromPool(poolId, out jiao, -1, 0);
			short result;
			if (flag)
			{
				result = -1;
			}
			else
			{
				result = Config.Jiao.Instance[jiao.TemplateId].IndexOfCharacterTemplate;
			}
			return result;
		}

		// Token: 0x0600205A RID: 8282 RVA: 0x0019FADC File Offset: 0x0019DCDC
		public static void JiaoCreateTempChar(int poolId, EventArgBox argBox, string key = "CharacterId")
		{
			bool flag = argBox.Contains<int>(key);
			if (!flag)
			{
				GameData.DLC.FiveLoong.Jiao jiao;
				bool flag2 = !DomainManager.Extra.TryGetJiaoFromPool(poolId, out jiao, -1, 0);
				if (!flag2)
				{
					short characterTemplateId = Config.Jiao.Instance[jiao.TemplateId].IndexOfCharacterTemplate;
					int charId = EventHelper.CreateNonIntelligentCharacter(characterTemplateId);
					bool flag3 = jiao.NameId >= 0;
					if (flag3)
					{
						string jiaoName = DomainManager.World.GetElement_CustomTexts(jiao.NameId);
						bool flag4 = !string.IsNullOrEmpty(jiaoName);
						if (flag4)
						{
							DomainManager.Extra.AssignCharacterCustomDisplayName(EventHelper.Domain.MainThreadDataContext, charId, jiaoName);
							GameData.Domains.Character.Character character = DomainManager.Character.GetElement_Objects(charId);
							FullName fullName = character.GetFullName();
							fullName.Type = 8;
							character.SetFullName(fullName, EventHelper.Domain.MainThreadDataContext);
						}
					}
					argBox.Set(key, charId);
					argBox.Set("JiaoId", jiao.Id);
				}
			}
		}

		// Token: 0x0600205B RID: 8283 RVA: 0x0019FBD4 File Offset: 0x0019DDD4
		public static void PetJiao(int poolId)
		{
			GameData.DLC.FiveLoong.Jiao jiao;
			bool flag = DomainManager.Extra.TryGetJiaoFromPool(poolId, out jiao, 1, 0);
			if (flag)
			{
				DomainManager.Extra.PetJiao(EventHelper.Domain.MainThreadDataContext, jiao.Id);
			}
		}

		// Token: 0x0600205C RID: 8284 RVA: 0x0019FC14 File Offset: 0x0019DE14
		public static bool IsJiaoAbleToPet(int jiaoId)
		{
			return DomainManager.Extra.IsJiaoAbleToPet(jiaoId);
		}

		// Token: 0x0600205D RID: 8285 RVA: 0x0019FC34 File Offset: 0x0019DE34
		public static void SetJiaoName(int jiaoCharacterId, int jiaoId)
		{
			GameData.DLC.FiveLoong.Jiao jiao = DomainManager.Extra.GetJiaoById(jiaoId);
			bool flag = jiao.NameId >= 0;
			if (flag)
			{
				string jiaoName = DomainManager.World.GetElement_CustomTexts(jiao.NameId);
				bool flag2 = !string.IsNullOrEmpty(jiaoName);
				if (flag2)
				{
					DomainManager.Extra.AssignCharacterCustomDisplayName(EventHelper.Domain.MainThreadDataContext, jiaoCharacterId, jiaoName);
					GameData.Domains.Character.Character character = DomainManager.Character.GetElement_Objects(jiaoCharacterId);
					FullName fullName = character.GetFullName();
					fullName.Type = 8;
					character.SetFullName(fullName, EventHelper.Domain.MainThreadDataContext);
				}
			}
		}

		// Token: 0x0600205E RID: 8286 RVA: 0x0019FCCC File Offset: 0x0019DECC
		public static void JiaoRemoveTempChar(EventArgBox argBox, string key = "CharacterId")
		{
			bool flag = !argBox.Contains<int>(key);
			if (!flag)
			{
				GameData.Domains.Character.Character character = argBox.GetCharacter(key);
				EventHelper.RemoveNonIntelligentCharacter(character);
				DomainManager.Extra.RemoveCharacterCustomDisplayName(EventHelper.Domain.MainThreadDataContext, character.GetId());
				argBox.Remove<int>(key);
			}
		}

		// Token: 0x0600205F RID: 8287 RVA: 0x0019FD1C File Offset: 0x0019DF1C
		public static short JiaoGetExistNurturance(int poolId, int index = 0)
		{
			GameData.DLC.FiveLoong.Jiao jiao;
			bool flag = !DomainManager.Extra.TryGetJiaoFromPool(poolId, out jiao, -1, index);
			short result;
			if (flag)
			{
				result = -1;
			}
			else
			{
				result = jiao.NurturanceTemplateId;
			}
			return result;
		}

		// Token: 0x06002060 RID: 8288 RVA: 0x0019FD50 File Offset: 0x0019DF50
		public static bool JiaoIsNurturanceSamePool(int poolId, short nurturanceTemplateId)
		{
			return EventHelper.JiaoGetExistNurturance(poolId, 0) == nurturanceTemplateId;
		}

		// Token: 0x06002061 RID: 8289 RVA: 0x0019FD6C File Offset: 0x0019DF6C
		public static bool JiaoIsMatchStage(int poolId, sbyte growthStage)
		{
			GameData.DLC.FiveLoong.Jiao jiao;
			bool flag = !DomainManager.Extra.TryGetJiaoFromPool(poolId, out jiao, -1, 0);
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				JiaoPool jiaoPool;
				bool flag2 = !DomainManager.Extra.TryGetJiaoPool(poolId, out jiaoPool);
				result = (!flag2 && jiao.GrowthStage == growthStage && jiaoPool.Jiaos.Count == 1);
			}
			return result;
		}

		// Token: 0x06002062 RID: 8290 RVA: 0x0019FDCC File Offset: 0x0019DFCC
		public static bool JiaoIsBreeding(int poolId)
		{
			JiaoPool jiaoPool;
			bool flag = !DomainManager.Extra.TryGetJiaoPool(poolId, out jiaoPool);
			return !flag && jiaoPool.Jiaos.Count > 1;
		}

		// Token: 0x06002063 RID: 8291 RVA: 0x0019FE04 File Offset: 0x0019E004
		public static void JiaoShowDialog(string dialogTitleIdName, string dialogContentIdName, string nextEventGuid = "", EventArgBox argBox = null)
		{
			EventHelper.ShowDialogFromEvent("<Language Key=" + dialogTitleIdName + "/>", "<Language Key=" + dialogContentIdName + "/>", 1, nextEventGuid, argBox);
		}

		// Token: 0x06002064 RID: 8292 RVA: 0x0019FE30 File Offset: 0x0019E030
		public static void JiaoSetFostered(int poolId)
		{
			DomainManager.Extra.SetJiaoFostered(poolId);
		}

		// Token: 0x06002065 RID: 8293 RVA: 0x0019FE40 File Offset: 0x0019E040
		public static bool JiaoIsFostered(int poolId)
		{
			return DomainManager.Extra.IsJiaoFostered(poolId);
		}

		// Token: 0x06002066 RID: 8294 RVA: 0x0019FE60 File Offset: 0x0019E060
		public static string HandleJiaoCombatResult(EventArgBox argBox)
		{
			short characterTemplateId = 0;
			argBox.Get("LoongCharacterTemplateId", ref characterTemplateId);
			int jiaoId = 0;
			argBox.Get("JiaoId", ref jiaoId);
			GameData.Domains.Character.Character taiwu = argBox.GetCharacter("RoleTaiwu");
			Location taiwuLocation = taiwu.GetLocation();
			int animalId = -1;
			argBox.Get("AnimalId", ref animalId);
			GameData.Domains.Character.Animal animal = EventHelper.TryGetAnimal(animalId);
			ItemKey itemKey = animal.ItemKey;
			bool isMaterial = itemKey.ItemType == 5;
			GameData.Domains.Character.Character jiao = argBox.GetCharacter("Jiao");
			EventHelper.RemoveNonIntelligentCharacter(jiao);
			string nextString = string.Empty;
			ItemKey seizeItem;
			bool flag = argBox.Get<ItemKey>("ItemKeySeizeCarrierInCombat", out seizeItem);
			string result;
			if (flag)
			{
				EventHelper.RemoveFleeCarrierLocation(itemKey);
				EventHelper.RemoveAnimal(animal);
				EventHelper.ApplyAnimalTamingResult(taiwu, animal, true, taiwu.GetLocation(), seizeItem);
				bool flag2 = !isMaterial;
				if (flag2)
				{
					EventHelper.AddInventoryItem(taiwu, itemKey, 1);
					argBox.Set("EscapeCarriers", EventHelper.GetJiaoName(jiaoId));
					nextString = "33fb78b2-c124-4919-96d6-6b98d4ce3712";
				}
				else
				{
					ValueTuple<bool, short> tuple = EventHelper.KidnapMiscJiao(jiaoId);
					bool item = tuple.Item1;
					if (item)
					{
						nextString = "617c2a29-381b-4292-8c24-4e7910c2c953";
					}
					else
					{
						nextString = "2c136803-4be2-4cec-9374-63bee19ffb95";
					}
					JiaoPropertyItem config = Config.JiaoProperty.Instance[tuple.Item2];
					argBox.Set("JiaoPropertyDesc", tuple.Item1 ? config.EventDescUp : config.EventDescDown);
				}
				EventHelper.ShowGetItemPageForItems(new List<ValueTuple<ItemKey, int>>
				{
					new ValueTuple<ItemKey, int>(itemKey, 1)
				}, nextString, argBox, false);
				result = string.Empty;
			}
			else
			{
				int combatResult = 0;
				bool flag3 = argBox.Get("CombatResult", ref combatResult);
				if (flag3)
				{
					bool flag4 = combatResult == 0 || combatResult == 5;
					if (flag4)
					{
						bool flag5 = !isMaterial;
						if (flag5)
						{
							argBox.Set("EscapeCarriers", EventHelper.GetJiaoName(jiaoId));
							EventHelper.ShowGetItemPageForItems(new List<ValueTuple<ItemKey, int>>
							{
								new ValueTuple<ItemKey, int>(itemKey, 1)
							}, "33fb78b2-c124-4919-96d6-6b98d4ce3712", argBox, false);
							EventHelper.RemoveFleeCarrierLocation(itemKey);
							EventHelper.RemoveAnimal(animal);
							EventHelper.AddInventoryItem(taiwu, itemKey, 1);
							result = string.Empty;
						}
						else
						{
							result = "5da7e3bd-788f-4564-a0e6-8c7bb41d432a";
						}
					}
					else
					{
						bool flag6 = combatResult == 3;
						if (flag6)
						{
							result = "85fac506-be5c-40ec-833b-ee2dd6835d85";
						}
						else
						{
							bool flag7 = combatResult == 2;
							if (flag7)
							{
								result = "9205d907-63b3-4e79-bf88-b239f47cb2c6";
							}
							else
							{
								bool flag8 = combatResult == 1;
								if (flag8)
								{
									result = "cfbe4c8c-829e-4eeb-8051-4f199c971f5a";
								}
								else
								{
									result = "9205d907-63b3-4e79-bf88-b239f47cb2c6";
								}
							}
						}
					}
				}
				else
				{
					result = string.Empty;
				}
			}
			return result;
		}

		// Token: 0x06002067 RID: 8295 RVA: 0x001A00CC File Offset: 0x0019E2CC
		public static bool GetMainStoryPartTwoUnLockState()
		{
			return true;
		}

		// Token: 0x06002068 RID: 8296 RVA: 0x001A00E0 File Offset: 0x0019E2E0
		public static bool GetIsQuickStartGame()
		{
			EventArgBox argBox = DomainManager.TaiwuEvent.GetGlobalEventArgumentBox();
			return argBox.GetBool("CS_PK_IsQuickStartGame");
		}

		// Token: 0x06002069 RID: 8297 RVA: 0x001A0108 File Offset: 0x0019E308
		public static void OpenMonthNotifyForStartCricketContent(string listenEventId, EventArgBox argBox)
		{
			EventHelper.Domain.SetListenerWithActionName(listenEventId, argBox, "MonthNotifyShowed");
			GameDataBridge.AddDisplayEvent(DisplayEventType.OpenMonthNotifyForCricketContent);
		}

		// Token: 0x0600206A RID: 8298 RVA: 0x001A0128 File Offset: 0x0019E328
		public static void OpenAdventurePrepare(short adventureTemplateId, bool forceSameLocation)
		{
			GameData.Domains.Character.Character taiwuChar = DomainManager.Taiwu.GetTaiwu();
			if (forceSameLocation)
			{
				bool flag = !EventHelper.CheckAdventureSiteState(taiwuChar.GetLocation(), adventureTemplateId, 1);
				if (flag)
				{
					return;
				}
			}
			GameDataBridge.AddDisplayEvent<short>(DisplayEventType.OpenAdventurePrepare, adventureTemplateId);
		}

		// Token: 0x0600206B RID: 8299 RVA: 0x001A0167 File Offset: 0x0019E367
		public static void OperateBlackMask(bool animShowMask, float animTime, bool hideMaskAfterShow)
		{
			GameDataBridge.AddDisplayEvent<bool, float, bool>(DisplayEventType.OperateBlackMaskView, animShowMask, animTime, hideMaskAfterShow);
		}

		// Token: 0x0600206C RID: 8300 RVA: 0x001A0178 File Offset: 0x0019E378
		public static Location[] GetBrokenPerformAreaLocationData()
		{
			short areaId = 138;
			Location postLocation = Location.Invalid;
			Location wangliuzhaiLocation = Location.Invalid;
			EventHelper.IterateAreaBlocks(areaId, delegate(MapBlockData data)
			{
				bool flag = data.TemplateId == 38;
				if (flag)
				{
					postLocation = new Location(areaId, data.BlockId);
				}
				bool flag2 = data.TemplateId == 36;
				if (flag2)
				{
					wangliuzhaiLocation = new Location(areaId, data.BlockId);
				}
			});
			return new Location[]
			{
				postLocation,
				wangliuzhaiLocation
			};
		}

		// Token: 0x0600206D RID: 8301 RVA: 0x001A01EC File Offset: 0x0019E3EC
		public static int CreateChuiXingGraveAndAddRelationWithHuanYue(Location location, sbyte level, int deathDate, int huanYueCharId)
		{
			int chuiXingCharId = EventHelper.CreateFixedCharacterGrave(468, location, level, deathDate);
			DomainManager.Character.AddRelation(EventHelper.Domain.MainThreadDataContext, chuiXingCharId, huanYueCharId, 4, int.MinValue);
			return chuiXingCharId;
		}

		// Token: 0x0600206E RID: 8302 RVA: 0x001A022C File Offset: 0x0019E42C
		public static void StartShowSwordTombCreate()
		{
			Location taiwuVillageLocation = DomainManager.Taiwu.GetTaiwuVillageLocation();
			List<Location> locationList = new List<Location>();
			for (int i = 1; i < 8; i++)
			{
				locationList.Add(DomainManager.Map.GetElement_SwordTombLocations(i));
			}
			locationList.Add(DomainManager.Map.GetElement_SwordTombLocations(0));
			locationList.Add(taiwuVillageLocation);
			GameDataBridge.AddDisplayEvent<List<Location>>(DisplayEventType.StartCreateSwordTomb, locationList);
		}

		// Token: 0x0600206F RID: 8303 RVA: 0x001A0294 File Offset: 0x0019E494
		public static int CreateBreakTombXiangshuFixedCharacterAtIndex(sbyte index)
		{
			sbyte xiangshuLevel = DomainManager.World.GetXiangshuLevel();
			Location location = DomainManager.Map.GetElement_SwordTombLocations((int)index);
			MapBlockData blockData = DomainManager.Map.GetBlock(location);
			short blockTemplateId = blockData.TemplateId;
			sbyte xiangshuAvatarId = (sbyte)XiangshuAvatarIds.SwordTombBlockTemplateIds.IndexOf(blockTemplateId);
			bool flag = xiangshuAvatarId < 0;
			if (flag)
			{
				DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(59, 1);
				defaultInterpolatedStringHandler.AppendFormatted<Location>(location);
				defaultInterpolatedStringHandler.AppendLiteral(" has no sword tomb,can not create xiangshu fixed character!");
				throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
			}
			short xiangshuTemplateId = XiangshuAvatarIds.GetCurrentLevelXiangshuTemplateId(xiangshuAvatarId, xiangshuLevel, true);
			GameData.Domains.Character.Character xiangshuCharacter = EventHelper.GetOrCreateFixedCharacterByTemplateId(xiangshuTemplateId);
			EventHelper.MoveFixedCharacter(xiangshuCharacter, EventHelper.GetBlockLocationGroup(location, true).Sample<Location>());
			return xiangshuCharacter.GetId();
		}

		// Token: 0x06002070 RID: 8304 RVA: 0x001A0348 File Offset: 0x0019E548
		public static Location GetSwordTombLocationAtIndex(sbyte index)
		{
			Location location = DomainManager.Map.GetElement_SwordTombLocations((int)index);
			List<Location> locationList = EventHelper.GetBlockLocationGroup(location, true);
			foreach (Location cellLocation in locationList)
			{
				bool flag = EventHelper.CheckBlockHasAdventure(cellLocation);
				if (flag)
				{
					AdventureItem advConfig = EventHelper.GetAdventureConfigOfLocation(cellLocation);
					bool flag2 = XiangshuAvatarIds.SwordTombAdventureTemplateIds.Contains(advConfig.TemplateId);
					if (flag2)
					{
						location = cellLocation;
						break;
					}
				}
			}
			return location;
		}

		// Token: 0x06002071 RID: 8305 RVA: 0x001A03E4 File Offset: 0x0019E5E4
		public static void RemoveSwordTombFromLocation(Location location)
		{
			List<Location> blockIdList = EventHelper.GetBlockLocationGroup(location, true);
			short settlementId = DomainManager.Map.GetNearestSettlementIdByLocation(location);
			List<short[]> noDevelopedIdList = new List<short[]>();
			List<short> developedIdList = new List<short>();
			MapBlock.Instance.Iterate(delegate(MapBlockItem e)
			{
				bool flag3 = e.Size > 1;
				bool result;
				if (flag3)
				{
					result = true;
				}
				else
				{
					bool flag4 = e.Type == EMapBlockType.Developed && e.CanGenerate;
					if (flag4)
					{
						developedIdList.Add(e.TemplateId);
					}
					bool flag5 = e.Type == EMapBlockType.Normal && e.CanGenerate;
					if (flag5)
					{
						noDevelopedIdList.Add(new short[]
						{
							e.TemplateId,
							15
						});
					}
					bool flag6 = e.Type == EMapBlockType.Wild && e.CanGenerate;
					if (flag6)
					{
						noDevelopedIdList.Add(new short[]
						{
							e.TemplateId,
							60
						});
					}
					bool flag7 = e.Type == EMapBlockType.Bad && e.CanGenerate && e.SubType != EMapBlockSubType.Ruin && e.SubType != EMapBlockSubType.DarkPool;
					if (flag7)
					{
						noDevelopedIdList.Add(new short[]
						{
							e.TemplateId,
							25
						});
					}
					result = true;
				}
				return result;
			});
			short rootBlockId = DomainManager.Map.GetBlock(location).RootBlockId;
			bool flag = rootBlockId != -1;
			if (flag)
			{
				location = new Location(location.AreaId, rootBlockId);
			}
			DomainManager.Map.ChangeBlockTemplate(EventHelper.Domain.MainThreadDataContext, location, noDevelopedIdList.Sample<short[]>()[0], true);
			foreach (Location cellLocation in blockIdList)
			{
				short[] randomCell = EventHelper.GetRandomCellFromWeightCore(noDevelopedIdList);
				short blockTemplateId = randomCell[0];
				bool settlementInfluence = DomainManager.Map.IsLocationInSettlementInfluenceRange(cellLocation, settlementId);
				bool flag2 = settlementInfluence;
				if (flag2)
				{
					blockTemplateId = developedIdList.GetRandom(EventHelper.Domain.MainThreadDataContext.Random);
				}
				DomainManager.Map.ChangeBlockTemplate(EventHelper.Domain.MainThreadDataContext, cellLocation, blockTemplateId, true);
				MapBlockData cellBlockData = DomainManager.Map.GetBlock(cellLocation);
				cellBlockData.Destroyed = true;
				cellBlockData.CurrResources.Initialize();
			}
		}

		// Token: 0x06002072 RID: 8306 RVA: 0x001A0554 File Offset: 0x0019E754
		public static void RemoveNonIntelligentCharacter(GameData.Domains.Character.Character nonIntelligentCharacter)
		{
			bool flag = nonIntelligentCharacter == null;
			if (!flag)
			{
				byte creatingType = nonIntelligentCharacter.GetCreatingType();
				int charId = nonIntelligentCharacter.GetId();
				bool condition = creatingType != 1;
				DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(45, 2);
				defaultInterpolatedStringHandler.AppendLiteral("charId");
				defaultInterpolatedStringHandler.AppendFormatted<int>(charId);
				defaultInterpolatedStringHandler.AppendLiteral(": ");
				defaultInterpolatedStringHandler.AppendFormatted<byte>(creatingType);
				defaultInterpolatedStringHandler.AppendLiteral(" != CreatingType.IntelligentCharacter");
				Tester.Assert(condition, defaultInterpolatedStringHandler.ToStringAndClear());
				DomainManager.Character.RemoveNonIntelligentCharacter(EventHelper.Domain.MainThreadDataContext, nonIntelligentCharacter);
			}
		}

		// Token: 0x06002073 RID: 8307 RVA: 0x001A05E8 File Offset: 0x0019E7E8
		public static void RemoveXiangshuFixedCharacter(GameData.Domains.Character.Character xiangshuChar)
		{
			bool flag = xiangshuChar == null;
			if (flag)
			{
				throw new Exception("null xiangshu character,can not remove!");
			}
			EventHelper.MoveFixedCharacter(xiangshuChar, Location.Invalid);
			DomainManager.Character.RemoveNonIntelligentCharacter(EventHelper.Domain.MainThreadDataContext, xiangshuChar);
		}

		// Token: 0x06002074 RID: 8308 RVA: 0x001A062C File Offset: 0x0019E82C
		public static GameData.Domains.Character.Character GetUndefeatedXiangshuCharacterForStory()
		{
			sbyte[] xiangshuAvatarIdTasksInOrder = DomainManager.World.GetXiangshuAvatarTasksInOrder();
			sbyte xiangshuAvatarId = xiangshuAvatarIdTasksInOrder[0];
			short xiangshuTemplateId = (short)(479 + (int)xiangshuAvatarId);
			return EventHelper.GetOrCreateFixedCharacterByTemplateId(xiangshuTemplateId);
		}

		// Token: 0x06002075 RID: 8309 RVA: 0x001A065C File Offset: 0x0019E85C
		public static GameData.Domains.Character.Character GetCanDefeatedXiangshuCharacterForStory()
		{
			sbyte[] xiangshuAvatarIdTasksInOrder = DomainManager.World.GetXiangshuAvatarTasksInOrder();
			sbyte xiangshuAvatarId = xiangshuAvatarIdTasksInOrder[0];
			short xiangshuTemplateId = XiangshuAvatarIds.GetCurrentLevelXiangshuTemplateId(xiangshuAvatarId, 8, true);
			return EventHelper.GetOrCreateFixedCharacterByTemplateId(xiangshuTemplateId);
		}

		// Token: 0x06002076 RID: 8310 RVA: 0x001A0690 File Offset: 0x0019E890
		public static void SetFirstSwordTombFinish()
		{
			sbyte[] xiangshuAvatarIdTasksInOrder = DomainManager.World.GetXiangshuAvatarTasksInOrder();
			DomainManager.World.SetSwordTombStatus(EventHelper.Domain.MainThreadDataContext, xiangshuAvatarIdTasksInOrder[0], 2);
		}

		// Token: 0x06002077 RID: 8311 RVA: 0x001A06C4 File Offset: 0x0019E8C4
		public static void CreateAllSwordTombAdventure()
		{
			bool flag = EventHelper.CheckMainStoryLineProgress(19);
			if (!flag)
			{
				for (int i = 1; i < 8; i++)
				{
					Location swordTombLocation = DomainManager.Map.GetElement_SwordTombLocations(i);
					List<Location> tombLocationList = EventHelper.GetBlockLocationGroup(swordTombLocation, true);
					tombLocationList.RemoveAll(new Predicate<Location>(EventHelper.CheckBlockHasAdventure));
					swordTombLocation = tombLocationList.Sample<Location>();
					MapBlockData blockData = DomainManager.Map.GetBlock(swordTombLocation);
					int xiangshuAvatarId = XiangshuAvatarIds.SwordTombBlockTemplateIds.IndexOf(blockData.TemplateId);
					bool flag2 = xiangshuAvatarId < 0;
					if (!flag2)
					{
						short adventureTemplateId = XiangshuAvatarIds.SwordTombAdventureTemplateIds[xiangshuAvatarId];
						bool flag3 = EventHelper.CheckAdventureSiteState(swordTombLocation, adventureTemplateId, 1);
						if (!flag3)
						{
							bool flag4 = EventHelper.TryCreateAdventureSite(swordTombLocation.AreaId, swordTombLocation.BlockId, adventureTemplateId, true);
							if (flag4)
							{
								DomainManager.Adventure.SetAdventureRemainingMonths(EventHelper.Domain.MainThreadDataContext, swordTombLocation.AreaId, swordTombLocation.BlockId, -1);
							}
						}
					}
				}
				EventHelper.StartNextSwordTombCountDown();
			}
		}

		// Token: 0x06002078 RID: 8312 RVA: 0x001A07B4 File Offset: 0x0019E9B4
		public static void CreateChickenCoopAtTaiwuVillage()
		{
			bool flag = DomainManager.Building.IsTaiwuVillageHaveSpecifyBuilding(49, false);
			if (!flag)
			{
				DomainManager.Building.PlaceBuildingAtBlock(EventHelper.Domain.MainThreadDataContext, EventArgBox.TaiwuVillageAreaId, EventArgBox.TaiwuVillageBlockId, 49, true, false);
			}
		}

		// Token: 0x06002079 RID: 8313 RVA: 0x001A07F8 File Offset: 0x0019E9F8
		public static void CreateKitchenAtSecretVillage(Location villageLocation)
		{
			DomainManager.Building.PlaceBuildingAtBlock(EventHelper.Domain.MainThreadDataContext, villageLocation.AreaId, villageLocation.BlockId, 203, true, false);
		}

		// Token: 0x0600207A RID: 8314 RVA: 0x001A0824 File Offset: 0x0019EA24
		public static void CreateChickenKingToTaiwuVillage()
		{
			short chickenTemplateId = 63;
			int id = DomainManager.Building.AddChicken(EventHelper.Domain.MainThreadDataContext, (int)DomainManager.Taiwu.GetTaiwuVillageSettlementId(), chickenTemplateId);
			DomainManager.Building.SetChickenHappiness(EventHelper.Domain.MainThreadDataContext, id, 100);
		}

		// Token: 0x0600207B RID: 8315 RVA: 0x001A086D File Offset: 0x0019EA6D
		public static void SetSecretVillageOnFire(bool onFire)
		{
			EventHelper.Domain.SetSecretVillageOnFire(onFire, EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x0600207C RID: 8316 RVA: 0x001A0886 File Offset: 0x0019EA86
		public static void SetTaiwuVillageShowShrine(bool shrineVisible)
		{
			EventHelper.Domain.SetTaiwuVillageShowShrine(shrineVisible, EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x0600207D RID: 8317 RVA: 0x001A08A0 File Offset: 0x0019EAA0
		public unsafe static void MakeBrokenPerformAreaCharacterAllDead()
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			MapDomain mapDomain = DomainManager.Map;
			CharacterDomain characterDomain = DomainManager.Character;
			short areaId = 138;
			HashSet<int> characters = new HashSet<int>();
			short brokenAreaId = -1;
			short areaTemplateId = mapDomain.GetElement_Areas((int)areaId).GetTemplateId();
			sbyte stateId = mapDomain.GetStateIdByStateTemplateId((short)DomainManager.World.GetTaiwuVillageStateTemplateId());
			for (int i = 0; i < 6; i++)
			{
				brokenAreaId = (short)((int)(45 + stateId * 6) + i);
				bool flag = mapDomain.GetElement_Areas((int)brokenAreaId).GetTemplateId() == areaTemplateId;
				if (flag)
				{
					break;
				}
			}
			Tester.Assert(brokenAreaId >= 0, "");
			Span<MapBlockData> blocks = mapDomain.GetAreaBlocks(areaId);
			Span<MapBlockData> span = blocks;
			for (int l = 0; l < span.Length; l++)
			{
				MapBlockData block2 = *span[l];
				bool flag2 = block2.CharacterSet != null;
				if (flag2)
				{
					characters.UnionWith(block2.CharacterSet);
				}
			}
			MapBlockData[] targetBlocks = (from block in mapDomain.GetAreaBlocks(brokenAreaId).ToArray()
			where block.IsPassable()
			select block).ToArray<MapBlockData>();
			foreach (int characterId in characters)
			{
				GameData.Domains.Character.Character character = characterDomain.GetElement_Objects(characterId);
				Location location = character.GetLocation();
				Location dest = new Location(brokenAreaId, targetBlocks.Sample<MapBlockData>().BlockId);
				character.SetLocation(dest, context);
				Events.RaiseCharacterLocationChanged(context, characterId, location, dest);
			}
			foreach (int characterId2 in characters)
			{
				GameData.Domains.Character.Character character2 = characterDomain.GetElement_Objects(characterId2);
				bool flag3 = character2.IsActiveExternalRelationState(2);
				if (flag3)
				{
					List<KidnappedCharacter> kidnappedChars = DomainManager.Character.GetKidnappedCharacters(character2.GetId()).GetCollection();
					for (int j = kidnappedChars.Count - 1; j >= 0; j--)
					{
						int kidnappedCharId = kidnappedChars[j].CharId;
						GameData.Domains.Character.Character kidnappedChar = DomainManager.Character.GetElement_Objects(kidnappedCharId);
						characterDomain.MakeCharacterDead(context, kidnappedChar, 10);
					}
				}
				characterDomain.MakeCharacterDead(context, character2, 10);
			}
			HashSet<int> taiwuGroup = DomainManager.Taiwu.GetGroupCharIds().GetCollection();
			foreach (int groupCharId in taiwuGroup)
			{
				GameData.Domains.Character.Character character3 = DomainManager.Character.GetElement_Objects(groupCharId);
				bool flag4 = character3.IsActiveExternalRelationState(2);
				if (flag4)
				{
					List<KidnappedCharacter> kidnappedChars2 = DomainManager.Character.GetKidnappedCharacters(character3.GetId()).GetCollection();
					for (int k = kidnappedChars2.Count - 1; k >= 0; k--)
					{
						int kidnappedCharId2 = kidnappedChars2[k].CharId;
						GameData.Domains.Character.Character kidnappedChar2 = DomainManager.Character.GetElement_Objects(kidnappedCharId2);
						bool flag5 = kidnappedChar2.GetOrganizationInfo().OrgTemplateId != 38;
						if (!flag5)
						{
							DomainManager.Organization.ChangeOrganization(context, kidnappedChar2, OrganizationInfo.None);
						}
					}
				}
			}
		}

		// Token: 0x0600207E RID: 8318 RVA: 0x001A0C28 File Offset: 0x0019EE28
		public static void DeActivateAllSwordTombAdventure()
		{
			short areaId = EventArgBox.TaiwuVillageAreaId;
			AreaAdventureData adventuresInArea = DomainManager.Adventure.GetAdventuresInArea(areaId);
			foreach (KeyValuePair<short, AdventureSiteData> siteData in adventuresInArea.AdventureSites)
			{
				bool flag = XiangshuAvatarIds.SwordTombAdventureTemplateIds.Contains(siteData.Value.TemplateId);
				if (flag)
				{
					DomainManager.Adventure.DeactivateAdventureSite(EventHelper.Domain.MainThreadDataContext, areaId, siteData.Key);
				}
			}
		}

		// Token: 0x0600207F RID: 8319 RVA: 0x001A0CC8 File Offset: 0x0019EEC8
		public static void ActivateSwordTombAdventure(Location location, sbyte monthCount = -128)
		{
			AreaAdventureData adventuresInArea = DomainManager.Adventure.GetAdventuresInArea(location.AreaId);
			AdventureSiteData adventureSiteData;
			bool flag = adventuresInArea.AdventureSites.TryGetValue(location.BlockId, out adventureSiteData);
			if (flag)
			{
				bool flag2 = !XiangshuAvatarIds.SwordTombAdventureTemplateIds.Contains(adventureSiteData.TemplateId);
				if (flag2)
				{
					return;
				}
			}
			DomainManager.Adventure.ActivateAdventureSite(EventHelper.Domain.MainThreadDataContext, location.AreaId, location.BlockId);
			bool flag3 = monthCount != sbyte.MinValue;
			if (flag3)
			{
				DomainManager.Adventure.SetAdventureRemainingMonths(EventHelper.Domain.MainThreadDataContext, location.AreaId, location.BlockId, (short)monthCount);
			}
		}

		// Token: 0x06002080 RID: 8320 RVA: 0x001A0D6C File Offset: 0x0019EF6C
		public static List<Location> GetRemainingSwordTombAdventure()
		{
			List<Location> resultList = new List<Location>();
			AreaAdventureData adventuresInArea = DomainManager.Adventure.GetAdventuresInArea(EventArgBox.TaiwuVillageAreaId);
			foreach (KeyValuePair<short, AdventureSiteData> pair in adventuresInArea.AdventureSites)
			{
				AdventureSiteData adventureSiteData = pair.Value;
				bool flag = XiangshuAvatarIds.SwordTombAdventureTemplateIds.Contains(adventureSiteData.TemplateId) && adventureSiteData.SiteState == 0;
				if (flag)
				{
					resultList.Add(new Location(EventArgBox.TaiwuVillageAreaId, pair.Key));
				}
			}
			return resultList;
		}

		// Token: 0x06002081 RID: 8321 RVA: 0x001A0E24 File Offset: 0x0019F024
		public static short GetSwordTombAdventureMaxMonthCount()
		{
			return DomainManager.Adventure.GetSwordTombAdventureMaxMonthCount();
		}

		// Token: 0x06002082 RID: 8322 RVA: 0x001A0E40 File Offset: 0x0019F040
		public static void OpenLegacyActivate()
		{
			GameDataBridge.AddDisplayEvent(DisplayEventType.OpenLegacyActivate);
		}

		// Token: 0x06002083 RID: 8323 RVA: 0x001A0E4C File Offset: 0x0019F04C
		public unsafe static Location GetLastSwordTombLocation()
		{
			AreaAdventureData adventuresInArea = DomainManager.Adventure.GetAdventuresInArea(EventArgBox.TaiwuVillageAreaId);
			Span<short> span = new Span<short>(stackalloc byte[(UIntPtr)18], 9);
			Span<short> swordTombBlockIds = span;
			swordTombBlockIds.Fill(-1);
			foreach (KeyValuePair<short, AdventureSiteData> keyValuePair in adventuresInArea.AdventureSites)
			{
				short num;
				AdventureSiteData adventureSiteData;
				keyValuePair.Deconstruct(out num, out adventureSiteData);
				short blockId = num;
				AdventureSiteData siteData = adventureSiteData;
				sbyte xiangshuAvatarId = XiangshuAvatarIds.GetXiangshuAvatarIdBySwordTomb(siteData.TemplateId);
				bool flag = xiangshuAvatarId >= 0;
				if (flag)
				{
					*swordTombBlockIds[(int)xiangshuAvatarId] = blockId;
				}
			}
			sbyte[] xiangshuTaskStatusInOrder = DomainManager.World.GetXiangshuAvatarTasksInOrder();
			for (sbyte i = 8; i >= 0; i -= 1)
			{
				sbyte xiangshuAvatarId2 = xiangshuTaskStatusInOrder[(int)i];
				bool flag2 = xiangshuAvatarId2 < 0;
				if (!flag2)
				{
					short blockId2 = *swordTombBlockIds[(int)xiangshuAvatarId2];
					bool flag3 = blockId2 < 0;
					if (!flag3)
					{
						return new Location(EventArgBox.TaiwuVillageAreaId, blockId2);
					}
				}
			}
			return Location.Invalid;
		}

		// Token: 0x06002084 RID: 8324 RVA: 0x001A0F70 File Offset: 0x0019F170
		public static void SetNextSwordTombCountDownDate()
		{
			byte invasionSpeedType = DomainManager.World.GetBossInvasionSpeedType();
			short coolDownMonthCount = GlobalConfig.SwordTombAdventureCountDownCoolDown[(int)invasionSpeedType];
			bool flag = DomainManager.World.GetMainStoryLineProgress() > 22;
			if (flag)
			{
				coolDownMonthCount /= 3;
			}
			int date = EventHelper.GetGameDate() + (int)coolDownMonthCount;
			EventHelper.SaveGlobalArg<int>("ConchShip_PresetKey_DateOfNextSwordTombActivate", date);
		}

		// Token: 0x06002085 RID: 8325 RVA: 0x001A0FBC File Offset: 0x0019F1BC
		public static void SetNextSwordTombAdventureCoolDownByFromAdventure(sbyte xiangshuAvatarId)
		{
			bool flag = !EventHelper.GlobalArgBoxContainsKey<int>("ConchShip_PresetKey_DateOfNextSwordTombActivate");
			if (flag)
			{
				EventHelper.SetNextSwordTombCountDownDate();
			}
			else
			{
				sbyte[] xiangshuAvatarTasksInOrder = DomainManager.World.GetXiangshuAvatarTasksInOrder();
				Dictionary<short, sbyte> adventureIdToXiangshuAvatarIdMap = new Dictionary<short, sbyte>
				{
					{
						114,
						0
					},
					{
						111,
						1
					},
					{
						108,
						2
					},
					{
						110,
						3
					},
					{
						109,
						4
					},
					{
						113,
						5
					},
					{
						116,
						6
					},
					{
						115,
						7
					},
					{
						112,
						8
					}
				};
				AreaAdventureData adventuresInArea = DomainManager.Adventure.GetAdventuresInArea(EventArgBox.TaiwuVillageAreaId);
				Dictionary<sbyte, KeyValuePair<short, AdventureSiteData>> xiangshuAvatarIdToAdventureMap = new Dictionary<sbyte, KeyValuePair<short, AdventureSiteData>>();
				foreach (KeyValuePair<short, AdventureSiteData> pair in adventuresInArea.AdventureSites)
				{
					sbyte avatarId;
					bool flag2 = adventureIdToXiangshuAvatarIdMap.TryGetValue(pair.Value.TemplateId, out avatarId);
					if (flag2)
					{
						bool flag3 = pair.Value.RemainingMonths > 0;
						if (flag3)
						{
							return;
						}
						xiangshuAvatarIdToAdventureMap.Add(avatarId, pair);
					}
				}
				foreach (sbyte avatarId2 in xiangshuAvatarTasksInOrder)
				{
					bool flag4 = xiangshuAvatarIdToAdventureMap.ContainsKey(avatarId2);
					if (flag4)
					{
						bool flag5 = avatarId2 == xiangshuAvatarId;
						if (flag5)
						{
							EventHelper.SetNextSwordTombCountDownDate();
							break;
						}
					}
				}
			}
		}

		// Token: 0x06002086 RID: 8326 RVA: 0x001A1134 File Offset: 0x0019F334
		public static void StartNextSwordTombCountDown()
		{
			DomainManager.Adventure.StartNextSwordTombCountDown();
		}

		// Token: 0x06002087 RID: 8327 RVA: 0x001A1144 File Offset: 0x0019F344
		public static Location MoveTaiwuAndRanchenziToDoubleGirl()
		{
			Location curLocation = DomainManager.Taiwu.GetTaiwu().GetLocation();
			List<Location> neighborListOf10 = EventHelper.GetMapBlocksNearLocation(curLocation, 10);
			List<Location> neighborListOf9 = EventHelper.GetMapBlocksNearLocation(curLocation, 9);
			neighborListOf10.RemoveAll((Location e) => neighborListOf9.Contains(e));
			neighborListOf10.RemoveAll((Location e) => EventHelper.CheckBlockMatchTemplate(e, -1, EMapBlockType.City, EMapBlockSubType.None));
			neighborListOf10.RemoveAll((Location e) => EventHelper.CheckBlockMatchTemplate(e, -1, EMapBlockType.Town, EMapBlockSubType.None));
			neighborListOf10.RemoveAll((Location e) => EventHelper.CheckBlockMatchTemplate(e, -1, EMapBlockType.Station, EMapBlockSubType.None));
			neighborListOf10.RemoveAll((Location e) => EventHelper.CheckBlockMatchTemplate(e, -1, EMapBlockType.Invalid, EMapBlockSubType.Ruin));
			neighborListOf10.RemoveAll((Location e) => EventHelper.CheckBlockMatchTemplate(e, -1, EMapBlockType.Invalid, EMapBlockSubType.DarkPool));
			neighborListOf10.RemoveAll((Location e) => EventHelper.CheckBlockMatchTemplate(e, -1, EMapBlockType.Invalid, EMapBlockSubType.Block));
			neighborListOf10.RemoveAll((Location e) => EventHelper.CheckBlockMatchTemplate(e, -1, EMapBlockType.Invalid, EMapBlockSubType.SwordTomb));
			neighborListOf10.RemoveAll((Location e) => !DomainManager.Map.GetBlock(e).IsPassable());
			Location targetLocation = neighborListOf10.Sample<Location>();
			DomainManager.Map.SetBlockAndViewRangeVisible(EventHelper.Domain.MainThreadDataContext, targetLocation.AreaId, targetLocation.BlockId);
			GameData.Domains.Character.Character charRanchenzi = EventHelper.GetOrCreateFixedCharacterByTemplateId(441);
			EventHelper.MoveFixedCharacter(charRanchenzi, targetLocation);
			GameDataBridge.AddDisplayEvent<Location, Location>(DisplayEventType.MainStoryMoveTaiwuAndRanChenZi, curLocation, targetLocation);
			return targetLocation;
		}

		// Token: 0x06002088 RID: 8328 RVA: 0x001A1310 File Offset: 0x0019F510
		public static void SetHideAllTeammates(bool hideState)
		{
			int[] savedCombatCharIds = EventHelper.Domain.GetAllCombatGroupChars();
			int i = 0;
			int max = 3;
			while (i < max)
			{
				if (hideState)
				{
					int charId = DomainManager.Taiwu.GetElement_CombatGroupCharIds(i);
					savedCombatCharIds[i] = charId;
					DomainManager.Taiwu.SetElement_CombatGroupCharIds(i, -1, EventHelper.Domain.MainThreadDataContext);
				}
				else
				{
					int charId2 = savedCombatCharIds[i];
					bool flag = DomainManager.Taiwu.GetTaiwuCharId() == charId2 || !DomainManager.Character.IsCharacterAlive(charId2);
					if (flag)
					{
						charId2 = -1;
					}
					DomainManager.Taiwu.SetElement_CombatGroupCharIds(i, charId2, EventHelper.Domain.MainThreadDataContext);
				}
				i++;
			}
			EventHelper.Domain.SetAllCombatGroupChars(savedCombatCharIds, EventHelper.Domain.MainThreadDataContext);
			EventHelper.Domain.SetHideAllTeammates(hideState, EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x06002089 RID: 8329 RVA: 0x001A13EC File Offset: 0x0019F5EC
		public static sbyte GetUndefeatedXiangshuAvatarId()
		{
			sbyte[] xiangshuInOrder = DomainManager.World.GetXiangshuAvatarTasksInOrder();
			sbyte[] array = xiangshuInOrder;
			return array[array.Length - 1];
		}

		// Token: 0x0600208A RID: 8330 RVA: 0x001A1410 File Offset: 0x0019F610
		public static sbyte GetXiangshuAvatarIdInOrderOfIndex(sbyte index)
		{
			sbyte[] xiangshuInOrder = DomainManager.World.GetXiangshuAvatarTasksInOrder();
			return xiangshuInOrder[(int)index];
		}

		// Token: 0x0600208B RID: 8331 RVA: 0x001A1430 File Offset: 0x0019F630
		public static Location GetFuMoShenGuangLocationByIndex(sbyte index)
		{
			byte taiwuAreaSize = DomainManager.Map.GetAreaSize(EventArgBox.TaiwuVillageAreaId);
			ByteCoordinate taiwuVillageCoordinate = ByteCoordinate.IndexToCoordinate(EventArgBox.TaiwuVillageBlockId, taiwuAreaSize);
			byte x = taiwuVillageCoordinate.X;
			byte y = taiwuVillageCoordinate.Y;
			switch (index)
			{
			case 0:
				x += 3;
				break;
			case 1:
				x -= 3;
				break;
			case 2:
				y += 3;
				break;
			case 3:
				y -= 3;
				break;
			case 4:
				x += 2;
				y += 2;
				break;
			case 5:
				x -= 2;
				y -= 2;
				break;
			case 6:
				x -= 2;
				y += 2;
				break;
			case 7:
				x += 2;
				y -= 2;
				break;
			case 8:
				return DomainManager.Taiwu.GetTaiwuVillageLocation();
			default:
			{
				DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(50, 1);
				defaultInterpolatedStringHandler.AppendLiteral("wrong index ");
				defaultInterpolatedStringHandler.AppendFormatted<sbyte>(index);
				defaultInterpolatedStringHandler.AppendLiteral(" passed to get fumoshenguang location!");
				throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
			}
			}
			short blockId = ByteCoordinate.CoordinateToIndex(new ByteCoordinate(x, y), taiwuAreaSize);
			Location result = new Location(EventArgBox.TaiwuVillageAreaId, blockId);
			return result;
		}

		// Token: 0x0600208C RID: 8332 RVA: 0x001A155C File Offset: 0x0019F75C
		public static GameData.Domains.Character.Character CreateTaiwuShadowEnemy()
		{
			GameData.Domains.Character.Character taiwuChar = DomainManager.Taiwu.GetTaiwu();
			GameData.Domains.Character.Character shadowEnemy = DomainManager.Character.CreateTemporaryCopyOfCharacter(EventHelper.Domain.MainThreadDataContext, taiwuChar);
			DomainManager.Adventure.AddTemporaryIntelligentCharacter(shadowEnemy.GetId());
			return shadowEnemy;
		}

		// Token: 0x0600208D RID: 8333 RVA: 0x001A15A4 File Offset: 0x0019F7A4
		public unsafe static void MakeWorldChaos()
		{
			List<MapBlockData> wildBlocks = new List<MapBlockData>();
			List<MapBlockData> normalBlocks = new List<MapBlockData>();
			List<MapBlockData> developedBlocks = new List<MapBlockData>();
			EventHelper.<>c__DisplayClass963_0 CS$<>8__locals1;
			CS$<>8__locals1.ruinBlockTemplateIdList = new List<short>
			{
				118,
				119,
				120,
				121,
				122,
				123
			};
			for (short i = 0; i < 45; i += 1)
			{
				bool flag = i == EventArgBox.TaiwuVillageAreaId;
				if (!flag)
				{
					wildBlocks.Clear();
					normalBlocks.Clear();
					developedBlocks.Clear();
					Span<MapBlockData> areaBlockCollection = DomainManager.Map.GetAreaBlocks(i);
					Span<MapBlockData> span = areaBlockCollection;
					for (int j = 0; j < span.Length; j++)
					{
						MapBlockData blockData = *span[j];
						MapBlockItem config = blockData.GetConfig();
						bool flag2 = !MapBlockDataMatchers.CanBeRuinedByXiangshu(blockData) || config.Size > 1;
						if (!flag2)
						{
							bool flag3 = config.Type == EMapBlockType.Developed;
							if (flag3)
							{
								developedBlocks.Add(blockData);
							}
							bool flag4 = config.Type == EMapBlockType.Normal;
							if (flag4)
							{
								normalBlocks.Add(blockData);
							}
							bool flag5 = config.Type == EMapBlockType.Wild || config.Type == EMapBlockType.Bad;
							if (flag5)
							{
								bool flag6 = config.SubType != EMapBlockSubType.SwordTomb && config.SubType != EMapBlockSubType.Ruin;
								if (flag6)
								{
									wildBlocks.Add(blockData);
								}
							}
						}
					}
					EventHelper.<MakeWorldChaos>g__ChangeBlockToRuin|963_0(wildBlocks, (int)((float)wildBlocks.Count * 0.3f), ref CS$<>8__locals1);
					EventHelper.<MakeWorldChaos>g__ChangeBlockToRuin|963_0(normalBlocks, (int)((float)normalBlocks.Count * 0.2f), ref CS$<>8__locals1);
					EventHelper.<MakeWorldChaos>g__ChangeBlockToRuin|963_0(developedBlocks, (int)((float)developedBlocks.Count * 0.1f), ref CS$<>8__locals1);
				}
			}
			DomainManager.Character.GenerateSkeletons(EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x0600208E RID: 8334 RVA: 0x001A178C File Offset: 0x0019F98C
		public static void PrepareSectMembersAndTaiwuVillagersForSpiritualWanderPlace()
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			DomainManager.World.ResetWorldFunctionsStatus(context, 4);
			DomainManager.World.ResetWorldFunctionsStatus(context, 3);
			DomainManager.World.ResetWorldFunctionsStatus(context, 10);
			DomainManager.World.ResetWorldFunctionsStatus(context, 7);
			DomainManager.World.ResetWorldFunctionsStatus(context, 24);
			DomainManager.World.ResetWorldFunctionsStatus(context, 25);
			DomainManager.Adventure.ClearAllAdventureSites(context);
			Location taiwuLocation = DomainManager.Taiwu.GetTaiwu().GetLocation();
			Location taiwuVillageLocation = DomainManager.Taiwu.GetTaiwuVillageLocation();
			byte mapSize = DomainManager.Map.GetAreaSize(taiwuVillageLocation.AreaId);
			ByteCoordinate centerCoord = ByteCoordinate.IndexToCoordinate(taiwuVillageLocation.BlockId, mapSize);
			List<short> validCenters = ObjectPool<List<short>>.Instance.Get();
			List<MapBlockData> neighborBlocks = ObjectPool<List<MapBlockData>>.Instance.Get();
			List<int> memberIds = ObjectPool<List<int>>.Instance.Get();
			validCenters.Clear();
			foreach (ValueTuple<int, int> valueTuple in GameData.Domains.Map.SharedConstValue.TaiwuEnsuredSurroundingBlockOffsets)
			{
				int xOffset = valueTuple.Item1;
				int yOffset = valueTuple.Item2;
				ByteCoordinate coord = new ByteCoordinate((byte)((int)centerCoord.X + xOffset), (byte)((int)centerCoord.Y + yOffset));
				short blockId = ByteCoordinate.CoordinateToIndex(coord, mapSize);
				validCenters.Add(blockId);
			}
			CollectionUtils.Shuffle<short>(context.Random, validCenters);
			CharacterMatcherItem matcher = CharacterMatcher.DefValue.PrepareCharacterForSpiritualWanderPlace;
			foreach (OrganizationItem item in ((IEnumerable<OrganizationItem>)Organization.Instance))
			{
				bool flag = !item.IsSect;
				if (!flag)
				{
					Settlement settlement = DomainManager.Organization.GetSettlementByOrgTemplateId(item.TemplateId);
					GameData.Domains.Character.Character leader = settlement.GetLeader();
					bool flag2 = leader == null;
					if (flag2)
					{
						OrganizationMemberItem orgMemberConfig = OrganizationDomain.GetOrgMemberConfig(item.TemplateId, 8);
						sbyte gender = (orgMemberConfig.Gender >= 0) ? orgMemberConfig.Gender : Gender.GetRandom(context.Random);
						leader = EventHelper.CreateIntelligentCharacter(taiwuLocation, gender, -1, -1, settlement.GetId(), 8);
					}
					else
					{
						EventHelper.MoveIntelligentCharacter(leader, taiwuLocation);
					}
					leader.SpecifyBaseNeiliAllocation(context, default(NeiliAllocation));
					int currNeili = leader.GetMaxNeili() * 30 / 100;
					bool flag3 = leader.GetCurrNeili() > currNeili;
					if (flag3)
					{
						leader.SpecifyCurrNeili(context, currNeili);
					}
					context.Equipping.SelectEquipments(context, leader, true, false);
					OrgMemberCollection memberCollection = settlement.GetMembers();
					memberIds.Clear();
					memberIds.AddRange(memberCollection.GetMembers(6));
					memberIds.AddRange(memberCollection.GetMembers(7));
					memberIds.AddRange(memberCollection.GetMembers(8));
					memberIds.Remove(leader.GetId());
					List<short> list = validCenters;
					short centerBlockId = list[list.Count - 1];
					validCenters.RemoveAt(validCenters.Count - 1);
					DomainManager.Map.GetRealNeighborBlocks(taiwuVillageLocation.AreaId, centerBlockId, neighborBlocks, 1, true);
					foreach (int memberId in memberIds)
					{
						GameData.Domains.Character.Character character = DomainManager.Character.GetElement_Objects(memberId);
						bool flag4 = !matcher.Match(character);
						if (!flag4)
						{
							bool flag5 = character.GetLeaderId() == leader.GetId();
							if (!flag5)
							{
								bool flag6 = character.GetLeaderId() >= 0;
								if (flag6)
								{
									DomainManager.Character.LeaveGroup(context, character, true);
								}
								short blockId2 = neighborBlocks.GetRandom(context.Random).BlockId;
								Location location = new Location(taiwuVillageLocation.AreaId, blockId2);
								EventHelper.MoveIntelligentCharacter(character, location);
							}
						}
					}
				}
			}
			short centerBlockId2 = validCenters[0];
			validCenters.Clear();
			DomainManager.Map.GetRealNeighborBlocks(taiwuVillageLocation.AreaId, centerBlockId2, neighborBlocks, 1, true);
			short taiwuVillageSettlementId = DomainManager.Taiwu.GetTaiwuVillageSettlementId();
			Settlement taiwuVillageSettlement = DomainManager.Organization.GetSettlement(taiwuVillageSettlementId);
			taiwuVillageSettlement.GetMembers().GetAllMembers(memberIds);
			foreach (int memberId2 in memberIds)
			{
				GameData.Domains.Character.Character character2 = DomainManager.Character.GetElement_Objects(memberId2);
				bool flag7 = !matcher.Match(character2);
				if (!flag7)
				{
					DomainManager.Taiwu.RemoveVillagerWork(context, memberId2, true);
					DomainManager.Character.LeaveGroup(context, character2, true);
					short blockId3 = neighborBlocks.GetRandom(context.Random).BlockId;
					Location location2 = new Location(taiwuVillageLocation.AreaId, blockId3);
					EventHelper.MoveIntelligentCharacter(character2, location2);
				}
			}
			EventHelper.Domain.SaveArgToGlobalArgBox<Location>("MainStoryLine_SpiritualWanderPlace_TaiwuVillagersCenter", new Location(taiwuVillageLocation.AreaId, centerBlockId2));
		}

		// Token: 0x0600208F RID: 8335 RVA: 0x001A1CA0 File Offset: 0x0019FEA0
		public static void EnsureTaiwuVillagerLocationForSpiritualWanderPlace()
		{
			DataContext context = DomainManager.TaiwuEvent.MainThreadDataContext;
			EventArgBox globalEventArgumentBox = DomainManager.TaiwuEvent.GetGlobalEventArgumentBox();
			Location centerLocation;
			bool flag = !globalEventArgumentBox.Get<Location>("MainStoryLine_SpiritualWanderPlace_TaiwuVillagersCenter", out centerLocation);
			if (flag)
			{
				throw new Exception("MainStoryLine_SpiritualWanderPlace_TaiwuVillagersCenter is not saved.");
			}
			byte mapSize = DomainManager.Map.GetAreaSize(centerLocation.AreaId);
			List<MapBlockData> neighborBlocks = ObjectPool<List<MapBlockData>>.Instance.Get();
			List<int> memberIds = ObjectPool<List<int>>.Instance.Get();
			DomainManager.Map.GetRealNeighborBlocks(centerLocation.AreaId, centerLocation.BlockId, neighborBlocks, 1, true);
			short taiwuVillageSettlementId = DomainManager.Taiwu.GetTaiwuVillageSettlementId();
			Settlement taiwuVillageSettlement = DomainManager.Organization.GetSettlement(taiwuVillageSettlementId);
			taiwuVillageSettlement.GetMembers().GetAllMembers(memberIds);
			foreach (int memberId in memberIds)
			{
				bool flag2 = DomainManager.Taiwu.IsInGroup(memberId);
				if (!flag2)
				{
					GameData.Domains.Character.Character character = DomainManager.Character.GetElement_Objects(memberId);
					bool flag3 = character.GetKidnapperId() >= 0;
					if (!flag3)
					{
						Location currLocation = character.GetLocation();
						bool flag4 = ByteCoordinate.IndexToCoordinate(currLocation.BlockId, mapSize).GetManhattanDistance(ByteCoordinate.IndexToCoordinate(centerLocation.BlockId, mapSize)) <= 1;
						if (!flag4)
						{
							short blockId = neighborBlocks.GetRandom(context.Random).BlockId;
							Location location = new Location(centerLocation.AreaId, blockId);
							EventHelper.MoveIntelligentCharacter(character, location);
						}
					}
				}
			}
		}

		// Token: 0x06002090 RID: 8336 RVA: 0x001A1E3C File Offset: 0x001A003C
		public static void GenerateXiangshuMinions(List<MapBlockData> validBlocks)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			int factor = DomainManager.World.GetHereticsAmountFactor();
			for (int baseLevel = 0; baseLevel < 3; baseLevel++)
			{
				short enemyId = (short)(298 + baseLevel + 6 - 1);
				int enemyCount = (int)GlobalConfig.Instance.BrokenAreaEnemyCountLevelDist[baseLevel] * factor / 100;
				DomainManager.Adventure.CreateRandomEnemiesOnValidBlocks(context, Location.Invalid, enemyId, enemyCount, validBlocks);
			}
		}

		// Token: 0x06002091 RID: 8337 RVA: 0x001A1EA9 File Offset: 0x001A00A9
		public static void AddTravelCommand(string actionName)
		{
			GameDataBridge.AddDisplayEvent<string>(DisplayEventType.AreaTravelCommand, actionName);
		}

		// Token: 0x06002092 RID: 8338 RVA: 0x001A1EB8 File Offset: 0x001A00B8
		public static void RemoveRemainsOfImmortalXuFromInventory()
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			Inventory inventory = taiwu.GetInventory();
			foreach (KeyValuePair<ItemKey, int> pair in inventory.Items)
			{
				bool flag = pair.Key.ItemType == 12 && pair.Key.TemplateId == 228;
				if (flag)
				{
					EventHelper.RemoveInventoryItem(taiwu, pair.Key, 1, true);
					break;
				}
			}
		}

		// Token: 0x06002093 RID: 8339 RVA: 0x001A1F5C File Offset: 0x001A015C
		public static void ClearJuniorXiangshuFromWorld()
		{
			for (int xiangshuAvatarId = 0; xiangshuAvatarId < 9; xiangshuAvatarId++)
			{
				short juniorXiangshuTemplateId = XiangshuAvatarIds.JuniorXiangshuTemplateIds[xiangshuAvatarId];
				GameData.Domains.Character.Character juniorXiangshuChar;
				bool flag = DomainManager.Character.TryGetFixedCharacterByTemplateId(juniorXiangshuTemplateId, out juniorXiangshuChar);
				if (flag)
				{
					EventHelper.MoveFixedCharacter(juniorXiangshuChar, Location.Invalid);
				}
			}
			DomainManager.Adventure.RemoveAllJuniorXiangshuAdventures(EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x06002094 RID: 8340 RVA: 0x001A1FBC File Offset: 0x001A01BC
		public static void AddVillageChangeSaveInfectedVillagerCount()
		{
			bool flag = !EventHelper.GlobalArgBoxContainsKey<int>("ConchShip_PresetKey_VillageChange_SaveInfectedVillagerCount");
			if (flag)
			{
				EventHelper.SaveGlobalArg<int>("ConchShip_PresetKey_VillageChange_SaveInfectedVillagerCount", 1);
			}
			else
			{
				int count = EventHelper.GetIntFromGlobalArgBox("ConchShip_PresetKey_VillageChange_SaveInfectedVillagerCount");
				EventHelper.SaveGlobalArg<int>("ConchShip_PresetKey_VillageChange_SaveInfectedVillagerCount", count + 1);
			}
		}

		// Token: 0x06002095 RID: 8341 RVA: 0x001A2008 File Offset: 0x001A0208
		public static bool GetExorcismEnabled()
		{
			return DomainManager.Extra.GetExorcismEnabled();
		}

		// Token: 0x06002096 RID: 8342 RVA: 0x001A2024 File Offset: 0x001A0224
		public static void SetExorcismEnabled(bool enabled)
		{
			DomainManager.Extra.SetExorcismEnabled(enabled, EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x06002097 RID: 8343 RVA: 0x001A2040 File Offset: 0x001A0240
		public static bool IsExorcismNeedToBeDisabled()
		{
			return EventHelper.GetExorcismEnabled() && DomainManager.Taiwu.GetTaiwu().GetConsummateLevel() >= 4;
		}

		// Token: 0x06002098 RID: 8344 RVA: 0x001A2074 File Offset: 0x001A0274
		public unsafe static void RestoreAllTaiwuStatus()
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			Injuries injuries = taiwu.GetInjuries();
			injuries.Initialize();
			taiwu.SetInjuries(injuries, EventHelper.Domain.MainThreadDataContext);
			PoisonInts poisons = *taiwu.GetPoisoned();
			poisons.Initialize();
			taiwu.SetPoisoned(ref poisons, EventHelper.Domain.MainThreadDataContext);
			short leftMaxHealth = taiwu.GetLeftMaxHealth(false);
			taiwu.SetHealth(leftMaxHealth, EventHelper.Domain.MainThreadDataContext);
			taiwu.SetDisorderOfQi(DisorderLevelOfQi.MinValue, EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x06002099 RID: 8345 RVA: 0x001A2108 File Offset: 0x001A0308
		public static void ExecuteTaiwuVillageStationOpenDate()
		{
			bool flag = EventHelper.GlobalArgBoxContainsKey<Location>("TaiwuPostLocation");
			if (flag)
			{
				Location postLocation = EventHelper.GetObjectFromGlobalArgBox<Location>("TaiwuPostLocation");
				EventHelper.ChangeLocationBlockType(postLocation, 37, true);
			}
			EventHelper.SetWorldFunctionsStatus(3);
			EventHelper.SetWorldFunctionsStatus(2);
			EventHelper.SetWorldFunctionsStatus(4);
			EventHelper.SetWorldFunctionsStatus(9);
			EventHelper.SetWorldFunctionsStatus(11);
			EventHelper.SetWorldFunctionsStatus(13);
			EventHelper.OpenLegacyActivate();
			bool flag2 = EventHelper.IsInMainStoryLineProgress(14);
			if (flag2)
			{
				EventHelper.ChangeMainStoryLineProgress(15);
			}
			bool flag3 = EventHelper.IsInMainStoryLineProgress(15);
			if (flag3)
			{
				EventHelper.ChangeMainStoryLineProgress(16);
			}
			EventHelper.SaveGlobalArg<int>("CS_PK_StationOpenDate", EventHelper.GetGameDate());
		}

		// Token: 0x0600209A RID: 8346 RVA: 0x001A21A4 File Offset: 0x001A03A4
		public static void SaveTaiwuVillageStateOrgToArgBox(EventArgBox argBox)
		{
			sbyte sectId = DomainManager.Taiwu.GetTaiwuVillageStateSect();
			argBox.Set("OrgTemplateId", sectId);
		}

		// Token: 0x0600209B RID: 8347 RVA: 0x001A21CC File Offset: 0x001A03CC
		public static void SaveSettlementIdAndActorKey(EventArgBox argBox)
		{
			bool flag = argBox.Contains<short>("MonthlyEvent_arg1");
			short settlementId;
			sbyte orgId;
			if (flag)
			{
				settlementId = argBox.GetShort("MonthlyEvent_arg1");
				orgId = DomainManager.Organization.GetSettlement(settlementId).GetOrgTemplateId();
			}
			else
			{
				orgId = argBox.GetSbyte("OrgTemplateId");
				settlementId = DomainManager.Organization.GetSettlementIdByOrgTemplateId(orgId);
			}
			if (!true)
			{
			}
			short num;
			switch (orgId)
			{
			case 1:
				num = 292;
				break;
			case 2:
				num = 293;
				break;
			case 3:
				num = 294;
				break;
			case 4:
				num = 295;
				break;
			case 5:
				num = 296;
				break;
			case 6:
				num = 297;
				break;
			case 7:
				num = 298;
				break;
			case 8:
				num = 299;
				break;
			case 9:
				num = 300;
				break;
			case 10:
				num = 301;
				break;
			case 11:
				num = 302;
				break;
			case 12:
				num = 303;
				break;
			case 13:
				num = 304;
				break;
			case 14:
				num = 305;
				break;
			case 15:
				num = 306;
				break;
			default:
				num = -1;
				break;
			}
			if (!true)
			{
			}
			short actorId = num;
			bool flag2 = actorId < 0;
			if (!flag2)
			{
				EventHelper.CreateAdventureActor(actorId, "ActorKey", argBox);
				argBox.Set("SettlementId", settlementId);
				argBox.Set("OrgTemplateId", orgId);
			}
		}

		// Token: 0x0600209C RID: 8348 RVA: 0x001A2340 File Offset: 0x001A0540
		public static void ApplyVowRewards(string afterEvent, EventArgBox argBox, bool selectIgnore = false)
		{
			EventHelper.<>c__DisplayClass978_0 CS$<>8__locals1;
			CS$<>8__locals1.argBox = argBox;
			bool flag = CS$<>8__locals1.argBox.Contains<short>("MonthlyEvent_arg1");
			sbyte orgId;
			if (flag)
			{
				short settlementId = CS$<>8__locals1.argBox.GetShort("MonthlyEvent_arg1");
				orgId = DomainManager.Organization.GetSettlement(settlementId).GetOrgTemplateId();
			}
			else
			{
				orgId = CS$<>8__locals1.argBox.GetSbyte("OrgTemplateId");
				short settlementId = DomainManager.Organization.GetSettlementIdByOrgTemplateId(orgId);
			}
			CS$<>8__locals1.argBox.Set("OrgTemplateId", orgId);
			OrganizationItem orgConfig = Organization.Instance[orgId];
			bool flag2 = orgConfig == null;
			if (!flag2)
			{
				Location villageLocation = DomainManager.Taiwu.GetTaiwuVillageLocation();
				BuildingBlockData taiwuBuildingBlockData = DomainManager.Taiwu.GetTaiwuBuildingBlockData(44);
				BuildingBlockKey blockKey = new BuildingBlockKey(villageLocation.AreaId, villageLocation.BlockId, taiwuBuildingBlockData.BlockIndex);
				sbyte level = DomainManager.Building.BuildingBlockLevel(blockKey);
				bool flag3 = CS$<>8__locals1.argBox.Contains<short>("MonthlyEvent_arg3");
				if (flag3)
				{
					level = (sbyte)CS$<>8__locals1.argBox.GetShort("MonthlyEvent_arg3");
				}
				CS$<>8__locals1.context = EventHelper.Domain.MainThreadDataContext;
				CS$<>8__locals1.taiwuChar = DomainManager.Taiwu.GetTaiwu();
				CS$<>8__locals1.showItems = new List<ValueTuple<ItemKey, int>>();
				ValueTuple<int, int> bonuses = EventHelper.GetVowRewardBonuses(orgConfig.TemplateId, (int)level);
				List<PresetInventoryItem> list = orgConfig.VowFixedRewardItems;
				bool flag4 = list != null && list.Count > 0;
				if (flag4)
				{
					foreach (PresetInventoryItem reward in orgConfig.VowFixedRewardItems)
					{
						EventHelper.ApplyRewardsItemToTaiwu(reward, CS$<>8__locals1.showItems, bonuses.Item1, bonuses.Item2);
					}
				}
				list = orgConfig.VowRandomRewardItems;
				bool flag5 = list != null && list.Count > 0;
				if (flag5)
				{
					foreach (PresetInventoryItem reward2 in RandomUtils.GetRandomUnrepeated<PresetInventoryItem>(CS$<>8__locals1.context.Random, orgConfig.VowRandomRewardItemsCount + bonuses.Item2, orgConfig.VowRandomRewardItems, null))
					{
						EventHelper.ApplyRewardsItemToTaiwu(reward2, CS$<>8__locals1.showItems, bonuses.Item1, 0);
					}
				}
				List<ValueTuple<ItemKey, int>> showResources = new List<ValueTuple<ItemKey, int>>();
				for (sbyte i = 0; i < 7; i += 1)
				{
					int price = 5000 * (int)(level + 1);
					int value = CricketSpecialConstants.PriceToResource(i, price);
					CS$<>8__locals1.taiwuChar.ChangeResource(CS$<>8__locals1.context, i, value);
					int resourceTemplateId = 321 + (int)i;
					showResources.Add(new ValueTuple<ItemKey, int>(new ItemKey(12, 0, (short)resourceTemplateId, -1), value));
				}
				Location taiwuLocation = CS$<>8__locals1.taiwuChar.GetLocation();
				bool flag6 = !taiwuLocation.IsValid();
				if (flag6)
				{
					taiwuLocation = CS$<>8__locals1.taiwuChar.GetValidLocation();
				}
				short characterTemplateId = EventHelper.GetVowCharacterTemplateId(CS$<>8__locals1.argBox);
				GameData.Domains.Character.Character fixedCharacter = EventHelper.GetOrCreateFixedCharacterByTemplateId(characterTemplateId);
				EventHelper.MoveFixedCharacter(fixedCharacter, taiwuLocation);
				EventHelper.ConvertFixedCharacter(fixedCharacter, taiwuLocation, true);
				CS$<>8__locals1.argBox.Set("CharacterId", fixedCharacter.GetId());
				bool flag7 = !selectIgnore;
				if (flag7)
				{
					EventHelper.<ApplyVowRewards>g__ProcessAndRemoveBooks|978_0("VowCombatSkillBookKeyList", "SelectedCombatSkillBookKey", ref CS$<>8__locals1);
					EventHelper.<ApplyVowRewards>g__ProcessAndRemoveBooks|978_0("VowLifeSkillBookKeyList", "SelectedLifeSkillBookKey", ref CS$<>8__locals1);
				}
				bool flag8 = !selectIgnore;
				if (flag8)
				{
					EventHelper.ShowGetItemPageForItems(CS$<>8__locals1.showItems, showResources, afterEvent, CS$<>8__locals1.argBox, false);
				}
				else
				{
					OrganizationInfo taiwuOrgInfo = CS$<>8__locals1.taiwuChar.GetOrganizationInfo();
					EventHelper.JoinOrganization(fixedCharacter, taiwuOrgInfo.SettlementId, 0);
				}
			}
		}

		// Token: 0x0600209D RID: 8349 RVA: 0x001A26F0 File Offset: 0x001A08F0
		public static void GenerateSkillBooksForVow(EventArgBox argBox)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			sbyte orgId = argBox.GetSbyte("OrgTemplateId");
			EventHelper.GenerateCombatSkillBooksForVow(context, argBox, orgId);
			EventHelper.GenerateLifeSkillBooksForVow(context, argBox, orgId);
		}

		// Token: 0x0600209E RID: 8350 RVA: 0x001A2728 File Offset: 0x001A0928
		private static void GenerateCombatSkillBooksForVow(DataContext context, EventArgBox argBox, sbyte orgId)
		{
			bool flag = argBox.Contains<EventSelectItemData>("VowCombatSkillBookKeyList");
			if (flag)
			{
				AdaptableLog.Info("skip GenerateCombatSkillBooksForVow");
			}
			else
			{
				IRandomSource random = context.Random;
				EventSelectItemData combatSkillBookItemListData = new EventSelectItemData();
				EventSelectItemData eventSelectItemData = combatSkillBookItemListData;
				if (eventSelectItemData.CanSelectItemList == null)
				{
					eventSelectItemData.CanSelectItemList = new List<ItemDisplayData>();
				}
				SelectItemFilter filter = new SelectItemFilter
				{
					Key = "SelectedCombatSkillBookKey",
					DisplayDataFilterId = 0,
					FilterTemplateId = -1
				};
				combatSkillBookItemListData.FilterList.Add(filter);
				sbyte[] vowCombatSkillBookTypes = EventHelper.GetVowCombatSkillBookTypes(orgId);
				sbyte[] array = vowCombatSkillBookTypes;
				for (int i = 0; i < array.Length; i++)
				{
					sbyte skillType = array[i];
					List<short> availableSkills = (from c in Config.CombatSkill.Instance
					where c.SectId == orgId && c.Grade == 3 && c.Type == skillType
					select c.TemplateId).ToList<short>();
					bool flag2 = availableSkills.Count <= 0;
					if (!flag2)
					{
						short selectedSkillId = availableSkills[random.Next(0, availableSkills.Count)];
						short bookTemplateId = Config.CombatSkill.Instance[selectedSkillId].BookId;
						bool flag3 = bookTemplateId <= 0;
						if (!flag3)
						{
							ItemKey normalBook = DomainManager.Item.CreateSkillBook(context, bookTemplateId, 5, 0, -1, 100, true);
							ItemDisplayData normalBookDisplayData = DomainManager.Item.GetItemDisplayData(normalBook, -1);
							normalBookDisplayData.Amount = 1;
							combatSkillBookItemListData.CanSelectItemList.Add(normalBookDisplayData);
							ItemKey reverseBook = DomainManager.Item.CreateSkillBook(context, bookTemplateId, 5, 0, -1, 0, true);
							ItemDisplayData reverseBookDisplayData = DomainManager.Item.GetItemDisplayData(reverseBook, -1);
							reverseBookDisplayData.Amount = 1;
							combatSkillBookItemListData.CanSelectItemList.Add(reverseBookDisplayData);
						}
					}
				}
				argBox.Set("VowCombatSkillBookKeyList", combatSkillBookItemListData);
			}
		}

		// Token: 0x0600209F RID: 8351 RVA: 0x001A291C File Offset: 0x001A0B1C
		private static void GenerateLifeSkillBooksForVow(DataContext context, EventArgBox argBox, sbyte orgId)
		{
			bool flag = argBox.Contains<EventSelectItemData>("VowLifeSkillBookKeyList");
			if (flag)
			{
				AdaptableLog.Info("skip GenerateLifeSkillBooksForVow");
			}
			else
			{
				IRandomSource random = context.Random;
				EventSelectItemData lifeSkillBookItemKeyListData = new EventSelectItemData();
				EventSelectItemData eventSelectItemData = lifeSkillBookItemKeyListData;
				if (eventSelectItemData.CanSelectItemList == null)
				{
					eventSelectItemData.CanSelectItemList = new List<ItemDisplayData>();
				}
				SelectItemFilter filter = new SelectItemFilter
				{
					Key = "SelectedLifeSkillBookKey",
					DisplayDataFilterId = 0,
					FilterTemplateId = -1
				};
				lifeSkillBookItemKeyListData.FilterList.Add(filter);
				sbyte[] lifeSkillTypesFromFunc = EventHelper.GetVowLifeSkillBookTypes(orgId);
				sbyte[] array = lifeSkillTypesFromFunc;
				for (int i = 0; i < array.Length; i++)
				{
					sbyte skillType = array[i];
					List<short> availableSkills = (from c in LifeSkill.Instance
					where c.Grade == 3 && c.Type == skillType
					select c.TemplateId).ToList<short>();
					bool flag2 = availableSkills.Count <= 0;
					if (!flag2)
					{
						short selectedSkillId = availableSkills[random.Next(0, availableSkills.Count)];
						short bookTemplateId = LifeSkill.Instance[selectedSkillId].SkillBookId;
						bool flag3 = bookTemplateId <= 0;
						if (!flag3)
						{
							ItemKey lifeSkillBook = DomainManager.Item.CreateSkillBook(context, bookTemplateId, 5, 0, -1, 50, true);
							ItemDisplayData lifeSkillBookDisplayData = DomainManager.Item.GetItemDisplayData(lifeSkillBook, -1);
							lifeSkillBookDisplayData.Amount = 1;
							lifeSkillBookItemKeyListData.CanSelectItemList.Add(lifeSkillBookDisplayData);
						}
					}
				}
				argBox.Set("VowLifeSkillBookKeyList", lifeSkillBookItemKeyListData);
			}
		}

		// Token: 0x060020A0 RID: 8352 RVA: 0x001A2AB8 File Offset: 0x001A0CB8
		public static void ShowGeneratedCombatSkillBooksForVow(EventArgBox argBox)
		{
			EventSelectItemData selectItemData;
			bool flag = !argBox.Get<EventSelectItemData>("VowCombatSkillBookKeyList", out selectItemData);
			if (flag)
			{
				AdaptableLog.Error("VowCombatSkillBookKeyList not found in argBox.");
			}
			else
			{
				argBox.Set("SelectItemInfo", selectItemData);
			}
		}

		// Token: 0x060020A1 RID: 8353 RVA: 0x001A2AF8 File Offset: 0x001A0CF8
		public static void ShowGeneratedLifeSkillBooksForVow(EventArgBox argBox)
		{
			EventSelectItemData selectItemData;
			bool flag = !argBox.Get<EventSelectItemData>("VowLifeSkillBookKeyList", out selectItemData);
			if (flag)
			{
				AdaptableLog.Error("VowLifeSkillBookKeyList not found in argBox.");
			}
			else
			{
				argBox.Set("SelectItemInfo", selectItemData);
			}
		}

		// Token: 0x060020A2 RID: 8354 RVA: 0x001A2B38 File Offset: 0x001A0D38
		private static sbyte[] GetVowCombatSkillBookTypes(sbyte orgId)
		{
			if (!true)
			{
			}
			sbyte[] result;
			switch (orgId)
			{
			case 1:
				result = new sbyte[]
				{
					0,
					1,
					2,
					3,
					4,
					9
				};
				break;
			case 2:
				result = new sbyte[]
				{
					0,
					1,
					2,
					3,
					4,
					7,
					10
				};
				break;
			case 3:
				result = new sbyte[]
				{
					0,
					1,
					2,
					4,
					12,
					13
				};
				break;
			case 4:
				result = new sbyte[]
				{
					0,
					1,
					2,
					3,
					7,
					11
				};
				break;
			case 5:
				result = new sbyte[]
				{
					0,
					1,
					2,
					5,
					7,
					8
				};
				break;
			case 6:
				result = new sbyte[]
				{
					0,
					1,
					2,
					3,
					8,
					9
				};
				break;
			case 7:
				result = new sbyte[]
				{
					0,
					1,
					2,
					4,
					7,
					10
				};
				break;
			case 8:
				result = new sbyte[]
				{
					0,
					1,
					2,
					3,
					4,
					13
				};
				break;
			case 9:
				result = new sbyte[]
				{
					0,
					1,
					2,
					7,
					8,
					9,
					12
				};
				break;
			case 10:
				result = new sbyte[]
				{
					0,
					1,
					2,
					3,
					4,
					5,
					6
				};
				break;
			case 11:
				result = new sbyte[]
				{
					0,
					1,
					2,
					3,
					8,
					10
				};
				break;
			case 12:
				result = new sbyte[]
				{
					0,
					1,
					2,
					3,
					4,
					7,
					11
				};
				break;
			case 13:
				result = new sbyte[]
				{
					0,
					1,
					2,
					7,
					4,
					6
				};
				break;
			case 14:
				result = new sbyte[]
				{
					0,
					1,
					2,
					3,
					6,
					8
				};
				break;
			case 15:
				result = new sbyte[]
				{
					0,
					1,
					2,
					3,
					4,
					6,
					5
				};
				break;
			default:
				result = Array.Empty<sbyte>();
				break;
			}
			if (!true)
			{
			}
			return result;
		}

		// Token: 0x060020A3 RID: 8355 RVA: 0x001A2CEC File Offset: 0x001A0EEC
		private static sbyte[] GetVowLifeSkillBookTypes(sbyte orgId)
		{
			if (!true)
			{
			}
			sbyte[] result;
			switch (orgId)
			{
			case 1:
				result = new sbyte[]
				{
					8,
					13,
					1
				};
				break;
			case 2:
				result = new sbyte[]
				{
					14,
					12,
					13
				};
				break;
			case 3:
				result = new sbyte[]
				{
					8,
					9,
					10,
					0,
					3
				};
				break;
			case 4:
				result = new sbyte[]
				{
					12,
					4,
					2
				};
				break;
			case 5:
				result = new sbyte[]
				{
					8,
					9,
					14,
					12,
					13
				};
				break;
			case 6:
				result = new sbyte[]
				{
					6,
					7,
					14,
					15
				};
				break;
			case 7:
				result = new sbyte[]
				{
					11,
					12,
					15,
					4,
					2
				};
				break;
			case 8:
				result = new sbyte[]
				{
					12,
					5,
					0,
					3
				};
				break;
			case 9:
				result = new sbyte[]
				{
					6,
					7,
					10,
					11
				};
				break;
			case 10:
				result = new sbyte[]
				{
					8,
					9,
					10,
					11
				};
				break;
			case 11:
				result = new sbyte[]
				{
					13,
					15,
					5
				};
				break;
			case 12:
				result = new sbyte[]
				{
					8,
					9,
					7
				};
				break;
			case 13:
				result = new sbyte[]
				{
					9,
					4,
					1
				};
				break;
			case 14:
				result = new sbyte[]
				{
					6,
					14,
					5
				};
				break;
			case 15:
				result = new sbyte[]
				{
					8,
					9,
					12,
					15,
					5
				};
				break;
			default:
				result = Array.Empty<sbyte>();
				break;
			}
			if (!true)
			{
			}
			return result;
		}

		// Token: 0x060020A4 RID: 8356 RVA: 0x001A2EA0 File Offset: 0x001A10A0
		private static short GetVowCharacterTemplateId(EventArgBox argBox)
		{
			sbyte orgTemplateId = argBox.GetSbyte("OrgTemplateId");
			if (!true)
			{
			}
			short result;
			switch (orgTemplateId)
			{
			case 1:
				result = 883;
				break;
			case 2:
				result = 884;
				break;
			case 3:
				result = 885;
				break;
			case 4:
				result = 886;
				break;
			case 5:
				result = 887;
				break;
			case 6:
				result = 888;
				break;
			case 7:
				result = 889;
				break;
			case 8:
				result = 890;
				break;
			case 9:
				result = 891;
				break;
			case 10:
				result = 892;
				break;
			case 11:
				result = 893;
				break;
			case 12:
				result = 894;
				break;
			case 13:
				result = 895;
				break;
			case 14:
				result = 896;
				break;
			case 15:
				result = 897;
				break;
			default:
				result = 883;
				break;
			}
			if (!true)
			{
			}
			return result;
		}

		// Token: 0x060020A5 RID: 8357 RVA: 0x001A2F90 File Offset: 0x001A1190
		public static sbyte ApplyVowJump(EventArgBox argBox)
		{
			GameData.Domains.Character.Character character = argBox.GetCharacter("CharacterId");
			return character.GetOrganizationInfo().OrgTemplateId;
		}

		// Token: 0x060020A6 RID: 8358 RVA: 0x001A2FBC File Offset: 0x001A11BC
		public static void FinishVowJumpAsJoinGroup(string afterEvent, EventArgBox argBox)
		{
			GameData.Domains.Character.Character character = argBox.GetCharacter("CharacterId");
			bool flag = character == null;
			if (!flag)
			{
				int charId = character.GetId();
				bool flag2 = EventHelper.TryTriggerAddSeniorityPoint(65, charId);
				if (flag2)
				{
					ProfessionFormulaItem formulaItem = ProfessionFormula.Instance[65];
					EventHelper.ChangeProfessionSeniority(10, formulaItem.Calculate((int)character.GetOrganizationInfo().Grade), false);
				}
				EventHelper.RequestRoleJoinGroup(charId);
				EventHelper.ShowGetItemPageForCharacters(new List<int>
				{
					charId
				}, false, afterEvent, argBox);
			}
		}

		// Token: 0x060020A7 RID: 8359 RVA: 0x001A303C File Offset: 0x001A123C
		public static void FinishVowJumpAsJoinOrganization(string afterEvent, EventArgBox argBox)
		{
			GameData.Domains.Character.Character character = argBox.GetCharacter("CharacterId");
			bool flag = character == null;
			if (!flag)
			{
				int charId = character.GetId();
				bool flag2 = EventHelper.TryTriggerAddSeniorityPoint(65, charId);
				if (flag2)
				{
					ProfessionFormulaItem formulaItem = ProfessionFormula.Instance[65];
					EventHelper.ChangeProfessionSeniority(10, formulaItem.Calculate((int)character.GetOrganizationInfo().Grade), false);
				}
				GameData.Domains.Character.Character taiwu = argBox.GetCharacter("RoleTaiwu");
				OrganizationInfo taiwuOrgInfo = taiwu.GetOrganizationInfo();
				EventHelper.JoinOrganization(character, taiwuOrgInfo.SettlementId, 0);
				EventHelper.ShowGetItemPageForCharacters(new List<int>
				{
					character.GetId()
				}, true, afterEvent, argBox);
			}
		}

		// Token: 0x060020A8 RID: 8360 RVA: 0x001A30E0 File Offset: 0x001A12E0
		public static void RejectVowCharacter(EventArgBox argBox)
		{
			GameData.Domains.Character.Character character = argBox.GetCharacter("CharacterId");
			Settlement settlement = DomainManager.Organization.GetSettlement(character.GetOrganizationInfo().SettlementId);
			EventHelper.MoveIntelligentCharacter(character, settlement.GetLocation());
		}

		// Token: 0x060020A9 RID: 8361 RVA: 0x001A3120 File Offset: 0x001A1320
		[return: TupleElementNames(new string[]
		{
			"gradeBonus",
			"amountBonus"
		})]
		private static ValueTuple<int, int> GetVowRewardBonuses(sbyte orgTemplateId, int currLevel)
		{
			int bonus = (currLevel + 1) / 3;
			if (!true)
			{
			}
			ValueTuple<int, int> result;
			if (orgTemplateId != 2)
			{
				if (orgTemplateId != 11)
				{
					result = new ValueTuple<int, int>(bonus, 0);
				}
				else
				{
					result = new ValueTuple<int, int>(0, bonus);
				}
			}
			else
			{
				result = new ValueTuple<int, int>(0, bonus);
			}
			if (!true)
			{
			}
			return result;
		}

		// Token: 0x060020AA RID: 8362 RVA: 0x001A316C File Offset: 0x001A136C
		public static void ApplyRewardsItemToTaiwu(PresetInventoryItem item, List<ValueTuple<ItemKey, int>> showItems, int gradeBonus, int amountBonus)
		{
			GameData.Domains.Character.Character taiwuChar = DomainManager.Taiwu.GetTaiwu();
			short groupId = ItemTemplateHelper.GetGroupId(item.Type, item.TemplateId);
			bool flag = groupId < 0;
			if (flag)
			{
				ItemKey itemKey = EventHelper.AddItemToRole(taiwuChar, item.Type, item.TemplateId, item.Amount + amountBonus, -1);
				showItems.Add(new ValueTuple<ItemKey, int>(itemKey, item.Amount));
			}
			else
			{
				sbyte initialGrade = ItemTemplateHelper.GetGrade(item.Type, item.TemplateId);
				sbyte expectedGrade = (sbyte)Math.Clamp((int)initialGrade + gradeBonus, 0, 8);
				short templateId = ItemTemplateHelper.GetTemplateIdInGroup(item.Type, groupId, expectedGrade);
				ItemKey itemKey2 = EventHelper.AddItemToRole(taiwuChar, item.Type, templateId, item.Amount + amountBonus, -1);
				showItems.Add(new ValueTuple<ItemKey, int>(itemKey2, item.Amount));
			}
		}

		// Token: 0x060020AB RID: 8363 RVA: 0x001A3234 File Offset: 0x001A1434
		public static void ApplyHelpSect(EventArgBox argBox, string helpCharacterKey, string notHelpCharacterKey)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			GameData.Domains.Character.Character helpCharacter = argBox.GetCharacter(helpCharacterKey);
			sbyte helpOrgId = helpCharacter.GetOrganizationInfo().OrgTemplateId;
			Settlement helpSettlement = DomainManager.Organization.GetSettlementByOrgTemplateId(helpOrgId);
			OrgMemberCollection members = helpSettlement.GetMembers();
			sbyte[] grades = GlobalConfig.Instance.MainStoryHelpSectApprovedGrades;
			int[] counts = GlobalConfig.Instance.MainStoryHelpSectApprovedCounts;
			int count = Math.Min(grades.Length, counts.Length);
			List<int> pool = ObjectPool<List<int>>.Instance.Get();
			for (int i = 0; i < count; i++)
			{
				pool.Clear();
				foreach (int charId in members.GetMembers(grades[i]))
				{
					SettlementCharacter character;
					bool flag = DomainManager.Organization.TryGetSettlementCharacter(charId, out character) && !character.GetApprovedTaiwu();
					if (flag)
					{
						pool.Add(character.GetId());
					}
				}
				foreach (int charId2 in RandomUtils.GetRandomUnrepeated<int>(context.Random, counts[i], pool, null))
				{
					EventHelper.SetSectCharApprovedTaiwu(charId2, true);
				}
			}
			short helpAreaId = helpSettlement.GetLocation().AreaId;
			EventHelper.ChangeSpiritualDebtByAreaId(helpAreaId, GlobalConfig.Instance.MainStoryHelpSectAddSpiritualDebt);
			ObjectPool<List<int>>.Instance.Return(pool);
			GameData.Domains.Character.Character notHelpCharacter = argBox.GetCharacter(notHelpCharacterKey);
			sbyte notHelpOrgId = notHelpCharacter.GetOrganizationInfo().OrgTemplateId;
			Settlement notHelpSettlement = DomainManager.Organization.GetSettlementByOrgTemplateId(notHelpOrgId);
			short notHelpAreaId = notHelpSettlement.GetLocation().AreaId;
			EventHelper.ChangeSpiritualDebtByAreaId(notHelpAreaId, GlobalConfig.Instance.MainStoryNotHelpSectAddSpiritualDebt);
		}

		// Token: 0x060020AC RID: 8364 RVA: 0x001A3410 File Offset: 0x001A1610
		public static void FindCharacters(short[] characterFilterRuleIds, int estimateCount, List<GameData.Domains.Character.Character> results, short areaIdBegin, short areaIdEnd, sbyte curStateTemplateId = -1)
		{
			results.Clear();
			List<Predicate<GameData.Domains.Character.Character>> predicates = new List<Predicate<GameData.Domains.Character.Character>>();
			foreach (short ruleId in characterFilterRuleIds)
			{
				CharacterFilterRulesItem ruleCfg = Config.CharacterFilterRules.Instance[ruleId];
				bool includeInfected = ruleCfg.RulesList.Any((CharacterFilterElement rule) => rule.PropertyType == 8 && rule.ValueMin == 1);
				predicates.Clear();
				GameData.Domains.Character.Filters.CharacterFilterRules.ToPredicates(ruleId, predicates, curStateTemplateId);
				bool flag = areaIdBegin == areaIdEnd;
				if (flag)
				{
					MapCharacterFilter.Find(predicates, results, areaIdBegin, includeInfected);
				}
				else
				{
					MapCharacterFilter.ParallelFind(predicates, results, areaIdBegin, areaIdEnd, includeInfected);
				}
			}
			bool flag2 = areaIdEnd - areaIdBegin == 135;
			if (flag2)
			{
				MapCharacterFilter.FindTraveling(predicates, results, false);
			}
			CollectionUtils.Shuffle<GameData.Domains.Character.Character>(EventHelper.Domain.MainThreadDataContext.Random, results);
			bool flag3 = results.Count > estimateCount;
			if (flag3)
			{
				results.RemoveRange(estimateCount, results.Count - estimateCount);
			}
		}

		// Token: 0x060020AD RID: 8365 RVA: 0x001A3504 File Offset: 0x001A1704
		public static void FindCharacters(List<Predicate<GameData.Domains.Character.Character>> predicates, int estimateCount, List<GameData.Domains.Character.Character> results, short areaIdBegin, short areaIdEnd, sbyte curStateTemplateId = -1)
		{
			results.Clear();
			bool flag = areaIdBegin == areaIdEnd;
			if (flag)
			{
				MapCharacterFilter.Find(predicates, results, areaIdBegin, false);
			}
			else
			{
				MapCharacterFilter.ParallelFind(predicates, results, areaIdBegin, areaIdEnd, false);
			}
			bool flag2 = areaIdEnd - areaIdBegin == 135;
			if (flag2)
			{
				MapCharacterFilter.FindTraveling(predicates, results, false);
			}
			CollectionUtils.Shuffle<GameData.Domains.Character.Character>(EventHelper.Domain.MainThreadDataContext.Random, results);
			bool flag3 = results.Count > estimateCount;
			if (flag3)
			{
				results.RemoveRange(estimateCount, results.Count - estimateCount);
			}
		}

		// Token: 0x060020AE RID: 8366 RVA: 0x001A3588 File Offset: 0x001A1788
		public static void FindCharacters(Predicate<GameData.Domains.Character.Character> predicate, int estimateCount, List<GameData.Domains.Character.Character> results, short areaIdBegin, short areaIdEnd, sbyte curStateTemplateId = -1)
		{
			results.Clear();
			bool flag = areaIdBegin == areaIdEnd;
			if (flag)
			{
				MapCharacterFilter.Find(predicate, results, areaIdBegin, false);
			}
			else
			{
				MapCharacterFilter.ParallelFind(predicate, results, areaIdBegin, areaIdEnd, false);
			}
			bool flag2 = areaIdEnd - areaIdBegin == 135;
			if (flag2)
			{
				MapCharacterFilter.FindTraveling(predicate, results, false);
			}
			CollectionUtils.Shuffle<GameData.Domains.Character.Character>(EventHelper.Domain.MainThreadDataContext.Random, results);
			bool flag3 = results.Count > estimateCount;
			if (flag3)
			{
				results.RemoveRange(estimateCount, results.Count - estimateCount);
			}
		}

		// Token: 0x060020AF RID: 8367 RVA: 0x001A360C File Offset: 0x001A180C
		public static void FindCharacters(Predicate<GameData.Domains.Character.Character> predicate, List<GameData.Domains.Character.Character> results, short areaIdBegin, short areaIdEnd)
		{
			results.Clear();
			bool flag = areaIdBegin == areaIdEnd;
			if (flag)
			{
				MapCharacterFilter.Find(predicate, results, areaIdBegin, false);
			}
			else
			{
				MapCharacterFilter.ParallelFind(predicate, results, areaIdBegin, areaIdEnd, false);
			}
			bool flag2 = areaIdEnd - areaIdBegin == 135;
			if (flag2)
			{
				MapCharacterFilter.FindTraveling(predicate, results, false);
			}
			CollectionUtils.Shuffle<GameData.Domains.Character.Character>(EventHelper.Domain.MainThreadDataContext.Random, results);
		}

		// Token: 0x060020B0 RID: 8368 RVA: 0x001A3670 File Offset: 0x001A1870
		public static void FindCharacters(short[] characterFilterRuleIds, int estimateCount, List<GameData.Domains.Character.Character> results, List<short> areaIdList, sbyte curStateTemplateId = -1)
		{
			results.Clear();
			List<Predicate<GameData.Domains.Character.Character>> predicates = new List<Predicate<GameData.Domains.Character.Character>>();
			foreach (short ruleId in characterFilterRuleIds)
			{
				predicates.Clear();
				GameData.Domains.Character.Filters.CharacterFilterRules.ToPredicates(ruleId, predicates, curStateTemplateId);
				MapCharacterFilter.ParallelFind(predicates, results, areaIdList, false);
			}
			CollectionUtils.Shuffle<GameData.Domains.Character.Character>(EventHelper.Domain.MainThreadDataContext.Random, results);
			bool flag = results.Count > estimateCount;
			if (flag)
			{
				results.RemoveRange(estimateCount, results.Count - estimateCount);
			}
		}

		// Token: 0x060020B1 RID: 8369 RVA: 0x001A36F4 File Offset: 0x001A18F4
		public static void FindCharacters(Predicate<GameData.Domains.Character.Character> predicate, int estimateCount, List<GameData.Domains.Character.Character> results, List<short> areaIdList, sbyte curStateTemplateId = -1)
		{
			results.Clear();
			MapCharacterFilter.ParallelFind(predicate, results, areaIdList, false);
			CollectionUtils.Shuffle<GameData.Domains.Character.Character>(EventHelper.Domain.MainThreadDataContext.Random, results);
			bool flag = results.Count > estimateCount;
			if (flag)
			{
				results.RemoveRange(estimateCount, results.Count - estimateCount);
			}
		}

		// Token: 0x060020B2 RID: 8370 RVA: 0x001A3746 File Offset: 0x001A1946
		public static void StopTravel()
		{
			DomainManager.Map.StopTravel(EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x060020B3 RID: 8371 RVA: 0x001A3760 File Offset: 0x001A1960
		public static void SetBlockData(Location location)
		{
			bool flag = !location.IsValid();
			if (!flag)
			{
				MapBlockData block = DomainManager.Map.GetBlockData(location.AreaId, location.BlockId);
				DomainManager.Map.SetBlockData(EventHelper.Domain.MainThreadDataContext, block);
			}
		}

		// Token: 0x060020B4 RID: 8372 RVA: 0x001A37AC File Offset: 0x001A19AC
		public static List<MapTemplateEnemyInfo> GetMapRandomEnemyGroupForChar(MapBlockData blockData, int charId, bool avoidRandomEnemy)
		{
			GameData.Domains.Character.Character character;
			bool flag = !DomainManager.Character.TryGetElement_Objects(charId, out character);
			if (flag)
			{
				throw new Exception("GetMapRandomEnemyGroupForCharacter need a alive character id!");
			}
			bool flag2 = blockData.TemplateEnemyList == null || blockData.TemplateEnemyList.Count <= 0;
			List<MapTemplateEnemyInfo> result;
			if (flag2)
			{
				result = null;
			}
			else
			{
				List<MapTemplateEnemyInfo> xiangshuMinionList = new List<MapTemplateEnemyInfo>();
				List<MapTemplateEnemyInfo> righteousList = new List<MapTemplateEnemyInfo>();
				List<MapTemplateEnemyInfo> randomEnemyList = new List<MapTemplateEnemyInfo>();
				int i = 0;
				int max = blockData.TemplateEnemyList.Count;
				while (i < max)
				{
					MapTemplateEnemyInfo info = blockData.TemplateEnemyList[i];
					bool flag3 = GameData.Domains.Character.Character.IsXiangshuMinion(info.TemplateId);
					if (flag3)
					{
						xiangshuMinionList.Add(info);
					}
					else
					{
						bool flag4 = GameData.Domains.Character.Character.IsRighteous(info.TemplateId);
						if (flag4)
						{
							righteousList.Add(info);
						}
						else
						{
							randomEnemyList.Add(info);
						}
					}
					i++;
				}
				bool flag5 = xiangshuMinionList.Count > 0;
				if (flag5)
				{
					bool flag6 = xiangshuMinionList.Count > 1;
					if (flag6)
					{
						xiangshuMinionList.Sort(new Comparison<MapTemplateEnemyInfo>(EventHelper.<GetMapRandomEnemyGroupForChar>g__MapTemplateEnemyInfoSortFunc|1002_0));
					}
					bool flag7 = xiangshuMinionList.Count > 4;
					if (flag7)
					{
						xiangshuMinionList.RemoveRange(4, xiangshuMinionList.Count - 4);
					}
					result = xiangshuMinionList;
				}
				else
				{
					bool flag8 = avoidRandomEnemy && DomainManager.Extra.IsProfessionalSkillUnlockedAndEquipped(28);
					if (flag8)
					{
						result = null;
					}
					else
					{
						bool flag9 = righteousList.Count > 0;
						if (flag9)
						{
							sbyte fameType = character.GetFameType();
							bool flag10 = FameType.AttackByRighteous(fameType);
							if (flag10)
							{
								bool flag11 = righteousList.Count > 1;
								if (flag11)
								{
									righteousList.Sort(new Comparison<MapTemplateEnemyInfo>(EventHelper.<GetMapRandomEnemyGroupForChar>g__MapTemplateEnemyInfoSortFunc|1002_0));
								}
								bool flag12 = righteousList.Count > 4;
								if (flag12)
								{
									righteousList.RemoveRange(4, righteousList.Count - 4);
								}
								return righteousList;
							}
						}
						bool flag13 = randomEnemyList.Count > 0;
						if (flag13)
						{
							bool flag14 = randomEnemyList.Count > 1;
							if (flag14)
							{
								randomEnemyList.Sort(new Comparison<MapTemplateEnemyInfo>(EventHelper.<GetMapRandomEnemyGroupForChar>g__MapTemplateEnemyInfoSortFunc|1002_0));
							}
							bool flag15 = randomEnemyList.Count > 4;
							if (flag15)
							{
								randomEnemyList.RemoveRange(4, randomEnemyList.Count - 4);
							}
							result = randomEnemyList;
						}
						else
						{
							result = null;
						}
					}
				}
			}
			return result;
		}

		// Token: 0x060020B5 RID: 8373 RVA: 0x001A39D4 File Offset: 0x001A1BD4
		[return: TupleElementNames(new string[]
		{
			"xiangshuMinionList",
			"righteousList",
			"randomEnemyList"
		})]
		public static ValueTuple<List<MapTemplateEnemyInfo>, List<MapTemplateEnemyInfo>, List<MapTemplateEnemyInfo>> GetMapRandomEnemyGroupFromBlock(MapBlockData blockData)
		{
			List<MapTemplateEnemyInfo> xiangshuMinionList = new List<MapTemplateEnemyInfo>();
			List<MapTemplateEnemyInfo> righteousList = new List<MapTemplateEnemyInfo>();
			List<MapTemplateEnemyInfo> randomEnemyList = new List<MapTemplateEnemyInfo>();
			bool flag = blockData.TemplateEnemyList != null;
			if (flag)
			{
				int i = 0;
				int max = blockData.TemplateEnemyList.Count;
				while (i < max)
				{
					MapTemplateEnemyInfo info = blockData.TemplateEnemyList[i];
					bool flag2 = GameData.Domains.Character.Character.IsXiangshuMinion(info.TemplateId);
					if (flag2)
					{
						xiangshuMinionList.Add(info);
					}
					else
					{
						bool flag3 = GameData.Domains.Character.Character.IsRighteous(info.TemplateId);
						if (flag3)
						{
							righteousList.Add(info);
						}
						else
						{
							randomEnemyList.Add(info);
						}
					}
					i++;
				}
			}
			bool flag4 = xiangshuMinionList.Count > 0;
			if (flag4)
			{
				bool flag5 = xiangshuMinionList.Count > 1;
				if (flag5)
				{
					xiangshuMinionList.Sort(new Comparison<MapTemplateEnemyInfo>(EventHelper.<GetMapRandomEnemyGroupFromBlock>g__MapTemplateEnemyInfoSortFunc|1003_0));
				}
				bool flag6 = xiangshuMinionList.Count > 4;
				if (flag6)
				{
					xiangshuMinionList.RemoveRange(4, xiangshuMinionList.Count - 4);
				}
			}
			bool flag7 = righteousList.Count > 0;
			if (flag7)
			{
				bool flag8 = righteousList.Count > 1;
				if (flag8)
				{
					righteousList.Sort(new Comparison<MapTemplateEnemyInfo>(EventHelper.<GetMapRandomEnemyGroupFromBlock>g__MapTemplateEnemyInfoSortFunc|1003_0));
				}
				bool flag9 = righteousList.Count > 4;
				if (flag9)
				{
					righteousList.RemoveRange(4, righteousList.Count - 4);
				}
			}
			bool flag10 = randomEnemyList.Count > 0;
			if (flag10)
			{
				bool flag11 = randomEnemyList.Count > 1;
				if (flag11)
				{
					randomEnemyList.Sort(new Comparison<MapTemplateEnemyInfo>(EventHelper.<GetMapRandomEnemyGroupFromBlock>g__MapTemplateEnemyInfoSortFunc|1003_0));
				}
				bool flag12 = randomEnemyList.Count > 4;
				if (flag12)
				{
					randomEnemyList.RemoveRange(4, randomEnemyList.Count - 4);
				}
			}
			return new ValueTuple<List<MapTemplateEnemyInfo>, List<MapTemplateEnemyInfo>, List<MapTemplateEnemyInfo>>(xiangshuMinionList, righteousList, randomEnemyList);
		}

		// Token: 0x060020B6 RID: 8374 RVA: 0x001A3B80 File Offset: 0x001A1D80
		public static void StartCombatWithMapRandomEnemyGroup(List<MapTemplateEnemyInfo> group, short combatConfigId, string combatCompleteEvent, EventArgBox argBox, int leaderId = -1)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			List<int> enemyTeam = new List<int>();
			bool flag = group.Count > 1;
			if (flag)
			{
				bool flag2 = leaderId != -1;
				if (flag2)
				{
					group.RemoveAt(0);
					enemyTeam.Add(leaderId);
				}
				for (int i = 0; i < group.Count; i++)
				{
					int charId = EventHelper.CreateNonIntelligentCharacter(group[i].TemplateId);
					enemyTeam.Add(charId);
				}
			}
			else
			{
				short leaderTempId = group[0].TemplateId;
				bool flag3 = leaderId != -1;
				if (flag3)
				{
					enemyTeam.Add(leaderId);
				}
				else
				{
					int leaderCharId = EventHelper.CreateNonIntelligentCharacter(leaderTempId);
					enemyTeam.Add(leaderCharId);
				}
				short minionGroupId = Config.Character.Instance[leaderTempId].MinionGroupId;
				bool flag4 = minionGroupId >= 0;
				if (flag4)
				{
					List<short> minions = MinionGroup.Instance[minionGroupId].Minions;
					for (int j = 0; j < minions.Count; j++)
					{
						int charId2 = EventHelper.CreateNonIntelligentCharacter(minions[j]);
						enemyTeam.Add(charId2);
					}
				}
			}
			EventHelper.Domain.SetListenerWithActionName(combatCompleteEvent, argBox, "CombatOver");
			bool flag5 = enemyTeam == null || enemyTeam.Count <= 0;
			if (flag5)
			{
				throw new Exception("no available enemyTeam passed !");
			}
			DomainManager.Combat.CombatEntry(context, enemyTeam, combatConfigId);
		}

		// Token: 0x060020B7 RID: 8375 RVA: 0x001A3CFB File Offset: 0x001A1EFB
		public static void CharacterEscapeToNearbyBlock(EventArgBox argBox, GameData.Domains.Character.Character character, short steps)
		{
			EventHelper.CharacterEscapeToNearbyBlock(argBox, character, steps, false);
		}

		// Token: 0x060020B8 RID: 8376 RVA: 0x001A3D08 File Offset: 0x001A1F08
		public static void CharacterEscapeToNearbyBlock(EventArgBox argBox, GameData.Domains.Character.Character character, short steps, bool hasNotification)
		{
			Location srcLocation = character.GetLocation();
			bool flag = !srcLocation.IsValid();
			if (!flag)
			{
				bool flag2 = character.GetId() == DomainManager.Taiwu.GetTaiwuCharId();
				if (flag2)
				{
					Tester.Assert(steps == 1, "");
					List<MapBlockData> neighborBlocks = ObjectPool<List<MapBlockData>>.Instance.Get();
					DomainManager.Map.GetRealNeighborBlocks(srcLocation.AreaId, srcLocation.BlockId, neighborBlocks, (int)steps, false);
					Location fromBlock;
					bool flag3 = neighborBlocks.Count > 1 && argBox.Get<Location>("BlockFrom", out fromBlock);
					if (flag3)
					{
						MapBlockData fromBlockData = DomainManager.Map.GetBlock(fromBlock);
						neighborBlocks.Remove(fromBlockData);
						foreach (Location location in DomainManager.Map.TaiwuMoveRecord)
						{
							bool flag4 = location.AreaId != srcLocation.AreaId;
							if (!flag4)
							{
								MapBlockData blockData = DomainManager.Map.GetBlock(location);
								neighborBlocks.Remove(blockData);
							}
						}
						bool flag5 = neighborBlocks.Count == 0;
						if (flag5)
						{
							neighborBlocks.Add(fromBlockData);
						}
					}
					MapBlockData targetBlock = neighborBlocks.GetRandom(EventHelper.Domain.MainThreadDataContext.Random);
					ObjectPool<List<MapBlockData>>.Instance.Return(neighborBlocks);
					bool flag6 = DomainManager.World.GetAdvancingMonthState() == 0;
					if (flag6)
					{
						DomainManager.Map.Move(EventHelper.Domain.MainThreadDataContext, targetBlock.BlockId, true);
					}
				}
				else
				{
					DomainManager.Character.EscapeToRandomNearbyBlock(EventHelper.Domain.MainThreadDataContext, character, (int)steps);
				}
				if (hasNotification)
				{
					InstantNotificationCollection instantNotificationCollection = DomainManager.World.GetInstantNotificationCollection();
					instantNotificationCollection.AddCharacterEscape(character.GetId());
				}
			}
		}

		// Token: 0x060020B9 RID: 8377 RVA: 0x001A3EE0 File Offset: 0x001A20E0
		public static void MapRandomEnemiesEscapeToNearbyBlock(Location location)
		{
			bool flag = !location.IsValid();
			if (!flag)
			{
				MapBlockData blockData = DomainManager.Map.GetBlock(location);
				bool flag2 = blockData.TemplateEnemyList == null;
				if (!flag2)
				{
					List<MapBlockData> neighborBlocks = ObjectPool<List<MapBlockData>>.Instance.Get();
					DomainManager.Adventure.GetValidBlocksForRandomEnemy(location.AreaId, blockData.BlockId, 2, false, false, true, neighborBlocks);
					for (int i = blockData.TemplateEnemyList.Count - 1; i >= 0; i--)
					{
						Location destLocation = (neighborBlocks.Count > 0) ? neighborBlocks.GetRandom(EventHelper.Domain.MainThreadDataContext.Random).GetLocation() : Location.Invalid;
						Events.RaiseTemplateEnemyLocationChanged(EventHelper.Domain.MainThreadDataContext, blockData.TemplateEnemyList[i], location, destLocation);
					}
					ObjectPool<List<MapBlockData>>.Instance.Return(neighborBlocks);
				}
			}
		}

		// Token: 0x060020BA RID: 8378 RVA: 0x001A3FC8 File Offset: 0x001A21C8
		public static void MapRandomEnemiesEscapeByCharacter(Location location, int charId)
		{
			GameData.Domains.Character.Character character;
			bool flag = !DomainManager.Character.TryGetElement_Objects(charId, out character);
			if (flag)
			{
				throw new Exception("MapRandomEnemiesEscapeByCharacter need a alive character id!");
			}
			MapBlockData blockData = DomainManager.Map.GetBlock(location);
			bool flag2 = blockData.TemplateEnemyList == null;
			if (!flag2)
			{
				List<MapBlockData> neighborBlocks = ObjectPool<List<MapBlockData>>.Instance.Get();
				DomainManager.Adventure.GetValidBlocksForRandomEnemy(location.AreaId, blockData.BlockId, 2, false, false, true, neighborBlocks);
				bool flag3 = neighborBlocks.Count <= 0;
				if (!flag3)
				{
					sbyte charFameType = character.GetFameType();
					bool righteousNeedEscape = charFameType == 1 || charFameType == 0;
					for (int i = blockData.TemplateEnemyList.Count - 1; i >= 0; i--)
					{
						bool flag4 = !righteousNeedEscape && GameData.Domains.Character.Character.IsRighteous(blockData.TemplateEnemyList[i].TemplateId);
						if (!flag4)
						{
							MapBlockData targetBlock = neighborBlocks.GetRandom(EventHelper.Domain.MainThreadDataContext.Random);
							Location destLocation = new Location(targetBlock.AreaId, targetBlock.BlockId);
							Events.RaiseTemplateEnemyLocationChanged(EventHelper.Domain.MainThreadDataContext, blockData.TemplateEnemyList[i], location, destLocation);
						}
					}
					ObjectPool<List<MapBlockData>>.Instance.Return(neighborBlocks);
				}
			}
		}

		// Token: 0x060020BB RID: 8379 RVA: 0x001A4114 File Offset: 0x001A2314
		public static void GenerateRandomEnemyOnBlock(Location location, short enemyCharTemplateId)
		{
			byte creatingType = Config.Character.Instance[enemyCharTemplateId].CreatingType;
			bool condition = creatingType - 2 <= 1;
			Tester.Assert(condition, "");
			MapBlockData block = DomainManager.Map.GetBlock(location);
			block.AddTemplateEnemy(new MapTemplateEnemyInfo(enemyCharTemplateId, block.BlockId, -1));
			DomainManager.Map.SetBlockData(EventHelper.Domain.MainThreadDataContext, block);
		}

		// Token: 0x060020BC RID: 8380 RVA: 0x001A4184 File Offset: 0x001A2384
		public static void RemoveMapRandomEnemiesOnBlock(Location location, List<MapTemplateEnemyInfo> toRemoveList)
		{
			foreach (MapTemplateEnemyInfo randEnemy in toRemoveList)
			{
				Events.RaiseTemplateEnemyLocationChanged(EventHelper.Domain.MainThreadDataContext, randEnemy, location, Location.Invalid);
			}
		}

		// Token: 0x060020BD RID: 8381 RVA: 0x001A41E8 File Offset: 0x001A23E8
		public static void SetMapRandomEnemyListToArgBox(EventArgBox argBox, string keyPrefix, List<MapTemplateEnemyInfo> randEnemyList)
		{
			bool flag = randEnemyList == null;
			if (!flag)
			{
				argBox.Set(keyPrefix + "_Count", randEnemyList.Count);
				for (int i = 0; i < randEnemyList.Count; i++)
				{
					DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(6, 2);
					defaultInterpolatedStringHandler.AppendFormatted(keyPrefix);
					defaultInterpolatedStringHandler.AppendLiteral("_Item_");
					defaultInterpolatedStringHandler.AppendFormatted<int>(i);
					argBox.Set(defaultInterpolatedStringHandler.ToStringAndClear(), randEnemyList[i]);
				}
			}
		}

		// Token: 0x060020BE RID: 8382 RVA: 0x001A4270 File Offset: 0x001A2470
		public static bool GetMapRandomEnemyListFromArgBox(EventArgBox argBox, string keyPrefix, out List<MapTemplateEnemyInfo> randEnemyList)
		{
			randEnemyList = new List<MapTemplateEnemyInfo>();
			int count = 0;
			bool flag = !argBox.Get(keyPrefix + "_Count", ref count);
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				for (int i = 0; i < count; i++)
				{
					DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(6, 2);
					defaultInterpolatedStringHandler.AppendFormatted(keyPrefix);
					defaultInterpolatedStringHandler.AppendLiteral("_Item_");
					defaultInterpolatedStringHandler.AppendFormatted<int>(i);
					MapTemplateEnemyInfo randEnemy;
					argBox.Get<MapTemplateEnemyInfo>(defaultInterpolatedStringHandler.ToStringAndClear(), out randEnemy);
					randEnemyList.Add(randEnemy);
				}
				result = true;
			}
			return result;
		}

		// Token: 0x060020BF RID: 8383 RVA: 0x001A4300 File Offset: 0x001A2500
		public static void ChangeSafetyForSettlementsInArea(short areaId, int delta)
		{
			DomainManager.Map.ChangeSettlementSafetyInArea(EventHelper.Domain.MainThreadDataContext, areaId, delta);
		}

		// Token: 0x060020C0 RID: 8384 RVA: 0x001A431C File Offset: 0x001A251C
		public static void ChangeSafetyForSettlement(Location location, int delta)
		{
			Location settlementLocation = DomainManager.Map.GetBlock(location).GetRootBlock().GetLocation();
			Settlement settlement = DomainManager.Organization.GetSettlementByLocation(settlementLocation);
			settlement.ChangeSafety(EventHelper.Domain.MainThreadDataContext, delta);
		}

		// Token: 0x060020C1 RID: 8385 RVA: 0x001A435E File Offset: 0x001A255E
		public static void ChangeCultureForSettlementsInArea(short areaId, int delta)
		{
			DomainManager.Map.ChangeSettlementCultureInArea(EventHelper.Domain.MainThreadDataContext, areaId, delta);
		}

		// Token: 0x060020C2 RID: 8386 RVA: 0x001A4378 File Offset: 0x001A2578
		public static void ChangeCultureForSettlement(Location location, int delta)
		{
			Location settlementLocation = DomainManager.Map.GetBlock(location).GetRootBlock().GetLocation();
			Settlement settlement = DomainManager.Organization.GetSettlementByLocation(settlementLocation);
			settlement.ChangeCulture(EventHelper.Domain.MainThreadDataContext, delta);
		}

		// Token: 0x060020C3 RID: 8387 RVA: 0x001A43BC File Offset: 0x001A25BC
		public static int GetSettlementCharacterCountWithoutBaby(Location location)
		{
			List<short> blockList = ObjectPool<List<short>>.Instance.Get();
			HashSet<int> characterSet = ObjectPool<HashSet<int>>.Instance.Get();
			blockList.Clear();
			characterSet.Clear();
			MapBlockData mapBlockData = EventHelper.GetMapBlockData(location.AreaId, location.BlockId);
			Location rootLocation = mapBlockData.GetRootBlock().GetLocation();
			DomainManager.Map.GetSettlementBlocksAndAffiliatedBlocks(rootLocation.AreaId, rootLocation.BlockId, blockList);
			for (int i = 0; i < blockList.Count; i++)
			{
				MapBlockData curMapBlockData = EventHelper.GetMapBlockData(location.AreaId, blockList[i]);
				bool flag = curMapBlockData == null || curMapBlockData.CharacterSet == null;
				if (!flag)
				{
					characterSet.UnionWith(curMapBlockData.CharacterSet);
				}
			}
			int count = 0;
			foreach (int charId in characterSet)
			{
				GameData.Domains.Character.Character character;
				bool flag2 = DomainManager.Character.TryGetElement_Objects(charId, out character);
				if (flag2)
				{
					bool flag3 = character.GetAgeGroup() > 0;
					if (flag3)
					{
						count++;
					}
				}
			}
			ObjectPool<List<short>>.Instance.Return(blockList);
			ObjectPool<HashSet<int>>.Instance.Return(characterSet);
			return count;
		}

		// Token: 0x060020C4 RID: 8388 RVA: 0x001A450C File Offset: 0x001A270C
		public static bool LocationCharacterHasMoney(Location location)
		{
			MapBlockData mapBlockData = EventHelper.GetMapBlockData(location.AreaId, location.BlockId);
			HashSet<int> characterSet = mapBlockData.CharacterSet;
			bool flag = characterSet == null;
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				foreach (int charId in characterSet)
				{
					GameData.Domains.Character.Character character;
					bool flag2 = DomainManager.Character.TryGetElement_Objects(charId, out character);
					if (flag2)
					{
						bool flag3 = character.GetResource(6) > 0;
						if (flag3)
						{
							return true;
						}
					}
				}
				result = false;
			}
			return result;
		}

		// Token: 0x060020C5 RID: 8389 RVA: 0x001A45B0 File Offset: 0x001A27B0
		public static sbyte GetStateIdByAreaId(short areaId)
		{
			return DomainManager.Map.GetStateIdByAreaId(areaId);
		}

		// Token: 0x060020C6 RID: 8390 RVA: 0x001A45D0 File Offset: 0x001A27D0
		public static sbyte GetStateIdByStateTemplateId(short stateTemplateId)
		{
			return DomainManager.Map.GetStateIdByStateTemplateId(stateTemplateId);
		}

		// Token: 0x060020C7 RID: 8391 RVA: 0x001A45F0 File Offset: 0x001A27F0
		public static sbyte GetStateMainCityOrgTemplateId(sbyte stateId)
		{
			short areaId = (short)(3 * stateId);
			return DomainManager.Map.GetElement_Areas((int)areaId).SettlementInfos[0].OrgTemplateId;
		}

		// Token: 0x060020C8 RID: 8392 RVA: 0x001A4624 File Offset: 0x001A2824
		public static string GetStateMainCityNameBySettlementId(short settlementId)
		{
			Settlement settlement = DomainManager.Organization.GetSettlement(settlementId);
			sbyte stateTemplateId = DomainManager.Map.GetStateTemplateIdByAreaId(settlement.GetLocation().AreaId);
			sbyte areaTemplateId = MapState.Instance[stateTemplateId].MainAreaID;
			return MapArea.Instance[(short)areaTemplateId].Name;
		}

		// Token: 0x060020C9 RID: 8393 RVA: 0x001A467C File Offset: 0x001A287C
		public static string GetOrganizationNameByTemplateId(sbyte orgTemplateId)
		{
			OrganizationItem config = Organization.Instance.GetItem(orgTemplateId);
			bool flag = config == null;
			if (flag)
			{
				DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(49, 1);
				defaultInterpolatedStringHandler.AppendLiteral("failed to get organization config of template id ");
				defaultInterpolatedStringHandler.AppendFormatted<sbyte>(orgTemplateId);
				throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
			}
			return config.Name;
		}

		// Token: 0x060020CA RID: 8394 RVA: 0x001A46D8 File Offset: 0x001A28D8
		public static sbyte GetStateSectOrgTemplateId(sbyte stateId)
		{
			sbyte stateTemplateId = stateId + 1;
			return MapState.Instance[stateTemplateId].SectID;
		}

		// Token: 0x060020CB RID: 8395 RVA: 0x001A4700 File Offset: 0x001A2900
		public static MapBlockData GetMapBlockData(short areaId, short blockId)
		{
			return DomainManager.Map.GetBlockData(areaId, blockId);
		}

		// Token: 0x060020CC RID: 8396 RVA: 0x001A4720 File Offset: 0x001A2920
		public static EMapBlockType GetMapBlockType(short areaId, short blockId)
		{
			short blockTemplateId = DomainManager.Map.GetBlockData(areaId, blockId).TemplateId;
			return MapBlock.Instance[blockTemplateId].Type;
		}

		// Token: 0x060020CD RID: 8397 RVA: 0x001A4754 File Offset: 0x001A2954
		public static short GetBelongSettlementId(short areaId, short blockId)
		{
			MapBlockData block = DomainManager.Map.GetBlockData(areaId, blockId);
			short findBlockId = (block.BelongBlockId >= 0) ? block.BelongBlockId : block.GetRootBlock().BlockId;
			bool flag = findBlockId < 0;
			short result;
			if (flag)
			{
				result = -1;
			}
			else
			{
				MapAreaData area = DomainManager.Map.GetElement_Areas((int)areaId);
				foreach (SettlementInfo settlementInfo in area.SettlementInfos)
				{
					bool flag2 = settlementInfo.BlockId == findBlockId;
					if (flag2)
					{
						return settlementInfo.SettlementId;
					}
				}
				result = -1;
			}
			return result;
		}

		// Token: 0x060020CE RID: 8398 RVA: 0x001A47F0 File Offset: 0x001A29F0
		public static short GetBlockSettlementId(short areaId, short blockId)
		{
			Location location = new Location(areaId, blockId);
			MapBlockData blockData = DomainManager.Map.GetBlock(location);
			bool flag = blockData.RootBlockId >= 0;
			if (flag)
			{
				blockData = DomainManager.Map.GetBlock(areaId, blockData.RootBlockId);
			}
			Settlement settlement = DomainManager.Organization.GetSettlementByLocation(blockData.GetLocation());
			return (settlement != null) ? settlement.GetId() : -1;
		}

		// Token: 0x060020CF RID: 8399 RVA: 0x001A4858 File Offset: 0x001A2A58
		public static Location GetSettlementLocation(short settlementId)
		{
			return DomainManager.Organization.GetSettlement(settlementId).GetLocation();
		}

		// Token: 0x060020D0 RID: 8400 RVA: 0x001A487C File Offset: 0x001A2A7C
		public static Location GetBambooHouseLocation()
		{
			short areaId = DomainManager.Map.GetAreaIdByAreaTemplateId(0);
			MapBlockData bambooHouseBlock = null;
			EventHelper.IterateAreaBlocks(areaId, delegate(MapBlockData blockData)
			{
				bool flag2 = blockData.GetConfig().SubType == EMapBlockSubType.Zhulu;
				if (flag2)
				{
					bambooHouseBlock = blockData;
				}
			});
			bool flag = bambooHouseBlock == null;
			if (flag)
			{
				throw new Exception("error:can not find bamboo house location!");
			}
			return new Location(bambooHouseBlock.AreaId, bambooHouseBlock.BlockId);
		}

		// Token: 0x060020D1 RID: 8401 RVA: 0x001A48F0 File Offset: 0x001A2AF0
		public unsafe static void IterateAreaBlocks(short areaId, Action<MapBlockData> action)
		{
			bool flag = action == null;
			if (!flag)
			{
				Span<MapBlockData> areaBlockDataCollection = DomainManager.Map.GetAreaBlocks(areaId);
				Span<MapBlockData> span = areaBlockDataCollection;
				for (int i = 0; i < span.Length; i++)
				{
					MapBlockData blockData = *span[i];
					action(blockData);
				}
			}
		}

		// Token: 0x060020D2 RID: 8402 RVA: 0x001A4940 File Offset: 0x001A2B40
		public static void IterateAreaAdventureBlocks(short areaId, Action<MapBlockData, AdventureSiteData> action)
		{
			AreaAdventureData areaAdventureData = DomainManager.Adventure.GetAdventuresInArea(areaId);
			foreach (KeyValuePair<short, AdventureSiteData> pair in areaAdventureData.AdventureSites)
			{
				bool flag = pair.Value.SiteState == 1;
				if (flag)
				{
					MapBlockData blockData = DomainManager.Map.GetBlock(areaId, pair.Key);
					bool flag2 = blockData != null;
					if (flag2)
					{
						action(blockData, pair.Value);
					}
				}
			}
		}

		// Token: 0x060020D3 RID: 8403 RVA: 0x001A49E4 File Offset: 0x001A2BE4
		public static MapBlockData GetRandomEdgeBlock(short areaId, sbyte edgeType, bool excludeAdventureLocation = false)
		{
			bool flag = edgeType == 4;
			if (flag)
			{
				edgeType = (sbyte)EventHelper.Domain.MainThreadDataContext.Random.Next(0, 4);
			}
			short blockId = DomainManager.Map.GetRandomEdgeBlock(EventHelper.Domain.MainThreadDataContext.Random, areaId, edgeType);
			if (excludeAdventureLocation)
			{
				Location location = new Location(areaId, blockId);
				while (EventHelper.CheckBlockHasAdventure(location))
				{
					blockId = DomainManager.Map.GetRandomEdgeBlock(EventHelper.Domain.MainThreadDataContext.Random, areaId, edgeType);
					location = new Location(areaId, blockId);
				}
			}
			return DomainManager.Map.GetBlock(areaId, blockId);
		}

		// Token: 0x060020D4 RID: 8404 RVA: 0x001A4A88 File Offset: 0x001A2C88
		public unsafe static List<MapBlockData> GetBlocksAroundLocation(Location location, int minDist)
		{
			List<MapBlockData> result = new List<MapBlockData>();
			Span<MapBlockData> areaBlocks = DomainManager.Map.GetAreaBlocks(location.AreaId);
			byte mapSize = DomainManager.Map.GetAreaSize(location.AreaId);
			ByteCoordinate centerCoord = ByteCoordinate.IndexToCoordinate(location.BlockId, mapSize);
			Span<MapBlockData> span = areaBlocks;
			for (int i = 0; i < span.Length; i++)
			{
				MapBlockData block = *span[i];
				bool flag = centerCoord.GetManhattanDistance(ByteCoordinate.IndexToCoordinate(block.BlockId, mapSize)) >= minDist;
				if (flag)
				{
					result.Add(block);
				}
			}
			return result;
		}

		// Token: 0x060020D5 RID: 8405 RVA: 0x001A4B24 File Offset: 0x001A2D24
		public unsafe static List<MapBlockData> GetAllNotDevelopedBlocks(short areaId)
		{
			List<MapBlockData> result = new List<MapBlockData>();
			Span<MapBlockData> areaBlocks = DomainManager.Map.GetAreaBlocks(areaId);
			Span<MapBlockData> span = areaBlocks;
			for (int i = 0; i < span.Length; i++)
			{
				MapBlockData block = *span[i];
				bool flag = block.IsNonDeveloped();
				if (flag)
				{
					result.Add(block);
				}
			}
			return result;
		}

		// Token: 0x060020D6 RID: 8406 RVA: 0x001A4B84 File Offset: 0x001A2D84
		public static bool TryCreateAdventureSite(short areaId, short blockId, short adventureTemplateId, bool setBlockVisible)
		{
			bool createAdventureResult = DomainManager.Adventure.TryCreateAdventureSite(EventHelper.Domain.MainThreadDataContext, areaId, blockId, adventureTemplateId, MonthlyActionKey.Invalid);
			bool flag = createAdventureResult && setBlockVisible;
			if (flag)
			{
				MapBlockData blockData = DomainManager.Map.GetBlock(areaId, blockId);
				bool flag2 = blockData != null;
				if (flag2)
				{
					blockData.SetVisible(true, EventHelper.Domain.MainThreadDataContext);
				}
			}
			return createAdventureResult;
		}

		// Token: 0x060020D7 RID: 8407 RVA: 0x001A4BE6 File Offset: 0x001A2DE6
		public static void RemoveAdventureSite(short areaId, short blockId, bool isTimeout, bool isComplete)
		{
			DomainManager.Adventure.RemoveAdventureSite(EventHelper.Domain.MainThreadDataContext, areaId, blockId, isTimeout, isComplete);
		}

		// Token: 0x060020D8 RID: 8408 RVA: 0x001A4C04 File Offset: 0x001A2E04
		public static byte GetStepCountBetweenBlocksInSameArea(Location blockALocation, Location blockBLocation)
		{
			bool flag = blockALocation.AreaId != blockBLocation.AreaId;
			byte result;
			if (flag)
			{
				result = byte.MaxValue;
			}
			else
			{
				MapBlockData blockAData = DomainManager.Map.GetBlock(blockALocation);
				ByteCoordinate blockAPos = blockAData.GetBlockPos();
				MapBlockData blockBData = DomainManager.Map.GetBlock(blockBLocation);
				ByteCoordinate blockBPos = blockBData.GetBlockPos();
				result = (byte)(Math.Abs((int)(blockAPos.X - blockBPos.X)) + Math.Abs((int)(blockAPos.Y - blockBPos.Y)));
			}
			return result;
		}

		// Token: 0x060020D9 RID: 8409 RVA: 0x001A4C84 File Offset: 0x001A2E84
		public static void GenerateCricketPlaceNearTaiwu(int minGroupCount, int maxGroupCount, int minDistance = -1, int maxDistance = -1)
		{
			short taiwuAreaId = DomainManager.Taiwu.GetTaiwu().GetLocation().AreaId;
			CricketPlaceData cricketData = new CricketPlaceData();
			cricketData.Init(taiwuAreaId, EventHelper.Domain.MainThreadDataContext.Random, minGroupCount, maxGroupCount, minDistance, maxDistance);
			DomainManager.Map.SetCricketPlaceData(EventHelper.Domain.MainThreadDataContext, taiwuAreaId, cricketData);
			for (int i = 0; i < cricketData.CricketBlocks.Length; i++)
			{
				DomainManager.Map.GetBlock(taiwuAreaId, cricketData.CricketBlocks[i]).SetVisible(true, EventHelper.Domain.MainThreadDataContext);
			}
		}

		// Token: 0x060020DA RID: 8410 RVA: 0x001A4D1C File Offset: 0x001A2F1C
		public static void SetCricketAtTaiwuLocationFake()
		{
			Location taiwuLocation = DomainManager.Taiwu.GetTaiwu().GetLocation();
			CricketPlaceData cricketData = DomainManager.Map.GetElement_CricketPlaceData((int)taiwuLocation.AreaId);
			bool flag = cricketData == null;
			if (!flag)
			{
				int index = cricketData.CricketBlocks.IndexOf(taiwuLocation.BlockId);
				int groupIndex = index / 3;
				int indexInGroup = index % 3;
				bool flag2 = index < 0 || (int)cricketData.RealCircketIdx[groupIndex] != indexInGroup;
				if (!flag2)
				{
					for (byte i = 0; i < 3; i += 1)
					{
						bool flag3 = (int)i == indexInGroup || cricketData.CricketTriggered[groupIndex * 3 + (int)i];
						if (!flag3)
						{
							cricketData.RealCircketIdx[groupIndex] = i;
							break;
						}
					}
					DomainManager.Map.SetCricketPlaceData(EventHelper.Domain.MainThreadDataContext, taiwuLocation.AreaId, cricketData);
				}
			}
		}

		// Token: 0x060020DB RID: 8411 RVA: 0x001A4DF1 File Offset: 0x001A2FF1
		public static void ClearAreaCricket(short areaId)
		{
			DomainManager.Map.SetCricketPlaceData(EventHelper.Domain.MainThreadDataContext, areaId, null);
		}

		// Token: 0x060020DC RID: 8412 RVA: 0x001A4E0C File Offset: 0x001A300C
		public static short GetSettlementIdByOrgTemplateId(sbyte orgTemplateId)
		{
			return DomainManager.Organization.GetSettlementIdByOrgTemplateId(orgTemplateId);
		}

		// Token: 0x060020DD RID: 8413 RVA: 0x001A4E2C File Offset: 0x001A302C
		public static Settlement GetSettlementByOrgTemplateId(sbyte orgTemplateId)
		{
			return DomainManager.Organization.GetSettlementByOrgTemplateId(orgTemplateId);
		}

		// Token: 0x060020DE RID: 8414 RVA: 0x001A4E4C File Offset: 0x001A304C
		public static List<short> GetSettlementLocationsByOrgTemplateId(sbyte orgTemplateId, bool shuffle = true)
		{
			Settlement settlement = EventHelper.GetSettlementByOrgTemplateId(orgTemplateId);
			Location rootLocation = settlement.GetLocation();
			List<short> blockIdList = new List<short>();
			DomainManager.Map.GetSettlementBlocks(rootLocation.AreaId, rootLocation.BlockId, blockIdList);
			if (shuffle)
			{
				CollectionUtils.Shuffle<short>(EventHelper.Domain.MainThreadDataContext.Random, blockIdList);
			}
			return blockIdList;
		}

		// Token: 0x060020DF RID: 8415 RVA: 0x001A4EA8 File Offset: 0x001A30A8
		public static List<Location> GetMapBlocksNearLocation(Location location, sbyte steps)
		{
			List<MapBlockData> neighborBlocks = ObjectPool<List<MapBlockData>>.Instance.Get();
			DomainManager.Map.GetRealNeighborBlocks(location.AreaId, location.BlockId, neighborBlocks, (int)steps, false);
			return neighborBlocks.ConvertAll<Location>((MapBlockData e) => new Location(e.AreaId, e.BlockId));
		}

		// Token: 0x060020E0 RID: 8416 RVA: 0x001A4F08 File Offset: 0x001A3108
		public unsafe static short GetLocationResourceOfType(Location location, sbyte resourceType)
		{
			MapBlockData mapBlockData = DomainManager.Map.GetBlock(location);
			bool flag = mapBlockData == null;
			short result;
			if (flag)
			{
				result = 0;
			}
			else
			{
				result = *(ref mapBlockData.CurrResources.Items.FixedElementField + (IntPtr)resourceType * 2);
			}
			return result;
		}

		// Token: 0x060020E1 RID: 8417 RVA: 0x001A4F48 File Offset: 0x001A3148
		public static Location GetRandomAreaEdgeBlockForEvent(short areaId, IEnumerable<Predicate<MapBlockData>> filters)
		{
			AreaAdventureData adventuresInArea = DomainManager.Adventure.GetAdventuresInArea(areaId);
			List<short> selectableBlocks = ObjectPool<List<short>>.Instance.Get();
			List<MapBlockData> list = ObjectPool<List<MapBlockData>>.Instance.Get();
			short result = -1;
			list.Clear();
			selectableBlocks.Clear();
			DomainManager.Map.GetEdgeBlockList(areaId, selectableBlocks, false, true);
			DomainManager.Map.GetMapBlocksInAreaByFilters(areaId, (MapBlockData blockData) => selectableBlocks.Contains(blockData.BlockId) && !adventuresInArea.AdventureSites.ContainsKey(blockData.BlockId) && filters.Aggregate(true, (bool current, Predicate<MapBlockData> filter) => current && filter(blockData)), list);
			bool flag = list.Any<MapBlockData>();
			if (flag)
			{
				result = list.GetRandom(EventHelper.Domain.MainThreadDataContext.Random).BlockId;
			}
			ObjectPool<List<MapBlockData>>.Instance.Return(list);
			ObjectPool<List<short>>.Instance.Return(selectableBlocks);
			return new Location(areaId, result);
		}

		// Token: 0x060020E2 RID: 8418 RVA: 0x001A5020 File Offset: 0x001A3220
		public static Location GetAreaStationLocation(short areaId)
		{
			return new Location(areaId, DomainManager.Map.GetElement_Areas((int)areaId).StationBlockId);
		}

		// Token: 0x060020E3 RID: 8419 RVA: 0x001A5048 File Offset: 0x001A3248
		public static List<Location> GetAreaSettlementLocations(short areaId)
		{
			return (from settlementInfo in DomainManager.Map.GetElement_Areas((int)areaId).SettlementInfos
			select new Location(areaId, settlementInfo.BlockId)).ToList<Location>();
		}

		// Token: 0x060020E4 RID: 8420 RVA: 0x001A5090 File Offset: 0x001A3290
		public static bool IsLocationRangeHasBlockTemplate(Location location, int range, short blockTemplateId)
		{
			List<MapBlockData> neighborBlocks = ObjectPool<List<MapBlockData>>.Instance.Get();
			MapBlockData block = DomainManager.Map.GetBlock(location);
			DomainManager.Map.GetNeighborBlocks(block.AreaId, block.BlockId, neighborBlocks, (int)block.GetConfig().ViewRange);
			bool result = neighborBlocks.Any((MapBlockData blk) => blk.TemplateId == blockTemplateId);
			ObjectPool<List<MapBlockData>>.Instance.Return(neighborBlocks);
			return result;
		}

		// Token: 0x060020E5 RID: 8421 RVA: 0x001A510C File Offset: 0x001A330C
		public static void MakeAreaGraduallyBroken(short areaId, Location protectedLocation, int protectedRange)
		{
			MapDomain mapDomain = DomainManager.Map;
			AdventureDomain adventureDomain = DomainManager.Adventure;
			CharacterDomain characterDomain = DomainManager.Character;
			MapAreaData areaData = mapDomain.GetElement_Areas((int)areaId);
			ByteCoordinate protectedCoord = ByteCoordinate.IndexToCoordinate(protectedLocation.BlockId, mapDomain.GetAreaSize(protectedLocation.AreaId));
			List<short> edgeBlocks = ObjectPool<List<short>>.Instance.Get();
			HashSet<short> edgeTemplates = ObjectPool<HashSet<short>>.Instance.Get();
			List<short> ruinTemplates = ObjectPool<List<short>>.Instance.Get();
			HashSet<int> killCharacters = ObjectPool<HashSet<int>>.Instance.Get();
			List<short> enemyTemplates = ObjectPool<List<short>>.Instance.Get();
			List<MapBlockData> enemyBlocks = ObjectPool<List<MapBlockData>>.Instance.Get();
			ruinTemplates.Clear();
			ruinTemplates.Add(118);
			ruinTemplates.Add(119);
			ruinTemplates.Add(120);
			ruinTemplates.Add(121);
			ruinTemplates.Add(122);
			ruinTemplates.Add(123);
			edgeTemplates.Clear();
			edgeTemplates.Add(126);
			edgeTemplates.UnionWith(ruinTemplates);
			killCharacters.Clear();
			enemyTemplates.Clear();
			enemyTemplates.Add(298);
			enemyTemplates.Add(299);
			enemyTemplates.Add(300);
			mapDomain.GetEdgeBlockList(areaId, edgeBlocks, edgeTemplates, false, false, true);
			foreach (short blockId in edgeBlocks)
			{
				bool flag = blockId == areaData.StationBlockId;
				if (!flag)
				{
					MapBlockData block = mapDomain.GetBlock(areaId, blockId);
					bool flag2 = MapBlockDataMatchers.CanBeRuinedByXiangshu(block) && (int)block.GetManhattanDistanceToPos(protectedCoord.X, protectedCoord.Y) > protectedRange;
					if (flag2)
					{
						Location location = new Location(areaId, blockId);
						short originTemplateId = block.TemplateId;
						bool flag3 = block.RootBlockId >= 0;
						if (flag3)
						{
							location.BlockId = block.RootBlockId;
						}
						mapDomain.ChangeBlockTemplate(EventHelper.Domain.MainThreadDataContext, location, ruinTemplates.Sample<short>(), false);
						bool flag4 = block.CharacterSet != null;
						if (flag4)
						{
							killCharacters.UnionWith(block.CharacterSet);
						}
						bool flag5 = block.GroupBlockList != null;
						if (flag5)
						{
							foreach (MapBlockData childBlock in block.GroupBlockList)
							{
								bool flag6 = childBlock.CharacterSet != null;
								if (flag6)
								{
									killCharacters.UnionWith(childBlock.CharacterSet);
								}
							}
						}
						block.InitResources(EventHelper.Domain.MainThreadDataContext.Random);
						DomainManager.Map.SetBlockData(EventHelper.Domain.MainThreadDataContext, block);
						bool flag7 = block.GroupBlockList != null;
						if (flag7)
						{
							foreach (MapBlockData childBlock2 in block.GroupBlockList)
							{
								childBlock2.InitResources(EventHelper.Domain.MainThreadDataContext.Random);
								DomainManager.Map.SetBlockData(EventHelper.Domain.MainThreadDataContext, childBlock2);
							}
						}
						bool flag8 = !ruinTemplates.Contains(originTemplateId) && (block.TemplateEnemyList == null || block.TemplateEnemyList.Count <= 0) && EventHelper.Domain.MainThreadDataContext.Random.Next(100) < 50;
						if (flag8)
						{
							enemyBlocks.Clear();
							enemyBlocks.Add(block);
							adventureDomain.CreateRandomEnemiesOnValidBlocks(EventHelper.Domain.MainThreadDataContext, Location.Invalid, enemyTemplates.Sample<short>(), 1, enemyBlocks);
						}
					}
				}
			}
			foreach (int characterId in killCharacters)
			{
				GameData.Domains.Character.Character character = characterDomain.GetElement_Objects(characterId);
				characterDomain.MakeCharacterDead(EventHelper.Domain.MainThreadDataContext, character, 10);
			}
			ObjectPool<List<short>>.Instance.Return(enemyTemplates);
			ObjectPool<List<MapBlockData>>.Instance.Return(enemyBlocks);
			ObjectPool<HashSet<int>>.Instance.Return(killCharacters);
			ObjectPool<List<short>>.Instance.Return(ruinTemplates);
			ObjectPool<HashSet<short>>.Instance.Return(edgeTemplates);
			ObjectPool<List<short>>.Instance.Return(edgeBlocks);
		}

		// Token: 0x060020E6 RID: 8422 RVA: 0x001A55B8 File Offset: 0x001A37B8
		public static void MakeAreaGraduallyBrokenInCondition(short areaId, Predicate<MapBlockData> excludeCondition, IDictionary<short, byte> protectedBlocks)
		{
			MapDomain mapDomain = DomainManager.Map;
			AdventureDomain adventureDomain = DomainManager.Adventure;
			CharacterDomain characterDomain = DomainManager.Character;
			MapAreaData areaData = mapDomain.GetElement_Areas((int)areaId);
			List<short> edgeBlocks = ObjectPool<List<short>>.Instance.Get();
			HashSet<short> edgeTemplates = ObjectPool<HashSet<short>>.Instance.Get();
			List<short> ruinTemplates = ObjectPool<List<short>>.Instance.Get();
			HashSet<int> killCharacters = ObjectPool<HashSet<int>>.Instance.Get();
			List<short> enemyTemplates = ObjectPool<List<short>>.Instance.Get();
			List<MapBlockData> enemyBlocks = ObjectPool<List<MapBlockData>>.Instance.Get();
			List<ItemKey> itemsToDestroy = ObjectPool<List<ItemKey>>.Instance.Get();
			ruinTemplates.Clear();
			ruinTemplates.Add(118);
			ruinTemplates.Add(119);
			ruinTemplates.Add(120);
			ruinTemplates.Add(121);
			ruinTemplates.Add(122);
			ruinTemplates.Add(123);
			edgeTemplates.Clear();
			edgeTemplates.Add(126);
			edgeTemplates.UnionWith(ruinTemplates);
			killCharacters.Clear();
			enemyTemplates.Clear();
			enemyTemplates.Add(303);
			enemyTemplates.Add(304);
			enemyTemplates.Add(305);
			mapDomain.GetEdgeBlockList(areaId, edgeBlocks, edgeTemplates, false, false, true);
			foreach (short blockId in edgeBlocks)
			{
				bool flag = blockId == areaData.StationBlockId;
				if (!flag)
				{
					MapBlockData block = mapDomain.GetBlock(areaId, blockId);
					bool flag2 = block.TemplateId == 0;
					if (flag2)
					{
						DomainManager.TaiwuEvent.OnEvent_TaiwuVillageDestroyed();
						break;
					}
					bool flag3 = !MapBlockDataMatchers.CanBeRuinedByXiangshu(block) || excludeCondition(block) || protectedBlocks.Any(delegate(KeyValuePair<short, byte> p)
					{
						KeyValuePair<short, byte> keyValuePair = p;
						short num;
						byte b;
						keyValuePair.Deconstruct(out num, out b);
						short protectedBlockId = num;
						byte protectedRange = b;
						ByteCoordinate protectedCoord = ByteCoordinate.IndexToCoordinate(protectedBlockId, mapDomain.GetAreaSize(areaId));
						return block.GetManhattanDistanceToPos(protectedCoord.X, protectedCoord.Y) <= protectedRange;
					});
					if (!flag3)
					{
						Location location = new Location(areaId, blockId);
						short originTemplateId = block.TemplateId;
						bool flag4 = block.RootBlockId >= 0;
						if (flag4)
						{
							location.BlockId = block.RootBlockId;
						}
						mapDomain.ChangeBlockTemplate(EventHelper.Domain.MainThreadDataContext, location, ruinTemplates.Sample<short>(), false);
						block.InitResources(EventHelper.Domain.MainThreadDataContext.Random);
						block.DestroyItemsDirect(itemsToDestroy);
						DomainManager.Map.SetBlockData(EventHelper.Domain.MainThreadDataContext, block);
						bool flag5 = block.GroupBlockList != null;
						if (flag5)
						{
							foreach (MapBlockData childBlock in block.GroupBlockList)
							{
								childBlock.InitResources(EventHelper.Domain.MainThreadDataContext.Random);
								childBlock.DestroyItemsDirect(itemsToDestroy);
								DomainManager.Map.SetBlockData(EventHelper.Domain.MainThreadDataContext, childBlock);
							}
						}
						bool flag6 = !ruinTemplates.Contains(originTemplateId) && (block.TemplateEnemyList == null || block.TemplateEnemyList.Count <= 0);
						if (flag6)
						{
							enemyBlocks.Clear();
							enemyBlocks.Add(block);
							int i = 0;
							int count = EventHelper.Domain.MainThreadDataContext.Random.Next(5, 10);
							while (i < count)
							{
								adventureDomain.CreateRandomEnemiesOnValidBlocks(EventHelper.Domain.MainThreadDataContext, Location.Invalid, enemyTemplates.Sample<short>(), 1, enemyBlocks);
								i++;
							}
						}
					}
				}
			}
			DomainManager.Item.RemoveItems(EventHelper.Domain.MainThreadDataContext, itemsToDestroy);
			ObjectPool<List<ItemKey>>.Instance.Return(itemsToDestroy);
			ObjectPool<List<short>>.Instance.Return(enemyTemplates);
			ObjectPool<List<MapBlockData>>.Instance.Return(enemyBlocks);
			ObjectPool<HashSet<int>>.Instance.Return(killCharacters);
			ObjectPool<List<short>>.Instance.Return(ruinTemplates);
			ObjectPool<HashSet<short>>.Instance.Return(edgeTemplates);
			ObjectPool<List<short>>.Instance.Return(edgeBlocks);
		}

		// Token: 0x060020E7 RID: 8423 RVA: 0x001A5A78 File Offset: 0x001A3C78
		public static void SetBlockAndViewRangeVisible(short areaId, short blockId)
		{
			DomainManager.Map.SetBlockAndViewRangeVisible(EventHelper.Domain.MainThreadDataContext, areaId, blockId);
		}

		// Token: 0x060020E8 RID: 8424 RVA: 0x001A5A92 File Offset: 0x001A3C92
		public static void ChangeLocationBlockType(Location location, short templateId, bool safeChange = true)
		{
			DomainManager.Map.ChangeBlockTemplate(EventHelper.Domain.MainThreadDataContext, location, templateId, true);
		}

		// Token: 0x060020E9 RID: 8425 RVA: 0x001A5AB0 File Offset: 0x001A3CB0
		public static AdventureItem GetAdventureConfigOfLocation(Location location)
		{
			AreaAdventureData areaAdventureSites = DomainManager.Adventure.GetAdventuresInArea(location.AreaId);
			AdventureSiteData adventureSiteData;
			bool flag = areaAdventureSites.AdventureSites.TryGetValue(location.BlockId, out adventureSiteData);
			AdventureItem result;
			if (flag)
			{
				result = Adventure.Instance.GetItem(adventureSiteData.TemplateId);
			}
			else
			{
				result = null;
			}
			return result;
		}

		// Token: 0x060020EA RID: 8426 RVA: 0x001A5B00 File Offset: 0x001A3D00
		public static List<Location> GetBlockLocationGroup(Location location, bool includeSelf = true)
		{
			return DomainManager.Map.GetBlockLocationGroup(location, includeSelf);
		}

		// Token: 0x060020EB RID: 8427 RVA: 0x001A5B20 File Offset: 0x001A3D20
		public static Location GetAdventureGenerateRandomLocation(Location center, sbyte rangeMin, sbyte rangeMax, params short[] exceptBlockTemplateIds)
		{
			List<Location> rangeListMax = EventHelper.GetMapBlocksNearLocation(center, rangeMax);
			List<Location> rangeListMin = EventHelper.GetMapBlocksNearLocation(center, rangeMin);
			rangeListMax.RemoveAll(delegate(Location e)
			{
				bool flag2 = rangeListMin.Contains(e);
				bool result2;
				if (flag2)
				{
					result2 = true;
				}
				else
				{
					bool flag3 = EventHelper.CheckBlockHasAdventure(e);
					if (flag3)
					{
						result2 = true;
					}
					else
					{
						MapBlockData blockData = DomainManager.Map.GetBlock(e);
						MapBlockItem config = blockData.GetConfig();
						bool flag4 = config.SubType == EMapBlockSubType.DarkPool;
						if (flag4)
						{
							result2 = true;
						}
						else
						{
							bool flag5 = exceptBlockTemplateIds != null;
							if (flag5)
							{
								for (int i = 0; i < exceptBlockTemplateIds.Length; i++)
								{
									bool flag6 = exceptBlockTemplateIds[i] == config.TemplateId;
									if (flag6)
									{
										return true;
									}
								}
							}
							result2 = false;
						}
					}
				}
				return result2;
			});
			bool flag = rangeListMax.Count > 0;
			Location result;
			if (flag)
			{
				result = rangeListMax.Sample<Location>();
			}
			else
			{
				result = center;
			}
			return result;
		}

		// Token: 0x060020EC RID: 8428 RVA: 0x001A5B80 File Offset: 0x001A3D80
		public static Location GetAdventureGenerateRandomLocationOfEdge(short areaId, Location currentLocation, sbyte rangeMin, params short[] exceptBlockTemplateIds)
		{
			List<short> edgeBlockIdList = new List<short>();
			DomainManager.Map.GetEdgeBlockList(areaId, edgeBlockIdList, false, true);
			edgeBlockIdList.RemoveAll(delegate(short e)
			{
				Location location = new Location(areaId, e);
				bool flag = areaId == currentLocation.AreaId && EventHelper.GetStepCountBetweenBlocksInSameArea(currentLocation, location) <= (byte)rangeMin;
				bool result;
				if (flag)
				{
					result = true;
				}
				else
				{
					bool flag2 = EventHelper.CheckBlockHasAdventure(location);
					if (flag2)
					{
						result = true;
					}
					else
					{
						MapBlockData blockData = DomainManager.Map.GetBlock(location);
						MapBlockItem config = blockData.GetConfig();
						bool flag3 = config.SubType == EMapBlockSubType.DarkPool;
						if (flag3)
						{
							result = true;
						}
						else
						{
							bool flag4 = exceptBlockTemplateIds != null;
							if (flag4)
							{
								for (int i = 0; i < exceptBlockTemplateIds.Length; i++)
								{
									bool flag5 = exceptBlockTemplateIds[i] == config.TemplateId;
									if (flag5)
									{
										return true;
									}
								}
							}
							result = false;
						}
					}
				}
				return result;
			});
			return new Location(areaId, edgeBlockIdList.Sample<short>());
		}

		// Token: 0x060020ED RID: 8429 RVA: 0x001A5BF2 File Offset: 0x001A3DF2
		public static void GetLocationByDistance(Location centerLocation, int minStep, int maxStep, ref List<MapBlockData> mapBlockList)
		{
			DomainManager.Map.GetLocationByDistance(centerLocation, minStep, maxStep, ref mapBlockList);
		}

		// Token: 0x060020EE RID: 8430 RVA: 0x001A5C04 File Offset: 0x001A3E04
		public static MapBlockData GetLocationByDistanceRandom(Location centerLocation, int minStep, int maxStep, ref List<MapBlockData> mapBlockList)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			DomainManager.Map.GetLocationByDistance(centerLocation, minStep, maxStep, ref mapBlockList);
			return mapBlockList.GetRandom(context.Random);
		}

		// Token: 0x060020EF RID: 8431 RVA: 0x001A5C40 File Offset: 0x001A3E40
		public static Location GetRandomGraveBlock(Location location)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			return DomainManager.Map.GetRandomGraveBlock(context.Random, location);
		}

		// Token: 0x060020F0 RID: 8432 RVA: 0x001A5C70 File Offset: 0x001A3E70
		public unsafe static Location GetLocationExpectedCurrentState(Location currentLocation)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			sbyte currentState = DomainManager.Map.GetStateIdByAreaId(currentLocation.AreaId);
			List<short> locationIds = ObjectPool<List<short>>.Instance.Get();
			for (short areaId = 0; areaId < 45; areaId += 1)
			{
				sbyte stateId = DomainManager.Map.GetStateIdByAreaId(areaId);
				bool flag = currentState == stateId;
				if (!flag)
				{
					locationIds.Add(areaId);
				}
			}
			short randomizedAreaId = locationIds.GetRandom(context.Random);
			locationIds.Clear();
			Span<MapBlockData> areaBlocks = DomainManager.Map.GetAreaBlocks(randomizedAreaId);
			Span<MapBlockData> span = areaBlocks;
			for (int i = 0; i < span.Length; i++)
			{
				MapBlockData block = *span[i];
				locationIds.Add(block.BlockId);
			}
			short randomizedBlockId = locationIds.GetRandom(context.Random);
			ObjectPool<List<short>>.Instance.Return(locationIds);
			return new Location(randomizedAreaId, randomizedBlockId);
		}

		// Token: 0x060020F1 RID: 8433 RVA: 0x001A5D64 File Offset: 0x001A3F64
		public static Location GetSecretVillageRandomLocation(DataContext context)
		{
			short blockId = DomainManager.Map.GetAreaBlocks(137).ToArray().GetRandom(context.Random).BlockId;
			return new Location(137, blockId);
		}

		// Token: 0x060020F2 RID: 8434 RVA: 0x001A5DAC File Offset: 0x001A3FAC
		public static short GetAreaIdByAreaTemplateId(short areaTemplateId)
		{
			return DomainManager.Map.GetAreaIdByAreaTemplateId(areaTemplateId);
		}

		// Token: 0x060020F3 RID: 8435 RVA: 0x001A5DCC File Offset: 0x001A3FCC
		public static void WorldMapDoShake(string afterEvent, EventArgBox argBox)
		{
			bool flag = !string.IsNullOrEmpty(afterEvent);
			if (flag)
			{
				EventHelper.AddEventInListenWithActionName(afterEvent, argBox, "WorldMapShaken");
			}
			GameDataBridge.AddDisplayEvent(DisplayEventType.WorldMapDoShakeByEvent);
		}

		// Token: 0x060020F4 RID: 8436 RVA: 0x001A5DFC File Offset: 0x001A3FFC
		public static void WorldMapDoFocus(Location location, float duration, string afterEvent, EventArgBox argBox)
		{
			bool flag = !string.IsNullOrEmpty(afterEvent);
			if (flag)
			{
				EventHelper.AddEventInListenWithActionName(afterEvent, argBox, "WorldMapFocused");
			}
			GameDataBridge.AddDisplayEvent<Location, float>(DisplayEventType.WorldMapDoFocusByEvent, location, duration);
		}

		// Token: 0x060020F5 RID: 8437 RVA: 0x001A5E30 File Offset: 0x001A4030
		public static List<short> GetNormalAreaIdsByStateId(short stateId)
		{
			List<short> areaList = new List<short>();
			int regularAreasPerState = 3;
			for (int i = 0; i < regularAreasPerState; i++)
			{
				areaList.Add((short)((int)stateId * regularAreasPerState + i));
			}
			return areaList;
		}

		// Token: 0x060020F6 RID: 8438 RVA: 0x001A5E6C File Offset: 0x001A406C
		public static Location GetRandomLocationOfSettlement(sbyte orgTemplateId, bool show = false)
		{
			Settlement settlement = EventHelper.GetSettlementByOrgTemplateId(orgTemplateId);
			bool flag = settlement == null;
			if (flag)
			{
				throw new Exception("Settlement can not null");
			}
			Location location = EventHelper.GetSettlementLocation(settlement.GetId());
			List<short> blocks = ObjectPool<List<short>>.Instance.Get();
			blocks.Clear();
			DomainManager.Map.GetSettlementBlocksAndAffiliatedBlocks(location.AreaId, location.BlockId, blocks);
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			short randomBlockId = blocks[context.Random.Next(0, blocks.Count - 1)];
			ObjectPool<List<short>>.Instance.Return(blocks);
			Location newLocation = new Location(location.AreaId, randomBlockId);
			if (show)
			{
				MapBlockData blockData = DomainManager.Map.GetBlockData(newLocation.AreaId, newLocation.BlockId);
				bool flag2 = !blockData.Visible;
				if (flag2)
				{
					blockData.SetVisible(true, context);
				}
			}
			return newLocation;
		}

		// Token: 0x060020F7 RID: 8439 RVA: 0x001A5F54 File Offset: 0x001A4154
		public static Settlement GetSettlementByLocation(Location location)
		{
			Location settlementLocation = DomainManager.Map.GetBlock(location).GetRootBlock().GetLocation();
			return DomainManager.Organization.GetSettlementByLocation(settlementLocation);
		}

		// Token: 0x060020F8 RID: 8440 RVA: 0x001A5F88 File Offset: 0x001A4188
		public static void ChangeBlockTemplateUnsafe(Location location, short blockTemplateId)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			MapBlockData mapBlockData = DomainManager.Map.GetBlock(location);
			bool flag = mapBlockData.CanChangeBlockType();
			if (flag)
			{
				DomainManager.Map.ChangeBlockTemplate(context, location, blockTemplateId, true);
			}
		}

		// Token: 0x060020F9 RID: 8441 RVA: 0x001A5FC8 File Offset: 0x001A41C8
		public static short GetNearestSettlementIdByLocation(Location location)
		{
			return DomainManager.Map.GetNearestSettlementIdByLocation(location);
		}

		// Token: 0x060020FA RID: 8442 RVA: 0x001A5FE8 File Offset: 0x001A41E8
		public static short GetAreaRandomSettlementId(short areaId, bool containsMainCity = false, bool containsSect = false)
		{
			List<short> settlementIds = ObjectPool<List<short>>.Instance.Get();
			DomainManager.Map.GetAreaSettlementIds(areaId, settlementIds, containsMainCity, containsSect);
			short settlementId = settlementIds.GetRandom(EventHelper.Domain.MainThreadDataContext.Random);
			ObjectPool<List<short>>.Instance.Return(settlementIds);
			return settlementId;
		}

		// Token: 0x060020FB RID: 8443 RVA: 0x001A6037 File Offset: 0x001A4237
		public static void ChangeSpiritualDebtByAreaId(short areaId, int changeValue)
		{
			DomainManager.Extra.ChangeAreaSpiritualDebt(EventHelper.Domain.MainThreadDataContext, areaId, changeValue, true, true);
		}

		// Token: 0x060020FC RID: 8444 RVA: 0x001A6054 File Offset: 0x001A4254
		public static int GetAreaSpiritualDebt(short areaId)
		{
			return DomainManager.Extra.GetAreaSpiritualDebt(areaId);
		}

		// Token: 0x060020FD RID: 8445 RVA: 0x001A6074 File Offset: 0x001A4274
		public static short GetSpiritualDebtFinalCost(short targetSettlementId, short baseCost)
		{
			return DomainManager.Taiwu.GetSpiritualDebtFinalCost(targetSettlementId, baseCost);
		}

		// Token: 0x060020FE RID: 8446 RVA: 0x001A6094 File Offset: 0x001A4294
		public static int ChangeSpiritualDebtInTravelingEvent(short areaId, sbyte lifeSkillType)
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			int skillAttainment = (int)EventHelper.GetRoleLifeSkillAttainmentWithQualification(taiwu, lifeSkillType);
			int changeValue = skillAttainment * 5 / 20;
			EventHelper.ChangeSpiritualDebtByAreaId(areaId, (int)((short)changeValue));
			return changeValue;
		}

		// Token: 0x060020FF RID: 8447 RVA: 0x001A60CC File Offset: 0x001A42CC
		[Obsolete("use GetAreaSpiritualDebt instead.")]
		public static short GetAreaSpiritualDebtByAreaId(short areaId)
		{
			MapAreaData area = DomainManager.Map.GetElement_Areas((int)areaId);
			bool flag = area != null;
			if (flag)
			{
				return area.SpiritualDebt;
			}
			DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(19, 1);
			defaultInterpolatedStringHandler.AppendFormatted<short>(areaId);
			defaultInterpolatedStringHandler.AppendLiteral(" is NOT available! ");
			throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
		}

		// Token: 0x06002100 RID: 8448 RVA: 0x001A6128 File Offset: 0x001A4328
		[Obsolete]
		public static List<MapTemplateEnemyInfo> GetMapRandomEnemyGroup(MapBlockData blockData)
		{
			return EventHelper.GetMapRandomEnemyGroupForChar(blockData, DomainManager.Taiwu.GetTaiwuCharId(), true);
		}

		// Token: 0x06002101 RID: 8449 RVA: 0x001A614C File Offset: 0x001A434C
		[Obsolete]
		public static List<MapTemplateEnemyInfo> GetMapRandomEnemyGroupForCharacter(MapBlockData blockData, int charId)
		{
			GameData.Domains.Character.Character character;
			bool flag = !DomainManager.Character.TryGetElement_Objects(charId, out character);
			if (flag)
			{
				throw new Exception("GetMapRandomEnemyGroupForCharacter need a alive character id!");
			}
			bool flag2 = blockData.TemplateEnemyList == null || blockData.TemplateEnemyList.Count <= 0;
			List<MapTemplateEnemyInfo> result;
			if (flag2)
			{
				result = null;
			}
			else
			{
				List<MapTemplateEnemyInfo> xiangshuMinionList = new List<MapTemplateEnemyInfo>();
				List<MapTemplateEnemyInfo> righteousList = new List<MapTemplateEnemyInfo>();
				List<MapTemplateEnemyInfo> randomEnemyList = new List<MapTemplateEnemyInfo>();
				int i = 0;
				int max = blockData.TemplateEnemyList.Count;
				while (i < max)
				{
					MapTemplateEnemyInfo info = blockData.TemplateEnemyList[i];
					bool flag3 = GameData.Domains.Character.Character.IsXiangshuMinion(info.TemplateId);
					if (flag3)
					{
						xiangshuMinionList.Add(info);
					}
					else
					{
						bool flag4 = GameData.Domains.Character.Character.IsRighteous(info.TemplateId);
						if (flag4)
						{
							righteousList.Add(info);
						}
						else
						{
							randomEnemyList.Add(info);
						}
					}
					i++;
				}
				bool flag5 = xiangshuMinionList.Count > 0;
				if (flag5)
				{
					bool flag6 = xiangshuMinionList.Count > 1;
					if (flag6)
					{
						xiangshuMinionList.Sort(new Comparison<MapTemplateEnemyInfo>(EventHelper.<GetMapRandomEnemyGroupForCharacter>g__MapTemplateEnemyInfoSortFunc|1079_0));
					}
					bool flag7 = xiangshuMinionList.Count > 4;
					if (flag7)
					{
						xiangshuMinionList.RemoveRange(4, xiangshuMinionList.Count - 4);
					}
					result = xiangshuMinionList;
				}
				else
				{
					bool flag8 = DomainManager.Extra.IsProfessionalSkillUnlockedAndEquipped(28);
					if (flag8)
					{
						result = null;
					}
					else
					{
						bool flag9 = righteousList.Count > 0;
						if (flag9)
						{
							sbyte fameType = character.GetFameType();
							bool flag10 = fameType == 1 || fameType == 0;
							if (flag10)
							{
								bool flag11 = righteousList.Count > 1;
								if (flag11)
								{
									righteousList.Sort(new Comparison<MapTemplateEnemyInfo>(EventHelper.<GetMapRandomEnemyGroupForCharacter>g__MapTemplateEnemyInfoSortFunc|1079_0));
								}
								bool flag12 = righteousList.Count > 4;
								if (flag12)
								{
									righteousList.RemoveRange(4, righteousList.Count - 4);
								}
								return righteousList;
							}
						}
						bool flag13 = randomEnemyList.Count > 0;
						if (flag13)
						{
							bool flag14 = randomEnemyList.Count > 1;
							if (flag14)
							{
								randomEnemyList.Sort(new Comparison<MapTemplateEnemyInfo>(EventHelper.<GetMapRandomEnemyGroupForCharacter>g__MapTemplateEnemyInfoSortFunc|1079_0));
							}
							bool flag15 = randomEnemyList.Count > 4;
							if (flag15)
							{
								randomEnemyList.RemoveRange(4, randomEnemyList.Count - 4);
							}
							result = randomEnemyList;
						}
						else
						{
							result = null;
						}
					}
				}
			}
			return result;
		}

		// Token: 0x06002102 RID: 8450 RVA: 0x001A6373 File Offset: 0x001A4573
		[Obsolete]
		public static void TryTransferLocationAdventure(Location location, sbyte range)
		{
		}

		// Token: 0x06002103 RID: 8451 RVA: 0x001A6376 File Offset: 0x001A4576
		[Obsolete]
		public static void SpiritualDebtInteractionEmei()
		{
			DomainManager.Building.SpiritualDebtInteractionEmei(EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x06002104 RID: 8452 RVA: 0x001A6390 File Offset: 0x001A4590
		public static int TriggerLocationFirstPickup(Location location, bool noCombat = false)
		{
			MapPickup pickup = DomainManager.Map.FindFirstVisibleMapPickupOnLocation(location);
			bool flag = pickup == null || !pickup.IsNormalType;
			int result;
			if (flag)
			{
				result = -1;
			}
			else
			{
				DataContext context = EventHelper.Domain.MainThreadDataContext;
				bool flag2 = pickup.HasXiangshuMinion && !noCombat && !pickup.CalcCanAutoBeatXiangshuMinion();
				if (flag2)
				{
					result = EventHelper.CreateNonIntelligentCharacter(pickup.CalcXiangshuMinionTemplateId());
				}
				else
				{
					bool hasXiangshuMinion = pickup.HasXiangshuMinion;
					if (hasXiangshuMinion)
					{
						pickup.ApplyMinionEscape(context, location);
					}
					DomainManager.Map.TriggerNormalMapPickup(context, pickup);
					result = -1;
				}
			}
			return result;
		}

		// Token: 0x06002105 RID: 8453 RVA: 0x001A6420 File Offset: 0x001A4620
		public static bool AnyAutoPickup(Location location)
		{
			bool flag = !GlobalDomain.Settings.AutoTriggerMapNormalPickup;
			return !flag && DomainManager.Map.GetMapPickups(location).Any(new Func<MapPickup, bool>(EventHelper.IsAutoPickup));
		}

		// Token: 0x06002106 RID: 8454 RVA: 0x001A6464 File Offset: 0x001A4664
		public static int TriggerLocationAutoPickups(Location location)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			List<MapPickup> pickups = DomainManager.Map.GetMapPickups(location).ToList<MapPickup>();
			pickups.Sort(new Comparison<MapPickup>(MapPickupHelper.CompareVisiblePickups));
			foreach (MapPickup pickup in pickups.Where(new Func<MapPickup, bool>(EventHelper.IsAutoPickup)))
			{
				bool flag = pickup.HasXiangshuMinion && !pickup.CalcCanAutoBeatXiangshuMinion();
				if (flag)
				{
					DomainManager.Map.SetPickupAtFirst(context, pickup);
					return EventHelper.CreateNonIntelligentCharacter(pickup.CalcXiangshuMinionTemplateId());
				}
				bool hasXiangshuMinion = pickup.HasXiangshuMinion;
				if (hasXiangshuMinion)
				{
					pickup.ApplyMinionEscape(context, location);
				}
				DomainManager.Map.TriggerNormalMapPickup(context, pickup);
			}
			return -1;
		}

		// Token: 0x06002107 RID: 8455 RVA: 0x001A654C File Offset: 0x001A474C
		private static bool IsAutoPickup(MapPickup pickup)
		{
			MapPickupAutoTriggerSetting pickupSetting = GlobalDomain.Settings.NormalMapPickupAutoTriggerSetting;
			bool flag = !pickupSetting.IncludeXiangshuMinion && pickup.CalcNeedBattle();
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				bool flag2 = pickupSetting.MinGrade != -1 && pickup.Type == MapPickup.EMapPickupType.Item && ItemTemplateHelper.GetGrade(pickup.ItemType, pickup.ItemTemplateId) < pickupSetting.MinGrade;
				if (flag2)
				{
					result = false;
				}
				else
				{
					bool flag3 = !pickupSetting.PickupTypes[(int)pickup.Template.Type2];
					result = (!flag3 && !pickup.CalcMapPickupBanReason().Any());
				}
			}
			return result;
		}

		// Token: 0x06002108 RID: 8456 RVA: 0x001A65EC File Offset: 0x001A47EC
		public static void OnTaiwuDefeatByMapPickupEnemy(EventArgBox argBox)
		{
			DomainManager.Map.TempDisableTriggerNormalPickupByTaiwuEscape = true;
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			Location location;
			bool flag = !argBox.Get<Location>("BlockFrom", out location);
			if (flag)
			{
				argBox.Set("BlockFrom", DomainManager.Map.TaiwuLastLocation);
			}
			EventHelper.CharacterEscapeToNearbyBlock(argBox, taiwu, 1);
			DomainManager.Map.TempDisableTriggerNormalPickupByTaiwuEscape = false;
		}

		// Token: 0x06002109 RID: 8457 RVA: 0x001A6655 File Offset: 0x001A4855
		public static void ChangeMerchantFavorability(sbyte merchantType, int delta)
		{
			DomainManager.Merchant.ChangeMerchantCumulativeMoney(EventHelper.Domain.MainThreadDataContext, merchantType, delta);
		}

		// Token: 0x0600210A RID: 8458 RVA: 0x001A666E File Offset: 0x001A486E
		[Obsolete]
		public static void ChangeMerchantFavorabilityPercent(sbyte merchantType, int delta)
		{
			DomainManager.Merchant.ChangeMerchantFavorability(EventHelper.Domain.MainThreadDataContext, merchantType, delta);
		}

		// Token: 0x0600210B RID: 8459 RVA: 0x001A6687 File Offset: 0x001A4887
		public static int GetMerchantFavorability(sbyte merchantType)
		{
			return DomainManager.Merchant.GetCumulativeMoney((int)merchantType);
		}

		// Token: 0x0600210C RID: 8460 RVA: 0x001A6694 File Offset: 0x001A4894
		public static int GetMerchantFavorabilityPercent(sbyte merchantType)
		{
			return DomainManager.Merchant.GetCurFavorability(merchantType);
		}

		// Token: 0x0600210D RID: 8461 RVA: 0x001A66A1 File Offset: 0x001A48A1
		public static sbyte GetMerchantLevel(sbyte merchantType, short settlementId)
		{
			return DomainManager.Merchant.GetMerchantLevel(merchantType, settlementId);
		}

		// Token: 0x0600210E RID: 8462 RVA: 0x001A66AF File Offset: 0x001A48AF
		public static void StartTempCaravanAction(sbyte merchantType, sbyte merchantLevel, bool refresh = false, bool ignoreWorldProgress = false, bool ignoreFavorability = false, string tradeFinishEvent = "", EventArgBox argBox = null)
		{
			DomainManager.Merchant.StartTempCaravanAction(merchantType, merchantLevel, refresh, ignoreWorldProgress, ignoreFavorability, false);
			EventHelper.Domain.SetListenerWithActionName(tradeFinishEvent, argBox, "ShopActionComplete");
		}

		// Token: 0x0600210F RID: 8463 RVA: 0x001A66D8 File Offset: 0x001A48D8
		public static void StartSpecificCharIdAndMerchantTypeAction(int charId, sbyte merchantType, sbyte merchantLevel, bool refresh = false, string tradeFinishEvent = "", EventArgBox argBox = null)
		{
			DomainManager.Merchant.StartSpecificCharIdAndMerchantTypeAction(charId, merchantType, merchantLevel, refresh);
			EventHelper.Domain.SetListenerWithActionName(tradeFinishEvent, argBox, "ShopActionComplete");
		}

		// Token: 0x06002110 RID: 8464 RVA: 0x001A66FE File Offset: 0x001A48FE
		public static void DiscardNormalInformation(int charId, NormalInformation normalInformation)
		{
			DomainManager.Information.DiscardNormalInformation(EventHelper.Domain.MainThreadDataContext, charId, normalInformation);
		}

		// Token: 0x06002111 RID: 8465 RVA: 0x001A6717 File Offset: 0x001A4917
		public static void TransformNormalInformation(int charId, NormalInformation normalInformation)
		{
			DomainManager.Information.TransformNormalInformation(EventHelper.Domain.MainThreadDataContext, charId, normalInformation);
		}

		// Token: 0x06002112 RID: 8466 RVA: 0x001A6734 File Offset: 0x001A4934
		public static void CostNormalInformationUsedCount(int charId, NormalInformation normalInformation)
		{
			NormalInformationCollection normalInformationCollection;
			bool flag = DomainManager.Information.TryGetElement_Information(charId, out normalInformationCollection);
			if (flag)
			{
				InformationItem config = Information.Instance.GetItem(normalInformation.TemplateId);
				bool flag2 = config.InfoIds.CheckIndex((int)normalInformation.Level);
				if (flag2)
				{
					InformationInfoItem info = InformationInfo.Instance.GetItem(config.InfoIds[(int)normalInformation.Level]);
					bool flag3 = !info.Consume;
					if (flag3)
					{
						return;
					}
				}
				sbyte usedCount = normalInformationCollection.GetUsedCount(normalInformation);
				usedCount = normalInformationCollection.SetUsedCount(normalInformation, usedCount + 1);
				bool flag4 = usedCount >= normalInformationCollection.GetUsedCountMax(normalInformation);
				if (flag4)
				{
					EventHelper.DiscardNormalInformation(charId, normalInformation);
				}
				else
				{
					DomainManager.Information.SetNormalInformationCharacterDataModified(EventHelper.Domain.MainThreadDataContext, charId);
				}
			}
		}

		// Token: 0x06002113 RID: 8467 RVA: 0x001A67FC File Offset: 0x001A49FC
		public unsafe static sbyte GetNormalInformationUseResultType(int targetCharId, NormalInformation normalInformation)
		{
			InformationItem config = Information.Instance[normalInformation.TemplateId];
			InformationInfoItem info = InformationInfo.Instance[config.InfoIds[(int)normalInformation.Level]];
			GameData.Domains.Character.Character targetChar = DomainManager.Character.GetElement_Objects(targetCharId);
			sbyte result;
			switch (config.Type)
			{
			case 0:
			{
				MapStateItem selfState = MapState.Instance.First((MapStateItem s) => MapArea.Instance[(short)s.MainAreaID].OrganizationId.Contains(info.Oraganization));
				sbyte targetCharStateId = DomainManager.Map.GetStateTemplateIdByAreaId(targetChar.GetLocation().AreaId);
				bool flag = (selfState.TemplateId != targetCharStateId && !selfState.NeighborStates.Contains(targetCharStateId)) || (DomainManager.Map.GetAreaIdByAreaTemplateId((short)selfState.MainAreaID) == targetChar.GetBirthLocation().AreaId && targetChar.GetBirthLocation().AreaId != targetChar.GetLocation().AreaId);
				if (flag)
				{
					result = 0;
				}
				else
				{
					bool flag2 = selfState.TemplateId != targetCharStateId || (selfState.TemplateId == targetCharStateId && normalInformation.Level > targetChar.GetOrganizationInfo().Grade);
					if (flag2)
					{
						result = 1;
					}
					else
					{
						result = 2;
					}
				}
				break;
			}
			case 1:
			{
				sbyte selfOrganizationTemplateId = info.Oraganization;
				OrganizationInfo targetCharOrgInfo = targetChar.GetOrganizationInfo();
				bool flag3 = selfOrganizationTemplateId != targetCharOrgInfo.OrgTemplateId && targetCharOrgInfo.OrgTemplateId >= 0 && Organization.Instance[selfOrganizationTemplateId].Goodness != Organization.Instance[targetCharOrgInfo.OrgTemplateId].Goodness;
				if (flag3)
				{
					result = 0;
				}
				else
				{
					bool flag4 = selfOrganizationTemplateId != targetCharOrgInfo.OrgTemplateId;
					if (flag4)
					{
						result = 1;
					}
					else
					{
						result = 2;
					}
				}
				break;
			}
			case 2:
			{
				NormalInformationCollection targetCharInformation = DomainManager.Information.GetCharacterNormalInformation(targetCharId);
				sbyte receivedCount;
				bool flag5 = !targetCharInformation.ReceivedCounts.TryGetValue(config.TemplateId, out receivedCount);
				if (flag5)
				{
					receivedCount = 0;
				}
				short selfQualification = *(ref DomainManager.Taiwu.GetTaiwu().GetLifeSkillQualifications().Items.FixedElementField + (IntPtr)info.LifeSkillType * 2);
				short targetQualification = *(ref targetChar.GetLifeSkillQualifications().Items.FixedElementField + (IntPtr)info.LifeSkillType * 2);
				bool flag6 = selfQualification * (short)(normalInformation.Level + 1) >= targetQualification + targetQualification * (short)receivedCount * 2;
				if (flag6)
				{
					targetCharInformation.ReceivedCounts[config.TemplateId] = receivedCount + 2;
					result = 0;
				}
				else
				{
					bool flag7 = selfQualification * (short)(normalInformation.Level + 1) >= targetQualification + targetQualification * (short)receivedCount;
					if (flag7)
					{
						targetCharInformation.ReceivedCounts[config.TemplateId] = receivedCount + 1;
						result = 1;
					}
					else
					{
						result = 2;
					}
				}
				break;
			}
			case 3:
			case 4:
			{
				NormalInformationCollection normalCollection = DomainManager.Information.GetCharacterNormalInformation(targetCharId);
				bool flag8 = !normalCollection.GetList().Contains(normalInformation);
				if (flag8)
				{
					result = 0;
				}
				else
				{
					result = 2;
				}
				break;
			}
			case 5:
				result = 3;
				break;
			case 6:
			{
				ProfessionData targetCurrentProfession = DomainManager.Extra.GetCharacterCurrentProfession(targetCharId);
				OrganizationInfo orgInfo = targetChar.GetOrganizationInfo();
				bool flag9 = orgInfo.OrgTemplateId >= 0;
				if (flag9)
				{
					short orgMemberId = OrganizationDomain.GetMemberId(orgInfo.OrgTemplateId, orgInfo.Grade);
					OrganizationMemberItem orgMemberConfig = OrganizationMember.Instance.GetItem(orgMemberId);
					bool flag10 = orgMemberConfig.PreferProfessions != null;
					if (flag10)
					{
						foreach (IntPair pair in orgMemberConfig.PreferProfessions)
						{
							bool flag11 = pair.First == (int)info.Profession && pair.Second == 0;
							if (flag11)
							{
								return 2;
							}
						}
					}
				}
				bool flag12 = targetCurrentProfession != null;
				if (flag12)
				{
					ProfessionItem targetCurrentProfessionConfig = targetCurrentProfession.GetConfig();
					bool flag13 = targetCurrentProfessionConfig.CompatibleProfessions.Contains((int)info.Profession);
					if (flag13)
					{
						result = 0;
						break;
					}
					bool flag14 = targetCurrentProfessionConfig.ConflictingProfessions.Contains((int)info.Profession);
					if (flag14)
					{
						result = 2;
						break;
					}
				}
				result = 1;
				break;
			}
			default:
				throw new NotImplementedException();
			}
			return result;
		}

		// Token: 0x06002114 RID: 8468 RVA: 0x001A6C50 File Offset: 0x001A4E50
		internal static bool NormalInformationCanGiveTaiwu(NormalInformation information)
		{
			InformationItem config = Information.Instance.GetItem(information.TemplateId);
			if (config != null)
			{
				sbyte type = config.Type;
				if (type <= 1 || type == 6)
				{
					return true;
				}
			}
			return false;
		}

		// Token: 0x06002115 RID: 8469 RVA: 0x001A6C94 File Offset: 0x001A4E94
		public static bool CheckCharacterHasNormalInformationCanGiveTaiwu(int charId)
		{
			NormalInformationCollection collection = DomainManager.Information.GetCharacterNormalInformation(charId);
			return collection != null && collection.GetList().Count(new Func<NormalInformation, bool>(EventHelper.NormalInformationCanGiveTaiwu)) > 0;
		}

		// Token: 0x06002116 RID: 8470 RVA: 0x001A6CD2 File Offset: 0x001A4ED2
		public static IEnumerable<NormalInformation> GetExceptedCharacterNormalInformation(int charAId, int charBId)
		{
			IList<NormalInformation> collectionAList = DomainManager.Information.GetCharacterNormalInformation(charAId).GetList();
			NormalInformationCollection collectionB = DomainManager.Information.GetCharacterNormalInformation(charBId);
			foreach (NormalInformation source in collectionB.GetList())
			{
				bool flag = !EventHelper.NormalInformationCanGiveTaiwu(source);
				if (!flag)
				{
					InformationItem config = Information.Instance.GetItem(source.TemplateId);
					bool flag2 = !collectionAList.Contains(source) || !config.UsedCountWithMax;
					if (flag2)
					{
						yield return source;
					}
					config = null;
					source = default(NormalInformation);
				}
			}
			IEnumerator<NormalInformation> enumerator = null;
			yield break;
			yield break;
		}

		// Token: 0x06002117 RID: 8471 RVA: 0x001A6CEC File Offset: 0x001A4EEC
		public static int GetExtraNormalInformationOdds(int selfCharId, int targetCharId, IEnumerable<NormalInformation> exceptedSet)
		{
			NormalInformationCollection selfNormalCollection = DomainManager.Information.GetCharacterNormalInformation(selfCharId);
			NormalInformationCollection targetNormalCollection = DomainManager.Information.GetCharacterNormalInformation(targetCharId);
			bool flag = !exceptedSet.Any<NormalInformation>();
			int result;
			if (flag)
			{
				result = 0;
			}
			else
			{
				sbyte baseLine = 2;
				sbyte favor = FavorabilityType.GetFavorabilityType(DomainManager.Character.GetFavorability(targetCharId, selfCharId));
				bool flag2 = favor < baseLine;
				if (flag2)
				{
					result = 0;
				}
				else
				{
					result = (Math.Max(0, (int)(favor - baseLine)) + 1) * 20;
				}
			}
			return result;
		}

		// Token: 0x06002118 RID: 8472 RVA: 0x001A6D60 File Offset: 0x001A4F60
		public static NormalInformation DistributeExtraNormalInformation(IEnumerable<NormalInformation> exceptedSet, int targetId)
		{
			NormalInformation result = (from e in exceptedSet
			orderby e.Level
			select e).First<NormalInformation>();
			EventHelper.DistributeNormalInformationToCharacter(result, targetId);
			return result;
		}

		// Token: 0x06002119 RID: 8473 RVA: 0x001A6DA8 File Offset: 0x001A4FA8
		public static void DistributeNormalInformationToCharacter(NormalInformation normalInformation, int targetId)
		{
			InformationItem config = Information.Instance.GetItem(normalInformation.TemplateId);
			bool usedCountWithMax = config.UsedCountWithMax;
			if (usedCountWithMax)
			{
				DomainManager.Information.AddNormalInformationToCharacter(EventHelper.Domain.MainThreadDataContext, targetId, normalInformation);
			}
			else
			{
				DomainManager.Information.GiveRemainUsedCountInformation(EventHelper.Domain.MainThreadDataContext, targetId, normalInformation);
			}
			bool flag = targetId == DomainManager.Taiwu.GetTaiwuCharId();
			if (flag)
			{
				EventHelper.AddLegacyPoint(34, 100);
			}
		}

		// Token: 0x0600211A RID: 8474 RVA: 0x001A6E1D File Offset: 0x001A501D
		public static void ApplyNormalInformationSideEffect(NormalInformation normalInformation, sbyte useResultType, int selfCharId, int targetId)
		{
			EventHelper.ApplyNormalInformationSideEffectWithEffectRate(normalInformation, useResultType, selfCharId, targetId, 100);
		}

		// Token: 0x0600211B RID: 8475 RVA: 0x001A6E2C File Offset: 0x001A502C
		public static void ApplyNormalInformationSideEffectWithEffectRate(NormalInformation normalInformation, sbyte useResultType, int selfCharId, int targetId, int effectRate)
		{
			EventHelper.<>c__DisplayClass1107_0 CS$<>8__locals1;
			CS$<>8__locals1.targetId = targetId;
			CS$<>8__locals1.selfCharId = selfCharId;
			InformationItem config = Information.Instance[normalInformation.TemplateId];
			CS$<>8__locals1.targetChar = DomainManager.Character.GetElement_Objects(CS$<>8__locals1.targetId);
			CS$<>8__locals1.lifeRecordCollection = DomainManager.LifeRecord.GetLifeRecordCollection();
			switch (config.Type)
			{
			case 0:
			{
				sbyte areaTemplateId = InformationInfo.Instance[config.InfoIds[(int)normalInformation.Level]].Oraganization;
				EventHelper.<>c__DisplayClass1107_1 CS$<>8__locals2;
				CS$<>8__locals2.currentAreaLocation = CS$<>8__locals1.targetChar.GetLocation();
				bool flag = EventHelper.GetRandom(0, 100) < (int)config.ChangeLovingAndHatingRate[(int)useResultType] * effectRate / 100;
				if (flag)
				{
					bool flag2 = EventHelper.CheckProbability((int)config.ChangeLovingRate);
					if (flag2)
					{
						EventHelper.<ApplyNormalInformationSideEffectWithEffectRate>g__ChangeLoving|1107_0(ref CS$<>8__locals1, ref CS$<>8__locals2);
					}
					else
					{
						EventHelper.<ApplyNormalInformationSideEffectWithEffectRate>g__ChangeHating|1107_1(ref CS$<>8__locals1, ref CS$<>8__locals2);
					}
				}
				return;
			}
			case 1:
			{
				sbyte sectTemplateId = InformationInfo.Instance[config.InfoIds[(int)normalInformation.Level]].Oraganization;
				OrganizationItem sectConfig = Organization.Instance[sectTemplateId];
				Settlement sect = DomainManager.Organization.GetSettlementByOrgTemplateId(sectTemplateId);
				Tester.Assert(sectConfig.IsSect, "");
				bool flag3 = EventHelper.GetRandom(0, 100) < (int)config.ChangeTowardOrganizationRate[(int)useResultType] * effectRate / 100;
				if (flag3)
				{
					CS$<>8__locals1.targetChar.SetIdealSect(sectTemplateId, EventHelper.Domain.MainThreadDataContext);
					CS$<>8__locals1.lifeRecordCollection.AddNormalInformationChangeIdealSect(CS$<>8__locals1.targetId, DomainManager.World.GetCurrDate(), CS$<>8__locals1.targetChar.GetLocation(), CS$<>8__locals1.selfCharId, sect.GetId());
				}
				sbyte idealSectTemplateId = CS$<>8__locals1.targetChar.GetIdealSect();
				bool flag4 = normalInformation.TemplateId >= 55 && normalInformation.TemplateId <= 75;
				if (flag4)
				{
					bool flag5 = sectTemplateId == idealSectTemplateId && EventHelper.GetRandom(0, 100) < (int)config.RemoveTowardOrganizationRate[(int)useResultType];
					if (flag5)
					{
						int randomSectTemplateId;
						bool flag6;
						do
						{
							randomSectTemplateId = EventHelper.GetRandom(1, 15);
							flag6 = (randomSectTemplateId != (int)idealSectTemplateId);
						}
						while (!flag6);
						idealSectTemplateId = (sbyte)randomSectTemplateId;
						CS$<>8__locals1.targetChar.SetIdealSect(idealSectTemplateId, EventHelper.Domain.MainThreadDataContext);
						CS$<>8__locals1.lifeRecordCollection.AddNormalInformationChangeIdealSectNegative(CS$<>8__locals1.targetId, DomainManager.World.GetCurrDate(), CS$<>8__locals1.targetChar.GetLocation(), CS$<>8__locals1.selfCharId, sect.GetId());
					}
				}
				bool flag7 = EventHelper.GetRandom(0, 100) < (int)config.ChangeBehaviorTypeRate[(int)useResultType] * effectRate / 100;
				if (flag7)
				{
					short a = CS$<>8__locals1.targetChar.GetBaseMorality();
					short b = Organization.Instance[sectTemplateId].MainMorality;
					int lerp = (int)(a + (b - a) / 10);
					sbyte behaviorTypeBefore = CS$<>8__locals1.targetChar.GetBehaviorType();
					EventHelper.ChangeRoleBaseBehaviorValue(CS$<>8__locals1.targetChar, (int)((short)(lerp - (int)a)));
					sbyte behaviorTypeAfter = CS$<>8__locals1.targetChar.GetBehaviorType();
					bool flag8 = behaviorTypeAfter != behaviorTypeBefore;
					if (flag8)
					{
						CS$<>8__locals1.lifeRecordCollection.AddNormalInformationChangeBaseMorality(CS$<>8__locals1.targetId, DomainManager.World.GetCurrDate(), CS$<>8__locals1.targetChar.GetLocation(), CS$<>8__locals1.selfCharId, behaviorTypeAfter);
					}
				}
				return;
			}
			case 2:
			{
				sbyte lifeSkillType = InformationInfo.Instance[config.InfoIds[(int)normalInformation.Level]].LifeSkillType;
				bool flag9 = useResultType == 0;
				if (flag9)
				{
					GameData.Domains.Character.Character selfChar = DomainManager.Character.GetElement_Objects(CS$<>8__locals1.selfCharId);
					CS$<>8__locals1.lifeRecordCollection.AddNormalInformationChangeLifeSkillTypeInterest(CS$<>8__locals1.targetId, DomainManager.World.GetCurrDate(), CS$<>8__locals1.targetChar.GetLocation(), CS$<>8__locals1.selfCharId, lifeSkillType);
					CS$<>8__locals1.targetChar.AddPersonalNeed(EventHelper.Domain.MainThreadDataContext, GameData.Domains.Character.Ai.PersonalNeed.CreatePersonalNeed(15, lifeSkillType, selfChar.GetLifeSkillAttainment(lifeSkillType)));
				}
				return;
			}
			case 5:
			{
				bool flag10 = useResultType == 0;
				if (flag10)
				{
					DomainManager.Character.GetElement_Objects(CS$<>8__locals1.selfCharId).ChangeResource(EventHelper.Domain.MainThreadDataContext, 7, config.Authority * effectRate / 100);
				}
				else
				{
					bool flag11 = useResultType == 1;
					if (flag11)
					{
						DomainManager.Character.GetElement_Objects(CS$<>8__locals1.selfCharId).ChangeResource(EventHelper.Domain.MainThreadDataContext, 7, config.Authority / 2 * effectRate / 100);
					}
				}
				return;
			}
			}
			bool flag12 = useResultType == 0;
			if (flag12)
			{
				DomainManager.Character.GetElement_Objects(CS$<>8__locals1.selfCharId).ChangeResource(EventHelper.Domain.MainThreadDataContext, 7, config.Authority * effectRate / 100);
			}
		}

		// Token: 0x0600211C RID: 8476 RVA: 0x001A72C0 File Offset: 0x001A54C0
		public static string ApplyNormalInformation(int charId, EventArgBox argBox, NormalInformation normalInformation, string nextEventGuid1, string nextEventGuid2, string nextEventGuid3, string nextEventGuid4)
		{
			return EventHelper.ApplyNormalInformationWithEffectRate(charId, argBox, normalInformation, nextEventGuid1, nextEventGuid2, nextEventGuid3, nextEventGuid4, 100);
		}

		// Token: 0x0600211D RID: 8477 RVA: 0x001A72E4 File Offset: 0x001A54E4
		public static string ApplyNormalInformationWithEffectRate(int charId, EventArgBox argBox, NormalInformation normalInformation, string nextEventGuid1, string nextEventGuid2, string nextEventGuid3, string nextEventGuid4, int effectRate)
		{
			sbyte useResultType = EventHelper.GetNormalInformationUseResultType(charId, normalInformation);
			InformationItem config = Information.Instance.GetItem(normalInformation.TemplateId);
			bool flag = 6 == config.Type;
			if (flag)
			{
				short rate = config.ChangeProfessionRate[(int)useResultType];
				GameData.Domains.Character.Character character;
				bool flag2 = EventHelper.CheckProbability((int)rate) && DomainManager.Character.TryGetElement_Objects(charId, out character) && character.CanHaveProfession();
				if (flag2)
				{
					InformationInfoItem info = InformationInfo.Instance.GetItem(config.InfoIds[(int)normalInformation.Level]);
					DomainManager.Extra.SetCharacterCurrProfession(EventHelper.Domain.MainThreadDataContext, charId, (int)info.Profession, 0);
					GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
					LifeRecordCollection collection = DomainManager.LifeRecord.GetLifeRecordCollection();
					collection.AddNormalInformationChangeProfession(charId, DomainManager.World.GetCurrDate(), taiwu.GetValidLocation(), taiwu.GetId(), (int)info.Profession);
				}
			}
			bool flag3 = useResultType != 3;
			if (flag3)
			{
				EventHelper.SetInteractionCooldown(charId, 0);
			}
			bool flag4 = useResultType == 0;
			string result;
			if (flag4)
			{
				InformationInfoItem info2 = InformationInfo.Instance.GetItem(config.InfoIds[(int)normalInformation.Level]);
				bool flag5 = 2 == config.Type && 13 == info2.LifeSkillType;
				if (flag5)
				{
					ProfessionFormulaItem formula = ProfessionFormula.Instance[47];
					int addSeniority = formula.Calculate((int)normalInformation.Level);
					DomainManager.Extra.ChangeProfessionSeniority(EventHelper.Domain.MainThreadDataContext, 6, addSeniority, true, false);
				}
				else
				{
					bool flag6 = 2 == config.Type && 12 == info2.LifeSkillType;
					if (flag6)
					{
						ProfessionFormulaItem formula2 = ProfessionFormula.Instance[41];
						int addSeniority2 = formula2.Calculate((int)normalInformation.Level);
						DomainManager.Extra.ChangeProfessionSeniority(EventHelper.Domain.MainThreadDataContext, 5, addSeniority2, true, false);
					}
					else
					{
						ProfessionFormulaItem formula3 = ProfessionFormula.Instance[31];
						int addSeniority3 = formula3.Calculate((int)normalInformation.Level);
						DomainManager.Extra.ChangeProfessionSeniority(EventHelper.Domain.MainThreadDataContext, 4, addSeniority3, true, false);
					}
				}
				EventHelper.CostNormalInformationUsedCount(EventArgBox.TaiwuCharacterId, normalInformation);
				EventHelper.ApplyNormalInformationSideEffectWithEffectRate(normalInformation, 0, EventArgBox.TaiwuCharacterId, charId, effectRate);
				EventHelper.AddLegacyPoint(35, 100);
				result = nextEventGuid2;
			}
			else
			{
				bool flag7 = useResultType == 1;
				if (flag7)
				{
					EventHelper.CostNormalInformationUsedCount(EventArgBox.TaiwuCharacterId, normalInformation);
					EventHelper.ApplyNormalInformationSideEffectWithEffectRate(normalInformation, 1, EventArgBox.TaiwuCharacterId, charId, effectRate);
					result = nextEventGuid3;
				}
				else
				{
					bool flag8 = useResultType == 2;
					if (flag8)
					{
						EventHelper.CostNormalInformationUsedCount(EventArgBox.TaiwuCharacterId, normalInformation);
						EventHelper.ApplyNormalInformationSideEffectWithEffectRate(normalInformation, 2, EventArgBox.TaiwuCharacterId, charId, effectRate);
						result = nextEventGuid4;
					}
					else
					{
						bool flag9 = useResultType == 3;
						if (flag9)
						{
							result = EventHelper.StartSwordTombInformationEvent(normalInformation, argBox);
						}
						else
						{
							result = string.Empty;
						}
					}
				}
			}
			return result;
		}

		// Token: 0x0600211E RID: 8478 RVA: 0x001A759C File Offset: 0x001A579C
		public static void GetSwordTombInformation(EInformationInfoSwordInformationType type, bool isConsume, int xiangshuAvatarId, EventArgBox argBox)
		{
			bool flag = xiangshuAvatarId == -1;
			if (flag)
			{
				MapBlockData blockData = DomainManager.Map.GetBlock(DomainManager.Taiwu.GetTaiwu().GetLocation());
				GameData.Domains.Character.Character character = EventHelper.GetBlockXiangshuAvatar(blockData);
				xiangshuAvatarId = (int)XiangshuAvatarIds.GetXiangshuAvatarIdByCharacterTemplateId(character.GetTemplateId());
			}
			NormalInformation normalInformation = DomainManager.Information.CalcSwordTombInformation(type, isConsume, xiangshuAvatarId);
			InformationItem config = Information.Instance[normalInformation.TemplateId];
			InformationInfoItem infoConfig = InformationInfo.Instance[config.InfoIds[(int)normalInformation.Level]];
			int taiwuId = DomainManager.Taiwu.GetTaiwuCharId();
			bool usedCountWithMax = config.UsedCountWithMax;
			if (usedCountWithMax)
			{
				NormalInformationCollection normalInformationCollection;
				bool flag2 = DomainManager.Information.TryGetElement_Information(taiwuId, out normalInformationCollection) && normalInformationCollection.GetList().Contains(normalInformation);
				if (flag2)
				{
					EventHelper.DiscardNormalInformation(taiwuId, normalInformation);
				}
				DomainManager.Information.AddNormalInformationToCharacter(EventHelper.Domain.MainThreadDataContext, DomainManager.Taiwu.GetTaiwuCharId(), normalInformation);
			}
			else
			{
				DomainManager.Information.GiveRemainUsedCountInformation(EventHelper.Domain.MainThreadDataContext, DomainManager.Taiwu.GetTaiwuCharId(), normalInformation);
			}
			argBox.Set("SwordTombInformationName", infoConfig.Name);
		}

		// Token: 0x0600211F RID: 8479 RVA: 0x001A76C0 File Offset: 0x001A58C0
		public static int GetTargetCharSwordTombInformationReceivedCount(int targetCharId, NormalInformation normalInformation)
		{
			InformationItem config = Information.Instance[normalInformation.TemplateId];
			NormalInformationCollection normalCollection = DomainManager.Information.GetCharacterNormalInformation(targetCharId);
			sbyte receivedCount;
			return (int)(normalCollection.ReceivedCounts.TryGetValue(config.TemplateId, out receivedCount) ? receivedCount : 0);
		}

		// Token: 0x06002120 RID: 8480 RVA: 0x001A770C File Offset: 0x001A590C
		public static string StartSwordTombInformationEvent(NormalInformation normalInformation, EventArgBox argBox)
		{
			GameData.Domains.Character.Character character = argBox.GetCharacter("CharacterId");
			int targetCharId = character.GetId();
			int taiwuId = DomainManager.Taiwu.GetTaiwuCharId();
			int receivedCount = EventHelper.GetTargetCharSwordTombInformationReceivedCount(targetCharId, normalInformation);
			InformationItem config = Information.Instance[normalInformation.TemplateId];
			InformationInfoItem infoConfig = InformationInfo.Instance[config.InfoIds[(int)normalInformation.Level]];
			bool flag = infoConfig.SwordInformationType == EInformationInfoSwordInformationType.SwordTombFake || !infoConfig.Consume || receivedCount > 0;
			string result2;
			if (flag)
			{
				int resultType = (infoConfig.SwordInformationType == EInformationInfoSwordInformationType.SwordTombReal && infoConfig.Consume) ? (receivedCount - 1) : receivedCount;
				int num = resultType;
				int num2 = num;
				sbyte result;
				string resultGuid;
				if (num2 != 0)
				{
					if (num2 != 1)
					{
						result = 2;
						resultGuid = "11e308de-e4c3-418b-a2c3-84fd637a19f8";
					}
					else
					{
						result = 1;
						resultGuid = "a492637b-a49b-4041-b403-7b295bdccffe";
					}
				}
				else
				{
					EventHelper.AddLegacyPoint(35, 100);
					result = 0;
					resultGuid = "44080243-84c6-40a0-95d4-31b68eecbca5";
				}
				bool flag2 = infoConfig.SwordInformationType == EInformationInfoSwordInformationType.SwordTombFake;
				if (flag2)
				{
					EventHelper.CostNormalInformationUsedCount(taiwuId, normalInformation);
				}
				EventHelper.ApplyNormalInformationSideEffect(normalInformation, result, taiwuId, targetCharId);
				DomainManager.Information.EnsureCharacterNormalInformationCollection(EventHelper.Domain.MainThreadDataContext, targetCharId).ReceivedCounts[normalInformation.TemplateId] = (sbyte)(receivedCount + 1);
				DomainManager.Information.SetNormalInformationCharacterDataModified(EventHelper.Domain.MainThreadDataContext, targetCharId);
				EventHelper.SetInteractionCooldown(targetCharId, 0);
				result2 = resultGuid;
			}
			else
			{
				sbyte characterBehaviorType = character.GetBehaviorType();
				sbyte orgId = character.GetOrganizationInfo().OrgTemplateId;
				if (!true)
				{
				}
				sbyte b;
				switch (orgId)
				{
				case 1:
					b = 1;
					break;
				case 2:
					b = 1;
					break;
				case 3:
					b = 1;
					break;
				case 4:
					b = 2;
					break;
				case 5:
					b = 0;
					break;
				case 6:
					b = 3;
					break;
				case 7:
					b = 2;
					break;
				case 8:
					b = 0;
					break;
				case 9:
					b = 2;
					break;
				case 10:
					b = 4;
					break;
				case 11:
					b = 4;
					break;
				case 12:
					b = 3;
					break;
				case 13:
					b = 3;
					break;
				case 14:
					b = 0;
					break;
				case 15:
					b = 4;
					break;
				default:
					b = characterBehaviorType;
					break;
				}
				if (!true)
				{
				}
				sbyte behaviorType = b;
				if (!true)
				{
				}
				string text;
				switch (orgId)
				{
				case 1:
					text = "c4975bf2-f7c4-4aa9-9811-caa9d4e81c3c";
					break;
				case 2:
					text = "69964475-1132-40eb-ab9e-03fc7f624115";
					break;
				case 3:
					text = "97ef4cf7-da8d-49c6-af7c-5bd83b9c618f";
					break;
				case 4:
					text = "5abdaa52-baa7-4548-8883-847e91a84c83";
					break;
				case 5:
					text = "a01e37d7-ef93-4da3-a2c9-3cc8b2932c21";
					break;
				case 6:
					text = "69256f82-0b22-4210-b1f3-1e958bd2e4db";
					break;
				case 7:
					text = "64044dd9-4bd3-483a-95e2-075512f306e5";
					break;
				case 8:
					text = "ddcc1c56-b180-4460-807c-c022739456fd";
					break;
				case 9:
					text = "2e68e446-0e20-4038-9e33-e9fc9d3e751a";
					break;
				case 10:
					text = "1425f0f3-4e36-4e94-8a5a-d368e1b98528";
					break;
				case 11:
					text = "452c24ec-3b37-4f16-a48b-355770537527";
					break;
				case 12:
					text = "03c69a08-ce18-400c-b986-00873451b472";
					break;
				case 13:
					text = "264f4699-0e0c-4e32-bd18-0c70c2895fd6";
					break;
				case 14:
					text = "d2d5ee9b-4152-4b31-b0c8-2398e20afd5d";
					break;
				case 15:
					text = "80281d36-3e1f-40b9-819d-628cb6bb7c8f";
					break;
				default:
				{
					if (!true)
					{
					}
					string text2;
					switch (characterBehaviorType)
					{
					case 0:
						text2 = "cdb7b4c6-b70f-4430-b16c-fac80222c0de";
						break;
					case 1:
						text2 = "fe8aa2bf-f4e6-43de-b45e-8ee288610ccf";
						break;
					case 2:
						text2 = "2eb4a187-ab56-4bd6-b52f-b74df1571244";
						break;
					case 3:
						text2 = "d0fe948b-7534-4f76-8464-1294c21cb321";
						break;
					default:
						text2 = "4176fb90-550c-455c-afba-9953e62807de";
						break;
					}
					if (!true)
					{
					}
					text = text2;
					break;
				}
				}
				if (!true)
				{
				}
				string guid = text;
				sbyte grade = EventHelper.GetSwordTombInformationGiftMaxGrade(targetCharId);
				argBox.Set("SwordTombInformation", normalInformation);
				argBox.Set("SwordTombName", infoConfig.SwordTombPlaceHolder);
				argBox.Set("SwordTombBehavior", infoConfig.BehaviorTypePlaceHolders[(int)behaviorType]);
				argBox.Set("SwordTombHiringCostString", EventHelper.GetSwordTombInformationHiringUsedCount().ToString());
				string key = "SwordTombGiftMaxItemGradeString";
				DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(82, 2);
				defaultInterpolatedStringHandler.AppendLiteral(" <color=#GradeColor_");
				defaultInterpolatedStringHandler.AppendFormatted<sbyte>(grade);
				defaultInterpolatedStringHandler.AppendLiteral("><Language Key=LK_Num_");
				defaultInterpolatedStringHandler.AppendFormatted<int>((int)(9 - grade));
				defaultInterpolatedStringHandler.AppendLiteral("/><Language Key=LK_Item_Grade/></color> ");
				argBox.Set(key, defaultInterpolatedStringHandler.ToStringAndClear());
				string key2 = "SwordTombGiftMaxCombatSkillGradeString";
				defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(77, 2);
				defaultInterpolatedStringHandler.AppendLiteral(" <color=#GradeColor_");
				defaultInterpolatedStringHandler.AppendFormatted<sbyte>(grade);
				defaultInterpolatedStringHandler.AppendLiteral("><Language Key=LK_Num_");
				defaultInterpolatedStringHandler.AppendFormatted<int>((int)(9 - grade));
				defaultInterpolatedStringHandler.AppendLiteral("/><Language Key=LK_Grade/></color> ");
				argBox.Set(key2, defaultInterpolatedStringHandler.ToStringAndClear());
				string key3 = "SwordTombGiftMaxOrgGradeString";
				defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(58, 2);
				defaultInterpolatedStringHandler.AppendLiteral(" <color=#GradeColor_");
				defaultInterpolatedStringHandler.AppendFormatted<sbyte>(grade);
				defaultInterpolatedStringHandler.AppendLiteral("><Language Key=LK_OrgGrade_");
				defaultInterpolatedStringHandler.AppendFormatted<sbyte>(grade);
				defaultInterpolatedStringHandler.AppendLiteral("/></color> ");
				argBox.Set(key3, defaultInterpolatedStringHandler.ToStringAndClear());
				result2 = guid;
			}
			return result2;
		}

		// Token: 0x06002121 RID: 8481 RVA: 0x001A7BE0 File Offset: 0x001A5DE0
		public static ItemKey GetSwordTombInformationGiftItem(EventArgBox argBox)
		{
			GameData.Domains.Character.Character character = argBox.GetCharacter("CharacterId");
			int targetCharId = character.GetId();
			int previousCharId = -1;
			ItemKey res;
			bool flag = argBox.Get("SwordTombGiftPreviousCharId", ref previousCharId) && previousCharId == targetCharId && argBox.Get<ItemKey>("SwordTombGiftItem", out res);
			ItemKey result;
			if (flag)
			{
				result = res;
			}
			else
			{
				sbyte maxLevel = EventHelper.GetSwordTombInformationGiftMaxGrade(targetCharId);
				Inventory inventory = character.GetInventory();
				bool flag2 = inventory.Items.Count == 0;
				if (flag2)
				{
					res = ItemKey.Invalid;
				}
				else
				{
					int targetLevel = (int)(maxLevel + 1);
					List<ItemKey> itemList = ObjectPool<List<ItemKey>>.Instance.Get();
					itemList.Clear();
					while (itemList.Count == 0 && targetLevel > 0)
					{
						targetLevel--;
						foreach (ItemKey item in inventory.Items.Keys)
						{
							bool flag3 = (int)EventHelper.GetItemGrade(item) == targetLevel;
							if (flag3)
							{
								itemList.Add(item);
							}
						}
					}
					res = ((itemList.Count > 0) ? itemList[new Random(targetCharId).Next(itemList.Count)] : ItemKey.Invalid);
					ObjectPool<List<ItemKey>>.Instance.Return(itemList);
				}
				argBox.Set("SwordTombGiftItem", res);
				result = res;
			}
			return result;
		}

		// Token: 0x06002122 RID: 8482 RVA: 0x001A7D5C File Offset: 0x001A5F5C
		public static short GetSwordTombInformationGiftCombatSkill(EventArgBox argBox)
		{
			GameData.Domains.Character.Character character = argBox.GetCharacter("CharacterId");
			int targetCharId = character.GetId();
			int previousCharId = -1;
			short res = -1;
			bool flag = argBox.Get("SwordTombGiftPreviousCharId", ref previousCharId) && previousCharId == targetCharId && argBox.Get("SwordTombGiftCombatSkill", ref res);
			short result;
			if (flag)
			{
				result = res;
			}
			else
			{
				sbyte maxLevel = EventHelper.GetSwordTombInformationGiftMaxGrade(targetCharId);
				List<short> canLearn = EventHelper.GetCharCombatSkillList(targetCharId, -1, -1, 0, 8, false, false);
				List<short> learned = DomainManager.Taiwu.GetTaiwu().GetLearnedCombatSkills();
				bool flag2 = canLearn == null || canLearn.Count == 0;
				if (flag2)
				{
					res = -1;
				}
				else
				{
					int targetLevel = (int)(maxLevel + 1);
					List<short> skillList = ObjectPool<List<short>>.Instance.Get();
					skillList.Clear();
					while (skillList.Count == 0 && targetLevel > 0)
					{
						targetLevel--;
						foreach (short skillId in canLearn)
						{
							bool flag3 = (int)Config.CombatSkill.Instance[skillId].Grade == targetLevel && !learned.Contains(skillId);
							if (flag3)
							{
								skillList.Add(skillId);
							}
						}
					}
					res = ((skillList.Count > 0) ? skillList[new Random(targetCharId).Next(skillList.Count)] : -1);
					ObjectPool<List<short>>.Instance.Return(skillList);
				}
				argBox.Set("SwordTombGiftCombatSkill", res);
				result = res;
			}
			return result;
		}

		// Token: 0x06002123 RID: 8483 RVA: 0x001A7EF8 File Offset: 0x001A60F8
		public static bool IsSwordTombInformationGiftCharacterAbleToJoin(EventArgBox argBox)
		{
			GameData.Domains.Character.Character character = argBox.GetCharacter("CharacterId");
			int targetCharId = character.GetId();
			int previousCharId = -1;
			bool res = false;
			bool flag = argBox.Get("SwordTombGiftPreviousCharId", ref previousCharId) && previousCharId == targetCharId && argBox.Get("SwordTombGiftCharacter", ref res);
			bool result;
			if (flag)
			{
				result = res;
			}
			else
			{
				res = (character.GetOrganizationInfo().Grade <= EventHelper.GetSwordTombInformationGiftMaxGrade(character.GetId()));
				argBox.Set("SwordTombGiftCharacter", res);
				result = res;
			}
			return result;
		}

		// Token: 0x06002124 RID: 8484 RVA: 0x001A7F7C File Offset: 0x001A617C
		public static sbyte GetSwordTombInformationGiftMaxGrade(int targetCharId)
		{
			int taiwuId = DomainManager.Taiwu.GetTaiwuCharId();
			int level = (int)(DomainManager.World.GetXiangshuLevel() + 1);
			ushort relations = DomainManager.Character.GetRelation(targetCharId, taiwuId).RelationType;
			bool isFavorabilityEnough = FavorabilityType.GetFavorabilityType(DomainManager.Character.GetFavorability(targetCharId, taiwuId)) >= 6;
			bool isRelationEnough = RelationType.HasRelation(relations, 2) || RelationType.HasRelation(relations, 1) || RelationType.HasRelation(relations, 4) || RelationType.HasRelation(relations, 16) || RelationType.HasRelation(relations, 8) || RelationType.HasRelation(relations, 32) || RelationType.HasRelation(relations, 128) || RelationType.HasRelation(relations, 64) || RelationType.HasRelation(relations, 256) || RelationType.HasRelation(relations, 512) || RelationType.HasRelation(relations, 16384) || RelationType.HasRelation(relations, 1024);
			return (sbyte)Math.Min(8, level + (isFavorabilityEnough ? 1 : 0) + (isRelationEnough ? 1 : 0));
		}

		// Token: 0x06002125 RID: 8485 RVA: 0x001A8074 File Offset: 0x001A6274
		public static void SwordTombInformationReceiveGift(short giftType, EventArgBox argBox)
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			GameData.Domains.Character.Character character = argBox.GetCharacter("CharacterId");
			string afterEvent = "";
			argBox.Set("SwordTombGiftType", giftType);
			switch (giftType)
			{
			case 1:
			{
				ItemKey item;
				argBox.Get<ItemKey>("SwordTombGiftItem", out item);
				string text;
				if (item.ItemType == 12)
				{
					short templateId = item.TemplateId;
					if (templateId >= 211 && templateId <= 224)
					{
						text = "a679dd12-3e7d-404d-8f91-beca19a04cb0";
						goto IL_8A;
					}
				}
				text = "9ffe7e03-456b-4abc-abf2-82da562cd3a3";
				IL_8A:
				afterEvent = text;
				EventHelper.TransferInventoryItem(character, taiwu, item, 1);
				EventHelper.ShowGetItemPageForItems(new List<ValueTuple<ItemKey, int>>
				{
					new ValueTuple<ItemKey, int>(item, 1)
				}, afterEvent, argBox, false);
				argBox.Remove<ItemKey>("SwordTombGiftItem");
				break;
			}
			case 2:
			{
				short combatSkillId = -1;
				argBox.Get("SwordTombGiftCombatSkill", ref combatSkillId);
				EventHelper.ClearTeachTaiwuCombatSkillList(character.GetId());
				ItemKey item = EventHelper.LearnCombatSkillFromNpc(character, combatSkillId);
				afterEvent = "da61b2a3-ec1c-4e09-a261-f554a88b4109";
				EventHelper.ShowGetItemPageForItems(new List<ValueTuple<ItemKey, int>>
				{
					new ValueTuple<ItemKey, int>(item, 1)
				}, afterEvent, argBox, false);
				argBox.Remove<short>("SwordTombGiftCombatSkill");
				argBox.Set("SwordTombGiftCombatSkillReceived", combatSkillId);
				break;
			}
			case 3:
			{
				int charId = character.GetId();
				sbyte behavior = EventHelper.GetRoleBehavior(character);
				if (!true)
				{
				}
				string text2;
				switch (behavior)
				{
				case 0:
					text2 = "1da53983-cd7f-475f-b64c-745b1947e477";
					break;
				case 1:
					text2 = "77b5e4b0-56f3-4cd0-851e-abbb900f4cba";
					break;
				case 2:
					text2 = "955d6803-7cc5-4dfa-921e-c203dce41499";
					break;
				case 3:
					text2 = "c78109fa-d65e-4c51-8a6c-53f4dabad64a";
					break;
				case 4:
					text2 = "e72877d3-5a7e-4e80-8433-707cb95356d6";
					break;
				default:
					text2 = afterEvent;
					break;
				}
				if (!true)
				{
				}
				afterEvent = text2;
				EventHelper.RequestRoleJoinGroup(charId);
				EventHelper.ShowGetItemPageForCharacters(new List<int>
				{
					charId
				}, false, afterEvent, argBox);
				break;
			}
			}
		}

		// Token: 0x06002126 RID: 8486 RVA: 0x001A8238 File Offset: 0x001A6438
		public static void FinishSwordTombInformationEvent(EventArgBox argBox)
		{
			int giftType = 0;
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			int taiwuId = DomainManager.Taiwu.GetTaiwuCharId();
			NormalInformationCollection informationCollection = DomainManager.Information.GetElement_Information(taiwuId);
			GameData.Domains.Character.Character character = argBox.GetCharacter("CharacterId");
			int targetCharId = character.GetId();
			NormalInformation normalInformation;
			argBox.Get<NormalInformation>("SwordTombInformation", out normalInformation);
			argBox.Get("SwordTombGiftType", ref giftType);
			EventHelper.SetInteractionCooldown(targetCharId, 0);
			sbyte usedCount = informationCollection.GetUsedCount(normalInformation);
			DomainManager.Information.EnsureCharacterNormalInformationCollection(EventHelper.Domain.MainThreadDataContext, targetCharId).ReceivedCounts[normalInformation.TemplateId] = 1;
			switch (giftType)
			{
			case 1:
				usedCount = informationCollection.SetUsedCount(normalInformation, usedCount + 1);
				break;
			case 2:
				usedCount = informationCollection.SetUsedCount(normalInformation, usedCount + 1);
				break;
			case 3:
				usedCount = informationCollection.SetUsedCount(normalInformation, (sbyte)((int)usedCount + EventHelper.GetSwordTombInformationHiringUsedCount()));
				break;
			}
			bool flag = usedCount >= informationCollection.GetUsedCountMax(normalInformation);
			if (flag)
			{
				EventHelper.TransformNormalInformation(taiwuId, normalInformation);
			}
			else
			{
				DomainManager.Information.SetNormalInformationCharacterDataModified(EventHelper.Domain.MainThreadDataContext, taiwuId);
			}
			DomainManager.Information.SetNormalInformationCharacterDataModified(EventHelper.Domain.MainThreadDataContext, targetCharId);
		}

		// Token: 0x06002127 RID: 8487 RVA: 0x001A837C File Offset: 0x001A657C
		public static int GetSwordTombInformationHiringUsedCount()
		{
			return 3;
		}

		// Token: 0x06002128 RID: 8488 RVA: 0x001A838F File Offset: 0x001A658F
		public static void FixTaiwuMainStoryGainSkillBook()
		{
			DomainManager.Extra.FixTaiwuMainStoryGainSkillBook(EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x06002129 RID: 8489 RVA: 0x001A83A8 File Offset: 0x001A65A8
		public static void SettlementPrisonSetInfo(short buildingTemplateId, EventArgBox argBox)
		{
			Settlement settlement = EventHelper.GetTaiwuLocationSettlement();
			argBox.Set("SettlementId", settlement.GetId());
			argBox.Set("AreaId", settlement.GetLocation().AreaId);
			Tester.Assert(EventHelper.SettlementIsSect(settlement.GetId()), "");
			EventHelper.SectSettlementSetGuardInfo(settlement, argBox);
		}

		// Token: 0x0600212A RID: 8490 RVA: 0x001A8404 File Offset: 0x001A6604
		[Obsolete("Always return true for now.")]
		public static bool SettlementPrisonCanEnter(short settlementId, EventArgBox argBox)
		{
			return true;
		}

		// Token: 0x0600212B RID: 8491 RVA: 0x001A8417 File Offset: 0x001A6617
		public static void AddBounty(Sect sect, GameData.Domains.Character.Character character, sbyte punishmentSeverity, short punishmentType, int duration = -1)
		{
			sect.AddBounty(EventHelper.Domain.MainThreadDataContext, character, punishmentSeverity, punishmentType, duration);
		}

		// Token: 0x0600212C RID: 8492 RVA: 0x001A8430 File Offset: 0x001A6630
		public static void AddBounty(int charId, sbyte orgTemplateId, short punishmentType)
		{
			Sect sect = DomainManager.Organization.GetSettlementByOrgTemplateId(orgTemplateId) as Sect;
			bool flag = sect == null;
			if (!flag)
			{
				GameData.Domains.Character.Character character;
				bool flag2 = !DomainManager.Character.TryGetElement_Objects(charId, out character);
				if (!flag2)
				{
					PunishmentTypeItem punishment = PunishmentType.Instance[punishmentType];
					bool flag3 = punishment == null;
					if (!flag3)
					{
						sect.AddBounty(EventHelper.Domain.MainThreadDataContext, character, punishment.Severity, punishmentType, -1);
					}
				}
			}
		}

		// Token: 0x0600212D RID: 8493 RVA: 0x001A84A9 File Offset: 0x001A66A9
		public static void AddTaiwuBounty(sbyte orgTemplateId, short punishmentType)
		{
			EventHelper.AddBounty(DomainManager.Taiwu.GetTaiwuCharId(), orgTemplateId, punishmentType);
		}

		// Token: 0x0600212E RID: 8494 RVA: 0x001A84C0 File Offset: 0x001A66C0
		public static bool IsCharacterSectFugitive(int charId, short settlementId)
		{
			Tester.Assert(charId != DomainManager.Taiwu.GetTaiwuCharId(), "");
			bool flag = settlementId < 0;
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				Settlement settlement = DomainManager.Organization.GetSettlement(settlementId);
				result = DomainManager.Organization.IsCharacterSectFugitive(charId, settlement.GetOrgTemplateId());
			}
			return result;
		}

		// Token: 0x0600212F RID: 8495 RVA: 0x001A8518 File Offset: 0x001A6718
		public static bool IsTaiwuSectFugitive(short settlementId)
		{
			bool flag = settlementId < 0;
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				Settlement settlement = DomainManager.Organization.GetSettlement(settlementId);
				List<sbyte> sectList = DomainManager.Organization.GetTaiwuFugitiveBountySect();
				bool flag2 = sectList == null;
				result = (!flag2 && sectList.Contains(settlement.GetOrgTemplateId()));
			}
			return result;
		}

		// Token: 0x06002130 RID: 8496 RVA: 0x001A8568 File Offset: 0x001A6768
		public static bool IsCharacterSectEnemy(int charId, short settlementId)
		{
			Tester.Assert(settlementId >= 0, "");
			Settlement settlement = DomainManager.Organization.GetSettlement(settlementId);
			Sect sect = settlement as Sect;
			bool flag = sect == null;
			return !flag && (sect.HasEnemySectBounty(charId) || sect.HasEnemyRelationBounty(charId));
		}

		// Token: 0x06002131 RID: 8497 RVA: 0x001A85C0 File Offset: 0x001A67C0
		public static void SendCharacterIntoPrison(int charId, short settlementId, EventArgBox argBox, int duration = -1)
		{
			GameData.Domains.Character.Character character;
			bool flag = !DomainManager.Character.TryGetElement_Objects(charId, out character);
			if (!flag)
			{
				Settlement settlement = DomainManager.Organization.GetSettlement(settlementId);
				Sect sect = settlement as Sect;
				bool flag2 = sect == null;
				if (!flag2)
				{
					DataContext context = EventHelper.Domain.MainThreadDataContext;
					GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
					LifeRecordCollection collection = EventHelper.GetLifeRecordCollection();
					collection.AddSendingToPrisonCriminal(character.GetId(), EventHelper.GetGameDate(), taiwu.GetId(), sect.GetId());
					SettlementPrisonRecordCollection treasuryRecordCollection = DomainManager.Extra.GetSettlementPrisonRecordCollection(context, settlementId);
					treasuryRecordCollection.AddSentToPrisonTaiwu(EventHelper.GetGameDate(), settlementId, charId, taiwu.GetId());
					DomainManager.Extra.SetSettlementPrisonRecordCollection(context, settlementId, treasuryRecordCollection);
					CharacterSet groupCharIds = DomainManager.Taiwu.GetGroupCharIds();
					KidnappedCharacterList kidnappedCharacterList;
					bool flag3 = DomainManager.Character.TryGetKidnappedCharacters(taiwu.GetId(), out kidnappedCharacterList);
					if (flag3)
					{
						bool flag4 = kidnappedCharacterList.IndexOf(charId) >= 0;
						if (flag4)
						{
							EventHelper.RemovePrisonerFromCharacter(charId, taiwu.GetId(), false);
						}
					}
					bool flag5 = groupCharIds.GetCollection().Contains(charId);
					if (flag5)
					{
						SettlementPrisonEventEffectItem config = SettlementPrisonEventEffect.Instance[0];
						EventHelper.ChangeFavorabilityOptional(character, taiwu, (short)config.ChangeFavorTeammate, 3);
						EventHelper.RequestRoleLeaveGroup(charId);
					}
					ProfessionFormulaItem seniorityFormula = ProfessionFormula.Instance[27];
					bool flag6 = duration != -1;
					if (flag6)
					{
						sbyte punishmentSeverity = EventHelper.DurationToPunishmentSeverityLevel(duration);
						sect.AddPrisoner(context, character, punishmentSeverity, 43, duration);
						collection.AddSendingToPrison2Taiwu(taiwu.GetId(), EventHelper.GetGameDate(), character.GetId(), sect.GetId());
					}
					else
					{
						sbyte b;
						SettlementBounty bounty = DomainManager.Organization.GetBounty(charId, out b);
						bool flag7 = EventHelper.IsCharacterSectFugitive(charId, settlementId);
						if (flag7)
						{
							bool flag8 = character.IsCompletelyInfected();
							if (flag8)
							{
								sect.AddPrisoner(context, character, 39);
							}
							else
							{
								DomainManager.Organization.PunishSectMember(context, sect, character, bounty.PunishmentSeverity, bounty.PunishmentType, true);
							}
							int addSeniority = seniorityFormula.Calculate((int)(bounty.PunishmentSeverity + 1), (int)character.GetInteractionGrade());
							DomainManager.Extra.ChangeProfessionSeniority(context, 3, addSeniority, true, false);
						}
						else
						{
							bool flag9 = sect.HasEnemySectBounty(charId);
							if (flag9)
							{
								PunishmentTypeItem config2 = PunishmentType.Instance[41];
								sbyte severity = sect.GetPunishmentTypeSeverity(config2, true);
								sect.AddPrisoner(context, character, severity, config2.TemplateId, -1);
								int addSeniority2 = seniorityFormula.Calculate((int)(severity + 1), (int)character.GetInteractionGrade());
								DomainManager.Extra.ChangeProfessionSeniority(context, 3, addSeniority2, true, false);
							}
							else
							{
								bool flag10 = sect.HasEnemyRelationBounty(charId);
								if (flag10)
								{
									PunishmentTypeItem config3 = PunishmentType.Instance[42];
									sbyte severity2 = sect.GetPunishmentTypeSeverity(config3, true);
									sect.AddPrisoner(context, character, severity2, config3.TemplateId, -1);
									List<int> charIdList = EventHelper.GetEnemyCharacterListOfStateSettlement(charId, settlementId);
									bool flag11 = charIdList != null && charIdList.Count > 0;
									if (flag11)
									{
										for (int i = 0; i < charIdList.Count; i++)
										{
											int enemyId = charIdList[i];
											GameData.Domains.Character.Character enemy;
											bool flag12 = DomainManager.Character.TryGetElement_Objects(charIdList[i], out enemy);
											if (flag12)
											{
												EventHelper.ChangeFavorabilityOptional(enemy, taiwu, 3000, 3);
												DomainManager.Character.TryRemoveOneWayRelation(context, enemyId, charId, 32768);
											}
										}
									}
									int addSeniority3 = seniorityFormula.Calculate((int)(severity2 + 1), (int)character.GetInteractionGrade());
									DomainManager.Extra.ChangeProfessionSeniority(context, 3, addSeniority3, true, false);
								}
							}
						}
						EventHelper.GetBounty(sect, character, argBox);
					}
				}
			}
		}

		// Token: 0x06002132 RID: 8498 RVA: 0x001A893C File Offset: 0x001A6B3C
		private static List<int> GetEnemyCharacterListOfStateSettlement(int charId, short targetSettlementId)
		{
			GameData.Domains.Character.Character character;
			bool flag = !DomainManager.Character.TryGetElement_Objects(charId, out character);
			List<int> result;
			if (flag)
			{
				result = null;
			}
			else
			{
				Settlement targetSettlement = DomainManager.Organization.GetSettlement(targetSettlementId);
				Tester.Assert(targetSettlement is Sect, "");
				Location settlementLocation = targetSettlement.GetLocation();
				sbyte stateId = DomainManager.Map.GetStateIdByAreaId(settlementLocation.AreaId);
				List<short> settlementIds = ObjectPool<List<short>>.Instance.Get();
				List<int> characterIdList = new List<int>();
				DomainManager.Map.GetStateSettlementIds(stateId, settlementIds, true, true);
				for (int i = 0; i < settlementIds.Count; i++)
				{
					short settlementId = settlementIds[i];
					Settlement settlement = DomainManager.Organization.GetSettlement(settlementId);
					OrgMemberCollection members = settlement.GetMembers();
					for (sbyte grade = 3; grade < 9; grade += 1)
					{
						HashSet<int> gradeMembers = members.GetMembers(grade);
						foreach (int gradeMemberId in gradeMembers)
						{
							bool flag2 = DomainManager.Organization.GetPrisonerSect(gradeMemberId) == targetSettlement.GetOrgTemplateId();
							if (!flag2)
							{
								bool flag3 = DomainManager.Character.HasRelation(gradeMemberId, charId, 32768);
								if (flag3)
								{
									characterIdList.Add(gradeMemberId);
								}
							}
						}
					}
				}
				ObjectPool<List<short>>.Instance.Return(settlementIds);
				result = characterIdList;
			}
			return result;
		}

		// Token: 0x06002133 RID: 8499 RVA: 0x001A8AC4 File Offset: 0x001A6CC4
		private static sbyte DurationToPunishmentSeverityLevel(int duration)
		{
			sbyte punishmentSeverity = 1;
			bool flag = duration >= 6;
			if (flag)
			{
				punishmentSeverity = 1;
			}
			bool flag2 = duration >= 12;
			if (flag2)
			{
				punishmentSeverity = 2;
			}
			bool flag3 = duration >= 24;
			if (flag3)
			{
				punishmentSeverity = 3;
			}
			return punishmentSeverity;
		}

		// Token: 0x06002134 RID: 8500 RVA: 0x001A8B04 File Offset: 0x001A6D04
		public static void GetBounty(Sect sect, GameData.Domains.Character.Character character, EventArgBox argBox)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			int count = sect.CalcBountyAmount(character.GetInteractionGrade());
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			bool flag = DomainManager.Extra.IsProfessionalSkillUnlocked(3, 2);
			if (flag)
			{
				ProfessionData professionData = DomainManager.Extra.GetProfessionData(3);
				int factor = professionData.GetSeniorityPercent();
				count += count * factor / 100;
				int itemBonusGrade = Math.Clamp((int)character.GetOrganizationInfo().Grade * professionData.GetSeniorityPercent() / 100 - 2, 0, 8);
				short[] bonusList = Organization.Instance.GetItem(sect.GetOrgTemplateId()).MartialArtistItemBonus;
				bool flag2 = bonusList != null && bonusList.CheckIndex(itemBonusGrade);
				if (flag2)
				{
					short groupTemplateId = Config.Weapon.Instance.GetItem(bonusList[itemBonusGrade]).GroupId;
					List<WeaponItem> items = (from templateId in Config.Weapon.Instance.GetAllKeys()
					select Config.Weapon.Instance.GetItem(templateId) into template
					where template.GroupId == groupTemplateId && (int)template.Grade == itemBonusGrade
					select template).ToList<WeaponItem>();
					bool flag3 = items.Count > 0;
					if (flag3)
					{
						WeaponItem bonusItemTemplate = items.GetRandom(context.Random);
						ItemKey itemKey = DomainManager.Item.CreateItem(context, bonusItemTemplate.ItemType, bonusItemTemplate.TemplateId);
						taiwu.AddInventoryItem(context, itemKey, 1, false);
						DomainManager.World.GetInstantNotificationCollection().AddGetItem(taiwu.GetId(), itemKey.ItemType, itemKey.TemplateId);
						GameDataBridge.AddDisplayEvent<List<ItemDisplayData>, bool, bool>(DisplayEventType.OpenGetItem_Item, new List<ItemDisplayData>
						{
							DomainManager.Item.GetItemDisplayData(itemKey, -1)
						}, false, false);
					}
				}
			}
			argBox.Set("BountyCount", count);
			LifeRecordCollection collection = EventHelper.GetLifeRecordCollection();
			switch (Organization.Instance[sect.GetOrgTemplateId()].Goodness)
			{
			case -1:
				EventHelper.ChangeRoleResource(taiwu, 6, count, true);
				argBox.Set("BountyTypeName", Config.ResourceType.Instance.GetItem(6).Name);
				collection.AddSendingToPrison1Taiwu(taiwu.GetId(), EventHelper.GetGameDate(), character.GetId(), sect.GetId(), 6, count);
				break;
			case 0:
				EventHelper.ChangeRoleExp(taiwu, count);
				argBox.Set("BountyTypeName", CharacterPropertyDisplay.Instance.GetItem(104).Name);
				collection.AddSendingToPrison1TaiwuByExp(taiwu.GetId(), EventHelper.GetGameDate(), character.GetId(), sect.GetId(), count);
				break;
			case 1:
				EventHelper.ChangeRoleResource(taiwu, 7, count, true);
				argBox.Set("BountyTypeName", Config.ResourceType.Instance.GetItem(7).Name);
				collection.AddSendingToPrison1Taiwu(taiwu.GetId(), EventHelper.GetGameDate(), character.GetId(), sect.GetId(), 7, count);
				break;
			}
		}

		// Token: 0x06002135 RID: 8501 RVA: 0x001A8DFC File Offset: 0x001A6FFC
		public static bool IsCharacterBelongSect(int charId, short settlementId)
		{
			Settlement settlement = DomainManager.Organization.GetSettlement(settlementId);
			GameData.Domains.Character.Character character = DomainManager.Character.GetElement_Objects(charId);
			return character.GetOrganizationInfo().OrgTemplateId == settlement.GetOrgTemplateId();
		}

		// Token: 0x06002136 RID: 8502 RVA: 0x001A8E3C File Offset: 0x001A703C
		public static void BreakIntoPrisonKidnapEffect(int charId, short settlementId)
		{
			GameData.Domains.Character.Character character;
			bool flag = !DomainManager.Character.TryGetElement_Objects(charId, out character);
			if (!flag)
			{
				Settlement settlement = DomainManager.Organization.GetSettlement(settlementId);
				Sect sect = settlement as Sect;
				bool flag2 = sect == null;
				if (!flag2)
				{
					SettlementPrisoner prisoner = sect.Prison.GetPrisoner(charId);
					DataContext context = EventHelper.Domain.MainThreadDataContext;
					GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
					bool flag3 = character.IsCompletelyInfected();
					if (flag3)
					{
						DomainManager.Extra.AddStoneRoomCharacter(context, character);
						LifeRecordCollection collection = EventHelper.GetLifeRecordCollection();
						collection.AddImprisonedXiangshuInfectedTaiwu(taiwu.GetId(), EventHelper.GetGameDate(), charId, settlementId);
					}
					else
					{
						ItemKey itemKey = EventHelper.CreateItem(prisoner.RopeItemKey.ItemType, prisoner.RopeItemKey.TemplateId);
						EventHelper.AddItemToRole(taiwu, itemKey, 1, -1);
						EventHelper.AddPrisonerToCharacter(charId, taiwu.GetId(), itemKey);
						sect.RemovePrisoner(context, charId);
						LifeRecordCollection collection2 = EventHelper.GetLifeRecordCollection();
						collection2.AddSentToPrisonTaiwu(taiwu.GetId(), EventHelper.GetGameDate(), charId, settlementId);
					}
					SettlementPrisonRecordCollection treasuryRecordCollection = DomainManager.Extra.GetSettlementPrisonRecordCollection(context, settlementId);
					treasuryRecordCollection.AddIntrudePrisonAndSentToPrisonTaiwu(EventHelper.GetGameDate(), settlementId, taiwu.GetId(), charId);
					DomainManager.Extra.SetSettlementPrisonRecordCollection(context, settlementId, treasuryRecordCollection);
				}
			}
		}

		// Token: 0x06002137 RID: 8503 RVA: 0x001A8F80 File Offset: 0x001A7180
		public static void PrisonRescueEffect(int charId, short settlementId, bool breakInto)
		{
			GameData.Domains.Character.Character character;
			bool flag = !DomainManager.Character.TryGetElement_Objects(charId, out character);
			if (!flag)
			{
				Settlement settlement = DomainManager.Organization.GetSettlement(settlementId);
				Sect sect = settlement as Sect;
				bool flag2 = sect == null;
				if (!flag2)
				{
					GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
					DataContext context = EventHelper.Domain.MainThreadDataContext;
					sect.RemovePrisoner(context, charId);
					bool flag3 = EventHelper.IsTaiwuGroupFull();
					if (flag3)
					{
						OrganizationInfo taiwuOrgInfo = taiwu.GetOrganizationInfo();
						EventHelper.JoinOrganization(character, taiwuOrgInfo.SettlementId, 0);
					}
					else
					{
						EventHelper.RequestRoleJoinGroup(charId);
					}
					LifeRecordCollection collection = EventHelper.GetLifeRecordCollection();
					collection.AddRobbedFromPrisonNpc(charId, EventHelper.GetGameDate(), taiwu.GetId(), settlementId);
					SettlementPrisonRecordCollection settlementPrisonRecordCollection = DomainManager.Organization.GetSettlementPrisonRecordCollection(context, settlementId);
					if (breakInto)
					{
						settlementPrisonRecordCollection.AddIntrudePrisonAndPrisonRobbery(EventHelper.GetGameDate(), settlementId, taiwu.GetId(), charId);
					}
					else
					{
						settlementPrisonRecordCollection.AddPrisonRobbery(EventHelper.GetGameDate(), settlementId, taiwu.GetId(), charId);
					}
					DomainManager.Organization.SetSettlementPrisonRecordCollection(context, settlementId, settlementPrisonRecordCollection);
				}
			}
		}

		// Token: 0x06002138 RID: 8504 RVA: 0x001A908C File Offset: 0x001A728C
		public static void BreakIntoOrRescueEffect(short settlementId, EventArgBox argBox)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			SettlementPrisonEventEffect instance = SettlementPrisonEventEffect.Instance;
			int guardCombatLevel = EventHelper.GetGuardCombatLevel();
			if (!true)
			{
			}
			short index;
			if (guardCombatLevel != 1)
			{
				if (guardCombatLevel != 2)
				{
					index = 3;
				}
				else
				{
					index = 2;
				}
			}
			else
			{
				index = 1;
			}
			if (!true)
			{
			}
			SettlementPrisonEventEffectItem effectCfg = instance[index];
			ValueTuple<CharacterSet, CharacterSet, CharacterSet, CharacterSet> affectedCharInfo = DomainManager.Organization.ApplySettlementPrisonEventEffect(context, effectCfg, settlementId);
			LifeRecordCollection lifeRecordCollection = DomainManager.LifeRecord.GetLifeRecordCollection();
			int currDate = DomainManager.World.GetCurrDate();
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			int taiwuCharId = taiwu.GetId();
			foreach (int charId in affectedCharInfo.Item1.GetCollection())
			{
				bool becomeEnemy = affectedCharInfo.Item2.Contains(charId);
				bool disapproveTaiwu = affectedCharInfo.Item4.Contains(charId);
				bool flag = becomeEnemy && disapproveTaiwu;
				if (flag)
				{
					lifeRecordCollection.AddIntrudePrisonCancelSupportMakeEnemyNpc(charId, currDate, taiwuCharId, settlementId);
				}
				else
				{
					bool flag2 = becomeEnemy;
					if (flag2)
					{
						lifeRecordCollection.AddIntrudePrisonMakeEnemyOthersNpc(charId, currDate, taiwuCharId, settlementId);
					}
					else
					{
						bool flag3 = disapproveTaiwu;
						if (flag3)
						{
							lifeRecordCollection.AddIntrudePrisonCancelSupportNpc(charId, currDate, taiwuCharId, settlementId);
						}
					}
				}
			}
			bool flag4 = affectedCharInfo.Item1.GetCount() != 0;
			if (flag4)
			{
				int becomeEnemyCount = affectedCharInfo.Item2.GetCount();
				int disapproveCount = affectedCharInfo.Item4.GetCount();
				bool flag5 = becomeEnemyCount > 0 && disapproveCount > 0;
				if (flag5)
				{
					lifeRecordCollection.AddIntrudePrisonCancelSupportMakeEnemyTaiwu(taiwuCharId, currDate, settlementId);
				}
				else
				{
					bool flag6 = becomeEnemyCount > 0;
					if (flag6)
					{
						lifeRecordCollection.AddIntrudePrisonMakeEnemyOthersTaiwu(taiwuCharId, currDate, settlementId);
					}
					else
					{
						bool flag7 = disapproveCount > 0;
						if (flag7)
						{
							lifeRecordCollection.AddIntrudePrisonCancelSupportTaiwu(taiwuCharId, currDate, settlementId);
						}
					}
				}
			}
			SettlementPrisonRecordCollection treasuryRecordCollection = DomainManager.Extra.GetSettlementPrisonRecordCollection(context, settlementId);
			treasuryRecordCollection.AddIntrudePrison(currDate, settlementId, taiwuCharId);
			DomainManager.Extra.SetSettlementPrisonRecordCollection(context, settlementId, treasuryRecordCollection);
		}

		// Token: 0x06002139 RID: 8505 RVA: 0x001A9280 File Offset: 0x001A7480
		public static short CalcInteractPrisonNeedApprovingRate(int charId, short settlementId)
		{
			GameData.Domains.Character.Character character;
			bool flag = !DomainManager.Character.TryGetElement_Objects(charId, out character);
			short result;
			if (flag)
			{
				result = 0;
			}
			else
			{
				Settlement settlement = DomainManager.Organization.GetSettlement(settlementId);
				Sect sect = settlement as Sect;
				bool flag2 = sect == null;
				if (flag2)
				{
					result = 0;
				}
				else
				{
					SettlementPrisoner prisoner = sect.Prison.GetPrisoner(charId);
					int remainderTime = (int)MathF.Max((float)(prisoner.Duration - (EventHelper.GetGameDate() - prisoner.KidnapBeginDate)), 0f);
					short needApprovingRate = (short)((float)((int)prisoner.PunishmentSeverity * 200) * ((float)remainderTime * 1f / (float)prisoner.Duration));
					result = needApprovingRate;
				}
			}
			return result;
		}

		// Token: 0x0600213A RID: 8506 RVA: 0x001A9324 File Offset: 0x001A7524
		public static short CalcAskForPrisonerNeedApprovingRate(int charId)
		{
			GameData.Domains.Character.Character character;
			bool flag = !DomainManager.Character.TryGetElement_Objects(charId, out character);
			short result;
			if (flag)
			{
				result = 0;
			}
			else
			{
				result = (short)((character.GetOrganizationInfo().Grade + 1) * 50);
			}
			return result;
		}

		// Token: 0x0600213B RID: 8507 RVA: 0x001A9360 File Offset: 0x001A7560
		public static bool TaiwuCanAskForThisPrisoner(int charId, short settlementId)
		{
			GameData.Domains.Character.Character character;
			bool flag = !DomainManager.Character.TryGetElement_Objects(charId, out character);
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				Settlement settlement = DomainManager.Organization.GetSettlement(settlementId);
				Sect sect = settlement as Sect;
				bool flag2 = sect == null;
				if (flag2)
				{
					result = false;
				}
				else
				{
					SettlementPrisoner prisoner = sect.Prison.GetPrisoner(charId);
					sbyte prisonerGrade = character.GetOrganizationInfo().Grade;
					sbyte xiangshuLevel = DomainManager.World.GetXiangshuLevel();
					bool flag3 = prisoner.PunishmentSeverity == 1;
					if (flag3)
					{
						result = (prisonerGrade <= xiangshuLevel);
					}
					else
					{
						bool flag4 = prisoner.PunishmentSeverity == 2;
						if (flag4)
						{
							result = (prisonerGrade <= xiangshuLevel - 1);
						}
						else
						{
							bool flag5 = prisoner.PunishmentSeverity == 3;
							if (flag5)
							{
								result = (prisonerGrade <= xiangshuLevel - 2);
							}
							else
							{
								result = (prisonerGrade <= xiangshuLevel - 3);
							}
						}
					}
				}
			}
			return result;
		}

		// Token: 0x0600213C RID: 8508 RVA: 0x001A9444 File Offset: 0x001A7644
		public static short CalcTiawuSendToPrisonNeedApprovingRate(int duration, int prisonerId, short settlementId)
		{
			GameData.Domains.Character.Character prisoner = DomainManager.Character.GetElement_Objects(prisonerId);
			int factor = (prisoner.GetOrganizationInfo().SettlementId == settlementId) ? 300 : 150;
			sbyte punishmentSeverity = EventHelper.DurationToPunishmentSeverityLevel(duration);
			return (short)((int)punishmentSeverity * factor);
		}

		// Token: 0x0600213D RID: 8509 RVA: 0x001A9488 File Offset: 0x001A7688
		public static void CancelApprovingRate(EventArgBox argBox)
		{
			IntList charIds = argBox.Get<IntList>("SelectApprovedTaiwu");
			bool flag = charIds.Items == null;
			if (!flag)
			{
				DataContext context = EventHelper.Domain.MainThreadDataContext;
				foreach (int charId in charIds.Items)
				{
					SettlementCharacter settlementCharacter;
					bool flag2 = DomainManager.Organization.TryGetSettlementCharacter(charId, out settlementCharacter);
					if (flag2)
					{
						settlementCharacter.SetApprovedTaiwu(context, false);
					}
				}
			}
		}

		// Token: 0x0600213E RID: 8510 RVA: 0x001A9520 File Offset: 0x001A7720
		public static void InteractPrisonPleaseEffect(int charId, short settlementId)
		{
			GameData.Domains.Character.Character character;
			bool flag = !DomainManager.Character.TryGetElement_Objects(charId, out character);
			if (!flag)
			{
				Settlement settlement = DomainManager.Organization.GetSettlement(settlementId);
				sbyte orgTemplateId = settlement.GetOrgTemplateId();
				Sect sect = settlement as Sect;
				bool flag2 = sect == null;
				if (!flag2)
				{
					DataContext context = EventHelper.Domain.MainThreadDataContext;
					GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
					SettlementPrisoner prisoner = sect.Prison.GetPrisoner(charId);
					sbyte prisonerGrade = character.GetOrganizationInfo().Grade;
					ProfessionFormulaItem formula = ProfessionFormula.Instance[59];
					int addSeniority = formula.Calculate((int)prisoner.PunishmentSeverity, (int)prisonerGrade);
					DomainManager.Extra.ChangeProfessionSeniority(context, 8, addSeniority, true, false);
					sect.RemovePrisoner(context, charId);
					LifeRecordCollection collection = EventHelper.GetLifeRecordCollection();
					collection.AddRequestTheReleaseOfTheCriminalTaiwu(taiwu.GetId(), EventHelper.GetGameDate(), charId, settlementId);
					OrganizationInfo orgInfo = character.GetOrganizationInfo();
					bool flag3 = orgInfo.OrgTemplateId == 0;
					if (flag3)
					{
						OrganizationMemberItem orgMemberCfg = OrganizationDomain.GetOrgMemberConfig(orgTemplateId, orgInfo.Grade);
						sbyte rejoinGrade = orgMemberCfg.GetRejoinGrade();
						OrganizationInfo newOrgInfo = new OrganizationInfo(orgTemplateId, rejoinGrade, true, settlementId);
						DomainManager.Organization.ChangeOrganization(context, character, newOrgInfo);
					}
					SettlementPrisonRecordCollection treasuryRecordCollection = DomainManager.Extra.GetSettlementPrisonRecordCollection(context, settlementId);
					treasuryRecordCollection.AddPrisonBail(EventHelper.GetGameDate(), settlementId, taiwu.GetId(), charId);
					DomainManager.Extra.SetSettlementPrisonRecordCollection(context, settlementId, treasuryRecordCollection);
				}
			}
		}

		// Token: 0x0600213F RID: 8511 RVA: 0x001A9684 File Offset: 0x001A7884
		public static void InteractPrisonKidnapInfectedEffect(int charId, short settlementId)
		{
			GameData.Domains.Character.Character character;
			bool flag = !DomainManager.Character.TryGetElement_Objects(charId, out character);
			if (!flag)
			{
				Settlement settlement = DomainManager.Organization.GetSettlement(settlementId);
				Sect sect = settlement as Sect;
				bool flag2 = sect == null;
				if (!flag2)
				{
					DataContext context = EventHelper.Domain.MainThreadDataContext;
					sect.RemovePrisoner(context, charId);
					GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
					DomainManager.Extra.AddStoneRoomCharacter(context, character);
					LifeRecordCollection collection = EventHelper.GetLifeRecordCollection();
					collection.AddImprisonedXiangshuInfectedTaiwu(taiwu.GetId(), EventHelper.GetGameDate(), charId, settlementId);
					SettlementPrisonRecordCollection treasuryRecordCollection = DomainManager.Extra.GetSettlementPrisonRecordCollection(context, settlementId);
					treasuryRecordCollection.AddSendingToPrisonTaiwu(EventHelper.GetGameDate(), settlementId, taiwu.GetId(), charId);
					DomainManager.Extra.SetSettlementPrisonRecordCollection(context, settlementId, treasuryRecordCollection);
				}
			}
		}

		// Token: 0x06002140 RID: 8512 RVA: 0x001A974C File Offset: 0x001A794C
		public static void InteractPrisonKidnapEffect(int charId, short settlementId, ItemKey ropeItemKey)
		{
			GameData.Domains.Character.Character character;
			bool flag = !DomainManager.Character.TryGetElement_Objects(charId, out character);
			if (!flag)
			{
				Settlement settlement = DomainManager.Organization.GetSettlement(settlementId);
				Sect sect = settlement as Sect;
				bool flag2 = sect == null;
				if (!flag2)
				{
					DataContext context = EventHelper.Domain.MainThreadDataContext;
					sect.RemovePrisoner(context, charId);
					GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
					EventHelper.AddPrisonerToCharacter(charId, taiwu.GetId(), ropeItemKey);
					LifeRecordCollection collection = EventHelper.GetLifeRecordCollection();
					collection.AddSentToPrisonTaiwu(taiwu.GetId(), EventHelper.GetGameDate(), charId, settlementId);
					SettlementPrisonRecordCollection treasuryRecordCollection = DomainManager.Extra.GetSettlementPrisonRecordCollection(context, settlementId);
					treasuryRecordCollection.AddSendingToPrisonTaiwu(EventHelper.GetGameDate(), settlementId, taiwu.GetId(), charId);
					DomainManager.Extra.SetSettlementPrisonRecordCollection(context, settlementId, treasuryRecordCollection);
				}
			}
		}

		// Token: 0x06002141 RID: 8513 RVA: 0x001A9814 File Offset: 0x001A7A14
		public static void InteractPrisonRescueEffect(short settlementId, int prisonerId)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			SettlementPrisonEventEffect instance = SettlementPrisonEventEffect.Instance;
			int guardCombatLevel = EventHelper.GetGuardCombatLevel();
			if (!true)
			{
			}
			short index;
			if (guardCombatLevel != 1)
			{
				if (guardCombatLevel != 2)
				{
					index = 7;
				}
				else
				{
					index = 6;
				}
			}
			else
			{
				index = 5;
			}
			if (!true)
			{
			}
			SettlementPrisonEventEffectItem effectCfg = instance[index];
			ValueTuple<CharacterSet, CharacterSet, CharacterSet, CharacterSet> affectedCharInfo = DomainManager.Organization.ApplySettlementPrisonEventEffect(context, effectCfg, settlementId);
			LifeRecordCollection lifeRecordCollection = DomainManager.LifeRecord.GetLifeRecordCollection();
			int currDate = DomainManager.World.GetCurrDate();
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			int taiwuCharId = taiwu.GetId();
			foreach (int charId in affectedCharInfo.Item1.GetCollection())
			{
				bool becomeEnemy = affectedCharInfo.Item2.Contains(charId);
				bool disapproveTaiwu = affectedCharInfo.Item4.Contains(charId);
				bool flag = becomeEnemy && disapproveTaiwu;
				if (flag)
				{
					lifeRecordCollection.AddPrisonBreakIntrudePrisonCancelSupportMakeEnemyNpc(charId, currDate, taiwuCharId, prisonerId, settlementId);
				}
				else
				{
					bool flag2 = becomeEnemy;
					if (flag2)
					{
						lifeRecordCollection.AddPrisonBreakIntrudePrisonMakeEnemyOthersNpc(charId, currDate, taiwuCharId, prisonerId, settlementId);
					}
					else
					{
						bool flag3 = disapproveTaiwu;
						if (flag3)
						{
							lifeRecordCollection.AddPrisonBreakIntrudePrisonCancelSupportNpc(charId, currDate, taiwuCharId, prisonerId, settlementId);
						}
					}
				}
			}
			bool flag4 = affectedCharInfo.Item1.GetCount() != 0;
			if (flag4)
			{
				int becomeEnemyCount = affectedCharInfo.Item2.GetCount();
				int disapproveCount = affectedCharInfo.Item4.GetCount();
				bool flag5 = becomeEnemyCount > 0 && disapproveCount > 0;
				if (flag5)
				{
					lifeRecordCollection.AddPrisonBreakIntrudePrisonCancelSupportMakeEnemyTaiwu(taiwuCharId, currDate, prisonerId, settlementId);
				}
				else
				{
					bool flag6 = becomeEnemyCount > 0;
					if (flag6)
					{
						lifeRecordCollection.AddPrisonBreakIntrudePrisonMakeEnemyOthersTaiwu(taiwuCharId, currDate, prisonerId, settlementId);
					}
					else
					{
						bool flag7 = disapproveCount > 0;
						if (flag7)
						{
							lifeRecordCollection.AddPrisonBreakIntrudePrisonCancelSupportTaiwu(taiwuCharId, currDate, prisonerId, settlementId);
						}
					}
				}
			}
			SettlementPrisonRecordCollection treasuryRecordCollection = DomainManager.Extra.GetSettlementPrisonRecordCollection(context, settlementId);
			treasuryRecordCollection.AddPrisonRobbery(currDate, settlementId, taiwuCharId, prisonerId);
			DomainManager.Extra.SetSettlementPrisonRecordCollection(context, settlementId, treasuryRecordCollection);
		}

		// Token: 0x06002142 RID: 8514 RVA: 0x001A9A10 File Offset: 0x001A7C10
		public static sbyte GetFugitiveBountySect(GameData.Domains.Character.Character character)
		{
			Tester.Assert(character.GetId() != DomainManager.Taiwu.GetTaiwuCharId(), "");
			return DomainManager.Organization.GetFugitiveBountySect(character.GetId());
		}

		// Token: 0x06002143 RID: 8515 RVA: 0x001A9A54 File Offset: 0x001A7C54
		public static void SetArrestSettlementInfo(EventArgBox argBox, GameData.Domains.Character.Character character)
		{
			Tester.Assert(character.GetId() != DomainManager.Taiwu.GetTaiwuCharId(), "");
			sbyte orgTemplateId = EventHelper.GetFugitiveBountySect(character);
			Settlement settlement = DomainManager.Organization.GetSettlementByOrgTemplateId(orgTemplateId);
			argBox.Set("SettlementId", settlement.GetId());
		}

		// Token: 0x06002144 RID: 8516 RVA: 0x001A9AA8 File Offset: 0x001A7CA8
		public static bool AskForPrisonerVisible(GameData.Domains.Character.Character character)
		{
			OrganizationInfo organizationInfo = character.GetOrganizationInfo();
			bool flag = organizationInfo.SettlementId < 0;
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				Settlement settlement = DomainManager.Organization.GetSettlement(organizationInfo.SettlementId);
				Sect sect = settlement as Sect;
				bool flag2 = sect == null;
				if (flag2)
				{
					result = false;
				}
				else
				{
					KidnappedCharacterList kidnappedCharacterList;
					bool flag3 = DomainManager.Character.TryGetKidnappedCharacters(character.GetId(), out kidnappedCharacterList);
					if (flag3)
					{
						foreach (KidnappedCharacter kidnappedCharacter in kidnappedCharacterList.GetCollection())
						{
							Tester.Assert(kidnappedCharacter.CharId != DomainManager.Taiwu.GetTaiwuCharId(), "");
							sbyte orgTemplateId = DomainManager.Organization.GetFugitiveBountySect(kidnappedCharacter.CharId);
							bool flag4 = orgTemplateId >= 0;
							if (flag4)
							{
								SettlementBounty bounty = sect.Prison.GetBounty(kidnappedCharacter.CharId);
								bool flag5 = bounty.CurrentHunterId == character.GetId();
								if (flag5)
								{
									return true;
								}
							}
						}
					}
					result = false;
				}
			}
			return result;
		}

		// Token: 0x06002145 RID: 8517 RVA: 0x001A9BDC File Offset: 0x001A7DDC
		public static void AskForPrisonerRelease(int hunterId, int prisonerId, EventArgBox argBox)
		{
			short settlementId = -1;
			argBox.Get("SettlementId", ref settlementId);
			EventHelper.RemovePrisonerFromCharacter(prisonerId, hunterId, false);
			GameData.Domains.Character.Character hunter = DomainManager.Character.GetElement_Objects(hunterId);
			GameData.Domains.Character.Character prisoner = DomainManager.Character.GetElement_Objects(prisonerId);
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			SettlementPrisonEventEffectItem config = SettlementPrisonEventEffect.Instance[14];
			EventHelper.ChangeFavorabilityOptional(hunter, taiwu, (short)config.ChangeFavorCaptor, 3);
			EventHelper.ChangeFavorabilityOptional(prisoner, taiwu, (short)config.ChangeFavorTeammate, 3);
			LifeRecordCollection collection = EventHelper.GetLifeRecordCollection();
			collection.AddVictoryInCombatHandOverTheCriminalTaiwu(taiwu.GetId(), EventHelper.GetGameDate(), hunterId, prisonerId, settlementId);
		}

		// Token: 0x06002146 RID: 8518 RVA: 0x001A9C74 File Offset: 0x001A7E74
		public static void AskForPrisonerKidnap(int hunterId, int prisonerId, EventArgBox argBox)
		{
			short settlementId = -1;
			argBox.Get("SettlementId", ref settlementId);
			GameData.Domains.Character.Character hunter = DomainManager.Character.GetElement_Objects(hunterId);
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			EventHelper.RemovePrisonerFromCharacter(prisonerId, hunterId, false);
			Settlement settlement = DomainManager.Organization.GetSettlement(settlementId);
			Sect sect = settlement as Sect;
			bool flag = sect == null;
			if (!flag)
			{
				SettlementBounty bounty = sect.Prison.GetBounty(prisonerId);
				short ropeTemplateId = sect.GetPrisonRopeTemplateId(bounty.PunishmentSeverity);
				ItemKey ropeItem = EventHelper.CreateItem(12, ropeTemplateId);
				EventHelper.AddItemToRole(taiwu, ropeItem, 1, -1);
				EventHelper.AddPrisonerToCharacter(prisonerId, taiwu.GetId(), ropeItem);
				SettlementPrisonEventEffectItem config = SettlementPrisonEventEffect.Instance[15];
				EventHelper.ChangeFavorabilityOptional(hunter, taiwu, (short)config.ChangeFavorCaptor, 3);
				LifeRecordCollection collection = EventHelper.GetLifeRecordCollection();
				collection.AddVictoryInCombatHandOverTheCriminalTaiwu(taiwu.GetId(), EventHelper.GetGameDate(), hunterId, prisonerId, settlementId);
			}
		}

		// Token: 0x06002147 RID: 8519 RVA: 0x001A9D58 File Offset: 0x001A7F58
		public static void AskForPrisonerLose(int hunterId, int prisonerId, EventArgBox argBox)
		{
			short settlementId = -1;
			argBox.Get("SettlementId", ref settlementId);
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			LifeRecordCollection collection = EventHelper.GetLifeRecordCollection();
			collection.AddFailureInCombatHandOverTheCriminalTaiwu(taiwu.GetId(), EventHelper.GetGameDate(), hunterId, prisonerId, settlementId);
		}

		// Token: 0x06002148 RID: 8520 RVA: 0x001A9D9C File Offset: 0x001A7F9C
		public static void AskForPrisonerSetBountyInfo(int hunterId, int prisonerId, EventArgBox argBox)
		{
			GameData.Domains.Character.Character hunter = DomainManager.Character.GetElement_Objects(hunterId);
			GameData.Domains.Character.Character prisoner = DomainManager.Character.GetElement_Objects(prisonerId);
			Settlement settlement = DomainManager.Organization.GetSettlement(hunter.GetOrganizationInfo().SettlementId);
			Sect sect = settlement as Sect;
			bool flag = sect == null;
			if (!flag)
			{
				int count = sect.CalcBountyAmount(prisoner.GetInteractionGrade());
				argBox.Set("BountyCount", count);
			}
		}

		// Token: 0x06002149 RID: 8521 RVA: 0x001A9E08 File Offset: 0x001A8008
		public static void AskForPrisonerBribeRelease(int hunterId, int prisonerId, EventArgBox argBox)
		{
			short settlementId = -1;
			argBox.Get("SettlementId", ref settlementId);
			EventHelper.RemovePrisonerFromCharacter(prisonerId, hunterId, false);
			GameData.Domains.Character.Character prisoner = DomainManager.Character.GetElement_Objects(prisonerId);
			GameData.Domains.Character.Character hunter = DomainManager.Character.GetElement_Objects(hunterId);
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			SettlementPrisonEventEffectItem config = SettlementPrisonEventEffect.Instance[13];
			EventHelper.ChangeFavorabilityOptional(prisoner, taiwu, (short)config.ChangeFavorTeammate, 3);
			OrganizationInfo orgInfo = hunter.GetOrganizationInfo();
			int bountyCount = 0;
			argBox.Get("BountyCount", ref bountyCount);
			LifeRecordCollection collection = EventHelper.GetLifeRecordCollection();
			bool flag = Organization.Instance[orgInfo.OrgTemplateId].Goodness == 0;
			if (flag)
			{
				collection.AddBuyHandOverTheCriminalTaiwuByExp(taiwu.GetId(), EventHelper.GetGameDate(), hunterId, prisonerId, settlementId, bountyCount);
			}
			else
			{
				sbyte resourceType = 6;
				bool flag2 = Organization.Instance[orgInfo.OrgTemplateId].Goodness == 1;
				if (flag2)
				{
					resourceType = 7;
				}
				collection.AddBuyHandOverTheCriminalTaiwu(taiwu.GetId(), EventHelper.GetGameDate(), hunterId, prisonerId, settlementId, resourceType, bountyCount);
			}
		}

		// Token: 0x0600214A RID: 8522 RVA: 0x001A9F10 File Offset: 0x001A8110
		public static void AskForPrisonerBribeKidnap(int hunterId, int prisonerId, EventArgBox argBox)
		{
			short settlementId = -1;
			argBox.Get("SettlementId", ref settlementId);
			GameData.Domains.Character.Character hunter = DomainManager.Character.GetElement_Objects(hunterId);
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			EventHelper.RemovePrisonerFromCharacter(prisonerId, hunterId, false);
			Settlement settlement = DomainManager.Organization.GetSettlement(settlementId);
			Sect sect = settlement as Sect;
			bool flag = sect == null;
			if (!flag)
			{
				SettlementBounty bounty = sect.Prison.GetBounty(prisonerId);
				short ropeTemplateId = sect.GetPrisonRopeTemplateId(bounty.PunishmentSeverity);
				ItemKey ropeItem = EventHelper.CreateItem(12, ropeTemplateId);
				EventHelper.AddItemToRole(taiwu, ropeItem, 1, -1);
				EventHelper.AddPrisonerToCharacter(prisonerId, taiwu.GetId(), ropeItem);
				OrganizationInfo orgInfo = hunter.GetOrganizationInfo();
				int bountyCount = 0;
				argBox.Get("BountyCount", ref bountyCount);
				LifeRecordCollection collection = EventHelper.GetLifeRecordCollection();
				bool flag2 = Organization.Instance[orgInfo.OrgTemplateId].Goodness == 0;
				if (flag2)
				{
					collection.AddBuyHandOverTheCriminalTaiwuByExp(taiwu.GetId(), EventHelper.GetGameDate(), hunterId, prisonerId, settlementId, bountyCount);
				}
				else
				{
					sbyte resourceType = 6;
					bool flag3 = Organization.Instance[orgInfo.OrgTemplateId].Goodness == 1;
					if (flag3)
					{
						resourceType = 7;
					}
					collection.AddBuyHandOverTheCriminalTaiwu(taiwu.GetId(), EventHelper.GetGameDate(), hunterId, prisonerId, settlementId, resourceType, bountyCount);
				}
			}
		}

		// Token: 0x0600214B RID: 8523 RVA: 0x001AA054 File Offset: 0x001A8254
		public static void AskForPrisonerLifeSkillCombatRelease(int hunterId, int prisonerId, EventArgBox argBox)
		{
			short settlementId = -1;
			argBox.Get("SettlementId", ref settlementId);
			EventHelper.RemovePrisonerFromCharacter(prisonerId, hunterId, false);
			GameData.Domains.Character.Character prisoner = DomainManager.Character.GetElement_Objects(prisonerId);
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			SettlementPrisonEventEffectItem config = SettlementPrisonEventEffect.Instance[13];
			EventHelper.ChangeFavorabilityOptional(prisoner, taiwu, (short)config.ChangeFavorTeammate, 3);
			LifeRecordCollection collection = EventHelper.GetLifeRecordCollection();
			collection.AddLifeSkillBattleHandOverTheCriminalTaiwu(taiwu.GetId(), EventHelper.GetGameDate(), hunterId, prisonerId, settlementId);
		}

		// Token: 0x0600214C RID: 8524 RVA: 0x001AA0CC File Offset: 0x001A82CC
		public static void AskForPrisonerLifeSkillCombatKidnap(int hunterId, int prisonerId, EventArgBox argBox)
		{
			short settlementId = -1;
			argBox.Get("SettlementId", ref settlementId);
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			EventHelper.RemovePrisonerFromCharacter(prisonerId, hunterId, false);
			Settlement settlement = DomainManager.Organization.GetSettlement(settlementId);
			Sect sect = settlement as Sect;
			bool flag = sect == null;
			if (!flag)
			{
				SettlementBounty bounty = sect.Prison.GetBounty(prisonerId);
				short ropeTemplateId = sect.GetPrisonRopeTemplateId(bounty.PunishmentSeverity);
				ItemKey ropeItem = EventHelper.CreateItem(12, ropeTemplateId);
				EventHelper.AddItemToRole(taiwu, ropeItem, 1, -1);
				EventHelper.AddPrisonerToCharacter(prisonerId, taiwu.GetId(), ropeItem);
				LifeRecordCollection collection = EventHelper.GetLifeRecordCollection();
				collection.AddLifeSkillBattleHandOverTheCriminalTaiwu(taiwu.GetId(), EventHelper.GetGameDate(), hunterId, prisonerId, settlementId);
			}
		}

		// Token: 0x0600214D RID: 8525 RVA: 0x001AA17C File Offset: 0x001A837C
		public static void RemovePrisoner(GameData.Domains.Character.Character character, short settlementId)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			Settlement settlement = DomainManager.Organization.GetSettlement(settlementId);
			Sect sect = settlement as Sect;
			bool flag = sect == null;
			if (!flag)
			{
				sect.RemovePrisoner(context, character.GetId());
				LifeRecordCollection lifeRecordCollection = DomainManager.LifeRecord.GetLifeRecordCollection();
				lifeRecordCollection.AddBeReleasedUponCompletionOfASentence(character.GetId(), EventHelper.GetGameDate(), settlementId);
				SettlementPrisonRecordCollection treasuryRecordCollection = DomainManager.Extra.GetSettlementPrisonRecordCollection(context, settlementId);
				treasuryRecordCollection.AddBeReleasedUponCompletionOfASentence(EventHelper.GetGameDate(), settlementId, character.GetId());
			}
		}

		// Token: 0x0600214E RID: 8526 RVA: 0x001AA204 File Offset: 0x001A8404
		public static void ArrestPrisonAgreeEffect(int teammateId, int hunterId, EventArgBox argBox)
		{
			GameData.Domains.Character.Character hunter = DomainManager.Character.GetElement_Objects(hunterId);
			ItemKey ropeItem = EventHelper.CreateItem(12, 73);
			EventHelper.AddItemToRole(hunter, ropeItem, 1, -1);
			EventHelper.AddPrisonerToCharacter(teammateId, hunterId, ropeItem);
			EventHelper.CharacterEscapeToNearbyBlock(argBox, hunter, 1);
			short settlementId = -1;
			argBox.Get("SettlementId", ref settlementId);
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			LifeRecordCollection collection = EventHelper.GetLifeRecordCollection();
			collection.AddReceiveCriminalsTaiwu(taiwu.GetId(), EventHelper.GetGameDate(), teammateId, hunterId, settlementId);
			collection.AddReceiveCriminalsCaptor(hunterId, EventHelper.GetGameDate(), teammateId, taiwu.GetId(), settlementId);
			collection.AddReceiveCriminalsCriminal(teammateId, EventHelper.GetGameDate(), taiwu.GetId(), hunterId, settlementId);
			GameData.Domains.Character.Character teammate = DomainManager.Character.GetElement_Objects(teammateId);
			SettlementPrisonEventEffectItem config = SettlementPrisonEventEffect.Instance[10];
			EventHelper.ChangeFavorabilityOptional(teammate, taiwu, (short)config.ChangeFavorTeammate, 3);
		}

		// Token: 0x0600214F RID: 8527 RVA: 0x001AA2D8 File Offset: 0x001A84D8
		public static void ArrestPrisonLoseEffect(int teammateId, int hunterId, EventArgBox argBox)
		{
			short settlementId = -1;
			argBox.Get("SettlementId", ref settlementId);
			Settlement settlement = DomainManager.Organization.GetSettlement(settlementId);
			Sect sect = settlement as Sect;
			bool flag = sect == null;
			if (!flag)
			{
				SettlementBounty bounty = sect.Prison.GetBounty(teammateId);
				short ropeTemplateId = sect.GetPrisonRopeTemplateId(bounty.PunishmentSeverity);
				ItemKey ropeItem = EventHelper.CreateItem(12, ropeTemplateId);
				GameData.Domains.Character.Character hunter = DomainManager.Character.GetElement_Objects(hunterId);
				EventHelper.AddItemToRole(hunter, ropeItem, 1, -1);
				EventHelper.AddPrisonerToCharacter(teammateId, hunterId, ropeItem);
				EventHelper.CharacterEscapeToNearbyBlock(argBox, hunter, 1);
				GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
				LifeRecordCollection collection = EventHelper.GetLifeRecordCollection();
				collection.AddResistArresEngageInBattleTaiwu(taiwu.GetId(), EventHelper.GetGameDate(), hunterId, teammateId, taiwu.GetLocation(), settlementId);
				collection.AddArrestedSuccessfullyCaptor(hunterId, EventHelper.GetGameDate(), teammateId, taiwu.GetLocation(), settlementId, 889);
				GameData.Domains.Character.Character teammate = DomainManager.Character.GetElement_Objects(teammateId);
				SettlementPrisonEventEffectItem config = SettlementPrisonEventEffect.Instance[9];
				EventHelper.ChangeFavorabilityOptional(teammate, taiwu, (short)config.ChangeFavorTeammate, 3);
			}
		}

		// Token: 0x06002150 RID: 8528 RVA: 0x001AA3E8 File Offset: 0x001A85E8
		public static void ArrestPrisonWinEffect(int teammateId, int hunterId, EventArgBox argBox)
		{
			short settlementId = -1;
			argBox.Get("SettlementId", ref settlementId);
			GameData.Domains.Character.Character hunter = DomainManager.Character.GetElement_Objects(hunterId);
			Settlement settlement = DomainManager.Organization.GetSettlement(settlementId);
			EventHelper.MoveIntelligentCharacter(hunter, settlement.GetLocation());
			Sect sect = settlement as Sect;
			bool flag = sect == null;
			if (!flag)
			{
				sect.RemoveBounty(EventHelper.Domain.MainThreadDataContext, teammateId);
				DataContext context = EventHelper.Domain.MainThreadDataContext;
				SettlementPrisonEventEffectItem effectCfg = SettlementPrisonEventEffect.Instance[8];
				ValueTuple<CharacterSet, CharacterSet, CharacterSet, CharacterSet> affectedCharInfo = DomainManager.Organization.ApplySettlementPrisonEventEffect(context, effectCfg, settlementId);
				LifeRecordCollection lifeRecordCollection = DomainManager.LifeRecord.GetLifeRecordCollection();
				int currDate = DomainManager.World.GetCurrDate();
				GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
				int taiwuCharId = taiwu.GetId();
				foreach (int charId in affectedCharInfo.Item1.GetCollection())
				{
					bool becomeEnemy = affectedCharInfo.Item2.Contains(charId);
					bool disapproveTaiwu = affectedCharInfo.Item4.Contains(charId);
					bool flag2 = becomeEnemy && disapproveTaiwu;
					if (flag2)
					{
						lifeRecordCollection.AddResistArrestIntrudePrisonCancelSupportMakeEnemyNpc(charId, currDate, taiwuCharId, teammateId, settlementId);
					}
					else
					{
						bool flag3 = becomeEnemy;
						if (flag3)
						{
							lifeRecordCollection.AddResistArresPrisonBreakIntrudePrisonMakeEnemyOthersNpc(charId, currDate, taiwuCharId, teammateId, settlementId);
						}
						else
						{
							bool flag4 = disapproveTaiwu;
							if (flag4)
							{
								lifeRecordCollection.AddResistArresPrisonBreakIntrudePrisonCancelSupportNpc(charId, currDate, taiwuCharId, teammateId, settlementId);
							}
						}
					}
				}
				bool flag5 = affectedCharInfo.Item1.GetCount() != 0;
				if (flag5)
				{
					int becomeEnemyCount = affectedCharInfo.Item2.GetCount();
					int disapproveCount = affectedCharInfo.Item4.GetCount();
					bool flag6 = becomeEnemyCount > 0 && disapproveCount > 0;
					if (flag6)
					{
						lifeRecordCollection.AddResistArresPrisonBreakIntrudePrisonCancelSupportMakeEnemyTaiwu(taiwuCharId, currDate, teammateId, settlementId);
					}
					else
					{
						bool flag7 = becomeEnemyCount > 0;
						if (flag7)
						{
							lifeRecordCollection.AddResistArresPrisonBreakIntrudePrisonMakeEnemyOthersTaiwu(taiwuCharId, currDate, teammateId, settlementId);
						}
						else
						{
							bool flag8 = disapproveCount > 0;
							if (flag8)
							{
								lifeRecordCollection.AddResistArresPrisonBreakIntrudePrisonCancelSupportTaiwu(taiwuCharId, currDate, teammateId, settlementId);
							}
						}
					}
				}
				LifeRecordCollection collection = EventHelper.GetLifeRecordCollection();
				collection.AddResistArresEngageInBattleTaiwu(taiwu.GetId(), EventHelper.GetGameDate(), hunterId, teammateId, taiwu.GetLocation(), settlementId);
				collection.AddArrestFailedCaptor(hunterId, EventHelper.GetGameDate(), teammateId, taiwu.GetLocation(), settlementId, 886);
				GameData.Domains.Character.Character teammate = DomainManager.Character.GetElement_Objects(teammateId);
				SettlementPrisonEventEffectItem config = SettlementPrisonEventEffect.Instance[8];
				EventHelper.ChangeFavorabilityOptional(teammate, taiwu, (short)config.ChangeFavorTeammate, 3);
			}
		}

		// Token: 0x06002151 RID: 8529 RVA: 0x001AA660 File Offset: 0x001A8860
		public static bool TaiwuWantedInteracted(int charId)
		{
			return DomainManager.Extra.TaiwuWantedInteracted(charId);
		}

		// Token: 0x06002152 RID: 8530 RVA: 0x001AA680 File Offset: 0x001A8880
		private static bool CanTriggerTaiwuWantedInteraction(int charId, EventArgBox argBox)
		{
			GameData.Domains.Character.Character character;
			bool flag = DomainManager.Character.TryGetElement_Objects(charId, out character);
			bool result;
			if (flag)
			{
				bool flag2 = character.GetOrganizationInfo().OrgTemplateId == 16;
				if (flag2)
				{
					result = false;
				}
				else
				{
					sbyte sectTemplateId = EventHelper.GetCharacterSettlementStateSectTemplateId(charId);
					bool flag3 = sectTemplateId < 0;
					if (flag3)
					{
						result = false;
					}
					else
					{
						short settlementId = DomainManager.Organization.GetSettlementIdByOrgTemplateId(sectTemplateId);
						argBox.Set("SettlementId", settlementId);
						result = EventHelper.IsTaiwuSectFugitive(settlementId);
					}
				}
			}
			else
			{
				result = false;
			}
			return result;
		}

		// Token: 0x06002153 RID: 8531 RVA: 0x001AA6FC File Offset: 0x001A88FC
		private static bool CanTriggerHuntFugitiveInteraction(GameData.Domains.Character.Character character)
		{
			BasePrioritizedAction action;
			HuntFugitiveAction huntFugitiveAction;
			bool flag;
			if (DomainManager.Character.TryGetCharacterPrioritizedAction(character.GetId(), out action))
			{
				huntFugitiveAction = (action as HuntFugitiveAction);
				flag = (huntFugitiveAction != null);
			}
			else
			{
				flag = false;
			}
			bool flag2 = flag;
			bool result;
			if (flag2)
			{
				bool flag3 = !huntFugitiveAction.CheckValid(character);
				result = (!flag3 && huntFugitiveAction.Target.TargetCharId == DomainManager.Taiwu.GetTaiwuCharId());
			}
			else
			{
				result = false;
			}
			return result;
		}

		// Token: 0x06002154 RID: 8532 RVA: 0x001AA767 File Offset: 0x001A8967
		public static void TaiwuWantedAddInteracted(int charId)
		{
			DomainManager.Extra.TaiwuWantedAddInteracted(EventHelper.Domain.MainThreadDataContext, charId);
		}

		// Token: 0x06002155 RID: 8533 RVA: 0x001AA780 File Offset: 0x001A8980
		private static void TaiwuWantedWinEffect(int hunterId, EventArgBox argBox, bool addLifeRecord)
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			int taiwuCharId = taiwu.GetId();
			short settlementId = -1;
			argBox.Get("SettlementId", ref settlementId);
			GameData.Domains.Character.Character hunter = DomainManager.Character.GetElement_Objects(hunterId);
			Settlement settlement = DomainManager.Organization.GetSettlement(settlementId);
			EventHelper.MoveIntelligentCharacter(hunter, settlement.GetLocation());
			Sect sect = settlement as Sect;
			bool flag = sect == null;
			if (!flag)
			{
				sect.RemoveBounty(EventHelper.Domain.MainThreadDataContext, taiwuCharId);
				bool flag2 = !addLifeRecord;
				if (!flag2)
				{
					DataContext context = EventHelper.Domain.MainThreadDataContext;
					SettlementPrisonEventEffectItem effectCfg = SettlementPrisonEventEffect.Instance[16];
					ValueTuple<CharacterSet, CharacterSet, CharacterSet, CharacterSet> affectedCharInfo = DomainManager.Organization.ApplySettlementPrisonEventEffect(context, effectCfg, settlementId);
					EventHelper.ChangeFavorabilityOptional(hunter, taiwu, (short)effectCfg.ChangeFavorCaptor, 3);
					LifeRecordCollection lifeRecordCollection = DomainManager.LifeRecord.GetLifeRecordCollection();
					int currDate = DomainManager.World.GetCurrDate();
					foreach (int charId in affectedCharInfo.Item1.GetCollection())
					{
						bool becomeEnemy = affectedCharInfo.Item2.Contains(charId);
						bool disapproveTaiwu = affectedCharInfo.Item4.Contains(charId);
						bool flag3 = becomeEnemy && disapproveTaiwu;
						if (flag3)
						{
							lifeRecordCollection.AddResistArrestIntrudePrisonCancelSupportMakeEnemyNpcGuard(charId, currDate, taiwuCharId, settlementId);
						}
						else
						{
							bool flag4 = becomeEnemy;
							if (flag4)
							{
								lifeRecordCollection.AddResistArresPrisonBreakIntrudePrisonMakeEnemyOthersNpcGuard(charId, currDate, taiwuCharId, settlementId);
							}
							else
							{
								bool flag5 = disapproveTaiwu;
								if (flag5)
								{
									lifeRecordCollection.AddResistArresPrisonBreakIntrudePrisonCancelSupportNpcGuard(charId, currDate, taiwuCharId, settlementId);
								}
							}
						}
					}
					bool flag6 = affectedCharInfo.Item1.GetCount() != 0;
					if (flag6)
					{
						int becomeEnemyCount = affectedCharInfo.Item2.GetCount();
						int disapproveCount = affectedCharInfo.Item4.GetCount();
						bool flag7 = becomeEnemyCount > 0 && disapproveCount > 0;
						if (flag7)
						{
							lifeRecordCollection.AddResistArresPrisonBreakIntrudePrisonCancelSupportMakeEnemyTaiwuWanted(taiwuCharId, currDate, settlementId);
						}
						else
						{
							bool flag8 = becomeEnemyCount > 0;
							if (flag8)
							{
								lifeRecordCollection.AddResistArresPrisonBreakIntrudePrisonCancelSupportTaiwuWanted(taiwuCharId, currDate, settlementId);
							}
							else
							{
								bool flag9 = disapproveCount > 0;
								if (flag9)
								{
									lifeRecordCollection.AddResistArresPrisonBreakIntrudePrisonMakeEnemyOthersTaiwuWanted(taiwuCharId, currDate, settlementId);
								}
							}
						}
					}
				}
			}
		}

		// Token: 0x06002156 RID: 8534 RVA: 0x001AA9A0 File Offset: 0x001A8BA0
		public static void TaiwuWantedFightWinEffect(int hunterId, EventArgBox argBox)
		{
			short settlementId = -1;
			argBox.Get("SettlementId", ref settlementId);
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			EventHelper.TaiwuWantedWinEffect(hunterId, argBox, true);
			LifeRecordCollection collection = EventHelper.GetLifeRecordCollection();
			collection.AddArrestFailedCaptor(hunterId, EventHelper.GetGameDate(), taiwu.GetId(), taiwu.GetLocation(), settlementId, 1035);
		}

		// Token: 0x06002157 RID: 8535 RVA: 0x001AA9F8 File Offset: 0x001A8BF8
		public static void TaiwuWantedLifeSkillCombatWinEffect(int hunterId, EventArgBox argBox)
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			int taiwuCharId = taiwu.GetId();
			EventHelper.TaiwuWantedWinEffect(hunterId, argBox, false);
			LifeRecordCollection collection = EventHelper.GetLifeRecordCollection();
			collection.AddLifeSkillBattleWinAndAvoidArrestTaiwu(taiwuCharId, EventHelper.GetGameDate(), hunterId);
		}

		// Token: 0x06002158 RID: 8536 RVA: 0x001AAA35 File Offset: 0x001A8C35
		public static void TaiwuWantedBribeEffect(int hunterId, EventArgBox argBox)
		{
			EventHelper.TaiwuWantedWinEffect(hunterId, argBox, false);
		}

		// Token: 0x06002159 RID: 8537 RVA: 0x001AAA44 File Offset: 0x001A8C44
		public static void TaiwuWantedFightLoseEffect(int hunterId, EventArgBox argBox)
		{
			short settlementId = -1;
			argBox.Get("SettlementId", ref settlementId);
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			LifeRecordCollection collection = EventHelper.GetLifeRecordCollection();
			collection.AddArrestedSuccessfullyCaptor(hunterId, EventHelper.GetGameDate(), taiwu.GetId(), taiwu.GetLocation(), settlementId, 1036);
		}

		// Token: 0x0600215A RID: 8538 RVA: 0x001AAA94 File Offset: 0x001A8C94
		public static void TaiwuWantedLifeSkillCombatLoseEffect(int hunterId, EventArgBox argBox)
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			LifeRecordCollection collection = EventHelper.GetLifeRecordCollection();
			collection.AddLifeSkillBattleLoseAndWasArrestedTaiwu(taiwu.GetId(), EventHelper.GetGameDate(), hunterId);
		}

		// Token: 0x0600215B RID: 8539 RVA: 0x001AAAC8 File Offset: 0x001A8CC8
		public unsafe static void TaiwuWantedSectPunished(EventArgBox argBox, bool confess)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			int taiwuCharId = taiwu.GetId();
			short settlementId = -1;
			argBox.Get("SettlementId", ref settlementId);
			Settlement settlement = DomainManager.Organization.GetSettlement(settlementId);
			Sect sect = settlement as Sect;
			bool flag = sect == null;
			if (!flag)
			{
				SettlementBounty bounty = sect.Prison.GetBounty(taiwuCharId);
				sect.RemoveBounty(context, taiwuCharId);
				sbyte severity = bounty.PunishmentSeverity;
				sbyte stateTemplateId = DomainManager.Map.GetStateTemplateIdByAreaId(settlement.GetLocation().AreaId);
				DomainManager.Extra.TryGetCustomizedCityPunishmentSeverity(stateTemplateId, true, bounty.PunishmentType, ref severity);
				sbyte orgTemplateId = settlement.GetOrgTemplateId();
				PunishmentSeverityItem config = PunishmentSeverity.Instance[severity];
				LifeRecordCollection lifeRecordCollection = DomainManager.LifeRecord.GetLifeRecordCollection();
				int date = DomainManager.World.GetCurrDate();
				int authority = taiwu.GetResource(7);
				int commonAuthorityDelta = config.CommonAuthorityDelta;
				if (confess)
				{
					commonAuthorityDelta /= 2;
				}
				int left = authority - commonAuthorityDelta;
				int spiritualDebtDelta = config.CommonSpiritualDebtDelta;
				if (confess)
				{
					spiritualDebtDelta /= 2;
				}
				bool flag2 = left >= 0;
				int authorityDelta;
				if (flag2)
				{
					authorityDelta = commonAuthorityDelta;
				}
				else
				{
					authorityDelta = authority;
					spiritualDebtDelta -= left / 10;
				}
				EventHelper.ChangeRoleResource(taiwu, 7, -authorityDelta, true);
				DomainManager.Extra.ChangeAreaSpiritualDebt(context, settlement.GetLocation().AreaId, -spiritualDebtDelta, true, true);
				lifeRecordCollection.AddTaiwuPunishmentTongyong(taiwuCharId, date, settlementId, authorityDelta, settlement.GetLocation(), spiritualDebtDelta / 10);
				switch (orgTemplateId)
				{
				case 1:
				{
					short delta = config.ShaolinDelta;
					HashSet<int> relatedCharIds = new HashSet<int>();
					DomainManager.Character.GetAllRelatedCharIds(taiwuCharId, relatedCharIds, true);
					foreach (int charId in relatedCharIds)
					{
						DomainManager.Character.ChangeFavorabilityTendToZero(context, charId, taiwuCharId, (int)delta);
					}
					lifeRecordCollection.AddTaiwuPunishmentShaolin(taiwuCharId, date);
					break;
				}
				case 2:
				{
					sbyte duration = EventHelper.AddTaiwuPunishmentFeature(orgTemplateId, severity);
					lifeRecordCollection.AddTaiwuPunishmentEmei(taiwuCharId, date, (int)duration);
					break;
				}
				case 3:
				{
					taiwu.SetCurrNeili(0, context);
					NeiliAllocation neiliAllocation = default(NeiliAllocation);
					neiliAllocation.Initialize();
					taiwu.SetBaseNeiliAllocation(neiliAllocation, context);
					sbyte duration2 = EventHelper.AddTaiwuPunishmentFeature(orgTemplateId, severity);
					lifeRecordCollection.AddTaiwuPunishmentBaihua(taiwuCharId, date, (int)duration2);
					break;
				}
				case 4:
				{
					sbyte duration3 = EventHelper.AddTaiwuPunishmentFeature(orgTemplateId, severity);
					lifeRecordCollection.AddTaiwuPunishmentWudang(taiwuCharId, date, (int)duration3);
					break;
				}
				case 5:
				{
					List<int> delta2 = config.YuanshanDelta;
					taiwu.ChangeHappiness(context, delta2[0]);
					taiwu.ChangeXiangshuInfection(context, delta2[1]);
					lifeRecordCollection.AddTaiwuPunishmentYuanshan(taiwuCharId, date);
					break;
				}
				case 6:
				{
					sbyte duration4 = EventHelper.AddTaiwuPunishmentFeature(orgTemplateId, severity);
					lifeRecordCollection.AddTaiwuPunishmentShingXiang(taiwuCharId, date, (int)duration4);
					break;
				}
				case 7:
				{
					sbyte duration5 = EventHelper.AddTaiwuPunishmentFeature(orgTemplateId, severity);
					lifeRecordCollection.AddTaiwuPunishmentRanShan(taiwuCharId, date, (int)duration5);
					break;
				}
				case 8:
				{
					sbyte duration6 = EventHelper.AddTaiwuPunishmentFeature(orgTemplateId, severity);
					lifeRecordCollection.AddTaiwuPunishmentXuanNv(taiwuCharId, date, (int)duration6);
					break;
				}
				case 9:
					taiwu.ChangeCurrAge(context, (int)config.ZhujianDelta);
					lifeRecordCollection.AddTaiwuPunishmentZhuJian(taiwuCharId, date);
					break;
				case 10:
				{
					IntPtr intPtr = stackalloc byte[(UIntPtr)12];
					*intPtr = 8;
					*(intPtr + 2) = 17;
					*(intPtr + (IntPtr)2 * 2) = 26;
					*(intPtr + (IntPtr)3 * 2) = 35;
					*(intPtr + (IntPtr)4 * 2) = 44;
					*(intPtr + (IntPtr)5 * 2) = 53;
					Span<short> span = new Span<short>(intPtr, 6);
					Span<short> poisons = span;
					int count = config.KongsangDelta;
					for (int i = 0; i < count; i++)
					{
						taiwu.ApplyEatingItemInstantEffects(context, 8, *poisons[context.Random.Next(6)], null);
					}
					lifeRecordCollection.AddTaiwuPunishmentKongSang(taiwuCharId, date, count);
					break;
				}
				case 11:
				{
					sbyte duration7 = EventHelper.AddTaiwuPunishmentFeature(orgTemplateId, severity);
					lifeRecordCollection.AddTaiwuPunishmentJinGang(taiwuCharId, date, (int)duration7);
					break;
				}
				case 12:
				{
					int count2 = config.WuxianDelta;
					Span<sbyte> span2 = new Span<sbyte>(stackalloc byte[(UIntPtr)8], 8);
					SpanList<sbyte> wugs = span2;
					for (int j = 0; j < count2; j++)
					{
						sbyte maxSlotCount = taiwu.GetCurrMaxEatingSlotsCount();
						EatingItems eatingItems = *taiwu.GetEatingItems();
						bool flag3 = eatingItems.GetAvailableEatingSlot(maxSlotCount) < 0;
						if (flag3)
						{
							break;
						}
						wugs.Clear();
						for (sbyte wugType = 0; wugType < 8; wugType += 1)
						{
							wugs.Add(wugType);
						}
						for (int k = 0; k < 9; k++)
						{
							ItemKey itemKey = (ItemKey)(*(ref eatingItems.ItemKeys.FixedElementField + (IntPtr)k * 8));
							bool flag4 = EatingItems.IsWug(itemKey);
							if (flag4)
							{
								ref wugs.Remove(Config.Medicine.Instance[itemKey.TemplateId].WugType);
							}
						}
						bool flag5 = wugs.Count == 0;
						if (flag5)
						{
							break;
						}
						sbyte randWug = wugs.GetRandom(context.Random);
						short wugTemplateId = ItemDomain.GetWugTemplateId(randWug, 4);
						taiwu.AddWug(context, wugTemplateId);
					}
					lifeRecordCollection.AddTaiwuPunishmentWuXian(taiwuCharId, date, count2);
					break;
				}
				case 13:
				{
					sbyte duration8 = EventHelper.AddTaiwuPunishmentFeature(orgTemplateId, severity);
					lifeRecordCollection.AddTaiwuPunishmentJieQing(taiwuCharId, date, (int)duration8);
					break;
				}
				case 14:
				{
					sbyte duration9 = EventHelper.AddTaiwuPunishmentFeature(orgTemplateId, severity);
					lifeRecordCollection.AddTaiwuPunishmentFuLong(taiwuCharId, date, (int)duration9);
					break;
				}
				case 15:
				{
					int count3 = config.XuehouDelta;
					IntPtr intPtr2 = stackalloc byte[(UIntPtr)7];
					cpblk(intPtr2, ref <PrivateImplementationDetails>.57355AC3303C148F11AEF7CB179456B9232CDE33A818DFDA2C2FCB9325749A6B, 7);
					Span<sbyte> span2 = new Span<sbyte>(intPtr2, 7);
					Span<sbyte> bodyPartTypes = span2;
					CollectionUtils.Shuffle<sbyte>(context.Random, bodyPartTypes, 7);
					for (int l = 0; l < count3; l++)
					{
						sbyte bodyPart = *bodyPartTypes[l];
						bool isInner = context.Random.NextBool();
						short featureId = isInner ? BreakFeatureHelper.BodyPart2HurtFeature[bodyPart] : BreakFeatureHelper.BodyPart2CrashFeature[bodyPart];
						taiwu.ChangeInjury(context, bodyPart, isInner, 4);
						bool flag6 = !taiwu.GetFeatureIds().Contains(featureId);
						if (flag6)
						{
							taiwu.AddFeature(context, featureId, false);
							DomainManager.SpecialEffect.Add(context, taiwu.GetId(), SpecialEffectDomain.BreakBodyFeatureEffectClassName[featureId]);
						}
						taiwu.AddFeature(context, featureId, false);
					}
					lifeRecordCollection.AddTaiwuPunishmentXueHou(taiwuCharId, date, count3);
					break;
				}
				}
			}
		}

		// Token: 0x0600215C RID: 8540 RVA: 0x001AB16C File Offset: 0x001A936C
		public static sbyte AddTaiwuPunishmentFeature(sbyte orgTemplateId, sbyte severity)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			int taiwuId = taiwu.GetId();
			List<short> group = Organization.Instance[orgTemplateId].TaiwuPunishementFeature;
			bool flag = orgTemplateId == 2 || orgTemplateId == 7;
			short featureId = flag ? group[0] : group[(int)severity];
			sbyte duration = CharacterFeature.Instance[group[(int)severity]].Duration;
			int date;
			bool flag2 = DomainManager.Extra.TryGetTemporaryFeatureExpireDate(taiwuId, featureId, out date);
			if (flag2)
			{
				DomainManager.Extra.RegisterCharacterTemporaryFeature(context, taiwuId, featureId, date + (int)duration);
			}
			else
			{
				taiwu.AddFeature(context, featureId, false);
				DomainManager.Extra.RegisterCharacterTemporaryFeature(context, taiwuId, featureId, DomainManager.World.GetCurrDate() + (int)duration);
			}
			return duration;
		}

		// Token: 0x0600215D RID: 8541 RVA: 0x001AB248 File Offset: 0x001A9448
		public static bool TaiwuCanGetTaught(GameData.Domains.Character.Character arg0)
		{
			return DomainManager.Taiwu.IsTaiwuAbleToGetTaught(arg0);
		}

		// Token: 0x0600215E RID: 8542 RVA: 0x001AB268 File Offset: 0x001A9468
		public static void SetGuardCombat(int level)
		{
			EventArgBox argBox = DomainManager.TaiwuEvent.GetGlobalEventArgumentBox();
			argBox.Set("IsGuardCombat", true);
			argBox.Set("GuardCombatLevel", level);
		}

		// Token: 0x0600215F RID: 8543 RVA: 0x001AB29B File Offset: 0x001A949B
		public static int GetGuardCombatLevel()
		{
			return DomainManager.TaiwuEvent.GetGlobalEventArgumentBox().GetInt("GuardCombatLevel");
		}

		// Token: 0x06002160 RID: 8544 RVA: 0x001AB2B1 File Offset: 0x001A94B1
		public static void RemoveGuardCombatLevel()
		{
			DomainManager.TaiwuEvent.GetGlobalEventArgumentBox().Remove<int>("GuardCombatLevel");
		}

		// Token: 0x06002161 RID: 8545 RVA: 0x001AB2C8 File Offset: 0x001A94C8
		public static int CreateNonIntelligentGuard(Settlement settlement, sbyte gradeOffset, sbyte treasuryLayer = -1)
		{
			return (settlement != null) ? settlement.CreateNonIntelligentGuard(EventHelper.Domain.MainThreadDataContext, (treasuryLayer < 0) ? ((sbyte)Math.Clamp(EventHelper.GetGuardCombatLevel() - 1, 0, 2)) : treasuryLayer, gradeOffset) : -1;
		}

		// Token: 0x06002162 RID: 8546 RVA: 0x001AB2F7 File Offset: 0x001A94F7
		public static int CreateNonIntelligentGuard(short settlementId, sbyte gradeOffset, sbyte treasuryLayer = -1)
		{
			return EventHelper.CreateNonIntelligentGuard(DomainManager.Organization.GetSettlement(settlementId), gradeOffset, treasuryLayer);
		}

		// Token: 0x06002163 RID: 8547 RVA: 0x001AB30C File Offset: 0x001A950C
		public static void StartSelectProfessionItem(string itemNameKey, EventArgBox argBox)
		{
			EventSelectItemData selectItemData;
			bool flag = !argBox.Get<EventSelectItemData>("SelectItemInfo", out selectItemData);
			if (flag)
			{
				selectItemData = new EventSelectItemData();
				argBox.Set("SelectItemInfo", selectItemData);
			}
			SelectItemFilter filter = default(SelectItemFilter);
			filter.Key = itemNameKey;
			filter.DisplayDataFilterId = 0;
			filter.FilterTemplateId = -1;
			for (short templateId = 237; templateId <= 242; templateId += 1)
			{
				ItemDisplayData itemDisplayData = new ItemDisplayData(12, templateId);
				selectItemData.CanSelectItemList.Add(itemDisplayData);
			}
			for (short templateId2 = 343; templateId2 <= 354; templateId2 += 1)
			{
				ItemDisplayData itemDisplayData2 = new ItemDisplayData(12, templateId2);
				selectItemData.CanSelectItemList.Add(itemDisplayData2);
			}
			selectItemData.FilterList.Add(filter);
		}

		// Token: 0x06002164 RID: 8548 RVA: 0x001AB3E8 File Offset: 0x001A95E8
		[Obsolete]
		public static bool CheckSeniorityIsSatisfyByGrade(GameData.Domains.Character.Character character)
		{
			sbyte grade = character.GetOrganizationInfo().Grade;
			ProfessionData professionData = EventHelper.GetCurrentProfessionData();
			bool flag = professionData == null;
			return !flag && (int)grade <= professionData.GetSeniorityOrgGrade();
		}

		// Token: 0x06002165 RID: 8549 RVA: 0x001AB424 File Offset: 0x001A9624
		public static bool CheckSeniorityIsSatisfyByGradeByProfession(GameData.Domains.Character.Character character, int professionId)
		{
			sbyte grade = character.GetOrganizationInfo().Grade;
			ProfessionData professionData = EventHelper.GetProfessionData(professionId);
			bool flag = professionData == null;
			return !flag && (int)grade <= professionData.GetSeniorityOrgGrade();
		}

		// Token: 0x06002166 RID: 8550 RVA: 0x001AB464 File Offset: 0x001A9664
		public static bool CheckFavorabilityIsSatisfy(GameData.Domains.Character.Character character)
		{
			sbyte behaviorType = character.GetBehaviorType();
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			sbyte favorabilityType = EventHelper.GetFavorabilityType(character, taiwu);
			return favorabilityType >= EventHelper.GetProfessionFavorabilityType(behaviorType);
		}

		// Token: 0x06002167 RID: 8551 RVA: 0x001AB49C File Offset: 0x001A969C
		public static sbyte GetProfessionFavorabilityType(sbyte behaviorType)
		{
			bool flag = behaviorType == 0 || behaviorType == 1;
			sbyte result;
			if (flag)
			{
				result = 3;
			}
			else
			{
				bool flag2 = behaviorType == 2;
				if (flag2)
				{
					result = 4;
				}
				else
				{
					bool flag3 = behaviorType == 3 || behaviorType == 4;
					if (flag3)
					{
						result = 5;
					}
					else
					{
						result = 3;
					}
				}
			}
			return result;
		}

		// Token: 0x06002168 RID: 8552 RVA: 0x001AB4E4 File Offset: 0x001A96E4
		public static bool CheckResourceIsEnoughToUseSkill(GameData.Domains.Character.Character character, short templateId)
		{
			bool noProfessionSkillCost = DomainManager.Extra.NoProfessionSkillCost;
			bool result;
			if (noProfessionSkillCost)
			{
				result = true;
			}
			else
			{
				List<ResourceInfo> resourcesCost = ProfessionSkill.Instance[(int)templateId].ResourcesCost;
				for (int i = 0; i < resourcesCost.Count; i++)
				{
					bool flag = !character.CheckResources(EventHelper.Domain.MainThreadDataContext, resourcesCost[i].ResourceType, resourcesCost[i].ResourceCount);
					if (flag)
					{
						return false;
					}
				}
				result = true;
			}
			return result;
		}

		// Token: 0x06002169 RID: 8553 RVA: 0x001AB568 File Offset: 0x001A9768
		public static bool CheckResourceIsEnough(GameData.Domains.Character.Character character, sbyte type, int value)
		{
			return character.CheckResources(EventHelper.Domain.MainThreadDataContext, type, value);
		}

		// Token: 0x0600216A RID: 8554 RVA: 0x001AB58C File Offset: 0x001A978C
		public static List<ValueTuple<ItemKey, int>> InitialSelectProfession(int professionTemplateId)
		{
			int baseDelta = GameData.Domains.Taiwu.Profession.SharedMethods.GetSkillUnlockSeniority(GameData.Domains.Taiwu.Profession.SharedMethods.GetSkillId(professionTemplateId, 1));
			DomainManager.Extra.ChangeProfessionSeniority(EventHelper.Domain.MainThreadDataContext, professionTemplateId, baseDelta, false, false);
			List<ItemKey> gotItemKeysList = new List<ItemKey>();
			GameData.Domains.Character.Character taiwuChar = DomainManager.Taiwu.GetTaiwu();
			switch (professionTemplateId)
			{
			case 0:
				gotItemKeysList.Add(EventHelper.AddItemToRole(taiwuChar, 12, 237, 1, -1));
				break;
			case 1:
				gotItemKeysList.Add(EventHelper.AddItemToRole(taiwuChar, 12, 238, 1, -1));
				break;
			case 2:
				gotItemKeysList.Add(EventHelper.AddItemToRole(taiwuChar, 12, 239, 1, -1));
				break;
			case 3:
				gotItemKeysList.Add(EventHelper.AddItemToRole(taiwuChar, 12, 343, 1, -1));
				break;
			case 4:
				gotItemKeysList.Add(EventHelper.AddItemToRole(taiwuChar, 12, 344, 1, -1));
				break;
			case 5:
				gotItemKeysList.Add(EventHelper.AddItemToRole(taiwuChar, 12, 345, 1, -1));
				break;
			case 6:
				gotItemKeysList.Add(EventHelper.AddItemToRole(taiwuChar, 12, 346, 1, -1));
				break;
			case 7:
				gotItemKeysList.Add(EventHelper.AddItemToRole(taiwuChar, 12, 347, 1, -1));
				break;
			case 8:
				gotItemKeysList.Add(EventHelper.AddItemToRole(taiwuChar, 12, 348, 1, -1));
				break;
			case 9:
				gotItemKeysList.Add(EventHelper.AddItemToRole(taiwuChar, 12, 240, 1, -1));
				break;
			case 10:
				gotItemKeysList.Add(EventHelper.AddItemToRole(taiwuChar, 12, 241, 1, -1));
				break;
			case 11:
				gotItemKeysList.Add(EventHelper.AddItemToRole(taiwuChar, 12, 242, 1, -1));
				break;
			case 12:
				gotItemKeysList.Add(EventHelper.AddItemToRole(taiwuChar, 12, 349, 1, -1));
				break;
			case 13:
				gotItemKeysList.Add(EventHelper.AddItemToRole(taiwuChar, 12, 350, 1, -1));
				break;
			case 14:
				gotItemKeysList.Add(EventHelper.AddItemToRole(taiwuChar, 12, 351, 1, -1));
				break;
			case 15:
				gotItemKeysList.Add(EventHelper.AddItemToRole(taiwuChar, 12, 352, 1, -1));
				break;
			case 16:
				gotItemKeysList.Add(EventHelper.AddItemToRole(taiwuChar, 12, 353, 1, -1));
				break;
			case 17:
				gotItemKeysList.Add(EventHelper.AddItemToRole(taiwuChar, 12, 354, 1, -1));
				break;
			}
			return gotItemKeysList.ConvertAll<ValueTuple<ItemKey, int>>((ItemKey e) => new ValueTuple<ItemKey, int>(e, 1));
		}

		// Token: 0x0600216B RID: 8555 RVA: 0x001AB83C File Offset: 0x001A9A3C
		[Obsolete]
		public static ProfessionData GetCurrentProfessionData()
		{
			return DomainManager.Extra.GetCurrentProfessionData();
		}

		// Token: 0x0600216C RID: 8556 RVA: 0x001AB858 File Offset: 0x001A9A58
		public static ProfessionData GetProfessionData(int professionId)
		{
			return DomainManager.Extra.GetProfessionData(professionId);
		}

		// Token: 0x0600216D RID: 8557 RVA: 0x001AB878 File Offset: 0x001A9A78
		public static bool IsProfessionalSkillUnlocked(int skillTemplateId)
		{
			return DomainManager.Extra.IsProfessionalSkillUnlocked(skillTemplateId);
		}

		// Token: 0x0600216E RID: 8558 RVA: 0x001AB898 File Offset: 0x001A9A98
		public static bool IsProfessionalSkillUnlockedAndEquipped(int skillTemplateId)
		{
			return DomainManager.Extra.IsProfessionalSkillUnlockedAndEquipped(skillTemplateId);
		}

		// Token: 0x0600216F RID: 8559 RVA: 0x001AB8B8 File Offset: 0x001A9AB8
		public static void ConfirmSkillExecute(string afterEvent, EventArgBox argBox)
		{
			int skillId = argBox.GetInt("TemplateId");
			int charId = 0;
			bool isSuccess = false;
			bool isExtraordinary = false;
			bool skipAnimation = false;
			ItemKey itemKey = ItemKey.Invalid;
			bool skipConfirm = false;
			bool flag = argBox.Contains<int>("SelectedCharId");
			if (flag)
			{
				charId = argBox.GetInt("SelectedCharId");
			}
			bool flag2 = argBox.Contains<bool>("IsSuccess");
			if (flag2)
			{
				isSuccess = argBox.GetBool("IsSuccess");
			}
			bool flag3 = argBox.Contains<bool>("IsExtraordinary");
			if (flag3)
			{
				isExtraordinary = argBox.GetBool("IsExtraordinary");
			}
			bool flag4 = argBox.Contains<bool>("SkipAnimation");
			if (flag4)
			{
				skipAnimation = argBox.GetBool("SkipAnimation");
			}
			bool flag5 = argBox.Contains<ItemKey>("SelectItemKey");
			if (flag5)
			{
				itemKey = argBox.Get<ItemKey>("SelectItemKey");
			}
			bool flag6 = argBox.Contains<bool>("SkipConfirm");
			if (flag6)
			{
				skipConfirm = argBox.GetBool("SkipConfirm");
			}
			ProfessionSkillArg professionSkillArg = new ProfessionSkillArg
			{
				ProfessionId = ProfessionSkill.Instance[skillId].Profession,
				SkillId = skillId,
				CharId = charId,
				IsSuccess = isSuccess,
				IsExtraordinary = isExtraordinary,
				ItemKey = itemKey,
				SkipConfirm = skipConfirm,
				SkipAnimation = skipAnimation
			};
			ProfessionSkillHandle.ConfirmSkillExecuteWithEvent(professionSkillArg, afterEvent, argBox);
		}

		// Token: 0x06002170 RID: 8560 RVA: 0x001ABA00 File Offset: 0x001A9C00
		public static void ConfirmSkillExecuteAndPlayAnim(string afterEvent, EventArgBox argBox)
		{
			int skillId = argBox.GetInt("TemplateId");
			ProfessionSkillArg professionSkillArg = new ProfessionSkillArg
			{
				ProfessionId = ProfessionSkill.Instance[skillId].Profession,
				SkillId = skillId
			};
			GameDataBridge.AddDisplayEvent<ProfessionSkillArg, bool>(DisplayEventType.ConfirmSkillExecuteAndPlayAnim, professionSkillArg, true);
			bool flag = !string.IsNullOrEmpty(afterEvent);
			if (flag)
			{
				EventHelper.AddEventInListenWithActionName(afterEvent, argBox, "ConfirmProfessionSkillExecuteAndAnimComplete");
			}
		}

		// Token: 0x06002171 RID: 8561 RVA: 0x001ABA64 File Offset: 0x001A9C64
		public static void PlaySkillExecuteAnim(string afterEvent, EventArgBox argBox)
		{
			int skillId = argBox.GetInt("TemplateId");
			ProfessionSkillArg professionSkillArg = new ProfessionSkillArg
			{
				ProfessionId = ProfessionSkill.Instance[skillId].Profession,
				SkillId = skillId
			};
			GameDataBridge.AddDisplayEvent<ProfessionSkillArg, bool>(DisplayEventType.ConfirmSkillExecuteAndPlayAnim, professionSkillArg, false);
			bool flag = !string.IsNullOrEmpty(afterEvent);
			if (flag)
			{
				EventHelper.AddEventInListenWithActionName(afterEvent, argBox, "ConfirmProfessionSkillExecuteAndAnimComplete");
			}
		}

		// Token: 0x06002172 RID: 8562 RVA: 0x001ABAC8 File Offset: 0x001A9CC8
		[Obsolete]
		public static void OpenProfessionSkillUnlocked(string afterEvent, EventArgBox argBox)
		{
			int templateId = argBox.GetInt("TemplateId");
			bool flag = DomainManager.Extra.ProfessionSkillUnlockedCache == null;
			if (flag)
			{
				DomainManager.Extra.ProfessionSkillUnlockedCache = new List<int>();
			}
			bool flag2 = DomainManager.Extra.ProfessionSkillUnlockedCache.Contains(templateId);
			if (!flag2)
			{
				DomainManager.Extra.ProfessionSkillUnlockedCache.Add(templateId);
				GameDataBridge.AddDisplayEvent<int>(DisplayEventType.OpenProfessionSkillUnlocked, templateId);
				bool flag3 = !string.IsNullOrEmpty(afterEvent);
				if (flag3)
				{
					EventHelper.AddEventInListenWithActionName(afterEvent, argBox, "OpenProfessionSkillUnlocked");
				}
			}
		}

		// Token: 0x06002173 RID: 8563 RVA: 0x001ABB4C File Offset: 0x001A9D4C
		public static void SetDisableMoving(bool disableMove)
		{
			GameDataBridge.AddDisplayEvent<bool>(DisplayEventType.SetDisableMoving, disableMove);
		}

		// Token: 0x06002174 RID: 8564 RVA: 0x001ABB58 File Offset: 0x001A9D58
		[Obsolete]
		public static sbyte GetSkillExecutedCostTime(int skillIndex)
		{
			ProfessionData professionData = EventHelper.GetCurrentProfessionData();
			bool flag = professionData == null;
			sbyte result;
			if (flag)
			{
				result = 0;
			}
			else
			{
				ProfessionSkillItem skillCfg = professionData.GetSkillConfig(skillIndex);
				result = (sbyte)skillCfg.TimeCost;
			}
			return result;
		}

		// Token: 0x06002175 RID: 8565 RVA: 0x001ABB8C File Offset: 0x001A9D8C
		[Obsolete]
		public static void OnSkillExecutedCostTime(int skillIndex)
		{
			bool noProfessionSkillCost = DomainManager.Extra.NoProfessionSkillCost;
			if (!noProfessionSkillCost)
			{
				ProfessionData professionData = EventHelper.GetCurrentProfessionData();
				bool flag = professionData == null;
				if (!flag)
				{
					ProfessionSkillItem skillCfg = professionData.GetSkillConfig(skillIndex);
					DomainManager.World.AdvanceDaysInMonth(EventHelper.Domain.MainThreadDataContext, (int)skillCfg.TimeCost);
				}
			}
		}

		// Token: 0x06002176 RID: 8566 RVA: 0x001ABBE0 File Offset: 0x001A9DE0
		[Obsolete]
		public static void OnSkillExecutedCoolDown(int skillIndex)
		{
			ProfessionData professionData = EventHelper.GetCurrentProfessionData();
			bool flag = professionData == null;
			if (!flag)
			{
				professionData.OfflineSkillCooldown(skillIndex);
			}
		}

		// Token: 0x06002177 RID: 8567 RVA: 0x001ABC08 File Offset: 0x001A9E08
		public static void OnSkillExecutedCoolDown(int professionId, int skillIndex)
		{
			ProfessionData professionData = EventHelper.GetProfessionData(professionId);
			bool flag = professionData == null;
			if (!flag)
			{
				professionData.OfflineSkillCooldown(skillIndex);
			}
		}

		// Token: 0x06002178 RID: 8568 RVA: 0x001ABC30 File Offset: 0x001A9E30
		[Obsolete]
		public static void OnSkillExecutedAddExp(int skillIndex, bool isSuccess = true, bool cached = false)
		{
			ProfessionData professionData = EventHelper.GetCurrentProfessionData();
			bool flag = professionData == null;
			if (!flag)
			{
				ProfessionSkillItem skillCfg = professionData.GetSkillConfig(skillIndex);
				DomainManager.Extra.ChangeProfessionSeniority(EventHelper.Domain.MainThreadDataContext, professionData.TemplateId, (int)(isSuccess ? skillCfg.Exp : skillCfg.FailExp), true, cached);
				DomainManager.TaiwuEvent.CheckTaiwuStatusImmediately();
			}
		}

		// Token: 0x06002179 RID: 8569 RVA: 0x001ABC90 File Offset: 0x001A9E90
		[Obsolete]
		public static void OnSkillExecutedAddExpSpecial(int value, bool cached = false)
		{
			ProfessionData professionData = EventHelper.GetCurrentProfessionData();
			bool flag = professionData == null;
			if (!flag)
			{
				DomainManager.Extra.ChangeProfessionSeniority(EventHelper.Domain.MainThreadDataContext, professionData.TemplateId, value, true, cached);
				DomainManager.TaiwuEvent.CheckTaiwuStatusImmediately();
			}
		}

		// Token: 0x0600217A RID: 8570 RVA: 0x001ABCD7 File Offset: 0x001A9ED7
		public static void ChangeProfessionSeniority(short professionTemplateId, int value, bool cached = false)
		{
			DomainManager.Extra.ChangeProfessionSeniority(EventHelper.Domain.MainThreadDataContext, (int)professionTemplateId, value, true, cached);
		}

		// Token: 0x0600217B RID: 8571 RVA: 0x001ABCF4 File Offset: 0x001A9EF4
		public static bool TryTriggerAddSeniorityPoint(int formulaTemplateId, int targetId)
		{
			return DomainManager.Extra.TryTriggerAddSeniorityPoint(EventHelper.Domain.MainThreadDataContext, formulaTemplateId, targetId);
		}

		// Token: 0x0600217C RID: 8572 RVA: 0x001ABD1C File Offset: 0x001A9F1C
		public unsafe static bool ProfessionSkillConditionNotSatisfy(int skillTemplateId)
		{
			ProfessionSkillItem skillCfg = ProfessionSkill.Instance[skillTemplateId];
			ProfessionItem professionCfg = Profession.Instance[skillCfg.Profession];
			ProfessionData professionData = DomainManager.Extra.GetProfessionData(professionCfg.TemplateId);
			bool flag = professionData == null;
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				int skillIndex = (professionCfg.ExtraProfessionSkill == skillTemplateId) ? professionCfg.ProfessionSkills.Length : professionCfg.ProfessionSkills.IndexOf(skillTemplateId);
				bool flag2 = professionData.IsSkillCooldown(DomainManager.World.GetCurrDate(), skillIndex);
				if (flag2)
				{
					result = false;
				}
				else
				{
					bool flag3 = !DomainManager.Extra.NoProfessionSkillCost;
					if (flag3)
					{
						GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
						ResourceInts resources = *taiwu.GetResources();
						foreach (ResourceInfo resourceInfo in skillCfg.ResourcesCost)
						{
							bool flag4 = !resources.CheckIsMeet(resourceInfo.ResourceType, resourceInfo.ResourceCount);
							if (flag4)
							{
								return false;
							}
						}
					}
					result = true;
				}
			}
			return result;
		}

		// Token: 0x0600217D RID: 8573 RVA: 0x001ABE48 File Offset: 0x001AA048
		public static bool ProfessionSkillSeniorityNotSatisfy(int skillTemplateId)
		{
			ProfessionSkillItem skillCfg = ProfessionSkill.Instance[skillTemplateId];
			ProfessionItem professionCfg = Profession.Instance[skillCfg.Profession];
			ProfessionData professionData = DomainManager.Extra.GetProfessionData(professionCfg.TemplateId);
			bool flag = professionData == null;
			return !flag && professionData.Seniority >= GameData.Domains.Taiwu.Profession.SharedMethods.GetSkillUnlockSeniority(skillTemplateId);
		}

		// Token: 0x0600217E RID: 8574 RVA: 0x001ABEA8 File Offset: 0x001AA0A8
		[Obsolete]
		public static int GetCurrentProfessionSeniority()
		{
			ProfessionData professionData = EventHelper.GetCurrentProfessionData();
			return professionData.Seniority;
		}

		// Token: 0x0600217F RID: 8575 RVA: 0x001ABEC8 File Offset: 0x001AA0C8
		public static int ProfessionSkillSeniorityNeed(int skillTemplateId)
		{
			ProfessionSkillItem skillCfg = ProfessionSkill.Instance[skillTemplateId];
			ProfessionItem professionCfg = Profession.Instance[skillCfg.Profession];
			ProfessionData professionData = DomainManager.Extra.GetProfessionData(professionCfg.TemplateId);
			bool flag = professionData == null;
			int result;
			if (flag)
			{
				result = -1;
			}
			else
			{
				result = GameData.Domains.Taiwu.Profession.SharedMethods.GetSkillUnlockSeniority(skillTemplateId);
			}
			return result;
		}

		// Token: 0x06002180 RID: 8576 RVA: 0x001ABF1D File Offset: 0x001AA11D
		public static void SetOneShotEventHandled(int oneShotEventType)
		{
			DomainManager.Extra.SetOneShotEventHandled(EventHelper.Domain.MainThreadDataContext, oneShotEventType);
		}

		// Token: 0x06002181 RID: 8577 RVA: 0x001ABF38 File Offset: 0x001AA138
		public static bool IsOneShotEventHandled(int oneShotEventType)
		{
			return DomainManager.Extra.IsOneShotEventHandled(oneShotEventType);
		}

		// Token: 0x06002182 RID: 8578 RVA: 0x001ABF55 File Offset: 0x001AA155
		public static void SetCharacterDisplayName(int charId, string displayName)
		{
			DomainManager.Extra.AssignCharacterCustomDisplayName(EventHelper.Domain.MainThreadDataContext, charId, displayName);
		}

		// Token: 0x06002183 RID: 8579 RVA: 0x001ABF6F File Offset: 0x001AA16F
		[Obsolete]
		public static void ExecuteLiteratiSkill2(sbyte lifeSkillType)
		{
		}

		// Token: 0x06002184 RID: 8580 RVA: 0x001ABF74 File Offset: 0x001AA174
		public static int GetAuthorityByRenameNpc(GameData.Domains.Character.Character character, bool isGood)
		{
			ProfessionData professionData = EventHelper.GetProfessionData(4);
			bool flag = professionData == null;
			int result;
			if (flag)
			{
				result = 0;
			}
			else
			{
				sbyte grade = character.GetOrganizationInfo().Grade;
				int value = (int)(grade + 1) * (50 + 100 * professionData.Seniority / 3000000);
				result = value;
			}
			return result;
		}

		// Token: 0x06002185 RID: 8581 RVA: 0x001ABFC0 File Offset: 0x001AA1C0
		public static string OpenMerchantShop(sbyte merchantType)
		{
			ProfessionData professionData = EventHelper.GetProfessionData(15);
			sbyte level = professionData.GetSeniorityCaravanGrade();
			DomainManager.Merchant.StartTempCaravanAction(merchantType, level, true, false, false, true);
			return Config.MerchantType.Instance[merchantType].Name;
		}

		// Token: 0x06002186 RID: 8582 RVA: 0x001AC002 File Offset: 0x001AA202
		public static void StartMerchantShopAction(string onCompleteEventId = "", EventArgBox argBox = null)
		{
			EventHelper.Domain.SetListenerWithActionName(onCompleteEventId, argBox, "MerchantShopClose");
		}

		// Token: 0x06002187 RID: 8583 RVA: 0x001AC017 File Offset: 0x001AA217
		public static int GetTradeItemMaxGrade()
		{
			return 8;
		}

		// Token: 0x06002188 RID: 8584 RVA: 0x001AC01C File Offset: 0x001AA21C
		public static bool CheckFavoribility(int characterId, sbyte targetLevel)
		{
			short favorability = DomainManager.Character.GetFavorability(characterId, DomainManager.Taiwu.GetTaiwuCharId());
			sbyte favorLevel = FavorabilityType.GetFavorabilityType(favorability);
			return favorLevel >= targetLevel;
		}

		// Token: 0x06002189 RID: 8585 RVA: 0x001AC054 File Offset: 0x001AA254
		public static int GetTradeItemValue(ItemKey itemKey, int amount)
		{
			ProfessionData professionData = EventHelper.GetProfessionData(15);
			int percent = professionData.GetSeniorityTradeCostFactor();
			int price = DomainManager.Item.GetValue(itemKey);
			return amount * price * percent / 100;
		}

		// Token: 0x0600218A RID: 8586 RVA: 0x001AC090 File Offset: 0x001AA290
		public static bool MakeTrade(int charId, ItemKey itemKey, int amount, EventArgBox argBox)
		{
			DataContext context = DomainManager.TaiwuEvent.MainThreadDataContext;
			GameData.Domains.Character.Character charObj = DomainManager.Character.GetElement_Objects(charId);
			GameData.Domains.Character.Character taiwuObj = DomainManager.Taiwu.GetTaiwu();
			int money = DomainManager.Taiwu.GetTaiwu().GetResource(6);
			int finalPrice = EventHelper.GetTradeItemValue(itemKey, amount);
			if (argBox != null)
			{
				argBox.Set("ConchShip_PresetKey_TradeItemPrice", finalPrice);
			}
			bool flag = money < finalPrice;
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				EventHelper.ChangeRoleResource(charObj, 6, finalPrice, true);
				EventHelper.RemoveInventoryOrEquipItem(charObj, itemKey, amount, false);
				EventHelper.ChangeRoleResource(taiwuObj, 6, -finalPrice, true);
				taiwuObj.AddInventoryItem(context, itemKey, amount, false);
				int favorabilityChange = (int)(-(int)DomainManager.Item.GetBaseItem(itemKey).GetHappinessChange());
				EventHelper.ChangeFavorabilityOptional(charObj, taiwuObj, (short)favorabilityChange, 3);
				int date = DomainManager.World.GetCurrDate();
				Location location = taiwuObj.GetLocation();
				DomainManager.LifeRecord.GetLifeRecordCollection().AddForcefulPurchase(taiwuObj.GetId(), date, charId, location, finalPrice, itemKey.ItemType, itemKey.TemplateId);
				int value = DomainManager.Item.GetValue(itemKey);
				int seniority = ProfessionFormulaImpl.Calculate(97, value);
				DomainManager.Extra.ChangeProfessionSeniority(context, 15, seniority, true, false);
				result = true;
			}
			return result;
		}

		// Token: 0x0600218B RID: 8587 RVA: 0x001AC1BC File Offset: 0x001AA3BC
		[Obsolete]
		public static int GetMerchantItem(out string merchantName, out Inventory resultInventory, EventArgBox argBox)
		{
			resultInventory = new Inventory();
			DataContext context = DomainManager.TaiwuEvent.MainThreadDataContext;
			merchantName = null;
			List<int> caravanIdList = DomainManager.Merchant.GetTaiwuLocationMaxLevelCaravanIdList();
			bool flag = caravanIdList == null || caravanIdList.Count == 0;
			int result;
			if (flag)
			{
				argBox.Set("ConchShip_PresetKey_CaravanCount", 0);
				argBox.Set("ConchShip_PresetKey_CaravanIndex", 0);
				argBox.Set("ConchShip_PresetKey_CaravanPresentCount", 0);
				result = 0;
			}
			else
			{
				int caravanPresentCount = argBox.GetInt("ConchShip_PresetKey_CaravanPresentCount");
				int caravanIndex = argBox.GetInt("ConchShip_PresetKey_CaravanIndex");
				int caravanId = caravanIdList[caravanIndex];
				argBox.Set("CaravanId", caravanId);
				MerchantData merchantData = DomainManager.Merchant.GetCaravanMerchantData(EventHelper.Domain.MainThreadDataContext, caravanId);
				merchantName = Config.MerchantType.Instance[merchantData.MerchantType].Name;
				sbyte worldProgress = GameData.Domains.World.SharedMethods.GetXiangshuLevel(DomainManager.World.GetXiangshuProgress());
				short limit = GlobalConfig.Instance.MerchantFavorabilityUpperLimits[(int)worldProgress];
				int curItemCount = 0;
				short maxPageIndex = Math.Min((short)merchantData.MerchantConfig.Level, limit);
				int pageIndex = (int)maxPageIndex;
				int totalCount = 0;
				for (int i = 0; i <= pageIndex; i++)
				{
					Inventory originInventory = merchantData.GetGoodsList(pageIndex);
					totalCount += originInventory.Items.Sum((KeyValuePair<ItemKey, int> p) => p.Value);
				}
				while (curItemCount < 3 && pageIndex >= 0)
				{
					Inventory originInventory2 = merchantData.GetGoodsList(pageIndex--);
					while (curItemCount < 3 && originInventory2.InventoryItemTotalCount > 0)
					{
						int random = context.Random.Next(100);
						bool flag2 = random < 15;
						int gradeOffset;
						if (flag2)
						{
							gradeOffset = 0;
						}
						else
						{
							bool flag3 = random < 50;
							if (flag3)
							{
								gradeOffset = 1;
							}
							else
							{
								gradeOffset = 2;
							}
						}
						Dictionary<sbyte, Dictionary<ItemKey, int>> groupItemDict = (from p in originInventory2.Items
						group p by ItemTemplateHelper.GetGrade(p.Key.ItemType, p.Key.TemplateId)).ToDictionary((IGrouping<sbyte, KeyValuePair<ItemKey, int>> p) => p.Key, (IGrouping<sbyte, KeyValuePair<ItemKey, int>> p) => p.ToDictionary((KeyValuePair<ItemKey, int> p) => p.Key, (KeyValuePair<ItemKey, int> p) => p.Value));
						sbyte maxGrade = groupItemDict.Keys.Max<sbyte>();
						sbyte minGrade = groupItemDict.Keys.Min<sbyte>();
						sbyte grade = Convert.ToSByte((int)maxGrade - gradeOffset);
						grade = Math.Clamp(grade, minGrade, maxGrade);
						Dictionary<ItemKey, int> items;
						bool flag4 = groupItemDict.TryGetValue(grade, out items);
						if (flag4)
						{
							ItemKey key = items.ElementAt(context.Random.Next(0, items.Count)).Key;
							resultInventory.OfflineAdd(key, 1);
							originInventory2.OfflineRemove(key, 1);
							DomainManager.Item.RemoveOwner(key, ItemOwnerType.Caravan, caravanId);
							DomainManager.Taiwu.AddItem(context, key, 1, ItemSourceType.Inventory, false);
							DomainManager.Merchant.SetCaravanData(caravanId, merchantData, context);
							curItemCount++;
						}
					}
				}
				argBox.Set("ConchShip_PresetKey_CaravanPresentCount", caravanPresentCount + totalCount);
				argBox.Set("ConchShip_PresetKey_CaravanIndex", caravanIndex + 1);
				argBox.Set("ConchShip_PresetKey_CaravanCount", caravanIdList.Count);
				caravanPresentCount = argBox.GetInt("ConchShip_PresetKey_CaravanPresentCount");
				caravanIndex = argBox.GetInt("ConchShip_PresetKey_CaravanIndex");
				bool flag5 = caravanIndex == caravanIdList.Count && caravanPresentCount > 0;
				if (flag5)
				{
					EventHelper.OnSkillExecutedCostTime(2);
				}
				result = totalCount;
			}
			return result;
		}

		// Token: 0x0600218C RID: 8588 RVA: 0x001AC548 File Offset: 0x001AA748
		public static bool IsCricketSmart(int cricketId)
		{
			return DomainManager.Extra.IsCricketSmart(cricketId);
		}

		// Token: 0x0600218D RID: 8589 RVA: 0x001AC568 File Offset: 0x001AA768
		public static CricketData GetCricketData(int itemId)
		{
			return DomainManager.Item.GetCricketData(itemId);
		}

		// Token: 0x0600218E RID: 8590 RVA: 0x001AC588 File Offset: 0x001AA788
		public static bool IsCricketGreat(ItemKey itemKey)
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			ItemDisplayData itemDisplayData = DomainManager.Character.GetInventoryItemDisplayData(taiwu.GetId(), itemKey);
			sbyte grade = ItemTemplateHelper.GetCricketGrade(itemDisplayData.CricketColorId, itemDisplayData.CricketPartId);
			return grade == 7 || grade == 8;
		}

		// Token: 0x0600218F RID: 8591 RVA: 0x001AC5D4 File Offset: 0x001AA7D4
		public static bool IsCricketReachSmartCondition(int itemId)
		{
			CricketData data = EventHelper.GetCricketData(itemId);
			ProfessionData professionData = EventHelper.GetProfessionData(17);
			int sumCount = 10;
			return (float)(data[5] - data[6]) >= (float)sumCount - MathF.Ceiling((float)(professionData.GetSeniorityPercent() * 7) / 100f);
		}

		// Token: 0x06002190 RID: 8592 RVA: 0x001AC624 File Offset: 0x001AA824
		public static bool IsCricketIdentified(int cricketId)
		{
			return DomainManager.Extra.IsCricketIdentified(cricketId);
		}

		// Token: 0x06002191 RID: 8593 RVA: 0x001AC644 File Offset: 0x001AA844
		public static bool CanIdentifyCricket(int cricketId)
		{
			return DomainManager.Extra.CanIdentifyCricket(cricketId);
		}

		// Token: 0x06002192 RID: 8594 RVA: 0x001AC664 File Offset: 0x001AA864
		public static void SetCricketIdentified(int cricketId)
		{
			ProfessionFormulaItem formulaItem = ProfessionFormula.Instance[108];
			EventHelper.ChangeProfessionSeniority(17, formulaItem.Calculate(), false);
			DomainManager.Extra.SetCricketIdentified(EventHelper.Domain.MainThreadDataContext, cricketId);
		}

		// Token: 0x06002193 RID: 8595 RVA: 0x001AC6A4 File Offset: 0x001AA8A4
		public static bool CanUpgradeCricket(int cricketId)
		{
			return DomainManager.Extra.CanUpgradeCricket(cricketId);
		}

		// Token: 0x06002194 RID: 8596 RVA: 0x001AC6C4 File Offset: 0x001AA8C4
		public static ItemKey UpgradeCricket(int charId, int cricketId)
		{
			ProfessionFormulaItem formulaItem = ProfessionFormula.Instance[109];
			EventHelper.ChangeProfessionSeniority(17, formulaItem.Calculate(), false);
			return DomainManager.Extra.UpgradeCricket(EventHelper.Domain.MainThreadDataContext, charId, cricketId);
		}

		// Token: 0x06002195 RID: 8597 RVA: 0x001AC708 File Offset: 0x001AA908
		public static void OpenExtraordinaryCricketView(ItemKey itemKey)
		{
			GameDataBridge.AddDisplayEvent<ItemKey>(DisplayEventType.OpenExtraordinaryCricket, itemKey);
		}

		// Token: 0x06002196 RID: 8598 RVA: 0x001AC714 File Offset: 0x001AA914
		public static string GetCricketDesc(ItemKey itemKey)
		{
			ItemDisplayData cricket = DomainManager.Item.GetItemDisplayData(itemKey, -1);
			bool flag = ItemTemplateHelper.GetGrade(itemKey.ItemType, itemKey.TemplateId) >= 7;
			CricketPartsItem config;
			if (flag)
			{
				config = CricketParts.Instance[(int)(cricket.CricketPartId + cricket.CricketColorId)];
			}
			else
			{
				config = CricketParts.Instance[cricket.CricketPartId];
			}
			return config.Desc;
		}

		// Token: 0x06002197 RID: 8599 RVA: 0x001AC788 File Offset: 0x001AA988
		public static bool DukeSkill_CheckCharacterHasTitle(int charId)
		{
			ProfessionData professionData = EventHelper.GetProfessionData(17);
			bool flag = professionData == null;
			return !flag && ProfessionSkillHandle.DukeSkill_CheckCharacterHasTitle(charId, professionData);
		}

		// Token: 0x06002198 RID: 8600 RVA: 0x001AC7B8 File Offset: 0x001AA9B8
		public static short DukeSkill_GetTitleFromOwner(int charId)
		{
			ProfessionData professionData = EventHelper.GetProfessionData(17);
			bool flag = professionData == null;
			short result;
			if (flag)
			{
				result = -1;
			}
			else
			{
				result = ProfessionSkillHandle.DukeSkill_GetTitleFromOwner(charId, professionData);
			}
			return result;
		}

		// Token: 0x06002199 RID: 8601 RVA: 0x001AC7E8 File Offset: 0x001AA9E8
		public static int DukeSkill_GetOwnerOfTitle(short templateId)
		{
			ProfessionData professionData = EventHelper.GetProfessionData(17);
			bool flag = professionData == null;
			int result;
			if (flag)
			{
				result = -1;
			}
			else
			{
				result = ProfessionSkillHandle.DukeSkill_GetOwnerOfTitle(templateId, professionData);
			}
			return result;
		}

		// Token: 0x0600219A RID: 8602 RVA: 0x001AC818 File Offset: 0x001AAA18
		public static void DukeSkill_AddCharacterTitle(int charId, short templateId)
		{
			ProfessionData professionData = EventHelper.GetProfessionData(17);
			bool flag = professionData == null;
			if (!flag)
			{
				ProfessionSkillHandle.DukeSkill_AddCharacterTitle(EventHelper.Domain.MainThreadDataContext, professionData, charId, templateId);
			}
		}

		// Token: 0x0600219B RID: 8603 RVA: 0x001AC84C File Offset: 0x001AAA4C
		public static void DukeSkill_RemoveCharacterTitle(int charId)
		{
			ProfessionData professionData = EventHelper.GetProfessionData(17);
			bool flag = professionData == null;
			if (!flag)
			{
				ProfessionSkillHandle.DukeSkill_RemoveCharacterTitle(EventHelper.Domain.MainThreadDataContext, professionData, charId);
			}
		}

		// Token: 0x0600219C RID: 8604 RVA: 0x001AC880 File Offset: 0x001AAA80
		public static int GetDukeSkillBecomeEnemyProb(sbyte behaviorType)
		{
			return ProfessionRelatedConstants.BehaviorTypeBecomeEnemyProb[(int)behaviorType];
		}

		// Token: 0x0600219D RID: 8605 RVA: 0x001AC89C File Offset: 0x001AAA9C
		public static sbyte GetDukeSkill2ItemGrade(GameData.Domains.Character.Character character)
		{
			sbyte behaviorType = character.GetBehaviorType();
			int score = ProfessionRelatedConstants.BehaviorTypeScore[(int)behaviorType];
			score += (int)FavorabilityType.GetFavorabilityType(DomainManager.Character.GetFavorability(character.GetId(), DomainManager.Taiwu.GetTaiwuCharId()));
			bool flag = score < 0;
			sbyte result;
			if (flag)
			{
				bool flag2 = EventHelper.CheckProbability(5);
				if (flag2)
				{
					result = 6;
				}
				else
				{
					bool flag3 = EventHelper.CheckProbability(25);
					if (flag3)
					{
						result = 5;
					}
					else
					{
						bool flag4 = EventHelper.CheckProbability(30);
						if (flag4)
						{
							result = 4;
						}
						else
						{
							result = 3;
						}
					}
				}
			}
			else
			{
				bool flag5 = score < 4;
				if (flag5)
				{
					bool flag6 = EventHelper.CheckProbability(5);
					if (flag6)
					{
						result = 7;
					}
					else
					{
						bool flag7 = EventHelper.CheckProbability(25);
						if (flag7)
						{
							result = 6;
						}
						else
						{
							bool flag8 = EventHelper.CheckProbability(30);
							if (flag8)
							{
								result = 5;
							}
							else
							{
								result = 4;
							}
						}
					}
				}
				else
				{
					bool flag9 = EventHelper.CheckProbability(5);
					if (flag9)
					{
						result = 8;
					}
					else
					{
						bool flag10 = EventHelper.CheckProbability(25);
						if (flag10)
						{
							result = 7;
						}
						else
						{
							bool flag11 = EventHelper.CheckProbability(30);
							if (flag11)
							{
								result = 6;
							}
							else
							{
								result = 5;
							}
						}
					}
				}
			}
			return result;
		}

		// Token: 0x0600219E RID: 8606 RVA: 0x001AC9A8 File Offset: 0x001AABA8
		public static sbyte GetDukeSkill2ItemGrade(Location location)
		{
			MapAreaItem config = DomainManager.Map.GetElement_Areas((int)location.AreaId).GetConfig();
			sbyte sectId = MapState.Instance[config.StateID].SectID;
			short rate = EventHelper.GetSectApprovingRate(sectId);
			int randomValue = EventHelper.GetRandom(0, 75);
			bool flag = rate <= 300;
			sbyte result;
			if (flag)
			{
				bool flag2 = randomValue < 5;
				if (flag2)
				{
					result = 6;
				}
				else
				{
					bool flag3 = randomValue < 15;
					if (flag3)
					{
						result = 5;
					}
					else
					{
						bool flag4 = randomValue < 35;
						if (flag4)
						{
							result = 4;
						}
						else
						{
							result = 3;
						}
					}
				}
			}
			else
			{
				bool flag5 = rate <= 600;
				if (flag5)
				{
					bool flag6 = randomValue < 5;
					if (flag6)
					{
						result = 7;
					}
					else
					{
						bool flag7 = randomValue < 15;
						if (flag7)
						{
							result = 6;
						}
						else
						{
							bool flag8 = randomValue < 35;
							if (flag8)
							{
								result = 5;
							}
							else
							{
								result = 4;
							}
						}
					}
				}
				else
				{
					bool flag9 = randomValue < 5;
					if (flag9)
					{
						result = 8;
					}
					else
					{
						bool flag10 = randomValue < 15;
						if (flag10)
						{
							result = 7;
						}
						else
						{
							bool flag11 = randomValue < 35;
							if (flag11)
							{
								result = 6;
							}
							else
							{
								result = 5;
							}
						}
					}
				}
			}
			return result;
		}

		// Token: 0x0600219F RID: 8607 RVA: 0x001ACABC File Offset: 0x001AACBC
		public static sbyte GetDukeSkill2WestItemGrade(GameData.Domains.Character.Character character)
		{
			sbyte favorabilityType = FavorabilityType.GetFavorabilityType(DomainManager.Character.GetFavorability(character.GetId(), DomainManager.Taiwu.GetTaiwuCharId()));
			List<sbyte> grades = ObjectPool<List<sbyte>>.Instance.Get();
			grades.Clear();
			bool flag = favorabilityType == 6;
			if (flag)
			{
				grades.Add(6);
				grades.Add(7);
				grades.Add(8);
			}
			else
			{
				grades.Add(5);
				grades.Add(6);
				grades.Add(7);
			}
			sbyte grade = grades[EventHelper.GetRandom(0, grades.Count)];
			ObjectPool<List<sbyte>>.Instance.Return(grades);
			return grade;
		}

		// Token: 0x060021A0 RID: 8608 RVA: 0x001ACB60 File Offset: 0x001AAD60
		public static ItemKey DukeSkill_GetNewCricket(GameData.Domains.Character.Character character)
		{
			ProfessionData professionData = EventHelper.GetProfessionData(17);
			bool flag = professionData == null;
			ItemKey result;
			if (flag)
			{
				result = ItemKey.Invalid;
			}
			else
			{
				result = ProfessionSkillHandle.DukeSkill_GetNewCricket(EventHelper.Domain.MainThreadDataContext, character.GetId());
			}
			return result;
		}

		// Token: 0x060021A1 RID: 8609 RVA: 0x001ACBA0 File Offset: 0x001AADA0
		public static GameData.Domains.Character.Character GetNotGiveCricketCharacter()
		{
			ProfessionData professionData = EventHelper.GetProfessionData(17);
			bool flag = professionData == null;
			GameData.Domains.Character.Character result;
			if (flag)
			{
				result = null;
			}
			else
			{
				DukeSkillsData duke = (DukeSkillsData)professionData.SkillsData;
				GameData.Domains.Character.Character character;
				bool flag2 = DomainManager.Character.TryGetElement_Objects(duke.GetNotGiveCricketCharId(new Predicate<int>(DomainManager.Character.IsCharacterAlive)), out character);
				if (flag2)
				{
					result = character;
				}
				else
				{
					result = null;
				}
			}
			return result;
		}

		// Token: 0x060021A2 RID: 8610 RVA: 0x001ACC04 File Offset: 0x001AAE04
		public static void SetCharacterCricketGivenData(int charId, bool isGiven)
		{
			ProfessionData professionData = EventHelper.GetProfessionData(17);
			bool flag = professionData == null;
			if (!flag)
			{
				DukeSkillsData duke = (DukeSkillsData)professionData.SkillsData;
				duke.SetCharacterCricketGivenData(charId, isGiven);
				DomainManager.Extra.SetProfessionData(EventHelper.Domain.MainThreadDataContext, professionData);
			}
		}

		// Token: 0x060021A3 RID: 8611 RVA: 0x001ACC50 File Offset: 0x001AAE50
		public static int GetDukeNotGiveCricketCount()
		{
			ProfessionData professionData = DomainManager.Extra.GetProfessionData(17);
			bool flag = professionData == null;
			int result;
			if (flag)
			{
				result = 0;
			}
			else
			{
				DukeSkillsData duke = (DukeSkillsData)professionData.SkillsData;
				result = duke.GetNotGivenCricketTitles(new Predicate<int>(DomainManager.Character.IsCharacterAlive)).Count<short>();
			}
			return result;
		}

		// Token: 0x060021A4 RID: 8612 RVA: 0x001ACCA4 File Offset: 0x001AAEA4
		public static bool HandleDukeGiveCricket(EventArgBox argBox)
		{
			ProfessionData professionData = DomainManager.Extra.GetProfessionData(17);
			bool flag = professionData == null;
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				DukeSkillsData duke = (DukeSkillsData)professionData.SkillsData;
				GameData.Domains.Character.Character character = EventHelper.GetNotGiveCricketCharacter();
				bool flag2 = character == null;
				if (flag2)
				{
					result = false;
				}
				else
				{
					ItemKey cricket = EventHelper.DukeSkill_GetNewCricket(character);
					bool flag3 = !cricket.IsValid();
					if (flag3)
					{
						result = false;
					}
					else
					{
						short titleTemplateId = duke.GetTitleFromOwner(character.GetId());
						argBox.Set("CharacterTitleTemplateId", titleTemplateId);
						argBox.Set("CharacterId", character.GetId());
						argBox.Set("Cricket", cricket);
						EventHelper.SetCharacterCricketGivenData(character.GetId(), true);
						IntList cricketList;
						bool flag4 = argBox.Get<IntList>("CricketIdList", out cricketList);
						if (flag4)
						{
							cricketList.Items.Add(cricket.Id);
						}
						else
						{
							IntList list = IntList.Create();
							list.Items.Add(cricket.Id);
							argBox.Set("CricketIdList", list);
						}
						result = true;
					}
				}
			}
			return result;
		}

		// Token: 0x060021A5 RID: 8613 RVA: 0x001ACDC4 File Offset: 0x001AAFC4
		public static void HandleDukeGiveCricketShow(EventArgBox argBox)
		{
			IntList cricketList;
			bool flag = argBox.Get<IntList>("CricketIdList", out cricketList);
			if (flag)
			{
				List<ValueTuple<ItemKey, int>> showList = new List<ValueTuple<ItemKey, int>>();
				for (int i = 0; i < cricketList.Items.Count; i++)
				{
					int cricketId = cricketList.Items[i];
					ItemKey itemKey = DomainManager.Item.GetBaseItem(new ItemKey(11, 0, 0, cricketId)).GetItemKey();
					showList.Add(new ValueTuple<ItemKey, int>(itemKey, 1));
				}
				EventHelper.ShowGetItemPageForItems(showList, "", argBox, false);
			}
		}

		// Token: 0x060021A6 RID: 8614 RVA: 0x001ACE50 File Offset: 0x001AB050
		public static bool TravelingBuddhistMonkSkill_CanVisitTemple(Location location)
		{
			return ProfessionSkillHandle.TravelingBuddhistMonkSkill_CanVisitTemple(location);
		}

		// Token: 0x060021A7 RID: 8615 RVA: 0x001ACE68 File Offset: 0x001AB068
		public static void TravelingBuddhistMonkSkill_CreateTemples()
		{
			ProfessionSkillHandle.TravelingBuddhistMonkSkill_CreateTemples(EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x060021A8 RID: 8616 RVA: 0x001ACE7C File Offset: 0x001AB07C
		public static List<string> TravelingBuddhistMonkSkill_GetTempleNames()
		{
			return ProfessionSkillHandle.TravelingBuddhistMonkSkill_GetTempleNames();
		}

		// Token: 0x060021A9 RID: 8617 RVA: 0x001ACE93 File Offset: 0x001AB093
		public static void TravelingBuddhistMonkSkill3_SetFeature(short featureId)
		{
			ProfessionSkillHandle.TravelingBuddhistMonkSkill3_SetFeature(EventHelper.Domain.MainThreadDataContext, featureId);
		}

		// Token: 0x060021AA RID: 8618 RVA: 0x001ACEA7 File Offset: 0x001AB0A7
		public static void TravelingBuddhistMonkSkill_SetTempleVisited(Location location)
		{
			ProfessionSkillHandle.TravelingBuddhistMonkSkill_SetTempleVisited(EventHelper.Domain.MainThreadDataContext, location);
		}

		// Token: 0x060021AB RID: 8619 RVA: 0x001ACEBC File Offset: 0x001AB0BC
		public static int GetVisitedTempleCount()
		{
			ProfessionData professionData = DomainManager.Extra.GetProfessionData(12);
			bool flag = professionData == null;
			int result;
			if (flag)
			{
				result = 0;
			}
			else
			{
				TravelingBuddhistMonkSkillsData skillsData = professionData.GetSkillsData<TravelingBuddhistMonkSkillsData>();
				result = skillsData.GetVisitedTempleCount();
			}
			return result;
		}

		// Token: 0x060021AC RID: 8620 RVA: 0x001ACEF4 File Offset: 0x001AB0F4
		public static sbyte GetSkillGradeByTempleCount()
		{
			return ProfessionRelatedConstants.TempleCountToSkillGrade[EventHelper.GetVisitedTempleCount()];
		}

		// Token: 0x060021AD RID: 8621 RVA: 0x001ACF14 File Offset: 0x001AB114
		public static ItemKey GetCombatSkillBookAndRead(short combatSkillTemplateId)
		{
			return DomainManager.Taiwu.GetCombatSkillBookAndRead(EventHelper.Domain.MainThreadDataContext, combatSkillTemplateId, 50);
		}

		// Token: 0x060021AE RID: 8622 RVA: 0x001ACF40 File Offset: 0x001AB140
		public static ItemKey GetLifeSkillBookAndRead(short lifeSkillTemplateId)
		{
			return DomainManager.Taiwu.GetLifeSkillBookAndRead(EventHelper.Domain.MainThreadDataContext, lifeSkillTemplateId, 50);
		}

		// Token: 0x060021AF RID: 8623 RVA: 0x001ACF6C File Offset: 0x001AB16C
		public static string GetTemplateDesc(Location location)
		{
			MapAreaItem config = DomainManager.Map.GetElement_Areas((int)location.AreaId).GetConfig();
			return config.TempleDesc;
		}

		// Token: 0x060021B0 RID: 8624 RVA: 0x001ACF9C File Offset: 0x001AB19C
		public static int GetAuthorityByGarde(GameData.Domains.Character.Character character)
		{
			sbyte grade = character.GetOrganizationInfo().Grade;
			return (int)((grade + 1) * (grade + 1) * 30);
		}

		// Token: 0x060021B1 RID: 8625 RVA: 0x001ACFC4 File Offset: 0x001AB1C4
		public static void OpenTravelingTaoistMonkSkill2(int characterId, string afterEvent, EventArgBox argBox)
		{
			GameDataBridge.AddDisplayEvent<int>(DisplayEventType.OpenTravelingTaoistMonkSkill2, characterId);
			GameData.Domains.Character.Character character = argBox.GetCharacter("CharacterId");
			int preCount = EventHelper.GetBadFeatureCount(character);
			argBox.Set("preCount", preCount);
			bool flag = !string.IsNullOrEmpty(afterEvent);
			if (flag)
			{
				EventHelper.AddEventInListenWithActionName(afterEvent, argBox, "TravelingTaoistMonkSkill2Executed");
			}
		}

		// Token: 0x060021B2 RID: 8626 RVA: 0x001AD018 File Offset: 0x001AB218
		public static int GetBadFeatureCount(GameData.Domains.Character.Character character)
		{
			List<short> featureIdList = character.GetFeatureIds();
			int count = 0;
			for (int i = 0; i < featureIdList.Count; i++)
			{
				bool flag = CharacterFeature.Instance[featureIdList[i]].Level < 0;
				if (flag)
				{
					count++;
				}
			}
			return count;
		}

		// Token: 0x060021B3 RID: 8627 RVA: 0x001AD070 File Offset: 0x001AB270
		public static void AddLuckEventPrediction(int charId, bool isPositive, bool isAvoided)
		{
			DomainManager.Character.AddLuckEventPrediction(charId, isPositive, isAvoided);
		}

		// Token: 0x060021B4 RID: 8628 RVA: 0x001AD084 File Offset: 0x001AB284
		public static bool IsBuddhist(GameData.Domains.Character.Character character)
		{
			return character.IsMonkType(2);
		}

		// Token: 0x060021B5 RID: 8629 RVA: 0x001AD0A0 File Offset: 0x001AB2A0
		public static int TonsureAuthorityGet(GameData.Domains.Character.Character character)
		{
			sbyte grade = character.GetOrganizationInfo().Grade;
			return (int)((grade + 1) * (grade + 1) * 30);
		}

		// Token: 0x060021B6 RID: 8630 RVA: 0x001AD0C8 File Offset: 0x001AB2C8
		public static void AddSavedSoul(int charId)
		{
			DomainManager.Extra.AddSavedSoul(EventHelper.Domain.MainThreadDataContext, charId);
		}

		// Token: 0x060021B7 RID: 8631 RVA: 0x001AD0E4 File Offset: 0x001AB2E4
		public static int GetSavedSoulCount()
		{
			ProfessionData professionData = DomainManager.Extra.GetProfessionData(6);
			bool flag = professionData == null;
			int result;
			if (flag)
			{
				result = 0;
			}
			else
			{
				BuddhistMonkSkillsData skillsData = professionData.GetSkillsData<BuddhistMonkSkillsData>();
				result = skillsData.GetSavedSoulsCount();
			}
			return result;
		}

		// Token: 0x060021B8 RID: 8632 RVA: 0x001AD11C File Offset: 0x001AB31C
		public static int GetTravelingTaoistMonkSkill1ExpCost(GameData.Domains.Character.Character character)
		{
			return ProfessionSkillHandle.TravelingTaoistMonkSkill1_ExpCost(character);
		}

		// Token: 0x060021B9 RID: 8633 RVA: 0x001AD134 File Offset: 0x001AB334
		public static List<GameData.Domains.Character.Character> SelectFemale(short stateId)
		{
			List<GameData.Domains.Character.Character> characterList = new List<GameData.Domains.Character.Character>();
			EventHelper.FindCharacters(new Predicate<GameData.Domains.Character.Character>(DomainManager.Character.CanSelectForForcePregnancy), characterList, 0, 135);
			return characterList;
		}

		// Token: 0x060021BA RID: 8634 RVA: 0x001AD16A File Offset: 0x001AB36A
		public static void BuddhistMonkSkill_SelectDirectedSamsara(int motherId, int reincarnatedCharId)
		{
			ProfessionSkillHandle.BuddhistMonkSkill_SelectDirectedSamsara(EventHelper.Domain.MainThreadDataContext, motherId, reincarnatedCharId);
		}

		// Token: 0x060021BB RID: 8635 RVA: 0x001AD17F File Offset: 0x001AB37F
		public static void BuddhistMonkSkill3_SelectFeatureFromEvent(int reincarnatedCharId, short featureId)
		{
			ProfessionSkillHandle.BuddhistMonkSkill_SetSamsaraFeature(EventHelper.Domain.MainThreadDataContext, reincarnatedCharId, featureId);
		}

		// Token: 0x060021BC RID: 8636 RVA: 0x001AD194 File Offset: 0x001AB394
		public static void BuddhistMonkSkill3_Execute(string afterEvent, EventArgBox argBox)
		{
			GameDataBridge.AddDisplayEvent<int>(DisplayEventType.OpenProfessionSkillSpecial, 22);
			bool flag = !string.IsNullOrEmpty(afterEvent);
			if (flag)
			{
				EventHelper.AddEventInListenWithActionName(afterEvent, argBox, "ConfirmProfessionSkillExecuteAndAnimComplete");
			}
		}

		// Token: 0x060021BD RID: 8637 RVA: 0x001AD1C8 File Offset: 0x001AB3C8
		public static void BecomeBuddhistMonk(GameData.Domains.Character.Character character)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			character.BecomeMonkType(context, 2);
			AvatarData avatar = character.GetAvatar();
			avatar.ResetGrowableElementShowingAbility(0);
			character.SetAvatar(avatar, context);
			int taiwuId = DomainManager.Taiwu.GetTaiwuCharId();
			bool flag = RelationTypeHelper.AllowAddingMentorRelation(character.GetId(), taiwuId);
			if (flag)
			{
				int currDate = DomainManager.World.GetCurrDate();
				DomainManager.Character.AddRelation(EventHelper.Domain.MainThreadDataContext, character.GetId(), taiwuId, 2048, currDate);
			}
		}

		// Token: 0x060021BE RID: 8638 RVA: 0x001AD250 File Offset: 0x001AB450
		public static bool BuddhistMonkSkill3_CheckCanSelectFeature(short featureId)
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			sbyte fameType = taiwu.GetFameType();
			bool flag = fameType == -2 || fameType == 3;
			bool flag2 = flag;
			bool result;
			if (flag2)
			{
				result = true;
			}
			else
			{
				bool isGood = FameType.IsNonNegative(fameType, true);
				bool flag3 = isGood;
				if (flag3)
				{
					result = (featureId >= 605 && featureId < 610);
				}
				else
				{
					result = (featureId >= 610 && featureId < 615);
				}
			}
			return result;
		}

		// Token: 0x060021BF RID: 8639 RVA: 0x001AD2D0 File Offset: 0x001AB4D0
		public static void BuddhistMonkSkill2_Execute(EventArgBox argBox)
		{
			CharacterSet charIds;
			bool flag = argBox.Get<CharacterSet>("SelectedCharId", out charIds);
			if (flag)
			{
				int count = 0;
				foreach (int charId in charIds.GetCollection())
				{
					bool flag2 = EventHelper.IsAvailableCharacterId(charId);
					if (flag2)
					{
						EventHelper.AddSavedSoul(charId);
						count++;
					}
				}
				GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
				LifeRecordCollection lifeRecordCollection = EventHelper.GetLifeRecordCollection();
				int currDate = EventHelper.GetGameDate();
				Location location = taiwu.GetLocation();
				lifeRecordCollection.AddExpiateDeadSouls(taiwu.GetId(), currDate, location);
				DomainManager.World.GetInstantNotificationCollection().AddReleaseSouls(count);
			}
		}

		// Token: 0x060021C0 RID: 8640 RVA: 0x001AD39C File Offset: 0x001AB59C
		public static void TaoistMonkSkill3ConfirmTribulationSucceed()
		{
			ProfessionData professionData = EventHelper.GetProfessionData(5);
			ProfessionSkillHandle.TaoistMonkSkill_ConfirmTribulationSucceed(EventHelper.Domain.MainThreadDataContext, professionData);
		}

		// Token: 0x060021C1 RID: 8641 RVA: 0x001AD3C4 File Offset: 0x001AB5C4
		public static string TaoistMonkSkill4GetDisasterEventGuid()
		{
			List<short> featureIds = DomainManager.Taiwu.GetTaiwu().GetFeatureIds();
			string eventId = "5fb4a4e7-2403-4294-9778-3ba706889a8c";
			bool flag = featureIds.Contains(629);
			if (flag)
			{
				eventId = "5f6a1b69-9393-4847-8455-cd10a034486a";
			}
			else
			{
				bool flag2 = featureIds.Contains(628);
				if (flag2)
				{
					eventId = "09298851-161c-48e3-a785-d892ca1d5b6c";
				}
				else
				{
					bool flag3 = featureIds.Contains(627);
					if (flag3)
					{
						eventId = "e2fdc895-2c9a-4274-893a-0c918244a866";
					}
				}
			}
			return eventId;
		}

		// Token: 0x060021C2 RID: 8642 RVA: 0x001AD434 File Offset: 0x001AB634
		public static int TaoistMonkSkill3GetAuthority(sbyte grade)
		{
			ProfessionData professionData = EventHelper.GetProfessionData(5);
			return professionData.GetTaoistMonkSkill3AuthorityPara() * (int)(grade + 1) * (int)(grade + 1);
		}

		// Token: 0x060021C3 RID: 8643 RVA: 0x001AD45C File Offset: 0x001AB65C
		public static bool CheckTaoistMonkSkill3TribulationSucceed()
		{
			return ProfessionSkillHandle.TaoistMonkSkill_CheckTribulationSucceed();
		}

		// Token: 0x060021C4 RID: 8644 RVA: 0x001AD474 File Offset: 0x001AB674
		public static void SetCharacterPerformCompletelyInfected(GameData.Domains.Character.Character character, EventArgBox argBox)
		{
			bool flag = character == null;
			if (flag)
			{
				throw new Exception("null character passed in to SetCharacterPerformCompletelyInfected");
			}
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			argBox.Set("InfectedValueBefore", character.GetXiangshuInfection());
			character.ChangeXiangshuInfection(context, 200);
			CharacterFeatureItem featureItem = CharacterFeature.Instance.GetItem(218);
			short prevInfectedFeatureId = character.GetGroupFeature(featureItem.MutexGroupId);
			bool flag2 = prevInfectedFeatureId >= 0;
			if (flag2)
			{
				argBox.Set("FeatureIdBefore", prevInfectedFeatureId);
			}
			character.AddFeature(context, featureItem.TemplateId, true);
			OrganizationInfo srcOrgInfo = character.GetOrganizationInfo();
			argBox.Set("OrgInfoBefore", srcOrgInfo);
			OrganizationInfo destOrgInfo = new OrganizationInfo(20, srcOrgInfo.Grade, true, -1);
			character.SetOrganizationInfo(destOrgInfo, context);
			bool flag3 = EventHelper.CharacterIsInTaiwuGroup(character.GetId());
			if (flag3)
			{
				EventHelper.RequestRoleLeaveGroup(character.GetId());
				argBox.Set("NeedJoinGroup", true);
			}
		}

		// Token: 0x060021C5 RID: 8645 RVA: 0x001AD568 File Offset: 0x001AB768
		public static void RollBackCharacterFromPerformCompletelyInfected(GameData.Domains.Character.Character character, EventArgBox argBox)
		{
			bool flag = character == null;
			if (flag)
			{
				throw new Exception("null character passed in to RollBackCharacterFromPerformCompletelyInfected");
			}
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			character.SetXiangshuInfection(argBox.GetByte("InfectedValueBefore"), context);
			character.RemoveFeature(context, 218);
			short featureId = -1;
			bool flag2 = argBox.Get("FeatureIdBefore", ref featureId);
			if (flag2)
			{
				character.AddFeature(context, featureId, true);
			}
			character.SetOrganizationInfo(argBox.Get<OrganizationInfo>("OrgInfoBefore"), context);
			bool needJoinGroup = argBox.GetBool("NeedJoinGroup");
			bool flag3 = needJoinGroup;
			if (flag3)
			{
				DomainManager.Taiwu.JoinGroup(EventHelper.Domain.MainThreadDataContext, character.GetId(), true);
			}
		}

		// Token: 0x060021C6 RID: 8646 RVA: 0x001AD618 File Offset: 0x001AB818
		public static short GetMartialArtistHereticTemplateIds(sbyte consummateLevel)
		{
			int grade = (int)MathF.Abs((float)(consummateLevel - 1)) / 2;
			return ProfessionRelatedConstants.MartialArtistHereticTemplateIds[grade];
		}

		// Token: 0x060021C7 RID: 8647 RVA: 0x001AD640 File Offset: 0x001AB840
		public static int GetAuthorityByBeatHeretic()
		{
			ProfessionData professionData = EventHelper.GetCurrentProfessionData();
			bool flag = professionData == null;
			int result;
			if (flag)
			{
				result = 0;
			}
			else
			{
				result = professionData.GetSeniorityAuthorityGain();
			}
			return result;
		}

		// Token: 0x060021C8 RID: 8648 RVA: 0x001AD66C File Offset: 0x001AB86C
		public static int GetSafetyByBeatHeretic()
		{
			ProfessionData professionData = EventHelper.GetProfessionData(3);
			bool flag = professionData == null;
			int result;
			if (flag)
			{
				result = 0;
			}
			else
			{
				result = professionData.GetSenioritySafetyGain();
			}
			return result;
		}

		// Token: 0x060021C9 RID: 8649 RVA: 0x001AD698 File Offset: 0x001AB898
		public static int GetCultureByBeatHeretic()
		{
			ProfessionData professionData = EventHelper.GetProfessionData(3);
			bool flag = professionData == null;
			int result;
			if (flag)
			{
				result = 0;
			}
			else
			{
				result = professionData.GetSeniorityCultureGain();
			}
			return result;
		}

		// Token: 0x060021CA RID: 8650 RVA: 0x001AD6C4 File Offset: 0x001AB8C4
		public static void ExecuteMartialArtistSkill2(sbyte combatSkillType)
		{
			ProfessionData professionData = EventHelper.GetCurrentProfessionData();
			ProfessionSkillHandle.MartialArtistSkill_MakeAreaLearnCombatSkill(EventHelper.Domain.MainThreadDataContext, professionData, combatSkillType);
		}

		// Token: 0x060021CB RID: 8651 RVA: 0x001AD6EC File Offset: 0x001AB8EC
		[Obsolete]
		private static bool MartialArtistSkill0Useful(OrganizationItem orgCfg)
		{
			return DomainManager.Extra.MartialArtistSkill0Useful(orgCfg);
		}

		// Token: 0x060021CC RID: 8652 RVA: 0x001AD709 File Offset: 0x001AB909
		public static void MartialArtistSkill3Execute()
		{
			DomainManager.Extra.MartialArtistSkill3Execute(EventHelper.Domain.MainThreadDataContext, true);
		}

		// Token: 0x060021CD RID: 8653 RVA: 0x001AD724 File Offset: 0x001AB924
		public static int GetInfluencePowerBonusFactor()
		{
			ProfessionData professionData = EventHelper.GetProfessionData(8);
			bool flag = professionData == null;
			int result;
			if (flag)
			{
				result = 0;
			}
			else
			{
				result = professionData.GetInfluencePowerBonusFactor();
			}
			return result;
		}

		// Token: 0x060021CE RID: 8654 RVA: 0x001AD74F File Offset: 0x001AB94F
		public static void AristocratSkill_ChangeInfluencePower(int charId, bool isAdd)
		{
			ProfessionSkillHandle.AristocratSkill_ChangeInfluencePower(EventHelper.Domain.MainThreadDataContext, charId, isAdd);
		}

		// Token: 0x060021CF RID: 8655 RVA: 0x001AD764 File Offset: 0x001AB964
		public static sbyte GetGrowingGradeBySeniority()
		{
			ProfessionData professionData = EventHelper.GetProfessionData(8);
			bool flag = professionData == null;
			sbyte result;
			if (flag)
			{
				result = 0;
			}
			else
			{
				result = professionData.GetSeniorityGrowingGrade(EventHelper.Domain.MainThreadDataContext.Random);
			}
			return result;
		}

		// Token: 0x060021D0 RID: 8656 RVA: 0x001AD7A0 File Offset: 0x001AB9A0
		public static int GetFeatureUpgradeCount()
		{
			ProfessionData professionData = EventHelper.GetProfessionData(8);
			bool flag = professionData == null;
			int result;
			if (flag)
			{
				result = 0;
			}
			else
			{
				result = (int)professionData.GetSeniorityFeatureUpgradeCount(EventHelper.Domain.MainThreadDataContext.Random);
			}
			return result;
		}

		// Token: 0x060021D1 RID: 8657 RVA: 0x001AD7DC File Offset: 0x001AB9DC
		public static void RecreateLifeSkillQualifications(int charId, sbyte growingOrgTemplateId, sbyte growingGrade)
		{
			GameData.Domains.Character.Character character;
			bool flag = DomainManager.Character.TryGetElement_Objects(charId, out character);
			if (flag)
			{
				character.RecreateLifeSkillQualifications(EventHelper.Domain.MainThreadDataContext, growingOrgTemplateId, growingGrade);
				DomainManager.World.GetInstantNotificationCollection().AddComradeLifeSkillUpNew1(charId, growingGrade);
			}
		}

		// Token: 0x060021D2 RID: 8658 RVA: 0x001AD824 File Offset: 0x001ABA24
		public static void RecreateCombatSkillQualifications(int charId, sbyte growingOrgTemplateId, sbyte growingGrade)
		{
			GameData.Domains.Character.Character character;
			bool flag = DomainManager.Character.TryGetElement_Objects(charId, out character);
			if (flag)
			{
				character.RecreateCombatSkillQualifications(EventHelper.Domain.MainThreadDataContext, growingOrgTemplateId, growingGrade);
				DomainManager.World.GetInstantNotificationCollection().AddComradeCombatSkillUpNew1(charId, growingGrade);
			}
		}

		// Token: 0x060021D3 RID: 8659 RVA: 0x001AD86C File Offset: 0x001ABA6C
		public static void RecreateMainAttributes(int charId, sbyte growingOrgTemplateId, sbyte growingGrade)
		{
			GameData.Domains.Character.Character character;
			bool flag = DomainManager.Character.TryGetElement_Objects(charId, out character);
			if (flag)
			{
				character.RecreateMainAttributes(EventHelper.Domain.MainThreadDataContext, growingOrgTemplateId, growingGrade);
				DomainManager.World.GetInstantNotificationCollection().AddComradePropertyUpNew1(charId, growingGrade);
			}
		}

		// Token: 0x060021D4 RID: 8660 RVA: 0x001AD8B4 File Offset: 0x001ABAB4
		public static void RecreateFeatures(int charId, int upgradeCount, sbyte featureMedalType)
		{
			GameData.Domains.Character.Character character;
			bool flag = DomainManager.Character.TryGetElement_Objects(charId, out character);
			if (flag)
			{
				character.RecreateFeaturesByUpgradeCount(EventHelper.Domain.MainThreadDataContext, upgradeCount, featureMedalType);
				DomainManager.World.GetInstantNotificationCollection().AddComradeFeatureUp(charId);
			}
		}

		// Token: 0x060021D5 RID: 8661 RVA: 0x001AD8FC File Offset: 0x001ABAFC
		public static bool IsCharacterAbleToBeRecommended(int charId)
		{
			ProfessionData professionData = DomainManager.Extra.GetProfessionData(8);
			AristocratSkillsData skillsData = professionData.GetSkillsData<AristocratSkillsData>();
			return !skillsData.IsCharacterRecommended(charId);
		}

		// Token: 0x060021D6 RID: 8662 RVA: 0x001AD92C File Offset: 0x001ABB2C
		public static int BeggarGetNpcMoney(Location location, bool isTransferMoney = false)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			int moneyValue = ProfessionSkillHandle.BeggarSkill_GetLocationBeggingMoney(context, location, isTransferMoney);
			if (isTransferMoney)
			{
				taiwu.ChangeResource(context, 6, moneyValue);
				int addSeniority = ProfessionFormulaImpl.Calculate(60, moneyValue);
				DomainManager.Extra.ChangeProfessionSeniority(context, 9, addSeniority, true, false);
			}
			return moneyValue;
		}

		// Token: 0x060021D7 RID: 8663 RVA: 0x001AD990 File Offset: 0x001ABB90
		public static string BeggarSkill_LookingForCharacter()
		{
			return ProfessionSkillHandle.BeggarSkill_LookingForCharacter();
		}

		// Token: 0x060021D8 RID: 8664 RVA: 0x001AD9A7 File Offset: 0x001ABBA7
		public static void BeggarSkill_ClearLookingForCharacter()
		{
			ProfessionSkillHandle.BeggarSkill_ClearLookingForCharacter(EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x060021D9 RID: 8665 RVA: 0x001AD9BA File Offset: 0x001ABBBA
		public static void BeggarSkill_AddLookingForCharacter(string name)
		{
			ProfessionSkillHandle.BeggarSkill_AddLookingForCharacter(EventHelper.Domain.MainThreadDataContext, name);
		}

		// Token: 0x060021DA RID: 8666 RVA: 0x001AD9D0 File Offset: 0x001ABBD0
		public static bool BeggarSkill_FoundMoreAlive()
		{
			return ProfessionSkillHandle.BeggarSkill_FoundMoreAlive();
		}

		// Token: 0x060021DB RID: 8667 RVA: 0x001AD9E8 File Offset: 0x001ABBE8
		public static bool BeggarSkill_FoundMoreDead()
		{
			return ProfessionSkillHandle.BeggarSkill_FoundMoreDead();
		}

		// Token: 0x060021DC RID: 8668 RVA: 0x001ADA00 File Offset: 0x001ABC00
		public static bool CheckNameIsTaiwuOrGroup(string name)
		{
			int taiwuCharId = DomainManager.Taiwu.GetTaiwuCharId();
			foreach (int charId in DomainManager.Taiwu.GetGroupCharIds().GetCollection())
			{
				GameData.Domains.Character.Character character = DomainManager.Character.GetElement_Objects(charId);
				string nameStr = EventHelper.GetMonasticTitleOrDisplayName(character, charId == taiwuCharId);
				bool flag = nameStr.Equals(name);
				if (flag)
				{
					return true;
				}
			}
			return false;
		}

		// Token: 0x060021DD RID: 8669 RVA: 0x001ADA9C File Offset: 0x001ABC9C
		public static string GetMonasticTitleOrDisplayName(GameData.Domains.Character.Character character, bool isTaiwu)
		{
			NameRelatedData nameRelatedData = new NameRelatedData();
			CharacterDomain.GetNameRelatedData(character, ref nameRelatedData);
			ValueTuple<string, string> monasticTitleOrDisplayName = nameRelatedData.GetMonasticTitleOrDisplayName(isTaiwu);
			string surname = monasticTitleOrDisplayName.Item1;
			string givenName = monasticTitleOrDisplayName.Item2;
			return surname + givenName;
		}

		// Token: 0x060021DE RID: 8670 RVA: 0x001ADAE0 File Offset: 0x001ABCE0
		public static bool GetBeggarSkill1LeaveResult(GameData.Domains.Character.Character character)
		{
			ProfessionData professionData = EventHelper.GetProfessionData(9);
			bool flag = professionData == null;
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
				sbyte favorabilityType = FavorabilityType.GetFavorabilityType(DomainManager.Character.GetFavorability(character.GetId(), taiwu.GetId()));
				int prob = (int)ProfessionRelatedConstants.BeggarSkill2BehaviorTypeFactors[(int)character.GetBehaviorType()];
				prob += (int)(favorabilityType * 5) + professionData.GetSeniorityPercent() / 2;
				result = EventHelper.CheckProbability(prob);
			}
			return result;
		}

		// Token: 0x060021DF RID: 8671 RVA: 0x001ADB54 File Offset: 0x001ABD54
		public static void MakeCharacterMoveRandom(GameData.Domains.Character.Character character, int step)
		{
			bool flag = character.GetId() == DomainManager.Taiwu.GetTaiwuCharId();
			if (flag)
			{
				throw new Exception("character can not is taiwu");
			}
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			List<MapBlockData> mapBlockList = ObjectPool<List<MapBlockData>>.Instance.Get();
			Location location = character.GetLocation();
			DomainManager.Map.GetNeighborBlocks(location.AreaId, location.BlockId, mapBlockList, step);
			bool flag2 = mapBlockList.Count == 0;
			if (!flag2)
			{
				MapBlockData blockData = mapBlockList[context.Random.Next(mapBlockList.Count)];
				DomainManager.Character.GroupMove(context, character, blockData.GetLocation());
				ObjectPool<List<MapBlockData>>.Instance.Return(mapBlockList);
			}
		}

		// Token: 0x060021E0 RID: 8672 RVA: 0x001ADC04 File Offset: 0x001ABE04
		public static int GetTasterSeniority(ItemKey itemKey)
		{
			TeaWineItem config = Config.TeaWine.Instance[itemKey.TemplateId];
			return (int)((config.Grade + 1) * 10);
		}

		// Token: 0x060021E1 RID: 8673 RVA: 0x001ADC34 File Offset: 0x001ABE34
		public static short GetDisorderOfQi(ItemKey itemKey, GameData.Domains.Character.Character character)
		{
			bool flag = itemKey.ItemType != 9;
			if (flag)
			{
				DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(19, 1);
				defaultInterpolatedStringHandler.AppendLiteral("Invalid item type: ");
				defaultInterpolatedStringHandler.AppendFormatted<sbyte>(itemKey.ItemType);
				throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
			}
			TeaWineItem config = Config.TeaWine.Instance[itemKey.TemplateId];
			short recoveryOfQiDisorder = character.GetRecoveryOfQiDisorder();
			return Math.Abs(config.DirectChangeOfQiDisorder) * (100 - recoveryOfQiDisorder / 20) / 100;
		}

		// Token: 0x060021E2 RID: 8674 RVA: 0x001ADCBC File Offset: 0x001ABEBC
		public unsafe static void AddEatingItemTogether(GameData.Domains.Character.Character taiwu, GameData.Domains.Character.Character other, ItemKey itemKey)
		{
			Tester.Assert(taiwu.GetId() == DomainManager.Taiwu.GetTaiwuCharId(), "");
			Tester.Assert(itemKey.ItemType == 9, "");
			short itemSubType = ItemTemplateHelper.GetItemSubType(itemKey.ItemType, itemKey.TemplateId);
			bool isImmune = (itemSubType == 900 && DomainManager.Extra.IsProfessionalSkillUnlocked(16, 1)) || (itemSubType == 901 && DomainManager.Extra.IsProfessionalSkillUnlocked(7, 1));
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			taiwu.RemoveInventoryItem(context, itemKey, 1, false, false);
			bool flag = isImmune;
			if (flag)
			{
				PoisonInts poisoned = *taiwu.GetPoisoned();
				taiwu.AddEatingItem(context, itemKey, null);
				taiwu.SetPoisoned(ref poisoned, context);
			}
			else
			{
				taiwu.AddEatingItem(context, itemKey, null);
			}
			ItemKey copyItem = DomainManager.Item.CreateCopyOfItem(context, itemKey);
			other.AddEatingItem(context, copyItem, null);
		}

		// Token: 0x060021E3 RID: 8675 RVA: 0x001ADDA4 File Offset: 0x001ABFA4
		public static ValueTuple<Location, int, short> GetAnimalHunterFight(GameData.Domains.Character.Character taiwu)
		{
			ProfessionData profession = DomainManager.Extra.GetProfessionData(1);
			Location taiwuLocation = taiwu.GetLocation();
			HashSet<ValueTuple<Location, int>> result;
			bool flag = profession == null || !DomainManager.Extra.TryGetAnimalAttackInRange(taiwuLocation, 2, true, out result);
			ValueTuple<Location, int, short> result2;
			if (flag)
			{
				result2 = new ValueTuple<Location, int, short>(Location.Invalid, -1, -1);
			}
			else
			{
				sbyte canGetGrade = profession.GetSeniorityCallAnimalGrade();
				foreach (ValueTuple<Location, int> pair in result)
				{
					GameData.Domains.Character.Animal animal;
					bool flag2 = !DomainManager.Extra.TryGetAnimal(pair.Item2, out animal) || !Config.Character.Instance[animal.CharacterTemplateId].RandomAnimalAttack;
					if (!flag2)
					{
						sbyte carrierGrade = EventHelper.GetCarrierGradeByAnimal(animal.CharacterTemplateId);
						bool flag3 = carrierGrade > canGetGrade;
						if (flag3)
						{
							DomainManager.Extra.TryGetAnimal(pair.Item2, out animal);
							return new ValueTuple<Location, int, short>(pair.Item1, pair.Item2, animal.CharacterTemplateId);
						}
					}
				}
				result2 = new ValueTuple<Location, int, short>(Location.Invalid, -1, -1);
			}
			return result2;
		}

		// Token: 0x060021E4 RID: 8676 RVA: 0x001ADEDC File Offset: 0x001AC0DC
		public static void AnimalMoveToLocation(Location originLocation, int animalId, Location targetLocation)
		{
			GameData.Domains.Character.Animal animal;
			bool flag = DomainManager.Extra.TryGetAnimal(animalId, out animal);
			if (flag)
			{
				DomainManager.Extra.SetAnimalLocation(EventHelper.Domain.MainThreadDataContext, animal, targetLocation);
			}
		}

		// Token: 0x060021E5 RID: 8677 RVA: 0x001ADF14 File Offset: 0x001AC114
		public static Dictionary<Location, List<short>> GetAnimalHunterCanGet(GameData.Domains.Character.Character taiwu)
		{
			ProfessionData profession = DomainManager.Extra.GetProfessionData(1);
			Location taiwuLocation = taiwu.GetLocation();
			HashSet<ValueTuple<Location, int>> result;
			bool flag = profession == null || !DomainManager.Extra.TryGetAnimalAttackInRange(taiwuLocation, 2, true, out result);
			Dictionary<Location, List<short>> result2;
			if (flag)
			{
				result2 = null;
			}
			else
			{
				Dictionary<Location, List<short>> allAnimal = new Dictionary<Location, List<short>>();
				sbyte canGetGrade = profession.GetSeniorityCallAnimalGrade();
				foreach (ValueTuple<Location, int> valueTuple in result)
				{
					Location location = valueTuple.Item1;
					int animalId = valueTuple.Item2;
					GameData.Domains.Character.Animal animal;
					bool flag2 = !DomainManager.Extra.TryGetAnimal(animalId, out animal);
					if (!flag2)
					{
						sbyte carrierGrade = EventHelper.GetCarrierGradeByAnimal(animal.CharacterTemplateId);
						bool flag3 = carrierGrade > canGetGrade;
						if (!flag3)
						{
							bool flag4 = !allAnimal.ContainsKey(location);
							if (flag4)
							{
								allAnimal.Add(location, new List<short>());
							}
							allAnimal[location].Add(animal.CharacterTemplateId);
						}
					}
				}
				result2 = allAnimal;
			}
			return result2;
		}

		// Token: 0x060021E6 RID: 8678 RVA: 0x001AE02C File Offset: 0x001AC22C
		public static List<ValueTuple<ItemKey, int>> HunterGetCarriers(Dictionary<Location, List<short>> animals, ref List<ItemKey> escapeCarriers)
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			List<ValueTuple<ItemKey, int>> itemKeys = new List<ValueTuple<ItemKey, int>>();
			foreach (KeyValuePair<Location, List<short>> pair in animals)
			{
				for (int i = 0; i < pair.Value.Count; i++)
				{
					short animalTemplateId = pair.Value[i];
					bool flag = !Config.Character.Instance[animalTemplateId].RandomAnimalAttack;
					if (!flag)
					{
						ItemKey itemKey = DomainManager.Extra.GetFleeCarrierByLocation(animalTemplateId, pair.Key);
						bool flag2 = itemKey.IsValid();
						if (flag2)
						{
							escapeCarriers.Add(itemKey);
							DomainManager.Extra.RemoveFleeCarrierLocation(EventHelper.Domain.MainThreadDataContext, itemKey);
							EventHelper.AddItemToRole(taiwu, itemKey, 1, -1);
						}
						else
						{
							CarrierItem carrierItem = EventHelper.GetCarrierConfigByAnimal(animalTemplateId);
							itemKey = EventHelper.AddItemToRole(taiwu, 4, carrierItem.TemplateId, 1, -1);
						}
						EventHelper.RemoveSingleMapAnimalOnBlock(pair.Key, animalTemplateId);
						itemKeys.Add(new ValueTuple<ItemKey, int>(itemKey, 1));
					}
				}
			}
			bool flag3 = itemKeys.Count > 0;
			List<ValueTuple<ItemKey, int>> result;
			if (flag3)
			{
				result = itemKeys;
			}
			else
			{
				result = null;
			}
			return result;
		}

		// Token: 0x060021E7 RID: 8679 RVA: 0x001AE19C File Offset: 0x001AC39C
		public static CarrierItem GetCarrierConfigByAnimal(short animalCharacterTemplateId)
		{
			return ProfessionSkillHandle.GetCarrierByAnimal(animalCharacterTemplateId);
		}

		// Token: 0x060021E8 RID: 8680 RVA: 0x001AE1A4 File Offset: 0x001AC3A4
		public static sbyte GetCarrierGradeByAnimal(short animalCharacterTemplateId)
		{
			bool flag = FiveLoongDlcEntry.IsCharacterLoong(animalCharacterTemplateId) || FiveLoongDlcEntry.IsCharacterMinionLoong(animalCharacterTemplateId);
			sbyte result;
			if (flag)
			{
				result = 8;
			}
			else
			{
				result = EventHelper.GetCarrierConfigByAnimal(animalCharacterTemplateId).Grade;
			}
			return result;
		}

		// Token: 0x060021E9 RID: 8681 RVA: 0x001AE1DC File Offset: 0x001AC3DC
		public static void FilterItemForHunterSkill3(EventArgBox argBox)
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			EventSelectItemData selectItemData;
			bool flag = !argBox.Get<EventSelectItemData>("SelectItemInfo", out selectItemData);
			if (flag)
			{
				selectItemData = new EventSelectItemData();
				argBox.Set("SelectItemInfo", selectItemData);
			}
			SelectItemFilter filter = default(SelectItemFilter);
			filter.Key = "SelectItemKey";
			filter.DisplayDataFilterId = 0;
			filter.FilterTemplateId = -1;
			List<ItemDisplayData> inventoryItems = DomainManager.Character.GetAllInventoryItems(taiwu.GetId());
			foreach (ItemDisplayData itemDisplayData in inventoryItems)
			{
				ItemKey itemKey = itemDisplayData.Key;
				bool isValid = ProfessionSkillHandle.IsItemCanConvertToAnimalCharacter(itemKey);
				bool flag2 = !isValid;
				if (!flag2)
				{
					selectItemData.CanSelectItemList.Add(itemDisplayData);
				}
			}
			selectItemData.FilterList.Add(filter);
			selectItemData.VisibleItemFilterTypes = new List<int>
			{
				0,
				3
			};
			selectItemData.ConfirmDisableTips = "LK_Event_SelectItemMode_ConfirmButtonTips_NoBeastCarrier";
		}

		// Token: 0x060021EA RID: 8682 RVA: 0x001AE2F8 File Offset: 0x001AC4F8
		public static void ConfirmCreateSpecialTeammateFromBeastCarrier(ItemKey sourceItemKey, string customGivenName)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			ProfessionSkillHandle.HunterSkill_ItemToAnimalCharacter(context, sourceItemKey, customGivenName);
		}

		// Token: 0x060021EB RID: 8683 RVA: 0x001AE31A File Offset: 0x001AC51A
		public static void CivilianSkill_MakeCharacterLeaveSect(GameData.Domains.Character.Character character)
		{
			ProfessionSkillHandle.CivilianSkill_MakeCharacterLeaveSect(EventHelper.Domain.MainThreadDataContext, character);
		}

		// Token: 0x060021EC RID: 8684 RVA: 0x001AE330 File Offset: 0x001AC530
		public static int GetCivilianSkill2Cost(GameData.Domains.Character.Character character, sbyte resourceType)
		{
			bool flag = resourceType != 7 && resourceType != 6 && resourceType != 8;
			if (flag)
			{
				DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(26, 1);
				defaultInterpolatedStringHandler.AppendLiteral("Unsupported ResourceType: ");
				defaultInterpolatedStringHandler.AppendFormatted<sbyte>(resourceType);
				throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
			}
			sbyte grade = character.GetOrganizationInfo().Grade;
			short influencePower = EventHelper.GetCharacterInfluencePower(character.GetId());
			int value = (int)((short)((grade + 1) * (grade + 1) * 3) * influencePower);
			bool flag2 = resourceType == 7;
			int result;
			if (flag2)
			{
				result = value;
			}
			else
			{
				bool flag3 = resourceType == 6;
				if (flag3)
				{
					result = value * 10;
				}
				else
				{
					result = value * 5;
				}
			}
			return result;
		}

		// Token: 0x060021ED RID: 8685 RVA: 0x001AE3D0 File Offset: 0x001AC5D0
		[Obsolete]
		public static bool CivilianSkill0Useful(OrganizationItem orgCfg)
		{
			return DomainManager.Extra.CivilianSkill0Useful(orgCfg);
		}

		// Token: 0x060021EE RID: 8686 RVA: 0x001AE3F0 File Offset: 0x001AC5F0
		public static int GetLifeTimeAddValue(ItemKey itemKey)
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			short medicineAttainment = taiwu.GetLifeSkillAttainment(8);
			short poisonAttainment = taiwu.GetLifeSkillAttainment(9);
			sbyte grade = ItemTemplateHelper.GetGrade(itemKey.ItemType, itemKey.TemplateId);
			return (int)((short)(grade + 1) * (medicineAttainment + poisonAttainment) / 100);
		}

		// Token: 0x060021EF RID: 8687 RVA: 0x001AE43C File Offset: 0x001AC63C
		public static int GetDoctorSkillMoneyValue(ItemKey itemKey)
		{
			ProfessionData professionData = EventHelper.GetProfessionData(13);
			bool flag = professionData == null;
			int result;
			if (flag)
			{
				result = 0;
			}
			else
			{
				int basePrice = DomainManager.Item.GetBaseItem(itemKey).GetValue();
				float percent = (float)professionData.GetSeniorityDoctorMedicinePricePercent() / 100f;
				float medicinePrice = (float)basePrice * percent;
				result = (int)medicinePrice;
			}
			return result;
		}

		// Token: 0x060021F0 RID: 8688 RVA: 0x001AE490 File Offset: 0x001AC690
		public static short GetDoctorSkill0FavorabilityChange(MedicineItem config)
		{
			ProfessionData professionData = EventHelper.GetProfessionData(13);
			float favorabilityChange = (float)ItemTemplateHelper.GetBaseFavorabilityChange(config.ItemType, config.TemplateId) * ((float)professionData.GetSeniorityDoctorFavorAddPercent() / 100f);
			return EventHelper.ClampFavorabilityChangeValue((int)favorabilityChange);
		}

		// Token: 0x060021F1 RID: 8689 RVA: 0x001AE4D4 File Offset: 0x001AC6D4
		public static short GetChangeDisorderOfQiByDoctorSkill0()
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			short medicineAttainment = taiwu.GetLifeSkillAttainment(8);
			short toxicologyAttainment = taiwu.GetLifeSkillAttainment(9);
			return (medicineAttainment + toxicologyAttainment) * 5;
		}

		// Token: 0x060021F2 RID: 8690 RVA: 0x001AE508 File Offset: 0x001AC708
		public static bool CanRecoverHealth(GameData.Domains.Character.Character character, ItemKey itemKey)
		{
			Tester.Assert(itemKey.ItemType == 8, "");
			MedicineItem config = Config.Medicine.Instance[itemKey.TemplateId];
			Tester.Assert(config.EffectType == EMedicineEffectType.RecoverHealth, "");
			bool flag = config.EffectValue < 0;
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				short leftMaxHealth = DomainManager.Character.GetLeftMaxHealth(character.GetId());
				short health = character.GetHealth();
				bool flag2 = leftMaxHealth >= 0 && leftMaxHealth > health;
				result = flag2;
			}
			return result;
		}

		// Token: 0x060021F3 RID: 8691 RVA: 0x001AE598 File Offset: 0x001AC798
		public static void DoctorSkill3Execute(GameData.Domains.Character.Character character)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			int value = (int)taiwu.GetBaseMaxHealth() * GlobalConfig.Instance.DoctorSkill3_HealthTransferPercent / 100;
			character.ChangeBaseMaxHealth(context, value, false);
			taiwu.ChangeBaseMaxHealth(context, -value, false);
			bool flag = taiwu.GetHealth() > taiwu.GetLeftMaxHealth(false);
			if (flag)
			{
				taiwu.SetHealth(taiwu.GetLeftMaxHealth(false), context);
			}
			int delta = value * GlobalConfig.Instance.DoctorSkill3_FavorabilityChangePercent;
			DomainManager.Character.DirectlyChangeFavorabilityOptional(context, character, taiwu, delta, 3);
			DomainManager.Character.AddFavorabilityChangeInstantNotification(character, taiwu, delta > 0);
			LifeRecordCollection lifeRecordCollection = DomainManager.LifeRecord.GetLifeRecordCollection();
			int currDate = DomainManager.World.GetCurrDate();
			lifeRecordCollection.AddProfessionDoctorLifeTransition(character.GetId(), currDate, taiwu.GetId(), taiwu.GetLocation());
		}

		// Token: 0x060021F4 RID: 8692 RVA: 0x001AE66C File Offset: 0x001AC86C
		public static void AddSeniorityOnFindMaterialAdventure(ItemKey itemKey)
		{
			bool flag = DomainManager.Adventure.GetCurAdventureId() < 0;
			if (!flag)
			{
				sbyte type = DomainManager.Adventure.AdventureCfg.Type;
				bool isFindMaterial = type >= 9 && type <= 14;
				bool flag2 = isFindMaterial && itemKey.ItemType == 5;
				if (flag2)
				{
					int value = DomainManager.Item.GetValue(itemKey);
					int seniority = ProfessionFormulaImpl.Calculate(6, value);
					DomainManager.Extra.ChangeProfessionSeniority(EventHelper.Domain.MainThreadDataContext, 0, seniority, true, false);
				}
			}
		}

		// Token: 0x060021F5 RID: 8693 RVA: 0x001AE6F4 File Offset: 0x001AC8F4
		public static void OnEnterPraiseOrAbuse(int charId)
		{
			GameData.Domains.Character.Character character = DomainManager.Character.GetElement_Objects(charId);
			sbyte grade = character.GetOrganizationInfo().Grade;
			int addSeniority = ProfessionFormulaImpl.Calculate(61, (int)grade);
			DomainManager.Extra.ChangeProfessionSeniority(EventHelper.Domain.MainThreadDataContext, 9, addSeniority, true, false);
		}

		// Token: 0x060021F6 RID: 8694 RVA: 0x001AE73D File Offset: 0x001AC93D
		public static void ExtraProfessionSkillSetFeature(int featureId)
		{
			DomainManager.Extra.ExtraProfessionSkillSetFeature(EventHelper.Domain.MainThreadDataContext, (short)featureId);
		}

		// Token: 0x060021F7 RID: 8695 RVA: 0x001AE758 File Offset: 0x001AC958
		public static bool HasFriendOrFamilyRelation(int charId)
		{
			return EventHelper.RelationTypeToNormalInteractionType(charId) != ENormalInteractionType.Invalid;
		}

		// Token: 0x060021F8 RID: 8696 RVA: 0x001AE778 File Offset: 0x001AC978
		public static ENormalInteractionType RelationTypeToNormalInteractionType(int charId)
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			RelatedCharacter relatedCharacterToTaiwu;
			RelatedCharacter relatedCharacterToCharacter;
			bool flag = DomainManager.Character.TryGetRelation(taiwu.GetId(), charId, out relatedCharacterToTaiwu) && DomainManager.Character.TryGetRelation(charId, taiwu.GetId(), out relatedCharacterToCharacter);
			if (flag)
			{
				bool flag2 = RelationType.HasRelation(relatedCharacterToTaiwu.RelationType, 512) || RelationType.HasRelation(relatedCharacterToTaiwu.RelationType, 8192) || RelationType.HasRelation(relatedCharacterToTaiwu.RelationType, 256) || RelationType.HasRelation(relatedCharacterToTaiwu.RelationType, 32) || RelationType.HasRelation(relatedCharacterToTaiwu.RelationType, 4);
				if (flag2)
				{
					return ENormalInteractionType.FriendSet;
				}
				bool flag3 = RelationType.HasRelation(relatedCharacterToTaiwu.RelationType, 1024) || (RelationType.HasRelation(relatedCharacterToTaiwu.RelationType, 16384) && RelationType.HasRelation(relatedCharacterToCharacter.RelationType, 16384));
				if (flag3)
				{
					return ENormalInteractionType.LoveSet;
				}
				bool flag4 = RelationType.HasRelation(relatedCharacterToTaiwu.RelationType, 128) || RelationType.HasRelation(relatedCharacterToTaiwu.RelationType, 2) || RelationType.HasRelation(relatedCharacterToTaiwu.RelationType, 16);
				if (flag4)
				{
					return ENormalInteractionType.ChildSet;
				}
				bool flag5 = RelationType.HasRelation(relatedCharacterToTaiwu.RelationType, 64) || RelationType.HasRelation(relatedCharacterToTaiwu.RelationType, 1) || RelationType.HasRelation(relatedCharacterToTaiwu.RelationType, 8);
				if (flag5)
				{
					return ENormalInteractionType.ParentSet;
				}
				bool flag6 = RelationType.HasRelation(relatedCharacterToTaiwu.RelationType, 2048);
				if (flag6)
				{
					return ENormalInteractionType.TeacherSet;
				}
			}
			return ENormalInteractionType.Invalid;
		}

		// Token: 0x060021F9 RID: 8697 RVA: 0x001AE908 File Offset: 0x001ACB08
		public static bool IsFriendOrFamilyInteractionCooldown(int charId)
		{
			sbyte b;
			return DomainManager.Extra.IsFriendOrFamilyInteractionCooldown(charId, out b);
		}

		// Token: 0x060021FA RID: 8698 RVA: 0x001AE922 File Offset: 0x001ACB22
		public static void SetFriendOrFamilySendGiftResult(int charId, EventArgBox argBox)
		{
			DomainManager.Extra.SetFriendOrFamilySendGiftResult(EventHelper.Domain.MainThreadDataContext, charId, argBox);
		}

		// Token: 0x060021FB RID: 8699 RVA: 0x001AE93C File Offset: 0x001ACB3C
		public static void ExecuteFriendOrFamilySendGift(int charId, EventArgBox argBox)
		{
			GameData.Domains.Character.Character character;
			bool flag = !DomainManager.Character.TryGetElement_Objects(charId, out character);
			if (!flag)
			{
				DataContext context = EventHelper.Domain.MainThreadDataContext;
				GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
				bool addExp = false;
				bool isMiscResource = false;
				bool flag2 = argBox.Get("AddExp", ref addExp) && addExp;
				if (flag2)
				{
					int expCount = 0;
					argBox.Get("AddExpCount", ref expCount);
					EventHelper.ChangeRoleExp(taiwu, expCount);
				}
				else
				{
					bool flag3 = argBox.Get("IsMiscResource", ref isMiscResource) && isMiscResource;
					if (flag3)
					{
						sbyte resourceType = 0;
						int resourceCount = 0;
						argBox.Get("ResourceType", ref resourceType);
						argBox.Get("Count", ref resourceCount);
						EventHelper.ChangeRoleResource(character, resourceType, -resourceCount, true);
						EventHelper.ChangeRoleResource(taiwu, resourceType, resourceCount, true);
					}
					else
					{
						ItemKey itemKey;
						argBox.Get<ItemKey>("ItemKey", out itemKey);
						character.RemoveInventoryItem(context, itemKey, 1, false, false);
						taiwu.AddInventoryItem(context, itemKey, 1, false);
					}
				}
				sbyte cooldown = 0;
				argBox.Get("Cooldown", ref cooldown);
				sbyte cooldownDict;
				bool flag4 = DomainManager.Extra.TryGetElement_FriendOrFamilyInteractionCooldownDict(charId, out cooldownDict);
				if (flag4)
				{
					DomainManager.Extra.SetFriendOrFamilyInteractionCooldown(context, charId, cooldown);
				}
				else
				{
					DomainManager.Extra.AddFriendOrFamilyInteractionCooldown(context, charId, cooldown);
				}
			}
		}

		// Token: 0x060021FC RID: 8700 RVA: 0x001AEA78 File Offset: 0x001ACC78
		public static void RequestDemandAgree(EventArgBox argBox)
		{
			short monthlyEventTemplateId = -1;
			argBox.Get("MonthlyEventTemplateId", ref monthlyEventTemplateId);
			bool flag = monthlyEventTemplateId == 0;
			if (flag)
			{
				EventHelper.RequestHealOuterInjuryByItemAgree(argBox);
			}
			else
			{
				bool flag2 = monthlyEventTemplateId == 1;
				if (flag2)
				{
					EventHelper.RequestHealInnerInjuryByItemAgree(argBox);
				}
				else
				{
					bool flag3 = monthlyEventTemplateId == 2;
					if (flag3)
					{
						EventHelper.RequestHealPoisonByItemAgree(argBox);
					}
					else
					{
						bool flag4 = monthlyEventTemplateId == 3;
						if (flag4)
						{
							EventHelper.RequestHealthAgree(argBox);
						}
						else
						{
							bool flag5 = monthlyEventTemplateId == 4;
							if (flag5)
							{
								EventHelper.RequestHealDisorderOfQiAgree(argBox);
							}
							else
							{
								bool flag6 = monthlyEventTemplateId == 5;
								if (flag6)
								{
									EventHelper.RequestNeiliAgree(argBox);
								}
								else
								{
									bool flag7 = monthlyEventTemplateId == 6;
									if (flag7)
									{
										EventHelper.RequestKillWugAgree(argBox);
									}
									else
									{
										bool flag8 = monthlyEventTemplateId == 7;
										if (flag8)
										{
											EventHelper.RequestFoodAgree(argBox);
										}
										else
										{
											bool flag9 = monthlyEventTemplateId == 8;
											if (flag9)
											{
												EventHelper.RequestTeaWineAgree(argBox);
											}
											else
											{
												bool flag10 = monthlyEventTemplateId == 9;
												if (flag10)
												{
													EventHelper.RequestResourceAgree(argBox);
												}
												else
												{
													bool flag11 = monthlyEventTemplateId == 10;
													if (flag11)
													{
														EventHelper.RequestItemAgree(argBox);
													}
													else
													{
														bool flag12 = monthlyEventTemplateId == 11;
														if (flag12)
														{
															EventHelper.RequestRepairItemAgree(argBox);
														}
														else
														{
															bool flag13 = monthlyEventTemplateId == 12;
															if (flag13)
															{
																EventHelper.RequestAddPoisonToItemAgree(argBox);
															}
															else
															{
																bool flag14 = monthlyEventTemplateId == 13;
																if (flag14)
																{
																	EventHelper.RequestInstructionOnReadingLifeSkillAgree(argBox);
																}
																else
																{
																	bool flag15 = monthlyEventTemplateId == 14;
																	if (flag15)
																	{
																		EventHelper.RequestInstructionOnBreakoutAgree(argBox);
																	}
																}
															}
														}
													}
												}
											}
										}
									}
								}
							}
						}
					}
				}
			}
		}

		// Token: 0x060021FD RID: 8701 RVA: 0x001AEBCC File Offset: 0x001ACDCC
		public static void RequestHealOuterInjuryByItemAgree(EventArgBox argBox)
		{
			ItemKey targetItem;
			argBox.Get<ItemKey>("MonthlyEvent_arg3", out targetItem);
			RequestHealInjuryAction action = new RequestHealInjuryAction
			{
				ItemUsed = targetItem,
				IsInnerInjury = false,
				AgreeToRequest = true
			};
			GameData.Domains.Character.Character selfChar = argBox.GetCharacter("MonthlyEvent_arg0");
			GameData.Domains.Character.Character targetChar = argBox.GetCharacter("RoleTaiwu");
			bool flag = action.CheckValid(selfChar, targetChar);
			if (flag)
			{
				EventHelper.ApplyGeneralActionChanges(action, selfChar, targetChar);
			}
		}

		// Token: 0x060021FE RID: 8702 RVA: 0x001AEC34 File Offset: 0x001ACE34
		public static void RequestHealInnerInjuryByItemAgree(EventArgBox argBox)
		{
			ItemKey targetItem;
			argBox.Get<ItemKey>("MonthlyEvent_arg3", out targetItem);
			RequestHealInjuryAction action = new RequestHealInjuryAction
			{
				ItemUsed = targetItem,
				IsInnerInjury = true,
				AgreeToRequest = true
			};
			GameData.Domains.Character.Character selfChar = argBox.GetCharacter("MonthlyEvent_arg0");
			GameData.Domains.Character.Character targetChar = argBox.GetCharacter("RoleTaiwu");
			bool flag = action.CheckValid(selfChar, targetChar);
			if (flag)
			{
				EventHelper.ApplyGeneralActionChanges(action, selfChar, targetChar);
			}
		}

		// Token: 0x060021FF RID: 8703 RVA: 0x001AEC9C File Offset: 0x001ACE9C
		public static void RequestHealPoisonByItemAgree(EventArgBox argBox)
		{
			ItemKey targetItem;
			argBox.Get<ItemKey>("MonthlyEvent_arg3", out targetItem);
			int poisonType = -1;
			argBox.Get("MonthlyEvent_arg4", ref poisonType);
			RequestDetoxPoisonAction action = new RequestDetoxPoisonAction
			{
				ItemUsed = targetItem,
				AgreeToRequest = true,
				PoisonType = (sbyte)poisonType
			};
			GameData.Domains.Character.Character selfChar = argBox.GetCharacter("MonthlyEvent_arg0");
			GameData.Domains.Character.Character targetChar = argBox.GetCharacter("RoleTaiwu");
			bool flag = action.CheckValid(selfChar, targetChar);
			if (flag)
			{
				EventHelper.ApplyGeneralActionChanges(action, selfChar, targetChar);
			}
		}

		// Token: 0x06002200 RID: 8704 RVA: 0x001AED18 File Offset: 0x001ACF18
		public static void RequestHealthAgree(EventArgBox argBox)
		{
			ItemKey targetItem;
			argBox.Get<ItemKey>("MonthlyEvent_arg3", out targetItem);
			RequestIncreaseHealthAction action = new RequestIncreaseHealthAction
			{
				ItemUsed = targetItem,
				AgreeToRequest = true
			};
			GameData.Domains.Character.Character selfChar = argBox.GetCharacter("MonthlyEvent_arg0");
			GameData.Domains.Character.Character targetChar = argBox.GetCharacter("RoleTaiwu");
			bool flag = action.CheckValid(selfChar, targetChar);
			if (flag)
			{
				EventHelper.ApplyGeneralActionChanges(action, selfChar, targetChar);
			}
		}

		// Token: 0x06002201 RID: 8705 RVA: 0x001AED78 File Offset: 0x001ACF78
		public static void RequestHealDisorderOfQiAgree(EventArgBox argBox)
		{
			ItemKey targetItem;
			argBox.Get<ItemKey>("MonthlyEvent_arg3", out targetItem);
			RequestRestoreQiAction action = new RequestRestoreQiAction
			{
				ItemUsed = targetItem,
				AgreeToRequest = true
			};
			GameData.Domains.Character.Character selfChar = argBox.GetCharacter("MonthlyEvent_arg0");
			GameData.Domains.Character.Character targetChar = argBox.GetCharacter("RoleTaiwu");
			bool flag = action.CheckValid(selfChar, targetChar);
			if (flag)
			{
				EventHelper.ApplyGeneralActionChanges(action, selfChar, targetChar);
			}
		}

		// Token: 0x06002202 RID: 8706 RVA: 0x001AEDD8 File Offset: 0x001ACFD8
		public static void RequestNeiliAgree(EventArgBox argBox)
		{
			ItemKey targetItem;
			argBox.Get<ItemKey>("MonthlyEvent_arg3", out targetItem);
			RequestIncreaseNeiliAction action = new RequestIncreaseNeiliAction
			{
				ItemUsed = targetItem,
				AgreeToRequest = true
			};
			GameData.Domains.Character.Character selfChar = argBox.GetCharacter("MonthlyEvent_arg0");
			GameData.Domains.Character.Character targetChar = argBox.GetCharacter("RoleTaiwu");
			bool flag = action.CheckValid(selfChar, targetChar);
			if (flag)
			{
				EventHelper.ApplyGeneralActionChanges(action, selfChar, targetChar);
			}
		}

		// Token: 0x06002203 RID: 8707 RVA: 0x001AEE38 File Offset: 0x001AD038
		public static void RequestKillWugAgree(EventArgBox argBox)
		{
			ItemKey targetItem;
			argBox.Get<ItemKey>("MonthlyEvent_arg3", out targetItem);
			ItemKey wugItem;
			argBox.Get<ItemKey>("MonthlyEvent_arg4", out wugItem);
			RequestKillWugAction action = new RequestKillWugAction
			{
				ItemUsed = targetItem,
				AgreeToRequest = true,
				WugType = Config.Medicine.Instance[wugItem.TemplateId].WugType
			};
			GameData.Domains.Character.Character selfChar = argBox.GetCharacter("MonthlyEvent_arg0");
			GameData.Domains.Character.Character targetChar = argBox.GetCharacter("RoleTaiwu");
			bool flag = action.CheckValid(selfChar, targetChar);
			if (flag)
			{
				EventHelper.ApplyGeneralActionChanges(action, selfChar, targetChar);
			}
		}

		// Token: 0x06002204 RID: 8708 RVA: 0x001AEEC4 File Offset: 0x001AD0C4
		public static void RequestFoodAgree(EventArgBox argBox)
		{
			ItemKey targetItem;
			argBox.Get<ItemKey>("MonthlyEvent_arg3", out targetItem);
			int mainAttributeType = -1;
			argBox.Get("MonthlyEvent_arg4", ref mainAttributeType);
			RequestRecoverMainAttributeAction action = new RequestRecoverMainAttributeAction
			{
				ItemUsed = targetItem,
				AgreeToRequest = true,
				MainAttributeType = (sbyte)mainAttributeType
			};
			GameData.Domains.Character.Character selfChar = argBox.GetCharacter("MonthlyEvent_arg0");
			GameData.Domains.Character.Character targetChar = argBox.GetCharacter("RoleTaiwu");
			bool flag = action.CheckValid(selfChar, targetChar);
			if (flag)
			{
				EventHelper.ApplyGeneralActionChanges(action, selfChar, targetChar);
			}
		}

		// Token: 0x06002205 RID: 8709 RVA: 0x001AEF40 File Offset: 0x001AD140
		public static void RequestTeaWineAgree(EventArgBox argBox)
		{
			ItemKey targetItem;
			argBox.Get<ItemKey>("MonthlyEvent_arg3", out targetItem);
			RequestIncreaseHappinessAction action = new RequestIncreaseHappinessAction
			{
				ItemUsed = targetItem,
				AgreeToRequest = true
			};
			GameData.Domains.Character.Character selfChar = argBox.GetCharacter("MonthlyEvent_arg0");
			GameData.Domains.Character.Character targetChar = argBox.GetCharacter("RoleTaiwu");
			bool flag = action.CheckValid(selfChar, targetChar);
			if (flag)
			{
				EventHelper.ApplyGeneralActionChanges(action, selfChar, targetChar);
			}
		}

		// Token: 0x06002206 RID: 8710 RVA: 0x001AEFA0 File Offset: 0x001AD1A0
		public static void RequestResourceAgree(EventArgBox argBox)
		{
			GameData.Domains.Character.Character selfChar = argBox.GetCharacter("MonthlyEvent_arg0");
			GameData.Domains.Character.Character targetChar = argBox.GetCharacter("MonthlyEvent_arg2");
			int needValue = -1;
			argBox.Get("MonthlyEvent_arg3", ref needValue);
			int needResType = -1;
			argBox.Get("MonthlyEvent_arg4", ref needResType);
			RequestResourceAction action = new RequestResourceAction
			{
				AgreeToRequest = true,
				Amount = needValue,
				ResourceType = (sbyte)needResType
			};
			bool flag = action.CheckValid(selfChar, targetChar);
			if (flag)
			{
				EventHelper.ApplyGeneralActionChanges(action, selfChar, targetChar);
			}
		}

		// Token: 0x06002207 RID: 8711 RVA: 0x001AF020 File Offset: 0x001AD220
		public static void RequestItemAgree(EventArgBox argBox)
		{
			GameData.Domains.Character.Character selfChar = argBox.GetCharacter("MonthlyEvent_arg0");
			GameData.Domains.Character.Character targetChar = argBox.GetCharacter("MonthlyEvent_arg2");
			ItemKey targetItem;
			argBox.Get<ItemKey>("MonthlyEvent_arg3", out targetItem);
			int needAmount = -1;
			argBox.Get("MonthlyEvent_arg4", ref needAmount);
			RequestItemAction action = new RequestItemAction
			{
				AgreeToRequest = true,
				Amount = needAmount,
				TargetItem = targetItem
			};
			bool flag = action.CheckValid(selfChar, targetChar);
			if (flag)
			{
				EventHelper.ApplyGeneralActionChanges(action, selfChar, targetChar);
			}
		}

		// Token: 0x06002208 RID: 8712 RVA: 0x001AF09C File Offset: 0x001AD29C
		public static void RequestRepairItemAgree(EventArgBox argBox)
		{
			GameData.Domains.Character.Character selfChar = argBox.GetCharacter("MonthlyEvent_arg0");
			GameData.Domains.Character.Character targetChar = argBox.GetCharacter("MonthlyEvent_arg2");
			ItemKey targetItem;
			argBox.Get<ItemKey>("MonthlyEvent_arg3", out targetItem);
			ItemKey useItem;
			argBox.Get<ItemKey>("MonthlyEvent_arg4", out useItem);
			int needValue = -1;
			argBox.Get("MonthlyEvent_arg5", ref needValue);
			int needResType = -1;
			argBox.Get("MonthlyEvent_arg6", ref needResType);
			RequestRepairItemAction action = new RequestRepairItemAction
			{
				TargetItem = targetItem,
				AgreeToRequest = true,
				ToolUsed = useItem,
				ResourceAmount = needValue,
				ResourceType = (sbyte)needResType
			};
			bool flag = action.CheckValid(selfChar, targetChar);
			if (flag)
			{
				EventHelper.ApplyGeneralActionChanges(action, selfChar, targetChar);
			}
		}

		// Token: 0x06002209 RID: 8713 RVA: 0x001AF148 File Offset: 0x001AD348
		public static void RequestAddPoisonToItemAgree(EventArgBox argBox)
		{
			GameData.Domains.Character.Character selfChar = argBox.GetCharacter("MonthlyEvent_arg0");
			GameData.Domains.Character.Character targetChar = argBox.GetCharacter("MonthlyEvent_arg2");
			ItemKey targetItem;
			argBox.Get<ItemKey>("MonthlyEvent_arg3", out targetItem);
			ItemKey poison;
			argBox.Get<ItemKey>("MonthlyEvent_arg4", out poison);
			RequestAddPoisonToItemAction action = new RequestAddPoisonToItemAction
			{
				TargetItem = targetItem,
				AgreeToRequest = true,
				PoisonUsed = poison
			};
			action.CheckValid(selfChar, targetChar);
			EventHelper.ApplyGeneralActionChanges(action, selfChar, targetChar);
		}

		// Token: 0x0600220A RID: 8714 RVA: 0x001AF1BC File Offset: 0x001AD3BC
		public static void RequestInstructionOnReadingLifeSkillAgree(EventArgBox argBox)
		{
			GameData.Domains.Character.Character selfChar = argBox.GetCharacter("MonthlyEvent_arg0");
			GameData.Domains.Character.Character targetChar = argBox.GetCharacter("MonthlyEvent_arg2");
			ItemKey bookItem;
			argBox.Get<ItemKey>("MonthlyEvent_arg3", out bookItem);
			int pageId = 0;
			argBox.Get("MonthlyEvent_arg4", ref pageId);
			LifeSkillReadingDemandAction action = new LifeSkillReadingDemandAction
			{
				AgreeToRequest = true,
				BookItemKey = bookItem,
				PageId = (byte)(pageId - 1)
			};
			bool flag = action.CheckValid(selfChar, targetChar);
			if (flag)
			{
				EventHelper.ApplyGeneralActionChanges(action, selfChar, targetChar);
			}
		}

		// Token: 0x0600220B RID: 8715 RVA: 0x001AF23C File Offset: 0x001AD43C
		public static void RequestInstructionOnBreakoutAgree(EventArgBox argBox)
		{
			GameData.Domains.Character.Character selfChar = argBox.GetCharacter("MonthlyEvent_arg0");
			GameData.Domains.Character.Character targetChar = argBox.GetCharacter("MonthlyEvent_arg2");
			int combatSkillId = -1;
			argBox.Get("MonthlyEvent_arg3", ref combatSkillId);
			BreakingDemandAction action = new BreakingDemandAction
			{
				AgreeToRequest = true,
				CombatSkillTemplateId = (short)combatSkillId
			};
			bool flag = action.CheckValid(selfChar, targetChar);
			if (flag)
			{
				EventHelper.ApplyGeneralActionChanges(action, selfChar, targetChar);
			}
		}

		// Token: 0x0600220C RID: 8716 RVA: 0x001AF2A0 File Offset: 0x001AD4A0
		public static short GetResourceFavorabilityChange(sbyte resourceType, int amount)
		{
			return AiHelper.GeneralActionConstants.GetResourceFavorabilityChange(resourceType, amount);
		}

		// Token: 0x0600220D RID: 8717 RVA: 0x001AF2BC File Offset: 0x001AD4BC
		public static short GetResourceHappinessChange(sbyte resourceType, int amount)
		{
			return (short)AiHelper.GeneralActionConstants.GetResourceHappinessChange(resourceType, amount);
		}

		// Token: 0x0600220E RID: 8718 RVA: 0x001AF2D8 File Offset: 0x001AD4D8
		public unsafe static void ConfiscateResource(int charId, bool onlyTakeOverflow = false)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			GameData.Domains.Character.Character character = DomainManager.Character.GetElement_Objects(charId);
			OrganizationInfo orgInfo = character.GetOrganizationInfo();
			bool flag = !OrganizationDomain.IsSect(orgInfo.OrgTemplateId) || orgInfo.SettlementId < 0;
			if (!flag)
			{
				ResourceInts resources = onlyTakeOverflow ? character.GetResourcesAboveSatisfyingThreshold() : (*character.GetResources());
				Settlement settlement = DomainManager.Organization.GetSettlement(orgInfo.SettlementId);
				settlement.ConfiscateResources(context, character, ref resources);
			}
		}

		// Token: 0x0600220F RID: 8719 RVA: 0x001AF35A File Offset: 0x001AD55A
		public static SecretInformationCollection GetSecretInformationCollection()
		{
			return DomainManager.Information.GetSecretInformationCollection();
		}

		// Token: 0x06002210 RID: 8720 RVA: 0x001AF368 File Offset: 0x001AD568
		public static void CostSecretInformationUsedCount(int charId, int metaDataId)
		{
			sbyte usedCount = DomainManager.Extra.GetCharacterSecretInformationUsedCount(charId, metaDataId);
			int maxUsedCount = EventHelper.IsSecretInformationBroadcast(metaDataId) ? GlobalConfig.Instance.SecretInformationInBroadcastMaxUseCount : GlobalConfig.Instance.SecretInformationInPrivateMaxUseCount;
			usedCount += 1;
			DomainManager.Extra.SetCharacterSecretInformationUsedCount(EventHelper.Domain.MainThreadDataContext, charId, metaDataId, usedCount);
			bool flag = (int)usedCount > maxUsedCount;
			if (flag)
			{
				DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(49, 4);
				defaultInterpolatedStringHandler.AppendLiteral("taiwu(");
				defaultInterpolatedStringHandler.AppendFormatted<int>(charId);
				defaultInterpolatedStringHandler.AppendLiteral(") used secret information ");
				defaultInterpolatedStringHandler.AppendFormatted<int>(metaDataId);
				defaultInterpolatedStringHandler.AppendLiteral(" in ");
				defaultInterpolatedStringHandler.AppendFormatted<sbyte>(usedCount);
				defaultInterpolatedStringHandler.AppendLiteral(" times(max: ");
				defaultInterpolatedStringHandler.AppendFormatted<int>(maxUsedCount);
				defaultInterpolatedStringHandler.AppendLiteral(")");
				AdaptableLog.Error(defaultInterpolatedStringHandler.ToStringAndClear());
			}
		}

		// Token: 0x06002211 RID: 8721 RVA: 0x001AF445 File Offset: 0x001AD645
		public static int CreateSecretInformationMetaData(int resultOfCollectionAdding, bool withInitialDistribute = true)
		{
			return DomainManager.Information.AddSecretInformationMetaDataWithNecessity(EventHelper.Domain.MainThreadDataContext, resultOfCollectionAdding, withInitialDistribute, true, null);
		}

		// Token: 0x06002212 RID: 8722 RVA: 0x001AF45F File Offset: 0x001AD65F
		public static void DiscardSecretInformation(int charId, int metaDataId)
		{
			DomainManager.Information.DiscardSecretInformation(EventHelper.Domain.MainThreadDataContext, charId, metaDataId);
		}

		// Token: 0x06002213 RID: 8723 RVA: 0x001AF478 File Offset: 0x001AD678
		public static bool DistributeSecretInformationToCharacter(int metaDataId, int charId, int sourceCharId = -1)
		{
			return DomainManager.Information.DistributeSecretInformationToCharacter(EventHelper.Domain.MainThreadDataContext, metaDataId, charId, sourceCharId);
		}

		// Token: 0x06002214 RID: 8724 RVA: 0x001AF4A4 File Offset: 0x001AD6A4
		public static void BroadcastSecretInformation(int metaDataId)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			DomainManager.Information.MakeSecretInformationBroadcastEffect(context, metaDataId, -1);
		}

		// Token: 0x06002215 RID: 8725 RVA: 0x001AF4CC File Offset: 0x001AD6CC
		public static bool DisseminateSecretInformationFromTaiwu(int metaDataId, int targetCharId)
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			int taiwuCharId = taiwu.GetId();
			InformationDomain informationDomain = DomainManager.Information;
			short templateId = informationDomain.CalcSecretInformationTemplateId(metaDataId);
			int cost = 0;
			SecretInformationCharacterDataCollection characterDataCollection;
			SecretInformationCharacterData characterData;
			bool flag = informationDomain.TryGetElement_CharacterSecretInformation(taiwuCharId, out characterDataCollection) && characterDataCollection.Collection.TryGetValue(metaDataId, out characterData);
			if (flag)
			{
				cost = informationDomain.CalcSecretInformationAuthorityCostWhenDisseminatingByCharacter(templateId, taiwu.GetFameType(), informationDomain.GetSecretInformationDisseminatingCountOfBranch(metaDataId, characterData.SecretInformationDisseminationBranch));
			}
			EventHelper.CostSecretInformationUsedCount(taiwuCharId, metaDataId);
			SecretInformationItem config = SecretInformation.Instance.GetItem(templateId);
			HashSet<SecretInformationRelationshipType> relationshipTypes = new HashSet<SecretInformationRelationshipType>();
			int actorId;
			bool flag2 = informationDomain.TryGetSecretInformationCharacter(metaDataId, 0, out actorId);
			if (flag2)
			{
				informationDomain.CheckSecretInformationRelationship(actorId, -1, targetCharId, -1, relationshipTypes);
			}
			int reactorId;
			bool flag3 = informationDomain.TryGetSecretInformationCharacter(metaDataId, 1, out reactorId);
			if (flag3)
			{
				informationDomain.CheckSecretInformationRelationship(reactorId, -1, targetCharId, -1, relationshipTypes);
			}
			bool flag4 = relationshipTypes.Contains(SecretInformationRelationshipType.Enemy) || relationshipTypes.Contains(SecretInformationRelationshipType.Relative) || relationshipTypes.Contains(SecretInformationRelationshipType.Friend) || actorId == targetCharId || reactorId == targetCharId;
			if (flag4)
			{
				ProfessionFormulaItem formula = ProfessionFormula.Instance[33];
				int addSeniority = formula.Calculate(cost, (int)config.SortValue);
				DomainManager.Extra.ChangeProfessionSeniority(EventHelper.Domain.MainThreadDataContext, 4, addSeniority, true, false);
			}
			bool flag5 = EventHelper.DistributeSecretInformationToCharacter(metaDataId, targetCharId, taiwuCharId);
			bool result;
			if (flag5)
			{
				EventHelper.ChangeRoleResource(taiwu, 7, -Math.Min(taiwu.GetResource(7), cost), true);
				ProfessionFormulaItem formula2 = ProfessionFormula.Instance[32];
				int addSeniority2 = formula2.Calculate(cost, (int)config.SortValue);
				DomainManager.Extra.ChangeProfessionSeniority(EventHelper.Domain.MainThreadDataContext, 4, addSeniority2, true, false);
				result = true;
			}
			else
			{
				result = false;
			}
			return result;
		}

		// Token: 0x06002216 RID: 8726 RVA: 0x001AF678 File Offset: 0x001AD878
		public static List<int> GetSecretInformationOfCharacter(int charId, bool includeBroadcast = true)
		{
			return DomainManager.Information.GetSecretInformationOfCharacter(charId, includeBroadcast);
		}

		// Token: 0x06002217 RID: 8727 RVA: 0x001AF698 File Offset: 0x001AD898
		public static bool CharacterHasSecretInformationByTemplateId(int charId, short templateId)
		{
			return DomainManager.Information.CharacterHasSecretInformationByTemplateId(charId, templateId);
		}

		// Token: 0x06002218 RID: 8728 RVA: 0x001AF6B8 File Offset: 0x001AD8B8
		public static SecretInformationItem GetSecretInformationConfig(int metaDataId)
		{
			return DomainManager.Information.GetSecretInformationConfig(metaDataId);
		}

		// Token: 0x06002219 RID: 8729 RVA: 0x001AF6D8 File Offset: 0x001AD8D8
		public static List<int> PickUsableSecretInformationFromMetaDataIdList(int charId, List<int> sourceMetaDataIds)
		{
			List<int> result = new List<int>();
			int i = 0;
			int len = sourceMetaDataIds.Count;
			while (i < len)
			{
				int metaDataId = sourceMetaDataIds[i];
				int maxUsedCount = EventHelper.IsSecretInformationBroadcast(metaDataId) ? GlobalConfig.Instance.SecretInformationInBroadcastMaxUseCount : GlobalConfig.Instance.SecretInformationInPrivateMaxUseCount;
				bool flag = (int)DomainManager.Extra.GetCharacterSecretInformationUsedCount(charId, metaDataId) < maxUsedCount;
				if (flag)
				{
					result.Add(metaDataId);
				}
				i++;
			}
			return result;
		}

		// Token: 0x0600221A RID: 8730 RVA: 0x001AF754 File Offset: 0x001AD954
		public static List<int> GetTypedSecretInformationOfCharacter(int charId, short secretInformationTemplateId, bool includeBroadcast = true)
		{
			return (from metaDataId in EventHelper.GetSecretInformationOfCharacter(charId, includeBroadcast)
			where DomainManager.Information.CalcSecretInformationTemplateId(metaDataId) == secretInformationTemplateId
			select metaDataId).ToList<int>();
		}

		// Token: 0x0600221B RID: 8731 RVA: 0x001AF790 File Offset: 0x001AD990
		public static EventArgBox GetSecretInformationParameters(int metaDataId)
		{
			EventArgBox eventArgBox = new EventArgBox();
			SecretInformationMetaData metaData;
			bool flag = DomainManager.Information.TryGetElement_SecretInformationMetaData(metaDataId, out metaData);
			if (flag)
			{
				DomainManager.Information.MakeSecretInformationEventArgBox(metaData, eventArgBox);
			}
			return eventArgBox;
		}

		// Token: 0x0600221C RID: 8732 RVA: 0x001AF7C9 File Offset: 0x001AD9C9
		public static void ApplySecretInformationTargetEffect(int metaDataId, int targetCharId, short secretInformationEffectTemplateId)
		{
		}

		// Token: 0x0600221D RID: 8733 RVA: 0x001AF7CC File Offset: 0x001AD9CC
		public static void ApplySecretInformationBroadcastEffect(int metaDataId, short secretInformationEffectTemplateId)
		{
			EventHelper.ApplySecretInformationTargetEffect(metaDataId, -1, secretInformationEffectTemplateId);
		}

		// Token: 0x0600221E RID: 8734 RVA: 0x001AF7D8 File Offset: 0x001AD9D8
		public static SecretInformationItem GetSecretInformationItem(short templateId)
		{
			return SecretInformation.Instance.GetItem(templateId);
		}

		// Token: 0x0600221F RID: 8735 RVA: 0x001AF7F8 File Offset: 0x001AD9F8
		public static SecretInformationEffectItem GetSecretInformationEffectItem(short templateId)
		{
			return SecretInformationEffect.Instance.GetItem(templateId);
		}

		// Token: 0x06002220 RID: 8736 RVA: 0x001AF818 File Offset: 0x001ADA18
		public static void StartTradeSecretInformation(int charId, string saveKey)
		{
			EventSelectInformationData selectInformationData = new EventSelectInformationData();
			selectInformationData.RelatedCharacterId = charId;
			selectInformationData.SelectComplete = false;
			selectInformationData.IsForShopping = true;
			selectInformationData.CharacterNameRelatedData = DomainManager.Character.GetNameRelatedData(charId);
			selectInformationData.AvailableData = true;
			selectInformationData.ToSelectSecretInformationDataIdList = DomainManager.Information.RequestShopSecretInformationIdList(EventHelper.Domain.MainThreadDataContext, charId).ToList<int>();
			EventHelper.Domain.SetSelectInformationData(selectInformationData, EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x06002221 RID: 8737 RVA: 0x001AF890 File Offset: 0x001ADA90
		public static void StartInformationSelect(int charId, string saveKey, bool isNormalInformation)
		{
			EventSelectInformationData selectInformationData = new EventSelectInformationData();
			selectInformationData.RelatedCharacterId = charId;
			selectInformationData.SaveKey = saveKey;
			selectInformationData.SelectComplete = false;
			selectInformationData.CharacterNameRelatedData = DomainManager.Character.GetNameRelatedData(charId);
			if (isNormalInformation)
			{
				selectInformationData.ToSelectNormalInformation = DomainManager.Information.GetCharacterNormalInformation(charId);
			}
			else
			{
				SecretInformationDisplayPackage package = DomainManager.Information.GetSecretInformationDisplayPackageForSelections(charId);
				selectInformationData.ToSelectSecretInformationDataIdList = package.SecretInformationDisplayDataList.ConvertAll<int>((SecretInformationDisplayData e) => e.SecretInformationMetaDataId);
			}
			selectInformationData.AvailableData = true;
			EventHelper.Domain.SetSelectInformationData(selectInformationData, EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x06002222 RID: 8738 RVA: 0x001AF940 File Offset: 0x001ADB40
		public static void StartSecretInformationSelectRelateWithB(int charA, int charB, string saveKey)
		{
			EventSelectInformationData selectInformationData = new EventSelectInformationData();
			selectInformationData.RelatedCharacterId = charA;
			selectInformationData.SaveKey = saveKey;
			selectInformationData.SelectComplete = false;
			selectInformationData.CharacterNameRelatedData = DomainManager.Character.GetNameRelatedData(charA);
			SecretInformationDisplayPackage package = DomainManager.Information.GetRelateBSecretInformationDisplayPackageForSelections(charA, charB);
			selectInformationData.ToSelectSecretInformationDataIdList = package.SecretInformationDisplayDataList.ConvertAll<int>((SecretInformationDisplayData e) => e.SecretInformationMetaDataId);
			selectInformationData.AvailableData = true;
			EventHelper.Domain.SetSelectInformationData(selectInformationData, EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x06002223 RID: 8739 RVA: 0x001AF9D4 File Offset: 0x001ADBD4
		public static bool CanGetSecretInformationRelateWithB(int charA, int charB)
		{
			SecretInformationDisplayPackage package = DomainManager.Information.GetRelateBSecretInformationDisplayPackageForSelections(charA, charB);
			return package.SecretInformationDisplayDataList.Count > 0;
		}

		// Token: 0x06002224 RID: 8740 RVA: 0x001AFA04 File Offset: 0x001ADC04
		public static List<int> GetSecretInformationDisseminationBranchCharacterIds(int metaDataId)
		{
			SecretInformationMetaData metaData;
			bool flag = DomainManager.Information.TryGetElement_SecretInformationMetaData(metaDataId, out metaData);
			List<int> result;
			if (flag)
			{
				result = metaData.GetDisseminationBranchCharacterIds().ToList<int>();
			}
			else
			{
				result = new List<int>();
			}
			return result;
		}

		// Token: 0x06002225 RID: 8741 RVA: 0x001AFA3C File Offset: 0x001ADC3C
		public static HashSet<int> GetSecretInformationRelatedCharacters(int metaDataId, int characterId, bool includeGeneral = true, bool includeAlive = true, bool includeDead = true)
		{
			HashSet<int> result = new HashSet<int>();
			SecretInformationMetaData metaData;
			SecretInformationCharacterRelationshipSnapshot relationshipSnapshot;
			bool flag = DomainManager.Information.TryGetElement_SecretInformationMetaData(metaDataId, out metaData) && metaData.CharacterRelationshipSnapshotCollection.Collection.TryGetValue(characterId, out relationshipSnapshot);
			if (flag)
			{
				relationshipSnapshot.RelatedCharacters.GetAllRelatedCharIds(result, includeGeneral);
				bool flag2 = !includeAlive;
				if (flag2)
				{
					result.RemoveWhere(delegate(int charId)
					{
						SecretInformationCharacterExtraInfo extraInfo;
						return metaData.CharacterExtraInfoCollection.Collection.TryGetValue(charId, out extraInfo) && extraInfo.AliveState == 0;
					});
				}
				bool flag3 = !includeDead;
				if (flag3)
				{
					result.RemoveWhere(delegate(int charId)
					{
						SecretInformationCharacterExtraInfo extraInfo;
						return metaData.CharacterExtraInfoCollection.Collection.TryGetValue(charId, out extraInfo) && extraInfo.AliveState != 0;
					});
				}
			}
			return result;
		}

		// Token: 0x06002226 RID: 8742 RVA: 0x001AFADC File Offset: 0x001ADCDC
		public static List<int> GetSecretInformationInitialCharacterIds(int metaDataId)
		{
			HashSet<int> result = new HashSet<int>();
			HashSet<int> keyChars = new HashSet<int>();
			EventArgBox secretBox = EventHelper.GetSecretInformationParameters(metaDataId);
			short templateId = -1;
			secretBox.Get("templateId", ref templateId);
			SecretInformationItem config = SecretInformation.Instance[templateId];
			bool flag = config.Parameters != null;
			if (flag)
			{
				HashSet<int> set = ObjectPool<HashSet<int>>.Instance.Get();
				for (int index = 0; index < config.Parameters.Length; index++)
				{
					int charId2 = -1;
					bool flag2;
					if (config.Parameters[index] == "Character")
					{
						EventArgBox eventArgBox = secretBox;
						DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(3, 1);
						defaultInterpolatedStringHandler.AppendLiteral("arg");
						defaultInterpolatedStringHandler.AppendFormatted<int>(index);
						flag2 = !eventArgBox.Get(defaultInterpolatedStringHandler.ToStringAndClear(), ref charId2);
					}
					else
					{
						flag2 = false;
					}
					bool flag3 = flag2;
					if (!flag3)
					{
						keyChars.Add(charId2);
						GameData.Domains.Character.Character character;
						bool flag4 = DomainManager.Character.TryGetElement_Objects(charId2, out character) && character != null;
						if (flag4)
						{
							set.Clear();
							switch (config.InitialTarget)
							{
							case ESecretInformationInitialTarget.Area:
								DomainManager.Character.GetAreaPeople(EventHelper.Domain.MainThreadDataContext.Random, character, set, 100);
								break;
							case ESecretInformationInitialTarget.Nearest:
								DomainManager.Character.GetClosePeople(EventHelper.Domain.MainThreadDataContext.Random, character, set, 100);
								break;
							case ESecretInformationInitialTarget.Local:
								DomainManager.Character.GetSameBlockPeople(EventHelper.Domain.MainThreadDataContext.Random, character, set, 100);
								break;
							}
							result.UnionWith(set);
						}
					}
				}
				ObjectPool<HashSet<int>>.Instance.Return(set);
			}
			result.RemoveWhere((int charId) => keyChars.Contains(charId));
			return result.ToList<int>();
		}

		// Token: 0x06002227 RID: 8743 RVA: 0x001AFCBB File Offset: 0x001ADEBB
		public static LocalObjectPool<SecretInformationProcessor> GetSecretInformationProcessorPool()
		{
			return DomainManager.Information.SecretInformationProcessorPool;
		}

		// Token: 0x06002228 RID: 8744 RVA: 0x001AFCC8 File Offset: 0x001ADEC8
		public static ICollection<int> GetSecretInformationKnownDiff(int selfCharacter, int targetCharacter)
		{
			HashSet<int> set = new HashSet<int>();
			SecretInformationCharacterDataCollection self;
			bool flag = DomainManager.Information.TryGetElement_CharacterSecretInformation(selfCharacter, out self);
			if (flag)
			{
				set.UnionWith(self.Collection.Keys);
			}
			SecretInformationCharacterDataCollection target;
			bool flag2 = DomainManager.Information.TryGetElement_CharacterSecretInformation(targetCharacter, out target);
			if (flag2)
			{
				set.RemoveWhere((int metaDataId) => target.Collection.ContainsKey(metaDataId));
			}
			return set;
		}

		// Token: 0x06002229 RID: 8745 RVA: 0x001AFD3A File Offset: 0x001ADF3A
		public static int GetSecretInformationHolderCount(int metaDataId)
		{
			return DomainManager.Information.GetSecretInformationHolderCount(metaDataId);
		}

		// Token: 0x0600222A RID: 8746 RVA: 0x001AFD48 File Offset: 0x001ADF48
		public unsafe static string GetSecretInformationDesc(int metaDataId, EventArgBox argBox)
		{
			SecretInformationMetaData metaData;
			bool flag = !DomainManager.Information.TryGetElement_SecretInformationMetaData(metaDataId, out metaData);
			string result;
			if (flag)
			{
				result = string.Empty;
			}
			else
			{
				SecretInformationCollection collection = EventHelper.GetSecretInformationCollection();
				int offset = metaData.GetOffset();
				List<string> args = new List<string>();
				int taiwuCharId = DomainManager.Taiwu.GetTaiwuCharId();
				byte[] array;
				byte* pRawData;
				if ((array = collection.RawData) == null || array.Length == 0)
				{
					pRawData = null;
				}
				else
				{
					pRawData = &array[0];
				}
				byte* pCurrData = pRawData + offset;
				pCurrData++;
				int date = *(int*)pCurrData;
				pCurrData += 4;
				short templateId = *(short*)pCurrData;
				pCurrData += 2;
				SecretInformationItem config = SecretInformation.Instance[templateId];
				bool flag2 = config.Parameters != null;
				if (flag2)
				{
					int i = 0;
					int len = config.Parameters.Length;
					while (i < len)
					{
						string type = config.Parameters[i];
						bool flag3 = string.IsNullOrEmpty(type);
						if (!flag3)
						{
							string text = type;
							string text2 = text;
							uint num = <PrivateImplementationDetails>.ComputeStringHash(text2);
							if (num <= 1539345862U)
							{
								if (num != 598792213U)
								{
									if (num != 1347445242U)
									{
										if (num != 1539345862U)
										{
											goto IL_365;
										}
										if (!(text2 == "Location"))
										{
											goto IL_365;
										}
										short areaId = *(short*)pCurrData;
										pCurrData += 2;
										short blockId = *(short*)pCurrData;
										pCurrData += 2;
										MapAreaData area = DomainManager.Map.GetElement_Areas((int)areaId);
										args.Add(area.GetConfig().Name ?? "");
									}
									else
									{
										if (!(text2 == "CombatSkill"))
										{
											goto IL_365;
										}
										short combatSkillTemplateId = *(short*)pCurrData;
										pCurrData += 2;
										args.Add(Config.CombatSkill.Instance[combatSkillTemplateId].Name);
									}
								}
								else
								{
									if (!(text2 == "Resource"))
									{
										goto IL_365;
									}
									sbyte resourceType = *(sbyte*)pCurrData;
									pCurrData++;
									args.Add(Config.ResourceType.Instance[resourceType].Name);
								}
							}
							else if (num <= 3651752933U)
							{
								if (num != 3197690557U)
								{
									if (num != 3651752933U)
									{
										goto IL_365;
									}
									if (!(text2 == "Integer"))
									{
										goto IL_365;
									}
									List<string> list = args;
									DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(0, 1);
									defaultInterpolatedStringHandler.AppendFormatted<int>(*(int*)pCurrData);
									list.Add(defaultInterpolatedStringHandler.ToStringAndClear());
									pCurrData += 4;
								}
								else
								{
									if (!(text2 == "ItemKey"))
									{
										goto IL_365;
									}
									ulong itemKeyValue = (ulong)(*(long*)pCurrData);
									ItemKey itemKey = (ItemKey)itemKeyValue;
									pCurrData += 8;
									args.Add(ItemTemplateHelper.GetName(itemKey.ItemType, itemKey.TemplateId));
								}
							}
							else if (num != 3966976176U)
							{
								if (num != 3992405204U)
								{
									goto IL_365;
								}
								if (!(text2 == "LifeSkill"))
								{
									goto IL_365;
								}
								short lifeSkillTemplateId = *(short*)pCurrData;
								pCurrData += 2;
								args.Add(LifeSkill.Instance[lifeSkillTemplateId].Name);
							}
							else
							{
								if (!(text2 == "Character"))
								{
									goto IL_365;
								}
								int charId = *(int*)pCurrData;
								pCurrData += 4;
								DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(20, 1);
								defaultInterpolatedStringHandler.AppendLiteral("SecretArgCharacterId");
								defaultInterpolatedStringHandler.AppendFormatted<int>(i);
								string key = defaultInterpolatedStringHandler.ToStringAndClear();
								argBox.Set(key, charId);
								args.Add("<Character key=" + key + " str=Name/>");
							}
							goto IL_36E;
							IL_365:
							throw new NotImplementedException(type);
						}
						IL_36E:
						i++;
					}
				}
				array = null;
				while (args.Count < 4)
				{
					args.Add(string.Empty);
				}
				int j = 0;
				int count = args.Count;
				while (j < count)
				{
					args[j] = "<color=#pinkyellow>" + args[j] + "</color>";
					j++;
				}
				result = string.Format(config.Desc, new object[]
				{
					args[0],
					args[1],
					args[2],
					args[3]
				});
			}
			return result;
		}

		// Token: 0x0600222B RID: 8747 RVA: 0x001B017B File Offset: 0x001AE37B
		public static HashSet<SecretInformationRelationshipType> CheckSecretInformationRelationship(int characterId, int targetCharacterId)
		{
			return EventHelper.CheckSecretInformationRelationshipWithSnapshot(characterId, -1, targetCharacterId, -1);
		}

		// Token: 0x0600222C RID: 8748 RVA: 0x001B0186 File Offset: 0x001AE386
		public static HashSet<SecretInformationRelationshipType> CheckSecretInformationRelationshipWithSnapshot(int characterId, int selfMetaDataIdForSnapshot, int targetCharacterId, int targetMetaDataIdForSnapshot)
		{
			return DomainManager.Information.CheckSecretInformationRelationship(characterId, selfMetaDataIdForSnapshot, targetCharacterId, targetMetaDataIdForSnapshot);
		}

		// Token: 0x0600222D RID: 8749 RVA: 0x001B0198 File Offset: 0x001AE398
		public static int GetSecretInformationRelevanceMetaDataId(int metaDataId)
		{
			SecretInformationMetaData metaData;
			bool flag = DomainManager.Information.TryGetElement_SecretInformationMetaData(metaDataId, out metaData);
			int result;
			if (flag)
			{
				result = metaData.GetRelevanceSecretInformationMetaDataId();
			}
			else
			{
				result = -1;
			}
			return result;
		}

		// Token: 0x0600222E RID: 8750 RVA: 0x001B01C8 File Offset: 0x001AE3C8
		public static sbyte GetSecretInformationCharacterFameTypeSnapshot(int metaDataId, int characterId)
		{
			SecretInformationCharacterExtraInfo extraInfo;
			bool flag = DomainManager.Information.GetElement_SecretInformationMetaData(metaDataId).CharacterExtraInfoCollection.Collection.TryGetValue(characterId, out extraInfo);
			sbyte result;
			if (flag)
			{
				result = extraInfo.FameType;
			}
			else
			{
				string tag = "SecretInformation";
				DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(56, 2);
				defaultInterpolatedStringHandler.AppendLiteral("GetCharacterExtraInfo Failed: MetaDataId[");
				defaultInterpolatedStringHandler.AppendFormatted<int>(metaDataId);
				defaultInterpolatedStringHandler.AppendLiteral("] CharacterId[");
				defaultInterpolatedStringHandler.AppendFormatted<int>(characterId);
				defaultInterpolatedStringHandler.AppendLiteral("]");
				AdaptableLog.TagWarning(tag, defaultInterpolatedStringHandler.ToStringAndClear(), false);
				result = 0;
			}
			return result;
		}

		// Token: 0x0600222F RID: 8751 RVA: 0x001B025C File Offset: 0x001AE45C
		public static byte GetSecretInformationCharacterMonkTypeSnapshot(int metaDataId, int characterId)
		{
			SecretInformationCharacterExtraInfo extraInfo;
			bool flag = DomainManager.Information.GetElement_SecretInformationMetaData(metaDataId).CharacterExtraInfoCollection.Collection.TryGetValue(characterId, out extraInfo);
			byte result;
			if (flag)
			{
				result = extraInfo.MonkType;
			}
			else
			{
				string tag = "SecretInformation";
				DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(56, 2);
				defaultInterpolatedStringHandler.AppendLiteral("GetCharacterExtraInfo Failed: MetaDataId[");
				defaultInterpolatedStringHandler.AppendFormatted<int>(metaDataId);
				defaultInterpolatedStringHandler.AppendLiteral("] CharacterId[");
				defaultInterpolatedStringHandler.AppendFormatted<int>(characterId);
				defaultInterpolatedStringHandler.AppendLiteral("]");
				AdaptableLog.TagWarning(tag, defaultInterpolatedStringHandler.ToStringAndClear(), false);
				result = 0;
			}
			return result;
		}

		// Token: 0x06002230 RID: 8752 RVA: 0x001B02F0 File Offset: 0x001AE4F0
		public static OrganizationInfo GetSecretInformationCharacterSectSnapshot(int metaDataId, int characterId)
		{
			SecretInformationCharacterExtraInfo extraInfo;
			bool flag = DomainManager.Information.GetElement_SecretInformationMetaData(metaDataId).CharacterExtraInfoCollection.Collection.TryGetValue(characterId, out extraInfo);
			OrganizationInfo result;
			if (flag)
			{
				result = extraInfo.OrgInfo;
			}
			else
			{
				string tag = "SecretInformation";
				DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(56, 2);
				defaultInterpolatedStringHandler.AppendLiteral("GetCharacterExtraInfo Failed: MetaDataId[");
				defaultInterpolatedStringHandler.AppendFormatted<int>(metaDataId);
				defaultInterpolatedStringHandler.AppendLiteral("] CharacterId[");
				defaultInterpolatedStringHandler.AppendFormatted<int>(characterId);
				defaultInterpolatedStringHandler.AppendLiteral("]");
				AdaptableLog.TagWarning(tag, defaultInterpolatedStringHandler.ToStringAndClear(), false);
				result = new OrganizationInfo(-1, -1, true, -1);
			}
			return result;
		}

		// Token: 0x06002231 RID: 8753 RVA: 0x001B038C File Offset: 0x001AE58C
		public static List<short> GetSecretInformationAppliedStructs(short secretInformationAppliedStructGroupId, sbyte taiwuSecretInformationAppliedRelationId, sbyte oppositeSecretInformationAppliedRelationId)
		{
			return (from s in SecretInformationAppliedStruct.Instance
			where s != null && s.GroupTemplateId == secretInformationAppliedStructGroupId && s.TaiwuIndex == taiwuSecretInformationAppliedRelationId && s.CharIndex == oppositeSecretInformationAppliedRelationId
			select s.TemplateId).ToList<short>();
		}

		// Token: 0x06002232 RID: 8754 RVA: 0x001B03F8 File Offset: 0x001AE5F8
		public static IEnumerable<short> GetOrderedSecretInformationSelections(IEnumerable<short> selectionIds)
		{
			return from id in selectionIds
			orderby SecretInformationAppliedSelection.Instance[id].Priority
			select id;
		}

		// Token: 0x06002233 RID: 8755 RVA: 0x001B0420 File Offset: 0x001AE620
		public static int GetSecretInformationAuthorityCostWhenDisseminating(int metaDataId, int characterId)
		{
			SecretInformationMetaData metaData;
			SecretInformationCharacterDataCollection characterDataCollection;
			SecretInformationCharacterData characterData;
			GameData.Domains.Character.Character character;
			bool flag = DomainManager.Information.TryGetElement_SecretInformationMetaData(metaDataId, out metaData) && DomainManager.Information.TryGetElement_CharacterSecretInformation(characterId, out characterDataCollection) && characterDataCollection.Collection.TryGetValue(metaDataId, out characterData) && DomainManager.Character.TryGetElement_Objects(characterId, out character);
			int result;
			if (flag)
			{
				short templateId = DomainManager.Information.CalcSecretInformationTemplateId(metaData);
				result = DomainManager.Information.CalcSecretInformationAuthorityCostWhenDisseminatingByCharacter(templateId, character.GetFameType(), DomainManager.Information.GetSecretInformationDisseminatingCountOfBranch(metaDataId, characterData.SecretInformationDisseminationBranch));
			}
			else
			{
				result = 0;
			}
			return result;
		}

		// Token: 0x06002234 RID: 8756 RVA: 0x001B04B0 File Offset: 0x001AE6B0
		public static int GetThreatenEffect(int selfCharId, int targetCharId, int metaDataId, short templateId)
		{
			int threatenEffect = -1;
			GameData.Domains.Character.Character selfChar;
			GameData.Domains.Character.Character targetChar;
			bool flag = !DomainManager.Character.TryGetElement_Objects(selfCharId, out selfChar) || !DomainManager.Character.TryGetElement_Objects(targetCharId, out targetChar) || DomainManager.Character.GetFavorability(targetCharId, selfCharId) == short.MinValue;
			int result;
			if (flag)
			{
				result = threatenEffect;
			}
			else
			{
				short sortValue = SecretInformation.Instance.GetItem(templateId).SortValue;
				int sortFactor = (int)sortValue * GlobalConfig.Instance.ThreatenEffectFactorOfSortValue;
				threatenEffect = sortFactor;
				int punishLevel = -1;
				bool flag2 = EventHelper.IsInAnySect(targetCharId);
				if (flag2)
				{
					SecretInformationProcessor processor = DomainManager.Information.SecretInformationProcessorPool.Get();
					bool flag3 = !processor.Initialize(metaDataId);
					if (flag3)
					{
						AdaptableLog.Warning("Initialize SecretInfo ProcessorPool Failed!", false);
						DomainManager.Information.SecretInformationProcessorPool.Return(processor);
					}
					punishLevel = (int)processor.CalSectPunishLevel_WithCharId(targetCharId, false);
					DomainManager.Information.SecretInformationProcessorPool.Return(processor);
				}
				punishLevel++;
				bool flag4 = !EventHelper.IsInAnySect(targetCharId);
				if (flag4)
				{
					punishLevel = (int)(sortValue / 3);
				}
				threatenEffect += threatenEffect * punishLevel * 20 / 100;
				int holderCount = EventHelper.GetSecretInformationHolderCount(metaDataId);
				byte broadcastLimit = SecretInformation.Instance.GetItem(templateId).MaxPersonAmount;
				bool flag5 = EventHelper.IsSecretInformationBroadcast(metaDataId);
				if (flag5)
				{
					holderCount = (int)broadcastLimit;
				}
				int holderFactor = Math.Clamp(holderCount * 50 / (int)broadcastLimit, 0, 50);
				threatenEffect += threatenEffect * holderFactor / 100;
				sbyte fame = selfChar.GetFame();
				int fameFactor = (int)Math.Abs(fame) / GlobalConfig.Instance.ThreatenEffectDenominatorOfFame;
				threatenEffect += threatenEffect * fameFactor / 100;
				result = Math.Clamp(threatenEffect, int.MinValue, int.MaxValue);
			}
			return result;
		}

		// Token: 0x06002235 RID: 8757 RVA: 0x001B0640 File Offset: 0x001AE840
		public static int GetThreatenDifficulty(int selfCharId, int targetCharId, int metaDataId)
		{
			int threatenDifficulty = -1;
			GameData.Domains.Character.Character selfChar;
			GameData.Domains.Character.Character targetChar;
			bool flag = !DomainManager.Character.TryGetElement_Objects(selfCharId, out selfChar) || !DomainManager.Character.TryGetElement_Objects(targetCharId, out targetChar) || DomainManager.Character.GetFavorability(targetCharId, selfCharId) == short.MinValue;
			int result;
			if (flag)
			{
				result = threatenDifficulty;
			}
			else
			{
				sbyte targetCharGrade = targetChar.GetOrganizationInfo().Grade;
				sbyte targetCharBehaviorType = targetChar.GetBehaviorType();
				sbyte favorabilityType = FavorabilityType.GetFavorabilityType(DomainManager.Character.GetFavorability(targetCharId, selfCharId));
				int gradeFactor = (int)targetCharGrade * GlobalConfig.Instance.ThreatenDifficultyFactorOfGrade;
				int behaviorFavor = GlobalConfig.Instance.ThreatenDifficultyFactorOfBehaviorType[(int)targetCharBehaviorType];
				int favorFactor = 0;
				bool flag2 = favorabilityType > 0;
				if (flag2)
				{
					favorFactor = GlobalConfig.Instance.ThreatenDifficultyFactorOfPositiveFavorType[(int)targetCharBehaviorType];
				}
				bool flag3 = favorabilityType < 0;
				if (flag3)
				{
					favorFactor = GlobalConfig.Instance.ThreatenDifficultyFactorOfNegativeFavorType[(int)targetCharBehaviorType];
				}
				threatenDifficulty = Math.Clamp(Math.Max(gradeFactor + favorFactor * behaviorFavor / 100, 0), int.MinValue, int.MaxValue);
				result = threatenDifficulty;
			}
			return result;
		}

		// Token: 0x06002236 RID: 8758 RVA: 0x001B073C File Offset: 0x001AE93C
		public static int GetThreatenFinaleDifficultyOfItem(int origDifficulty, ItemKey itemKey)
		{
			sbyte grade = EventHelper.GetItemGrade(itemKey);
			return origDifficulty + (int)((grade + 1) * 2);
		}

		// Token: 0x06002237 RID: 8759 RVA: 0x001B075C File Offset: 0x001AE95C
		public static int GetThreatenFinalDifficultyOfEndRelation(int origDifficulty, int threatenedCharId, int nominatedCharId)
		{
			GameData.Domains.Character.Character threatenedChar;
			GameData.Domains.Character.Character nominatedChar;
			bool flag = !DomainManager.Character.TryGetElement_Objects(threatenedCharId, out threatenedChar) || !DomainManager.Character.TryGetElement_Objects(nominatedCharId, out nominatedChar);
			int result;
			if (flag)
			{
				result = origDifficulty;
			}
			else
			{
				short favor = DomainManager.Character.GetFavorability(threatenedCharId, nominatedCharId);
				sbyte favorType = FavorabilityType.GetFavorabilityType(favor);
				result = origDifficulty + (int)(favorType * 2);
			}
			return result;
		}

		// Token: 0x06002238 RID: 8760 RVA: 0x001B07B8 File Offset: 0x001AE9B8
		public static int GetThreatenFinalDifficultyOfMarry(int origDifficulty, int threatenedCharId, int nominatedCharId)
		{
			GameData.Domains.Character.Character threatenedChar;
			GameData.Domains.Character.Character nominatedChar;
			bool flag = !DomainManager.Character.TryGetElement_Objects(threatenedCharId, out threatenedChar) || !DomainManager.Character.TryGetElement_Objects(nominatedCharId, out nominatedChar);
			int result;
			if (flag)
			{
				result = origDifficulty;
			}
			else
			{
				int genderFactor = 0;
				int monkTypeFactor = 0;
				int sectRuleFactor = 0;
				bool bisexual = threatenedChar.GetBisexual();
				if (bisexual)
				{
					bool flag2 = nominatedChar.GetGender() != threatenedChar.GetGender();
					if (flag2)
					{
						bool flag3 = nominatedChar.GetDisplayingGender() == threatenedChar.GetDisplayingGender();
						if (flag3)
						{
							genderFactor = 6;
						}
					}
				}
				else
				{
					bool flag4 = nominatedChar.GetGender() == threatenedChar.GetGender();
					if (flag4)
					{
						bool flag5 = nominatedChar.GetDisplayingGender() != threatenedChar.GetDisplayingGender();
						if (flag5)
						{
							genderFactor = 6;
						}
					}
				}
				bool flag6 = threatenedChar.GetMonkType() > 0;
				if (flag6)
				{
					monkTypeFactor = 6;
				}
				bool flag7 = !threatenedChar.OrgAndMonkTypeAllowMarriage();
				if (flag7)
				{
					sectRuleFactor = 12;
				}
				result = origDifficulty + genderFactor + monkTypeFactor + sectRuleFactor;
			}
			return result;
		}

		// Token: 0x06002239 RID: 8761 RVA: 0x001B08A0 File Offset: 0x001AEAA0
		public static List<string> GetCommonReplacedContentInThreatenSucceedEvent(EventArgBox argBox)
		{
			GameData.Domains.Character.Character character = argBox.GetCharacter("CharacterId");
			sbyte behaviorType = EventHelper.GetRoleBehavior(character);
			List<string> result = new List<string>();
			switch (behaviorType)
			{
			case 0:
				result.Add("Event_SecretInformation_ThreatenSucceed_Just");
				break;
			case 1:
				result.Add("Event_SecretInformation_ThreatenSucceed_Kind");
				break;
			case 2:
				result.Add("Event_SecretInformation_ThreatenSucceed_Even");
				break;
			case 3:
				result.Add("Event_SecretInformation_ThreatenSucceed_Rebel");
				break;
			case 4:
				result.Add("Event_SecretInformation_ThreatenSucceed_Egoistic");
				break;
			}
			return result;
		}

		// Token: 0x0600223A RID: 8762 RVA: 0x001B0938 File Offset: 0x001AEB38
		public static List<string> GetCommonReplacedContentInThreatenFailedEvent(EventArgBox argBox)
		{
			GameData.Domains.Character.Character character = argBox.GetCharacter("CharacterId");
			sbyte behaviorType = EventHelper.GetRoleBehavior(character);
			List<string> result = new List<string>();
			switch (behaviorType)
			{
			case 0:
				result.Add("Event_SecretInformation_ThreatenFailed_Just");
				break;
			case 1:
				result.Add("Event_SecretInformation_ThreatenFailed_Kind");
				break;
			case 2:
				result.Add("Event_SecretInformation_ThreatenFailed_Even");
				break;
			case 3:
				result.Add("Event_SecretInformation_ThreatenFailed_Rebel");
				break;
			case 4:
				result.Add("Event_SecretInformation_ThreatenFailed_Egoistic");
				break;
			}
			return result;
		}

		// Token: 0x0600223B RID: 8763 RVA: 0x001B09D0 File Offset: 0x001AEBD0
		private static int GetConfessLoveDifficultyInThreadNeedle(int selfCharId, int targetCharId, int oriDifficulty, bool isProPosal = false)
		{
			GameData.Domains.Character.Character selfChar;
			GameData.Domains.Character.Character targetChar;
			bool flag = !DomainManager.Character.TryGetElement_Objects(selfCharId, out selfChar) || !DomainManager.Character.TryGetElement_Objects(targetCharId, out targetChar);
			int result;
			if (flag)
			{
				result = int.MinValue;
			}
			else
			{
				int genderAdjust = 0;
				int monkTypeAdjust = 0;
				int sectRuleAdjust = 0;
				bool bisexual = targetChar.GetBisexual();
				if (bisexual)
				{
					bool flag2 = selfChar.GetGender() != targetChar.GetGender();
					if (flag2)
					{
						bool flag3 = selfChar.GetDisplayingGender() == targetChar.GetDisplayingGender();
						if (flag3)
						{
							genderAdjust = 3;
							if (isProPosal)
							{
								genderAdjust = 6;
							}
						}
					}
				}
				else
				{
					bool flag4 = selfChar.GetGender() == targetChar.GetGender();
					if (flag4)
					{
						bool flag5 = selfChar.GetDisplayingGender() != targetChar.GetDisplayingGender();
						if (flag5)
						{
							genderAdjust = 3;
							if (isProPosal)
							{
								genderAdjust = 6;
							}
						}
					}
				}
				bool flag6 = targetChar.GetMonkType() > 0;
				if (flag6)
				{
					monkTypeAdjust = 3;
					if (isProPosal)
					{
						monkTypeAdjust = 6;
					}
				}
				bool flag7 = !targetChar.OrgAndMonkTypeAllowMarriage();
				if (flag7)
				{
					sectRuleAdjust = 6;
					if (isProPosal)
					{
						sectRuleAdjust = 12;
					}
				}
				result = oriDifficulty + genderAdjust + monkTypeAdjust + sectRuleAdjust;
			}
			return result;
		}

		// Token: 0x0600223C RID: 8764 RVA: 0x001B0AE8 File Offset: 0x001AECE8
		private static int GetThreadNeedleDifficultyOfStartRelation(int targetCharId, int selectedCharId, ushort relationType, bool isBothWayRelation = true)
		{
			int difficulty = int.MinValue;
			GameData.Domains.Character.Character targetChar;
			GameData.Domains.Character.Character nominatedChar;
			bool flag = !DomainManager.Character.TryGetElement_Objects(targetCharId, out targetChar) || !DomainManager.Character.TryGetElement_Objects(selectedCharId, out nominatedChar);
			int result;
			if (flag)
			{
				result = difficulty;
			}
			else
			{
				int gradeFactor = SecretInformationConfig.GradeFactor_StartRelation_Difficulty;
				int grade_target = (int)(targetChar.GetOrganizationInfo().Grade + 1) * gradeFactor;
				int grade_selected = (int)(nominatedChar.GetOrganizationInfo().Grade + 1) * gradeFactor;
				sbyte behavior_target = targetChar.GetBehaviorType();
				sbyte behavior_nominate = nominatedChar.GetBehaviorType();
				int behaviorAdjust_target = SecretInformationConfig.BehaviorAdjust_StartRelation_Difficulty[(int)behavior_target];
				int behaviorAdjust_nominate = SecretInformationConfig.BehaviorAdjust_StartRelation_Difficulty[(int)behavior_nominate];
				difficulty = Math.Clamp(Math.Max(grade_target + behaviorAdjust_target, grade_selected + behaviorAdjust_nominate), int.MinValue, int.MaxValue);
				short favor = EventHelper.GetFavorability(nominatedChar, targetChar);
				sbyte favorType = FavorabilityType.GetFavorabilityType(favor);
				int behaviorFactor = SecretInformationConfig.FavorFactor_StartRelation_Difficulty[(int)behavior_nominate];
				difficulty += Math.Clamp(Math.Max(difficulty - (int)favorType * behaviorFactor / 100, 0), int.MinValue, int.MaxValue);
				if (relationType <= 1024)
				{
					if (relationType <= 128)
					{
						if (relationType != 64 && relationType != 128)
						{
							goto IL_255;
						}
					}
					else if (relationType != 512)
					{
						if (relationType != 1024)
						{
							goto IL_255;
						}
						bool flag2 = nominatedChar.GetActualAge() < 16 || EventHelper.GetAliveSpouse(selectedCharId) != null || EventHelper.GetAliveSpouse(targetCharId) != null;
						if (flag2)
						{
							return int.MaxValue;
						}
						return EventHelper.GetConfessLoveDifficultyInThreadNeedle(selectedCharId, targetCharId, difficulty, true);
					}
				}
				else if (relationType <= 8192)
				{
					if (relationType != 2048 && relationType != 8192)
					{
						goto IL_255;
					}
				}
				else if (relationType != 16384)
				{
					if (relationType != 32768)
					{
						goto IL_255;
					}
					return difficulty - 12;
				}
				else
				{
					if (isBothWayRelation)
					{
						return EventHelper.GetConfessLoveDifficultyInThreadNeedle(selectedCharId, targetCharId, difficulty, false);
					}
					bool bisexual = targetChar.GetBisexual();
					if (bisexual)
					{
						bool flag3 = nominatedChar.GetGender() != targetChar.GetGender();
						if (flag3)
						{
							bool flag4 = nominatedChar.GetDisplayingGender() == targetChar.GetDisplayingGender();
							if (flag4)
							{
								difficulty += 3;
							}
						}
					}
					else
					{
						bool flag5 = nominatedChar.GetGender() == targetChar.GetGender();
						if (flag5)
						{
							bool flag6 = nominatedChar.GetDisplayingGender() != targetChar.GetDisplayingGender();
							if (flag6)
							{
								difficulty += 3;
							}
						}
					}
					return difficulty;
				}
				return difficulty;
				IL_255:
				result = int.MinValue;
			}
			return result;
		}

		// Token: 0x0600223D RID: 8765 RVA: 0x001B0D58 File Offset: 0x001AEF58
		private static int GetThreadNeedleDifficultyOfEndRelation(int targetCharId, int nominatedCharId, ushort relationType, bool isBothWayRelation = true)
		{
			int difficulty = int.MinValue;
			GameData.Domains.Character.Character targetChar;
			GameData.Domains.Character.Character nominatedChar;
			bool flag = !DomainManager.Character.TryGetElement_Objects(targetCharId, out targetChar) || !DomainManager.Character.TryGetElement_Objects(nominatedCharId, out nominatedChar);
			int result;
			if (flag)
			{
				result = difficulty;
			}
			else
			{
				int gradeFactor = SecretInformationConfig.GradeFactor_EndRelation_Difficulty;
				int grade_target = (int)(targetChar.GetOrganizationInfo().Grade + 1) * gradeFactor;
				int grade_nominate = (int)(nominatedChar.GetOrganizationInfo().Grade + 1) * gradeFactor;
				sbyte behavior_target = targetChar.GetBehaviorType();
				sbyte behavior_nominate = nominatedChar.GetBehaviorType();
				int behaviorAdjust_target = SecretInformationConfig.BehaviorAdjust_EndRelation_Difficulty[(int)behavior_target];
				int behaviorAdjust_nominate = SecretInformationConfig.BehaviorAdjust_EndRelation_Difficulty[(int)behavior_nominate];
				difficulty = Math.Clamp(Math.Max(grade_target + behaviorAdjust_target, grade_nominate + behaviorAdjust_nominate), int.MinValue, int.MaxValue);
				short favor_NominateToTarget = EventHelper.GetFavorability(nominatedChar, targetChar);
				sbyte favorType_NominateToTarget = FavorabilityType.GetFavorabilityType(favor_NominateToTarget);
				int behaviorFactor = SecretInformationConfig.FavorFactor_EndRelation_Difficulty[(int)behavior_nominate];
				difficulty = Math.Clamp(Math.Max(difficulty + (int)favorType_NominateToTarget * behaviorFactor / 100, 0), int.MinValue, int.MaxValue);
				short favor_TargetToNominate = EventHelper.GetFavorability(targetChar, nominatedChar);
				sbyte favorType_TargetToNominate = FavorabilityType.GetFavorabilityType(favor_TargetToNominate);
				if (relationType <= 1024)
				{
					if (relationType <= 128)
					{
						if (relationType != 64 && relationType != 128)
						{
							goto IL_1AC;
						}
					}
					else if (relationType != 512 && relationType != 1024)
					{
						goto IL_1AC;
					}
				}
				else if (relationType <= 8192)
				{
					if (relationType != 2048)
					{
						if (relationType != 8192)
						{
							goto IL_1AC;
						}
						return difficulty + (int)favorType_TargetToNominate;
					}
				}
				else if (relationType != 16384)
				{
					if (relationType != 32768)
					{
						goto IL_1AC;
					}
					return difficulty - 12;
				}
				else
				{
					if (isBothWayRelation)
					{
						return difficulty + (int)(favorType_TargetToNominate * 2);
					}
					return difficulty + (int)favorType_TargetToNominate;
				}
				return difficulty + (int)(favorType_TargetToNominate * 2);
				IL_1AC:
				result = int.MinValue;
			}
			return result;
		}

		// Token: 0x0600223E RID: 8766 RVA: 0x001B0F1C File Offset: 0x001AF11C
		private static int GetThreadNeedleEffectOfStartRelation(int promotedCharId, int targetCharId, int nominatedCharId, int metaDataId)
		{
			int effect = int.MinValue;
			GameData.Domains.Character.Character targetChar;
			GameData.Domains.Character.Character nominatedChar;
			GameData.Domains.Character.Character promotedChar;
			bool flag = !DomainManager.Character.TryGetElement_Objects(targetCharId, out targetChar) || !DomainManager.Character.TryGetElement_Objects(nominatedCharId, out nominatedChar) || !DomainManager.Character.TryGetElement_Objects(promotedCharId, out promotedChar);
			int result;
			if (flag)
			{
				result = effect;
			}
			else
			{
				SecretInformationProcessor processor = DomainManager.Information.SecretInformationProcessorPool.Get();
				bool flag2 = !processor.Initialize(metaDataId);
				if (flag2)
				{
					DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(33, 1);
					defaultInterpolatedStringHandler.AppendLiteral("Can not Initialize Processor Of ");
					defaultInterpolatedStringHandler.AppendFormatted<int>(metaDataId);
					defaultInterpolatedStringHandler.AppendLiteral("!");
					throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
				}
				short templateId = processor.GetSecretInformationTemplateId();
				short sortValue = SecretInformation.Instance.GetItem(templateId).SortValue;
				int sortFactor = SecretInformationConfig.SortValueFactor_StartRelation_Effect;
				effect = (int)sortValue * sortFactor;
				int holderCount = EventHelper.GetSecretInformationHolderCount(metaDataId);
				int holderFactor = SecretInformationConfig.HolderCountFactor_StartRelation_Effect;
				byte broadcastLimit = SecretInformation.Instance.GetItem(templateId).MaxPersonAmount;
				bool flag3 = EventHelper.IsSecretInformationBroadcast(metaDataId);
				if (flag3)
				{
					holderCount = (int)broadcastLimit;
				}
				int holderAdjust = Math.Clamp(holderCount * holderFactor / (int)broadcastLimit, 0, 50);
				effect = effect * (100 + holderAdjust) / 100;
				short favor = EventHelper.GetFavorability(targetChar, promotedChar);
				sbyte favorType = FavorabilityType.GetFavorabilityType(favor);
				sbyte behaviorType = targetChar.GetBehaviorType();
				int favorfactor = SecretInformationConfig.FavorFactor_StartRelation_Effect[(int)behaviorType];
				effect = Math.Max(effect + (int)favorType * favorfactor / 100, 0);
				sbyte fame_promote = promotedChar.GetFame();
				int fameDenominater = SecretInformationConfig.FameDenominator_StartRelation_Effect;
				int fameAdjust = (int)fame_promote / fameDenominater;
				effect = effect * (100 + fameAdjust) / 100;
				result = effect;
			}
			return result;
		}

		// Token: 0x0600223F RID: 8767 RVA: 0x001B10A0 File Offset: 0x001AF2A0
		private static int GetThreadNeedleEffectOfEndRelation(int promotedCharId, int targetCharId, int nominatedCharId, int metaDataId)
		{
			int effect = int.MinValue;
			GameData.Domains.Character.Character targetChar;
			GameData.Domains.Character.Character nominatedChar;
			GameData.Domains.Character.Character promotedChar;
			bool flag = !DomainManager.Character.TryGetElement_Objects(targetCharId, out targetChar) || !DomainManager.Character.TryGetElement_Objects(nominatedCharId, out nominatedChar) || !DomainManager.Character.TryGetElement_Objects(promotedCharId, out promotedChar);
			int result;
			if (flag)
			{
				result = effect;
			}
			else
			{
				SecretInformationProcessor processor = DomainManager.Information.SecretInformationProcessorPool.Get();
				bool flag2 = !processor.Initialize(metaDataId);
				if (flag2)
				{
					DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(33, 1);
					defaultInterpolatedStringHandler.AppendLiteral("Can not Initialize Processor Of ");
					defaultInterpolatedStringHandler.AppendFormatted<int>(metaDataId);
					defaultInterpolatedStringHandler.AppendLiteral("!");
					throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
				}
				short templateId = processor.GetSecretInformationTemplateId();
				short sortValue = SecretInformation.Instance.GetItem(templateId).SortValue;
				int sortFactor = SecretInformationConfig.SortValueFactor_EndRelation_Effect;
				effect = (int)sortValue * sortFactor;
				int holderCount = EventHelper.GetSecretInformationHolderCount(metaDataId);
				int holderFactor = SecretInformationConfig.HolderCountFactor_EndRelation_Effect;
				byte broadcastLimit = SecretInformation.Instance.GetItem(templateId).MaxPersonAmount;
				bool flag3 = EventHelper.IsSecretInformationBroadcast(metaDataId);
				if (flag3)
				{
					holderCount = (int)broadcastLimit;
				}
				int holderAdjust = Math.Clamp(holderCount * holderFactor / (int)broadcastLimit, 0, 50);
				effect = effect * (100 + holderAdjust) / 100;
				short favor = EventHelper.GetFavorability(targetChar, promotedChar);
				sbyte favorType = FavorabilityType.GetFavorabilityType(favor);
				sbyte behaviorType = targetChar.GetBehaviorType();
				int favorfactor = SecretInformationConfig.FavorFactor_EndRelation_Effect[(int)behaviorType];
				effect = Math.Max(effect + (int)favorType * favorfactor / 100, 0);
				sbyte fame_promote = promotedChar.GetFame();
				int fameDenominater = SecretInformationConfig.FameDenominator_EndRelation_Effect;
				int fameAdjust = (int)fame_promote / fameDenominater;
				effect = effect * (100 + fameAdjust) / 100;
				result = effect;
			}
			return result;
		}

		// Token: 0x06002240 RID: 8768 RVA: 0x001B1224 File Offset: 0x001AF424
		public static int ApplyThreadNeedle_StartRelation(EventArgBox argBox, ushort relationType, bool isBothWayRelation = true)
		{
			int taiwuId = EventArgBox.TaiwuCharacterId;
			int charId = -1;
			argBox.Get("CharacterId", ref charId);
			int selectedCharId = -1;
			argBox.Get("SelectedCharIdForThreadNeedleAdding", ref selectedCharId);
			int metaDataId = -1;
			argBox.Get("metaDataIdForThreaten", ref metaDataId);
			bool flag = taiwuId == -1 || charId == -1 || selectedCharId == -1 || metaDataId == -1;
			if (flag)
			{
				throw new Exception("Wrong Ids In ThreadNeedle Event !");
			}
			bool flag2 = relationType != 32768;
			int difficulty;
			int effect;
			if (flag2)
			{
				difficulty = EventHelper.GetThreadNeedleDifficultyOfStartRelation(charId, selectedCharId, relationType, isBothWayRelation);
				effect = EventHelper.GetThreadNeedleEffectOfStartRelation(taiwuId, charId, selectedCharId, metaDataId);
			}
			else
			{
				difficulty = EventHelper.GetThreadNeedleDifficultyOfEndRelation(charId, selectedCharId, relationType, isBothWayRelation);
				effect = EventHelper.GetThreadNeedleEffectOfEndRelation(taiwuId, charId, selectedCharId, metaDataId);
			}
			bool flag3 = difficulty == int.MinValue || effect == int.MinValue;
			if (flag3)
			{
				throw new Exception("Wrong Values Of ThreadNeedle Event!");
			}
			EventHelper.CostSecretInformationUsedCount(taiwuId, metaDataId);
			bool flag4 = effect >= difficulty;
			int result;
			if (flag4)
			{
				bool flag5 = EventHelper.CheckStartRelationSucceed(charId, selectedCharId, relationType, isBothWayRelation);
				if (flag5)
				{
					bool flag6 = taiwuId == selectedCharId;
					if (flag6)
					{
						EventHelper.ApplyStartRelationByThreadNeedle(charId, selectedCharId, relationType, true, isBothWayRelation);
						result = 3;
					}
					else
					{
						EventHelper.ApplyStartRelationByThreadNeedle(charId, selectedCharId, relationType, true, isBothWayRelation);
						result = 4;
					}
				}
				else
				{
					EventHelper.ApplyStartRelationByThreadNeedle(charId, selectedCharId, relationType, false, isBothWayRelation);
					result = 2;
				}
			}
			else
			{
				bool flag7 = taiwuId == selectedCharId;
				if (flag7)
				{
					result = 0;
				}
				else
				{
					result = 1;
				}
			}
			return result;
		}

		// Token: 0x06002241 RID: 8769 RVA: 0x001B1380 File Offset: 0x001AF580
		public static int ApplyThreadNeedle_EndRelation(EventArgBox argBox, ushort relationType, bool isBothWayRelation = true)
		{
			int taiwuId = EventArgBox.TaiwuCharacterId;
			int charId = -1;
			argBox.Get("CharacterId", ref charId);
			int selectedCharId = -1;
			argBox.Get("SelectedCharIdForThreadNeedleEnding", ref selectedCharId);
			int metaDataId = -1;
			argBox.Get("metaDataIdForThreaten", ref metaDataId);
			bool flag = taiwuId == -1 || charId == -1 || selectedCharId == -1 || metaDataId == -1;
			if (flag)
			{
				throw new Exception("Wrong Ids In ThreadNeedle Event !");
			}
			bool flag2 = relationType != 32768;
			int difficulty;
			int effect;
			if (flag2)
			{
				difficulty = EventHelper.GetThreadNeedleDifficultyOfEndRelation(charId, selectedCharId, relationType, isBothWayRelation);
				effect = EventHelper.GetThreadNeedleEffectOfEndRelation(taiwuId, charId, selectedCharId, metaDataId);
			}
			else
			{
				difficulty = EventHelper.GetThreadNeedleDifficultyOfStartRelation(charId, selectedCharId, relationType, isBothWayRelation);
				effect = EventHelper.GetThreadNeedleEffectOfStartRelation(taiwuId, charId, selectedCharId, metaDataId);
			}
			bool flag3 = difficulty == int.MinValue || effect == int.MinValue;
			if (flag3)
			{
				throw new Exception("Wrong Values Of ThreadNeedle Event!");
			}
			EventHelper.CostSecretInformationUsedCount(taiwuId, metaDataId);
			bool flag4 = effect >= difficulty;
			int result;
			if (flag4)
			{
				bool flag5 = EventHelper.CheckEndRelationSucceed(charId, selectedCharId, relationType, isBothWayRelation);
				if (flag5)
				{
					bool flag6 = taiwuId == selectedCharId;
					if (flag6)
					{
						EventHelper.ApplyEndRelationByThreadNeedle(charId, selectedCharId, relationType, true, isBothWayRelation);
						result = 8;
					}
					else
					{
						EventHelper.ApplyEndRelationByThreadNeedle(charId, selectedCharId, relationType, true, isBothWayRelation);
						result = 9;
					}
				}
				else
				{
					bool flag7 = relationType == 16384 || relationType == 32768;
					if (flag7)
					{
						EventHelper.ApplyEndRelationByThreadNeedle(charId, selectedCharId, relationType, false, isBothWayRelation);
						result = 9;
					}
					else
					{
						result = 7;
					}
				}
			}
			else
			{
				bool flag8 = taiwuId == selectedCharId;
				if (flag8)
				{
					result = 5;
				}
				else
				{
					result = 6;
				}
			}
			return result;
		}

		// Token: 0x06002242 RID: 8770 RVA: 0x001B14FC File Offset: 0x001AF6FC
		public static EventArgBox GetSectMainStoryEventArgBox(sbyte orgTemplateId)
		{
			return DomainManager.Extra.GetSectMainStoryEventArgBox(orgTemplateId);
		}

		// Token: 0x06002243 RID: 8771 RVA: 0x001B1519 File Offset: 0x001AF719
		public static void SaveSectMainStoryEventArgBox(sbyte orgTemplateId)
		{
			DomainManager.Extra.SaveSectMainStoryEventArgumentBox(EventHelper.Domain.MainThreadDataContext, orgTemplateId);
		}

		// Token: 0x06002244 RID: 8772 RVA: 0x001B1532 File Offset: 0x001AF732
		public static void SaveArgToSectMainStory<T>(sbyte orgTemplateId, string key, T value)
		{
			DomainManager.Extra.SaveArgToSectMainStoryEventArgBox<T>(EventHelper.Domain.MainThreadDataContext, orgTemplateId, key, value);
		}

		// Token: 0x06002245 RID: 8773 RVA: 0x001B154D File Offset: 0x001AF74D
		public static void RemoveArgFromSectMainStory<T>(sbyte orgTemplateId, string key)
		{
			DomainManager.Extra.RemoveArgToSectMainStoryEventArgBox<T>(EventHelper.Domain.MainThreadDataContext, orgTemplateId, key);
		}

		// Token: 0x06002246 RID: 8774 RVA: 0x001B1567 File Offset: 0x001AF767
		public static int GetSectMainStoryActiveStatus(sbyte orgTemplateId)
		{
			return DomainManager.World.GetSectMainStoryActiveStatus(orgTemplateId);
		}

		// Token: 0x06002247 RID: 8775 RVA: 0x001B1574 File Offset: 0x001AF774
		public static void SetSectMainStoryActiveStatus(sbyte orgTemplateId, bool pause)
		{
			DomainManager.World.SetSectMainStoryActiveStatus(orgTemplateId, pause);
		}

		// Token: 0x06002248 RID: 8776 RVA: 0x001B1584 File Offset: 0x001AF784
		public static void InvestSectForMartialArtTournament(sbyte orgTemplateId, sbyte preparationType, int amount)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			Sect sect = (Sect)DomainManager.Organization.GetSettlementByOrgTemplateId(orgTemplateId);
			int[] investment = sect.GetTaiwuInvestmentForMartialArtTournament();
			investment[(int)preparationType] += amount;
			sect.SetTaiwuInvestmentForMartialArtTournament(investment, context);
			int taiwuCharId = DomainManager.Taiwu.GetTaiwuCharId();
			OrgMemberCollection members = sect.GetMembers();
			SortedList<long, int> sortedByFavorability = new SortedList<long, int>();
			for (sbyte grade = 0; grade < 8; grade += 1)
			{
				HashSet<int> gradeMembers = members.GetMembers(grade);
				foreach (int memberCharId in gradeMembers)
				{
					SectCharacter sectChar = DomainManager.Organization.GetElement_SectCharacters(memberCharId);
					bool approvedTaiwu = sectChar.GetApprovedTaiwu();
					if (!approvedTaiwu)
					{
						short favorability = DomainManager.Character.GetFavorability(memberCharId, taiwuCharId);
						sortedByFavorability.Add(((long)favorability << 32) + (long)memberCharId, memberCharId);
					}
				}
			}
			bool flag = sortedByFavorability.Count == 0;
			if (!flag)
			{
				int minIndex = Math.Max(0, sortedByFavorability.Count - 1 - 3);
				int index = context.Random.Next(minIndex, sortedByFavorability.Count);
				int charId = sortedByFavorability.Values[index];
				SectCharacter selectedSectChar = DomainManager.Organization.GetElement_SectCharacters(charId);
				selectedSectChar.SetApprovedTaiwu(context, true);
			}
		}

		// Token: 0x06002249 RID: 8777 RVA: 0x001B16F4 File Offset: 0x001AF8F4
		public static bool IsSectPreparingForMartialArtTournament(sbyte orgTemplateId)
		{
			short settlementId = DomainManager.Organization.GetSettlementIdByOrgTemplateId(orgTemplateId);
			List<MartialArtTournamentPreparationInfo> preparationInfo = DomainManager.Organization.GetMartialArtTournamentPreparationInfoList();
			return preparationInfo.FindIndex((MartialArtTournamentPreparationInfo info) => info.SettlementId == settlementId) >= 0;
		}

		// Token: 0x0600224A RID: 8778 RVA: 0x001B1740 File Offset: 0x001AF940
		public static List<GameData.Domains.Character.Character> GetSectCharList(sbyte sectId, sbyte minGrade = 0, sbyte maxGrade = 8)
		{
			return EventHelper.GetSectCharListWithInfantFilter(sectId, minGrade, maxGrade, true);
		}

		// Token: 0x0600224B RID: 8779 RVA: 0x001B174C File Offset: 0x001AF94C
		public static List<GameData.Domains.Character.Character> GetSectCharListWithInfantFilter(sbyte sectId, sbyte minGrade = 0, sbyte maxGrade = 8, bool includeInfant = false)
		{
			List<GameData.Domains.Character.Character> charList = new List<GameData.Domains.Character.Character>();
			short settlementId = DomainManager.Organization.GetSettlementIdByOrgTemplateId(sectId);
			DomainManager.Organization.GetCharactersFromSettlementWithInfantFilter(settlementId, minGrade, maxGrade, charList, includeInfant);
			return charList;
		}

		// Token: 0x0600224C RID: 8780 RVA: 0x001B1784 File Offset: 0x001AF984
		public static GameData.Domains.Character.Character TryGetSectLeaderAtLocation(Location location, sbyte orgTemplateId, bool includeAllBlocksInGroup)
		{
			bool flag = !location.IsValid() || !OrganizationDomain.IsSect(orgTemplateId);
			GameData.Domains.Character.Character result;
			if (flag)
			{
				result = null;
			}
			else
			{
				Settlement settlement = DomainManager.Organization.GetSettlementByOrgTemplateId(orgTemplateId);
				GameData.Domains.Character.Character sectLeader = settlement.GetLeader();
				bool flag2 = sectLeader == null;
				if (flag2)
				{
					result = null;
				}
				else
				{
					int sectLeaderId = sectLeader.GetId();
					Location leaderLocation = sectLeader.GetLocation();
					bool flag3 = leaderLocation.AreaId != location.AreaId;
					if (flag3)
					{
						result = null;
					}
					else
					{
						MapBlockData block = DomainManager.Map.GetBlock(location);
						bool flag4 = location.BlockId == leaderLocation.BlockId && block.CharacterSet != null && block.CharacterSet.Contains(sectLeaderId);
						if (flag4)
						{
							result = sectLeader;
						}
						else
						{
							if (includeAllBlocksInGroup)
							{
								MapBlockData rootBlock = block.GetRootBlock();
								bool flag5 = rootBlock != block && rootBlock.BlockId == leaderLocation.BlockId && rootBlock.CharacterSet != null && rootBlock.CharacterSet.Contains(sectLeaderId);
								if (flag5)
								{
									return sectLeader;
								}
								bool flag6 = rootBlock.GroupBlockList != null;
								if (flag6)
								{
									for (int i = 0; i < rootBlock.GroupBlockList.Count; i++)
									{
										MapBlockData childBlock = rootBlock.GroupBlockList[i];
										bool flag7 = childBlock.BlockId == leaderLocation.BlockId && childBlock.CharacterSet != null && childBlock.CharacterSet.Contains(sectLeaderId);
										if (flag7)
										{
											return sectLeader;
										}
									}
								}
							}
							result = null;
						}
					}
				}
			}
			return result;
		}

		// Token: 0x0600224D RID: 8781 RVA: 0x001B1918 File Offset: 0x001AFB18
		public static GameData.Domains.Character.Character TryGetSectMemberAtLocation(Location location, sbyte orgTemplateId, sbyte minGrade, sbyte maxGrade = -1, bool mustAdult = true, bool alsoCheckRoot = false, bool alsoCheckBelong = false)
		{
			bool flag = !location.IsValid();
			GameData.Domains.Character.Character result;
			if (flag)
			{
				result = null;
			}
			else
			{
				DataContext context = EventHelper.Domain.MainThreadDataContext;
				minGrade = Math.Clamp(minGrade, 0, 8);
				maxGrade = Math.Max(maxGrade, minGrade);
				List<MapBlockData> blocks = ObjectPool<List<MapBlockData>>.Instance.Get();
				List<GameData.Domains.Character.Character> memberList = ObjectPool<List<GameData.Domains.Character.Character>>.Instance.Get();
				if (alsoCheckBelong)
				{
					DomainManager.Map.QueryRegularBelongBlocks(blocks, location, true, new MapDomain.MapBlockDataFilter[]
					{
						new MapDomain.MapBlockDataFilter(MapDomain.QueryFilterAnyCharacter)
					});
				}
				else if (alsoCheckRoot)
				{
					DomainManager.Map.QueryRootBlocks(blocks, location);
				}
				else
				{
					blocks.Add(DomainManager.Map.GetBlock(location));
				}
				foreach (MapBlockData block in blocks)
				{
					HashSet<int> characterSet = block.CharacterSet;
					bool flag2 = characterSet == null || characterSet.Count <= 0;
					if (!flag2)
					{
						foreach (int charId in block.CharacterSet)
						{
							GameData.Domains.Character.Character character;
							bool flag3 = !DomainManager.Character.TryGetElement_Objects(charId, out character);
							if (!flag3)
							{
								bool flag4 = mustAdult && character.GetAgeGroup() != 2;
								if (!flag4)
								{
									OrganizationInfo orgInfo = character.GetOrganizationInfo();
									bool flag5 = orgInfo.OrgTemplateId != orgTemplateId || orgInfo.Grade < minGrade || orgInfo.Grade > maxGrade;
									if (!flag5)
									{
										memberList.Add(character);
									}
								}
							}
						}
					}
				}
				GameData.Domains.Character.Character orgMember = (memberList.Count > 0) ? memberList.GetRandom(context.Random) : null;
				ObjectPool<List<MapBlockData>>.Instance.Return(blocks);
				ObjectPool<List<GameData.Domains.Character.Character>>.Instance.Return(memberList);
				result = orgMember;
			}
			return result;
		}

		// Token: 0x0600224E RID: 8782 RVA: 0x001B1B24 File Offset: 0x001AFD24
		public static bool CharacterIsOrganizationLeader(GameData.Domains.Character.Character character, sbyte orgTemplateId)
		{
			Settlement settlement = DomainManager.Organization.GetSettlementByOrgTemplateId(orgTemplateId);
			GameData.Domains.Character.Character leader = settlement.GetLeader();
			bool flag = leader == null;
			return !flag && leader.GetId() == character.GetId();
		}

		// Token: 0x0600224F RID: 8783 RVA: 0x001B1B64 File Offset: 0x001AFD64
		public static GameData.Domains.Character.Character GetOrganizationLeader(sbyte orgTemplateId)
		{
			Settlement settlement = DomainManager.Organization.GetSettlementByOrgTemplateId(orgTemplateId);
			return (settlement != null) ? settlement.GetLeader() : null;
		}

		// Token: 0x06002250 RID: 8784 RVA: 0x001B1B90 File Offset: 0x001AFD90
		public static GameData.Domains.Character.Character GetOrganizationHighestMember(sbyte orgTemplateId)
		{
			Settlement settlement = DomainManager.Organization.GetSettlementByOrgTemplateId(orgTemplateId);
			return (settlement != null) ? settlement.GetAvailableHighMember(8, 0, true) : null;
		}

		// Token: 0x06002251 RID: 8785 RVA: 0x001B1BC0 File Offset: 0x001AFDC0
		public static bool CharacterIsOrganizationHigh(GameData.Domains.Character.Character character, sbyte orgTemplateId)
		{
			OrganizationInfo orgInfo = character.GetOrganizationInfo();
			return orgInfo.Grade >= 6 && orgInfo.OrgTemplateId == orgTemplateId;
		}

		// Token: 0x06002252 RID: 8786 RVA: 0x001B1BF0 File Offset: 0x001AFDF0
		[Obsolete("Use EventHelper.TryGetSectLeaderAtLocation instead")]
		public static GameData.Domains.Character.Character FindLeaderOfTargetOrganizationAtLocation(Location location, short templateId, bool includeAllRelatedLocations)
		{
			return EventHelper.TryGetSectLeaderAtLocation(location, (sbyte)templateId, includeAllRelatedLocations);
		}

		// Token: 0x06002253 RID: 8787 RVA: 0x001B1C0C File Offset: 0x001AFE0C
		public static void SetSectCharApprovedTaiwu(int charId, bool approved = true)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			DomainManager.Character.TryCreateRelation(context, charId, DomainManager.Taiwu.GetTaiwuCharId());
			SectCharacter sectChar;
			DomainManager.Organization.TryGetElement_SectCharacters(charId, out sectChar);
			if (sectChar != null)
			{
				sectChar.SetApprovedTaiwu(context, approved);
			}
		}

		// Token: 0x06002254 RID: 8788 RVA: 0x001B1C58 File Offset: 0x001AFE58
		public static void AddSectMemberFeature(int charId, sbyte orgTemplateId)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			OrganizationInfo orgInfo = new OrganizationInfo(orgTemplateId, 3, true, -1);
			GameData.Domains.Character.Character character;
			bool flag = DomainManager.Character.TryGetElement_Objects(charId, out character);
			if (flag)
			{
				DomainManager.Organization.TryAddSectMemberFeature(context, character, orgInfo);
			}
		}

		// Token: 0x06002255 RID: 8789 RVA: 0x001B1C9C File Offset: 0x001AFE9C
		public static bool IsLocationHasTargetSectCharacter(Location location, short orgTemplateId)
		{
			MapBlockData blockData = DomainManager.Map.GetBlockData(location.AreaId, location.BlockId);
			bool flag = blockData.CharacterSet == null;
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				foreach (int charId in blockData.CharacterSet)
				{
					bool flag2 = charId < 0;
					if (!flag2)
					{
						GameData.Domains.Character.Character character = DomainManager.Character.GetElement_Objects(charId);
						OrganizationInfo organizationInfo = character.GetOrganizationInfo();
						bool flag3 = (short)organizationInfo.OrgTemplateId == orgTemplateId;
						if (flag3)
						{
							return true;
						}
					}
				}
				result = false;
			}
			return result;
		}

		// Token: 0x06002256 RID: 8790 RVA: 0x001B1D54 File Offset: 0x001AFF54
		public static int GetTargetSectCharacterAtLocation(Location location, short orgTemplateId, sbyte grade = -1)
		{
			MapBlockData blockData = DomainManager.Map.GetBlockData(location.AreaId, location.BlockId);
			bool flag = blockData.CharacterSet == null;
			int result;
			if (flag)
			{
				result = -1;
			}
			else
			{
				foreach (int charId in blockData.CharacterSet)
				{
					bool flag2 = charId < 0;
					if (!flag2)
					{
						GameData.Domains.Character.Character character = DomainManager.Character.GetElement_Objects(charId);
						OrganizationInfo organizationInfo = character.GetOrganizationInfo();
						bool flag3 = grade > 0 && organizationInfo.Grade != grade;
						if (!flag3)
						{
							bool flag4 = (short)organizationInfo.OrgTemplateId == orgTemplateId;
							if (flag4)
							{
								return charId;
							}
						}
					}
				}
				result = -1;
			}
			return result;
		}

		// Token: 0x06002257 RID: 8791 RVA: 0x001B1E2C File Offset: 0x001B002C
		public static short GetSectApprovingRate(sbyte sectTemplateId)
		{
			return DomainManager.Organization.GetSettlementByOrgTemplateId(sectTemplateId).CalcApprovingRate();
		}

		// Token: 0x06002258 RID: 8792 RVA: 0x001B1E50 File Offset: 0x001B0050
		public static short CalcSpiritualDebtActualCost(sbyte orgTemplateId, short baseCost)
		{
			bool flag = !OrganizationDomain.IsSect(orgTemplateId);
			short result;
			if (flag)
			{
				result = baseCost;
			}
			else
			{
				short approvingRate = EventHelper.GetSectApprovingRate(orgTemplateId);
				bool flag2 = approvingRate > 800;
				if (flag2)
				{
					result = baseCost / 2;
				}
				else
				{
					result = baseCost;
				}
			}
			return result;
		}

		// Token: 0x06002259 RID: 8793 RVA: 0x001B1E90 File Offset: 0x001B0090
		public static List<GameData.Domains.Character.Character> SetSectMemberApproveTaiwu(sbyte sectId, byte countMax, sbyte gradeMin = 0, sbyte gradeMax = 8)
		{
			List<GameData.Domains.Character.Character> allMembers = EventHelper.GetSectCharListWithInfantFilter(sectId, 0, 8, false);
			for (int i = allMembers.Count - 1; i >= 0; i--)
			{
				bool flag = EventHelper.IsSectCharApprovedTaiwu(allMembers[i].GetId());
				if (!flag)
				{
					OrganizationInfo orgInfo = allMembers[i].GetOrganizationInfo();
					bool flag2 = orgInfo.Grade > gradeMax || orgInfo.Grade < gradeMin;
					if (flag2)
					{
						allMembers.RemoveAt(i);
					}
				}
			}
			countMax = (byte)Math.Min((int)countMax, allMembers.Count);
			List<GameData.Domains.Character.Character> retList = new List<GameData.Domains.Character.Character>();
			CollectionUtils.Shuffle<GameData.Domains.Character.Character>(EventHelper.Domain.MainThreadDataContext.Random, allMembers);
			for (int j = 0; j < (int)countMax; j++)
			{
				EventHelper.SetSectCharApprovedTaiwu(allMembers[j].GetId(), true);
				retList.Add(allMembers[j]);
			}
			return retList;
		}

		// Token: 0x0600225A RID: 8794 RVA: 0x001B1F7C File Offset: 0x001B017C
		public static void SetSectAllowLearning(sbyte sectId)
		{
			short settlementId = DomainManager.Organization.GetSettlementByOrgTemplateId(sectId).GetId();
			DomainManager.Organization.GetElement_Sects(settlementId).SetTaiwuExploreStatus(2, EventHelper.Domain.MainThreadDataContext);
			EventHelper.AddLegacyPoint(36, 100);
		}

		// Token: 0x0600225B RID: 8795 RVA: 0x001B1FC4 File Offset: 0x001B01C4
		public static void SetSectSpiritualDebtInteractionOccurred(sbyte sectId)
		{
			short settlementId = DomainManager.Organization.GetSettlementByOrgTemplateId(sectId).GetId();
			DomainManager.Organization.GetElement_Sects(settlementId).SetSpiritualDebtInteractionOccurred(true, EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x0600225C RID: 8796 RVA: 0x001B2000 File Offset: 0x001B0200
		public static void RecommendPupil(int charId, GameData.Domains.Character.Character student, short settlementId)
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			EventHelper.ChangeRoleResource(taiwu, 7, -200, true);
			EventHelper.RequestRoleLeaveGroup(charId);
			EventHelper.JoinOrganization(student, settlementId, 0);
			OrganizationMemberItem orgMemberConfig = OrganizationDomain.GetOrgMemberConfig(student.GetOrganizationInfo());
			EventHelper.<>c__DisplayClass1428_0 CS$<>8__locals1;
			CS$<>8__locals1.addSeniority = 0;
			sbyte i = 0;
			while ((int)i < orgMemberConfig.LifeSkillsAdjust.Length)
			{
				short adjust = orgMemberConfig.LifeSkillsAdjust[(int)i];
				bool flag = adjust < 0;
				if (!flag)
				{
					short value = student.GetLifeSkillQualification(i);
					EventHelper.<RecommendPupil>g__AddSeniority|1428_0(value, adjust, ref CS$<>8__locals1);
				}
				i += 1;
			}
			sbyte j = 0;
			while ((int)j < orgMemberConfig.CombatSkillsAdjust.Length)
			{
				short adjust2 = orgMemberConfig.CombatSkillsAdjust[(int)j];
				bool flag2 = adjust2 < 0;
				if (!flag2)
				{
					short value2 = student.GetCombatSkillQualification(j);
					EventHelper.<RecommendPupil>g__AddSeniority|1428_0(value2, adjust2, ref CS$<>8__locals1);
				}
				j += 1;
			}
			sbyte k = 0;
			while ((int)k < orgMemberConfig.MainAttributesAdjust.Length)
			{
				short adjust3 = orgMemberConfig.MainAttributesAdjust[(int)k];
				bool flag3 = adjust3 < 0;
				if (!flag3)
				{
					short value3 = student.GetMaxMainAttribute(k);
					EventHelper.<RecommendPupil>g__AddSeniority|1428_0(value3, adjust3, ref CS$<>8__locals1);
				}
				k += 1;
			}
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			bool flag4 = CS$<>8__locals1.addSeniority > 0;
			if (flag4)
			{
				DomainManager.Extra.ChangeProfessionSeniority(context, 8, CS$<>8__locals1.addSeniority, true, false);
			}
		}

		// Token: 0x0600225D RID: 8797 RVA: 0x001B2168 File Offset: 0x001B0368
		public static void JoinOrganization(GameData.Domains.Character.Character character, short settlementId, sbyte grade)
		{
			OrganizationInfo originalOrgInfo = character.GetOrganizationInfo();
			Settlement settlement = DomainManager.Organization.GetSettlement(settlementId);
			bool flag = originalOrgInfo.OrgTemplateId == settlement.GetOrgTemplateId();
			if (flag)
			{
				bool flag2 = originalOrgInfo.Grade != grade;
				if (flag2)
				{
					DomainManager.Organization.ChangeGrade(EventHelper.Domain.MainThreadDataContext, character, grade, true);
				}
			}
			else
			{
				OrganizationInfo targetOrgInfo = default(OrganizationInfo);
				targetOrgInfo.OrgTemplateId = settlement.GetOrgTemplateId();
				targetOrgInfo.Grade = grade;
				targetOrgInfo.SettlementId = settlementId;
				targetOrgInfo.Principal = true;
				DomainManager.Organization.ChangeOrganization(EventHelper.Domain.MainThreadDataContext, character, targetOrgInfo);
			}
		}

		// Token: 0x0600225E RID: 8798 RVA: 0x001B2210 File Offset: 0x001B0410
		public static void ChangeOrganization(GameData.Domains.Character.Character character, OrganizationInfo destOrgInfo)
		{
			DomainManager.Organization.ChangeOrganization(EventHelper.Domain.MainThreadDataContext, character, destOrgInfo);
		}

		// Token: 0x0600225F RID: 8799 RVA: 0x001B222C File Offset: 0x001B042C
		public static void PunishSectMember(sbyte orgTemplateId, GameData.Domains.Character.Character character, sbyte punishmentSeverity = -1, short punishmentType = -1, bool isArrested = false)
		{
			Settlement settlement = DomainManager.Organization.GetSettlementByOrgTemplateId(orgTemplateId);
			Sect sect = settlement as Sect;
			bool flag = sect == null;
			if (!flag)
			{
				DomainManager.Organization.PunishSectMember(EventHelper.Domain.MainThreadDataContext, sect, character, punishmentSeverity, punishmentType, isArrested);
			}
		}

		// Token: 0x06002260 RID: 8800 RVA: 0x001B2275 File Offset: 0x001B0475
		public static void JoinSpouseOrganization(GameData.Domains.Character.Character selfChar, GameData.Domains.Character.Character spouseChar)
		{
			DomainManager.Organization.JoinSpouseOrganization(EventHelper.Domain.MainThreadDataContext, selfChar, spouseChar);
		}

		// Token: 0x06002261 RID: 8801 RVA: 0x001B2290 File Offset: 0x001B0490
		public static void ChangeOrganizationGrade(int charId, int changeValue)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			GameData.Domains.Character.Character character = DomainManager.Character.GetElement_Objects(charId);
			OrganizationInfo orgInfo = character.GetOrganizationInfo();
			sbyte destGrade = (sbyte)Math.Clamp((int)orgInfo.Grade + changeValue, 0, 8);
			bool flag = !orgInfo.Principal;
			if (flag)
			{
				OrganizationItem orgConfig = Organization.Instance[orgInfo.OrgTemplateId];
				OrganizationMemberItem memberConfig = OrganizationMember.Instance[orgConfig.Members[(int)destGrade]];
				bool flag2 = string.IsNullOrEmpty(memberConfig.SpouseAnonymousTitles[0]);
				if (flag2)
				{
					orgInfo.Principal = true;
				}
			}
			DomainManager.Organization.ChangeGrade(context, character, destGrade, orgInfo.Principal);
			int spouseId = DomainManager.Character.GetAliveSpouse(charId);
			bool flag3 = spouseId >= 0;
			if (flag3)
			{
				GameData.Domains.Character.Character spouse = DomainManager.Character.GetElement_Objects(spouseId);
				DomainManager.Organization.UpdateGradeAccordingToSpouse(context, spouse, character);
			}
		}

		// Token: 0x06002262 RID: 8802 RVA: 0x001B2370 File Offset: 0x001B0570
		public static void EndAllMentorAndMenteeRelations(int charId, short orgTemplateId)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			HashSet<int> mentorSet = DomainManager.Character.GetRelatedCharIds(charId, 2048);
			HashSet<int> menteeSet = DomainManager.Character.GetRelatedCharIds(charId, 4096);
			foreach (int relatedCharId in mentorSet)
			{
				DomainManager.Character.ChangeRelationType(context, charId, relatedCharId, 2048, 0);
				GameData.Domains.Character.Character relatedChar;
				bool flag = DomainManager.Character.TryGetElement_Objects(relatedCharId, out relatedChar) && relatedChar != null;
				if (flag)
				{
					DomainManager.Character.ChangeRelationType(context, relatedCharId, charId, 4096, 0);
				}
			}
			foreach (int relatedCharId2 in menteeSet)
			{
				DomainManager.Character.ChangeRelationType(context, charId, relatedCharId2, 4096, 0);
				GameData.Domains.Character.Character relatedChar2;
				bool flag2 = DomainManager.Character.TryGetElement_Objects(relatedCharId2, out relatedChar2) && relatedChar2 != null;
				if (flag2)
				{
					DomainManager.Character.ChangeRelationType(context, relatedCharId2, charId, 2048, 0);
				}
			}
		}

		// Token: 0x06002263 RID: 8803 RVA: 0x001B24B8 File Offset: 0x001B06B8
		public static void SectPunishment(int charId, sbyte punishLevel)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			GameData.Domains.Character.Character character = DomainManager.Character.GetElement_Objects(charId);
			Sect sect;
			bool flag = DomainManager.Organization.TryGetElement_Sects(character.GetOrganizationInfo().SettlementId, out sect);
			if (flag)
			{
				DomainManager.Organization.PunishSectMember(context, sect, character, punishLevel, -1, false);
			}
		}

		// Token: 0x06002264 RID: 8804 RVA: 0x001B250C File Offset: 0x001B070C
		public static void AddMaxApprovingRateBonus(short settlementId, short bonus, int duration)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			bool flag = duration < 0;
			if (flag)
			{
				Settlement settlement = DomainManager.Organization.GetSettlement(settlementId);
				short currBonus = settlement.GetApprovingRateUpperLimitBonus();
				currBonus += bonus;
				settlement.SetApprovingRateUpperLimitBonus(currBonus, context);
			}
			else
			{
				DomainManager.Extra.AddMaxApprovingRateTempBonus(context, settlementId, bonus, duration);
			}
		}

		// Token: 0x06002265 RID: 8805 RVA: 0x001B2564 File Offset: 0x001B0764
		public static GameData.Domains.Character.Character GetSectCharacter(Location location, sbyte orgTemplateId, sbyte minGrade, sbyte maxGrade)
		{
			Tester.Assert(!location.Equals(Location.Invalid), "");
			MapBlockData mapBlockData = DomainManager.Map.GetBlockData(location.AreaId, location.BlockId);
			HashSet<int> characterSet = mapBlockData.CharacterSet;
			foreach (int charId in characterSet)
			{
				GameData.Domains.Character.Character character = DomainManager.Character.GetElement_Objects(charId);
				OrganizationInfo orgInfo = character.GetOrganizationInfo();
				bool flag = orgInfo.OrgTemplateId != orgTemplateId;
				if (!flag)
				{
					bool flag2 = orgInfo.Grade < minGrade || orgInfo.Grade > maxGrade;
					if (!flag2)
					{
						return character;
					}
				}
			}
			return null;
		}

		// Token: 0x06002266 RID: 8806 RVA: 0x001B2640 File Offset: 0x001B0840
		public static void AddMartialArtTournamentWinnerPrize(sbyte sectId)
		{
			bool flag = !OrganizationDomain.IsSect(sectId);
			if (!flag)
			{
				MartialArtTournamentMonthlyAction.AddMartialArtTournamentWinnerPrize(EventHelper.Domain.MainThreadDataContext, sectId);
			}
		}

		// Token: 0x06002267 RID: 8807 RVA: 0x001B2670 File Offset: 0x001B0870
		public static bool HaveGotSectCompetitionClothing(short organizationId)
		{
			string key = "ConchShip_PresetKey_SectCompetitionClothing" + EventHelper.GetSectCompetitionClothingTemplateId(organizationId).ToString();
			return EventHelper.GlobalArgBoxContainsKey<bool>(key);
		}

		// Token: 0x06002268 RID: 8808 RVA: 0x001B26A4 File Offset: 0x001B08A4
		public static void SaveSectCompetitionClothing(short organizationId)
		{
			string key = "ConchShip_PresetKey_SectCompetitionClothing" + EventHelper.GetSectCompetitionClothingTemplateId(organizationId).ToString();
			EventHelper.SaveGlobalArg<bool>(key, true);
		}

		// Token: 0x06002269 RID: 8809 RVA: 0x001B26D4 File Offset: 0x001B08D4
		public static short GetSectCompetitionClothingTemplateId(short organizationId)
		{
			sbyte level = DomainManager.World.GetXiangshuLevel();
			int offset = 0;
			bool flag = level >= 2;
			if (flag)
			{
				offset = 0;
			}
			bool flag2 = level >= 4;
			if (flag2)
			{
				offset = 1;
			}
			bool flag3 = level >= 6;
			if (flag3)
			{
				offset = 2;
			}
			int startIndex = 18;
			int templateId = (int)((organizationId - 1) * 3) + startIndex + offset;
			bool flag4 = organizationId > 4;
			if (flag4)
			{
				templateId++;
			}
			return (short)templateId;
		}

		// Token: 0x0600226A RID: 8810 RVA: 0x001B2740 File Offset: 0x001B0940
		public static void GetSectCompetitionRewards(EventArgBox argBox, bool getExtra, bool getFeature, bool getClothing)
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			Location location = taiwu.GetValidLocation();
			int sustainDegree = EventHelper.GetAdventureParameter("sustainDegree");
			int getAmount = Math.Min(sustainDegree / 20, 5);
			sbyte stateId = EventHelper.GetStateIdByAreaId(location.AreaId);
			sbyte orgTemplateId = EventHelper.GetStateSectOrgTemplateId(stateId);
			sbyte highGrade = 0;
			argBox.Get("LearnGrade", ref highGrade);
			sbyte nowGrade = Math.Min(8, highGrade);
			List<GameData.Domains.Character.Character> charList = EventHelper.SetSectMemberApproveTaiwu(orgTemplateId, (byte)getAmount, 0, nowGrade);
			foreach (GameData.Domains.Character.Character role in charList)
			{
				EventHelper.ChangeFavorabilityOptionalStoryEvent(role, argBox.GetCharacter("RoleTaiwu"), (short)EventHelper.GetRandom(3, 6001));
			}
			short settlementId = EventHelper.GetBelongSettlementId(location.AreaId, location.BlockId);
			EventHelper.AddMaxApprovingRateBonus(settlementId, 100, 36);
			if (getClothing)
			{
				short clothingTemplateId = EventHelper.GetSectCompetitionClothingTemplateId((short)orgTemplateId);
				ItemKey clothItem = EventHelper.CreateItem(3, clothingTemplateId);
				string key = "ConchShip_PresetKey_SectCompetitionClothing" + clothingTemplateId.ToString();
				EventHelper.SaveGlobalArg<bool>(key, true);
				argBox.Set("GetItemKey", clothItem);
				EventHelper.AddItemToRole(taiwu, clothItem, 1, -1);
			}
			if (getExtra)
			{
				if (getFeature)
				{
					taiwu.AddFeature(EventHelper.Domain.MainThreadDataContext, EventHelper.GetOrganizationMenteeFeature((short)orgTemplateId), false);
				}
				else
				{
					EventHelper.GetExpRewardInCombatMatch(argBox);
				}
			}
		}

		// Token: 0x0600226B RID: 8811 RVA: 0x001B28BC File Offset: 0x001B0ABC
		public static void GetExpRewardInCombatMatch(EventArgBox argBox)
		{
			int charId = -1;
			GameData.Domains.Character.Character character;
			bool flag = !argBox.Get("HostId", ref charId) || !DomainManager.Character.TryGetElement_Objects(charId, out character);
			if (!flag)
			{
				sbyte grade = character.GetOrganizationInfo().Grade;
				int value = (int)((1 + grade) * (1 + grade) * (1 + grade) * 20);
				EventHelper.ChangeRoleExp(DomainManager.Taiwu.GetTaiwu(), value);
				argBox.Set("ExpReward", value);
			}
		}

		// Token: 0x0600226C RID: 8812 RVA: 0x001B2930 File Offset: 0x001B0B30
		public static short GetOrganizationMenteeFeature(short organizationTemplateId)
		{
			return organizationTemplateId - 1 + 499;
		}

		// Token: 0x0600226D RID: 8813 RVA: 0x001B294C File Offset: 0x001B0B4C
		public static int CalcSectCharApprovedTaiwuDebtCost(GameData.Domains.Character.Character character)
		{
			sbyte grade = EventHelper.GetRoleGrade(character);
			return (int)((20 + grade * 10) * 10);
		}

		// Token: 0x0600226E RID: 8814 RVA: 0x001B2974 File Offset: 0x001B0B74
		public static int CalcSectCharApprovedTaiwuMoneyCost(GameData.Domains.Character.Character character)
		{
			sbyte grade = EventHelper.GetRoleGrade(character);
			return (int)((1 + grade) * (1 + grade) * (1 + grade) * 100);
		}

		// Token: 0x0600226F RID: 8815 RVA: 0x001B29A0 File Offset: 0x001B0BA0
		public static int GetResourceCostInSectCombatMatch(GameData.Domains.Character.Character character, sbyte type = -1)
		{
			sbyte grade = EventHelper.GetRoleGrade(character);
			if (!true)
			{
			}
			int num;
			if (type != -1)
			{
				if (type != 6)
				{
					if (type != 7)
					{
						num = 20;
					}
					else
					{
						num = 10;
					}
				}
				else
				{
					num = 100;
				}
			}
			else
			{
				num = 50;
			}
			if (!true)
			{
			}
			int multiplier = num;
			return (int)((1 + grade) * (1 + grade) * (1 + grade)) * multiplier;
		}

		// Token: 0x06002270 RID: 8816 RVA: 0x001B29F8 File Offset: 0x001B0BF8
		public static int GetResourceCostInSectCombatMatch(int charId, sbyte type = -1)
		{
			return EventHelper.GetResourceCostInSectCombatMatch(DomainManager.Character.GetElement_Objects(charId), type);
		}

		// Token: 0x06002271 RID: 8817 RVA: 0x001B2A1C File Offset: 0x001B0C1C
		public static int SetSectCombatMatchEnemy(short orgTemplateId, EventArgBox argBox)
		{
			if (!true)
			{
			}
			short num;
			switch (orgTemplateId)
			{
			case 2:
				num = 325;
				goto IL_17F;
			case 5:
			{
				int random = EventHelper.GetRandom(0, 5);
				if (!true)
				{
				}
				short num2;
				switch (random)
				{
				case 0:
					num2 = 397;
					break;
				case 1:
					num2 = 405;
					break;
				case 2:
					num2 = 413;
					break;
				case 3:
					num2 = 421;
					break;
				default:
					num2 = 429;
					break;
				}
				if (!true)
				{
				}
				num = num2;
				goto IL_17F;
			}
			case 6:
				num = 357;
				goto IL_17F;
			case 7:
				num = 365;
				goto IL_17F;
			case 9:
				num = 381;
				goto IL_17F;
			case 10:
				num = 389;
				goto IL_17F;
			case 11:
				num = 397;
				goto IL_17F;
			case 14:
				num = 421;
				goto IL_17F;
			case 15:
			{
				int random2 = EventHelper.GetRandom(0, 5);
				if (!true)
				{
				}
				short num2;
				switch (random2)
				{
				case 0:
					num2 = 317;
					break;
				case 1:
					num2 = 325;
					break;
				case 2:
					num2 = 333;
					break;
				case 3:
					num2 = 341;
					break;
				default:
					num2 = 349;
					break;
				}
				if (!true)
				{
				}
				num = num2;
				goto IL_17F;
			}
			}
			DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(33, 1);
			defaultInterpolatedStringHandler.AppendLiteral("Invalid organization template id ");
			defaultInterpolatedStringHandler.AppendFormatted<short>(orgTemplateId);
			throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
			IL_17F:
			if (!true)
			{
			}
			short characterTemplateId = num;
			short templateId = SectMainStoryRelatedConstants.GetTemplateIdOfFixedCharacterCombatWith(characterTemplateId, 7, false);
			int disciple = EventHelper.CreateNonIntelligentCharacter(templateId);
			argBox.Set("Disciple", disciple);
			return disciple;
		}

		// Token: 0x06002272 RID: 8818 RVA: 0x001B2BD4 File Offset: 0x001B0DD4
		public static void SetToRepayKindessChar(EventArgBox argBox)
		{
			int charId = -1;
			bool flag = argBox.Get("Disciple", ref charId);
			if (flag)
			{
				GameData.Domains.Character.Character character = EventHelper.GetCharacterById(charId);
				GameData.Domains.Character.Character taiwu = argBox.GetCharacter("RoleTaiwu");
				OrganizationInfo orgInfo = character.GetOrganizationInfo();
				EventHelper.ConvertRandomEnemy(character, taiwu.GetValidLocation());
				EventHelper.JoinOrganization(character, orgInfo.SettlementId, orgInfo.Grade);
				EventHelper.ChangeFavorabilityOptional(character, taiwu, 8000, 0);
				EventHelper.SetToRepayKindnessCharId(charId);
			}
		}

		// Token: 0x06002273 RID: 8819 RVA: 0x001B2C49 File Offset: 0x001B0E49
		public static void SetToRepayKindnessCharId(int charId)
		{
			DomainManager.World.SetToRepayKindnessCharId(charId);
		}

		// Token: 0x06002274 RID: 8820 RVA: 0x001B2C58 File Offset: 0x001B0E58
		public static int GetToRepayKindnessCharId()
		{
			return DomainManager.World.GetToRepayKindnessCharId();
		}

		// Token: 0x06002275 RID: 8821 RVA: 0x001B2C74 File Offset: 0x001B0E74
		public static ItemKey GetToRepayKindnessCombatSkillBook(int charId)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			Dictionary<short, GameData.Domains.CombatSkill.CombatSkill> combatSkills = DomainManager.CombatSkill.GetCharCombatSkills(charId);
			int taiwuCharId = DomainManager.Taiwu.GetTaiwuCharId();
			Dictionary<short, GameData.Domains.CombatSkill.CombatSkill> learnedCombatSkills = DomainManager.CombatSkill.GetCharCombatSkills(taiwuCharId);
			short selectedCombatSkill = -1;
			foreach (KeyValuePair<short, GameData.Domains.CombatSkill.CombatSkill> keyValuePair in combatSkills)
			{
				short num;
				GameData.Domains.CombatSkill.CombatSkill combatSkill;
				keyValuePair.Deconstruct(out num, out combatSkill);
				short combatSkillTemplateId = num;
				bool flag = selectedCombatSkill == -1;
				if (flag)
				{
					selectedCombatSkill = combatSkillTemplateId;
				}
				bool flag2 = !learnedCombatSkills.ContainsKey(combatSkillTemplateId);
				if (flag2)
				{
					selectedCombatSkill = combatSkillTemplateId;
				}
				bool flag3 = Config.CombatSkill.Instance[combatSkillTemplateId].Grade >= Config.CombatSkill.Instance[selectedCombatSkill].Grade;
				if (flag3)
				{
					selectedCombatSkill = combatSkillTemplateId;
				}
			}
			short bookId = Config.CombatSkill.Instance[selectedCombatSkill].BookId;
			ushort readingState = combatSkills[selectedCombatSkill].GetReadingState();
			byte generatedPageTypes = CombatSkillStateHelper.GeneratePageTypesFromReadingState(context.Random, readingState);
			byte internalIndex;
			for (internalIndex = 0; internalIndex < 15; internalIndex += 1)
			{
				bool flag4 = CombatSkillStateHelper.IsPageRead(readingState, internalIndex);
				if (flag4)
				{
					break;
				}
			}
			return DomainManager.Item.CreateDemandedSkillBook(context, bookId, internalIndex, generatedPageTypes);
		}

		// Token: 0x06002276 RID: 8822 RVA: 0x001B2DD0 File Offset: 0x001B0FD0
		public static void SetSectLeader(sbyte orgTemplateId, EventArgBox argBox)
		{
			Settlement settlement = DomainManager.Organization.GetSettlementByOrgTemplateId(orgTemplateId);
			bool flag = settlement != null && settlement.GetLeader() != null && settlement.GetLeader().GetAgeGroup() > 0 && EventHelper.IsCharacterAtTargetSectLocation(settlement.GetLeader(), 14);
			if (flag)
			{
				argBox.Set("SectLeader", settlement.GetLeader().GetId());
			}
			else
			{
				int leaderId = EventHelper.CreateNonIntelligentCharacter(EventHelper.GetSectRetiredSeniorTemplateId(orgTemplateId));
				argBox.Set("SectLeader", leaderId);
			}
		}

		// Token: 0x06002277 RID: 8823 RVA: 0x001B2E50 File Offset: 0x001B1050
		public static short TransformSettlementToSectSettlement(short settlementId)
		{
			bool flag = EventHelper.SettlementIsSect(settlementId);
			short result;
			if (flag)
			{
				result = settlementId;
			}
			else
			{
				Settlement settlement = DomainManager.Organization.GetSettlement(settlementId);
				Location location = settlement.GetLocation();
				sbyte stateTemplateId = DomainManager.Map.GetStateTemplateIdByAreaId(location.AreaId);
				Settlement sectSettlement = DomainManager.Organization.GetSettlementByOrgTemplateId(MapState.Instance[stateTemplateId].SectID);
				short sectSettlementId = sectSettlement.GetId();
				result = sectSettlementId;
			}
			return result;
		}

		// Token: 0x06002278 RID: 8824 RVA: 0x001B2EC0 File Offset: 0x001B10C0
		private static short GetSectRetiredSeniorTemplateId(sbyte orgTemplateId)
		{
			if (!true)
			{
			}
			short result;
			switch (orgTemplateId)
			{
			case 1:
				result = 316;
				break;
			case 2:
				result = 324;
				break;
			case 3:
				result = 332;
				break;
			case 4:
				result = 340;
				break;
			case 5:
				result = 348;
				break;
			case 6:
				result = 356;
				break;
			case 7:
				result = 364;
				break;
			case 8:
				result = 372;
				break;
			case 9:
				result = 380;
				break;
			case 10:
				result = 388;
				break;
			case 11:
				result = 396;
				break;
			case 12:
				result = 404;
				break;
			case 13:
				result = 412;
				break;
			case 14:
				result = 420;
				break;
			case 15:
				result = 428;
				break;
			default:
			{
				DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(27, 1);
				defaultInterpolatedStringHandler.AppendLiteral("Not support orgTemplateId: ");
				defaultInterpolatedStringHandler.AppendFormatted<sbyte>(orgTemplateId);
				throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
			}
			}
			if (!true)
			{
			}
			return result;
		}

		// Token: 0x06002279 RID: 8825 RVA: 0x001B2FD8 File Offset: 0x001B11D8
		public static bool BaihuaTaiwuMedicineAttinmentMeet(int needValue)
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			short medicineAttainment = taiwu.GetLifeSkillAttainment(8);
			return (int)medicineAttainment >= needValue;
		}

		// Token: 0x0600227A RID: 8826 RVA: 0x001B3004 File Offset: 0x001B1204
		public static void BaihuaTriggerAdventureFourAction()
		{
			DomainManager.TaiwuEvent.AddTempDynamicAction<BaihuaStoryAdventureFourTriggerAction>(EventHelper.Domain.MainThreadDataContext, new BaihuaStoryAdventureFourTriggerAction());
		}

		// Token: 0x0600227B RID: 8827 RVA: 0x001B3024 File Offset: 0x001B1224
		public static void BaihuaAdventureFourSetCharacterArgs(EventArgBox argBox)
		{
			GameData.Domains.Character.Character elder = argBox.GetCharacter("MajorCharacter_0_0");
			bool flag = EventHelper.IsTemporaryIntelligentCharacter(elder.GetId());
			if (flag)
			{
				EventHelper.KeepTemporaryCharacterAfterAdventure(elder);
			}
			argBox.Set("VillageHead", elder.GetId());
		}

		// Token: 0x0600227C RID: 8828 RVA: 0x001B3068 File Offset: 0x001B1268
		public static void BaihuaSetAnonymTaiwuActor(EventArgBox argBox, bool isLeft = true, sbyte anonymActorType = 1)
		{
			EventArgBox sectArgBox = DomainManager.Extra.GetSectMainStoryEventArgBox(3);
			bool isMale = false;
			sectArgBox.Get("ConchShip_PresetKey_BaihuaAnonymTaiwuIsMale", ref isMale);
			bool flag = isMale;
			if (flag)
			{
				string name = (anonymActorType == 1) ? "SectMainStoryBaihuaShadowAnonymMale" : ((anonymActorType == 2) ? "SectMainStoryAnonymMale" : "SectMainStoryBaihuaAnonymMaleRelieved");
				if (isLeft)
				{
					argBox.SetLeftActorKey(name);
				}
				else
				{
					argBox.SetActorKey(name);
				}
			}
			else
			{
				string name2 = (anonymActorType == 1) ? "SectMainStoryBaihuaShadowAnonymFemale" : ((anonymActorType == 2) ? "SectMainStoryAnonymFemale" : "SectMainStoryBaihuaAnonymFemaleRelieved");
				if (isLeft)
				{
					argBox.SetLeftActorKey(name2);
				}
				else
				{
					argBox.SetActorKey(name2);
				}
			}
		}

		// Token: 0x0600227D RID: 8829 RVA: 0x001B310C File Offset: 0x001B130C
		public static void BaihuaSetAnonymTaiwuEventBackground(EventArgBox argBox, string maleEventBackground, string femaleEventBackground)
		{
			EventArgBox sectArgBox = DomainManager.Extra.GetSectMainStoryEventArgBox(3);
			bool isMale = false;
			sectArgBox.Get("ConchShip_PresetKey_BaihuaAnonymTaiwuIsMale", ref isMale);
			argBox.Set("ConchShip_PresetKey_SpecifyEventBackground", isMale ? maleEventBackground : femaleEventBackground);
		}

		// Token: 0x0600227E RID: 8830 RVA: 0x001B314C File Offset: 0x001B134C
		public static void BaihuaCreateAnonymTaiwuActor(EventArgBox argBox)
		{
			EventHelper.CreateAdventureActor(194, "SectMainStoryBaihuaShadowAnonymMale", argBox);
			EventHelper.CreateAdventureActor(199, "SectMainStoryAnonymMale", argBox);
			EventHelper.CreateAdventureActor(197, "SectMainStoryBaihuaAnonymMaleRelieved", argBox);
			EventHelper.CreateAdventureActor(195, "SectMainStoryBaihuaShadowAnonymFemale", argBox);
			EventHelper.CreateAdventureActor(200, "SectMainStoryAnonymFemale", argBox);
			EventHelper.CreateAdventureActor(198, "SectMainStoryBaihuaAnonymFemaleRelieved", argBox);
		}

		// Token: 0x0600227F RID: 8831 RVA: 0x001B31C0 File Offset: 0x001B13C0
		public static GameData.Domains.Character.Character BaihuaGetAnonymTaiwuCharacter(sbyte anonymTaiwuType)
		{
			EventArgBox sectArgBox = DomainManager.Extra.GetSectMainStoryEventArgBox(3);
			bool isMale = false;
			sectArgBox.Get("ConchShip_PresetKey_BaihuaAnonymTaiwuIsMale", ref isMale);
			bool flag = anonymTaiwuType == 1;
			GameData.Domains.Character.Character character;
			if (flag)
			{
				character = EventHelper.GetOrCreateFixedCharacterByTemplateId(isMale ? 791 : 792);
			}
			else
			{
				bool flag2 = anonymTaiwuType == 2;
				if (flag2)
				{
					character = EventHelper.GetOrCreateFixedCharacterByTemplateId(isMale ? 798 : 799);
				}
				else
				{
					character = EventHelper.GetOrCreateFixedCharacterByTemplateId(isMale ? 806 : 807);
				}
			}
			return character;
		}

		// Token: 0x06002280 RID: 8832 RVA: 0x001B324C File Offset: 0x001B144C
		public static void BaihuaRemoveAllFixCharacter(bool goodEnd)
		{
			GameData.Domains.Character.Character leukorpus0;
			bool flag = !goodEnd && EventHelper.TryGetFixedCharacterByTemplateId(781, out leukorpus0);
			if (flag)
			{
				EventHelper.RemoveNonIntelligentCharacter(leukorpus0);
			}
			for (short i = 782; i <= 785; i += 1)
			{
				GameData.Domains.Character.Character character;
				bool flag2 = EventHelper.TryGetFixedCharacterByTemplateId(i, out character);
				if (flag2)
				{
					EventHelper.RemoveNonIntelligentCharacter(character);
				}
			}
			GameData.Domains.Character.Character melanpsyche0;
			bool flag3 = !goodEnd && EventHelper.TryGetFixedCharacterByTemplateId(786, out melanpsyche0);
			if (flag3)
			{
				EventHelper.RemoveNonIntelligentCharacter(melanpsyche0);
			}
			for (short j = 787; j <= 790; j += 1)
			{
				GameData.Domains.Character.Character character2;
				bool flag4 = EventHelper.TryGetFixedCharacterByTemplateId(j, out character2);
				if (flag4)
				{
					EventHelper.RemoveNonIntelligentCharacter(character2);
				}
			}
			for (short k = 791; k <= 792; k += 1)
			{
				GameData.Domains.Character.Character character3;
				bool flag5 = EventHelper.TryGetFixedCharacterByTemplateId(k, out character3);
				if (flag5)
				{
					EventHelper.RemoveNonIntelligentCharacter(character3);
				}
			}
			for (short l = 798; l <= 800; l += 1)
			{
				GameData.Domains.Character.Character character4;
				bool flag6 = EventHelper.TryGetFixedCharacterByTemplateId(l, out character4);
				if (flag6)
				{
					EventHelper.RemoveNonIntelligentCharacter(character4);
				}
			}
			for (short m = 806; m <= 807; m += 1)
			{
				GameData.Domains.Character.Character character5;
				bool flag7 = EventHelper.TryGetFixedCharacterByTemplateId(m, out character5);
				if (flag7)
				{
					EventHelper.RemoveNonIntelligentCharacter(character5);
				}
			}
			bool flag8 = !goodEnd;
			if (flag8)
			{
				for (short n = 808; n <= 809; n += 1)
				{
					GameData.Domains.Character.Character character6;
					bool flag9 = EventHelper.TryGetFixedCharacterByTemplateId(n, out character6);
					if (flag9)
					{
						EventHelper.RemoveNonIntelligentCharacter(character6);
					}
				}
			}
		}

		// Token: 0x06002281 RID: 8833 RVA: 0x001B33FF File Offset: 0x001B15FF
		public static void CallBaihuaMember(bool isLeuko)
		{
			DomainManager.World.CallBaihuaMember(EventHelper.Domain.MainThreadDataContext, isLeuko);
		}

		// Token: 0x06002282 RID: 8834 RVA: 0x001B3418 File Offset: 0x001B1618
		public static void BaihuaClearCalledCharacters(bool isLeuko)
		{
			DomainManager.World.BaihuaClearCalledCharacters(EventHelper.Domain.MainThreadDataContext, isLeuko);
		}

		// Token: 0x06002283 RID: 8835 RVA: 0x001B3434 File Offset: 0x001B1634
		public static bool BaihuaLeukoKillsCanInteract(int id)
		{
			bool flag = !EventHelper.IsExtraTaskInProgress(308);
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				EventArgBox sectArgBox = EventHelper.GetSectMainStoryEventArgBox(3);
				bool baihuaLeukoKillsInteractOpen = false;
				sectArgBox.Get("ConchShip_PresetKey_BaihuaLeukoKillsInteractOpen", ref baihuaLeukoKillsInteractOpen);
				bool flag2 = !baihuaLeukoKillsInteractOpen;
				if (flag2)
				{
					result = false;
				}
				else
				{
					short settlementId = -1;
					sectArgBox.Get("ConchShip_PresetKey_BaihuaLeukoKillsMonthEventSettlementId", ref settlementId);
					GameData.Domains.Character.Character character;
					DomainManager.Character.TryGetElement_Objects(id, out character);
					bool flag3 = !EventHelper.IsLocationAtSettlementRange(character.GetLocation(), settlementId);
					if (flag3)
					{
						result = false;
					}
					else
					{
						OrganizationInfo charOrgInfo = character.GetOrganizationInfo();
						bool flag4 = charOrgInfo.OrgTemplateId == 3 || charOrgInfo.SettlementId == settlementId;
						result = flag4;
					}
				}
			}
			return result;
		}

		// Token: 0x06002284 RID: 8836 RVA: 0x001B34EC File Offset: 0x001B16EC
		public static bool BaihuaMelanoKillsCanInteract(int id)
		{
			bool flag = !EventHelper.IsExtraTaskInProgress(310);
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				EventArgBox sectArgBox = EventHelper.GetSectMainStoryEventArgBox(3);
				bool baihuaMelanoKillsInteractOpen = false;
				sectArgBox.Get("ConchShip_PresetKey_BaihuaMelanoKillsInteractOpen", ref baihuaMelanoKillsInteractOpen);
				bool flag2 = !baihuaMelanoKillsInteractOpen;
				if (flag2)
				{
					result = false;
				}
				else
				{
					short settlementId = -1;
					sectArgBox.Get("ConchShip_PresetKey_BaihuaMelanoKillsMonthEventSettlementId", ref settlementId);
					GameData.Domains.Character.Character character;
					DomainManager.Character.TryGetElement_Objects(id, out character);
					bool flag3 = !EventHelper.IsLocationAtSettlementRange(character.GetLocation(), settlementId);
					if (flag3)
					{
						result = false;
					}
					else
					{
						OrganizationInfo charOrgInfo = character.GetOrganizationInfo();
						bool flag4 = charOrgInfo.OrgTemplateId == 3 || charOrgInfo.SettlementId == settlementId;
						result = flag4;
					}
				}
			}
			return result;
		}

		// Token: 0x06002285 RID: 8837 RVA: 0x001B35A4 File Offset: 0x001B17A4
		public static sbyte BaihuaGetAndSetRandomFiveElementsType(bool isLeuko, EventArgBox argBox)
		{
			EventArgBox sectArgBox = EventHelper.GetSectMainStoryEventArgBox(3);
			IRandomSource random = EventHelper.Domain.MainThreadDataContext.Random;
			sbyte fiveElementsType;
			if (isLeuko)
			{
				sbyte baihuaLeukoKillsFiveElementsType = -1;
				bool flag = sectArgBox.Get("ConchShip_PresetKey_BaihuaLeukoKillsFiveElementsType", ref baihuaLeukoKillsFiveElementsType);
				if (flag)
				{
					EventHelper.BaihuaSetGroupElementType(isLeuko, argBox);
					return baihuaLeukoKillsFiveElementsType;
				}
				sbyte baihuaMelanoKillsFiveElementsType = -1;
				bool flag2 = sectArgBox.Get("ConchShip_PresetKey_BaihuaMelanoKillsFiveElementsType", ref baihuaMelanoKillsFiveElementsType);
				if (flag2)
				{
					fiveElementsType = baihuaMelanoKillsFiveElementsType + 2;
					bool flag3 = fiveElementsType > 4;
					if (flag3)
					{
						fiveElementsType -= 5;
					}
				}
				else
				{
					fiveElementsType = (sbyte)random.Next(0, 5);
				}
				EventHelper.SaveArgToSectMainStory<sbyte>(3, "ConchShip_PresetKey_BaihuaLeukoKillsFiveElementsType", fiveElementsType);
				EventHelper.SaveArgToSectMainStory<int>(3, "ConchShipEventArgBoxKey_PresetKey_BaihuaLeukoKillsOptionSelectDate", EventHelper.GetGameDate());
				EventHelper.TriggerExtraTask(50, 309);
				EventHelper.FinishExtraTask(50, 308);
			}
			else
			{
				sbyte baihuaMelanoKillsFiveElementsType2 = -1;
				bool flag4 = sectArgBox.Get("ConchShip_PresetKey_BaihuaMelanoKillsFiveElementsType", ref baihuaMelanoKillsFiveElementsType2);
				if (flag4)
				{
					EventHelper.BaihuaSetGroupElementType(isLeuko, argBox);
					return baihuaMelanoKillsFiveElementsType2;
				}
				sbyte baihuaLeukoKillsFiveElementsType2 = -1;
				bool flag5 = sectArgBox.Get("ConchShip_PresetKey_BaihuaLeukoKillsFiveElementsType", ref baihuaLeukoKillsFiveElementsType2);
				if (flag5)
				{
					fiveElementsType = baihuaMelanoKillsFiveElementsType2 + 2;
					bool flag6 = fiveElementsType > 4;
					if (flag6)
					{
						fiveElementsType -= 5;
					}
				}
				else
				{
					fiveElementsType = (sbyte)random.Next(0, 5);
				}
				EventHelper.SaveArgToSectMainStory<sbyte>(3, "ConchShip_PresetKey_BaihuaMelanoKillsFiveElementsType", fiveElementsType);
				EventHelper.SaveArgToSectMainStory<int>(3, "ConchShip_PresetKey_BaihuaMelanoKillsOptionSelectDate", EventHelper.GetGameDate());
				EventHelper.FinishExtraTask(50, 310);
				EventHelper.TriggerExtraTask(50, 311);
			}
			EventHelper.BaihuaSetGroupElementType(isLeuko, argBox);
			return fiveElementsType;
		}

		// Token: 0x06002286 RID: 8838 RVA: 0x001B3724 File Offset: 0x001B1924
		public static bool BaihuaLMBothCombatWon()
		{
			EventArgBox sectArgBox = EventHelper.GetSectMainStoryEventArgBox(3);
			bool baihuaMelanoKillsCombatWin = false;
			sectArgBox.Get("ConchShip_PresetKey_BaihuaMelanoKillsCombatWin", ref baihuaMelanoKillsCombatWin);
			bool baihuaLeukoKillsCombatWin = false;
			sectArgBox.Get("ConchShip_PresetKey_BaihuaLeukoKillsCombatWin", ref baihuaLeukoKillsCombatWin);
			bool bothWin = baihuaLeukoKillsCombatWin && baihuaMelanoKillsCombatWin;
			bool flag = bothWin;
			if (flag)
			{
				EventHelper.TriggerExtraTask(48, 312);
				EventHelper.FinishAllTaskInChain(50);
			}
			return bothWin;
		}

		// Token: 0x06002287 RID: 8839 RVA: 0x001B3784 File Offset: 0x001B1984
		public static void BaihuaCharacterFeatureUpdate()
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			bool flag = taiwu.GetFeatureIds().Contains(540);
			if (flag)
			{
				taiwu.RemoveFeature(context, 540);
			}
			taiwu.AddFeature(context, 544, false);
		}

		// Token: 0x06002288 RID: 8840 RVA: 0x001B37D8 File Offset: 0x001B19D8
		public static short BaihuaSelectVillageSettlementId()
		{
			short areaId = EventHelper.GetAreaIdByAreaTemplateId(18);
			short settlementId = EventHelper.GetAreaRandomSettlementId(areaId, false, false);
			EventHelper.SaveArgToSectMainStory<short>(3, "ConchShip_PresetKey_BaihuaVillageSettlementIdSelection", settlementId);
			return settlementId;
		}

		// Token: 0x06002289 RID: 8841 RVA: 0x001B380C File Offset: 0x001B1A0C
		public static bool BaihuaTaiwuHasYangMaterial()
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			Dictionary<ItemKey, int> items = taiwu.GetInventory().Items;
			foreach (KeyValuePair<ItemKey, int> pair in items)
			{
				short itemSubType = ItemTemplateHelper.GetItemSubType(pair.Key.ItemType, pair.Key.TemplateId);
				bool flag = itemSubType != 505;
				if (!flag)
				{
					MaterialItem config = Config.Material.Instance[pair.Key.TemplateId];
					bool flag2 = config.Property != EMaterialProperty.Yang;
					if (!flag2)
					{
						return true;
					}
				}
			}
			return false;
		}

		// Token: 0x0600228A RID: 8842 RVA: 0x001B38DC File Offset: 0x001B1ADC
		public static bool BaihuaTaiwuHasYinMaterial()
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			Dictionary<ItemKey, int> items = taiwu.GetInventory().Items;
			foreach (KeyValuePair<ItemKey, int> pair in items)
			{
				short itemSubType = ItemTemplateHelper.GetItemSubType(pair.Key.ItemType, pair.Key.TemplateId);
				bool flag = itemSubType != 505;
				if (!flag)
				{
					MaterialItem config = Config.Material.Instance[pair.Key.TemplateId];
					bool flag2 = config.Property > EMaterialProperty.Yin;
					if (!flag2)
					{
						return true;
					}
				}
			}
			return false;
		}

		// Token: 0x0600228B RID: 8843 RVA: 0x001B39A8 File Offset: 0x001B1BA8
		public static void BaihuaTryCreateAdventureFinale()
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			Location taiwuVillageLocation = DomainManager.Taiwu.GetTaiwuVillageLocation();
			List<MapBlockData> mapBlockDatas = new List<MapBlockData>();
			DomainManager.Map.GetLocationByDistance(taiwuVillageLocation, 4, 7, ref mapBlockDatas);
			CollectionUtils.Shuffle<MapBlockData>(context.Random, mapBlockDatas);
			AreaAdventureData adventuresInArea = DomainManager.Adventure.GetAdventuresInArea(taiwuVillageLocation.AreaId);
			foreach (MapBlockData mapBlockData in mapBlockDatas)
			{
				bool flag = DomainManager.Map.IsBlockSpecial(mapBlockData, true);
				if (!flag)
				{
					bool flag2 = adventuresInArea.AdventureSites.Keys.Contains(mapBlockData.BlockId);
					if (!flag2)
					{
						MapBlockItem config = mapBlockData.GetConfig();
						bool flag3 = config.SubType == EMapBlockSubType.DarkPool;
						if (!flag3)
						{
							EventHelper.TryCreateAdventureSite(mapBlockData.AreaId, mapBlockData.BlockId, 189, true);
							break;
						}
					}
				}
			}
		}

		// Token: 0x0600228C RID: 8844 RVA: 0x001B3AAC File Offset: 0x001B1CAC
		public static sbyte BaihuaAdventureFinalePathGetSectFight(int pathIndex)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			EventArgBox sectArgBox = EventHelper.GetSectMainStoryEventArgBox(3);
			sbyte selectOrgTemplateId = -1;
			bool flag = pathIndex == 1;
			if (flag)
			{
				SByteList sectMeetList;
				sectArgBox.Get<SByteList>("ConchShip_PresetKey_BaihuaAdventureFinialPathOneSectMeet", out sectMeetList);
				bool flag2 = sectMeetList.Items == null;
				if (flag2)
				{
					selectOrgTemplateId = (sbyte)context.Random.Next(6, 11);
					sectMeetList = SByteList.Create();
				}
				else
				{
					bool flag3 = sectMeetList.Items.Count < 5;
					if (flag3)
					{
						selectOrgTemplateId = (sbyte)((int)sectMeetList.Items[0] + sectMeetList.Items.Count);
						bool flag4 = selectOrgTemplateId > 10;
						if (flag4)
						{
							selectOrgTemplateId -= 5;
						}
					}
				}
				bool flag5 = sectMeetList.Items.Count < 5;
				if (flag5)
				{
					sectMeetList.Items.Add(selectOrgTemplateId);
					EventHelper.SaveArgToSectMainStory<SByteList>(3, "ConchShip_PresetKey_BaihuaAdventureFinialPathOneSectMeet", sectMeetList);
				}
			}
			else
			{
				bool flag6 = pathIndex == 2;
				if (flag6)
				{
					SByteList sectMeetList2;
					sectArgBox.Get<SByteList>("ConchShip_PresetKey_BaihuaAdventureFinialPathTwoSectMeet", out sectMeetList2);
					bool flag7 = sectMeetList2.Items == null;
					if (flag7)
					{
						selectOrgTemplateId = (sbyte)context.Random.Next(11, 16);
						sectMeetList2 = SByteList.Create();
					}
					else
					{
						bool flag8 = sectMeetList2.Items.Count < 5;
						if (flag8)
						{
							selectOrgTemplateId = (sbyte)((int)sectMeetList2.Items[0] + sectMeetList2.Items.Count);
							bool flag9 = selectOrgTemplateId > 15;
							if (flag9)
							{
								selectOrgTemplateId -= 5;
							}
						}
					}
					bool flag10 = sectMeetList2.Items.Count < 5;
					if (flag10)
					{
						sectMeetList2.Items.Add(selectOrgTemplateId);
						EventHelper.SaveArgToSectMainStory<SByteList>(3, "ConchShip_PresetKey_BaihuaAdventureFinialPathTwoSectMeet", sectMeetList2);
					}
				}
				else
				{
					bool flag11 = pathIndex == 3;
					if (flag11)
					{
						SByteList sectMeetList3;
						sectArgBox.Get<SByteList>("ConchShip_PresetKey_BaihuaAdventureFinialPathThreeSectMeet", out sectMeetList3);
						bool flag12 = sectMeetList3.Items == null;
						if (flag12)
						{
							selectOrgTemplateId = (sbyte)context.Random.Next(1, 6);
							sectMeetList3 = SByteList.Create();
						}
						else
						{
							bool flag13 = sectMeetList3.Items.Count < 5;
							if (flag13)
							{
								selectOrgTemplateId = (sbyte)((int)sectMeetList3.Items[0] + sectMeetList3.Items.Count);
								bool flag14 = selectOrgTemplateId > 5;
								if (flag14)
								{
									selectOrgTemplateId -= 5;
								}
							}
						}
						bool flag15 = sectMeetList3.Items.Count < 5;
						if (flag15)
						{
							sectMeetList3.Items.Add(selectOrgTemplateId);
							EventHelper.SaveArgToSectMainStory<SByteList>(3, "ConchShip_PresetKey_BaihuaAdventureFinialPathThreeSectMeet", sectMeetList3);
						}
					}
				}
			}
			return selectOrgTemplateId;
		}

		// Token: 0x0600228D RID: 8845 RVA: 0x001B3D18 File Offset: 0x001B1F18
		public static short BaihuaAdventureFinalePathGetSectFightTemplateId(short orgTemplateId)
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			int indexLimit = 4;
			OrganizationItem orgConfig = Organization.Instance[(int)orgTemplateId];
			for (int i = orgConfig.RandomEnemyTemplateIds.Length - 1; i >= indexLimit; i--)
			{
				CharacterItem config = Config.Character.Instance[orgConfig.RandomEnemyTemplateIds[i]];
				bool flag = config.ConsummateLevel < taiwu.GetConsummateLevel();
				if (flag)
				{
					return orgConfig.RandomEnemyTemplateIds[i];
				}
			}
			return orgConfig.RandomEnemyTemplateIds[indexLimit];
		}

		// Token: 0x0600228E RID: 8846 RVA: 0x001B3DA4 File Offset: 0x001B1FA4
		public static void BaihuaAdventureFinaleSaveWonSect(sbyte orgTemplateId)
		{
			EventArgBox sectArgBox = EventHelper.GetSectMainStoryEventArgBox(3);
			SByteList sectWin;
			sectArgBox.Get<SByteList>("ConchShip_PresetKey_BaihuaAdventureFinialWinSect", out sectWin);
			bool flag = sectWin.Items == null;
			if (flag)
			{
				sectWin = SByteList.Create();
			}
			sectWin.Items.Add(orgTemplateId);
			EventHelper.SaveArgToSectMainStory<SByteList>(3, "ConchShip_PresetKey_BaihuaAdventureFinialWinSect", sectWin);
		}

		// Token: 0x0600228F RID: 8847 RVA: 0x001B3DF4 File Offset: 0x001B1FF4
		public static void BaihuaTaiwuRandomInjury()
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			EventHelper.RandomChangeInjury(taiwu, 1, EventHelper.Domain.MainThreadDataContext.Random.Next(0, 2) == 0);
		}

		// Token: 0x06002290 RID: 8848 RVA: 0x001B3E30 File Offset: 0x001B2030
		public static void BaihuaCureTaiwu()
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			bool flag = taiwu.GetFeatureIds().Contains(544);
			if (flag)
			{
				taiwu.RemoveFeature(context, 544);
			}
			taiwu.SetCurrNeili(taiwu.GetMaxNeili(), context);
			EventHelper.HealCharacterAllInjury(taiwu);
			EventHelper.HealCharacterAllPoison(taiwu);
			EventHelper.RecoverCharacterDisorderOfQi(taiwu);
			taiwu.SetHealth(taiwu.GetLeftMaxHealth(false), context);
		}

		// Token: 0x06002291 RID: 8849 RVA: 0x001B3EAC File Offset: 0x001B20AC
		public static void BaihuaFinal()
		{
			EventArgBox sectArgBox = EventHelper.GetSectMainStoryEventArgBox(3);
			bool good = sectArgBox.Contains<bool>("ConchShip_PresetKey_BaihuaLeukoAssistedMelano") && sectArgBox.Contains<bool>("ConchShip_PresetKey_BaihuaMelanoAssistedLeuko");
			EventHelper.SaveArgToSectMainStory<int>(3, good ? "ConchShip_PresetKey_SectMainStoryBaihuaProsperousEndDate" : "ConchShip_PresetKey_SectMainStoryBaihuaFailingEndDate", EventHelper.GetGameDate());
			EventHelper.FinishExtraTask(48, 328);
			EventHelper.FinishAllTaskInChain(51);
			EventHelper.FinishAllTaskInChain(50);
			Settlement settlement = EventHelper.GetSettlementByOrgTemplateId(3);
			Location location = settlement.GetLocation();
			GameData.Domains.Character.Character leukorpus = EventHelper.GetOrCreateFixedCharacterByTemplateId(781);
			GameData.Domains.Character.Character melanpsyche = EventHelper.GetOrCreateFixedCharacterByTemplateId(786);
			EventHelper.MoveFixedCharacter(leukorpus, good ? location : Location.Invalid);
			EventHelper.MoveFixedCharacter(melanpsyche, good ? location : Location.Invalid);
			bool flag = good;
			if (flag)
			{
				DataContext context = EventHelper.Domain.MainThreadDataContext;
				GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
				GameData.Domains.Character.Character leukoDeer = EventHelper.GetOrCreateFixedCharacterByTemplateId(808);
				GameData.Domains.Character.Character melanoOwl = EventHelper.GetOrCreateFixedCharacterByTemplateId(809);
				leukorpus.SetHappiness(75, context);
				melanpsyche.SetHappiness(75, context);
				leukoDeer.SetHappiness(75, context);
				melanoOwl.SetHappiness(75, context);
				EventHelper.DirectlySetFavorabilities(leukorpus.GetId(), taiwu.GetId(), 30000, 30000);
				EventHelper.DirectlySetFavorabilities(melanpsyche.GetId(), taiwu.GetId(), 30000, 30000);
				EventHelper.DirectlySetFavorabilities(leukoDeer.GetId(), taiwu.GetId(), 30000, 30000);
				EventHelper.DirectlySetFavorabilities(melanoOwl.GetId(), taiwu.GetId(), 30000, 30000);
			}
		}

		// Token: 0x06002292 RID: 8850 RVA: 0x001B4048 File Offset: 0x001B2248
		public static void BaihuaSetLeukoKillsString(EventArgBox argBox, bool isLeuko)
		{
			EventArgBox sectArgBox = EventHelper.GetSectMainStoryEventArgBox(3);
			short settlementId = -1;
			sectArgBox.Get(isLeuko ? "ConchShip_PresetKey_BaihuaLeukoKillsMonthEventSettlementId" : "ConchShip_PresetKey_BaihuaMelanoKillsMonthEventSettlementId", ref settlementId);
			Settlement settlement = DomainManager.Organization.GetSettlement(settlementId);
			argBox.Set("SettlementId", settlementId);
			argBox.Set("AreaId", settlement.GetLocation().AreaId);
		}

		// Token: 0x06002293 RID: 8851 RVA: 0x001B40A8 File Offset: 0x001B22A8
		public static void BaihuaSetGroupMeetName(bool isLeuko, EventArgBox argBox)
		{
			int groupId;
			DomainManager.World.BaihuaGroupMeetCount(isLeuko, out groupId);
			argBox.Set("GroupId", groupId);
		}

		// Token: 0x06002294 RID: 8852 RVA: 0x001B40D4 File Offset: 0x001B22D4
		public static void BaihuaSetGroupElementType(bool isLeuko, EventArgBox argBox)
		{
			EventArgBox sectArgBox = EventHelper.GetSectMainStoryEventArgBox(3);
			sbyte fiveElementType = -1;
			sectArgBox.Get(isLeuko ? "ConchShip_PresetKey_BaihuaLeukoKillsFiveElementsType" : "ConchShip_PresetKey_BaihuaMelanoKillsFiveElementsType", ref fiveElementType);
			argBox.Set("FiveElementType", fiveElementType);
		}

		// Token: 0x06002295 RID: 8853 RVA: 0x001B4110 File Offset: 0x001B2310
		public static bool BaihuaCanInteractLM()
		{
			EventArgBox sectArgBox = EventHelper.GetSectMainStoryEventArgBox(3);
			sbyte status = DomainManager.World.GetSectMainStoryTaskStatus(3);
			return sectArgBox.Contains<int>("ConchShip_PresetKey_SectMainStoryBaihuaProsperousEndDate") || status == 1;
		}

		// Token: 0x06002296 RID: 8854 RVA: 0x001B4154 File Offset: 0x001B2354
		public static int BaihuaGetLMInteractDialog(bool isLeuko)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			EventArgBox sectArgBox = EventHelper.GetSectMainStoryEventArgBox(3);
			IntList dialogNotTriggered;
			sectArgBox.Get<IntList>(isLeuko ? "ConchShip_PresetKey_BaihuaLeukoDialogNotTriggered" : "ConchShip_PresetKey_BaihuaMelanoDialogNotTriggered", out dialogNotTriggered);
			bool flag = dialogNotTriggered.Items == null;
			if (flag)
			{
				dialogNotTriggered = IntList.Create();
				for (int i = 0; i < 5; i++)
				{
					dialogNotTriggered.Items.Add(i);
				}
			}
			bool flag2 = dialogNotTriggered.Items.Count == 0;
			int dialogIndex;
			if (flag2)
			{
				dialogIndex = context.Random.Next(0, 5);
			}
			else
			{
				dialogIndex = dialogNotTriggered.Items.GetRandom(context.Random);
				dialogNotTriggered.Items.Remove(dialogIndex);
			}
			EventHelper.SaveArgToSectMainStory<IntList>(3, isLeuko ? "ConchShip_PresetKey_BaihuaLeukoDialogNotTriggered" : "ConchShip_PresetKey_BaihuaMelanoDialogNotTriggered", dialogNotTriggered);
			return dialogIndex;
		}

		// Token: 0x06002297 RID: 8855 RVA: 0x001B4230 File Offset: 0x001B2430
		public static void BaihuaOpenSpecialInteract(string afterEvent, EventArgBox argBox)
		{
			EventHelper.Domain.SetListenerWithActionName(afterEvent, argBox, "FinishBaihuaSectMainStorySpecial");
			GameDataBridge.AddDisplayEvent(DisplayEventType.BaihuaSectMainStorySpecial);
		}

		// Token: 0x06002298 RID: 8856 RVA: 0x001B4250 File Offset: 0x001B2450
		public static List<ValueTuple<ItemKey, int>> BaihuaLMGetMedicine(bool isLeuko)
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			EMaterialProperty giveProperty = isLeuko ? EMaterialProperty.Yin : EMaterialProperty.Yang;
			List<short> canSelectTemplateIds = ObjectPool<List<short>>.Instance.Get();
			List<ValueTuple<ItemKey, int>> results = new List<ValueTuple<ItemKey, int>>();
			Config.Material.Instance.Iterate(delegate(MaterialItem medicineItem)
			{
				bool flag;
				if (medicineItem.ItemSubType == 505 && medicineItem.Property == giveProperty)
				{
					sbyte grade = medicineItem.Grade;
					flag = (grade >= 5 && grade <= 6);
				}
				else
				{
					flag = false;
				}
				bool flag2 = flag;
				if (flag2)
				{
					canSelectTemplateIds.Add(medicineItem.TemplateId);
				}
				return true;
			});
			CollectionUtils.Shuffle<short>(context.Random, canSelectTemplateIds);
			for (int i = 0; i < 3; i++)
			{
				MaterialItem config = Config.Material.Instance[canSelectTemplateIds[i]];
				ItemKey itemkey = EventHelper.AddItemToRole(taiwu, 5, config.TemplateId, 1, -1);
				results.Add(new ValueTuple<ItemKey, int>(itemkey, 1));
			}
			ObjectPool<List<short>>.Instance.Return(canSelectTemplateIds);
			return results;
		}

		// Token: 0x06002299 RID: 8857 RVA: 0x001B4330 File Offset: 0x001B2530
		public static bool BaihuaLMNewsTalkedContains(int charId)
		{
			EventArgBox sectArgBox = EventHelper.GetSectMainStoryEventArgBox(3);
			IntList talkIds;
			sectArgBox.Get<IntList>("ConchShip_PresetKey_BaihuaLMNewsTalkedCharIds", out talkIds);
			bool flag = talkIds.Items == null;
			return !flag && talkIds.Items.Contains(charId);
		}

		// Token: 0x0600229A RID: 8858 RVA: 0x001B4374 File Offset: 0x001B2574
		public static void BaihuaAddLMNewsTalked(int charId)
		{
			EventArgBox sectArgBox = EventHelper.GetSectMainStoryEventArgBox(3);
			IntList talkIds;
			sectArgBox.Get<IntList>("ConchShip_PresetKey_BaihuaLMNewsTalkedCharIds", out talkIds);
			bool flag = talkIds.Items == null;
			if (flag)
			{
				talkIds = IntList.Create();
			}
			talkIds.Items.Add(charId);
			EventHelper.SaveArgToSectMainStory<IntList>(3, "ConchShip_PresetKey_BaihuaLMNewsTalkedCharIds", talkIds);
		}

		// Token: 0x0600229B RID: 8859 RVA: 0x001B43C4 File Offset: 0x001B25C4
		public static void SaveSectMainStoryEndState(sbyte orgTemplateId, sbyte endState)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			DomainManager.World.SetSectMainStoryTaskStatus(context, orgTemplateId, endState);
		}

		// Token: 0x0600229C RID: 8860 RVA: 0x001B43EC File Offset: 0x001B25EC
		public static sbyte GetSectMainStoryTaskStatus(sbyte orgTemplateId)
		{
			return DomainManager.World.GetSectMainStoryTaskStatus(orgTemplateId);
		}

		// Token: 0x0600229D RID: 8861 RVA: 0x001B440C File Offset: 0x001B260C
		public static void AddSectMainStoryInformation(short orgTemplateId, bool goodEnd, int informationIndex)
		{
			OrganizationItem organizationItem = Organization.Instance[(int)orgTemplateId];
			List<short> informationList = goodEnd ? organizationItem.StoryGoodEndingsInformation : organizationItem.StoryBadEndingsInformation;
			short informationKey = informationList[informationIndex];
			NormalInformation normalInformation = new NormalInformation(informationKey, 8);
			EventHelper.DistributeNormalInformationToCharacter(normalInformation, DomainManager.Taiwu.GetTaiwuCharId());
		}

		// Token: 0x0600229E RID: 8862 RVA: 0x001B445C File Offset: 0x001B265C
		public static void SectMainStoryEnd(sbyte orgTemplateId, bool goodEnd, int informationIndex = 0, string afterEvent = "", EventArgBox argBox = null, bool addInformation = true)
		{
			if (goodEnd)
			{
				EventHelper.SectChangeFavorability(orgTemplateId, 12000);
			}
			else
			{
				EventHelper.SectChangeFavorability(orgTemplateId, -12000);
			}
			if (addInformation)
			{
				EventHelper.AddSectMainStoryInformation((short)orgTemplateId, goodEnd, informationIndex);
			}
			EventHelper.SaveSectMainStoryEndState(orgTemplateId, goodEnd ? 1 : 2);
			EventHelper.ShowSectMainStoryEndScroll((short)orgTemplateId, goodEnd, afterEvent, argBox);
		}

		// Token: 0x0600229F RID: 8863 RVA: 0x001B44B4 File Offset: 0x001B26B4
		public static void CreateSectBuildingForce(sbyte orgTemplateId, short buildingTemplateId)
		{
			Location sectLocation = DomainManager.Organization.GetSettlementByOrgTemplateId(orgTemplateId).GetLocation();
			DomainManager.Building.PlaceBuildingAtBlock(EventHelper.Domain.MainThreadDataContext, sectLocation.AreaId, sectLocation.BlockId, buildingTemplateId, true, false);
		}

		// Token: 0x060022A0 RID: 8864 RVA: 0x001B44F8 File Offset: 0x001B26F8
		public static bool IsSectMainStoryUnlocked(sbyte orgTemplateId)
		{
			return orgTemplateId != 4 && false;
		}

		// Token: 0x060022A1 RID: 8865 RVA: 0x001B451C File Offset: 0x001B271C
		public static void ShowSectMainStoryUnlock(sbyte orgTemplateId, string afterEvent, EventArgBox argBox)
		{
			bool flag = !string.IsNullOrEmpty(afterEvent);
			if (flag)
			{
				EventHelper.AddEventInListenWithActionName(afterEvent, argBox, "ShowSectMainStoryUnlock");
			}
			GameDataBridge.AddDisplayEvent<sbyte>(DisplayEventType.ShowSectMainStoryUnlock, orgTemplateId);
			bool flag2 = !string.IsNullOrEmpty(afterEvent) && argBox != null;
			if (flag2)
			{
				EventHelper.Domain.CheckTaiwuStatusImmediately();
			}
		}

		// Token: 0x060022A2 RID: 8866 RVA: 0x001B456C File Offset: 0x001B276C
		public static bool TriggerEmeiStoryAdventureTwo()
		{
			MonthlyActionKey key = MonthlyEventActionsManager.PredefinedKeys["EmeiStoryDefault"];
			ConfigWrapperAction wrapperAction = (ConfigWrapperAction)EventHelper.Domain.GetMonthlyAction(key);
			bool flag = wrapperAction.CurrConfigMonthlyAction != null;
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				wrapperAction.CreateWrappedAction(81, -1);
				result = (wrapperAction.CurrConfigMonthlyAction != null);
			}
			return result;
		}

		// Token: 0x060022A3 RID: 8867 RVA: 0x001B45C4 File Offset: 0x001B27C4
		public static bool IsEmeiStoryAdventureTwoTriggered()
		{
			MonthlyActionKey key = MonthlyEventActionsManager.PredefinedKeys["EmeiStoryDefault"];
			ConfigWrapperAction wrapperAction = (ConfigWrapperAction)EventHelper.Domain.GetMonthlyAction(key);
			return wrapperAction.CurrConfigMonthlyAction != null;
		}

		// Token: 0x060022A4 RID: 8868 RVA: 0x001B4600 File Offset: 0x001B2800
		public static void SaveWhiteApeBlockId()
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			Location apeLocation = Location.Invalid;
			short blockId = 0;
			bool flag = EventHelper.GetSectMainStoryEventArgBox(2).Get("ConchShip_PresetKey_WhiteApeBlockIdTmpSave", ref blockId);
			if (flag)
			{
				apeLocation.AreaId = DomainManager.Organization.GetSettlementByOrgTemplateId(2).GetLocation().AreaId;
				apeLocation.BlockId = blockId;
				EventHelper.RemoveArgFromSectMainStory<short>(2, "ConchShip_PresetKey_WhiteApeBlockIdTmpSave");
			}
			else
			{
				apeLocation = EventHelper.GetEmeiSpecifyLocation();
			}
			EventHelper.SaveArgToSectMainStory<short>(2, "ConchShip_PresetKey_WhiteApeBlockId", apeLocation.BlockId);
			DomainManager.Extra.GenerateEmeiBlood(context, apeLocation);
			MapBlockData mapBlockData = DomainManager.Map.GetBlockData(apeLocation.AreaId, apeLocation.BlockId);
			bool flag2 = !mapBlockData.Visible;
			if (flag2)
			{
				mapBlockData.SetVisible(true, context);
			}
			GameData.Domains.Character.Character gibbon = EventHelper.GetOrCreateFixedCharacterByTemplateId(679);
			GameData.Domains.Character.Character shiHoujiu = EventHelper.GetOrCreateFixedCharacterByTemplateId(637);
			int taiwuId = DomainManager.Taiwu.GetTaiwuCharId();
			EventHelper.DirectlySetFavorabilities(gibbon.GetId(), taiwuId, 0, 0);
			EventHelper.DirectlySetFavorabilities(shiHoujiu.GetId(), taiwuId, 0, 0);
		}

		// Token: 0x060022A5 RID: 8869 RVA: 0x001B4708 File Offset: 0x001B2908
		public static void ClearWhiteApeBlockId()
		{
			short blockId = 0;
			bool flag = EventHelper.GetSectMainStoryEventArgBox(2).Get("ConchShip_PresetKey_WhiteApeBlockId", ref blockId);
			if (flag)
			{
				EventHelper.SaveArgToSectMainStory<short>(2, "ConchShip_PresetKey_WhiteApeBlockIdTmpSave", blockId);
			}
			EventHelper.RemoveArgFromSectMainStory<short>(2, "ConchShip_PresetKey_WhiteApeBlockId");
			DomainManager.Extra.ClearEmeiBlood(EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x060022A6 RID: 8870 RVA: 0x001B475C File Offset: 0x001B295C
		public static Location GetEmeiSpecifyLocation()
		{
			List<MapBlockData> nonDevelopedMapBlockDatas = ObjectPool<List<MapBlockData>>.Instance.Get();
			EventHelper.GetValidEmeiSpecifyLocations(nonDevelopedMapBlockDatas);
			bool flag = nonDevelopedMapBlockDatas.Count == 0;
			Location result;
			if (flag)
			{
				result = Location.Invalid;
			}
			else
			{
				Location location = nonDevelopedMapBlockDatas[EventHelper.Domain.MainThreadDataContext.Random.Next(0, nonDevelopedMapBlockDatas.Count)].GetLocation();
				ObjectPool<List<MapBlockData>>.Instance.Return(nonDevelopedMapBlockDatas);
				result = location;
			}
			return result;
		}

		// Token: 0x060022A7 RID: 8871 RVA: 0x001B47CC File Offset: 0x001B29CC
		public static void GetValidEmeiSpecifyLocations(List<MapBlockData> nonDevelopedMapBlockDatas)
		{
			Settlement emeiSettlement = DomainManager.Organization.GetSettlementByOrgTemplateId(2);
			Location centerLocation = emeiSettlement.GetLocation();
			List<MapBlockData> mapBlockDatas = ObjectPool<List<MapBlockData>>.Instance.Get();
			MapBlockItem config = MapBlock.Instance[20];
			EventHelper.GetLocationByDistance(centerLocation, (int)(config.Range + 3), (int)(config.Range + 3), ref mapBlockDatas);
			foreach (MapBlockData mapBlockData in mapBlockDatas)
			{
				bool flag = mapBlockData.GetConfig().SubType == EMapBlockSubType.DLCLoong;
				if (!flag)
				{
					bool flag2 = mapBlockData.IsNonDeveloped();
					if (flag2)
					{
						nonDevelopedMapBlockDatas.Add(mapBlockData);
					}
				}
			}
			ObjectPool<List<MapBlockData>>.Instance.Return(mapBlockDatas);
		}

		// Token: 0x060022A8 RID: 8872 RVA: 0x001B4898 File Offset: 0x001B2A98
		public static bool CheckHomicideCase0()
		{
			short apeBlockId = -1;
			EventArgBox sectArgBox = EventHelper.GetSectMainStoryEventArgBox(2);
			bool whiteApeBlockIdExist = sectArgBox.Get("ConchShip_PresetKey_WhiteApeBlockId", ref apeBlockId);
			bool flag = !whiteApeBlockIdExist;
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				bool flag2 = sectArgBox.Contains<bool>("ConchShip_PresetKey_HomocideCase0Triggered");
				if (flag2)
				{
					result = false;
				}
				else
				{
					GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
					Location taiwuLocation = taiwu.GetLocation();
					MapBlockData taiwuBlockData = EventHelper.GetMapBlockData(taiwuLocation.AreaId, taiwuLocation.BlockId);
					Location emeiLocation = EventHelper.GetSettlementByOrgTemplateId(2).GetLocation();
					bool flag3 = emeiLocation.AreaId != taiwuLocation.AreaId;
					if (flag3)
					{
						result = false;
					}
					else
					{
						ByteCoordinate apeBlockPos = EventHelper.GetMapBlockData(emeiLocation.AreaId, apeBlockId).GetBlockPos();
						result = (taiwuBlockData.GetManhattanDistanceToPos(apeBlockPos.X, apeBlockPos.Y) <= 3);
					}
				}
			}
			return result;
		}

		// Token: 0x060022A9 RID: 8873 RVA: 0x001B4970 File Offset: 0x001B2B70
		public static bool CheckHomicideCase1()
		{
			bool result = EventHelper.IsExtraTaskInProgress(200);
			bool flag = !result;
			bool result3;
			if (flag)
			{
				result3 = false;
			}
			else
			{
				EventArgBox sectArgBox = EventHelper.GetSectMainStoryEventArgBox(2);
				bool flag2 = sectArgBox.Contains<bool>("ConchShip_PresetKey_HomocideCase1Triggered");
				if (flag2)
				{
					result3 = false;
				}
				else
				{
					int homocideCase0Time = 1;
					bool result2 = sectArgBox.Get("ConchShip_PresetKey_HomocideCase0Time", ref homocideCase0Time);
					bool flag3 = !result2;
					if (flag3)
					{
						result3 = false;
					}
					else
					{
						short apeBlockId = -1;
						int currDate = EventHelper.GetGameDate();
						bool flag4 = currDate < homocideCase0Time + 1;
						if (flag4)
						{
							result3 = false;
						}
						else
						{
							sectArgBox.Get("ConchShip_PresetKey_WhiteApeBlockId", ref apeBlockId);
							GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
							Location taiwuLocation = taiwu.GetLocation();
							MapBlockData taiwuBlockData = EventHelper.GetMapBlockData(taiwuLocation.AreaId, taiwuLocation.BlockId);
							Location emeiLocation = EventHelper.GetSettlementByOrgTemplateId(2).GetLocation();
							bool flag5 = emeiLocation.AreaId != taiwuLocation.AreaId;
							if (flag5)
							{
								result3 = false;
							}
							else
							{
								ByteCoordinate apeBlockPos = EventHelper.GetMapBlockData(emeiLocation.AreaId, apeBlockId).GetBlockPos();
								result3 = (taiwuBlockData.GetManhattanDistanceToPos(apeBlockPos.X, apeBlockPos.Y) <= 2);
							}
						}
					}
				}
			}
			return result3;
		}

		// Token: 0x060022AA RID: 8874 RVA: 0x001B4A98 File Offset: 0x001B2C98
		public static bool CheckHomicideCase2()
		{
			bool result = EventHelper.IsExtraTaskInProgress(200);
			bool flag = !result;
			bool result3;
			if (flag)
			{
				result3 = false;
			}
			else
			{
				EventArgBox sectArgBox = EventHelper.GetSectMainStoryEventArgBox(2);
				bool flag2 = sectArgBox.Contains<bool>("ConchShip_PresetKey_HomocideCase2Triggered");
				if (flag2)
				{
					result3 = false;
				}
				else
				{
					int homocideCase1Time = 1;
					bool result2 = sectArgBox.Get("ConchShip_PresetKey_HomocideCase1Time", ref homocideCase1Time);
					bool flag3 = !result2;
					if (flag3)
					{
						result3 = false;
					}
					else
					{
						short apeBlockId = -1;
						int currDate = EventHelper.GetGameDate();
						bool flag4 = currDate < homocideCase1Time + 1;
						if (flag4)
						{
							result3 = false;
						}
						else
						{
							sectArgBox.Get("ConchShip_PresetKey_WhiteApeBlockId", ref apeBlockId);
							GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
							Location taiwuLocation = taiwu.GetLocation();
							MapBlockData taiwuBlockData = EventHelper.GetMapBlockData(taiwuLocation.AreaId, taiwuLocation.BlockId);
							Location emeiLocation = EventHelper.GetSettlementByOrgTemplateId(2).GetLocation();
							bool flag5 = emeiLocation.AreaId != taiwuLocation.AreaId;
							if (flag5)
							{
								result3 = false;
							}
							else
							{
								ByteCoordinate apeBlockPos = EventHelper.GetMapBlockData(emeiLocation.AreaId, apeBlockId).GetBlockPos();
								result3 = (taiwuBlockData.GetManhattanDistanceToPos(apeBlockPos.X, apeBlockPos.Y) <= 1);
							}
						}
					}
				}
			}
			return result3;
		}

		// Token: 0x060022AB RID: 8875 RVA: 0x001B4BC0 File Offset: 0x001B2DC0
		public static void CreateEmeiRole(EventArgBox argBox)
		{
			EventActorData jiaEventActorData = EventHelper.CreateAdventureActor(152, "CharIdJia", argBox);
			EventActorData yiEventActorData = EventHelper.CreateAdventureActor(153, "CharIdYi", argBox);
			EventActorData bingEventActorData = EventHelper.CreateAdventureActor(154, "CharIdBing", argBox);
			EventActorData dingEventActorData = EventHelper.CreateAdventureActor(155, "CharIdDing", argBox);
			EventActorData wuEventActorData = EventHelper.CreateAdventureActor(156, "CharIdWu", argBox);
			EventActorData siEventActorData = EventHelper.CreateAdventureActor(157, "CharIdSi", argBox);
			EventActorData gengEventActorData = EventHelper.CreateAdventureActor(158, "CharIdGeng", argBox);
			EventActorData xinEventActorData = EventHelper.CreateAdventureActor(159, "CharIdXin", argBox);
			EventHelper.SaveArgToSectMainStory<EventActorData>(2, "ConchShip_PresetKey_EmeiRoleJia", jiaEventActorData);
			EventHelper.SaveArgToSectMainStory<EventActorData>(2, "ConchShip_PresetKey_EmeiRoleYi", yiEventActorData);
			EventHelper.SaveArgToSectMainStory<EventActorData>(2, "ConchShip_PresetKey_EmeiRoleBing", bingEventActorData);
			EventHelper.SaveArgToSectMainStory<EventActorData>(2, "ConchShip_PresetKey_EmeiRoleDing", dingEventActorData);
			EventHelper.SaveArgToSectMainStory<EventActorData>(2, "ConchShip_PresetKey_EmeiRoleWu", wuEventActorData);
			EventHelper.SaveArgToSectMainStory<EventActorData>(2, "ConchShip_PresetKey_EmeiRoleSi", siEventActorData);
			EventHelper.SaveArgToSectMainStory<EventActorData>(2, "ConchShip_PresetKey_EmeiRoleGeng", gengEventActorData);
			EventHelper.SaveArgToSectMainStory<EventActorData>(2, "ConchShip_PresetKey_EmeiRoleXin", xinEventActorData);
		}

		// Token: 0x060022AC RID: 8876 RVA: 0x001B4CC8 File Offset: 0x001B2EC8
		public static void SetEmeiRole(EventArgBox argBox)
		{
			EventArgBox sectArgBox = EventHelper.GetSectMainStoryEventArgBox(2);
			EventActorData jiaEventActorData = sectArgBox.Get<EventActorData>("ConchShip_PresetKey_EmeiRoleJia");
			EventActorData yiEventActorData = sectArgBox.Get<EventActorData>("ConchShip_PresetKey_EmeiRoleYi");
			EventActorData bingEventActorData = sectArgBox.Get<EventActorData>("ConchShip_PresetKey_EmeiRoleBing");
			EventActorData dingEventActorData = sectArgBox.Get<EventActorData>("ConchShip_PresetKey_EmeiRoleDing");
			EventActorData wuEventActorData = sectArgBox.Get<EventActorData>("ConchShip_PresetKey_EmeiRoleWu");
			EventActorData siEventActorData = sectArgBox.Get<EventActorData>("ConchShip_PresetKey_EmeiRoleSi");
			EventActorData gengEventActorData = sectArgBox.Get<EventActorData>("ConchShip_PresetKey_EmeiRoleGeng");
			EventActorData xinEventActorData = sectArgBox.Get<EventActorData>("ConchShip_PresetKey_EmeiRoleXin");
			argBox.Set("CharIdJia", jiaEventActorData);
			argBox.Set("CharIdYi", yiEventActorData);
			argBox.Set("CharIdBing", bingEventActorData);
			argBox.Set("CharIdDing", dingEventActorData);
			argBox.Set("CharIdWu", wuEventActorData);
			argBox.Set("CharIdSi", siEventActorData);
			argBox.Set("CharIdGeng", gengEventActorData);
			argBox.Set("CharIdXin", xinEventActorData);
		}

		// Token: 0x060022AD RID: 8877 RVA: 0x001B4DB0 File Offset: 0x001B2FB0
		public static void MoveTaiwuToWhiteApe()
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			Location taiwuLocation = taiwu.GetLocation();
			short apeBlockId = -1;
			EventArgBox sectArgBox = EventHelper.GetSectMainStoryEventArgBox(2);
			bool whiteApeBlockIdExist = sectArgBox.Get("ConchShip_PresetKey_WhiteApeBlockId", ref apeBlockId);
			bool flag = whiteApeBlockIdExist && taiwuLocation.BlockId != apeBlockId;
			if (flag)
			{
				EventHelper.TeleportMoveTaiwuToBlock(apeBlockId);
			}
		}

		// Token: 0x060022AE RID: 8878 RVA: 0x001B4E08 File Offset: 0x001B3008
		public static void EnterEmeiAdventure()
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			Location taiwuLocation = taiwu.GetLocation();
			EventHelper.CreateAndEnterAdventure(taiwuLocation, 177);
		}

		// Token: 0x060022AF RID: 8879 RVA: 0x001B4E34 File Offset: 0x001B3034
		public static void ClearEmeiBlood()
		{
			DomainManager.Extra.ClearEmeiBlood(EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x060022B0 RID: 8880 RVA: 0x001B4E4C File Offset: 0x001B304C
		public static void SetTaiwuSoftInjury()
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			EventHelper.ChangeRoleBodyPartInjuryByLevel(taiwu, false, 1, 5);
			EventHelper.SaveArgToSectMainStory<int>(2, "ConchShip_PresetKey_TaiwuJumpCliffInjuryType", 2);
		}

		// Token: 0x060022B1 RID: 8881 RVA: 0x001B4E7C File Offset: 0x001B307C
		public static void SetTaiwuSeriousInjury()
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			EventHelper.ChangeRoleBodyPartInjuryByLevel(taiwu, false, 3, 5);
			EventHelper.SaveArgToSectMainStory<int>(2, "ConchShip_PresetKey_TaiwuJumpCliffInjuryType", 3);
		}

		// Token: 0x060022B2 RID: 8882 RVA: 0x001B4EAC File Offset: 0x001B30AC
		public static void EmeiAddSelectGoodEndCount()
		{
			EventArgBox sectArgBox = EventHelper.GetSectMainStoryEventArgBox(2);
			int count = 0;
			bool flag = sectArgBox.Get("ConchShip_PresetKey_EmeiSelectGoodEndCount", ref count);
			if (flag)
			{
				count++;
			}
			else
			{
				count = 1;
			}
			EventHelper.SaveArgToSectMainStory<int>(2, "ConchShip_PresetKey_EmeiSelectGoodEndCount", count);
			GameData.Domains.Character.Character gibbon = EventHelper.GetOrCreateFixedCharacterByTemplateId(679);
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			EventHelper.DirectlyChangeFavorabilityOptional(gibbon, taiwu, 3000, 4);
		}

		// Token: 0x060022B3 RID: 8883 RVA: 0x001B4F10 File Offset: 0x001B3110
		public static void EmeiAddSelectBadEndCount()
		{
			EventArgBox sectArgBox = EventHelper.GetSectMainStoryEventArgBox(2);
			int count = 0;
			bool flag = sectArgBox.Get("ConchShip_PresetKey_EmeiSelectBadEndCount", ref count);
			if (flag)
			{
				count++;
			}
			else
			{
				count = 1;
			}
			EventHelper.SaveArgToSectMainStory<int>(2, "ConchShip_PresetKey_EmeiSelectBadEndCount", count);
			GameData.Domains.Character.Character shiHoujiu = EventHelper.GetOrCreateFixedCharacterByTemplateId(637);
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			EventHelper.DirectlyChangeFavorabilityOptional(shiHoujiu, taiwu, 3000, 4);
		}

		// Token: 0x060022B4 RID: 8884 RVA: 0x001B4F74 File Offset: 0x001B3174
		public static int EmeiGetSelectGoodEndCount()
		{
			EventArgBox sectArgBox = EventHelper.GetSectMainStoryEventArgBox(2);
			int count = 0;
			sectArgBox.Get("ConchShip_PresetKey_EmeiSelectGoodEndCount", ref count);
			return count;
		}

		// Token: 0x060022B5 RID: 8885 RVA: 0x001B4FA0 File Offset: 0x001B31A0
		public static int EmeiGetSelectBadEndCount()
		{
			EventArgBox sectArgBox = EventHelper.GetSectMainStoryEventArgBox(2);
			int count = 0;
			sectArgBox.Get("ConchShip_PresetKey_EmeiSelectBadEndCount", ref count);
			return count;
		}

		// Token: 0x060022B6 RID: 8886 RVA: 0x001B4FCC File Offset: 0x001B31CC
		public static bool EmeiDifferentSelectIsShow()
		{
			EventArgBox sectArgBox = EventHelper.GetSectMainStoryEventArgBox(2);
			bool fourthSelect = false;
			sectArgBox.Get("ConchShip_PresetKey_EmeiFourthSelectResult", ref fourthSelect);
			return EventHelper.EmeiGetSelectBadEndCount() >= 2 && !fourthSelect;
		}

		// Token: 0x060022B7 RID: 8887 RVA: 0x001B5004 File Offset: 0x001B3204
		public static void EmeiWhiteGibbonAppear()
		{
			GameData.Domains.Character.Character emeiWhiteGibbon = EventHelper.GetOrCreateFixedCharacterByTemplateId(679);
			EventArgBox sectArgBox = EventHelper.GetSectMainStoryEventArgBox(2);
			short blockId = -1;
			sectArgBox.Get("ConchShip_PresetKey_WhiteApeBlockId", ref blockId);
			Location emeiLocation = EventHelper.GetSettlementByOrgTemplateId(2).GetLocation();
			Location location = new Location(emeiLocation.AreaId, blockId);
			EventHelper.MoveFixedCharacter(emeiWhiteGibbon, location);
		}

		// Token: 0x060022B8 RID: 8888 RVA: 0x001B5058 File Offset: 0x001B3258
		public static void EmeiWhiteGibbonDisappear()
		{
			GameData.Domains.Character.Character emeiWhiteGibbon = EventHelper.GetOrCreateFixedCharacterByTemplateId(679);
			EventHelper.MoveFixedCharacter(emeiWhiteGibbon, Location.Invalid);
		}

		// Token: 0x060022B9 RID: 8889 RVA: 0x001B5080 File Offset: 0x001B3280
		public static void EmeiWhiteGibbonDisappearWithQuestionMark()
		{
			GameData.Domains.Character.Character emeiWhiteGibbon = EventHelper.GetOrCreateFixedCharacterByTemplateId(636);
			EventHelper.MoveFixedCharacter(emeiWhiteGibbon, Location.Invalid);
		}

		// Token: 0x060022BA RID: 8890 RVA: 0x001B50A8 File Offset: 0x001B32A8
		public static void EmeiShiHoujiuDisappear()
		{
			GameData.Domains.Character.Character shiHoujiu = EventHelper.GetOrCreateFixedCharacterByTemplateId(637);
			EventHelper.MoveFixedCharacter(shiHoujiu, Location.Invalid);
		}

		// Token: 0x060022BB RID: 8891 RVA: 0x001B50D0 File Offset: 0x001B32D0
		public static void EmeiHideLeader()
		{
			Settlement emeiSettlement = DomainManager.Organization.GetSettlementByOrgTemplateId(2);
			GameData.Domains.Character.Character leader = emeiSettlement.GetLeader();
			bool flag = leader == null;
			if (!flag)
			{
				bool flag2 = leader.IsActiveExternalRelationState(60);
				if (!flag2)
				{
					bool flag3 = leader.GetKidnapperId() >= 0;
					if (!flag3)
					{
						bool flag4 = !leader.GetLocation().IsValid();
						if (!flag4)
						{
							EventHelper.SaveArgToSectMainStory<Location>(2, "ConchShip_PresetKey_EmeiLeaderOriginalLocation", leader.GetLocation());
							EventHelper.SaveArgToSectMainStory<int>(2, "ConchShip_PresetKey_EmeiLeaderOriginalId", leader.GetId());
							EventHelper.HideIntelligentCharacter(leader);
						}
					}
				}
			}
		}

		// Token: 0x060022BC RID: 8892 RVA: 0x001B5164 File Offset: 0x001B3364
		public static void EmeiShowLeader()
		{
			EventArgBox sectArgBox = EventHelper.GetSectMainStoryEventArgBox(2);
			Location leaderLocation;
			bool flag = sectArgBox.Get<Location>("ConchShip_PresetKey_EmeiLeaderOriginalLocation", out leaderLocation);
			if (flag)
			{
				int leaderId = -1;
				sectArgBox.Get("ConchShip_PresetKey_EmeiLeaderOriginalId", ref leaderId);
				GameData.Domains.Character.Character leader;
				bool flag2 = DomainManager.Character.TryGetElement_Objects(leaderId, out leader);
				if (flag2)
				{
					EventHelper.MoveIntelligentCharacter(leader, leaderLocation);
				}
			}
		}

		// Token: 0x060022BD RID: 8893 RVA: 0x001B51BC File Offset: 0x001B33BC
		public static void EmeiRemoveRelatedFixedCharacter(bool includeGibbon = true, bool includeShiHoujiu = true)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			if (includeGibbon)
			{
				GameData.Domains.Character.Character emeiWhiteGibbon0 = EventHelper.GetOrCreateFixedCharacterByTemplateId(679);
				DomainManager.Character.RemoveNonIntelligentCharacter(context, emeiWhiteGibbon0);
			}
			if (includeShiHoujiu)
			{
				GameData.Domains.Character.Character shiHoujiu = EventHelper.GetOrCreateFixedCharacterByTemplateId(637);
				DomainManager.Character.RemoveNonIntelligentCharacter(context, shiHoujiu);
			}
			GameData.Domains.Character.Character emeiWhiteGibbon = EventHelper.GetOrCreateFixedCharacterByTemplateId(636);
			DomainManager.Character.RemoveNonIntelligentCharacter(context, emeiWhiteGibbon);
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			ItemKey itemKey = taiwu.GetInventory().GetInventoryItemKey(12, 267);
			bool flag = itemKey.IsValid();
			if (flag)
			{
				taiwu.RemoveInventoryItem(context, itemKey, 1, true, false);
			}
		}

		// Token: 0x060022BE RID: 8894 RVA: 0x001B526C File Offset: 0x001B346C
		public static string EmeiGetShiHoujiuDialogueEventGuid(EventArgBox argBox)
		{
			bool flag = EventHelper.EmeiIsShiHoujiuFollowOpen();
			string result;
			if (flag)
			{
				string eventGuid = argBox.GetString("FollowOpenTalk");
				result = eventGuid;
			}
			else
			{
				bool flag2 = EventHelper.EmeiIsSamePassAdventureTwoTaiwu();
				if (flag2)
				{
					string eventGuid = argBox.GetString("SameTaiwuTalk");
					result = eventGuid;
				}
				else
				{
					string eventGuid = argBox.GetString("NormalTalk");
					result = eventGuid;
				}
			}
			return result;
		}

		// Token: 0x060022BF RID: 8895 RVA: 0x001B52C0 File Offset: 0x001B34C0
		public static string EmeiGetWhiteGibbonDialogueEventGuid(EventArgBox argBox)
		{
			bool flag = EventHelper.EmeiIsWhiteGibbonFollowOpen();
			string result;
			if (flag)
			{
				string eventGuid = argBox.GetString("FollowOpenTalk");
				result = eventGuid;
			}
			else
			{
				bool flag2 = EventHelper.EmeiIsSamePassAdventureTwoTaiwu();
				if (flag2)
				{
					string eventGuid = argBox.GetString("SameTaiwuTalk");
					result = eventGuid;
				}
				else
				{
					string eventGuid = argBox.GetString("NormalTalk");
					result = eventGuid;
				}
			}
			return result;
		}

		// Token: 0x060022C0 RID: 8896 RVA: 0x001B5314 File Offset: 0x001B3514
		public static bool EmeiIsSamePassAdventureTwoTaiwu()
		{
			EventArgBox sectArgBox = EventHelper.GetSectMainStoryEventArgBox(2);
			int taiwuId = DomainManager.Taiwu.GetTaiwuCharId();
			int passAdventureTwoTaiwuId = sectArgBox.GetInt("ConchShip_PresetKey_EmeiPassAdventureTwoTaiwuId");
			return taiwuId == passAdventureTwoTaiwuId;
		}

		// Token: 0x060022C1 RID: 8897 RVA: 0x001B5348 File Offset: 0x001B3548
		public static bool EmeiIsWhiteGibbonFollowOpen()
		{
			EventArgBox sectArgBox = EventHelper.GetSectMainStoryEventArgBox(2);
			bool isWhiteGibbonFollowOpen = false;
			return sectArgBox.Get("ConchShip_PresetKey_EmeiWhiteGibbonFollowOpen", ref isWhiteGibbonFollowOpen) && isWhiteGibbonFollowOpen;
		}

		// Token: 0x060022C2 RID: 8898 RVA: 0x001B5374 File Offset: 0x001B3574
		public static bool EmeiIsShiHoujiuFollowOpen()
		{
			EventArgBox sectArgBox = EventHelper.GetSectMainStoryEventArgBox(2);
			bool isShiHoujiuFollowOpen = false;
			return sectArgBox.Get("ConchShip_PresetKey_EmeiShiHoujiuFollowOpen", ref isShiHoujiuFollowOpen) && isShiHoujiuFollowOpen;
		}

		// Token: 0x060022C3 RID: 8899 RVA: 0x001B53A0 File Offset: 0x001B35A0
		public static void EmeiShiHoujiuReturnToEmei()
		{
			GameData.Domains.Character.Character shiHoujiu = EventHelper.GetOrCreateFixedCharacterByTemplateId(637);
			Location targetLocation = EventHelper.GetEmeiSpecifyLocation();
			EventHelper.MoveFixedCharacter(shiHoujiu, targetLocation);
		}

		// Token: 0x060022C4 RID: 8900 RVA: 0x001B53C8 File Offset: 0x001B35C8
		public static void EmeiWhiteGibbonReturnToEmei()
		{
			GameData.Domains.Character.Character whiteGibbon = EventHelper.GetOrCreateFixedCharacterByTemplateId(679);
			Location targetLocation = EventHelper.GetEmeiSpecifyLocation();
			EventHelper.MoveFixedCharacter(whiteGibbon, targetLocation);
		}

		// Token: 0x060022C5 RID: 8901 RVA: 0x001B53F0 File Offset: 0x001B35F0
		public static void EmeiAdventureTwoSetCharacterArgs(EventArgBox argBox)
		{
			for (int i = 0; i < 4; i++)
			{
				DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(23, 1);
				defaultInterpolatedStringHandler.AppendLiteral("ParticipateCharacter_0_");
				defaultInterpolatedStringHandler.AppendFormatted<int>(i);
				string name = defaultInterpolatedStringHandler.ToStringAndClear();
				GameData.Domains.Character.Character elder = argBox.GetCharacter(name);
				defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(10, 1);
				defaultInterpolatedStringHandler.AppendLiteral("EmeiElder0");
				defaultInterpolatedStringHandler.AppendFormatted<int>(i + 1);
				name = defaultInterpolatedStringHandler.ToStringAndClear();
				argBox.Set(name, elder.GetId());
				bool flag = EventHelper.IsTemporaryIntelligentCharacter(elder.GetId());
				if (flag)
				{
					EventHelper.KeepTemporaryCharacterAfterAdventure(elder);
				}
			}
			for (int j = 0; j < 11; j++)
			{
				DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(23, 1);
				defaultInterpolatedStringHandler.AppendLiteral("ParticipateCharacter_1_");
				defaultInterpolatedStringHandler.AppendFormatted<int>(j);
				string name2 = defaultInterpolatedStringHandler.ToStringAndClear();
				GameData.Domains.Character.Character follower = argBox.GetCharacter(name2);
				defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(12, 1);
				defaultInterpolatedStringHandler.AppendLiteral("EmeiFollower");
				defaultInterpolatedStringHandler.AppendFormatted<int>(j + 1);
				name2 = defaultInterpolatedStringHandler.ToStringAndClear();
				argBox.Set(name2, follower.GetId());
				bool flag2 = EventHelper.IsTemporaryIntelligentCharacter(follower.GetId());
				if (flag2)
				{
					EventHelper.KeepTemporaryCharacterAfterAdventure(follower);
				}
			}
			GameData.Domains.Character.Character emeiWhiteGibbon = EventHelper.GetOrCreateFixedCharacterByTemplateId(679);
			GameData.Domains.Character.Character shiHoujiu = EventHelper.GetOrCreateFixedCharacterByTemplateId(637);
			argBox.Set("ShiHoujiu", shiHoujiu.GetId());
			argBox.Set("EmeiGibbon", emeiWhiteGibbon.GetId());
			EventHelper.CreateAdventureActor(162, "EmeiBlackMan", argBox);
		}

		// Token: 0x060022C6 RID: 8902 RVA: 0x001B5590 File Offset: 0x001B3790
		public static bool EmeiAdventureTwoSetPathArgs(EventArgBox argBox)
		{
			int pathEventTriggerCount = 0;
			bool flag = !argBox.Contains<int>("ConchShip_PresetKey_EmeiAdventureTwoPathEventTriggerCount");
			if (flag)
			{
				argBox.Set("ConchShip_PresetKey_EmeiAdventureTwoPathEventTriggerCount", 1);
				pathEventTriggerCount = 1;
			}
			else
			{
				argBox.Get("ConchShip_PresetKey_EmeiAdventureTwoPathEventTriggerCount", ref pathEventTriggerCount);
				pathEventTriggerCount++;
				argBox.Set("ConchShip_PresetKey_EmeiAdventureTwoPathEventTriggerCount", pathEventTriggerCount);
			}
			bool flag2 = pathEventTriggerCount >= 6;
			bool result;
			if (flag2)
			{
				result = false;
			}
			else
			{
				GameData.Domains.Character.Character character = argBox.GetCharacter("EmeiFollower" + (pathEventTriggerCount + 5).ToString());
				argBox.Set("EmeiFollowerRandom", character.GetId());
				result = true;
			}
			return result;
		}

		// Token: 0x060022C7 RID: 8903 RVA: 0x001B562C File Offset: 0x001B382C
		public static void OpenEmeiCombatSkillSpecialBreak(string afterEvent, EventArgBox argBox, short charTemplateId, int characterId)
		{
			EventHelper.Domain.SetListenerWithActionName(afterEvent, argBox, "CombatSkillSpecialBreak");
			if (charTemplateId >= 679)
			{
				if (charTemplateId > 681)
				{
					goto IL_33;
				}
			}
			else if (charTemplateId != 636)
			{
				goto IL_33;
			}
			bool flag = true;
			goto IL_35;
			IL_33:
			flag = false;
			IL_35:
			bool isEmeiWhiteGibbon = flag;
			GameDataBridge.AddDisplayEvent<short, bool>(DisplayEventType.OpenCombatSkillSpecialBreak, charTemplateId, isEmeiWhiteGibbon);
		}

		// Token: 0x060022C8 RID: 8904 RVA: 0x001B567C File Offset: 0x001B387C
		public static void Follow(GameData.Domains.Character.Character character, int distance)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			List<MapBlockData> taiwuNeighborBlocks = ObjectPool<List<MapBlockData>>.Instance.Get();
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			Location taiwuLocation = taiwu.GetLocation();
			bool flag = !taiwuLocation.IsValid();
			if (flag)
			{
				taiwuLocation = taiwu.GetValidLocation();
			}
			DomainManager.Map.GetRealNeighborBlocks(taiwuLocation.AreaId, taiwuLocation.BlockId, taiwuNeighborBlocks, distance, false);
			MapBlockData blockData = taiwuNeighborBlocks[context.Random.Next(0, taiwuNeighborBlocks.Count)];
			ObjectPool<List<MapBlockData>>.Instance.Return(taiwuNeighborBlocks);
			EventHelper.MoveFixedCharacter(character, blockData.GetLocation());
		}

		// Token: 0x060022C9 RID: 8905 RVA: 0x001B5718 File Offset: 0x001B3918
		public static bool IsEmeiHomocideCasesInteractionId(int charId)
		{
			EventArgBox sectArgBox = EventHelper.GetSectMainStoryEventArgBox(2);
			bool flag = !sectArgBox.Contains<IntList>("ConchShip_PresetKey_EmeiEmeiHomocideCasesInteractionIds");
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				IntList idList = sectArgBox.Get<IntList>("ConchShip_PresetKey_EmeiEmeiHomocideCasesInteractionIds");
				bool flag2 = idList.Items == null;
				result = (!flag2 && idList.Items.Contains(charId));
			}
			return result;
		}

		// Token: 0x060022CA RID: 8906 RVA: 0x001B5774 File Offset: 0x001B3974
		public static void AddEmeiHomocideCasesInteractionId(int charId)
		{
			EventArgBox sectArgBox = EventHelper.GetSectMainStoryEventArgBox(2);
			bool flag = !sectArgBox.Contains<IntList>("ConchShip_PresetKey_EmeiEmeiHomocideCasesInteractionIds");
			IntList idList;
			if (flag)
			{
				idList = IntList.Create();
			}
			else
			{
				idList = sectArgBox.Get<IntList>("ConchShip_PresetKey_EmeiEmeiHomocideCasesInteractionIds");
				bool flag2 = idList.Items == null;
				if (flag2)
				{
					idList = IntList.Create();
				}
			}
			idList.Items.Add(charId);
			EventHelper.SaveArgToSectMainStory<IntList>(2, "ConchShip_PresetKey_EmeiEmeiHomocideCasesInteractionIds", idList);
		}

		// Token: 0x060022CB RID: 8907 RVA: 0x001B57E0 File Offset: 0x001B39E0
		public static void EmeiCreateIntelligentNpc()
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			OrganizationInfo orgInfo = new OrganizationInfo(2, 4, true, -1);
			short charTemplateId = OrganizationDomain.GetCharacterTemplateId(orgInfo.OrgTemplateId, 2, 1);
			IntelligentCharacterCreationInfo info = new IntelligentCharacterCreationInfo(taiwu.GetLocation(), orgInfo, charTemplateId)
			{
				Age = (short)context.Random.Next(18, 30),
				Gender = 1
			};
			GameData.Domains.Character.Character newCharacter = DomainManager.Character.CreateIntelligentCharacter(context, ref info);
			DomainManager.Character.CompleteCreatingCharacter(newCharacter.GetId());
			newCharacter.SetBaseMorality(500, context);
		}

		// Token: 0x060022CC RID: 8908 RVA: 0x001B587E File Offset: 0x001B3A7E
		public static void FulongTriggerAdventureOneAction()
		{
			DomainManager.TaiwuEvent.AddTempDynamicAction<FulongStoryAdventureOneTriggerAction>(EventHelper.Domain.MainThreadDataContext, new FulongStoryAdventureOneTriggerAction());
		}

		// Token: 0x060022CD RID: 8909 RVA: 0x001B589C File Offset: 0x001B3A9C
		public static void FulongAdventureOneSetLeader(EventArgBox argBox)
		{
			GameData.Domains.Character.Character leader = argBox.GetCharacter("MajorCharacter_0_0");
			bool flag = leader == null;
			if (flag)
			{
				int leaderId = EventHelper.CreateNonIntelligentCharacter(420);
				argBox.Set("SectLeader", leaderId);
				argBox.Set("MajorCharacter_0_0", leaderId);
			}
			else
			{
				argBox.Set("SectLeader", leader.GetId());
			}
		}

		// Token: 0x060022CE RID: 8910 RVA: 0x001B58FC File Offset: 0x001B3AFC
		public static bool FulongAdventureCanDrinkWine()
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			return EventHelper.CanEatItemExceptMisc(taiwu) && taiwu.GetDisorderOfQi() <= 6000;
		}

		// Token: 0x060022CF RID: 8911 RVA: 0x001B5934 File Offset: 0x001B3B34
		public static void FulongAdventureDrinkWine(EventArgBox argBox, GameData.Domains.Character.Character character)
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			short templateId = 0;
			bool flag = character.GetOrganizationInfo().Grade == 1;
			if (flag)
			{
				templateId = 1;
			}
			else
			{
				bool flag2 = character.GetOrganizationInfo().Grade == 2;
				if (flag2)
				{
					templateId = 2;
				}
			}
			TeaWineItem config = Config.TeaWine.Instance[templateId];
			EventHelper.ChangeFavorabilityOptional(character, taiwu, (short)config.BaseFavorabilityChange, 4);
			ItemKey itemWineTaiwuDrink = EventHelper.AddItemToRole(taiwu, 9, templateId, 1, -1);
			EventHelper.AddEatingItem(taiwu.GetId(), itemWineTaiwuDrink);
			bool flag3 = EventHelper.CanEatItemExceptMisc(character);
			if (flag3)
			{
				ItemKey itemWineCharacterDrink = EventHelper.AddItemToRole(character, 9, templateId, 1, -1);
				EventHelper.AddEatingItem(character.GetId(), itemWineCharacterDrink);
			}
		}

		// Token: 0x060022D0 RID: 8912 RVA: 0x001B59DC File Offset: 0x001B3BDC
		public static void FulongAdventurePathEventSetCharacterId(EventArgBox argBox, int pathIndex, int count)
		{
			bool flag = pathIndex == 0;
			GameData.Domains.Character.Character character;
			if (flag)
			{
				bool flag2 = count == 0;
				if (flag2)
				{
					character = argBox.GetCharacter("MajorCharacter_0_1_0");
				}
				else
				{
					bool flag3 = count == 1;
					if (flag3)
					{
						character = argBox.GetCharacter("MajorCharacter_0_1_1");
					}
					else
					{
						character = argBox.GetCharacter("MajorCharacter_0_1_2");
					}
				}
			}
			else
			{
				bool flag4 = pathIndex == 1;
				if (flag4)
				{
					bool flag5 = count == 0;
					if (flag5)
					{
						character = argBox.GetCharacter("MajorCharacter_0_2_0");
					}
					else
					{
						bool flag6 = count == 1;
						if (flag6)
						{
							character = argBox.GetCharacter("MajorCharacter_0_2_1");
						}
						else
						{
							character = argBox.GetCharacter("MajorCharacter_0_2_2");
						}
					}
				}
				else
				{
					bool flag7 = count == 0;
					if (flag7)
					{
						character = argBox.GetCharacter("MajorCharacter_0_3_0");
					}
					else
					{
						bool flag8 = count == 1;
						if (flag8)
						{
							character = argBox.GetCharacter("MajorCharacter_0_3_1");
						}
						else
						{
							character = argBox.GetCharacter("MajorCharacter_0_3_2");
						}
					}
				}
			}
			argBox.Set("CharacterId", character.GetId());
		}

		// Token: 0x060022D1 RID: 8913 RVA: 0x001B5ACC File Offset: 0x001B3CCC
		public static void FulongAdventureGiveTreasure(EventArgBox argBox)
		{
			List<short> templateIds = ObjectPool<List<short>>.Instance.Get();
			for (short i = 28; i <= 72; i += 1)
			{
				MiscItem config = Config.Misc.Instance[i];
				sbyte grade = config.Grade;
				bool flag = grade >= 5 && grade <= 7;
				if (flag)
				{
					templateIds.Add(i);
				}
			}
			short templateId = templateIds.GetRandom(EventHelper.Domain.MainThreadDataContext.Random);
			ObjectPool<List<short>>.Instance.Return(templateIds);
			ItemKey itemKey = new ItemKey(12, 0, templateId, -1);
			argBox.Set("GiftItem", itemKey);
		}

		// Token: 0x060022D2 RID: 8914 RVA: 0x001B5B74 File Offset: 0x001B3D74
		public static void FulongAdventureGiveResourceTypes(EventArgBox argBox, sbyte resourceType)
		{
			GameData.Utilities.ShortList giveResourceTypes = argBox.Get<GameData.Utilities.ShortList>("GiveResourceTypes");
			bool flag = giveResourceTypes.Items == null;
			if (flag)
			{
				giveResourceTypes = GameData.Utilities.ShortList.Create();
			}
			bool flag2 = !giveResourceTypes.Items.Contains((short)resourceType);
			if (flag2)
			{
				giveResourceTypes.Items.Add((short)resourceType);
			}
			argBox.Set("ResourceType", resourceType);
			argBox.Set("GiveResourceTypes", giveResourceTypes);
		}

		// Token: 0x060022D3 RID: 8915 RVA: 0x001B5BE0 File Offset: 0x001B3DE0
		public static string FulongGetAdventureGiveResourceTypesGuid(EventArgBox argBox)
		{
			GameData.Utilities.ShortList giveResourceTypes = argBox.Get<GameData.Utilities.ShortList>("GiveResourceTypes");
			bool flag = giveResourceTypes.Items == null;
			string result;
			if (flag)
			{
				result = "a62710ce-557a-4402-9ff4-765165db97a2";
			}
			else
			{
				bool flag2 = giveResourceTypes.Items.Count == 1 && giveResourceTypes.Items.Contains(0);
				if (flag2)
				{
					result = "2d4a7c1a-403e-45d1-9a32-1129de717bc6";
				}
				else
				{
					bool flag3 = giveResourceTypes.Items.Count == 1 && giveResourceTypes.Items.Contains(1);
					if (flag3)
					{
						result = "f68e2120-a5b3-4f4c-8806-8eaf27fd3503";
					}
					else
					{
						bool flag4 = giveResourceTypes.Items.Count == 1 && giveResourceTypes.Items.Contains(2);
						if (flag4)
						{
							result = "5e4d1c2f-ad1e-433e-ae96-15f0a9214fa7";
						}
						else
						{
							bool flag5 = giveResourceTypes.Items.Count == 1 && giveResourceTypes.Items.Contains(3);
							if (flag5)
							{
								result = "267f104d-89d2-4e9e-a895-258b6d0dbc7c";
							}
							else
							{
								bool flag6 = giveResourceTypes.Items.Count == 1 && giveResourceTypes.Items.Contains(4);
								if (flag6)
								{
									result = "faffda0e-e41d-4bdc-8c86-17f8e5a2ec2b";
								}
								else
								{
									bool flag7 = giveResourceTypes.Items.Count == 1 && giveResourceTypes.Items.Contains(5);
									if (flag7)
									{
										result = "463a9fbd-d2bf-44ee-ae05-bef4621032a8";
									}
									else
									{
										bool flag8 = giveResourceTypes.Items.Count == 1 && giveResourceTypes.Items.Contains(6);
										if (flag8)
										{
											result = "d4f69f6c-4754-4202-9f20-c9a3a185ea2c";
										}
										else
										{
											bool flag9 = giveResourceTypes.Items.Count > 1 && giveResourceTypes.Items.Contains(0) && giveResourceTypes.Items.Contains(5);
											if (flag9)
											{
												result = "94b5daba-beaf-4de8-ab8d-46aa5cb9f859";
											}
											else
											{
												result = "3f0016e3-9afe-49a9-b394-3fc1ab1a142b";
											}
										}
									}
								}
							}
						}
					}
				}
			}
			return result;
		}

		// Token: 0x060022D4 RID: 8916 RVA: 0x001B5D90 File Offset: 0x001B3F90
		public static void FulongAdventureChangeCharacterFavorability(GameData.Domains.Character.Character character)
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			DomainManager.Character.ChangeFavorabilityOptional(EventHelper.Domain.MainThreadDataContext, character, taiwu, SectMainStoryRelatedConstants.FulongAdventureOneFavorabilityChange, 4);
		}

		// Token: 0x060022D5 RID: 8917 RVA: 0x001B5DC8 File Offset: 0x001B3FC8
		public static List<FulongInFlameArea> GetAllFulongInFlameAreas()
		{
			return DomainManager.Extra.GetAllFulongInFlameAreas();
		}

		// Token: 0x060022D6 RID: 8918 RVA: 0x001B5DE4 File Offset: 0x001B3FE4
		public static void FulongStartFire()
		{
			DomainManager.Extra.GenerateFulongInFlameArea(EventHelper.Domain.MainThreadDataContext, 3, GlobalConfig.Instance.FulongFlameBoomNumber, true);
			DomainManager.Extra.GenerateFulongInFlameArea(EventHelper.Domain.MainThreadDataContext, 3, GlobalConfig.Instance.FulongFlameBoomNumber, true);
			DomainManager.Extra.GenerateFulongInFlameArea(EventHelper.Domain.MainThreadDataContext, 3, GlobalConfig.Instance.FulongFlameBoomNumber, true);
			EventHelper.SaveArgToSectMainStory<int>(14, "ConchShip_PresetKey_FulongFireStartTime", EventHelper.GetGameDate());
			EventHelper.TriggerExtraTask(52, 346);
		}

		// Token: 0x060022D7 RID: 8919 RVA: 0x001B5E74 File Offset: 0x001B4074
		public unsafe static List<short> FulongGetPutOutFireReward()
		{
			int count = 0;
			EventArgBox sectArgBox = EventHelper.GetSectMainStoryEventArgBox(14);
			sectArgBox.Get("ConchShip_PresetKey_FulongPutOutFireCount", ref count);
			sbyte rewardGrade = (sbyte)(count + 2);
			Span<short> span = new Span<short>(stackalloc byte[(UIntPtr)6], 3);
			SpanList<short> reward = span;
			List<short> templateIds = new List<short>();
			reward.Add(77);
			reward.Add(78);
			reward.Add(80);
			foreach (short ptr in reward)
			{
				short materialId = ptr;
				MakeItemResult result = MakeItemSubType.Instance[MakeItemType.Instance[Config.Material.Instance[materialId].CraftableItemTypes[0]].MakeItemSubTypes[0]].Result;
				short templateId = result.TemplateId - (short)Config.Food.Instance[result.TemplateId].Grade + (short)rewardGrade;
				templateIds.Add(templateId);
			}
			return templateIds;
		}

		// Token: 0x060022D8 RID: 8920 RVA: 0x001B5F6C File Offset: 0x001B416C
		public static void FulongPutOutOnceFire()
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			List<FulongInFlameArea> flameAreas = EventHelper.GetAllFulongInFlameAreas();
			for (int i = 0; i < flameAreas.Count; i++)
			{
				FulongInFlameArea flameArea = flameAreas[i];
				List<short> lightedBlocks = flameArea.LightedBlocks.Keys.ToList<short>();
				lightedBlocks = lightedBlocks.Except(flameArea.ExtinguishedBlocks).Except(flameArea.MineBlocks).ToList<short>();
				bool flag = lightedBlocks.Count > 2;
				if (flag)
				{
					short blockId = lightedBlocks.GetRandom(context.Random);
					DomainManager.Extra.ExtinguishFulongInFlameArea(context, blockId, true);
				}
			}
		}

		// Token: 0x060022D9 RID: 8921 RVA: 0x001B6010 File Offset: 0x001B4210
		public static bool FulongGuideCanTrigger()
		{
			bool flag = !EventHelper.IsExtraTaskInProgress(346);
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				EventArgBox eventArgBox = EventHelper.GetSectMainStoryEventArgBox(14);
				bool triggered = false;
				eventArgBox.Get("ConchShip_PresetKey_FulongFireFightingGuideTriggered", ref triggered);
				bool flag2 = triggered;
				if (flag2)
				{
					result = false;
				}
				else
				{
					Settlement settlement = DomainManager.Organization.GetSettlementByOrgTemplateId(14);
					Location fulongLocation = settlement.GetLocation();
					GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
					Location taiwuLocation = taiwu.GetLocation();
					bool flag3 = taiwuLocation.AreaId != fulongLocation.AreaId;
					if (flag3)
					{
						result = false;
					}
					else
					{
						List<FulongInFlameArea> fulongInFlameAreas = EventHelper.GetAllFulongInFlameAreas();
						List<MapBlockData> mapBlockDatas = ObjectPool<List<MapBlockData>>.Instance.Get();
						DomainManager.Map.GetLocationByDistance(taiwuLocation, 1, 1, ref mapBlockDatas);
						for (int i = 0; i < mapBlockDatas.Count; i++)
						{
							Location location = mapBlockDatas[i].GetLocation();
							for (int j = 0; j < fulongInFlameAreas.Count; j++)
							{
								bool flag4 = fulongInFlameAreas[j].LightedBlocks.Keys.Contains(location.BlockId);
								if (flag4)
								{
									ObjectPool<List<MapBlockData>>.Instance.Return(mapBlockDatas);
									return true;
								}
							}
						}
						ObjectPool<List<MapBlockData>>.Instance.Return(mapBlockDatas);
						result = false;
					}
				}
			}
			return result;
		}

		// Token: 0x060022DA RID: 8922 RVA: 0x001B6168 File Offset: 0x001B4368
		public static void FulongSectSetLeader(EventArgBox argBox)
		{
			Settlement settlement = DomainManager.Organization.GetSettlementByOrgTemplateId(14);
			bool flag = settlement != null && settlement.GetLeader() != null && EventHelper.IsCharacterAtTargetSectLocation(settlement.GetLeader(), 14);
			if (flag)
			{
				argBox.Set("SectLeader", settlement.GetLeader().GetId());
			}
			else
			{
				int leaderId = EventHelper.CreateNonIntelligentCharacter(420);
				argBox.Set("SectLeader", leaderId);
			}
		}

		// Token: 0x060022DB RID: 8923 RVA: 0x001B61D8 File Offset: 0x001B43D8
		public static void FulongSetReudhLazuliStartFavorability()
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			GameData.Domains.Character.Character reudhLazuli = EventHelper.GetOrCreateFixedCharacterByTemplateId(810);
			EventHelper.DirectlySetFavorabilities(reudhLazuli.GetId(), taiwu.GetId(), SectMainStoryRelatedConstants.FulongLazuliStartFavorability, SectMainStoryRelatedConstants.FulongLazuliStartFavorability);
		}

		// Token: 0x060022DC RID: 8924 RVA: 0x001B6218 File Offset: 0x001B4418
		public static int FulongMonvState(EventArgBox argBox)
		{
			EventArgBox sectArgBox = EventHelper.GetSectMainStoryEventArgBox(14);
			bool fulongTravelWithLazuliMonvTalkTriggered = false;
			sectArgBox.Get("ConchShip_PresetKey_FulongTravelWithLazuliMonvTalkTriggered", ref fulongTravelWithLazuliMonvTalkTriggered);
			bool flag = fulongTravelWithLazuliMonvTalkTriggered;
			int result;
			if (flag)
			{
				result = 3;
			}
			else
			{
				GameData.Domains.Character.Character juniorMonv;
				DomainManager.Character.TryGetFixedCharacterByTemplateId(39, out juniorMonv);
				bool flag2 = juniorMonv != null && juniorMonv.GetLocation().AreaId == DomainManager.Taiwu.GetTaiwuVillageLocation().AreaId;
				if (flag2)
				{
					argBox.Set("Monv", juniorMonv.GetId());
					result = 0;
				}
				else
				{
					for (short i = 129; i <= 137; i += 1)
					{
						GameData.Domains.Character.Character weakenedMonv;
						DomainManager.Character.TryGetFixedCharacterByTemplateId(i, out weakenedMonv);
						bool flag3 = weakenedMonv != null && weakenedMonv.GetLocation().AreaId == DomainManager.Taiwu.GetTaiwuVillageLocation().AreaId;
						if (flag3)
						{
							return 1;
						}
					}
					sbyte xiangshuAvatarId = XiangshuAvatarIds.GetXiangshuAvatarIdByCharacterTemplateId(39);
					XiangshuAvatarTaskStatus status = DomainManager.World.GetElement_XiangshuAvatarTaskStatuses((int)xiangshuAvatarId);
					bool flag4 = status.SwordTombStatus < 2;
					if (flag4)
					{
						result = 2;
					}
					else
					{
						result = 3;
					}
				}
			}
			return result;
		}

		// Token: 0x060022DD RID: 8925 RVA: 0x001B6334 File Offset: 0x001B4534
		public static void FulongReudhLazuliMovementDependMonv()
		{
			GameData.Domains.Character.Character character;
			bool flag = EventHelper.TryGetFixedCharacterByTemplateId(810, out character);
			if (flag)
			{
				DomainManager.Character.FulongReudhLazuliMovementDependMonv(EventHelper.Domain.MainThreadDataContext, character);
			}
		}

		// Token: 0x060022DE RID: 8926 RVA: 0x001B636C File Offset: 0x001B456C
		public static void FulongAddReudhLazuliChatMysteryCount()
		{
			EventArgBox argBox = DomainManager.Extra.GetSectMainStoryEventArgBox(14);
			int count = 0;
			argBox.Get("ConchShip_PresetKey_FulongReudhLazuliChatMysteryCount", ref count);
			DomainManager.Extra.SaveArgToSectMainStoryEventArgBox<int>(EventHelper.Domain.MainThreadDataContext, 14, "ConchShip_PresetKey_FulongReudhLazuliChatMysteryCount", ++count);
		}

		// Token: 0x060022DF RID: 8927 RVA: 0x001B63B8 File Offset: 0x001B45B8
		public static int FulongGetReudhLazuliAi2LocationState()
		{
			Location taiwuLocation = DomainManager.Taiwu.GetTaiwu().GetLocation();
			MapBlockData mapBlockData = DomainManager.Map.GetBlockData(taiwuLocation.AreaId, taiwuLocation.BlockId);
			bool flag = mapBlockData.BelongBlockId < 0;
			int result;
			if (flag)
			{
				result = 3;
			}
			else
			{
				Location settlementLocation = new Location(taiwuLocation.AreaId, mapBlockData.BelongBlockId);
				Settlement settlement = DomainManager.Organization.GetSettlementByLocation(settlementLocation);
				bool flag2 = settlement == null;
				if (flag2)
				{
					result = 3;
				}
				else
				{
					bool flag3 = settlement.GetOrgTemplateId() == 16;
					if (flag3)
					{
						result = 2;
					}
					else
					{
						result = 1;
					}
				}
			}
			return result;
		}

		// Token: 0x060022E0 RID: 8928 RVA: 0x001B644C File Offset: 0x001B464C
		public static string FulongGetTravelWithLazuliLocationEvent(EventArgBox eventArgBox)
		{
			bool flag = !DomainManager.Extra.IsExtraTaskInProgress(336) && !DomainManager.Extra.IsExtraTaskInProgress(345);
			string result;
			if (flag)
			{
				result = string.Empty;
			}
			else
			{
				int charId = EventHelper.GetOrCreateFixedCharacterByTemplateId(474).GetId();
				eventArgBox.Set("ChickenKing", charId);
				GameData.Domains.Character.Character reudhLazuli = EventHelper.GetOrCreateFixedCharacterByTemplateId(810);
				eventArgBox.Set("ReudhLazuli", reudhLazuli.GetId());
				GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
				Location taiwuLocation = taiwu.GetLocation();
				MapBlockData taiwuBlockData = EventHelper.GetMapBlockData(taiwuLocation.AreaId, taiwuLocation.BlockId);
				MapBlockData taiwuRootBlockData = taiwuBlockData.GetRootBlock();
				EventArgBox argBox = EventHelper.GetSectMainStoryEventArgBox(14);
				MapBlockItem config = taiwuRootBlockData.GetConfig();
				EMapBlockSubType subType = config.SubType;
				bool flag2 = subType == EMapBlockSubType.Fuzhou || subType == EMapBlockSubType.Shouchun || subType == EMapBlockSubType.Yangzhou;
				bool flag3 = flag2;
				if (flag3)
				{
					bool flag4 = !argBox.Contains<bool>("ConchShip_PresetKey_FulongTravelWithLazuliCityTriggered");
					if (flag4)
					{
						EventHelper.SaveArgToSectMainStory<bool>(14, "ConchShip_PresetKey_FulongTravelWithLazuliCityTriggered", true);
						result = "3cf8d2b1-0684-43df-9423-d52b9dcfcc1f";
					}
					else
					{
						result = string.Empty;
					}
				}
				else
				{
					bool flag5 = config.Type == EMapBlockType.Sect && config.SubType != EMapBlockSubType.FulongTan;
					if (flag5)
					{
						bool flag6 = !argBox.Contains<bool>("ConchShip_PresetKey_FulongTravelWithLazuliSectTriggered");
						if (flag6)
						{
							EventHelper.SaveArgToSectMainStory<bool>(14, "ConchShip_PresetKey_FulongTravelWithLazuliSectTriggered", true);
							result = "42ab2896-df4f-4c62-a3bb-519d04257835";
						}
						else
						{
							result = string.Empty;
						}
					}
					else
					{
						bool flag7 = config.TemplateId == 0 && DomainManager.Extra.IsExtraTaskInProgress(345);
						if (flag7)
						{
							bool flag8 = !argBox.Contains<bool>("ConchShip_PresetKey_FulongTravelWithLazuliTaiwuVillageTriggered");
							if (flag8)
							{
								EventHelper.SaveArgToSectMainStory<bool>(14, "ConchShip_PresetKey_FulongTravelWithLazuliTaiwuVillageTriggered", true);
								result = "034492a8-e1a5-40c8-99bf-87b1b6d0d080";
							}
							else
							{
								result = string.Empty;
							}
						}
						else
						{
							bool flag9 = config.TemplateId == 34 && EventHelper.<FulongGetTravelWithLazuliLocationEvent>g__AtTargetArea|1560_0(taiwuLocation);
							if (flag9)
							{
								bool flag10 = !argBox.Contains<bool>("ConchShip_PresetKey_FulongTravelWithLazuliVillageTriggered");
								if (flag10)
								{
									EventHelper.SaveArgToSectMainStory<bool>(14, "ConchShip_PresetKey_FulongTravelWithLazuliVillageTriggered", true);
									result = "bb456d3f-5598-4c34-9784-2f3c2e17fb43";
								}
								else
								{
									result = string.Empty;
								}
							}
							else
							{
								bool flag11 = config.TemplateId == 35 && EventHelper.<FulongGetTravelWithLazuliLocationEvent>g__AtTargetArea|1560_0(taiwuLocation);
								if (flag11)
								{
									bool flag12 = !argBox.Contains<bool>("ConchShip_PresetKey_FulongTravelWithLazuliTownTriggered");
									if (flag12)
									{
										EventHelper.SaveArgToSectMainStory<bool>(14, "ConchShip_PresetKey_FulongTravelWithLazuliTownTriggered", true);
										result = "ef05aa29-0841-4bf1-b951-3856bf6ac993";
									}
									else
									{
										result = string.Empty;
									}
								}
								else
								{
									bool flag13 = config.TemplateId == 36 && EventHelper.<FulongGetTravelWithLazuliLocationEvent>g__AtTargetArea|1560_0(taiwuLocation);
									if (flag13)
									{
										bool flag14 = !argBox.Contains<bool>("ConchShip_PresetKey_FulongTravelWithLazuliStockadeTriggered");
										if (flag14)
										{
											EventHelper.SaveArgToSectMainStory<bool>(14, "ConchShip_PresetKey_FulongTravelWithLazuliStockadeTriggered", true);
											result = "08a7773e-e5fa-43fd-9c00-92edd8710891";
										}
										else
										{
											result = string.Empty;
										}
									}
									else
									{
										List<GameData.Domains.Character.Animal> animals;
										bool flag15 = DomainManager.Extra.TryGetAnimalsByLocation(taiwuLocation, out animals) && animals.Count > 0;
										if (flag15)
										{
											for (int i = animals.Count - 1; i >= 0; i--)
											{
												bool flag16 = FiveLoongDlcEntry.IsCharacterLoong(animals[i].CharacterTemplateId) || FiveLoongDlcEntry.IsCharacterMinionLoong(animals[i].CharacterTemplateId) || animals[i].ItemKey.IsValid();
												if (flag16)
												{
													animals.RemoveAt(i);
												}
											}
											bool flag17 = animals.Count <= 0;
											if (flag17)
											{
												return string.Empty;
											}
											bool flag18 = !argBox.Contains<bool>("ConchShip_PresetKey_FulongTravelWithLazuliAnimalTriggered");
											if (flag18)
											{
												eventArgBox.Set("AnimalTemplateId", animals[0].CharacterTemplateId);
												EventHelper.SaveArgToSectMainStory<bool>(14, "ConchShip_PresetKey_FulongTravelWithLazuliAnimalTriggered", true);
												return "b8b34225-1aae-41e4-a72c-6a757ced4c49";
											}
										}
										bool flag19 = taiwuBlockData.TemplateEnemyList != null;
										if (flag19)
										{
											string nextString = string.Empty;
											for (int j = 0; j < taiwuBlockData.TemplateEnemyList.Count; j++)
											{
												short templateId = taiwuBlockData.TemplateEnemyList[j].TemplateId;
												bool flag20 = templateId >= 298 && templateId <= 306;
												if (flag20)
												{
													bool flag21 = !argBox.Contains<bool>("ConchShip_PresetKey_FulongTravelWithLazuliXiangshuMinionTriggered");
													if (flag21)
													{
														eventArgBox.Set("EnemyTemplateId", taiwuBlockData.TemplateEnemyList[j].TemplateId);
														EventHelper.SaveArgToSectMainStory<bool>(14, "ConchShip_PresetKey_FulongTravelWithLazuliXiangshuMinionTriggered", true);
														nextString = "e12aabfa-3947-4ce2-b16b-005a7f193966";
														break;
													}
												}
												else
												{
													templateId = taiwuBlockData.TemplateEnemyList[j].TemplateId;
													bool flag22;
													if (templateId >= 307 && templateId <= 315)
													{
														sbyte fameType = taiwu.GetFameType();
														flag22 = (fameType != 1 && fameType != 0);
													}
													else
													{
														flag22 = false;
													}
													bool flag23 = flag22;
													if (flag23)
													{
														nextString = string.Empty;
														break;
													}
													bool flag24 = !argBox.Contains<bool>("ConchShip_PresetKey_FulongTravelWithLazuliRandomEnemyTriggered");
													if (flag24)
													{
														eventArgBox.Set("EnemyTemplateId", taiwuBlockData.TemplateEnemyList[j].TemplateId);
														EventHelper.SaveArgToSectMainStory<bool>(14, "ConchShip_PresetKey_FulongTravelWithLazuliRandomEnemyTriggered", true);
														nextString = "209b1ffb-b465-4d37-8111-1191d9769b11";
														break;
													}
												}
											}
											bool flag25 = !nextString.Equals(string.Empty);
											if (flag25)
											{
												DomainManager.Map.ClearBlockRandomEnemies(EventHelper.Domain.MainThreadDataContext, taiwuBlockData);
											}
											result = nextString;
										}
										else
										{
											int moveCount = 0;
											argBox.Get("ConchShip_PresetKey_FulongTravelWithLazuliMoveCount", ref moveCount);
											EventHelper.SaveArgToSectMainStory<int>(14, "ConchShip_PresetKey_FulongTravelWithLazuliMoveCount", ++moveCount);
											int areaId = 0;
											argBox.Get("ConchShip_PresetKey_FulongTravelWithLazuliMoveAreaId", ref areaId);
											bool flag26 = moveCount > 6 || areaId != (int)taiwuLocation.AreaId;
											if (flag26)
											{
												bool flag27 = areaId != (int)taiwuLocation.AreaId;
												if (flag27)
												{
													EventHelper.SaveArgToSectMainStory<int>(14, "ConchShip_PresetKey_FulongTravelWithLazuliMoveAreaId", (int)taiwuLocation.AreaId);
												}
												bool flag28 = !argBox.Contains<bool>("ConchShip_PresetKey_FulongTravelWithLazuliChicken1");
												if (flag28)
												{
													EventHelper.SaveArgToSectMainStory<bool>(14, "ConchShip_PresetKey_FulongTravelWithLazuliChicken1", true);
													EventHelper.SaveArgToSectMainStory<int>(14, "ConchShip_PresetKey_FulongTravelWithLazuliMoveCount", 0);
													return "242a1283-5b57-4c40-80f6-6a6e7d7be970";
												}
												bool flag29 = !argBox.Contains<bool>("ConchShip_PresetKey_FulongTravelWithLazuliChicken2");
												if (flag29)
												{
													EventHelper.SaveArgToSectMainStory<bool>(14, "ConchShip_PresetKey_FulongTravelWithLazuliChicken2", true);
													EventHelper.SaveArgToSectMainStory<int>(14, "ConchShip_PresetKey_FulongTravelWithLazuliMoveCount", 0);
													return "97c2d89a-ab79-4960-a469-b433133510cb";
												}
											}
											result = string.Empty;
										}
									}
								}
							}
						}
					}
				}
			}
			return result;
		}

		// Token: 0x060022E1 RID: 8929 RVA: 0x001B6AE0 File Offset: 0x001B4CE0
		public static bool FulongCanTriggerWorldView()
		{
			EventArgBox argBox = EventHelper.GetSectMainStoryEventArgBox(14);
			bool fulongTravelWithLazuliWorldViewTriggered = false;
			argBox.Get("ConchShip_PresetKey_FulongTravelWithLazuliWorldViewTriggered", ref fulongTravelWithLazuliWorldViewTriggered);
			bool flag = fulongTravelWithLazuliWorldViewTriggered;
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				bool fulongTravelWithLazuliCityTriggered = false;
				argBox.Get("ConchShip_PresetKey_FulongTravelWithLazuliCityTriggered", ref fulongTravelWithLazuliCityTriggered);
				bool fulongTravelWithLazuliTownTriggered = false;
				argBox.Get("ConchShip_PresetKey_FulongTravelWithLazuliTownTriggered", ref fulongTravelWithLazuliTownTriggered);
				bool fulongTravelWithLazuliStockadeTriggered = false;
				argBox.Get("ConchShip_PresetKey_FulongTravelWithLazuliStockadeTriggered", ref fulongTravelWithLazuliStockadeTriggered);
				bool fulongTravelWithLazuliVillageTriggered = false;
				argBox.Get("ConchShip_PresetKey_FulongTravelWithLazuliVillageTriggered", ref fulongTravelWithLazuliVillageTriggered);
				result = (fulongTravelWithLazuliCityTriggered && (fulongTravelWithLazuliTownTriggered || fulongTravelWithLazuliStockadeTriggered || fulongTravelWithLazuliVillageTriggered));
			}
			return result;
		}

		// Token: 0x060022E2 RID: 8930 RVA: 0x001B6B68 File Offset: 0x001B4D68
		public static int FulongGetCharacterFavorTaiwu()
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			Location taiwuLocation = taiwu.GetLocation();
			MapBlockData taiwuBlockData = EventHelper.GetMapBlockData(taiwuLocation.AreaId, taiwuLocation.BlockId);
			bool flag = taiwuBlockData.CharacterSet != null;
			if (flag)
			{
				foreach (int charId in taiwuBlockData.CharacterSet)
				{
					GameData.Domains.Character.Character character;
					bool flag2 = DomainManager.Character.TryGetElement_Objects(charId, out character);
					if (flag2)
					{
						bool flag3 = character.GetOrganizationInfo().OrgTemplateId != 14;
						if (!flag3)
						{
							bool flag4 = DomainManager.Character.GetFavorabilityType(charId, taiwu.GetId()) >= 4;
							if (flag4)
							{
								return charId;
							}
						}
					}
				}
			}
			return -1;
		}

		// Token: 0x060022E3 RID: 8931 RVA: 0x001B6C50 File Offset: 0x001B4E50
		public static ItemKey FulongAdventureTwoGetItem()
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			ItemKey item = ItemKey.Invalid;
			int index = context.Random.Next(0, 10);
			bool flag = index < 3;
			if (flag)
			{
				item.ItemType = 7;
				item.TemplateId = (short)context.Random.Next(4, 7);
			}
			else
			{
				item.ItemType = 5;
				item.TemplateId = (short)context.Random.Next(70, 77);
			}
			return item;
		}

		// Token: 0x060022E4 RID: 8932 RVA: 0x001B6CD0 File Offset: 0x001B4ED0
		public static bool FulongSpecialInteractVisible(GameData.Domains.Character.Character character)
		{
			EventArgBox argBox = EventHelper.GetSectMainStoryEventArgBox(14);
			bool fulongSpecialInteractOpen = false;
			argBox.Get("ConchShip_PresetKey_FulongSpecialInteractOpen", ref fulongSpecialInteractOpen);
			bool flag = !fulongSpecialInteractOpen;
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				int fulongMessengerAppearTime = int.MaxValue;
				argBox.Get("ConchShip_PresetKey_FulongMessengerAppearTime", ref fulongMessengerAppearTime);
				bool isSecondState = EventHelper.GetGameDate() > fulongMessengerAppearTime + 3;
				OrganizationInfo orgInfo = character.GetOrganizationInfo();
				bool flag2 = !isSecondState;
				bool flag3 = flag2;
				if (flag3)
				{
					sbyte orgTemplateId = orgInfo.OrgTemplateId;
					if (orgTemplateId <= 29)
					{
						if (orgTemplateId != 16 && orgTemplateId != 29)
						{
							goto IL_94;
						}
					}
					else if (orgTemplateId != 33 && orgTemplateId != 35)
					{
						goto IL_94;
					}
					bool flag4 = true;
					goto IL_97;
					IL_94:
					flag4 = false;
					IL_97:
					flag3 = flag4;
				}
				bool flag5 = flag3;
				if (flag5)
				{
					result = EventHelper.IsCharacterAtOrganizationRange(character, orgInfo.OrgTemplateId);
				}
				else
				{
					bool flag6 = isSecondState && ((OrganizationDomain.IsSect(orgInfo.OrgTemplateId) && orgInfo.OrgTemplateId != 14) || orgInfo.OrgTemplateId == 16);
					result = flag6;
				}
			}
			return result;
		}

		// Token: 0x060022E5 RID: 8933 RVA: 0x001B6DD4 File Offset: 0x001B4FD4
		public static string FulongSpecialInteractNextEvent(GameData.Domains.Character.Character character)
		{
			EventArgBox argBox = EventHelper.GetSectMainStoryEventArgBox(14);
			int fulongMessengerAppearTime = int.MaxValue;
			argBox.Get("ConchShip_PresetKey_FulongMessengerAppearTime", ref fulongMessengerAppearTime);
			OrganizationInfo orgInfo = character.GetOrganizationInfo();
			sbyte behaviorType = character.GetBehaviorType();
			bool isSecondState = EventHelper.GetGameDate() > fulongMessengerAppearTime + 3;
			bool flag = orgInfo.OrgTemplateId == 16;
			string result;
			if (flag)
			{
				bool flag2 = behaviorType == 0;
				if (flag2)
				{
					result = (isSecondState ? "3e5b729e-63d8-4904-9ecf-76266613d95b" : "54591fc6-08a4-4c0b-8620-ba880a21727e");
				}
				else
				{
					bool flag3 = behaviorType == 1;
					if (flag3)
					{
						result = (isSecondState ? "e86f3b22-786f-43aa-9263-bf495115aa68" : "8925fd51-ac10-4618-95b0-a5e6a7cc8888");
					}
					else
					{
						bool flag4 = behaviorType == 2;
						if (flag4)
						{
							result = (isSecondState ? "d58e7e0d-a4b4-4f70-98fd-74f52ab48019" : "7e7be4f2-e808-4ae3-a362-11bb24ae3100");
						}
						else
						{
							bool flag5 = behaviorType == 3;
							if (flag5)
							{
								result = (isSecondState ? "d8d34bf7-021a-40d5-9f9f-b1e3485ab4ff" : "19b88a46-f36e-43dc-94dd-bf1ed4a7c4e1");
							}
							else
							{
								result = (isSecondState ? "2b4602c5-6bfd-4141-8280-cba2919cf36c" : "6d35bc38-d14d-4a09-8af8-1d514905fe40");
							}
						}
					}
				}
			}
			else
			{
				bool flag6 = behaviorType == 0;
				if (flag6)
				{
					result = (isSecondState ? "127c64b8-54c6-4c55-9acc-d0b20b06e670" : "b36ad879-64f8-4f2b-bdd3-9bcc87ea7bb6");
				}
				else
				{
					bool flag7 = behaviorType == 1;
					if (flag7)
					{
						result = (isSecondState ? "8d21d525-38b3-44a0-a6aa-b21e42f303c4" : "4f483d50-afef-478a-a8ce-3eb4736d2cb9");
					}
					else
					{
						bool flag8 = behaviorType == 2;
						if (flag8)
						{
							result = (isSecondState ? "681e63eb-d37e-4298-8d85-cea87daa2315" : "d1e99f71-7546-43bf-9b1c-814baf9a150e");
						}
						else
						{
							bool flag9 = behaviorType == 3;
							if (flag9)
							{
								result = (isSecondState ? "744e56ba-bfd4-4e22-8f29-23e4fe7b5551" : "6b35d868-8c13-41d9-93e3-1e1914a483a4");
							}
							else
							{
								result = (isSecondState ? "a8b2d819-e6bd-49a1-ab71-bad4b36b5208" : "c5fdedc5-04ac-4ae6-b65a-1c261c4e4916");
							}
						}
					}
				}
			}
			return result;
		}

		// Token: 0x060022E6 RID: 8934 RVA: 0x001B6F60 File Offset: 0x001B5160
		public static bool FulongCheckChickenFeather()
		{
			bool flag = !DomainManager.Extra.IsExtraTaskInProgress(338);
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
				Location taiwuLocation = taiwu.GetLocation();
				MapBlockData mapBlockData = DomainManager.Map.GetBlockData(taiwuLocation.AreaId, taiwuLocation.BlockId);
				Location taiwuRootLocation = mapBlockData.GetRootBlock().GetLocation();
				bool flag2 = DomainManager.Taiwu.GetTaiwuVillageLocation().Equals(taiwuRootLocation);
				if (flag2)
				{
					result = false;
				}
				else
				{
					Settlement settlement = DomainManager.Organization.GetSettlementByLocation(taiwuRootLocation);
					bool flag3 = settlement != null;
					if (flag3)
					{
						List<int> chickenIds = DomainManager.Building.GetLocationChicken(taiwuRootLocation);
						List<int> loseFeatherChickens = DomainManager.Extra.GetSectFulongLoseFeatherChickens();
						for (int i = 0; i < chickenIds.Count; i++)
						{
							int id = chickenIds[i];
							bool flag4 = loseFeatherChickens.Count <= 0 || !loseFeatherChickens.Contains(id);
							if (flag4)
							{
								return true;
							}
						}
					}
					result = false;
				}
			}
			return result;
		}

		// Token: 0x060022E7 RID: 8935 RVA: 0x001B706C File Offset: 0x001B526C
		public static bool FulongLazuliLetterCanTrigger()
		{
			bool flag = !DomainManager.Extra.IsExtraTaskInProgress(338);
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				Settlement settlement = DomainManager.Organization.GetSettlementByOrgTemplateId(14);
				GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
				Location taiwuLocation = taiwu.GetLocation();
				EventArgBox eventArgBox = DomainManager.Extra.GetSectMainStoryEventArgBox(14);
				bool triggered = false;
				eventArgBox.Get("ConchShip_PresetKey_FulongLazuliLetterTriggered", ref triggered);
				bool flag2 = triggered;
				if (flag2)
				{
					result = false;
				}
				else
				{
					bool flag3 = settlement.GetLocation().AreaId != taiwuLocation.AreaId;
					if (flag3)
					{
						result = true;
					}
					else
					{
						int moveCount = 0;
						eventArgBox.Get("ConchShip_PresetKey_FulongChickenKingLetterMoveCount", ref moveCount);
						bool flag4 = moveCount >= 4;
						if (flag4)
						{
							result = true;
						}
						else
						{
							EventHelper.SaveArgToSectMainStory<int>(14, "ConchShip_PresetKey_FulongChickenKingLetterMoveCount", ++moveCount);
							result = false;
						}
					}
				}
			}
			return result;
		}

		// Token: 0x060022E8 RID: 8936 RVA: 0x001B7144 File Offset: 0x001B5344
		public static void FulongCreateMessenger()
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			short templateId = SectMainStoryRelatedConstants.GetTemplateIdOfFixedCharacterCombatWith(820, 5, true);
			List<short> blocks = ObjectPool<List<short>>.Instance.Get();
			List<sbyte> settlementTemplateIds = new List<sbyte>
			{
				16,
				35,
				33,
				29
			};
			IntList characterIds = IntList.Create();
			for (int i = 0; i < settlementTemplateIds.Count; i++)
			{
				Location settlementLocation = DomainManager.Organization.GetSettlementByOrgTemplateId(settlementTemplateIds[i]).GetLocation();
				blocks.Clear();
				DomainManager.Map.GetSettlementBlocksAndAffiliatedBlocks(settlementLocation.AreaId, settlementLocation.BlockId, blocks);
				CollectionUtils.Shuffle<short>(context.Random, blocks);
				int count = EventHelper.GetRandom(3, 6);
				for (int j = 0; j < count; j++)
				{
					int characterId = EventHelper.CreateNonIntelligentCharacter(templateId);
					characterIds.Items.Add(characterId);
					GameData.Domains.Character.Character character = DomainManager.Character.GetElement_Objects(characterId);
					Location validBlockLocation = new Location(settlementLocation.AreaId, blocks[j]);
					EventHelper.MoveFixedEnemy(character, validBlockLocation);
				}
			}
			EventHelper.SaveArgToSectMainStory<IntList>(14, "ConchShip_PresetKey_FulongMessengerIdList", characterIds);
			ObjectPool<List<short>>.Instance.Return(blocks);
		}

		// Token: 0x060022E9 RID: 8937 RVA: 0x001B7294 File Offset: 0x001B5494
		public static void FulongRemoveMessengerAndZealot()
		{
			EventArgBox argBox = EventHelper.GetSectMainStoryEventArgBox(14);
			IntList characterIds = argBox.Get<IntList>("ConchShip_PresetKey_FulongMessengerIdList");
			bool flag = characterIds.Items != null;
			if (flag)
			{
				for (int i = 0; i < characterIds.Items.Count; i++)
				{
					int characterId = characterIds.Items[i];
					GameData.Domains.Character.Character character;
					bool flag2 = DomainManager.Character.TryGetElement_Objects(characterId, out character);
					if (flag2)
					{
						EventHelper.RemoveNonIntelligentCharacter(character);
					}
				}
			}
			DomainManager.Extra.RemoveAllFulongOutLaws(EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x060022EA RID: 8938 RVA: 0x001B7324 File Offset: 0x001B5524
		public static void ApplyTaiwuKillFulongOutLaw(int robberId)
		{
			DomainManager.Extra.ApplyTaiwuKillFulongOutLaw(EventHelper.Domain.MainThreadDataContext, robberId);
		}

		// Token: 0x060022EB RID: 8939 RVA: 0x001B7340 File Offset: 0x001B5540
		public static void ProcessFulongOutLawRobbing(int robberId, int victimId)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			DomainManager.Extra.ApplyFulongOutLawRobSucceed(context, robberId, victimId);
		}

		// Token: 0x060022EC RID: 8940 RVA: 0x001B7367 File Offset: 0x001B5567
		public static void ApplyTaiwuGetRobbedByFulongOutLaws(sbyte resourceType, int resourceValue, int robberId, int victimId)
		{
			DomainManager.Extra.ApplyTaiwuGetRobbedByFulongOutLaws(EventHelper.Domain.MainThreadDataContext, resourceType, resourceValue, robberId, victimId);
		}

		// Token: 0x060022ED RID: 8941 RVA: 0x001B7384 File Offset: 0x001B5584
		public static int FulongLazuliPersuadeSetCharacter()
		{
			Settlement settlement = DomainManager.Organization.GetSettlementByOrgTemplateId(14);
			List<int> members = new List<int>();
			settlement.GetMembers().GetAllMembers(members);
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			CollectionUtils.Shuffle<int>(context.Random, members);
			for (int i = 0; i < members.Count; i++)
			{
				int characterId = members[i];
				GameData.Domains.Character.Character character;
				bool flag = DomainManager.Character.TryGetElement_Objects(characterId, out character);
				if (flag)
				{
					bool flag2 = character.GetAgeGroup() < 2;
					if (!flag2)
					{
						bool flag3 = character.GetOrganizationInfo().Grade > 6;
						if (!flag3)
						{
							bool flag4 = character.IsActiveExternalRelationState(60);
							if (!flag4)
							{
								bool flag5 = character.GetKidnapperId() >= 0;
								if (!flag5)
								{
									bool flag6 = character.GetLegendaryBookOwnerState() == 3 || character.GetLegendaryBookOwnerState() == 2;
									if (!flag6)
									{
										bool flag7 = character.IsCompletelyInfected();
										if (!flag7)
										{
											return characterId;
										}
									}
								}
							}
						}
					}
				}
			}
			return -1;
		}

		// Token: 0x060022EE RID: 8942 RVA: 0x001B7494 File Offset: 0x001B5694
		public static void FulongCreateAdvenrureThree()
		{
			EventHelper.SaveArgToSectMainStory<bool>(14, "ConchShip_PresetKey_FulongSpecialInteractOpen", false);
			DomainManager.TaiwuEvent.AddTempDynamicAction<FulongStoryAdventureThreeTriggerAction>(EventHelper.Domain.MainThreadDataContext, new FulongStoryAdventureThreeTriggerAction());
		}

		// Token: 0x060022EF RID: 8943 RVA: 0x001B74C0 File Offset: 0x001B56C0
		public static void FulongAdvenrureThreeSetCharacter(EventArgBox argBox)
		{
			GameData.Domains.Character.Character friend = argBox.GetCharacter("MajorCharacter_0_1");
			bool flag = EventHelper.IsTemporaryIntelligentCharacter(friend.GetId());
			if (flag)
			{
				EventHelper.KeepTemporaryCharacterAfterAdventure(friend);
			}
			argBox.Set("FulongFriend1", friend.GetId());
			GameData.Domains.Character.Character friend2 = argBox.GetCharacter("MajorCharacter_0_2");
			bool flag2 = EventHelper.IsTemporaryIntelligentCharacter(friend2.GetId());
			if (flag2)
			{
				EventHelper.KeepTemporaryCharacterAfterAdventure(friend2);
			}
			argBox.Set("FulongFriend2", friend2.GetId());
			GameData.Domains.Character.Character friend3 = argBox.GetCharacter("MajorCharacter_0_3");
			bool flag3 = EventHelper.IsTemporaryIntelligentCharacter(friend3.GetId());
			if (flag3)
			{
				EventHelper.KeepTemporaryCharacterAfterAdventure(friend3);
			}
			argBox.Set("FulongFriend3", friend3.GetId());
		}

		// Token: 0x060022F0 RID: 8944 RVA: 0x001B7570 File Offset: 0x001B5770
		public static void FulongAdventureThreePathEventSetCharacterId(EventArgBox argBox, int count)
		{
			bool flag = count == 0;
			GameData.Domains.Character.Character character;
			if (flag)
			{
				character = argBox.GetCharacter("MajorCharacter_0_4");
			}
			else
			{
				bool flag2 = count == 1;
				if (flag2)
				{
					character = argBox.GetCharacter("MajorCharacter_0_5");
				}
				else
				{
					bool flag3 = count == 2;
					if (flag3)
					{
						character = argBox.GetCharacter("MajorCharacter_0_6");
					}
					else
					{
						character = argBox.GetCharacter("MajorCharacter_0_7");
					}
				}
			}
			argBox.Set("CharacterId", character.GetId());
		}

		// Token: 0x060022F1 RID: 8945 RVA: 0x001B75E0 File Offset: 0x001B57E0
		public static bool FulongLazuliIsFriend()
		{
			EventArgBox argBox = EventHelper.GetSectMainStoryEventArgBox(14);
			bool fulongLazuliIsFriend = false;
			return argBox.Get("ConchShip_PresetKey_FulongLazuliIsFriend", ref fulongLazuliIsFriend) && fulongLazuliIsFriend;
		}

		// Token: 0x060022F2 RID: 8946 RVA: 0x001B7614 File Offset: 0x001B5814
		public static void FulongLazuliAddFavorability()
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			GameData.Domains.Character.Character reudhLazuli = EventHelper.GetOrCreateFixedCharacterByTemplateId(810);
			EventHelper.DirectlyChangeFavorabilityOptionalStoryEvent(reudhLazuli, taiwu, SectMainStoryRelatedConstants.FulongLazuliFavorabilityAdd);
		}

		// Token: 0x060022F3 RID: 8947 RVA: 0x001B7648 File Offset: 0x001B5848
		public static void FulongLazuliSetFavorability()
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			GameData.Domains.Character.Character reudhLazuli = EventHelper.GetOrCreateFixedCharacterByTemplateId(810);
			sbyte favorabilityType = EventHelper.GetFavorabilityType(reudhLazuli, taiwu);
			bool flag = favorabilityType < 5;
			if (flag)
			{
				sbyte value = FavorabilityType.GetFavorabilityType(5);
				EventHelper.DirectlySetFavorabilities(reudhLazuli.GetId(), taiwu.GetId(), (short)value, (short)value);
			}
		}

		// Token: 0x060022F4 RID: 8948 RVA: 0x001B769C File Offset: 0x001B589C
		public static void FulongEndEffect(bool goodEnd, bool adventureComplete = true)
		{
			EventHelper.FinishAllTaskInChain(52);
			EventHelper.SaveArgToSectMainStory<bool>(14, "ConchShip_PresetKey_FulongChickenKingLeaveHome", false);
			if (adventureComplete)
			{
				EventHelper.SaveArgToSectMainStory<bool>(14, "ConchShip_PresetKey_FulongSpecialFuncOpen", true);
			}
			EventHelper.SaveArgToSectMainStory<int>(14, goodEnd ? "ConchShip_PresetKey_SectMainStoryFulongProsperousEndDate" : "ConchShip_PresetKey_SectMainStoryFulongFailingEndDate", EventHelper.GetGameDate() + (goodEnd ? 1 : 1));
			bool flag = !goodEnd;
			if (flag)
			{
				EventHelper.FulongDefeatEffect();
			}
		}

		// Token: 0x060022F5 RID: 8949 RVA: 0x001B7708 File Offset: 0x001B5908
		public static void FulongCombatWonEffect()
		{
			EventHelper.TriggerExtraTask(52, 341);
			GameData.Domains.Character.Character reudhLazuliFeather = EventHelper.GetOrCreateFixedCharacterByTemplateId(812);
			Settlement settlement = DomainManager.Organization.GetSettlementByOrgTemplateId(14);
			List<MapBlockData> mapBlockDatas = ObjectPool<List<MapBlockData>>.Instance.Get();
			DomainManager.Map.GetLocationByDistance(settlement.GetLocation(), 6, 6, ref mapBlockDatas);
			Location targetLocation = Location.Invalid;
			for (int i = 0; i < mapBlockDatas.Count; i++)
			{
				MapBlockData mapBlockData = mapBlockDatas[i];
				MapBlockItem config = mapBlockData.GetConfig();
				bool flag = config.TemplateId != 124 && config.SubType != EMapBlockSubType.DLCLoong;
				if (flag)
				{
					targetLocation = mapBlockData.GetLocation();
				}
			}
			bool flag2 = targetLocation.Equals(Location.Invalid);
			if (flag2)
			{
				targetLocation = mapBlockDatas.GetRandom(EventHelper.Domain.MainThreadDataContext.Random).GetLocation();
			}
			EventHelper.MoveFixedCharacter(reudhLazuliFeather, targetLocation);
			ObjectPool<List<MapBlockData>>.Instance.Return(mapBlockDatas);
		}

		// Token: 0x060022F6 RID: 8950 RVA: 0x001B7800 File Offset: 0x001B5A00
		public static void FulongDefeatEffect()
		{
			GameData.Domains.Character.Character reudhLazuli = EventHelper.GetOrCreateFixedCharacterByTemplateId(810);
			EventHelper.MoveFixedCharacter(reudhLazuli, Location.Invalid);
			GameData.Domains.Character.Character noSeventySeven = EventHelper.GetOrCreateFixedCharacterByTemplateId(813);
			EventHelper.MoveFixedCharacter(noSeventySeven, Location.Invalid);
		}

		// Token: 0x060022F7 RID: 8951 RVA: 0x001B783C File Offset: 0x001B5A3C
		public static void FulongLazuliFavorabilityInherit(GameData.Domains.Character.Character character)
		{
			GameData.Domains.Character.Character reudhLazuli = EventHelper.GetOrCreateFixedCharacterByTemplateId(810);
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			short favorability = EventHelper.GetFavorability(reudhLazuli, taiwu);
			EventHelper.DirectlySetFavorabilities(character.GetId(), taiwu.GetId(), favorability, favorability);
		}

		// Token: 0x060022F8 RID: 8952 RVA: 0x001B787C File Offset: 0x001B5A7C
		public static void FulongEndTryRemoveFixedCharacter()
		{
			for (short i = 810; i <= 819; i += 1)
			{
				bool flag = i == 812;
				if (!flag)
				{
					GameData.Domains.Character.Character character = EventHelper.GetOrCreateFixedCharacterByTemplateId(i);
					EventHelper.RemoveNonIntelligentCharacter(character);
				}
			}
		}

		// Token: 0x060022F9 RID: 8953 RVA: 0x001B78C4 File Offset: 0x001B5AC4
		public static void FulongAddLoseFeatherChicken(int chickenId, short chickenTemplateId)
		{
			List<int> loseFeatherChickens = DomainManager.Extra.GetSectFulongLoseFeatherChickens();
			loseFeatherChickens.Add(chickenId);
			DomainManager.Extra.SetSectFulongLoseFeatherChickens(loseFeatherChickens, EventHelper.Domain.MainThreadDataContext);
			EventArgBox eventArgBox = DomainManager.Extra.GetSectMainStoryEventArgBox(14);
			GameData.Utilities.ShortList chickenTemplateIdList = eventArgBox.Get<GameData.Utilities.ShortList>("ConchShip_PresetKey_FulongChickenFeatherDropList");
			bool flag = chickenTemplateIdList.Items == null;
			if (flag)
			{
				chickenTemplateIdList = GameData.Utilities.ShortList.Create();
			}
			chickenTemplateIdList.Items.Add(chickenTemplateId);
			DomainManager.Extra.SaveArgToSectMainStoryEventArgBox<GameData.Utilities.ShortList>(EventHelper.Domain.MainThreadDataContext, 14, "ConchShip_PresetKey_FulongChickenFeatherDropList", chickenTemplateIdList);
		}

		// Token: 0x060022FA RID: 8954 RVA: 0x001B7954 File Offset: 0x001B5B54
		public static bool FulongChickenLoseFeather(int chickenId)
		{
			List<int> loseFeatherChickens = DomainManager.Extra.GetSectFulongLoseFeatherChickens();
			return loseFeatherChickens.Contains(chickenId);
		}

		// Token: 0x060022FB RID: 8955 RVA: 0x001B7978 File Offset: 0x001B5B78
		public static void FulongChickenLoseFeatherSaveSettlement(int characterId)
		{
			GameData.Domains.Character.Character character = DomainManager.Character.GetElement_Objects(characterId);
			EventArgBox eventArgBox = DomainManager.Extra.GetSectMainStoryEventArgBox(14);
			GameData.Utilities.ShortList triggeredSettlements = eventArgBox.Get<GameData.Utilities.ShortList>("ConchShip_PresetKey_FulongLoseChickenFeatherInteractionSettlements");
			bool flag = triggeredSettlements.Items == null;
			if (flag)
			{
				triggeredSettlements = GameData.Utilities.ShortList.Create();
			}
			triggeredSettlements.Items.Add(character.GetOrganizationInfo().SettlementId);
			EventHelper.SaveArgToSectMainStory<GameData.Utilities.ShortList>(14, "ConchShip_PresetKey_FulongLoseChickenFeatherInteractionSettlements", triggeredSettlements);
		}

		// Token: 0x060022FC RID: 8956 RVA: 0x001B79E4 File Offset: 0x001B5BE4
		public static void FulongChickenKingLoseFeather()
		{
			List<int> chickens = DomainManager.Extra.GetSectFulongLoseFeatherChickens();
			chickens.Add(DomainManager.Building.GetChickenKingId());
			EventHelper.SaveArgToSectMainStory<string>(14, "ConchShip_PresetKey_FulongChickenFeatherLackCount", (SectMainStoryRelatedConstants.FulongChickenFeatherNeedCount - chickens.Count).ToString());
			DomainManager.Extra.SetSectFulongLoseFeatherChickens(chickens, EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x060022FD RID: 8957 RVA: 0x001B7A48 File Offset: 0x001B5C48
		public static int FulongGetLoseChickenFeatherCount()
		{
			List<int> chickens = DomainManager.Extra.GetSectFulongLoseFeatherChickens();
			EventHelper.SaveArgToSectMainStory<string>(14, "ConchShip_PresetKey_FulongChickenFeatherLackCount", (SectMainStoryRelatedConstants.FulongChickenFeatherNeedCount - chickens.Count).ToString());
			return chickens.Count;
		}

		// Token: 0x060022FE RID: 8958 RVA: 0x001B7A8C File Offset: 0x001B5C8C
		public static bool FulongCanUseTeammateLoseChickenFeather()
		{
			HashSet<int> groupCharIds = DomainManager.Taiwu.GetGroupCharIds().GetCollection();
			int count = 0;
			foreach (int charId in groupCharIds)
			{
				bool flag = charId == DomainManager.Taiwu.GetTaiwuCharId();
				if (!flag)
				{
					GameData.Domains.Character.Character character = DomainManager.Character.GetElement_Objects(charId);
					bool flag2 = character.GetAgeGroup() > 0;
					if (flag2)
					{
						count++;
					}
				}
			}
			return count >= 2;
		}

		// Token: 0x060022FF RID: 8959 RVA: 0x001B7B34 File Offset: 0x001B5D34
		public static List<string> FulongGetChickenText(int index)
		{
			EventArgBox eventArgBox = DomainManager.Extra.GetSectMainStoryEventArgBox(14);
			int eventA = 0;
			int eventB = 0;
			int eventC = 0;
			eventArgBox.Get("ConchShip_PresetKey_FulongLazuliLetterEventA", ref eventA);
			eventArgBox.Get("ConchShip_PresetKey_FulongLazuliLetterEventB", ref eventB);
			eventArgBox.Get("ConchShip_PresetKey_FulongLazuliLetterEventC", ref eventC);
			List<string> texts = new List<string>();
			bool flag = index == 1;
			if (flag)
			{
				if (!true)
				{
				}
				string text2;
				switch (eventA)
				{
				case 0:
					text2 = "<Language Key=Event_SectStoryFulong_ChickenKing_1_1/>";
					break;
				case 1:
					text2 = "<Language Key=Event_SectStoryFulong_ChickenKing_1_2/>";
					break;
				case 2:
					text2 = "<Language Key=Event_SectStoryFulong_ChickenKing_1_3/>";
					break;
				default:
				{
					DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(20, 1);
					defaultInterpolatedStringHandler.AppendLiteral("Unsupported eventA: ");
					defaultInterpolatedStringHandler.AppendFormatted<int>(eventA);
					throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
				}
				}
				if (!true)
				{
				}
				string text = text2;
				texts.Add(text);
				if (!true)
				{
				}
				switch (eventB)
				{
				case 0:
					text2 = "<Language Key=Event_SectStoryFulong_ChickenKing_1_4/>";
					break;
				case 1:
					text2 = "<Language Key=Event_SectStoryFulong_ChickenKing_1_5/>";
					break;
				case 2:
					text2 = "<Language Key=Event_SectStoryFulong_ChickenKing_1_6/>";
					break;
				default:
				{
					DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(20, 1);
					defaultInterpolatedStringHandler.AppendLiteral("Unsupported eventA: ");
					defaultInterpolatedStringHandler.AppendFormatted<int>(eventB);
					throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
				}
				}
				if (!true)
				{
				}
				text = text2;
				texts.Add(text);
				if (!true)
				{
				}
				switch (eventC)
				{
				case 0:
					text2 = "<Language Key=Event_SectStoryFulong_ChickenKing_1_7/>";
					break;
				case 1:
					text2 = "<Language Key=Event_SectStoryFulong_ChickenKing_1_8/>";
					break;
				case 2:
					text2 = "<Language Key=Event_SectStoryFulong_ChickenKing_1_9/>";
					break;
				default:
				{
					DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(20, 1);
					defaultInterpolatedStringHandler.AppendLiteral("Unsupported eventA: ");
					defaultInterpolatedStringHandler.AppendFormatted<int>(eventC);
					throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
				}
				}
				if (!true)
				{
				}
				text = text2;
				texts.Add(text);
			}
			else
			{
				bool flag2 = index == 2;
				if (flag2)
				{
					if (!true)
					{
					}
					string text2;
					switch (eventA)
					{
					case 0:
						text2 = "<Language Key=Event_SectStoryFulong_ChickenKing_2_1/>";
						break;
					case 1:
						text2 = "<Language Key=Event_SectStoryFulong_ChickenKing_2_2/>";
						break;
					case 2:
						text2 = "<Language Key=Event_SectStoryFulong_ChickenKing_2_3/>";
						break;
					default:
					{
						DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(20, 1);
						defaultInterpolatedStringHandler.AppendLiteral("Unsupported eventA: ");
						defaultInterpolatedStringHandler.AppendFormatted<int>(eventA);
						throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
					}
					}
					if (!true)
					{
					}
					string text = text2;
					texts.Add(text);
					if (!true)
					{
					}
					switch (eventB)
					{
					case 0:
						text2 = "<Language Key=Event_SectStoryFulong_ChickenKing_2_4/>";
						break;
					case 1:
						text2 = "<Language Key=Event_SectStoryFulong_ChickenKing_2_5/>";
						break;
					case 2:
						text2 = "<Language Key=Event_SectStoryFulong_ChickenKing_2_6/>";
						break;
					default:
					{
						DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(20, 1);
						defaultInterpolatedStringHandler.AppendLiteral("Unsupported eventA: ");
						defaultInterpolatedStringHandler.AppendFormatted<int>(eventB);
						throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
					}
					}
					if (!true)
					{
					}
					text = text2;
					texts.Add(text);
					if (!true)
					{
					}
					switch (eventC)
					{
					case 0:
						text2 = "<Language Key=Event_SectStoryFulong_ChickenKing_2_7/>";
						break;
					case 1:
						text2 = "<Language Key=Event_SectStoryFulong_ChickenKing_2_8/>";
						break;
					case 2:
						text2 = "<Language Key=Event_SectStoryFulong_ChickenKing_2_9/>";
						break;
					default:
					{
						DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(20, 1);
						defaultInterpolatedStringHandler.AppendLiteral("Unsupported eventA: ");
						defaultInterpolatedStringHandler.AppendFormatted<int>(eventC);
						throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
					}
					}
					if (!true)
					{
					}
					text = text2;
					texts.Add(text);
				}
				else
				{
					bool flag3 = index == 3;
					if (flag3)
					{
						if (!true)
						{
						}
						string text2;
						if (eventA != 0)
						{
							if (eventA != 1)
							{
								DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(20, 1);
								defaultInterpolatedStringHandler.AppendLiteral("Unsupported eventA: ");
								defaultInterpolatedStringHandler.AppendFormatted<int>(eventA);
								throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
							}
							text2 = "<Language Key=Event_SectStoryFulong_ChickenKing_3_2/>";
						}
						else
						{
							text2 = "<Language Key=Event_SectStoryFulong_ChickenKing_3_1/>";
						}
						if (!true)
						{
						}
						string text = text2;
						texts.Add(text);
						if (!true)
						{
						}
						if (eventB != 0)
						{
							if (eventB != 1)
							{
								DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(20, 1);
								defaultInterpolatedStringHandler.AppendLiteral("Unsupported eventA: ");
								defaultInterpolatedStringHandler.AppendFormatted<int>(eventB);
								throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
							}
							text2 = "<Language Key=Event_SectStoryFulong_ChickenKing_3_4/>";
						}
						else
						{
							text2 = "<Language Key=Event_SectStoryFulong_ChickenKing_3_3/>";
						}
						if (!true)
						{
						}
						text = text2;
						texts.Add(text);
						if (!true)
						{
						}
						if (eventC != 0)
						{
							if (eventC != 1)
							{
								DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(20, 1);
								defaultInterpolatedStringHandler.AppendLiteral("Unsupported eventA: ");
								defaultInterpolatedStringHandler.AppendFormatted<int>(eventC);
								throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
							}
							text2 = "<Language Key=Event_SectStoryFulong_ChickenKing_3_6/>";
						}
						else
						{
							text2 = "<Language Key=Event_SectStoryFulong_ChickenKing_3_5/>";
						}
						if (!true)
						{
						}
						text = text2;
						texts.Add(text);
					}
					else
					{
						bool flag4 = index == 4;
						if (flag4)
						{
							if (!true)
							{
							}
							string text2;
							if (eventA != 0)
							{
								if (eventA != 1)
								{
									DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(20, 1);
									defaultInterpolatedStringHandler.AppendLiteral("Unsupported eventA: ");
									defaultInterpolatedStringHandler.AppendFormatted<int>(eventA);
									throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
								}
								text2 = "<Language Key=Event_SectStoryFulong_ChickenKing_4_2/>";
							}
							else
							{
								text2 = "<Language Key=Event_SectStoryFulong_ChickenKing_4_1/>";
							}
							if (!true)
							{
							}
							string text = text2;
							texts.Add(text);
							if (!true)
							{
							}
							if (eventB != 0)
							{
								if (eventB != 1)
								{
									DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(20, 1);
									defaultInterpolatedStringHandler.AppendLiteral("Unsupported eventA: ");
									defaultInterpolatedStringHandler.AppendFormatted<int>(eventB);
									throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
								}
								text2 = "<Language Key=Event_SectStoryFulong_ChickenKing_4_4/>";
							}
							else
							{
								text2 = "<Language Key=Event_SectStoryFulong_ChickenKing_4_3/>";
							}
							if (!true)
							{
							}
							text = text2;
							texts.Add(text);
							if (!true)
							{
							}
							if (eventC != 0)
							{
								if (eventC != 1)
								{
									DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(20, 1);
									defaultInterpolatedStringHandler.AppendLiteral("Unsupported eventA: ");
									defaultInterpolatedStringHandler.AppendFormatted<int>(eventC);
									throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
								}
								text2 = "<Language Key=Event_SectStoryFulong_ChickenKing_4_6/>";
							}
							else
							{
								text2 = "<Language Key=Event_SectStoryFulong_ChickenKing_4_5/>";
							}
							if (!true)
							{
							}
							text = text2;
							texts.Add(text);
						}
					}
				}
			}
			return texts;
		}

		// Token: 0x06002300 RID: 8960 RVA: 0x001B80C8 File Offset: 0x001B62C8
		public static bool FulongChickenNpcRandomWordTriggered(GameData.Domains.Character.Character character)
		{
			bool flag = !EventHelper.IsExtraTaskInProgress(338);
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				OrganizationInfo organizationInfo = character.GetOrganizationInfo();
				Settlement settlement = DomainManager.Organization.GetSettlement(organizationInfo.SettlementId);
				List<int> chickenIdList = DomainManager.Building.GetSettlementChickenIdList(settlement.GetLocation());
				bool flag2 = chickenIdList.Count == 0;
				if (flag2)
				{
					result = false;
				}
				else
				{
					List<int> loseFeatherChickens = DomainManager.Extra.GetSectFulongLoseFeatherChickens();
					for (int i = 0; i < chickenIdList.Count; i++)
					{
						int chickenId = chickenIdList[i];
						bool flag3 = loseFeatherChickens.Contains(chickenId);
						if (flag3)
						{
							return true;
						}
					}
					result = false;
				}
			}
			return result;
		}

		// Token: 0x06002301 RID: 8961 RVA: 0x001B817C File Offset: 0x001B637C
		public static bool FulongProsperousNpcRandomWordTriggered(GameData.Domains.Character.Character character)
		{
			EventArgBox sectArgBox = EventHelper.GetSectMainStoryEventArgBox(14);
			bool fulongSelectFalling = false;
			sectArgBox.Get("ConchShip_PresetKey_FulongSelectFalling", ref fulongSelectFalling);
			bool flag = fulongSelectFalling;
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				int date = int.MaxValue;
				bool flag2 = sectArgBox.Get("ConchShip_PresetKey_FulongSelectFallingDate", ref date) && date <= EventHelper.GetGameDate() + 2;
				result = flag2;
			}
			return result;
		}

		// Token: 0x06002302 RID: 8962 RVA: 0x001B81E4 File Offset: 0x001B63E4
		public static bool FulongUnfinishedSpecialOptionCanShow()
		{
			int currentTask = DomainManager.Extra.GetExtraTaskChainCurrentTask(52);
			return currentTask - 332 <= 8 || currentTask - 344 <= 1;
		}

		// Token: 0x06002303 RID: 8963 RVA: 0x001B822B File Offset: 0x001B642B
		public static void AddJieqingMaskCharId(int charId)
		{
			DomainManager.TaiwuEvent.AddJieqingMaskCharId(charId);
		}

		// Token: 0x06002304 RID: 8964 RVA: 0x001B823A File Offset: 0x001B643A
		public static void RemoveJieqingMaskCharId(int charId)
		{
			DomainManager.TaiwuEvent.RemoveJieqingMaskCharId(charId);
		}

		// Token: 0x06002305 RID: 8965 RVA: 0x001B824C File Offset: 0x001B644C
		public static void JingangMonkWasRobbedEffect()
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			taiwu.AddFeature(EventHelper.Domain.MainThreadDataContext, 483, false);
			EventHelper.TriggerExtraTask(35, 182);
			DomainManager.Extra.SaveArgToSectMainStoryEventArgBox<int>(EventHelper.Domain.MainThreadDataContext, 11, "ConchShip_PresetKey_JingangMonkMurderedTriggeredDate", EventHelper.GetGameDate());
		}

		// Token: 0x06002306 RID: 8966 RVA: 0x001B82AC File Offset: 0x001B64AC
		public static void JingangWardOffEvilEffect()
		{
			EventHelper.JingangCreateMonkSoul();
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			taiwu.RemoveFeature(EventHelper.Domain.MainThreadDataContext, 483);
			EventHelper.TriggerExtraTask(35, 183);
		}

		// Token: 0x06002307 RID: 8967 RVA: 0x001B82F0 File Offset: 0x001B64F0
		public static void JingangCreateMonkSoul()
		{
			GameData.Domains.Character.Character monk = EventHelper.GetOrCreateFixedCharacterByTemplateId(748);
			DomainManager.Character.SectMainStoryJingangCreateDeadMonk(EventHelper.Domain.MainThreadDataContext, monk);
		}

		// Token: 0x06002308 RID: 8968 RVA: 0x001B8320 File Offset: 0x001B6520
		public static bool JingangCanTriggerWardOffEvil()
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			bool flag = !DomainManager.Extra.IsExtraTaskInProgress(182);
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				Location taiwuLocation = taiwu.GetLocation();
				bool flag2 = !taiwuLocation.IsValid();
				if (flag2)
				{
					result = false;
				}
				else
				{
					sbyte stateTemplateId = DomainManager.Map.GetStateTemplateIdByAreaId(taiwuLocation.AreaId);
					bool flag3 = stateTemplateId != 11;
					if (flag3)
					{
						result = false;
					}
					else
					{
						bool flag4 = DomainManager.Map.IsAreaBroken(taiwuLocation.AreaId);
						if (flag4)
						{
							result = false;
						}
						else
						{
							MapBlockData mapBlockData = DomainManager.Map.GetBlockData(taiwuLocation.AreaId, taiwuLocation.BlockId);
							bool flag5 = DomainManager.Map.IsBlockSpecial(mapBlockData, true);
							if (flag5)
							{
								result = false;
							}
							else
							{
								EMapBlockSubType subType = mapBlockData.GetConfig().SubType;
								bool flag6 = subType >= EMapBlockSubType.Ruin && subType <= EMapBlockSubType.None;
								if (flag6)
								{
									result = false;
								}
								else
								{
									bool flag7 = !EventHelper.IsCharacterAtOrganizationRange(taiwu, 11);
									if (flag7)
									{
										EventArgBox argBox = EventHelper.GetSectMainStoryEventArgBox(11);
										int moveCount = 0;
										argBox.Get("ConchShip_PresetKey_JingangAfterMonkMurderedTriggeredMoveCount", ref moveCount);
										EventHelper.SaveArgToSectMainStory<int>(11, "ConchShip_PresetKey_JingangAfterMonkMurderedTriggeredMoveCount", ++moveCount);
										bool flag8 = moveCount >= 10;
										if (flag8)
										{
											return true;
										}
									}
									result = false;
								}
							}
						}
					}
				}
			}
			return result;
		}

		// Token: 0x06002309 RID: 8969 RVA: 0x001B8478 File Offset: 0x001B6678
		public static bool JingangCanTriggerJingangPeopleSuffering()
		{
			bool flag = !DomainManager.Extra.IsExtraTaskInProgress(185) && !DomainManager.Extra.IsExtraTaskInProgress(179);
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
				Location taiwuLocation = taiwu.GetLocation();
				short kunlunMountainAreaId = DomainManager.Map.GetAreaIdByAreaTemplateId(26);
				bool flag2 = taiwuLocation.AreaId != kunlunMountainAreaId;
				if (flag2)
				{
					result = false;
				}
				else
				{
					List<short> settlementIds = ObjectPool<List<short>>.Instance.Get();
					List<short> blockIds = ObjectPool<List<short>>.Instance.Get();
					DomainManager.Map.GetAreaSettlementIds(kunlunMountainAreaId, settlementIds, true, false);
					for (int i = 0; i < settlementIds.Count; i++)
					{
						Settlement settlement = DomainManager.Organization.GetSettlement(settlementIds[i]);
						Location settlementLocation = settlement.GetLocation();
						blockIds.Clear();
						DomainManager.Map.GetSettlementBlocksAndAffiliatedBlocks(settlementLocation.AreaId, settlementLocation.BlockId, blockIds);
						bool flag3 = blockIds.Contains(taiwuLocation.BlockId);
						if (flag3)
						{
							ObjectPool<List<short>>.Instance.Return(blockIds);
							ObjectPool<List<short>>.Instance.Return(settlementIds);
							return true;
						}
					}
					ObjectPool<List<short>>.Instance.Return(blockIds);
					ObjectPool<List<short>>.Instance.Return(settlementIds);
					result = false;
				}
			}
			return result;
		}

		// Token: 0x0600230A RID: 8970 RVA: 0x001B85CC File Offset: 0x001B67CC
		public static void JingangSavePeopleSufferingCount()
		{
			EventArgBox sectArgBox = EventHelper.GetSectMainStoryEventArgBox(11);
			int count = 0;
			sectArgBox.Get("ConchShip_PresetKey_JingangTriggeredPeopleSufferingCount", ref count);
			EventHelper.SaveArgToSectMainStory<int>(11, "ConchShip_PresetKey_JingangTriggeredPeopleSufferingCount", ++count);
		}

		// Token: 0x0600230B RID: 8971 RVA: 0x001B8604 File Offset: 0x001B6804
		public static int JingangGetPeopleSufferingSettlementIdsCount()
		{
			EventArgBox sectArgBox = EventHelper.GetSectMainStoryEventArgBox(11);
			int count = 0;
			sectArgBox.Get("ConchShip_PresetKey_JingangTriggeredPeopleSufferingCount", ref count);
			return count;
		}

		// Token: 0x0600230C RID: 8972 RVA: 0x001B8630 File Offset: 0x001B6830
		public static void JingangAddPersuadeVillagerCount()
		{
			EventArgBox sectArgBox = EventHelper.GetSectMainStoryEventArgBox(11);
			int count = 0;
			sectArgBox.Get("ConchShip_PresetKey_JingangPersuadeVillagerCount", ref count);
			count++;
			EventHelper.SaveArgToSectMainStory<int>(11, "ConchShip_PresetKey_JingangPersuadeVillagerCount", count);
		}

		// Token: 0x0600230D RID: 8973 RVA: 0x001B8668 File Offset: 0x001B6868
		public static bool JingangPersuadeIsSuccess()
		{
			EventArgBox sectArgBox = EventHelper.GetSectMainStoryEventArgBox(11);
			int count = 0;
			sectArgBox.Get("ConchShip_PresetKey_JingangPersuadeVillagerCount", ref count);
			return count >= 1;
		}

		// Token: 0x0600230E RID: 8974 RVA: 0x001B869C File Offset: 0x001B689C
		public static bool JingangVillagerCanInteraction(int charId)
		{
			GameData.Domains.Character.Character character;
			DomainManager.Character.TryGetElement_Objects(charId, out character);
			OrganizationInfo organizationInfo = character.GetOrganizationInfo();
			OrganizationItem config = Organization.Instance[organizationInfo.OrgTemplateId];
			bool isSect = config.IsSect;
			bool result;
			if (isSect)
			{
				result = false;
			}
			else
			{
				List<short> settlementIds = ObjectPool<List<short>>.Instance.Get();
				short areaId = DomainManager.Map.GetAreaIdByAreaTemplateId(26);
				DomainManager.Map.GetAreaSettlementIds(areaId, settlementIds, true, false);
				bool flag = !settlementIds.Contains(organizationInfo.SettlementId);
				if (flag)
				{
					ObjectPool<List<short>>.Instance.Return(settlementIds);
					result = false;
				}
				else
				{
					EventArgBox sectArgBox = DomainManager.Extra.GetSectMainStoryEventArgBox(11);
					IntList triggeredInteractionVillagers;
					sectArgBox.Get<IntList>("ConchShip_PresetKey_JingangTriggeredInteractionVillagers", out triggeredInteractionVillagers);
					bool flag2 = triggeredInteractionVillagers.Items != null && triggeredInteractionVillagers.Items.Contains(charId);
					if (flag2)
					{
						ObjectPool<List<short>>.Instance.Return(settlementIds);
						result = false;
					}
					else
					{
						List<int> items = triggeredInteractionVillagers.Items;
						bool flag3 = items != null && items.Count >= 5;
						if (flag3)
						{
							ObjectPool<List<short>>.Instance.Return(settlementIds);
							result = false;
						}
						else
						{
							ObjectPool<List<short>>.Instance.Return(settlementIds);
							result = (DomainManager.Extra.IsExtraTaskInProgress(179) || DomainManager.Extra.IsExtraTaskInProgress(186) || DomainManager.Extra.IsExtraTaskInProgress(180) || DomainManager.Extra.IsExtraTaskInProgress(181) || DomainManager.Extra.IsExtraTaskInProgress(187) || DomainManager.Extra.IsExtraTaskInProgress(188) || DomainManager.Extra.IsExtraTaskInProgress(189) || DomainManager.Extra.IsExtraTaskInProgress(190) || DomainManager.Extra.IsExtraTaskInProgress(191) || DomainManager.Extra.IsExtraTaskInProgress(192));
						}
					}
				}
			}
			return result;
		}

		// Token: 0x0600230F RID: 8975 RVA: 0x001B8884 File Offset: 0x001B6A84
		public static void JingangAddVillagerInteraction(int charId)
		{
			EventArgBox sectArgBox = DomainManager.Extra.GetSectMainStoryEventArgBox(11);
			IntList triggeredInteractionVillagers;
			sectArgBox.Get<IntList>("ConchShip_PresetKey_JingangTriggeredInteractionVillagers", out triggeredInteractionVillagers);
			bool flag = triggeredInteractionVillagers.Items == null;
			if (flag)
			{
				triggeredInteractionVillagers = IntList.Create();
			}
			triggeredInteractionVillagers.Items.Add(charId);
			EventHelper.SaveArgToSectMainStory<IntList>(11, "ConchShip_PresetKey_JingangTriggeredInteractionVillagers", triggeredInteractionVillagers);
		}

		// Token: 0x06002310 RID: 8976 RVA: 0x001B88DC File Offset: 0x001B6ADC
		public static int JingangGetVillagerInteractionCount()
		{
			EventArgBox sectArgBox = DomainManager.Extra.GetSectMainStoryEventArgBox(11);
			IntList triggeredInteractionVillagers;
			sectArgBox.Get<IntList>("ConchShip_PresetKey_JingangTriggeredInteractionVillagers", out triggeredInteractionVillagers);
			bool flag = triggeredInteractionVillagers.Items == null;
			int result;
			if (flag)
			{
				result = 0;
			}
			else
			{
				result = triggeredInteractionVillagers.Items.Count;
			}
			return result;
		}

		// Token: 0x06002311 RID: 8977 RVA: 0x001B8928 File Offset: 0x001B6B28
		public static bool JingangArriveJingangCanTrigger()
		{
			bool flag = !DomainManager.Extra.IsExtraTaskInProgress(186) && !DomainManager.Extra.IsExtraTaskInProgress(180);
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				bool flag2 = !EventHelper.IsSectAllowLearning(11);
				if (flag2)
				{
					result = false;
				}
				else
				{
					GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
					result = EventHelper.IsCharacterAtTargetSectLocation(taiwu, 11);
				}
			}
			return result;
		}

		// Token: 0x06002312 RID: 8978 RVA: 0x001B8990 File Offset: 0x001B6B90
		public static void JingangSetSectLeader(EventArgBox argBox)
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			GameData.Domains.Character.Character sectLeader = EventHelper.TryGetSectLeaderAtLocation(taiwu.GetLocation(), 11, true);
			bool flag = sectLeader != null;
			if (flag)
			{
				argBox.Set("SectLeader", sectLeader.GetId());
			}
			else
			{
				int sectLeaderId = EventHelper.CreateNonIntelligentCharacter(749);
				argBox.Set("SectLeader", sectLeaderId);
			}
		}

		// Token: 0x06002313 RID: 8979 RVA: 0x001B89F0 File Offset: 0x001B6BF0
		public unsafe static Location JingangCreateAdventure()
		{
			short areaId = DomainManager.Map.GetAreaIdByAreaTemplateId(11);
			Span<MapBlockData> blocks = DomainManager.Map.GetAreaBlocks(areaId);
			Location selectLocation = Location.Invalid;
			List<MapBlockData> neighbors = ObjectPool<List<MapBlockData>>.Instance.Get();
			for (int i = 0; i < blocks.Length; i++)
			{
				MapBlockData blockData = *blocks[i];
				bool flag = !blockData.IsNonDeveloped();
				if (!flag)
				{
					EMapBlockSubType subType = blockData.GetConfig().SubType;
					bool flag2 = subType >= EMapBlockSubType.Ruin && subType <= EMapBlockSubType.None;
					if (!flag2)
					{
						bool flag3 = DomainManager.Map.IsBlockSpecial(blockData, true);
						if (!flag3)
						{
							bool flag4 = DomainManager.Adventure.GetAdventuresInArea(blockData.AreaId).AdventureSites.ContainsKey(blockData.BlockId);
							if (!flag4)
							{
								Location location = blockData.GetLocation();
								neighbors.Clear();
								DomainManager.Map.GetLocationByDistance(location, 1, 1, ref neighbors);
								bool hasDeveloped = false;
								for (int j = 0; j < neighbors.Count; j++)
								{
									bool flag5 = !neighbors[j].IsNonDeveloped();
									if (flag5)
									{
										hasDeveloped = true;
									}
								}
								bool flag6 = !hasDeveloped;
								if (!flag6)
								{
									selectLocation = location;
									break;
								}
							}
						}
					}
				}
			}
			ObjectPool<List<MapBlockData>>.Instance.Return(neighbors);
			Tester.Assert(selectLocation != Location.Invalid, "");
			EventHelper.TryCreateAdventureSite(selectLocation.AreaId, selectLocation.BlockId, 182, true);
			return selectLocation;
		}

		// Token: 0x06002314 RID: 8980 RVA: 0x001B8B88 File Offset: 0x001B6D88
		public static short JingangAdventureGetFightXiangshuMinion()
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			short templateId = 298;
			for (short i = 298; i <= 306; i += 1)
			{
				templateId = i;
				CharacterItem config = Config.Character.Instance[templateId];
				bool flag = config.ConsummateLevel >= taiwu.GetConsummateLevel() + 2;
				if (flag)
				{
					break;
				}
			}
			return templateId;
		}

		// Token: 0x06002315 RID: 8981 RVA: 0x001B8BF8 File Offset: 0x001B6DF8
		public static bool JingangWesternBuddhistMonkFollow()
		{
			GameData.Domains.Character.Character westernBuddhistMonk;
			EventHelper.TryGetFixedCharacterByTemplateId(623, out westernBuddhistMonk);
			bool flag = westernBuddhistMonk == null;
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				bool flag2 = !DomainManager.World.JingangIsInSpreadSutraTask();
				if (flag2)
				{
					result = false;
				}
				else
				{
					GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
					Location taiwuLocation = taiwu.GetValidLocation();
					MapBlockData taiwuBlockData = DomainManager.Map.GetBlockData(taiwuLocation.AreaId, taiwuLocation.BlockId);
					Location monkLocation = westernBuddhistMonk.GetLocation();
					MapBlockData monkBlockData = DomainManager.Map.GetBlockData(monkLocation.AreaId, monkLocation.BlockId);
					ByteCoordinate monkPos = monkBlockData.GetBlockPos();
					bool flag3 = taiwuBlockData.GetManhattanDistanceToPos(monkPos.X, monkPos.Y) > 2;
					if (flag3)
					{
						DataContext context = EventHelper.Domain.MainThreadDataContext;
						List<MapBlockData> taiwuNeighborBlocks = ObjectPool<List<MapBlockData>>.Instance.Get();
						DomainManager.Map.GetRealNeighborBlocks(taiwuLocation.AreaId, taiwuLocation.BlockId, taiwuNeighborBlocks, 2, false);
						for (int i = taiwuNeighborBlocks.Count - 1; i >= 0; i--)
						{
							MapBlockData blockData = taiwuNeighborBlocks[i];
							bool flag4 = EventHelper.IsLocationAtOrganizationRange(blockData.GetLocation(), 11);
							if (flag4)
							{
								taiwuNeighborBlocks.RemoveAt(i);
							}
						}
						bool flag5 = taiwuNeighborBlocks.Count > 0;
						if (flag5)
						{
							MapBlockData targetBlockData = taiwuNeighborBlocks[context.Random.Next(0, taiwuNeighborBlocks.Count)];
							EventHelper.MoveFixedCharacter(westernBuddhistMonk, targetBlockData.GetLocation());
						}
						ObjectPool<List<MapBlockData>>.Instance.Return(taiwuNeighborBlocks);
					}
					result = false;
				}
			}
			return result;
		}

		// Token: 0x06002316 RID: 8982 RVA: 0x001B8D88 File Offset: 0x001B6F88
		public static void JingangCreateCentralPlainsMonk()
		{
			int stage = EventHelper.JingangSpreadSecInfoStage();
			bool flag = stage == -1;
			if (!flag)
			{
				GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
				Location taiwuLocation = taiwu.GetValidLocation();
				MapBlockData taiwuMapBlockData = DomainManager.Map.GetBlockData(taiwuLocation.AreaId, taiwuLocation.BlockId);
				List<Location> selectNeighbors = new List<Location>();
				List<MapBlockData> blocks = DomainManager.Map.GetAreaBlocks(taiwuLocation.AreaId).ToArray().ToList<MapBlockData>();
				blocks.Sort((MapBlockData l, MapBlockData r) => l.GetBlockPos().GetManhattanDistance(taiwuMapBlockData.GetBlockPos()) - r.GetBlockPos().GetManhattanDistance(taiwuMapBlockData.GetBlockPos()));
				bool flag2 = DomainManager.Map.IsAreaBroken(taiwuLocation.AreaId);
				if (flag2)
				{
					for (int i = 0; i < blocks.Count; i++)
					{
						selectNeighbors.Add(blocks[i].GetLocation());
						bool flag3 = selectNeighbors.Count >= 3;
						if (flag3)
						{
							break;
						}
					}
				}
				else
				{
					for (int j = 0; j < blocks.Count; j++)
					{
						bool flag4 = blocks[j].IsNonDeveloped();
						if (!flag4)
						{
							bool flag5 = !blocks[j].IsPassable();
							if (!flag5)
							{
								selectNeighbors.Add(blocks[j].GetLocation());
								bool flag6 = selectNeighbors.Count >= 9;
								if (flag6)
								{
									break;
								}
							}
						}
					}
				}
				bool flag7 = stage >= 0 && stage <= 2;
				if (flag7)
				{
					short startTemplateId = EventHelper.JingangGetStartMonkTemplateIdByStage(stage);
					for (short k = 0; k < 3; k += 1)
					{
						GameData.Domains.Character.Character monk = EventHelper.GetOrCreateFixedCharacterByTemplateId(k + startTemplateId);
						EventHelper.MoveFixedCharacter(monk, (selectNeighbors.Count >= 9) ? selectNeighbors[(int)(k * 3)] : selectNeighbors[(int)k]);
					}
					EventHelper.SaveArgToSectMainStory<short>(11, "ConchShip_PresetKey_JingangCreateCentralPlainsMonkTaiwuAreaId", taiwuLocation.AreaId);
				}
				else
				{
					bool flag8 = stage == 3;
					if (flag8)
					{
						GameData.Domains.Character.Character monk2 = EventHelper.GetOrCreateFixedCharacterByTemplateId(759);
						EventHelper.MoveFixedCharacter(monk2, selectNeighbors[1]);
						EventHelper.SaveArgToSectMainStory<short>(11, "ConchShip_PresetKey_JingangCreateCentralPlainsMonkTaiwuAreaId", taiwuLocation.AreaId);
					}
				}
			}
		}

		// Token: 0x06002317 RID: 8983 RVA: 0x001B8FB8 File Offset: 0x001B71B8
		public static bool JingangCentralPlainsMonkFollow()
		{
			bool flag = !DomainManager.World.JingangIsInSpreadSutraTask();
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				EventArgBox argBox = DomainManager.Extra.GetSectMainStoryEventArgBox(11);
				GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
				Location taiwuLocation = taiwu.GetValidLocation();
				short jingangCreateCentralPlainsMonkTaiwuAreaId = -1;
				bool flag2 = !argBox.Get("ConchShip_PresetKey_JingangCreateCentralPlainsMonkTaiwuAreaId", ref jingangCreateCentralPlainsMonkTaiwuAreaId) || taiwuLocation.AreaId == jingangCreateCentralPlainsMonkTaiwuAreaId;
				if (flag2)
				{
					result = false;
				}
				else
				{
					int stage = EventHelper.JingangSpreadSecInfoStage();
					short startTemplateId = EventHelper.JingangGetStartMonkTemplateIdByStage(stage);
					MapBlockData taiwuMapBlockData = DomainManager.Map.GetBlockData(taiwuLocation.AreaId, taiwuLocation.BlockId);
					List<Location> selectNeighbors = new List<Location>();
					List<MapBlockData> blocks = DomainManager.Map.GetAreaBlocks(taiwuLocation.AreaId).ToArray().ToList<MapBlockData>();
					blocks.Sort((MapBlockData l, MapBlockData r) => l.GetBlockPos().GetManhattanDistance(taiwuMapBlockData.GetBlockPos()) - r.GetBlockPos().GetManhattanDistance(taiwuMapBlockData.GetBlockPos()));
					bool flag3 = DomainManager.Map.IsAreaBroken(taiwuLocation.AreaId);
					if (flag3)
					{
						for (int i = 0; i < blocks.Count; i++)
						{
							selectNeighbors.Add(blocks[i].GetLocation());
							bool flag4 = selectNeighbors.Count >= 3;
							if (flag4)
							{
								break;
							}
						}
					}
					else
					{
						for (int j = 0; j < blocks.Count; j++)
						{
							bool flag5 = blocks[j].IsNonDeveloped();
							if (!flag5)
							{
								bool flag6 = !blocks[j].IsPassable();
								if (!flag6)
								{
									selectNeighbors.Add(blocks[j].GetLocation());
									bool flag7 = selectNeighbors.Count >= 9;
									if (flag7)
									{
										break;
									}
								}
							}
						}
					}
					bool flag8 = stage >= 0 && stage <= 2;
					if (flag8)
					{
						for (int k = 0; k < 3; k++)
						{
							GameData.Domains.Character.Character monk;
							bool flag9 = EventHelper.TryGetFixedCharacterByTemplateId((short)((int)startTemplateId + k), out monk);
							if (flag9)
							{
								EventHelper.MoveFixedCharacter(monk, (selectNeighbors.Count >= 9) ? selectNeighbors[k * 3] : selectNeighbors[k]);
							}
						}
					}
					else
					{
						GameData.Domains.Character.Character monk2;
						bool flag10 = EventHelper.TryGetFixedCharacterByTemplateId(759, out monk2);
						if (flag10)
						{
							EventHelper.MoveFixedCharacter(monk2, selectNeighbors[1]);
						}
					}
					EventHelper.SaveArgToSectMainStory<short>(11, "ConchShip_PresetKey_JingangCreateCentralPlainsMonkTaiwuAreaId", taiwuLocation.AreaId);
					result = false;
				}
			}
			return result;
		}

		// Token: 0x06002318 RID: 8984 RVA: 0x001B9228 File Offset: 0x001B7428
		public static void JingangEnterSpreadSutraStage()
		{
			int currDate = EventHelper.GetGameDate();
			EventHelper.SaveArgToSectMainStory<int>(11, "ConchShip_PresetKey_JingangAttackDate", currDate);
			EventHelper.SaveArgToSectMainStory<int>(11, "ConchShip_PresetKey_JingangLettersFromJingangDate", currDate);
		}

		// Token: 0x06002319 RID: 8985 RVA: 0x001B9258 File Offset: 0x001B7458
		public static bool JingangSecretInformationIsSolveScripture(int metaDataId)
		{
			SecretInformationItem config = EventHelper.GetSecretInformationConfig(metaDataId);
			short templateId = config.TemplateId;
			return templateId >= 112 && templateId <= 115;
		}

		// Token: 0x0600231A RID: 8986 RVA: 0x001B9288 File Offset: 0x001B7488
		public static int JingangSpreadSecInfoStage()
		{
			return DomainManager.World.JingangSpreadSecInfoStage();
		}

		// Token: 0x0600231B RID: 8987 RVA: 0x001B92A4 File Offset: 0x001B74A4
		public static short JingangGetStartMonkTemplateIdByStage(int stage)
		{
			bool flag = stage == 0;
			short result;
			if (flag)
			{
				result = 750;
			}
			else
			{
				bool flag2 = stage == 1;
				if (flag2)
				{
					result = 753;
				}
				else
				{
					bool flag3 = stage == 2;
					if (flag3)
					{
						result = 756;
					}
					else
					{
						bool flag4 = stage == 3;
						if (flag4)
						{
							result = 759;
						}
						else
						{
							result = -1;
						}
					}
				}
			}
			return result;
		}

		// Token: 0x0600231C RID: 8988 RVA: 0x001B92F9 File Offset: 0x001B74F9
		public static void JingangAddKnowSecInfoCharId(int charId)
		{
			DomainManager.World.JingangAddKnowSecInfoCharId(EventHelper.Domain.MainThreadDataContext, charId);
		}

		// Token: 0x0600231D RID: 8989 RVA: 0x001B9314 File Offset: 0x001B7514
		public static bool JingangIsCharacterKnowSecInfo(int charId)
		{
			EventArgBox sectArgBox = DomainManager.Extra.GetSectMainStoryEventArgBox(11);
			IntList charIds;
			sectArgBox.Get<IntList>("ConchShip_PresetKey_JingangKnowSecInfoIdList", out charIds);
			bool flag = charIds.Items == null;
			return !flag && charIds.Items.Contains(charId);
		}

		// Token: 0x0600231E RID: 8990 RVA: 0x001B9360 File Offset: 0x001B7560
		public static void JingangAddTalkedCentralPlainsMonkId(int charId)
		{
			EventArgBox sectArgBox = DomainManager.Extra.GetSectMainStoryEventArgBox(11);
			IntList charIds;
			sectArgBox.Get<IntList>("ConchShip_PresetKey_JingangTalkedCentralPlainsMonkId", out charIds);
			bool flag = charIds.Items == null;
			if (flag)
			{
				charIds = IntList.Create();
			}
			bool flag2 = !charIds.Items.Contains(charId);
			if (flag2)
			{
				charIds.Items.Add(charId);
			}
			DomainManager.Extra.SaveArgToSectMainStoryEventArgBox<IntList>(EventHelper.Domain.MainThreadDataContext, 11, "ConchShip_PresetKey_JingangTalkedCentralPlainsMonkId", charIds);
		}

		// Token: 0x0600231F RID: 8991 RVA: 0x001B93DC File Offset: 0x001B75DC
		public static int JingangGetTalkedCentralPlainsMonkCount()
		{
			EventArgBox sectArgBox = DomainManager.Extra.GetSectMainStoryEventArgBox(11);
			IntList charIds;
			sectArgBox.Get<IntList>("ConchShip_PresetKey_JingangTalkedCentralPlainsMonkId", out charIds);
			bool flag = charIds.Items == null;
			int result;
			if (flag)
			{
				result = 0;
			}
			else
			{
				result = charIds.Items.Count;
			}
			return result;
		}

		// Token: 0x06002320 RID: 8992 RVA: 0x001B9428 File Offset: 0x001B7628
		public static void JingangClearTalkedCentralPlainsMonk()
		{
			EventArgBox sectArgBox = DomainManager.Extra.GetSectMainStoryEventArgBox(11);
			sectArgBox.Remove<IntList>("ConchShip_PresetKey_JingangTalkedCentralPlainsMonkId");
			EventHelper.SaveSectMainStoryEventArgBox(11);
		}

		// Token: 0x06002321 RID: 8993 RVA: 0x001B9457 File Offset: 0x001B7657
		public static void JingangClearKnowSecInfo()
		{
			DomainManager.World.JingangClearKnowSecInfo(EventHelper.Domain.MainThreadDataContext);
			EventHelper.SaveArgToSectMainStory<bool>(11, "ConchShip_PresetKey_JingangSamsaraMonkSoulTalked", false);
		}

		// Token: 0x06002322 RID: 8994 RVA: 0x001B9480 File Offset: 0x001B7680
		public static bool JingangIsEnterHelpMonkBranch()
		{
			EventArgBox argBox = DomainManager.Extra.GetSectMainStoryEventArgBox(11);
			bool jingangSelectHelpWestMonk = false;
			argBox.Get("ConchShip_PresetKey_JingangSelectHelpWestMonk", ref jingangSelectHelpWestMonk);
			bool jingangSecInfoSpreadingSelectCombat = false;
			argBox.Get("ConchShip_PresetKey_JingangSecInfoSpreadingSelectCombat", ref jingangSecInfoSpreadingSelectCombat);
			return jingangSelectHelpWestMonk || jingangSecInfoSpreadingSelectCombat;
		}

		// Token: 0x06002323 RID: 8995 RVA: 0x001B94D0 File Offset: 0x001B76D0
		public static void JingangProsperousHandle()
		{
			DomainManager.Extra.FinishAllTaskInChain(EventHelper.Domain.MainThreadDataContext, 35);
			GameData.Domains.Character.Character monk = EventHelper.GetOrCreateFixedCharacterByTemplateId(623);
			EventHelper.RemoveNonIntelligentCharacter(monk);
			DomainManager.Information.ReleaseAllJingangInformation(EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x06002324 RID: 8996 RVA: 0x001B951C File Offset: 0x001B771C
		public static void JingangFailingHandle()
		{
			DomainManager.Extra.FinishAllTaskInChain(EventHelper.Domain.MainThreadDataContext, 35);
			GameData.Domains.Character.Character monk = EventHelper.GetOrCreateFixedCharacterByTemplateId(623);
			EventHelper.RemoveNonIntelligentCharacter(monk);
			DomainManager.Information.ReleaseAllJingangInformation(EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x06002325 RID: 8997 RVA: 0x001B9568 File Offset: 0x001B7768
		public static void JingangDistributeSecInfo(int metaDataId, int targetCharId)
		{
			DomainManager.World.JingangDistributeSecInfo(EventHelper.Domain.MainThreadDataContext, metaDataId, targetCharId);
		}

		// Token: 0x06002326 RID: 8998 RVA: 0x001B9582 File Offset: 0x001B7782
		public static void JingangDistributeSecInfoInEvent(int metaDataId, int targetCharId)
		{
			EventHelper.DisseminateSecretInformationFromTaiwu(metaDataId, targetCharId);
		}

		// Token: 0x06002327 RID: 8999 RVA: 0x001B9590 File Offset: 0x001B7790
		public static void JingangCreateAndDistributeSecInfo(short templateId, int relateCharId)
		{
			if (!true)
			{
			}
			int num;
			switch (templateId)
			{
			case 112:
				num = EventHelper.CreateSecretInformationMetaData(EventHelper.GetSecretInformationCollection().AddSolveScripture1(relateCharId), false);
				break;
			case 113:
				num = EventHelper.CreateSecretInformationMetaData(EventHelper.GetSecretInformationCollection().AddSolveScripture2(relateCharId), false);
				break;
			case 114:
				num = EventHelper.CreateSecretInformationMetaData(EventHelper.GetSecretInformationCollection().AddSolveScripture3(relateCharId), false);
				break;
			case 115:
				num = EventHelper.CreateSecretInformationMetaData(EventHelper.GetSecretInformationCollection().AddSolveScripture4(relateCharId), false);
				break;
			default:
			{
				DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(24, 1);
				defaultInterpolatedStringHandler.AppendLiteral("Unsupported templateId: ");
				defaultInterpolatedStringHandler.AppendFormatted<short>(templateId);
				throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
			}
			}
			if (!true)
			{
			}
			int metaDataId = num;
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			EventHelper.JingangDistributeSecInfo(metaDataId, taiwu.GetId());
			EventHelper.SaveArgToSectMainStory<int>(11, "ConchShip_PresetKey_JingangSecInfoMetaDataId", metaDataId);
		}

		// Token: 0x06002328 RID: 9000 RVA: 0x001B9666 File Offset: 0x001B7866
		public static void JingangBroadCastSecInfo()
		{
			DomainManager.World.JingangBroadCastSecInfo(EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x06002329 RID: 9001 RVA: 0x001B9680 File Offset: 0x001B7880
		public static bool JingangWesternBuddhistMonkTalkAllTriggered()
		{
			EventArgBox argBox = DomainManager.Extra.GetSectMainStoryEventArgBox(11);
			bool talkOneTriggered = false;
			argBox.Get("ConchShip_PresetKey_JingangWesternBuddhistMonkTalkOneTriggered", ref talkOneTriggered);
			bool talkTwoTriggered = false;
			argBox.Get("ConchShip_PresetKey_JingangWesternBuddhistMonkTalkTwoTriggered", ref talkTwoTriggered);
			bool talkThreeTriggered = false;
			argBox.Get("ConchShip_PresetKey_JingangWesternBuddhistMonkTalkThreeTriggered", ref talkThreeTriggered);
			return talkOneTriggered && talkTwoTriggered && talkThreeTriggered;
		}

		// Token: 0x0600232A RID: 9002 RVA: 0x001B96D8 File Offset: 0x001B78D8
		public static void JingangKunlunPeopleChangeFavorability()
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			short areaTemplateId = EventHelper.GetAreaIdByAreaTemplateId(26);
			List<short> settlementIds = ObjectPool<List<short>>.Instance.Get();
			List<int> allMembers = ObjectPool<List<int>>.Instance.Get();
			DomainManager.Map.GetAreaSettlementIds(areaTemplateId, settlementIds, true, false);
			for (int i = 0; i < settlementIds.Count; i++)
			{
				Settlement settlement = DomainManager.Organization.GetSettlement(settlementIds[i]);
				allMembers.Clear();
				settlement.GetMembers().GetAllMembers(allMembers);
				for (int j = 0; j < allMembers.Count; j++)
				{
					GameData.Domains.Character.Character character;
					bool flag = DomainManager.Character.TryGetElement_Objects(allMembers[j], out character);
					if (flag)
					{
						EventHelper.ChangeFavorabilityOptional(character, taiwu, 3000, 4);
					}
				}
			}
			ObjectPool<List<short>>.Instance.Return(settlementIds);
			ObjectPool<List<int>>.Instance.Return(allMembers);
		}

		// Token: 0x0600232B RID: 9003 RVA: 0x001B97C8 File Offset: 0x001B79C8
		public static int JingangCanTriggerPietyEventCount()
		{
			return DomainManager.World.JingangCanTriggerPietyEventCount();
		}

		// Token: 0x0600232C RID: 9004 RVA: 0x001B97E4 File Offset: 0x001B79E4
		public static bool JingangIsCharacterBelongKunlunNotSect(int charId)
		{
			GameData.Domains.Character.Character character;
			bool flag = DomainManager.Character.TryGetElement_Objects(charId, out character);
			if (flag)
			{
				short areaId = EventHelper.GetCharacterOrganizationAreaId(character);
				short kunlunMountainAreaId = EventHelper.GetAreaIdByAreaTemplateId(26);
				OrganizationInfo orgInfo = character.GetOrganizationInfo();
				OrganizationItem orgConfig = Organization.Instance[orgInfo.OrgTemplateId];
				bool flag2 = areaId == kunlunMountainAreaId && !orgConfig.IsSect;
				if (flag2)
				{
					return true;
				}
			}
			return false;
		}

		// Token: 0x0600232D RID: 9005 RVA: 0x001B9854 File Offset: 0x001B7A54
		public static void SectChangeFavorability(sbyte orgTemplateId, short delta)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			List<GameData.Domains.Character.Character> sectChars = EventHelper.GetSectCharList(orgTemplateId, 0, 8);
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			for (int i = 0; i < sectChars.Count; i++)
			{
				DomainManager.Character.TryCreateRelation(context, sectChars[i].GetId(), taiwu.GetId());
				EventHelper.ChangeFavorabilityWithMergeOptional(sectChars[i], taiwu, delta, 4, true);
			}
		}

		// Token: 0x0600232E RID: 9006 RVA: 0x001B98CC File Offset: 0x001B7ACC
		public static bool IsSectMainStoryCharacter(short charTemplateId)
		{
			return SectMainStoryRelatedConstants.SectMainStoryCharacterTemplateIds.Contains(charTemplateId);
		}

		// Token: 0x0600232F RID: 9007 RVA: 0x001B98EC File Offset: 0x001B7AEC
		public static sbyte GetLiaoWumingAiState()
		{
			int kongsangTaskInfoId = DomainManager.Extra.GetExtraTaskChainCurrentTask(27);
			bool flag = kongsangTaskInfoId == 105;
			sbyte result;
			if (flag)
			{
				result = 1;
			}
			else
			{
				bool flag2 = SectMainStoryRelatedConstants.LiaoWumingAi2TaskInfo.Contains(kongsangTaskInfoId);
				if (flag2)
				{
					result = 2;
				}
				else
				{
					bool flag3 = kongsangTaskInfoId == 115;
					if (flag3)
					{
						result = 3;
					}
					else
					{
						result = -1;
					}
				}
			}
			return result;
		}

		// Token: 0x06002330 RID: 9008 RVA: 0x001B9940 File Offset: 0x001B7B40
		public unsafe static Location GetLiaoWumingPoisonedLocation()
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			IntPtr intPtr = stackalloc byte[(UIntPtr)3];
			cpblk(intPtr, ref <PrivateImplementationDetails>.1BA2CDC12017FE014BD5ED91A47514C7C58C8CDCCB7D7669690BA64CD37E0365, 3);
			Span<sbyte> span = new Span<sbyte>(intPtr, 3);
			Span<sbyte> selectableSectIds = span;
			sbyte sectId = *selectableSectIds[context.Random.Next(selectableSectIds.Length)];
			Settlement settlement = DomainManager.Organization.GetSettlementByOrgTemplateId(sectId);
			short areaId = settlement.GetLocation().AreaId;
			sbyte stateId = DomainManager.Map.GetStateIdByAreaId(areaId);
			List<short> areaList = EventHelper.GetNormalAreaIdsByStateId((short)stateId);
			short selectedAreaId = areaList.GetRandom(context.Random);
			Span<MapBlockData> areaBlocks = DomainManager.Map.GetAreaBlocks(selectedAreaId);
			List<MapBlockData> selectableBlocks = context.AdvanceMonthRelatedData.Blocks.Occupy();
			Span<MapBlockData> span2 = areaBlocks;
			for (int i = 0; i < span2.Length; i++)
			{
				MapBlockData block = *span2[i];
				bool flag = !block.IsPassable();
				if (!flag)
				{
					bool flag2 = block.IsCityTown();
					if (!flag2)
					{
						bool flag3 = block.BelongBlockId >= 0;
						if (!flag3)
						{
							bool flag4 = block.CharacterSet == null;
							if (!flag4)
							{
								selectableBlocks.Add(block);
							}
						}
					}
				}
			}
			bool flag5 = selectableBlocks.Count == 0;
			if (flag5)
			{
				Span<MapBlockData> span3 = areaBlocks;
				for (int j = 0; j < span3.Length; j++)
				{
					MapBlockData block2 = *span3[j];
					bool flag6 = !block2.IsPassable();
					if (!flag6)
					{
						bool flag7 = block2.IsCityTown();
						if (!flag7)
						{
							bool flag8 = block2.BelongBlockId >= 0;
							if (!flag8)
							{
								selectableBlocks.Add(block2);
							}
						}
					}
				}
			}
			bool flag9 = selectableBlocks.Count == 0;
			if (flag9)
			{
				Span<MapBlockData> span4 = areaBlocks;
				for (int k = 0; k < span4.Length; k++)
				{
					MapBlockData block3 = *span4[k];
					bool flag10 = !block3.IsPassable();
					if (!flag10)
					{
						selectableBlocks.Add(block3);
					}
				}
			}
			DomainManager.Character.CullCanSelectBlocks(selectableBlocks);
			MapBlockData selectableBlock = selectableBlocks.GetRandom(context.Random);
			context.AdvanceMonthRelatedData.Blocks.Release(ref selectableBlocks);
			Location targetLocation = new Location(selectedAreaId, selectableBlock.BlockId);
			return targetLocation;
		}

		// Token: 0x06002331 RID: 9009 RVA: 0x001B9B84 File Offset: 0x001B7D84
		public static bool IsForbidMeetSkeleton(int deadId)
		{
			DeadCharacter deadCharacter = DomainManager.Character.GetDeadCharacter(deadId);
			return SectMainStoryRelatedConstants.CanNotMeetSkeletonCharacters.Contains((int)deadCharacter.TemplateId);
		}

		// Token: 0x06002332 RID: 9010 RVA: 0x001B9BB4 File Offset: 0x001B7DB4
		public static bool IsForbidGraveInteraction(int deadId)
		{
			DeadCharacter deadCharacter = DomainManager.Character.GetDeadCharacter(deadId);
			return SectMainStoryRelatedConstants.CanNotGraveInteractionCharavters.Contains((int)deadCharacter.TemplateId);
		}

		// Token: 0x06002333 RID: 9011 RVA: 0x001B9BE4 File Offset: 0x001B7DE4
		public static sbyte GetGradeFromTripodVesselOfMedicine()
		{
			int prob = EventHelper.GetRandom(0, 100);
			sbyte i = 0;
			while ((int)i < SectMainStoryRelatedConstants.TripodVesselOfMedicineProb.Length)
			{
				bool flag = prob < SectMainStoryRelatedConstants.TripodVesselOfMedicineProb[(int)i];
				if (flag)
				{
					return i;
				}
				i += 1;
			}
			return 0;
		}

		// Token: 0x06002334 RID: 9012 RVA: 0x001B9C30 File Offset: 0x001B7E30
		public static List<ValueTuple<ItemKey, int>> MakeLitchiWithMixedPoison()
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			List<ValueTuple<ItemKey, int>> items = new List<ValueTuple<ItemKey, int>>();
			for (int i = 0; i < SectMainStoryRelatedConstants.MakeMixedPoison.Length; i++)
			{
				ItemKey itemKey = DomainManager.Item.CreateItem(context, 7, 5);
				short[] poisonItemArray = SectMainStoryRelatedConstants.MakeMixedPoison[i];
				for (int j = 0; j < poisonItemArray.Length; j++)
				{
					ItemBase itemBase = DomainManager.Item.GetBaseItem(itemKey);
					itemKey = DomainManager.Item.SetAttachedPoisons(context, itemBase, poisonItemArray[j], true, null).Item1.GetItemKey();
				}
				taiwu.AddInventoryItem(context, itemKey, 1, false);
			}
			ItemKey litchi = DomainManager.Item.CreateItem(context, 7, 5);
			items.Add(new ValueTuple<ItemKey, int>(litchi, 20));
			return items;
		}

		// Token: 0x06002335 RID: 9013 RVA: 0x001B9D10 File Offset: 0x001B7F10
		public static void AddPoisonToLiaoWuming(GameData.Domains.Character.Character character)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			for (sbyte i = 0; i < 6; i += 1)
			{
				int delta = context.Random.Next(8333, 12500);
				character.ChangePoisoned(context, i, 0, delta);
			}
			short value = (short)context.Random.Next(2000, 4000);
			character.ChangeDisorderOfQi(context, (int)value);
		}

		// Token: 0x06002336 RID: 9014 RVA: 0x001B9D80 File Offset: 0x001B7F80
		public static bool IsTaiwuAtRanshanSettlement(bool settlementBlockOnly = false)
		{
			return DomainManager.World.IsTaiwuAtRanshanSettlement(settlementBlockOnly);
		}

		// Token: 0x06002337 RID: 9015 RVA: 0x001B9D9D File Offset: 0x001B7F9D
		public static void SetRanshanSpecialInteractionToggle(int index)
		{
			DomainManager.Extra.GetSectMainStoryEventArgBox(7).Set("ConchShip_PresetKey_Ranshan_SpecialInteractionToggle", index);
			EventHelper.SaveSectMainStoryEventArgBox(7);
		}

		// Token: 0x06002338 RID: 9016 RVA: 0x001B9DC0 File Offset: 0x001B7FC0
		public static bool TryGetRanshanSpecialInteractionEventGuid(EventArgBox argBox, out string res)
		{
			res = string.Empty;
			int charId = -1;
			int toggle = -1;
			GameData.Domains.Character.Character character;
			bool flag = !argBox.Get("CharacterId", ref charId) || !DomainManager.Character.TryGetElement_Objects(charId, out character) || character.GetOrganizationInfo().OrgTemplateId != 7 || !DomainManager.Extra.GetSectMainStoryEventArgBox(7).Get("ConchShip_PresetKey_Ranshan_SpecialInteractionToggle", ref toggle) || toggle < 0;
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				OrganizationInfo orgInfo = character.GetOrganizationInfo();
				switch (toggle)
				{
				case 1:
				{
					sbyte grade = orgInfo.Grade;
					sbyte b = grade;
					if (b >= 6)
					{
						if (b == 8)
						{
							if (orgInfo.Principal)
							{
								res = "b8db554a-cd7c-426d-ab43-701d533ef418";
								result = true;
								break;
							}
						}
						res = "a16df7b5-6105-4d7e-a0b0-f24a0354cfa9";
						result = true;
					}
					else if (b < 3)
					{
						res = "69cf6a8e-e6aa-4546-9a95-60476492f126";
						result = true;
					}
					else
					{
						res = "1470f02f-bd15-4c96-ba7e-04d5160b2a18";
						result = true;
					}
					break;
				}
				case 2:
				{
					sbyte grade2 = orgInfo.Grade;
					sbyte b2 = grade2;
					if (b2 >= 6)
					{
						if (b2 == 8)
						{
							if (orgInfo.Principal)
							{
								res = "19f47128-51a0-4397-a580-25583ee9a7d8";
								result = true;
								break;
							}
						}
						res = "7716afbf-ed76-4c12-9206-2dfe2a0600ff";
						result = true;
					}
					else if (b2 < 3)
					{
						res = "2781a5ea-cddb-4d29-9a95-7b8fd0207af2";
						result = true;
					}
					else
					{
						res = "776d1654-2df9-4cd1-be16-bdd7bd5e0ffb";
						result = true;
					}
					break;
				}
				case 3:
				{
					sbyte grade3 = orgInfo.Grade;
					sbyte b3 = grade3;
					if (b3 >= 6)
					{
						if (b3 == 8)
						{
							if (orgInfo.Principal)
							{
								res = "3ef5fe52-5a94-4486-9435-bca26092bdbf";
								result = true;
								break;
							}
						}
						res = "3558c330-1e4c-459a-9761-3ef89c41cbea";
						result = true;
					}
					else if (b3 < 3)
					{
						res = "bf8e7d8a-33a1-4491-937e-2bf6bfff456f";
						result = true;
					}
					else
					{
						res = "bcdfcfa8-966e-49b4-96c0-941868c037f8";
						result = true;
					}
					break;
				}
				default:
					result = false;
					break;
				}
			}
			return result;
		}

		// Token: 0x06002339 RID: 9017 RVA: 0x001B9F7C File Offset: 0x001B817C
		public static bool IsRanshanSectMainStoryComplete()
		{
			return DomainManager.World.GetSectMainStoryTaskStatus(7) != 0;
		}

		// Token: 0x0600233A RID: 9018 RVA: 0x001B9F9C File Offset: 0x001B819C
		public static void ThreeCorpsesFollowingTaiwu()
		{
			sbyte status = EventHelper.GetSectMainStoryTaskStatus(7);
			sbyte b = status;
			sbyte b2 = b;
			if (b2 != 0)
			{
				if (b2 != 2)
				{
					goto IL_27;
				}
			}
			else if (EventHelper.IsExtraTaskChainInProgress(49))
			{
				goto IL_27;
			}
			return;
			IL_27:
			foreach (short templateId in SectMainStoryRelatedConstants.RanshanThreeCorpsesCharacterTemplateIdList)
			{
				SectStoryThreeCorpsesCharacter corpse = DomainManager.Extra.GetRanshanThreeCorpsesCharacterByTemplateId(templateId);
				bool flag = corpse == null || !corpse.IsAroundTaiwu;
				if (!flag)
				{
					bool flag2 = corpse.Target >= 0;
					if (!flag2)
					{
						sbyte b3 = status;
						sbyte b4 = b3;
						if (b4 != 0)
						{
							if (b4 != 1)
							{
								goto IL_B4;
							}
							if (corpse.IsGoodEnd)
							{
								goto IL_B4;
							}
						}
						else if (corpse.Progress != 3)
						{
							goto IL_B4;
						}
						continue;
						IL_B4:
						GameData.Domains.Character.Character character = EventHelper.GetOrCreateFixedCharacterByTemplateId(templateId);
						Location location = character.GetLocation();
						bool flag3 = location == Location.Invalid;
						if (flag3)
						{
							DomainManager.Extra.SetRanshanThreeCorpsesCharacterLocation(EventHelper.Domain.MainThreadDataContext, templateId);
							break;
						}
						GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
						Location taiwuLocation = taiwu.GetValidLocation();
						MapBlockData taiwuBlockData = DomainManager.Map.GetBlockData(taiwuLocation.AreaId, taiwuLocation.BlockId);
						ByteCoordinate pos = DomainManager.Map.GetBlockData(location.AreaId, location.BlockId).GetBlockPos();
						bool flag4 = taiwuBlockData.GetManhattanDistanceToPos(pos.X, pos.Y) > 2;
						if (flag4)
						{
							DomainManager.Extra.SetRanshanThreeCorpsesCharacterLocation(EventHelper.Domain.MainThreadDataContext, templateId);
						}
					}
				}
			}
		}

		// Token: 0x0600233B RID: 9019 RVA: 0x001BA160 File Offset: 0x001B8360
		public static void SetRanshanChapter1MonthlyEventProgress()
		{
			int count = 0;
			EventArgBox argBox = DomainManager.Extra.GetSectMainStoryEventArgBox(7);
			bool flag = !argBox.Get("ConchShip_PresetKey_Ranshan_Chapter1_MonthlyEventTriggeredCount", ref count);
			if (flag)
			{
				count = 0;
			}
			argBox.Set("ConchShip_PresetKey_Ranshan_Chapter1_MonthlyEventTriggeredCount", ++count);
			argBox.Set("ConchShip_PresetKey_Ranshan_Chapter1_MonthlyEventTriggeredDate", DomainManager.World.GetCurrDate());
			EventHelper.SaveSectMainStoryEventArgBox(7);
		}

		// Token: 0x0600233C RID: 9020 RVA: 0x001BA1C0 File Offset: 0x001B83C0
		public static int GetRanshanChapter1MonthlyEventTriggeredCount()
		{
			return DomainManager.World.GetRanshanChapter1MonthlyEventTriggeredCount();
		}

		// Token: 0x0600233D RID: 9021 RVA: 0x001BA1DC File Offset: 0x001B83DC
		public static bool IsRanshanChapter1AbleToTrigger()
		{
			return DomainManager.Extra.IsExtraTaskInProgress(293) && EventHelper.IsTaiwuAtRanshanSettlement(true);
		}

		// Token: 0x0600233E RID: 9022 RVA: 0x001BA208 File Offset: 0x001B8408
		public static void SetRanshanAdventure1MapBlockName(EventArgBox argBox)
		{
			Location location = DomainManager.Taiwu.GetTaiwu().GetValidLocation();
			MapBlockItem config = MapBlock.Instance[25];
			int blockIndex = DomainManager.Map.GetBlock(location).GetBlockIndexInBigBlock(DomainManager.Map.GetAreaSize(location.AreaId));
			argBox.Set("RanshanAdventure1DestinationName", config.BlockNames[(EventHelper.IsTaiwuAtRanshanSettlement(true) && blockIndex == 0) ? 2 : 0]);
		}

		// Token: 0x0600233F RID: 9023 RVA: 0x001BA278 File Offset: 0x001B8478
		public static List<ValueTuple<ItemKey, int>> GetItemsInRanshanAdventure1()
		{
			List<ValueTuple<ItemKey, int>> list = new List<ValueTuple<ItemKey, int>>();
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			list.Add(new ValueTuple<ItemKey, int>(EventHelper.AddItemToRole(taiwu, 12, 268, 1, -1), 1));
			list.Add(new ValueTuple<ItemKey, int>(EventHelper.AddItemToRole(taiwu, 12, 269, 1, -1), 1));
			list.Add(new ValueTuple<ItemKey, int>(EventHelper.AddItemToRole(taiwu, 12, 270, 1, -1), 1));
			return list;
		}

		// Token: 0x06002340 RID: 9024 RVA: 0x001BA2F0 File Offset: 0x001B84F0
		public static void SetRanshanSectLeaderArgBox(EventArgBox argBox)
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			sbyte sectTemplateId = 7;
			short seniorTemplateId = 364;
			GameData.Domains.Character.Character sectLeader = EventHelper.TryGetSectLeaderAtLocation(taiwu.GetLocation(), sectTemplateId, true);
			bool flag = sectLeader == null || sectLeader.GetAgeGroup() == 0;
			if (flag)
			{
				int sectLeaderId = EventHelper.CreateNonIntelligentCharacter(seniorTemplateId);
				argBox.Set("SectLeader", sectLeaderId);
				argBox.Set("SectLeaderName", "<color=#GradeColor_8><Language Key=Event_SectStoryShixiang_Qianbei/></color>");
			}
			else
			{
				OrganizationMemberItem memberConfig = OrganizationDomain.GetOrgMemberConfig(sectLeader.GetOrganizationInfo());
				argBox.Set("SectLeader", sectLeader.GetId());
				argBox.Set("SectLeaderName", "<color=#GradeColor_8>" + memberConfig.GradeName + "</color>");
			}
		}

		// Token: 0x06002341 RID: 9025 RVA: 0x001BA3A4 File Offset: 0x001B85A4
		public static void CreateRanshanChapter1Adventure()
		{
			Location location = DomainManager.Organization.GetSettlementByOrgTemplateId(7).GetLocation();
			List<short> blockIds = new List<short>();
			DomainManager.Map.GetSettlementBlocks(location.AreaId, location.BlockId, blockIds);
			foreach (short blockId in blockIds)
			{
				MapBlockData block = DomainManager.Map.GetBlock(location.AreaId, blockId);
				bool flag = !DomainManager.Map.IsBlockOccupiedByCriticalAdventure(location.AreaId, block.BlockId) && EventHelper.TryCreateAdventureSite(location.AreaId, block.BlockId, 184, true);
				if (flag)
				{
					break;
				}
			}
		}

		// Token: 0x06002342 RID: 9026 RVA: 0x001BA470 File Offset: 0x001B8670
		public static void SetRanshanChapter2TeachStartDate()
		{
			EventArgBox argBox = DomainManager.Extra.GetSectMainStoryEventArgBox(7);
			argBox.Set("ConchShip_PresetKey_Ranshan_Chapter2_TeachStartDate", DomainManager.World.GetCurrDate());
			argBox.Set("ConchShip_PresetKey_SanZongBiWuCountDown", 24);
			EventHelper.SaveSectMainStoryEventArgBox(7);
		}

		// Token: 0x06002343 RID: 9027 RVA: 0x001BA4B8 File Offset: 0x001B86B8
		public static int InitializeRanshanThreeCorpsesCharacter(short templateId)
		{
			return DomainManager.Extra.InitializeRanshanThreeCorpsesCharacter(EventHelper.Domain.MainThreadDataContext, templateId);
		}

		// Token: 0x06002344 RID: 9028 RVA: 0x001BA4E0 File Offset: 0x001B86E0
		public static void ChangeRanshanThreeCorpsesCharacterFavorability(short templateId, int delta)
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			GameData.Domains.Character.Character character = DomainManager.Character.GetOrCreateFixedCharacterByTemplateId(EventHelper.Domain.MainThreadDataContext, templateId);
			short favorability = EventHelper.GetFavorability(character, taiwu);
			short value = (short)Math.Clamp((int)favorability + delta, -30000, 30000);
			EventHelper.DirectlySetFavorabilities(character.GetId(), taiwu.GetId(), value, value);
		}

		// Token: 0x06002345 RID: 9029 RVA: 0x001BA540 File Offset: 0x001B8740
		public static void SetRanshanChapter2CombatPlayDecision(short templateId, int decision)
		{
			EventArgBox sectMainStoryEventArgBox = DomainManager.Extra.GetSectMainStoryEventArgBox(7);
			if (!true)
			{
			}
			string key;
			if (templateId != 660)
			{
				if (templateId != 661)
				{
					key = "ConchShip_PresetKey_Ranshan_Chapter2_YingjiaoCombatPlayDecision";
				}
				else
				{
					key = "ConchShip_PresetKey_Ranshan_Chapter2_XuanzhiCombatPlayDecision";
				}
			}
			else
			{
				key = "ConchShip_PresetKey_Ranshan_Chapter2_HuajuCombatPlayDecision";
			}
			if (!true)
			{
			}
			sectMainStoryEventArgBox.Set(key, decision);
			EventHelper.SaveSectMainStoryEventArgBox(7);
		}

		// Token: 0x06002346 RID: 9030 RVA: 0x001BA5A0 File Offset: 0x001B87A0
		public static int GetRanshanChapter2CombatPlayDecision(short templateId)
		{
			int decision = 0;
			EventArgBox sectMainStoryEventArgBox = DomainManager.Extra.GetSectMainStoryEventArgBox(7);
			if (!true)
			{
			}
			string key;
			if (templateId != 660)
			{
				if (templateId != 661)
				{
					key = "ConchShip_PresetKey_Ranshan_Chapter2_YingjiaoCombatPlayDecision";
				}
				else
				{
					key = "ConchShip_PresetKey_Ranshan_Chapter2_XuanzhiCombatPlayDecision";
				}
			}
			else
			{
				key = "ConchShip_PresetKey_Ranshan_Chapter2_HuajuCombatPlayDecision";
			}
			if (!true)
			{
			}
			return sectMainStoryEventArgBox.Get(key, ref decision) ? decision : 0;
		}

		// Token: 0x06002347 RID: 9031 RVA: 0x001BA604 File Offset: 0x001B8804
		public static void SetThreeCorpsesCharacterCombatPlayDate(short templateId)
		{
			EventArgBox sectMainStoryEventArgBox = DomainManager.Extra.GetSectMainStoryEventArgBox(7);
			if (!true)
			{
			}
			string key;
			if (templateId != 660)
			{
				if (templateId != 661)
				{
					key = "ConchShip_PresetKey_Ranshan_Chapter2_YingjiaoCombatPlayDate";
				}
				else
				{
					key = "ConchShip_PresetKey_Ranshan_Chapter2_XuanzhiCombatPlayDate";
				}
			}
			else
			{
				key = "ConchShip_PresetKey_Ranshan_Chapter2_HuajuCombatPlayDate";
			}
			if (!true)
			{
			}
			sectMainStoryEventArgBox.Set(key, DomainManager.World.GetCurrDate());
			EventHelper.SaveSectMainStoryEventArgBox(7);
		}

		// Token: 0x06002348 RID: 9032 RVA: 0x001BA66C File Offset: 0x001B886C
		public static bool IsThreeCorpsesCharacterCombatPlayed(short templateId)
		{
			int currDate = DomainManager.World.GetCurrDate();
			int prevDate = -1;
			EventArgBox sectMainStoryEventArgBox = DomainManager.Extra.GetSectMainStoryEventArgBox(7);
			if (!true)
			{
			}
			string key;
			if (templateId != 660)
			{
				if (templateId != 661)
				{
					key = "ConchShip_PresetKey_Ranshan_Chapter2_YingjiaoCombatPlayDate";
				}
				else
				{
					key = "ConchShip_PresetKey_Ranshan_Chapter2_XuanzhiCombatPlayDate";
				}
			}
			else
			{
				key = "ConchShip_PresetKey_Ranshan_Chapter2_HuajuCombatPlayDate";
			}
			if (!true)
			{
			}
			return sectMainStoryEventArgBox.Get(key, ref prevDate) && prevDate == currDate;
		}

		// Token: 0x06002349 RID: 9033 RVA: 0x001BA6E0 File Offset: 0x001B88E0
		public static bool IsThreeCorpsesCharacterFirstTimeCombatPlay(short templateId)
		{
			return EventHelper.GetRanshanChapter2CombatPlayDecision(templateId) <= 0;
		}

		// Token: 0x0600234A RID: 9034 RVA: 0x001BA6FE File Offset: 0x001B88FE
		public static void SetRanshanChapter2ThreeCorpsesProgress(short templateId)
		{
			DomainManager.Extra.SetRanshanThreeCorpsesCharacterProgress(EventHelper.Domain.MainThreadDataContext, templateId);
		}

		// Token: 0x0600234B RID: 9035 RVA: 0x001BA718 File Offset: 0x001B8918
		public static sbyte GetRanshanChapter2ThreeCorpsesProgress(short templateId)
		{
			return DomainManager.Extra.GetRanshanThreeCorpsesCharacterByTemplateId(templateId).Progress;
		}

		// Token: 0x0600234C RID: 9036 RVA: 0x001BA73C File Offset: 0x001B893C
		public static bool IsRanshanChapter2ThreeCorpsesProgressDone(short templateId)
		{
			return EventHelper.GetRanshanChapter2ThreeCorpsesProgress(templateId) == 3;
		}

		// Token: 0x0600234D RID: 9037 RVA: 0x001BA757 File Offset: 0x001B8957
		public static void SetRanshanChapter2MenteeEnding(short templateId)
		{
			DomainManager.Extra.SetRanshanThreeCorpsesCharacterGoodEnd(EventHelper.Domain.MainThreadDataContext, templateId);
		}

		// Token: 0x0600234E RID: 9038 RVA: 0x001BA770 File Offset: 0x001B8970
		public static bool GetRanshanChapter2MenteeEnding(short templateId)
		{
			return DomainManager.Extra.GetRanshanThreeCorpsesCharacterByTemplateId(templateId).IsGoodEnd;
		}

		// Token: 0x0600234F RID: 9039 RVA: 0x001BA794 File Offset: 0x001B8994
		public static void PrepareRanshanChapter2BookGift(EventArgBox argBox)
		{
			EventSelectItemData selectItemData;
			bool flag = !argBox.Get<EventSelectItemData>("SelectItemInfo", out selectItemData);
			if (flag)
			{
				selectItemData = new EventSelectItemData
				{
					CanSelectItemList = new List<ItemDisplayData>(),
					FilterList = new List<SelectItemFilter>()
				};
				argBox.Set("SelectItemInfo", selectItemData);
			}
			SelectItemFilter filter = new SelectItemFilter
			{
				Key = "SelectedItemKey",
				DisplayDataFilterId = 0,
				FilterTemplateId = -1
			};
			Inventory inventory = DomainManager.Taiwu.GetTaiwu().GetInventory();
			foreach (KeyValuePair<ItemKey, int> pair in inventory.Items)
			{
				ItemKey itemKey = pair.Key;
				bool flag2 = itemKey.ItemType != 10;
				if (!flag2)
				{
					ItemDisplayData itemDisplayData = DomainManager.Item.GetItemDisplayData(itemKey, EventArgBox.TaiwuCharacterId);
					itemDisplayData.Amount = pair.Value;
					selectItemData.CanSelectItemList.Add(itemDisplayData);
				}
			}
			selectItemData.FilterList.Add(filter);
		}

		// Token: 0x06002350 RID: 9040 RVA: 0x001BA8B8 File Offset: 0x001B8AB8
		public static bool DoesThreeCorpsesCharacterLikeTheBook(short templateId, ItemKey itemKey)
		{
			SkillBookItem config = Config.SkillBook.Instance[itemKey.TemplateId];
			bool flag = config.ItemSubType == 1001;
			if (flag)
			{
				switch (templateId)
				{
				case 660:
				{
					sbyte b = config.CombatSkillType;
					return b == 2 || b == 10;
				}
				case 661:
				{
					sbyte b = config.CombatSkillType;
					return b == 0 || b == 7;
				}
				case 662:
				{
					sbyte b = config.CombatSkillType;
					return b == 1 || b == 4;
				}
				}
			}
			else
			{
				switch (templateId)
				{
				case 660:
				{
					sbyte b = config.LifeSkillType;
					return b - 4 <= 1 || b == 11;
				}
				case 661:
				{
					sbyte b = config.LifeSkillType;
					return b == 6 || b - 14 <= 1;
				}
				case 662:
				{
					sbyte b = config.LifeSkillType;
					return b == 1 || b == 8 || b == 12;
				}
				}
			}
			return false;
		}

		// Token: 0x06002351 RID: 9041 RVA: 0x001BAA2C File Offset: 0x001B8C2C
		public static short GetRanshanThreeCorpsesFavorabilityChangeByGiftBook(ItemKey itemKey, short templateId)
		{
			int delta = DomainManager.Item.GetBaseItem(itemKey).GetFavorabilityChange();
			foreach (short featureId in Config.Character.Instance[templateId].FeatureIds)
			{
				bool flag = featureId - 546 <= 2;
				bool flag2 = flag;
				if (flag2)
				{
					delta = delta * (int)CharacterFeature.Instance[featureId].FavorabilityIncrementFactor / 100;
					break;
				}
			}
			return (short)delta;
		}

		// Token: 0x06002352 RID: 9042 RVA: 0x001BAAD4 File Offset: 0x001B8CD4
		public static List<ValueTuple<ItemKey, int>> GetRanshanChapter2HuajuReward(int value)
		{
			List<ValueTuple<ItemKey, int>> list = new List<ValueTuple<ItemKey, int>>();
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			ItemKey itemKey = EventHelper.AddItemToRole(taiwu, 5, (short)(31 + value), 1, -1);
			list.Add(new ValueTuple<ItemKey, int>(itemKey, 1));
			return list;
		}

		// Token: 0x06002353 RID: 9043 RVA: 0x001BAB18 File Offset: 0x001B8D18
		public static List<ValueTuple<ItemKey, int>> GetRanshanChapter2XuanzhiReward(int value)
		{
			List<ValueTuple<ItemKey, int>> list = new List<ValueTuple<ItemKey, int>>();
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			ItemKey itemKey = EventHelper.AddItemToRole(taiwu, 9, (short)(4 + value), 1, -1);
			list.Add(new ValueTuple<ItemKey, int>(itemKey, 1));
			return list;
		}

		// Token: 0x06002354 RID: 9044 RVA: 0x001BAB5C File Offset: 0x001B8D5C
		public static List<ValueTuple<ItemKey, int>> GetRanshanChapter2YingjiaoReward(int value)
		{
			List<ValueTuple<ItemKey, int>> list = new List<ValueTuple<ItemKey, int>>();
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			ItemKey itemKey = EventHelper.AddItemToRole(taiwu, 8, (short)(101 + value), 1, -1);
			list.Add(new ValueTuple<ItemKey, int>(itemKey, 1));
			return list;
		}

		// Token: 0x06002355 RID: 9045 RVA: 0x001BABA0 File Offset: 0x001B8DA0
		public static bool GetRanshanChapter2YingjiaoSelection(int value)
		{
			bool selection = false;
			EventArgBox permanentArgBox = DomainManager.Extra.GetSectMainStoryEventArgBox(7);
			return permanentArgBox.Get((value == 1) ? "ConchShip_PresetKey_Ranshan_Chapter2_YingjiaoSelection1" : "ConchShip_PresetKey_Ranshan_Chapter2_YingjiaoSelection2", ref selection) && selection;
		}

		// Token: 0x06002356 RID: 9046 RVA: 0x001BABDA File Offset: 0x001B8DDA
		public static void SetRanshanChapter2YingjiaoSelection(int key, bool value)
		{
			DomainManager.Extra.GetSectMainStoryEventArgBox(7).Set((key == 1) ? "ConchShip_PresetKey_Ranshan_Chapter2_YingjiaoSelection1" : "ConchShip_PresetKey_Ranshan_Chapter2_YingjiaoSelection2", value);
			EventHelper.SaveSectMainStoryEventArgBox(7);
		}

		// Token: 0x06002357 RID: 9047 RVA: 0x001BAC08 File Offset: 0x001B8E08
		public static int GetRanshanThreeCorpsesFavorabilityProgress(short templateId)
		{
			sbyte favorabilityType = FavorabilityType.GetFavorabilityType(DomainManager.Character.GetFavorability(DomainManager.Extra.GetRanshanThreeCorpsesCharacterByTemplateId(templateId).Id, DomainManager.Taiwu.GetTaiwuCharId()));
			int result;
			switch (EventHelper.GetRanshanChapter2ThreeCorpsesProgress(templateId))
			{
			case 0:
				result = ((favorabilityType < 3) ? 0 : 1);
				break;
			case 1:
				result = ((favorabilityType < 4) ? 1 : 2);
				break;
			case 2:
				result = ((favorabilityType < 5) ? 2 : 3);
				break;
			default:
				result = 3;
				break;
			}
			return result;
		}

		// Token: 0x06002358 RID: 9048 RVA: 0x001BAC8C File Offset: 0x001B8E8C
		public static string GetRanshanChapter2ProgressEventGuid(short templateId)
		{
			SectStoryThreeCorpsesCharacter corpse = DomainManager.Extra.GetRanshanThreeCorpsesCharacterByTemplateId(templateId);
			int favorabilityProgress = EventHelper.GetRanshanThreeCorpsesFavorabilityProgress(templateId);
			string result;
			switch (templateId)
			{
			case 660:
			{
				if (!true)
				{
				}
				string text;
				switch (favorabilityProgress)
				{
				case 0:
					text = "f5b8c958-1e97-4668-aeeb-0faa956a8617";
					break;
				case 1:
					text = ((corpse.Progress < 1) ? "a3a84c93-f4b1-4eda-956d-58dab9b30e87" : "6fa29526-6fdd-4b9a-abc3-f5c092bb1734");
					break;
				case 2:
					text = ((corpse.Progress < 2) ? "1fa82c75-1ff2-47ae-b5e7-bef4155d3684" : "4fcd232c-2fee-4a9a-b0cf-e5252fa3c50a");
					break;
				default:
					text = "ffcb5ead-d7a9-4215-a6a3-cd488e91b7ca";
					break;
				}
				if (!true)
				{
				}
				result = text;
				break;
			}
			case 661:
			{
				if (!true)
				{
				}
				string text;
				switch (favorabilityProgress)
				{
				case 0:
					text = "8af384be-cac1-472f-8588-405cebe0bdfc";
					break;
				case 1:
					text = ((corpse.Progress < 1) ? "cb57f595-92b3-44a3-bac2-ae7bd916cc70" : "6b59079d-a365-4560-9f13-e342623e67ad");
					break;
				case 2:
					text = ((corpse.Progress < 2) ? "092b9bbd-3c2d-4cf0-a48c-10ced744d830" : "9e33a295-2b36-4795-b8e4-ea4764757f3b");
					break;
				default:
					text = "69b2bc16-74dd-4a8e-9a40-d2986e22e4f3";
					break;
				}
				if (!true)
				{
				}
				result = text;
				break;
			}
			case 662:
			{
				if (!true)
				{
				}
				string text;
				switch (favorabilityProgress)
				{
				case 0:
					text = "9ab9b3c4-50a6-49ff-b196-4a928c33e6e3";
					break;
				case 1:
					text = ((corpse.Progress < 1) ? "fcde53ed-b38c-4148-9782-dd67217ebc98" : "60ff3498-a5d9-430d-b549-93c2eaad9a39");
					break;
				case 2:
					text = ((corpse.Progress < 2) ? "1abda80f-5bb5-4a90-b047-94e45adc51a3" : "62591f75-06ad-4cfb-b227-d8e3ffc86d30");
					break;
				default:
					text = "dceb9a2b-f349-488a-b934-a84a113cfec4";
					break;
				}
				if (!true)
				{
				}
				result = text;
				break;
			}
			default:
				result = string.Empty;
				break;
			}
			return result;
		}

		// Token: 0x06002359 RID: 9049 RVA: 0x001BAE10 File Offset: 0x001B9010
		public static void HideRanshanThreeCorpsesCharacter(short templateId)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			GameData.Domains.Character.Character character = DomainManager.Character.GetOrCreateFixedCharacterByTemplateId(context, templateId);
			Events.RaiseFixedCharacterLocationChanged(context, character.GetId(), character.GetLocation(), Location.Invalid);
			character.SetLocation(Location.Invalid, context);
		}

		// Token: 0x0600235A RID: 9050 RVA: 0x001BAE5C File Offset: 0x001B905C
		public static string GetRanshanChapter2LetterContent(EventArgBox argBox)
		{
			StringBuilder stringBuilder = new StringBuilder();
			stringBuilder.AppendLine();
			bool flag = EventHelper.IsRanshanChapter2ThreeCorpsesProgressDone(660);
			if (flag)
			{
				stringBuilder.AppendLine(EventHelper.GetRanshanChapter2MenteeEnding(660) ? "<Language Key=Event_SectStoryRanshan_HuajuLetter_Description_Good/>" : "<Language Key=Event_SectStoryRanshan_HuajuLetter_Description_Bad/>");
			}
			bool flag2 = EventHelper.IsRanshanChapter2ThreeCorpsesProgressDone(661);
			if (flag2)
			{
				stringBuilder.AppendLine(EventHelper.GetRanshanChapter2MenteeEnding(661) ? "<Language Key=Event_SectStoryRanshan_XuanzhiLetter_Description_Good/>" : "<Language Key=Event_SectStoryRanshan_XuanzhiLetter_Description_Bad/>");
			}
			bool flag3 = EventHelper.IsRanshanChapter2ThreeCorpsesProgressDone(662);
			if (flag3)
			{
				stringBuilder.AppendLine(EventHelper.GetRanshanChapter2MenteeEnding(662) ? "<Language Key=Event_SectStoryRanshan_YingjiaoLetter_Description_Good/>" : "<Language Key=Event_SectStoryRanshan_YingjiaoLetter_Description_Bad/>");
			}
			return stringBuilder.ToString();
		}

		// Token: 0x0600235B RID: 9051 RVA: 0x001BAF0A File Offset: 0x001B910A
		public static void SetRanshanChapter3WillingToBeImmortal(bool res)
		{
			DomainManager.Extra.GetSectMainStoryEventArgBox(7).Set("ConchShip_PresetKey_Ranshan_Chapter3_WillingToBeImmortal", res);
			EventHelper.SaveSectMainStoryEventArgBox(7);
		}

		// Token: 0x0600235C RID: 9052 RVA: 0x001BAF2C File Offset: 0x001B912C
		public static bool GetRanshanChapter3WillingToBeImmortal()
		{
			bool decision = false;
			return DomainManager.Extra.GetSectMainStoryEventArgBox(7).Get("ConchShip_PresetKey_Ranshan_Chapter3_WillingToBeImmortal", ref decision) && decision;
		}

		// Token: 0x0600235D RID: 9053 RVA: 0x001BAF5C File Offset: 0x001B915C
		public static bool CreateRanshanChapter3Adventure()
		{
			MonthlyActionKey key = MonthlyEventActionsManager.PredefinedKeys["RanshanStoryDefault"];
			ConfigWrapperAction wrapperAction = (ConfigWrapperAction)EventHelper.Domain.GetMonthlyAction(key);
			bool flag = wrapperAction.CurrConfigMonthlyAction != null;
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				wrapperAction.CreateWrappedAction(82, -1);
				result = (wrapperAction.CurrConfigMonthlyAction != null);
			}
			return result;
		}

		// Token: 0x0600235E RID: 9054 RVA: 0x001BAFB4 File Offset: 0x001B91B4
		public static void InitializeRanshanFootman()
		{
			GameData.Domains.Character.Character footman = EventHelper.GetOrCreateFixedCharacterByTemplateId(625);
			DomainManager.Character.DirectlySetFavorabilities(EventHelper.Domain.MainThreadDataContext, footman.GetId(), DomainManager.Taiwu.GetTaiwuCharId(), 14000, 14000);
		}

		// Token: 0x0600235F RID: 9055 RVA: 0x001BAFFC File Offset: 0x001B91FC
		public static bool IsRanshanChapter3AbleToTrigger()
		{
			return DomainManager.Extra.IsExtraTaskInProgress(322) && EventHelper.IsTaiwuAtRanshanSettlement(true);
		}

		// Token: 0x06002360 RID: 9056 RVA: 0x001BB028 File Offset: 0x001B9228
		public static void SetCharacterSkeleton(int charId)
		{
			GameData.Domains.Character.Character character;
			bool flag = !DomainManager.Character.TryGetElement_Objects(charId, out character);
			if (!flag)
			{
				DataContext context = EventHelper.Domain.MainThreadDataContext;
				AvatarData avatarData = new AvatarData(character.GetAvatar());
				avatarData.ConvertAvatarToSkeleton();
				character.SetAvatar(avatarData, context);
				ItemKey oldClothingKey = character.GetEquipment()[4];
				sbyte grade = character.GetOrganizationInfo().Grade;
				if (!true)
				{
				}
				short num;
				if (grade <= 5)
				{
					if (grade >= 0)
					{
						if (grade <= 2)
						{
							num = 69;
							goto IL_D8;
						}
					}
					num = 70;
				}
				else
				{
					if (grade > 8)
					{
						DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(32, 2);
						defaultInterpolatedStringHandler.AppendLiteral("character ");
						defaultInterpolatedStringHandler.AppendFormatted<int>(charId);
						defaultInterpolatedStringHandler.AppendLiteral(" has an invalid grade ");
						defaultInterpolatedStringHandler.AppendFormatted<sbyte>(character.GetOrganizationInfo().Grade);
						throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
					}
					num = 71;
				}
				IL_D8:
				if (!true)
				{
				}
				short clothingId = num;
				ItemKey newClothingKey = DomainManager.Item.CreateItem(context, 3, clothingId);
				character.AddInventoryItem(context, newClothingKey, 1, false);
				character.ChangeEquipment(context, -1, 4, newClothingKey);
				bool flag2 = oldClothingKey.IsValid();
				if (flag2)
				{
					character.RemoveInventoryItem(context, oldClothingKey, 1, true, false);
				}
			}
		}

		// Token: 0x06002361 RID: 9057 RVA: 0x001BB158 File Offset: 0x001B9358
		public static void SetRanshanChapter3AdventureCharacterArgs(EventArgBox argBox)
		{
			MonthlyActionsItem config = MonthlyActions.Instance[82];
			int total = 0;
			IRandomSource random = EventHelper.Domain.MainThreadDataContext.Random;
			ushort betrayTags = 0;
			for (int i = 0; i < config.ParticipateTargetFilterList.Length; i++)
			{
				int count = argBox.GetAdventureParticipateCharacterCount(i);
				for (int j = 0; j < count; j++)
				{
					DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(13, 1);
					defaultInterpolatedStringHandler.AppendLiteral("RanshanMentee");
					defaultInterpolatedStringHandler.AppendFormatted<int>(total++);
					argBox.Set(defaultInterpolatedStringHandler.ToStringAndClear(), argBox.GetAdventureParticipateCharacter(i, j).GetId());
				}
			}
			argBox.Set("MenteeCount", total);
			int half = total / 2;
			for (int k = 0; k < half; k++)
			{
				betrayTags = BitOperation.SetBit(betrayTags, k, true);
			}
			for (int l = total - 1; l > 0; l--)
			{
				int swapIdx = random.Next(l + 1);
				bool a = BitOperation.GetBit(betrayTags, l);
				bool b = BitOperation.GetBit(betrayTags, swapIdx);
				betrayTags = BitOperation.SetBit(betrayTags, l, b);
				betrayTags = BitOperation.SetBit(betrayTags, swapIdx, a);
			}
			argBox.Set("BetrayTags", betrayTags);
		}

		// Token: 0x06002362 RID: 9058 RVA: 0x001BB29C File Offset: 0x001B949C
		public static void ResetRanshanChapter3AdventureSelectedCharacters(EventArgBox argBox)
		{
			argBox.Set("SelectedTags", 0);
		}

		// Token: 0x06002363 RID: 9059 RVA: 0x001BB2AC File Offset: 0x001B94AC
		public static bool IsRanshanChapter3CharacterContainsBetrayTag(EventArgBox argBox)
		{
			int charId = -1;
			bool flag = argBox.Get("CharA", ref charId);
			if (flag)
			{
				int total = argBox.GetInt("MenteeCount");
				ushort betrayTags = argBox.GetUshort("BetrayTags");
				for (int i = 0; i < total; i++)
				{
					DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(13, 1);
					defaultInterpolatedStringHandler.AppendLiteral("RanshanMentee");
					defaultInterpolatedStringHandler.AppendFormatted<int>(i);
					bool flag2 = argBox.GetInt(defaultInterpolatedStringHandler.ToStringAndClear()) == charId && BitOperation.GetBit(betrayTags, i);
					if (flag2)
					{
						return true;
					}
				}
			}
			return false;
		}

		// Token: 0x06002364 RID: 9060 RVA: 0x001BB350 File Offset: 0x001B9550
		public static void PickRanshanChapter3AdventureCharacters(EventArgBox argBox, int stage, bool needBetrayTag, bool betrayTag)
		{
			int total = argBox.GetInt("MenteeCount");
			ushort betrayTags = argBox.GetUshort("BetrayTags");
			int index = EventHelper.GetRanshanChapter3AdventureIntelligentCharacter(argBox, total, betrayTags, needBetrayTag, betrayTag, -1);
			DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(13, 1);
			defaultInterpolatedStringHandler.AppendLiteral("RanshanMentee");
			defaultInterpolatedStringHandler.AppendFormatted<int>(index);
			int charA = argBox.GetInt(defaultInterpolatedStringHandler.ToStringAndClear());
			int num;
			if (stage != 1)
			{
				num = EventHelper.GetRanshanChapter3AdventureTemporaryCharacter((int)DomainManager.Character.GetElement_Objects(charA).GetOrganizationInfo().Grade, stage);
			}
			else
			{
				defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(13, 1);
				defaultInterpolatedStringHandler.AppendLiteral("RanshanMentee");
				defaultInterpolatedStringHandler.AppendFormatted<int>(EventHelper.GetRanshanChapter3AdventureIntelligentCharacter(argBox, total, betrayTags, needBetrayTag, betrayTag, index));
				num = argBox.GetInt(defaultInterpolatedStringHandler.ToStringAndClear());
			}
			int charB = num;
			argBox.Set("CharA", charA);
			argBox.Set("CharB", charB);
		}

		// Token: 0x06002365 RID: 9061 RVA: 0x001BB428 File Offset: 0x001B9628
		public static int GetRanshanChapter3AdventureIntelligentCharacter(EventArgBox argBox, int total, ushort betrayTags, bool needBetrayTag, bool betrayTag, int banned = -1)
		{
			ushort selectedTags = argBox.GetUshort("SelectedTags");
			for (int i = 0; i < total; i++)
			{
				bool bit = BitOperation.GetBit(selectedTags, i);
				if (!bit)
				{
					bool flag = needBetrayTag && BitOperation.GetBit(betrayTags, i) != betrayTag;
					if (!flag)
					{
						bool flag2 = i == banned;
						if (!flag2)
						{
							selectedTags = BitOperation.SetBit(selectedTags, i, true);
							argBox.Set("SelectedTags", selectedTags);
							return i;
						}
					}
				}
			}
			EventHelper.ResetRanshanChapter3AdventureSelectedCharacters(argBox);
			for (int j = 0; j < total; j++)
			{
				bool flag3 = needBetrayTag && BitOperation.GetBit(betrayTags, j) != betrayTag;
				if (!flag3)
				{
					bool flag4 = j == banned;
					if (!flag4)
					{
						selectedTags = BitOperation.SetBit(selectedTags, j, true);
						argBox.Set("SelectedTags", selectedTags);
						return j;
					}
				}
			}
			return -1;
		}

		// Token: 0x06002366 RID: 9062 RVA: 0x001BB514 File Offset: 0x001B9714
		public static int GetRanshanChapter3AdventureTemporaryCharacter(int grade, int stage)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			if (!true)
			{
			}
			short num;
			switch (grade)
			{
			case 1:
				num = 370;
				break;
			case 2:
				num = 369;
				break;
			case 3:
				num = 368;
				break;
			default:
				num = 367;
				break;
			}
			if (!true)
			{
			}
			short templateId = num;
			int charId = EventHelper.CreateNonIntelligentCharacter(templateId);
			int currAge = context.Random.Next(40, 60) + ((stage == 2) ? 0 : 20);
			GameData.Domains.Character.Character character = DomainManager.Character.GetElement_Objects(charId);
			character.SetCurrAge((short)currAge, context);
			character.SetHealth(character.GetMaxHealth(), context);
			character.SetAvatar(context, character.GetAvatar());
			return charId;
		}

		// Token: 0x06002367 RID: 9063 RVA: 0x001BB5D4 File Offset: 0x001B97D4
		public static void RanshanChapter3AdventureAllCharacterChangeAge(EventArgBox argBox, int delta = 0)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			CharacterSet currTeammate;
			bool flag = !argBox.Get<CharacterSet>("Teammate", out currTeammate);
			if (flag)
			{
				currTeammate = default(CharacterSet);
			}
			HashSet<int> collection = DomainManager.Taiwu.GetGroupCharIds().GetCollection();
			foreach (int charId in collection)
			{
				GameData.Domains.Character.Character character;
				bool flag2 = DomainManager.Character.TryGetElement_Objects(charId, out character);
				if (flag2)
				{
					DomainManager.Character.RevertAllTemporaryModifications(context, character);
					bool flag3 = delta > 0;
					if (flag3)
					{
						DomainManager.Character.TemporarilyModifyHealth(EventHelper.Domain.MainThreadDataContext, character, (short)((int)character.GetHealth() + delta * 10));
						DomainManager.Character.TemporarilyModifyCurrAge(EventHelper.Domain.MainThreadDataContext, character, (short)((int)character.GetCurrAge() + delta));
					}
					character.SetAvatar(context, character.GetAvatar());
					bool flag4 = EventHelper.IsCharacterWearingChildClothing(character);
					if (flag4)
					{
						character.ForceReplaceClothing(context, 0);
					}
				}
				currTeammate.Add(charId);
			}
			GameData.Domains.Character.Character footman = EventHelper.GetOrCreateFixedCharacterByTemplateId(625);
			DomainManager.Character.RevertAllTemporaryModifications(context, footman);
			bool flag5 = delta > 0;
			if (flag5)
			{
				DomainManager.Character.TemporarilyModifyHealth(EventHelper.Domain.MainThreadDataContext, footman, (short)((int)footman.GetHealth() + delta * 10));
				DomainManager.Character.TemporarilyModifyCurrAge(EventHelper.Domain.MainThreadDataContext, footman, (short)((int)footman.GetCurrAge() + delta));
			}
			footman.SetAvatar(context, footman.GetAvatar());
			bool flag6 = EventHelper.IsCharacterWearingChildClothing(footman);
			if (flag6)
			{
				footman.ForceReplaceClothing(context, 37);
			}
			else
			{
				EventHelper.ReplaceCharacterClothingForChild(footman);
			}
			int total = argBox.GetInt("MenteeCount");
			ushort selectedTags = argBox.GetUshort("SelectedTags");
			argBox.Set("EventCharacterId", argBox.GetInt("RanshanMentee0"));
			for (int i = 0; i < total; i++)
			{
				DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(13, 1);
				defaultInterpolatedStringHandler.AppendLiteral("RanshanMentee");
				defaultInterpolatedStringHandler.AppendFormatted<int>(i);
				int charId2 = argBox.GetInt(defaultInterpolatedStringHandler.ToStringAndClear());
				GameData.Domains.Character.Character character2 = DomainManager.Character.GetElement_Objects(charId2);
				DomainManager.Character.RevertAllTemporaryModifications(context, character2);
				bool flag7 = delta > 0;
				if (flag7)
				{
					DomainManager.Character.TemporarilyModifyHealth(EventHelper.Domain.MainThreadDataContext, character2, (short)((int)character2.GetHealth() + delta * 10));
					DomainManager.Character.TemporarilyModifyCurrAge(EventHelper.Domain.MainThreadDataContext, character2, (short)((int)character2.GetCurrAge() + delta));
				}
				character2.SetAvatar(context, character2.GetAvatar());
				bool bit = BitOperation.GetBit(selectedTags, i);
				if (bit)
				{
					argBox.Set("EventCharacterId", charId2);
				}
			}
			bool flag8 = delta == 0 && currTeammate.GetCount() > 0;
			if (flag8)
			{
				HashSet<int> collectionAllTeammate = currTeammate.GetCollection();
				foreach (int charId3 in collectionAllTeammate)
				{
					GameData.Domains.Character.Character character3;
					bool flag9 = DomainManager.Character.TryGetElement_Objects(charId3, out character3);
					if (flag9)
					{
						DomainManager.Character.RevertAllTemporaryModifications(context, character3);
						EventHelper.ReplaceCharacterClothingForChild(character3);
					}
				}
			}
			argBox.Set("Teammate", currTeammate);
		}

		// Token: 0x06002368 RID: 9064 RVA: 0x001BB958 File Offset: 0x001B9B58
		public static bool IsCharacterWearingChildClothing(GameData.Domains.Character.Character character)
		{
			short templateId = character.GetEquipment()[4].TemplateId;
			return templateId - 64 <= 1;
		}

		// Token: 0x06002369 RID: 9065 RVA: 0x001BB98C File Offset: 0x001B9B8C
		public static void ReplaceCharacterClothingForChild(GameData.Domains.Character.Character character)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			sbyte ageGroup = character.GetAgeGroup();
			bool flag = ageGroup == 1;
			if (flag)
			{
				character.ForceReplaceClothing(context, 65);
			}
			else
			{
				bool flag2 = ageGroup == 0;
				if (flag2)
				{
					character.ForceReplaceClothing(context, 64);
				}
			}
		}

		// Token: 0x0600236A RID: 9066 RVA: 0x001BB9D4 File Offset: 0x001B9BD4
		public static void ApplyRanshanChapter3AdventureBeatSkeleton(EventArgBox argBox)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			int charId = argBox.GetInt("CharA");
			GameData.Domains.Character.Character character;
			SectCharacter sectCharacter;
			bool flag = DomainManager.Character.TryGetElement_Objects(charId, out character) && DomainManager.Organization.TryGetElement_SectCharacters(charId, out sectCharacter);
			if (flag)
			{
				EventHelper.DirectlyChangeFavorabilityOptionalStoryEvent(character, taiwu, 6000);
				character.ChangeHappiness(context, -20);
				EventHelper.SetSectCharApprovedTaiwu(charId, true);
			}
		}

		// Token: 0x0600236B RID: 9067 RVA: 0x001BBA4C File Offset: 0x001B9C4C
		public static bool IsRanshanChapter4AbleToTrigger()
		{
			return DomainManager.Extra.IsExtraTaskInProgress(298);
		}

		// Token: 0x0600236C RID: 9068 RVA: 0x001BBA70 File Offset: 0x001B9C70
		public static bool IsRanshanMenteeGoodStoryEnding()
		{
			return DomainManager.Extra.IsRanshanMenteeGoodStoryEnding();
		}

		// Token: 0x0600236D RID: 9069 RVA: 0x001BBA8C File Offset: 0x001B9C8C
		public static void RemoveRanshanStoryItems()
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			ItemKey itemKey = EventHelper.GetInventoryItem(taiwu, 12, 268);
			bool flag = itemKey.IsValid();
			if (flag)
			{
				EventHelper.RemoveInventoryItem(taiwu, itemKey, 1, true);
			}
			itemKey = EventHelper.GetInventoryItem(taiwu, 12, 269);
			bool flag2 = itemKey.IsValid();
			if (flag2)
			{
				EventHelper.RemoveInventoryItem(taiwu, itemKey, 1, true);
			}
			itemKey = EventHelper.GetInventoryItem(taiwu, 12, 270);
			bool flag3 = itemKey.IsValid();
			if (flag3)
			{
				EventHelper.RemoveInventoryItem(taiwu, itemKey, 1, true);
			}
		}

		// Token: 0x0600236E RID: 9070 RVA: 0x001BBB10 File Offset: 0x001B9D10
		public static GameData.Domains.Character.Character GetOrCreateRanshanZhuxian()
		{
			short templateId = SectMainStoryRelatedConstants.GetRanshanZhuxianTemplateId();
			return DomainManager.Character.GetOrCreateFixedCharacterByTemplateId(EventHelper.Domain.MainThreadDataContext, templateId);
		}

		// Token: 0x0600236F RID: 9071 RVA: 0x001BBB3D File Offset: 0x001B9D3D
		public static void AddDisplayEventLegendaryBookKeeping()
		{
			DomainManager.Extra.AddDisplayEventLegendaryBookKeeping(EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x06002370 RID: 9072 RVA: 0x001BBB55 File Offset: 0x001B9D55
		public static void SetRanshanThreeCorpsesCharacterFollowing(short templateId, bool value)
		{
			DomainManager.Extra.SetRanshanThreeCorpsesCharacterFollowing(EventHelper.Domain.MainThreadDataContext, templateId, value);
		}

		// Token: 0x06002371 RID: 9073 RVA: 0x001BBB70 File Offset: 0x001B9D70
		public static bool GetRanshanThreeCorpsesCharacterFollowing(short templateId)
		{
			return DomainManager.Extra.GetRanshanThreeCorpsesCharacterByTemplateId(templateId).IsAroundTaiwu;
		}

		// Token: 0x06002372 RID: 9074 RVA: 0x001BBB92 File Offset: 0x001B9D92
		public static void StopRanshanThreeCorpsesGiveUpAction(short characterTemplateId)
		{
			DomainManager.Extra.ApplyRanshanThreeCorpsesLegendaryBookActionResult(EventHelper.Domain.MainThreadDataContext, characterTemplateId, -1, false);
		}

		// Token: 0x06002373 RID: 9075 RVA: 0x001BBBB0 File Offset: 0x001B9DB0
		public static bool IsRanshanThreeCorpsesInAction(short characterTemplateId)
		{
			return DomainManager.Extra.GetRanshanThreeCorpsesCharacterByTemplateId(characterTemplateId).Target >= 0;
		}

		// Token: 0x06002374 RID: 9076 RVA: 0x001BBBD8 File Offset: 0x001B9DD8
		public static bool IsAbleToTriggerThreeCorpsesPassLegacyEvent(short characterTemplateId)
		{
			bool flag = !EventHelper.IsExtraTaskChainInProgress(49);
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				SectStoryThreeCorpsesCharacter data = DomainManager.Extra.GetRanshanThreeCorpsesCharacterByTemplateId(characterTemplateId);
				result = (data.TaiwuId != DomainManager.Taiwu.GetTaiwuCharId() && !data.PassLegacyEventTriggered);
			}
			return result;
		}

		// Token: 0x06002375 RID: 9077 RVA: 0x001BBC26 File Offset: 0x001B9E26
		public static void SetRanshanThreeCorpsesCharacterPassLegacyEventTriggered(short characterTemplateId)
		{
			DomainManager.Extra.SetRanshanThreeCorpsesCharacterPassLegacyEventTriggered(EventHelper.Domain.MainThreadDataContext, characterTemplateId);
		}

		// Token: 0x06002376 RID: 9078 RVA: 0x001BBC40 File Offset: 0x001B9E40
		public static void ShaolinShaolinTriggerStatueReturn(string nextEvent, EventArgBox argBox)
		{
			EventArgBox sectArgBox = EventHelper.GetSectMainStoryEventArgBox(1);
			sectArgBox.Set("ConchShip_PresetKey_ShaolinStatueReturnTriggered", true);
			EventHelper.SaveSectMainStoryEventArgBox(1);
			GameData.Domains.Character.Character taiwu = argBox.GetCharacter("RoleTaiwu");
			ItemKey itemKey = EventHelper.AddItemToRole(taiwu, 12, 247, 1, -1);
			EventHelper.ShowGetItemPageForItems(new List<ValueTuple<ItemKey, int>>
			{
				new ValueTuple<ItemKey, int>(itemKey, 1)
			}, nextEvent, argBox, false);
		}

		// Token: 0x06002377 RID: 9079 RVA: 0x001BBCA4 File Offset: 0x001B9EA4
		public static void ShaolinReplaceStatue(short newStatueTemplateId, string afterEvent, EventArgBox argBox)
		{
			EventHelper.ShaolinClearStatue();
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			ItemKey itemKey = EventHelper.AddItemToRole(taiwu, 12, newStatueTemplateId, 1, -1);
			EventHelper.ShowGetItemPageForItems(new List<ValueTuple<ItemKey, int>>
			{
				new ValueTuple<ItemKey, int>(itemKey, 1)
			}, afterEvent, argBox, false);
		}

		// Token: 0x06002378 RID: 9080 RVA: 0x001BBCEC File Offset: 0x001B9EEC
		public static void ShaolinClearStatue()
		{
			EventHelper.<>c__DisplayClass1712_0 CS$<>8__locals1;
			CS$<>8__locals1.taiwu = DomainManager.Taiwu.GetTaiwu();
			EventHelper.<ShaolinClearStatue>g__RemoveStatue|1712_0(247, ref CS$<>8__locals1);
			EventHelper.<ShaolinClearStatue>g__RemoveStatue|1712_0(264, ref CS$<>8__locals1);
			EventHelper.<ShaolinClearStatue>g__RemoveStatue|1712_0(265, ref CS$<>8__locals1);
			EventHelper.<ShaolinClearStatue>g__RemoveStatue|1712_0(271, ref CS$<>8__locals1);
		}

		// Token: 0x06002379 RID: 9081 RVA: 0x001BBD40 File Offset: 0x001B9F40
		public static int ShaolinGetDamoFightTimes()
		{
			EventArgBox sectArgBox = DomainManager.Extra.GetSectMainStoryEventArgBox(1);
			return sectArgBox.GetInt("ConchShip_PresetKey_ShaolinDamoFightTimes");
		}

		// Token: 0x0600237A RID: 9082 RVA: 0x001BBD6C File Offset: 0x001B9F6C
		public static bool ShaolinLearnCombatSkill(string afterEvent, EventArgBox argBox)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			EventArgBox sectArgBox = DomainManager.Extra.GetSectMainStoryEventArgBox(1);
			sbyte combatSkillType = -1;
			combatSkillType = ((sectArgBox.Get("ConchShip_PresetKey_ShaolinCombatSkillType", ref combatSkillType) && combatSkillType >= 0) ? combatSkillType : 0);
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			int taiwuCharId = DomainManager.Taiwu.GetTaiwuCharId();
			Dictionary<short, GameData.Domains.CombatSkill.CombatSkill> learnedCombatSkills = DomainManager.CombatSkill.GetCharCombatSkills(taiwuCharId);
			int expectedGradeGroup = sectArgBox.GetInt("ConchShip_PresetKey_ShaolinDamoFightTimes");
			IReadOnlyList<CombatSkillItem> learnableCombatSkills = CombatSkillDomain.GetLearnableCombatSkills(1, combatSkillType);
			sbyte directProb = argBox.GetBool("Reverse") ? 0 : 100;
			List<ValueTuple<ItemKey, int>> bookItemKeys = new List<ValueTuple<ItemKey, int>>();
			foreach (CombatSkillItem combatSkillCfg in learnableCombatSkills)
			{
				bool flag = (int)CombatSkillDomain.GetCombatSkillGradeGroup(combatSkillCfg.Grade, 1, combatSkillType) != expectedGradeGroup;
				if (!flag)
				{
					bool flag2 = !learnedCombatSkills.ContainsKey(combatSkillCfg.TemplateId);
					if (flag2)
					{
						EventHelper.LearnCombatSkill(taiwuCharId, combatSkillCfg.TemplateId);
					}
					short bookTemplateId = combatSkillCfg.BookId;
					ItemKey itemKey = DomainManager.Item.CreateSkillBook(context, bookTemplateId, 5, -1, -1, directProb, true);
					taiwu.AddInventoryItem(context, itemKey, 1, false);
					bookItemKeys.Add(new ValueTuple<ItemKey, int>(itemKey, 1));
				}
			}
			bool flag3 = bookItemKeys.Count <= 0;
			bool result;
			if (flag3)
			{
				result = false;
			}
			else
			{
				TaskInfoItem taskInfo = TaskInfo.Instance[224];
				string[] combatSkillIdsEventArgBoxKey = taskInfo.CombatSkillIdsEventArgBoxKey;
				bool flag4 = combatSkillIdsEventArgBoxKey != null && combatSkillIdsEventArgBoxKey.Length > 0;
				if (flag4)
				{
					for (int i = 0; i < taskInfo.CombatSkillIdsEventArgBoxKey.Length; i++)
					{
						string key = taskInfo.CombatSkillIdsEventArgBoxKey[i];
						int bookId = (int)((i < bookItemKeys.Count) ? bookItemKeys[i].Item1.TemplateId : -1);
						int value = (int)((bookId >= 0) ? Config.SkillBook.Instance[bookId].CombatSkillTemplateId : -1);
						sectArgBox.Set(key, value);
					}
				}
				DomainManager.Extra.SaveSectMainStoryEventArgumentBox(context, 1);
				EventHelper.ShowGetItemPageForItems(bookItemKeys, afterEvent, argBox, false);
				result = true;
			}
			return result;
		}

		// Token: 0x0600237B RID: 9083 RVA: 0x001BBFA4 File Offset: 0x001BA1A4
		public static void ShaolinGetSutraMiddle(string afterEvent, EventArgBox argBox)
		{
			EventHelper.ShaolinGetSutraBooks(afterEvent, argBox, 3, 5);
		}

		// Token: 0x0600237C RID: 9084 RVA: 0x001BBFB1 File Offset: 0x001BA1B1
		public static void ShaolinGetSutraHigh(string afterEvent, EventArgBox argBox)
		{
			EventHelper.ShaolinGetSutraBooks(afterEvent, argBox, 6, 8);
		}

		// Token: 0x0600237D RID: 9085 RVA: 0x001BBFC0 File Offset: 0x001BA1C0
		private static void ShaolinGetSutraBooks(string afterEvent, EventArgBox argBox, sbyte beginGrade, sbyte endGrade)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			List<ValueTuple<ItemKey, int>> bookItemKeys = new List<ValueTuple<ItemKey, int>>();
			DomainManager.World.ShaolinGetSutraBooks(context, beginGrade, endGrade, delegate(ItemKey itemKey)
			{
				EventHelper.AddInventoryItem(taiwu, itemKey, 1);
				bookItemKeys.Add(new ValueTuple<ItemKey, int>(itemKey, 1));
			});
			EventHelper.ShowGetItemPageForItems(bookItemKeys, afterEvent, argBox, false);
		}

		// Token: 0x0600237E RID: 9086 RVA: 0x001BC024 File Offset: 0x001BA224
		public static bool ShaolinSutraBooksIsRead()
		{
			short lifeSkillTemplateId = -1;
			EventArgBox sectArgBox = EventHelper.GetSectMainStoryEventArgBox(1);
			bool flag = !sectArgBox.Get("ConchShip_PresetKey_ShaolinReadingMaxGradeSutra", ref lifeSkillTemplateId) || lifeSkillTemplateId < 0;
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
				int lifeSkillIndex = taiwu.FindLearnedLifeSkillIndex(lifeSkillTemplateId);
				bool flag2 = lifeSkillIndex < 0;
				if (flag2)
				{
					result = false;
				}
				else
				{
					List<GameData.Domains.Character.LifeSkillItem> learnedLifeSkills = taiwu.GetLearnedLifeSkills();
					result = (learnedLifeSkills[lifeSkillIndex].GetReadPagesCount() >= 3);
				}
			}
			return result;
		}

		// Token: 0x0600237F RID: 9087 RVA: 0x001BC0A4 File Offset: 0x001BA2A4
		public static void ShaolinGetWellWornShoe(string afterEvent, EventArgBox argBox)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			ItemKey itemKey = DomainManager.Item.CreateAccessory(context, 252, 1);
			EventHelper.AddInventoryItem(taiwu, itemKey, 1);
			EventHelper.ShowGetItemPageForItems(new List<ValueTuple<ItemKey, int>>
			{
				new ValueTuple<ItemKey, int>(itemKey, 1)
			}, afterEvent, argBox, false);
		}

		// Token: 0x06002380 RID: 9088 RVA: 0x001BC100 File Offset: 0x001BA300
		public static short ShaolinLifeSkillCombatPractice()
		{
			EventArgBox argBox = DomainManager.Extra.GetSectMainStoryEventArgBox(1);
			sbyte combatSkillType = -1;
			bool flag = !argBox.Get("ConchShip_PresetKey_ShaolinCombatSkillType", ref combatSkillType) || combatSkillType < 0;
			short result;
			if (flag)
			{
				result = -1;
			}
			else
			{
				int taiwuCharId = DomainManager.Taiwu.GetTaiwuCharId();
				Dictionary<short, GameData.Domains.CombatSkill.CombatSkill> learnedCombatSkills = DomainManager.CombatSkill.GetCharCombatSkills(taiwuCharId);
				int expectedGradeGroup = argBox.GetInt("ConchShip_PresetKey_ShaolinDamoFightTimes");
				List<GameData.Domains.CombatSkill.CombatSkill> unfinishedSkills = ObjectPool<List<GameData.Domains.CombatSkill.CombatSkill>>.Instance.Get();
				IReadOnlyList<CombatSkillItem> learnableCombatSkills = CombatSkillDomain.GetLearnableCombatSkills(1, combatSkillType);
				foreach (CombatSkillItem combatSkillCfg in learnableCombatSkills)
				{
					bool flag2 = (int)CombatSkillDomain.GetCombatSkillGradeGroup(combatSkillCfg.Grade, 1, combatSkillType) != expectedGradeGroup;
					if (!flag2)
					{
						GameData.Domains.CombatSkill.CombatSkill combatSkill;
						bool flag3 = !learnedCombatSkills.TryGetValue(combatSkillCfg.TemplateId, out combatSkill);
						if (!flag3)
						{
							bool flag4 = CombatSkillStateHelper.IsBrokenOut(combatSkill.GetActivationState());
							if (!flag4)
							{
								unfinishedSkills.Add(combatSkill);
							}
						}
					}
				}
				unfinishedSkills.Sort((GameData.Domains.CombatSkill.CombatSkill lhs, GameData.Domains.CombatSkill.CombatSkill rhs) => lhs.Template.Grade.CompareTo(rhs.Template.Grade));
				GameData.Domains.CombatSkill.CombatSkill skill = (unfinishedSkills.Count > 0) ? unfinishedSkills[0] : null;
				ObjectPool<List<GameData.Domains.CombatSkill.CombatSkill>>.Instance.Return(unfinishedSkills);
				bool flag5 = skill == null;
				if (flag5)
				{
					result = -1;
				}
				else
				{
					int expAdd = (int)(Config.SkillBreakPlate.Instance[skill.Template.Grade].CostExp * 5);
					EventHelper.ChangeRoleExp(DomainManager.Taiwu.GetTaiwu(), expAdd);
					result = skill.GetId().SkillTemplateId;
				}
			}
			return result;
		}

		// Token: 0x06002381 RID: 9089 RVA: 0x001BC2AC File Offset: 0x001BA4AC
		public static int GetSectMainStoryCombatTimesShaolin()
		{
			return DomainManager.World.GetSectMainStoryCombatTimesShaolin();
		}

		// Token: 0x06002382 RID: 9090 RVA: 0x001BC2C8 File Offset: 0x001BA4C8
		public static short GetTrialDamoTemplateId()
		{
			int num = EventHelper.ShaolinGetDamoFightTimes();
			if (!true)
			{
			}
			short result;
			if (num != 0)
			{
				if (num != 1)
				{
					result = 542;
				}
				else
				{
					result = 541;
				}
			}
			else
			{
				result = 540;
			}
			if (!true)
			{
			}
			return result;
		}

		// Token: 0x06002383 RID: 9091 RVA: 0x001BC30C File Offset: 0x001BA50C
		public static short GetFinalDamoTemplateId()
		{
			return 542;
		}

		// Token: 0x06002384 RID: 9092 RVA: 0x001BC314 File Offset: 0x001BA514
		public static bool ShaolinLearnedAllCombatSkill()
		{
			int taiwuCharId = DomainManager.Taiwu.GetTaiwuCharId();
			Dictionary<short, GameData.Domains.CombatSkill.CombatSkill> learnedCombatSkills = DomainManager.CombatSkill.GetCharCombatSkills(taiwuCharId);
			IReadOnlyList<IReadOnlyList<CombatSkillItem>> learnableCombatSkills = CombatSkillDomain.GetLearnableCombatSkills(1);
			foreach (IReadOnlyList<CombatSkillItem> combatSkills in learnableCombatSkills)
			{
				foreach (CombatSkillItem skillConfig in combatSkills)
				{
					bool flag = !learnedCombatSkills.ContainsKey(skillConfig.TemplateId);
					if (flag)
					{
						return false;
					}
				}
			}
			return true;
		}

		// Token: 0x06002385 RID: 9093 RVA: 0x001BC3D4 File Offset: 0x001BA5D4
		public static bool ShaolinHasUnlearnCombatSkill()
		{
			EventArgBox argBox = DomainManager.Extra.GetSectMainStoryEventArgBox(1);
			sbyte combatSkillType = -1;
			bool flag = !argBox.Get("ConchShip_PresetKey_ShaolinCombatSkillType", ref combatSkillType) || combatSkillType < 0;
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				int taiwuCharId = DomainManager.Taiwu.GetTaiwuCharId();
				Dictionary<short, GameData.Domains.CombatSkill.CombatSkill> learnedCombatSkills = DomainManager.CombatSkill.GetCharCombatSkills(taiwuCharId);
				int expectedGradeGroup = argBox.GetInt("ConchShip_PresetKey_ShaolinDamoFightTimes");
				IReadOnlyList<CombatSkillItem> learnableCombatSkills = CombatSkillDomain.GetLearnableCombatSkills(1, combatSkillType);
				foreach (CombatSkillItem combatSkillCfg in learnableCombatSkills)
				{
					bool flag2 = (int)CombatSkillDomain.GetCombatSkillGradeGroup(combatSkillCfg.Grade, 1, combatSkillType) != expectedGradeGroup;
					if (!flag2)
					{
						bool flag3 = !learnedCombatSkills.ContainsKey(combatSkillCfg.TemplateId);
						if (flag3)
						{
							return true;
						}
					}
				}
				result = false;
			}
			return result;
		}

		// Token: 0x06002386 RID: 9094 RVA: 0x001BC4C0 File Offset: 0x001BA6C0
		public static bool ShaolinHasUnfinishedCombatSkill()
		{
			EventArgBox argBox = DomainManager.Extra.GetSectMainStoryEventArgBox(1);
			sbyte combatSkillType = -1;
			bool flag = !argBox.Get("ConchShip_PresetKey_ShaolinCombatSkillType", ref combatSkillType) || combatSkillType < 0;
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				int taiwuCharId = DomainManager.Taiwu.GetTaiwuCharId();
				Dictionary<short, GameData.Domains.CombatSkill.CombatSkill> learnedCombatSkills = DomainManager.CombatSkill.GetCharCombatSkills(taiwuCharId);
				int expectedGradeGroup = argBox.GetInt("ConchShip_PresetKey_ShaolinDamoFightTimes");
				IReadOnlyList<CombatSkillItem> learnableCombatSkills = CombatSkillDomain.GetLearnableCombatSkills(1, combatSkillType);
				foreach (CombatSkillItem combatSkillCfg in learnableCombatSkills)
				{
					bool flag2 = (int)CombatSkillDomain.GetCombatSkillGradeGroup(combatSkillCfg.Grade, 1, combatSkillType) != expectedGradeGroup;
					if (!flag2)
					{
						GameData.Domains.CombatSkill.CombatSkill combatSkill;
						bool flag3 = !learnedCombatSkills.TryGetValue(combatSkillCfg.TemplateId, out combatSkill);
						if (!flag3)
						{
							bool flag4 = !CombatSkillStateHelper.IsBrokenOut(combatSkill.GetActivationState());
							if (flag4)
							{
								return true;
							}
						}
					}
				}
				result = false;
			}
			return result;
		}

		// Token: 0x06002387 RID: 9095 RVA: 0x001BC5C4 File Offset: 0x001BA7C4
		public static bool CharacterIsShaolinBuddhistAbbot(GameData.Domains.Character.Character character)
		{
			OrganizationInfo organizationInfo = character.GetOrganizationInfo();
			return organizationInfo.OrgTemplateId == 1 && organizationInfo.Grade == 8;
		}

		// Token: 0x06002388 RID: 9096 RVA: 0x001BC5F4 File Offset: 0x001BA7F4
		public static bool CharacterIsShaolinMember(GameData.Domains.Character.Character character)
		{
			return character.GetOrganizationInfo().OrgTemplateId == 1;
		}

		// Token: 0x06002389 RID: 9097 RVA: 0x001BC614 File Offset: 0x001BA814
		public static bool ShaolinSutraPavilionEntryPermit()
		{
			Settlement settlement = DomainManager.Organization.GetSettlementByOrgTemplateId(1);
			EventHelper.<>c__DisplayClass1729_0 CS$<>8__locals1;
			CS$<>8__locals1.orgMembers = settlement.GetMembers();
			return EventHelper.<ShaolinSutraPavilionEntryPermit>g__AnyApprovedTaiwu|1729_0(6, ref CS$<>8__locals1) || EventHelper.<ShaolinSutraPavilionEntryPermit>g__AnyApprovedTaiwu|1729_0(7, ref CS$<>8__locals1) || EventHelper.<ShaolinSutraPavilionEntryPermit>g__AnyApprovedTaiwu|1729_0(8, ref CS$<>8__locals1);
		}

		// Token: 0x0600238A RID: 9098 RVA: 0x001BC660 File Offset: 0x001BA860
		public static bool ShaolinSutraPavilionGuarding()
		{
			EventArgBox sectArgBox = EventHelper.GetSectMainStoryEventArgBox(1);
			return EventHelper.GetGameDate() == sectArgBox.GetInt("ConchShip_PresetKey_ShaolinSutraPavilionGuardDate");
		}

		// Token: 0x0600238B RID: 9099 RVA: 0x001BC68C File Offset: 0x001BA88C
		public static void SetShaolinSutraPavilionGuard()
		{
			int currDate = EventHelper.GetGameDate();
			EventHelper.SaveArgToSectMainStory<int>(1, "ConchShip_PresetKey_ShaolinSutraPavilionGuardDate", currDate);
		}

		// Token: 0x0600238C RID: 9100 RVA: 0x001BC6B0 File Offset: 0x001BA8B0
		public static void ShaolinToEventCombatSutraPavilion(EventArgBox argBox, string winEvent, string failEvent, string fleeEvent)
		{
			sbyte resultType = 0;
			bool flag = argBox.Get("CombatResult", ref resultType);
			string nextEvent;
			if (flag)
			{
				nextEvent = (CombatResultType.IsPlayerWin(resultType) ? winEvent : ((resultType == 2) ? fleeEvent : failEvent));
			}
			else
			{
				nextEvent = string.Empty;
			}
			EventHelper.ToEvent(nextEvent);
		}

		// Token: 0x0600238D RID: 9101 RVA: 0x001BC6F4 File Offset: 0x001BA8F4
		public static bool ShaolinInteractMythOptionVisible(EventArgBox argBox)
		{
			GameData.Domains.Character.Character character = argBox.GetCharacter("CharacterId");
			return EventHelper.CharacterIsShaolinMember(character) && EventHelper.IsExtraTaskInProgress(136) && EventHelper.LocationInOrganizationBelongBlocks(character.GetLocation(), 1);
		}

		// Token: 0x0600238E RID: 9102 RVA: 0x001BC738 File Offset: 0x001BA938
		public static bool LocationInOrganizationBelongBlocks(Location location, sbyte orgTemplateId)
		{
			Settlement settlement = DomainManager.Organization.GetSettlementByOrgTemplateId(orgTemplateId);
			bool flag = settlement == null;
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				Location settlementLocation = settlement.GetLocation();
				bool flag2 = settlementLocation.AreaId != location.AreaId;
				if (flag2)
				{
					result = false;
				}
				else
				{
					List<MapBlockData> blocks = ObjectPool<List<MapBlockData>>.Instance.Get();
					DomainManager.Map.QueryRegularBelongBlocks(blocks, settlementLocation, true, Array.Empty<MapDomain.MapBlockDataFilter>());
					bool anyIn = blocks.Any((MapBlockData block) => block.BlockId == location.BlockId);
					ObjectPool<List<MapBlockData>>.Instance.Return(blocks);
					result = anyIn;
				}
			}
			return result;
		}

		// Token: 0x0600238F RID: 9103 RVA: 0x001BC7DC File Offset: 0x001BA9DC
		public static void OpenShaolinMeditationInteraction()
		{
			EventHelper.SaveArgToSectMainStory<bool>(1, "ConchShip_PresetKey_ShaolinMeditationInteractionActivated", true);
		}

		// Token: 0x06002390 RID: 9104 RVA: 0x001BC7EC File Offset: 0x001BA9EC
		public static bool ShaolinInteractMeditationOptionVisible()
		{
			EventArgBox sectArgBox = EventHelper.GetSectMainStoryEventArgBox(1);
			return sectArgBox.GetBool("ConchShip_PresetKey_ShaolinMeditationInteractionActivated");
		}

		// Token: 0x06002391 RID: 9105 RVA: 0x001BC810 File Offset: 0x001BAA10
		public static void UpdateDamoDreamMeetTaiwuId()
		{
			int taiwuId = DomainManager.Taiwu.GetTaiwuCharId();
			EventHelper.SaveArgToSectMainStory<int>(1, "ConchShip_PresetKey_DamoDreamMeetTaiwuId", taiwuId);
		}

		// Token: 0x06002392 RID: 9106 RVA: 0x001BC838 File Offset: 0x001BAA38
		public static void OpenSectShaolinDemonSlayer(string afterEvent, EventArgBox argBox)
		{
			bool flag = DomainManager.World.ShaolinGenerateDemonSlayerTrial(EventHelper.Domain.MainThreadDataContext);
			if (flag)
			{
				Settlement settlement = DomainManager.Organization.GetSettlementByOrgTemplateId(1);
				EventHelper.ChangeSpiritualDebtByAreaId(settlement.GetLocation().AreaId, (int)EventHelper.GetSpiritualDebtFinalCost(settlement.GetId(), -600));
			}
			GameDataBridge.AddDisplayEvent(DisplayEventType.OpenSectShaolinDemonSlayer);
		}

		// Token: 0x06002393 RID: 9107 RVA: 0x001BC898 File Offset: 0x001BAA98
		public static bool SectShaolinDemonSlayerTrialing()
		{
			SectShaolinDemonSlayerData data = DomainManager.Extra.GetSectShaolinDemonSlayerData();
			return data.Trialing;
		}

		// Token: 0x06002394 RID: 9108 RVA: 0x001BC8BC File Offset: 0x001BAABC
		public static void StartDemonSlayerCombat(string afterEvent, EventArgBox argBox)
		{
			int index = -1;
			argBox.Get("BossIndex", ref index);
			SectShaolinDemonSlayerData data = DomainManager.Extra.GetSectShaolinDemonSlayerData();
			DemonSlayerTrialItem config = data.GetTrialingDemon(index);
			bool flag = config == null;
			if (!flag)
			{
				DataContext context = EventHelper.Domain.MainThreadDataContext;
				int taiwuCharId = DomainManager.Taiwu.GetTaiwuCharId();
				foreach (DemonSlayerTrialRestrictItem restrict in data.GetTrialingRestricts(index))
				{
					bool flag2 = string.IsNullOrEmpty(restrict.EffectClassName);
					if (!flag2)
					{
						Type type = Type.GetType(restrict.EffectClassName);
						Tester.Assert(type != null, "type != null");
						IReadOnlyList<int> parameters = restrict.EffectParameters;
						object effect = Activator.CreateInstance(type, new object[]
						{
							taiwuCharId,
							parameters
						});
						SectShaolinDemonSlayerData sectShaolinDemonSlayerData = data;
						if (sectShaolinDemonSlayerData.TrialingRestrictEffects == null)
						{
							sectShaolinDemonSlayerData.TrialingRestrictEffects = new List<SpecialEffectBase>();
						}
						data.TrialingRestrictEffects.Add((SpecialEffectBase)effect);
					}
				}
				GameData.Domains.Character.Character character = DomainManager.World.CreateFixedDemon(context, config.CharacterId);
				short configId = data.GetTrialingRestricts(index).GetCombatConfigId();
				EventHelper.StartCombat(character.GetId(), configId, afterEvent, argBox, false);
			}
		}

		// Token: 0x06002395 RID: 9109 RVA: 0x001BCA18 File Offset: 0x001BAC18
		public static void GetSectShaolinDemonSlayerReward(string afterEvent, EventArgBox argBox)
		{
			SectShaolinDemonSlayerData data = DomainManager.Extra.GetSectShaolinDemonSlayerData();
			int index = -1;
			argBox.Get("BossIndex", ref index);
			DemonSlayerTrialItem config = data.GetTrialingDemon(index);
			bool flag = config == null;
			if (!flag)
			{
				sbyte combatStatus = DomainManager.Combat.GetCombatStatus();
				bool flag2 = combatStatus != CombatStatusType.EnemyFail && combatStatus != CombatStatusType.EnemyFlee;
				if (!flag2)
				{
					GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
					EventHelper.ChangeRoleExp(taiwu, data.TrialingLevel.RewardExp);
					bool giveFirstTimeRewards = false;
					bool flag3 = !data.IsDemonDefeated(config.TemplateId);
					if (flag3)
					{
						giveFirstTimeRewards = true;
						data.MarkDemonAsDefeated(config.TemplateId);
					}
					List<ValueTuple<ItemKey, int>> showItems = new List<ValueTuple<ItemKey, int>>();
					bool flag4 = giveFirstTimeRewards;
					if (flag4)
					{
						ItemKey firstTimeReward = EventHelper.AddItemToRole(taiwu, 2, config.FirstTimeRewards, 1, -1);
						showItems.Add(new ValueTuple<ItemKey, int>(firstTimeReward, 1));
					}
					foreach (PresetInventoryItem item in data.TrialingLevel.RewardItems)
					{
						ItemKey itemKey = EventHelper.AddItemToRole(taiwu, item.Type, item.TemplateId, 1, -1);
						showItems.Add(new ValueTuple<ItemKey, int>(itemKey, 1));
					}
					EventHelper.ShowGetItemPageForItems(showItems, afterEvent, argBox, false);
				}
			}
		}

		// Token: 0x06002396 RID: 9110 RVA: 0x001BCB80 File Offset: 0x001BAD80
		public static void StartSelectCharacterFeature(string afterEvent, EventArgBox argBox)
		{
			SectShaolinDemonSlayerData data = DomainManager.Extra.GetSectShaolinDemonSlayerData();
			bool flag = !string.IsNullOrEmpty(afterEvent);
			if (flag)
			{
				EventHelper.AddEventInListenWithActionName(afterEvent, argBox, "SelectDemonSlayerCharacterFeatureFinish");
			}
			GameDataBridge.AddDisplayEvent<int>(DisplayEventType.SelectDemonSlayerCharacterFeature, data.TrialingLevel.TemplateId);
		}

		// Token: 0x06002397 RID: 9111 RVA: 0x001BCBC8 File Offset: 0x001BADC8
		public static void SectShaolinDemonSlayerToNextLevel()
		{
			SectShaolinDemonSlayerData data = DomainManager.Extra.GetSectShaolinDemonSlayerData();
			data.ToNextLevel();
			DomainManager.Extra.SetSectShaolinDemonSlayerData(EventHelper.Domain.MainThreadDataContext, data);
		}

		// Token: 0x06002398 RID: 9112 RVA: 0x001BCC00 File Offset: 0x001BAE00
		public static int GetSectShaolinDemonSlayerCurrLevel()
		{
			SectShaolinDemonSlayerData data = DomainManager.Extra.GetSectShaolinDemonSlayerData();
			return data.TrialingLevel.TemplateId;
		}

		// Token: 0x06002399 RID: 9113 RVA: 0x001BCC28 File Offset: 0x001BAE28
		public static void CreateShixiangEnemy()
		{
			DataContext content = EventHelper.Domain.MainThreadDataContext;
			Location shixiangLocation = DomainManager.Organization.GetSettlementByOrgTemplateId(6).GetLocation();
			MapBlockItem config = MapBlock.Instance[24];
			List<MapBlockData> mapBlockDataList = new List<MapBlockData>();
			DomainManager.Adventure.GetValidBlocksForRandomEnemy(shixiangLocation.AreaId, shixiangLocation.BlockId, (short)config.Range, true, false, true, mapBlockDataList);
			short beginEnemyTemplateId = SectMainStoryRelatedConstants.GetBeginEnemyTemplateIdByXiangshuLevel();
			int enemyCount = content.Random.Next(10, 16);
			int count = enemyCount / 4;
			int extra = enemyCount % 4;
			DomainManager.Adventure.CreateRandomEnemiesOnValidBlocks(EventHelper.Domain.MainThreadDataContext, shixiangLocation, beginEnemyTemplateId, count + extra, mapBlockDataList);
			DomainManager.Adventure.CreateRandomEnemiesOnValidBlocks(EventHelper.Domain.MainThreadDataContext, shixiangLocation, beginEnemyTemplateId + 1, count, mapBlockDataList);
			DomainManager.Adventure.CreateRandomEnemiesOnValidBlocks(EventHelper.Domain.MainThreadDataContext, shixiangLocation, beginEnemyTemplateId + 2, count, mapBlockDataList);
			DomainManager.Adventure.CreateRandomEnemiesOnValidBlocks(EventHelper.Domain.MainThreadDataContext, shixiangLocation, beginEnemyTemplateId + 3, count, mapBlockDataList);
		}

		// Token: 0x0600239A RID: 9114 RVA: 0x001BCD24 File Offset: 0x001BAF24
		public static void CreateShixiangTraitorEnemy()
		{
			DataContext content = EventHelper.Domain.MainThreadDataContext;
			int enemyCount = content.Random.Next(15, 21);
			Location shixiangLocation = DomainManager.Organization.GetSettlementByOrgTemplateId(6).GetLocation();
			MapBlockItem config = MapBlock.Instance[24];
			List<MapBlockData> mapBlockDataList = new List<MapBlockData>();
			DomainManager.Adventure.GetValidBlocksForRandomEnemy(shixiangLocation.AreaId, shixiangLocation.BlockId, (short)config.Range, true, false, true, mapBlockDataList);
			short templateId = SectMainStoryRelatedConstants.GetTemplateIdOfFixedCharacterCombatWith(608, 5, true);
			int count = enemyCount / (int)(templateId + 1 - 608);
			int extra = enemyCount % (int)(templateId + 1 - 608);
			for (short i = 608; i < templateId + 1; i += 1)
			{
				EventHelper.CreateShixiangFixedEnemiesOnValidBlocks(i, (i == templateId) ? count : (count + extra), mapBlockDataList, -1);
			}
		}

		// Token: 0x0600239B RID: 9115 RVA: 0x001BCDF8 File Offset: 0x001BAFF8
		public static void CreateShixiangBarbarianEnemy()
		{
			DataContext content = EventHelper.Domain.MainThreadDataContext;
			int enemyCount = content.Random.Next(30, 41);
			Location shixiangLocation = DomainManager.Organization.GetSettlementByOrgTemplateId(6).GetLocation();
			MapBlockItem config = MapBlock.Instance[24];
			List<MapBlockData> mapBlockDataList = new List<MapBlockData>();
			DomainManager.Adventure.GetValidBlocksForRandomEnemy(shixiangLocation.AreaId, shixiangLocation.BlockId, (short)config.Range, true, false, true, mapBlockDataList);
			short templateId = SectMainStoryRelatedConstants.GetTemplateIdOfFixedCharacterCombatWith(613, 5, true);
			int count = enemyCount / (int)(templateId + 1 - 613);
			int extra = enemyCount % (int)(templateId + 1 - 613);
			for (short i = 613; i < templateId + 1; i += 1)
			{
				short hairColorTemplateId = SectMainStoryRelatedConstants.BarbarianMasterHairColorTemplateId[content.Random.Next(SectMainStoryRelatedConstants.BarbarianMasterHairColorTemplateId.Length)];
				EventHelper.CreateShixiangFixedEnemiesOnValidBlocks(i, (i == templateId) ? count : (count + extra), mapBlockDataList, hairColorTemplateId);
			}
		}

		// Token: 0x0600239C RID: 9116 RVA: 0x001BCEE8 File Offset: 0x001BB0E8
		public static void CreateShixiangFixedEnemiesOnValidBlocks(short enemyTemplateId, int enemyAmount, IList<MapBlockData> validBlocks, short hairColorId = -1)
		{
			bool flag = enemyTemplateId <= 0;
			if (!flag)
			{
				DataContext context = EventHelper.Domain.MainThreadDataContext;
				Tester.Assert(Config.Character.Instance[enemyTemplateId].CreatingType == 3, "");
				for (int i = 0; i < enemyAmount; i++)
				{
					bool flag2 = validBlocks.Count == 0;
					if (flag2)
					{
						break;
					}
					int index = context.Random.Next(0, validBlocks.Count);
					Location validBlockLocation = new Location(validBlocks[index].AreaId, validBlocks[index].BlockId);
					GameData.Domains.Character.Character enemy = DomainManager.Character.CreateFixedEnemy(EventHelper.Domain.MainThreadDataContext, enemyTemplateId);
					int charId = enemy.GetId();
					DomainManager.Character.CompleteCreatingCharacter(charId);
					bool flag3 = hairColorId != -1;
					if (flag3)
					{
						AvatarData avatarData = enemy.GetAvatar();
						avatarData.FrontHairId = hairColorId;
						avatarData.BackHairId = hairColorId;
						enemy.SetAvatar(avatarData, context);
						DomainManager.Extra.AddShixiangBarbarianMasterId(context, enemy.GetId());
					}
					EventHelper.MoveFixedEnemy(enemy, validBlockLocation);
				}
			}
		}

		// Token: 0x0600239D RID: 9117 RVA: 0x001BD00C File Offset: 0x001BB20C
		public static bool IsSettlementRandomEnemyClean(sbyte orgTemplateId, short charTemplateId)
		{
			Location location = DomainManager.Organization.GetSettlementByOrgTemplateId(orgTemplateId).GetLocation();
			List<short> blockList = ObjectPool<List<short>>.Instance.Get();
			blockList.Clear();
			DomainManager.Map.GetSettlementBlocksAndAffiliatedBlocks(location.AreaId, location.BlockId, blockList);
			bool flag = true;
			for (int i = 0; i < blockList.Count; i++)
			{
				MapBlockData blockData = DomainManager.Map.GetBlockData(location.AreaId, blockList[i]);
				List<MapTemplateEnemyInfo> templateEnemyList = blockData.TemplateEnemyList;
				bool flag2 = templateEnemyList != null && templateEnemyList.Count > 0;
				if (flag2)
				{
					for (int j = 0; j < blockData.TemplateEnemyList.Count; j++)
					{
						bool flag3 = blockData.TemplateEnemyList[j].TemplateId == charTemplateId;
						if (flag3)
						{
							flag = false;
							break;
						}
					}
					bool flag4 = !flag;
					if (flag4)
					{
						break;
					}
				}
			}
			ObjectPool<List<short>>.Instance.Return(blockList);
			return flag;
		}

		// Token: 0x0600239E RID: 9118 RVA: 0x001BD114 File Offset: 0x001BB314
		public static bool IsSettlementFixedEnemyClean(sbyte orgTemplateId, short charTemplateId)
		{
			Location location = DomainManager.Organization.GetSettlementByOrgTemplateId(orgTemplateId).GetLocation();
			List<short> blockList = ObjectPool<List<short>>.Instance.Get();
			blockList.Clear();
			DomainManager.Map.GetSettlementBlocksAndAffiliatedBlocks(location.AreaId, location.BlockId, blockList);
			bool flag = true;
			for (int i = 0; i < blockList.Count; i++)
			{
				MapBlockData blockData = DomainManager.Map.GetBlockData(location.AreaId, blockList[i]);
				HashSet<int> enemyCharacterSet = blockData.EnemyCharacterSet;
				bool flag2 = enemyCharacterSet != null && enemyCharacterSet.Count > 0;
				if (flag2)
				{
					foreach (int charId in blockData.EnemyCharacterSet)
					{
						GameData.Domains.Character.Character character;
						DomainManager.Character.TryGetElement_Objects(charId, out character);
						bool flag3 = character.GetTemplateId() == charTemplateId;
						if (flag3)
						{
							flag = false;
							break;
						}
					}
					bool flag4 = !flag;
					if (flag4)
					{
						break;
					}
				}
			}
			ObjectPool<List<short>>.Instance.Return(blockList);
			return flag;
		}

		// Token: 0x0600239F RID: 9119 RVA: 0x001BD244 File Offset: 0x001BB444
		public static bool IsShixiangSettlementEnemyClean()
		{
			short beginEnemyTemplateId = SectMainStoryRelatedConstants.GetBeginEnemyTemplateIdByXiangshuLevel();
			return EventHelper.IsSettlementRandomEnemyClean(6, beginEnemyTemplateId) && EventHelper.IsSettlementRandomEnemyClean(6, beginEnemyTemplateId + 1) && EventHelper.IsSettlementRandomEnemyClean(6, beginEnemyTemplateId + 2) && EventHelper.IsSettlementRandomEnemyClean(6, beginEnemyTemplateId + 3);
		}

		// Token: 0x060023A0 RID: 9120 RVA: 0x001BD28C File Offset: 0x001BB48C
		public static bool IsShixiangSettlementTraitorClean()
		{
			short beginEnemyTemplateId = 608;
			return EventHelper.IsSettlementFixedEnemyClean(6, beginEnemyTemplateId) && EventHelper.IsSettlementFixedEnemyClean(6, beginEnemyTemplateId + 1) && EventHelper.IsSettlementFixedEnemyClean(6, beginEnemyTemplateId + 2) && EventHelper.IsSettlementFixedEnemyClean(6, beginEnemyTemplateId + 3);
		}

		// Token: 0x060023A1 RID: 9121 RVA: 0x001BD2D4 File Offset: 0x001BB4D4
		public static bool IsShixiangSettlementBarbarianClean()
		{
			short beginEnemyTemplateId = 613;
			return EventHelper.IsSettlementFixedEnemyClean(6, beginEnemyTemplateId) && EventHelper.IsSettlementFixedEnemyClean(6, beginEnemyTemplateId + 1) && EventHelper.IsSettlementFixedEnemyClean(6, beginEnemyTemplateId + 2) && EventHelper.IsSettlementFixedEnemyClean(6, beginEnemyTemplateId + 3);
		}

		// Token: 0x060023A2 RID: 9122 RVA: 0x001BD31C File Offset: 0x001BB51C
		public static GameData.Domains.Character.Character GetLocationBarbarianMaster(Location location)
		{
			MapBlockData blockData = DomainManager.Map.GetBlockData(location.AreaId, location.BlockId);
			HashSet<int> enemyCharacterSet = blockData.EnemyCharacterSet;
			bool flag = enemyCharacterSet != null && enemyCharacterSet.Count > 0;
			if (flag)
			{
				foreach (int charId in blockData.EnemyCharacterSet)
				{
					GameData.Domains.Character.Character enemy;
					DomainManager.Character.TryGetElement_Objects(charId, out enemy);
					short templateId = enemy.GetTemplateId();
					bool flag2 = templateId >= 613 && templateId <= 617;
					if (flag2)
					{
						return enemy;
					}
				}
			}
			return null;
		}

		// Token: 0x060023A3 RID: 9123 RVA: 0x001BD3E8 File Offset: 0x001BB5E8
		public static bool CheckShixiangPartOneTriggered()
		{
			sbyte states = EventHelper.GetSectMainStoryTaskStatus(6);
			int taskInfoId = EventHelper.GetExtraTaskChainCurrentTask(34);
			bool flag = states != 0;
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				bool flag2 = taskInfoId >= 0 && taskInfoId != 232;
				if (flag2)
				{
					result = false;
				}
				else
				{
					GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
					Location taiwuLocation = taiwu.GetLocation();
					sbyte stateId = EventHelper.GetStateIdByAreaId(taiwuLocation.AreaId);
					sbyte guangdongStateId = EventHelper.GetStateIdByStateTemplateId(6);
					bool flag3 = stateId != guangdongStateId;
					if (flag3)
					{
						result = false;
					}
					else
					{
						List<short> settlementIds = ObjectPool<List<short>>.Instance.Get();
						DomainManager.Map.GetStateSettlementIds(guangdongStateId, settlementIds, true, false);
						EventArgBox sectArgBox = EventHelper.GetSectMainStoryEventArgBox(6);
						GameData.Utilities.ShortList triggeredSettlementIds;
						sectArgBox.Get<GameData.Utilities.ShortList>("ConchShip_PresetKey_MockShixiangEventTriggeredSettlementId", out triggeredSettlementIds);
						int triggeredCount = 0;
						sectArgBox.Get("ConchShip_PresetKey_MockShixiangEventCount", ref triggeredCount);
						bool flag4 = triggeredCount >= 3;
						if (flag4)
						{
							result = false;
						}
						else
						{
							bool flag5 = triggeredCount == 0 && sectArgBox.Contains<int>(SectMainStoryEventArgKeys.TriggeringStatus);
							if (flag5)
							{
								result = false;
							}
							else
							{
								bool flag6 = triggeredSettlementIds.Items == null;
								if (flag6)
								{
									triggeredSettlementIds = GameData.Utilities.ShortList.Create();
								}
								List<short> blockIds = ObjectPool<List<short>>.Instance.Get();
								for (int i = 0; i < settlementIds.Count; i++)
								{
									bool flag7 = triggeredSettlementIds.Items.Contains(settlementIds[i]);
									if (!flag7)
									{
										blockIds.Clear();
										Settlement settlement = DomainManager.Organization.GetSettlement(settlementIds[i]);
										Location settlementLocation = settlement.GetLocation();
										bool flag8 = settlementLocation.AreaId != taiwuLocation.AreaId;
										if (!flag8)
										{
											DomainManager.Map.GetSettlementBlocks(settlementLocation.AreaId, settlementLocation.BlockId, blockIds);
											bool flag9 = blockIds.Contains(taiwuLocation.BlockId);
											if (flag9)
											{
												ObjectPool<List<short>>.Instance.Return(blockIds);
												ObjectPool<List<short>>.Instance.Return(settlementIds);
												return true;
											}
										}
									}
								}
								ObjectPool<List<short>>.Instance.Return(blockIds);
								ObjectPool<List<short>>.Instance.Return(settlementIds);
								result = false;
							}
						}
					}
				}
			}
			return result;
		}

		// Token: 0x060023A4 RID: 9124 RVA: 0x001BD608 File Offset: 0x001BB808
		public static void SaveShixiangPartOneTriggered()
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			Location taiwuLocation = taiwu.GetLocation();
			sbyte guangdongStateId = EventHelper.GetStateIdByStateTemplateId(6);
			List<short> settlementIds = ObjectPool<List<short>>.Instance.Get();
			DomainManager.Map.GetStateSettlementIds(guangdongStateId, settlementIds, true, false);
			EventArgBox sectArgBox = EventHelper.GetSectMainStoryEventArgBox(6);
			GameData.Utilities.ShortList triggeredSettlementIds;
			sectArgBox.Get<GameData.Utilities.ShortList>("ConchShip_PresetKey_MockShixiangEventTriggeredSettlementId", out triggeredSettlementIds);
			bool flag = triggeredSettlementIds.Items == null;
			if (flag)
			{
				triggeredSettlementIds = GameData.Utilities.ShortList.Create();
			}
			List<short> blockIds = ObjectPool<List<short>>.Instance.Get();
			for (int i = 0; i < settlementIds.Count; i++)
			{
				Settlement settlement = DomainManager.Organization.GetSettlement(settlementIds[i]);
				blockIds.Clear();
				Location settlementLocation = settlement.GetLocation();
				bool flag2 = settlementLocation.AreaId != taiwuLocation.AreaId;
				if (!flag2)
				{
					DomainManager.Map.GetSettlementBlocks(settlementLocation.AreaId, settlementLocation.BlockId, blockIds);
					bool flag3 = blockIds.Contains(taiwuLocation.BlockId);
					if (flag3)
					{
						triggeredSettlementIds.Items.Add(settlementIds[i]);
						EventHelper.SaveArgToSectMainStory<GameData.Utilities.ShortList>(6, "ConchShip_PresetKey_MockShixiangEventTriggeredSettlementId", triggeredSettlementIds);
						int triggeredCount = 0;
						sectArgBox.Get("ConchShip_PresetKey_MockShixiangEventCount", ref triggeredCount);
						bool flag4 = triggeredCount == 0;
						if (flag4)
						{
							EventHelper.TriggerExtraTask(34, 232);
						}
						bool flag5 = triggeredCount >= 2;
						if (flag5)
						{
							EventHelper.TriggerExtraTask(34, 233);
						}
						triggeredCount++;
						EventHelper.SaveArgToSectMainStory<int>(6, "ConchShip_PresetKey_MockShixiangEventCount", triggeredCount);
						break;
					}
				}
			}
			ObjectPool<List<short>>.Instance.Return(settlementIds);
			ObjectPool<List<short>>.Instance.Return(blockIds);
		}

		// Token: 0x060023A5 RID: 9125 RVA: 0x001BD7B0 File Offset: 0x001BB9B0
		public static short GetMockShixiangEventIndex()
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			EventArgBox argBox = DomainManager.Extra.GetSectMainStoryEventArgBox(6);
			GameData.Utilities.ShortList eventTriggered;
			argBox.Get<GameData.Utilities.ShortList>("ConchShip_PresetKey_MockShixiangEventTriggered", out eventTriggered);
			List<short> sum = new List<short>
			{
				1,
				2,
				3,
				4,
				5,
				6,
				7,
				8,
				9,
				10
			};
			bool flag = eventTriggered.Items == null;
			if (flag)
			{
				eventTriggered = GameData.Utilities.ShortList.Create();
			}
			bool flag2 = eventTriggered.Items == null || eventTriggered.Items.Count == 0 || eventTriggered.Items.Count == 10;
			short result;
			if (flag2)
			{
				result = (short)context.Random.Next(1, 11);
			}
			else
			{
				for (int i = 0; i < eventTriggered.Items.Count; i++)
				{
					sum.Remove(eventTriggered.Items[i]);
				}
				result = sum[context.Random.Next(0, sum.Count)];
			}
			eventTriggered.Items.Add(result);
			argBox.Set("ConchShip_PresetKey_MockShixiangEventTriggered", eventTriggered);
			EventHelper.SaveSectMainStoryEventArgBox(6);
			return result;
		}

		// Token: 0x060023A6 RID: 9126 RVA: 0x001BD914 File Offset: 0x001BBB14
		public static void SelectCombatWithBarbarians()
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			DomainManager.Extra.TriggerExtraTask(context, 34, 177);
			EventHelper.ShixiangSaveEndTime();
			EventHelper.SaveArgToSectMainStory<bool>(6, "ConchShip_PresetKey_ShixiangToFightEnemy", true);
			Settlement settlement = DomainManager.Organization.GetSettlementByOrgTemplateId(6);
			bool flag = settlement == null;
			if (!flag)
			{
				int groupCount = 5;
				int sum = context.Random.Next(groupCount, 11);
				int count = sum / groupCount;
				int mod = sum % groupCount;
				OrgMemberCollection members = settlement.GetMembers();
				for (sbyte i = 5; i >= 0; i -= 1)
				{
					HashSet<int> specifyMembers = members.GetMembers(i);
					EventHelper.ChangeMemberFavorability(specifyMembers, (i == 5) ? (count + mod) : count);
				}
			}
		}

		// Token: 0x060023A7 RID: 9127 RVA: 0x001BD9CC File Offset: 0x001BBBCC
		public static void ShixiangRandomAddFavor()
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			int count = context.Random.Next(1, 4);
			Settlement settlement = DomainManager.Organization.GetSettlementByOrgTemplateId(6);
			bool flag = settlement == null;
			if (!flag)
			{
				OrgMemberCollection members = settlement.GetMembers();
				List<int> allMembers = ObjectPool<List<int>>.Instance.Get();
				members.GetAllMembers(allMembers);
				EventHelper.ChangeMemberFavorability(allMembers.ToHashSet<int>(), count);
				ObjectPool<List<int>>.Instance.Return(allMembers);
			}
		}

		// Token: 0x060023A8 RID: 9128 RVA: 0x001BDA44 File Offset: 0x001BBC44
		public static void SelectWaitShixiangCombatWithBarbarians()
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			DomainManager.Extra.TriggerExtraTask(context, 34, 234);
			EventHelper.ShixiangSaveEndTime();
			EventHelper.SaveArgToSectMainStory<bool>(6, "ConchShip_PresetKey_ShixiangToFightEnemy", true);
		}

		// Token: 0x060023A9 RID: 9129 RVA: 0x001BDA84 File Offset: 0x001BBC84
		private static void ShixiangSaveEndTime()
		{
			EventArgBox sectArgBox = EventHelper.GetSectMainStoryEventArgBox(6);
			bool selectGoodEnd = false;
			bool flag = sectArgBox.Get("ConchShip_PresetKey_SelectGoodEnd", ref selectGoodEnd);
			if (flag)
			{
				EventHelper.SaveArgToSectMainStory<int>(6, selectGoodEnd ? "ConchShip_PresetKey_SectMainStoryShixiangProsperousEndDate" : "ConchShip_PresetKey_SectMainStoryShixiangFailingEndDate", EventHelper.GetGameDate());
			}
		}

		// Token: 0x060023AA RID: 9130 RVA: 0x001BDACC File Offset: 0x001BBCCC
		public static void ChangeMemberFavorability(HashSet<int> member, int count)
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			foreach (int charId in member)
			{
				GameData.Domains.Character.Character character;
				bool flag = DomainManager.Character.TryGetElement_Objects(charId, out character);
				if (flag)
				{
					EventHelper.ChangeFavorabilityWithMergeOptional(character, taiwu, 3000, 4, false);
					count--;
					bool flag2 = count == 0;
					if (flag2)
					{
						break;
					}
				}
			}
		}

		// Token: 0x060023AB RID: 9131 RVA: 0x001BDB58 File Offset: 0x001BBD58
		public static void GetShixiangEndAward(string afterEvent = "", EventArgBox argBox = null)
		{
			EventArgBox sectArgBox = EventHelper.GetSectMainStoryEventArgBox(6);
			bool selectGoodEnd = false;
			sectArgBox.Get("ConchShip_PresetKey_SelectGoodEnd", ref selectGoodEnd);
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			bool flag = selectGoodEnd;
			if (flag)
			{
				EventHelper.ChangeRoleResource(taiwu, 7, 15000, true);
			}
			List<ItemKey> itemKeys = new List<ItemKey>();
			for (int i = 0; i < 3; i++)
			{
				ItemKey item = EventHelper.GetRandomItemByGrade(6, 901);
				itemKeys.Add(item);
			}
			for (int j = 0; j < 2; j++)
			{
				ItemKey item2 = EventHelper.GetRandomItemByGrade(7, 901);
				itemKeys.Add(item2);
			}
			ItemKey item3 = EventHelper.GetRandomItemByGrade(8, 901);
			itemKeys.Add(item3);
			List<ValueTuple<ItemKey, int>> items = new List<ValueTuple<ItemKey, int>>();
			for (int k = 0; k < itemKeys.Count; k++)
			{
				ItemKey item4 = EventHelper.AddItemToRole(taiwu, 9, itemKeys[k].TemplateId, 1, -1);
				items.Add(new ValueTuple<ItemKey, int>(item4, 1));
			}
			EventHelper.ShowGetItemPageForItems(items, afterEvent, argBox, false);
		}

		// Token: 0x060023AC RID: 9132 RVA: 0x001BDC80 File Offset: 0x001BBE80
		public static void UpdateShixiangEnemy(GameData.Domains.Character.Character enemy)
		{
			Location location = enemy.GetLocation();
			MapBlockData blockData = DomainManager.Map.GetBlockData(location.AreaId, location.BlockId);
			List<int> charIds = ObjectPool<List<int>>.Instance.Get();
			charIds.Clear();
			bool flag = EventHelper.CharacterIsBarbarianMaster(enemy);
			if (flag)
			{
				int count = 0;
				foreach (int charId in blockData.EnemyCharacterSet)
				{
					GameData.Domains.Character.Character character;
					bool flag2 = DomainManager.Character.TryGetElement_Objects(charId, out character);
					if (flag2)
					{
						bool flag3 = EventHelper.CharacterIsBarbarianMaster(character);
						if (flag3)
						{
							count++;
							charIds.Add(charId);
						}
					}
				}
				bool flag4 = EventHelper.IsExtraTaskInProgress(177);
				if (flag4)
				{
					EventArgBox sectArgBox = EventHelper.GetSectMainStoryEventArgBox(6);
					int taiwuKillCount = 0;
					sectArgBox.Get("ConchShip_PresetKey_TaiwuKillBarbarianMasterCount", ref taiwuKillCount);
					int taiwuKillCount2 = 0;
					sectArgBox.Get("ConchShip_PresetKey_TaiwuKillBarbarianMasterCount2", ref taiwuKillCount2);
					EventHelper.SaveArgToSectMainStory<int>(6, "ConchShip_PresetKey_TaiwuKillBarbarianMasterCount", taiwuKillCount + count);
					EventHelper.SaveArgToSectMainStory<int>(6, "ConchShip_PresetKey_TaiwuKillBarbarianMasterCount2", taiwuKillCount2 + count);
				}
			}
			else
			{
				bool flag5 = EventHelper.CharacterIsShixiangTraitor(enemy);
				if (flag5)
				{
					foreach (int charId2 in blockData.EnemyCharacterSet)
					{
						GameData.Domains.Character.Character character2;
						bool flag6 = DomainManager.Character.TryGetElement_Objects(charId2, out character2);
						if (flag6)
						{
							bool flag7 = EventHelper.CharacterIsShixiangTraitor(character2);
							if (flag7)
							{
								charIds.Add(charId2);
							}
						}
					}
				}
			}
			foreach (int charId3 in charIds)
			{
				GameData.Domains.Character.Character character3;
				bool flag8 = DomainManager.Character.TryGetElement_Objects(charId3, out character3);
				if (flag8)
				{
					EventHelper.RemoveNonIntelligentCharacter(character3);
				}
			}
			ObjectPool<List<int>>.Instance.Return(charIds);
		}

		// Token: 0x060023AD RID: 9133 RVA: 0x001BDE90 File Offset: 0x001BC090
		public static void ShixiangHelpCharacterReadBook(ItemKey book, GameData.Domains.Character.Character character)
		{
			Tester.Assert(book.ItemType == 10, "");
			SkillBookItem bookCfg = Config.SkillBook.Instance[book.TemplateId];
			List<GameData.Domains.Character.LifeSkillItem> charLifeSkills = character.GetLearnedLifeSkills();
			int charSkillIndex = character.FindLearnedLifeSkillIndex(bookCfg.LifeSkillTemplateId);
			bool flag = charSkillIndex >= 0;
			if (flag)
			{
				GameData.Domains.Character.LifeSkillItem lifeSkillItem = charLifeSkills[charSkillIndex];
				for (byte i = 0; i < 5; i += 1)
				{
					bool flag2 = !lifeSkillItem.IsPageRead(i);
					if (flag2)
					{
						DataContext context = EventHelper.Domain.MainThreadDataContext;
						character.ReadLifeSkillPage(context, charSkillIndex, i);
						break;
					}
				}
			}
		}

		// Token: 0x060023AE RID: 9134 RVA: 0x001BDF34 File Offset: 0x001BC134
		[Obsolete]
		public static List<short> GetShixiangCanLearnCombatSkillList(int charId)
		{
			return new List<short>();
		}

		// Token: 0x060023AF RID: 9135 RVA: 0x001BDF4D File Offset: 0x001BC14D
		[Obsolete]
		public static void AddCombatPracticeLevel(short templateId)
		{
		}

		// Token: 0x060023B0 RID: 9136 RVA: 0x001BDF50 File Offset: 0x001BC150
		public static bool CharacterIsBarbarianMaster(GameData.Domains.Character.Character character)
		{
			bool flag = character == null;
			return !flag && character.GetTemplateId() >= 613 && character.GetTemplateId() <= 617;
		}

		// Token: 0x060023B1 RID: 9137 RVA: 0x001BDF90 File Offset: 0x001BC190
		public static bool CharacterIsShixiangTraitor(GameData.Domains.Character.Character character)
		{
			bool flag = character == null;
			return !flag && character.GetTemplateId() >= 608 && character.GetTemplateId() <= 612;
		}

		// Token: 0x060023B2 RID: 9138 RVA: 0x001BDFD0 File Offset: 0x001BC1D0
		public static void MoveTaiwuOutShixiangSettlement()
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			DomainManager.World.ClearTrivialMonthlyEvents(context);
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			Location taiwuLocation = taiwu.GetLocation();
			Settlement settlement = DomainManager.Organization.GetSettlementByOrgTemplateId(6);
			Location settlementLocation = settlement.GetLocation();
			List<short> settlementBlocks = ObjectPool<List<short>>.Instance.Get();
			settlementBlocks.Clear();
			DomainManager.Map.GetSettlementBlocks(settlementLocation.AreaId, settlementLocation.BlockId, settlementBlocks);
			List<MapBlockData> neighborBlocks = new List<MapBlockData>();
			DomainManager.Map.GetRealNeighborBlocks(taiwuLocation.AreaId, taiwuLocation.BlockId, neighborBlocks, 1, false);
			short targetBlockId = -1;
			foreach (MapBlockData mapBlock in neighborBlocks)
			{
				bool flag = !settlementBlocks.Contains(mapBlock.BlockId);
				if (flag)
				{
					targetBlockId = mapBlock.BlockId;
					break;
				}
			}
			Tester.Assert(targetBlockId != -1, "");
			DomainManager.Map.Move(context, targetBlockId, true);
			ObjectPool<List<short>>.Instance.Return(settlementBlocks);
		}

		// Token: 0x060023B3 RID: 9139 RVA: 0x001BE104 File Offset: 0x001BC304
		public static string GetShixiangLeaderName()
		{
			Settlement settlement = DomainManager.Organization.GetSettlementByOrgTemplateId(6);
			GameData.Domains.Character.Character leader = settlement.GetLeader();
			bool flag = leader == null || leader.GetKidnapperId() >= 0;
			string result;
			if (flag)
			{
				result = "<Language Key=Event_SectStoryShixiang_Qianbei/>";
			}
			else
			{
				result = OrganizationMember.Instance[91].GradeName;
			}
			return result;
		}

		// Token: 0x060023B4 RID: 9140 RVA: 0x001BE15C File Offset: 0x001BC35C
		public static GameData.Domains.Character.Character GetShixiangValidLeader()
		{
			Settlement settlement = DomainManager.Organization.GetSettlementByOrgTemplateId(6);
			GameData.Domains.Character.Character leader = settlement.GetLeader();
			bool flag = leader == null || leader.GetKidnapperId() >= 0 || leader.GetAgeGroup() == 0;
			GameData.Domains.Character.Character result;
			if (flag)
			{
				result = null;
			}
			else
			{
				result = leader;
			}
			return result;
		}

		// Token: 0x060023B5 RID: 9141 RVA: 0x001BE1A4 File Offset: 0x001BC3A4
		public static void ShixiangMembersPoisoned()
		{
			Settlement settlement = DomainManager.Organization.GetSettlementByOrgTemplateId(6);
			List<int> members = ObjectPool<List<int>>.Instance.Get();
			settlement.GetMembers().GetAllMembers(members);
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			foreach (int charId in members)
			{
				GameData.Domains.Character.Character character;
				bool flag = DomainManager.Character.TryGetElement_Objects(charId, out character);
				if (flag)
				{
					for (sbyte i = 0; i < 6; i += 1)
					{
						int delta = context.Random.Next(500, 1000);
						character.ChangePoisoned(context, i, 0, delta);
					}
				}
			}
			ObjectPool<List<int>>.Instance.Return(members);
		}

		// Token: 0x060023B6 RID: 9142 RVA: 0x001BE280 File Offset: 0x001BC480
		public unsafe static void ShixiangMembersHealPoison()
		{
			Settlement settlement = DomainManager.Organization.GetSettlementByOrgTemplateId(6);
			List<int> members = ObjectPool<List<int>>.Instance.Get();
			settlement.GetMembers().GetAllMembers(members);
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			foreach (int charId in members)
			{
				GameData.Domains.Character.Character character;
				bool flag = DomainManager.Character.TryGetElement_Objects(charId, out character);
				if (flag)
				{
					PoisonInts poisonInts = *character.GetPoisoned();
					PoisonInts newPoisonInts = poisonInts.GetReversed();
					character.DirectlyChangePoisoned(context, ref newPoisonInts);
				}
			}
			ObjectPool<List<int>>.Instance.Return(members);
		}

		// Token: 0x060023B7 RID: 9143 RVA: 0x001BE340 File Offset: 0x001BC540
		public static int GetShixiangMemberWithCondition()
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			Location taiwuLocation = taiwu.GetLocation();
			MapBlockData blockData = DomainManager.Map.GetBlockData(taiwuLocation.AreaId, taiwuLocation.BlockId);
			bool flag = blockData.CharacterSet == null;
			int result;
			if (flag)
			{
				result = -1;
			}
			else
			{
				foreach (int charId in blockData.CharacterSet)
				{
					bool flag2 = charId < 0;
					if (!flag2)
					{
						GameData.Domains.Character.Character character = DomainManager.Character.GetElement_Objects(charId);
						bool flag3 = character.GetAgeGroup() < 2;
						if (!flag3)
						{
							OrganizationInfo organizationInfo = character.GetOrganizationInfo();
							bool flag4 = organizationInfo.OrgTemplateId != 6;
							if (!flag4)
							{
								bool flag5 = !EventHelper.CheckRoleInjured(character);
								if (!flag5)
								{
									bool flag6 = EventHelper.GetFavorabilityType(character, taiwu) >= 0;
									if (flag6)
									{
										return charId;
									}
								}
							}
						}
					}
				}
				foreach (int charId2 in blockData.CharacterSet)
				{
					bool flag7 = charId2 < 0;
					if (!flag7)
					{
						GameData.Domains.Character.Character character2 = DomainManager.Character.GetElement_Objects(charId2);
						bool flag8 = character2.GetAgeGroup() < 2;
						if (!flag8)
						{
							OrganizationInfo organizationInfo2 = character2.GetOrganizationInfo();
							bool flag9 = organizationInfo2.OrgTemplateId != 6;
							if (!flag9)
							{
								bool flag10 = EventHelper.GetFavorabilityType(character2, taiwu) >= 0;
								if (flag10)
								{
									return charId2;
								}
							}
						}
					}
				}
				result = -1;
			}
			return result;
		}

		// Token: 0x060023B8 RID: 9144 RVA: 0x001BE500 File Offset: 0x001BC700
		public static void OpenUpgradeTeammateCommand(string afterEvent, EventArgBox argBox)
		{
			EventHelper.Domain.SetListenerWithActionName(afterEvent, argBox, "UpgradeTeammateCommand");
			GameDataBridge.AddDisplayEvent(DisplayEventType.OpenUpgradeTeammateCommand);
		}

		// Token: 0x060023B9 RID: 9145 RVA: 0x001BE520 File Offset: 0x001BC720
		public static void SetTeammatesName(EventArgBox argBox)
		{
			IntList teammates;
			argBox.Get<IntList>("Teammates", out teammates);
			StringBuilder names = new StringBuilder();
			for (int i = 0; i < teammates.Items.Count; i++)
			{
				ValueTuple<string, string> nameTuple = DomainManager.Character.GetNameRelatedData(teammates.Items[i]).GetDisplayName(false);
				string name = nameTuple.Item1 + nameTuple.Item2;
				names.Append(name);
				bool flag = i != teammates.Items.Count - 1;
				if (flag)
				{
					names.Append("、");
				}
			}
			argBox.Set("TeammatesName", names.ToString());
		}

		// Token: 0x060023BA RID: 9146 RVA: 0x001BE5D8 File Offset: 0x001BC7D8
		public static void ClearShixiangRandomEnemy()
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			Settlement settlement = DomainManager.Organization.GetSettlementByOrgTemplateId(6);
			Location settlementLocation = settlement.GetLocation();
			List<MapBlockData> blockDataList = ObjectPool<List<MapBlockData>>.Instance.Get();
			MapBlockItem mapBlockItem = MapBlock.Instance[24];
			DomainManager.Map.GetRealNeighborBlocks(settlementLocation.AreaId, settlementLocation.BlockId, blockDataList, (int)mapBlockItem.Range, false);
			MapBlockData centerBlockData = DomainManager.Map.GetBlockData(settlementLocation.AreaId, settlementLocation.BlockId);
			blockDataList.Add(centerBlockData);
			foreach (MapBlockData blockData in blockDataList)
			{
				List<MapTemplateEnemyInfo> enemyInfos = ObjectPool<List<MapTemplateEnemyInfo>>.Instance.Get();
				bool flag = blockData.TemplateEnemyList != null && blockData.TemplateEnemyList.Count > 0;
				if (flag)
				{
					foreach (MapTemplateEnemyInfo enemyInfo in blockData.TemplateEnemyList)
					{
						enemyInfos.Add(enemyInfo);
					}
					foreach (MapTemplateEnemyInfo enemyInfo2 in enemyInfos)
					{
						Events.RaiseTemplateEnemyLocationChanged(context, enemyInfo2, blockData.GetLocation(), Location.Invalid);
					}
				}
				ObjectPool<List<MapTemplateEnemyInfo>>.Instance.Return(enemyInfos);
			}
			ObjectPool<List<MapBlockData>>.Instance.Return(blockDataList);
		}

		// Token: 0x060023BB RID: 9147 RVA: 0x001BE790 File Offset: 0x001BC990
		public static bool ShixiangOrgMemberConfigTemplateIdIsLiterati(short templateId)
		{
			return templateId == 184 || templateId == 193 || templateId == 202 || templateId == 211;
		}

		// Token: 0x060023BC RID: 9148 RVA: 0x001BE7D0 File Offset: 0x001BC9D0
		public static bool IsWuDangPrologueCheckPass()
		{
			bool inGuiding = DomainManager.TutorialChapter.InGuiding;
			bool result;
			if (inGuiding)
			{
				result = false;
			}
			else
			{
				bool flag = EventHelper.GetSectMainStoryTaskStatus(4) != 0;
				if (flag)
				{
					result = false;
				}
				else
				{
					bool flag2 = !EventHelper.IsSectAllowLearning(4);
					if (flag2)
					{
						result = false;
					}
					else
					{
						EventArgBox sectArgBox = EventHelper.GetSectMainStoryEventArgBox(4);
						bool flag3 = sectArgBox.Contains<int>(SectMainStoryEventArgKeys.TriggeringStatus);
						if (flag3)
						{
							result = false;
						}
						else
						{
							Location taiwuLocation = DomainManager.Taiwu.GetTaiwu().GetLocation();
							Location wudangLocation = EventHelper.GetSettlementByOrgTemplateId(4).GetLocation();
							bool flag4 = taiwuLocation.AreaId != wudangLocation.AreaId;
							if (flag4)
							{
								result = false;
							}
							else
							{
								bool triggered = false;
								sectArgBox.Get("ConchShip_PresetKey_WudangFrontEventTriggered", ref triggered);
								bool flag5 = triggered;
								if (flag5)
								{
									result = false;
								}
								else
								{
									bool flag6 = EventHelper.CheckProbability(50);
									result = !flag6;
								}
							}
						}
					}
				}
			}
			return result;
		}

		// Token: 0x060023BD RID: 9149 RVA: 0x001BE8B0 File Offset: 0x001BCAB0
		public static void SetBlackSnakeName(EventArgBox argBox)
		{
			EventArgBox sectArgBox = EventHelper.GetSectMainStoryEventArgBox(4);
			string customName = string.Empty;
			bool flag = sectArgBox.Get("ConchShip_PresetKey_BlackSnakeCustomName", ref customName);
			if (flag)
			{
				argBox.Set("BlackSnake", customName);
			}
			else
			{
				CharacterItem config = Config.Character.Instance[672];
				argBox.Set("BlackSnake", config.GivenName);
			}
		}

		// Token: 0x060023BE RID: 9150 RVA: 0x001BE911 File Offset: 0x001BCB11
		public static void OpenModifyBook(string afterEvent, EventArgBox argBox)
		{
			EventHelper.Domain.SetListenerWithActionName(afterEvent, argBox, "BookModified");
			GameDataBridge.AddDisplayEvent(DisplayEventType.OpenModifyBook);
		}

		// Token: 0x060023BF RID: 9151 RVA: 0x001BE930 File Offset: 0x001BCB30
		public static void BlockOverWrittenByHeavenlyTree(int id, bool isSuccess)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			SectStoryHeavenlyTreeExtendable tree;
			bool flag = !DomainManager.Extra.TryGetHeavenlyTreeById(id, out tree);
			if (!flag)
			{
				if (isSuccess)
				{
					DomainManager.Map.ChangeBlockTemplate(context, tree.Location, EventHelper.GetBlockTemplateIdByHeavenlyTreeTemplateId(tree.TemplateId), true);
				}
				else
				{
					MapBlockData cellBlockData = DomainManager.Map.GetBlock(tree.Location);
					bool flag2 = cellBlockData.BlockSubType != EMapBlockSubType.DLCLoong;
					if (flag2)
					{
						cellBlockData.Destroyed = true;
						cellBlockData.CurrResources.Initialize();
						DomainManager.Map.DestroyMapBlockItemsDirect(context, cellBlockData);
					}
					EventHelper.TriggerWudangHeavenlyTreeExtraTask(240);
					EventHelper.WudangIntEventArgChange("ConchShip_PresetKey_FinishFairylandStoryCount", -1);
				}
				DomainManager.Extra.RemoveHeavenlyTree(context, tree.Id);
				GameData.Domains.Character.Character character;
				DomainManager.Character.TryGetElement_Objects(tree.Id, out character);
				EventHelper.RemoveNonIntelligentCharacter(character);
				bool flag3 = EventHelper.GetGrowingHeavenlyTreeCount() == 0;
				if (flag3)
				{
					EventHelper.FinishExtraTask(41, 238);
				}
				bool flag4 = EventHelper.GetNormalSeedAndTreeCount() == 0;
				if (flag4)
				{
					EventHelper.FinishExtraTask(57, 405);
				}
				bool flag5 = EventHelper.GetFindFairylandCount() == 0;
				if (flag5)
				{
					EventHelper.FinishExtraTask(41, 152);
				}
				bool metInDream = tree.MetInDream;
				if (metInDream)
				{
					DomainManager.Extra.RemoveWudangFairyland(context, tree.Location);
				}
			}
		}

		// Token: 0x060023C0 RID: 9152 RVA: 0x001BEA8C File Offset: 0x001BCC8C
		public static short GetBlockTemplateIdByHeavenlyTreeTemplateId(short templateId)
		{
			if (!true)
			{
			}
			EMapBlockSubType emapBlockSubType;
			switch (templateId)
			{
			case 272:
				emapBlockSubType = EMapBlockSubType.Mountain;
				break;
			case 273:
				emapBlockSubType = EMapBlockSubType.Cave;
				break;
			case 274:
				emapBlockSubType = EMapBlockSubType.Canyon;
				break;
			case 275:
				emapBlockSubType = EMapBlockSubType.Swamp;
				break;
			case 276:
				emapBlockSubType = EMapBlockSubType.Hill;
				break;
			case 277:
				emapBlockSubType = EMapBlockSubType.TaoYuan;
				break;
			case 278:
				emapBlockSubType = EMapBlockSubType.Field;
				break;
			case 279:
				emapBlockSubType = EMapBlockSubType.Lake;
				break;
			case 280:
				emapBlockSubType = EMapBlockSubType.Woodland;
				break;
			case 281:
				emapBlockSubType = EMapBlockSubType.Jungle;
				break;
			case 282:
				emapBlockSubType = EMapBlockSubType.RiverBeach;
				break;
			case 283:
				emapBlockSubType = EMapBlockSubType.Valley;
				break;
			default:
				switch (templateId)
				{
				case 394:
					emapBlockSubType = EMapBlockSubType.Mountain;
					break;
				case 395:
					emapBlockSubType = EMapBlockSubType.Cave;
					break;
				case 396:
					emapBlockSubType = EMapBlockSubType.Canyon;
					break;
				case 397:
					emapBlockSubType = EMapBlockSubType.Swamp;
					break;
				case 398:
					emapBlockSubType = EMapBlockSubType.Hill;
					break;
				case 399:
					emapBlockSubType = EMapBlockSubType.TaoYuan;
					break;
				case 400:
					emapBlockSubType = EMapBlockSubType.Field;
					break;
				case 401:
					emapBlockSubType = EMapBlockSubType.Lake;
					break;
				case 402:
					emapBlockSubType = EMapBlockSubType.Woodland;
					break;
				case 403:
					emapBlockSubType = EMapBlockSubType.Jungle;
					break;
				case 404:
					emapBlockSubType = EMapBlockSubType.RiverBeach;
					break;
				case 405:
					emapBlockSubType = EMapBlockSubType.Valley;
					break;
				default:
					emapBlockSubType = EMapBlockSubType.Invalid;
					break;
				}
				break;
			}
			if (!true)
			{
			}
			EMapBlockSubType type = emapBlockSubType;
			List<int> selection = new List<int>();
			for (int index = 0; index < MapBlock.Instance.Count; index++)
			{
				bool flag = MapBlock.Instance[index].SubType == type;
				if (flag)
				{
					selection.Add(index);
				}
			}
			return MapBlock.Instance[selection[EventHelper.Domain.MainThreadDataContext.Random.Next(0, selection.Count)]].TemplateId;
		}

		// Token: 0x060023C1 RID: 9153 RVA: 0x001BEC18 File Offset: 0x001BCE18
		public static void PlantHeavenlyTree(short itemTemplateId)
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			Location taiwuLocation = taiwu.GetLocation();
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			GameData.Domains.Character.Character character = DomainManager.Character.CreateFixedEnemy(context, 673);
			int charId = character.GetId();
			DomainManager.Character.CompleteCreatingCharacter(charId);
			character.SetLocation(taiwuLocation, context);
			DomainManager.Extra.PlantHeavenlyTree(context, charId, itemTemplateId, taiwuLocation);
			MapBlockData mapBlockData = DomainManager.Map.GetBlockData(taiwuLocation.AreaId, taiwuLocation.BlockId);
			DomainManager.Map.SetBlockData(context, mapBlockData);
			List<MapBlockData> bloodLightNeighborBlocks = ObjectPool<List<MapBlockData>>.Instance.Get();
			DomainManager.Map.GetRealNeighborBlocks(taiwuLocation.AreaId, taiwuLocation.BlockId, bloodLightNeighborBlocks, 3, true);
			foreach (MapBlockData neighborBlock in bloodLightNeighborBlocks)
			{
				bool flag = !neighborBlock.Visible;
				if (flag)
				{
					neighborBlock.SetVisible(true, context);
				}
			}
			ObjectPool<List<MapBlockData>>.Instance.Return(bloodLightNeighborBlocks);
			bool flag2 = !ItemTemplateHelper.CheckIsHeavenlyNormalTreeSeeds(12, itemTemplateId);
			if (flag2)
			{
				EventHelper.TriggerWudangHeavenlyTreeExtraTask(238);
			}
			bool flag3 = EventHelper.GetHeavenlyTreeSeedCount() == 0;
			if (flag3)
			{
				EventHelper.FinishExtraTask(41, 237);
			}
			bool flag4 = EventHelper.GetNormalSeedAndTreeCount() > 0;
			if (flag4)
			{
				EventHelper.TriggerExtraTask(57, 405);
			}
		}

		// Token: 0x060023C2 RID: 9154 RVA: 0x001BED88 File Offset: 0x001BCF88
		public static SectStoryHeavenlyTreeExtendable GetHeavenlyTree(int id)
		{
			SectStoryHeavenlyTreeExtendable tree;
			DomainManager.Extra.TryGetHeavenlyTreeById(id, out tree);
			return tree;
		}

		// Token: 0x060023C3 RID: 9155 RVA: 0x001BEDAC File Offset: 0x001BCFAC
		public static SectStoryHeavenlyTreeExtendable GetHeavenlyTreeByLocation(Location location)
		{
			SectStoryHeavenlyTreeExtendable tree;
			DomainManager.Extra.TryGetHeavenlyTreeByLocation(location, out tree);
			return tree;
		}

		// Token: 0x060023C4 RID: 9156 RVA: 0x001BEDD0 File Offset: 0x001BCFD0
		public static void HeavenlyTreeGrewUp(GameData.Domains.Character.Character character, int delta, EventArgBox argBox)
		{
			bool flag = DomainManager.Adventure.GetCurAdventureId() >= 0;
			if (!flag)
			{
				int newId = DomainManager.Extra.HeavenlyTreeGrewUp(EventHelper.Domain.MainThreadDataContext, character.GetId(), delta, true);
				argBox.Set("CharacterId", newId);
			}
		}

		// Token: 0x060023C5 RID: 9157 RVA: 0x001BEE20 File Offset: 0x001BD020
		public static void SetHeavenlyTreeMetInDream(int id)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			DomainManager.Extra.SetHeavenlyTreeMetInDream(context, id, true);
			EventHelper.TriggerWudangHeavenlyTreeExtraTask(152);
		}

		// Token: 0x060023C6 RID: 9158 RVA: 0x001BEE54 File Offset: 0x001BD054
		public static void SetHeavenlyTreeFindFairyland(int id)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			DomainManager.Extra.SetHeavenlyTreeFindFairyland(context, id, true);
			EventHelper.WudangIntEventArgChange("ConchShip_PresetKey_FinishFairylandStoryCount", 1);
		}

		// Token: 0x060023C7 RID: 9159 RVA: 0x001BEE88 File Offset: 0x001BD088
		public static void SetHeavenlyTreeFightWithSnake(int id)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			DomainManager.Extra.SetHeavenlyTreeFightWithSnake(context, id, true);
		}

		// Token: 0x060023C8 RID: 9160 RVA: 0x001BEEB0 File Offset: 0x001BD0B0
		public static void SetHeavenlyTreeSnakeTemplateId(int id, short templateId)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			DomainManager.Extra.SetHeavenlyTreeSnakeTemplateId(context, id, templateId);
		}

		// Token: 0x060023C9 RID: 9161 RVA: 0x001BEED8 File Offset: 0x001BD0D8
		public static short GetFightSnakeTemplateId(int id)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			SectStoryHeavenlyTreeExtendable tree = EventHelper.GetHeavenlyTree(id);
			bool flag = tree.SnakeTemplateId > 0;
			short result;
			if (flag)
			{
				result = tree.SnakeTemplateId;
			}
			else
			{
				EventArgBox sectArgBox = EventHelper.GetSectMainStoryEventArgBox(4);
				GameData.Utilities.ShortList snakes;
				sectArgBox.Get<GameData.Utilities.ShortList>("ConchShip_PresetKey_WudangSankeFighted", out snakes);
				bool flag2 = snakes.Items == null || snakes.Items.Count == 0;
				short snakeTemplateId;
				if (flag2)
				{
					snakeTemplateId = SectMainStoryRelatedConstants.SnakeItemInfo[context.Random.Next(0, SectMainStoryRelatedConstants.SnakeItemInfo.Length)].Item1;
				}
				else
				{
					List<short> canSelect = ObjectPool<List<short>>.Instance.Get();
					for (int i = 0; i < SectMainStoryRelatedConstants.SnakeItemInfo.Length; i++)
					{
						bool flag3 = !snakes.Items.Contains(SectMainStoryRelatedConstants.SnakeItemInfo[i].Item1);
						if (flag3)
						{
							canSelect.Add(SectMainStoryRelatedConstants.SnakeItemInfo[i].Item1);
						}
					}
					snakeTemplateId = canSelect[context.Random.Next(0, canSelect.Count)];
					ObjectPool<List<short>>.Instance.Return(canSelect);
				}
				EventHelper.SetHeavenlyTreeSnakeTemplateId(id, snakeTemplateId);
				EventHelper.AddFightSnakeTemplateId(snakeTemplateId);
				result = snakeTemplateId;
			}
			return result;
		}

		// Token: 0x060023CA RID: 9162 RVA: 0x001BF020 File Offset: 0x001BD220
		public static bool HaveNotDefeatSnake()
		{
			EventArgBox sectArgBox = EventHelper.GetSectMainStoryEventArgBox(4);
			GameData.Utilities.ShortList snakes;
			sectArgBox.Get<GameData.Utilities.ShortList>("ConchShip_PresetKey_WudangSankeFighted", out snakes);
			bool flag = snakes.Items != null;
			return !flag || snakes.Items.Count < SectMainStoryRelatedConstants.SnakeItemInfo.Length;
		}

		// Token: 0x060023CB RID: 9163 RVA: 0x001BF06C File Offset: 0x001BD26C
		public static void AddFightSnakeTemplateId(short templateId)
		{
			EventArgBox sectArgBox = EventHelper.GetSectMainStoryEventArgBox(4);
			GameData.Utilities.ShortList snakes;
			sectArgBox.Get<GameData.Utilities.ShortList>("ConchShip_PresetKey_WudangSankeFighted", out snakes);
			bool flag = snakes.Items == null;
			if (flag)
			{
				snakes = GameData.Utilities.ShortList.Create();
			}
			snakes.Items.Add(templateId);
			EventHelper.SaveArgToSectMainStory<GameData.Utilities.ShortList>(4, "ConchShip_PresetKey_WudangSankeFighted", snakes);
		}

		// Token: 0x060023CC RID: 9164 RVA: 0x001BF0BC File Offset: 0x001BD2BC
		public static void GetWudangReverseBook(string afterString, EventArgBox argBox)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			short templateId;
			bool flag;
			do
			{
				int type = context.Random.Next(0, 14);
				templateId = EventHelper.GetCombatSkillId((sbyte)type, 4, 0);
				flag = (templateId != -1);
			}
			while (!flag);
			short templateId2;
			bool flag2;
			do
			{
				int type2 = context.Random.Next(0, 14);
				templateId2 = EventHelper.GetCombatSkillId((sbyte)type2, 4, 0);
				flag2 = (templateId2 != -1 && templateId2 != templateId);
			}
			while (!flag2);
			short templateId3;
			bool flag3;
			do
			{
				int type3 = context.Random.Next(0, 14);
				templateId3 = EventHelper.GetCombatSkillId((sbyte)type3, 4, 0);
				flag3 = (templateId3 != -1 && templateId3 != templateId && templateId3 != templateId2);
			}
			while (!flag3);
			ItemKey book = EventHelper.CreateSkillBook(Config.CombatSkill.Instance[templateId].BookId, -1, -1, -1, 0, true);
			ItemKey book2 = EventHelper.CreateSkillBook(Config.CombatSkill.Instance[templateId2].BookId, -1, -1, -1, 0, true);
			ItemKey book3 = EventHelper.CreateSkillBook(Config.CombatSkill.Instance[templateId3].BookId, -1, -1, -1, 0, true);
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			EventHelper.AddInventoryItem(taiwu, book, 1);
			EventHelper.AddInventoryItem(taiwu, book2, 1);
			EventHelper.AddInventoryItem(taiwu, book3, 1);
			List<ValueTuple<ItemKey, int>> list = new List<ValueTuple<ItemKey, int>>
			{
				new ValueTuple<ItemKey, int>(book, 1),
				new ValueTuple<ItemKey, int>(book2, 1),
				new ValueTuple<ItemKey, int>(book3, 1)
			};
			EventHelper.ShowGetItemPageForItems(list, afterString, argBox, false);
		}

		// Token: 0x060023CD RID: 9165 RVA: 0x001BF248 File Offset: 0x001BD448
		public static short GetRandomWudangLowestCombatSkill()
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			short templateId;
			int type;
			for (templateId = -1; templateId == -1; templateId = EventHelper.GetCombatSkillId((sbyte)type, 4, 0))
			{
				type = context.Random.Next(0, 14);
			}
			return templateId;
		}

		// Token: 0x060023CE RID: 9166 RVA: 0x001BF290 File Offset: 0x001BD490
		public static bool LifeSkillBookAllPagesRead(GameData.Domains.Character.Character character, short skillTemplateId)
		{
			List<GameData.Domains.Character.LifeSkillItem> lifeSkills = character.GetLearnedLifeSkills();
			foreach (GameData.Domains.Character.LifeSkillItem lifeSkill in lifeSkills)
			{
				bool flag = lifeSkill.SkillTemplateId == skillTemplateId && lifeSkill.IsAllPagesRead();
				if (flag)
				{
					return true;
				}
			}
			return false;
		}

		// Token: 0x060023CF RID: 9167 RVA: 0x001BF308 File Offset: 0x001BD508
		public static bool TaoismAttainmentsIsEnough()
		{
			EventArgBox sectArgBox = EventHelper.GetSectMainStoryEventArgBox(4);
			int count = EventHelper.GetFindFairylandCount();
			int needAttainment = 0;
			bool flag = count == 0;
			if (flag)
			{
				needAttainment = 50;
			}
			bool flag2 = count == 1;
			if (flag2)
			{
				needAttainment = 100;
			}
			bool flag3 = count == 2;
			if (flag3)
			{
				needAttainment = 150;
			}
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			return (int)taiwu.GetLifeSkillAttainment(12) >= needAttainment;
		}

		// Token: 0x060023D0 RID: 9168 RVA: 0x001BF370 File Offset: 0x001BD570
		public static void GetWudangTreasureBySnakeTemplateId(short templateId, string afterString, EventArgBox argBox)
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			short itemTemplateId = -1;
			foreach (ValueTuple<short, short> pair in SectMainStoryRelatedConstants.SnakeItemInfo)
			{
				bool flag = pair.Item1 == templateId;
				if (flag)
				{
					itemTemplateId = pair.Item2;
					break;
				}
			}
			ItemKey itemKey = EventHelper.AddItemToRole(taiwu, 12, itemTemplateId, 1, -1);
			argBox.Set("GetItemKey", itemKey);
			List<ValueTuple<ItemKey, int>> list = new List<ValueTuple<ItemKey, int>>
			{
				new ValueTuple<ItemKey, int>(itemKey, 1)
			};
			EventHelper.TriggerWudangHeavenlyTreeExtraTask(153);
			EventHelper.ShowGetItemPageForItems(list, afterString, argBox, false);
		}

		// Token: 0x060023D1 RID: 9169 RVA: 0x001BF418 File Offset: 0x001BD618
		public static short GetWudangTreasureTemplateIdBySnake(short templateId, EventArgBox argBox)
		{
			short itemTemplateId = -1;
			foreach (ValueTuple<short, short> pair in SectMainStoryRelatedConstants.SnakeItemInfo)
			{
				bool flag = pair.Item1 == templateId;
				if (flag)
				{
					itemTemplateId = pair.Item2;
					break;
				}
			}
			ItemKey itemKey = new ItemKey(12, 0, itemTemplateId, 0);
			argBox.Set("ItemKey", itemKey);
			return itemTemplateId;
		}

		// Token: 0x060023D2 RID: 9170 RVA: 0x001BF488 File Offset: 0x001BD688
		public static string GetFairylandDescBySnakeTemplateId(int id)
		{
			SectStoryHeavenlyTreeExtendable tree = EventHelper.GetHeavenlyTree(id);
			short snakeTemplateId = tree.SnakeTemplateId;
			bool flag = snakeTemplateId == 555;
			string result;
			if (flag)
			{
				result = "<Language Key=Event_SectStoryWudang_FairylandDesc1/>";
			}
			else
			{
				bool flag2 = snakeTemplateId == 558;
				if (flag2)
				{
					result = "<Language Key=Event_SectStoryWudang_FairylandDesc2/>";
				}
				else
				{
					bool flag3 = snakeTemplateId == 561;
					if (flag3)
					{
						result = "<Language Key=Event_SectStoryWudang_FairylandDesc3/>";
					}
					else
					{
						bool flag4 = snakeTemplateId == 564;
						if (flag4)
						{
							result = "<Language Key=Event_SectStoryWudang_FairylandDesc4/>";
						}
						else
						{
							bool flag5 = snakeTemplateId == 567;
							if (flag5)
							{
								result = "<Language Key=Event_SectStoryWudang_FairylandDesc5/>";
							}
							else
							{
								bool flag6 = snakeTemplateId == 570;
								if (flag6)
								{
									result = "<Language Key=Event_SectStoryWudang_FairylandDesc6/>";
								}
								else
								{
									bool flag7 = snakeTemplateId == 573;
									if (flag7)
									{
										result = "<Language Key=Event_SectStoryWudang_FairylandDesc7/>";
									}
									else
									{
										bool flag8 = snakeTemplateId == 576;
										if (flag8)
										{
											result = "<Language Key=Event_SectStoryWudang_FairylandDesc8/>";
										}
										else
										{
											bool flag9 = snakeTemplateId == 579;
											if (flag9)
											{
												result = "<Language Key=Event_SectStoryWudang_FairylandDesc9/>";
											}
											else
											{
												result = "<Language Key=Event_SectStoryWudang_FairylandDesc10/>";
											}
										}
									}
								}
							}
						}
					}
				}
			}
			return result;
		}

		// Token: 0x060023D3 RID: 9171 RVA: 0x001BF584 File Offset: 0x001BD784
		public static sbyte GetCurrSeason()
		{
			sbyte month = DomainManager.World.GetCurrMonthInYear();
			foreach (SeasonItem season in ((IEnumerable<SeasonItem>)Season.Instance))
			{
				bool flag = season.Months.Contains(month);
				if (flag)
				{
					return season.TemplateId;
				}
			}
			return -1;
		}

		// Token: 0x060023D4 RID: 9172 RVA: 0x001BF5F8 File Offset: 0x001BD7F8
		public static void GetHeavenlyTreeSeed(string afterString, EventArgBox argBox)
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			short seedOneTemplateId = -1;
			argBox.Get("SeedOneTemplateId", ref seedOneTemplateId);
			short seedTwoTemplateId = -1;
			argBox.Get("SeedTwoTemplateId", ref seedTwoTemplateId);
			short seedThreeTemplateId = -1;
			argBox.Get("SeedThreeTemplateId", ref seedThreeTemplateId);
			ItemKey seedOne = ItemKey.Invalid;
			ItemKey seedTwo = ItemKey.Invalid;
			ItemKey seedThree = ItemKey.Invalid;
			bool flag = seedOneTemplateId != -1;
			if (flag)
			{
				seedOne = EventHelper.AddItemToRole(taiwu, 12, seedOneTemplateId, 1, -1);
			}
			bool flag2 = seedTwoTemplateId != -1;
			if (flag2)
			{
				seedTwo = EventHelper.AddItemToRole(taiwu, 12, seedTwoTemplateId, 1, -1);
			}
			bool flag3 = seedThreeTemplateId != -1;
			if (flag3)
			{
				seedThree = EventHelper.AddItemToRole(taiwu, 12, seedThreeTemplateId, 1, -1);
			}
			List<ValueTuple<ItemKey, int>> list = new List<ValueTuple<ItemKey, int>>();
			bool flag4 = !seedOne.Equals(ItemKey.Invalid);
			if (flag4)
			{
				list.Add(new ValueTuple<ItemKey, int>(seedOne, 1));
			}
			bool flag5 = !seedTwo.Equals(ItemKey.Invalid);
			if (flag5)
			{
				list.Add(new ValueTuple<ItemKey, int>(seedTwo, 1));
			}
			bool flag6 = !seedThree.Equals(ItemKey.Invalid);
			if (flag6)
			{
				list.Add(new ValueTuple<ItemKey, int>(seedThree, 1));
			}
			EventHelper.TriggerWudangHeavenlyTreeExtraTask(237);
			EventHelper.ShowGetItemPageForItems(list, afterString, argBox, false);
		}

		// Token: 0x060023D5 RID: 9173 RVA: 0x001BF738 File Offset: 0x001BD938
		public static void GetTaoismBook(string afterString, EventArgBox argBox)
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			List<ValueTuple<ItemKey, int>> items = new List<ValueTuple<ItemKey, int>>();
			for (sbyte i = 0; i <= 2; i += 1)
			{
				short skillId = EventHelper.GetLifeSkillId(12, i);
				ItemKey book = EventHelper.CreateSkillBook(skillId, 5, -1, -1, 50, true);
				EventHelper.AddInventoryItem(taiwu, book, 1);
				items.Add(new ValueTuple<ItemKey, int>(book, 1));
			}
			EventHelper.ShowGetItemPageForItems(items, afterString, argBox, false);
		}

		// Token: 0x060023D6 RID: 9174 RVA: 0x001BF7AC File Offset: 0x001BD9AC
		public static void GetBookFromSloppyTaoistMonkLetter(string afterString, EventArgBox argBox)
		{
			GameData.Domains.Character.Character monk = EventHelper.GetOrCreateFixedCharacterByTemplateId(543);
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			EventArgBox sectArgBox = EventHelper.GetSectMainStoryEventArgBox(4);
			sbyte lastFavorType = 0;
			sectArgBox.Get("ConchShip_PresetKey_LastEventSloppyTaoistMonkFavor", ref lastFavorType);
			sbyte nowFavorType = EventHelper.GetFavorabilityType(monk, taiwu);
			bool flag = nowFavorType == lastFavorType;
			if (!flag)
			{
				List<ValueTuple<ItemKey, int>> items = new List<ValueTuple<ItemKey, int>>();
				for (sbyte i = lastFavorType + 3; i < nowFavorType + 3; i += 1)
				{
					short skillId = EventHelper.GetLifeSkillId(12, i);
					ItemKey book = EventHelper.CreateSkillBook(skillId, 5, -1, -1, 50, true);
					EventHelper.AddInventoryItem(taiwu, book, 1);
					items.Add(new ValueTuple<ItemKey, int>(book, 1));
				}
				EventHelper.SaveArgToSectMainStory<sbyte>(4, "ConchShip_PresetKey_LastEventSloppyTaoistMonkFavor", nowFavorType);
				EventHelper.ShowGetItemPageForItems(items, afterString, argBox, false);
			}
		}

		// Token: 0x060023D7 RID: 9175 RVA: 0x001BF870 File Offset: 0x001BDA70
		public static void GetBookCountFromSloppyTaoistMonkLetter(EventArgBox argBox)
		{
			GameData.Domains.Character.Character monk = EventHelper.GetOrCreateFixedCharacterByTemplateId(543);
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			EventArgBox sectArgBox = EventHelper.GetSectMainStoryEventArgBox(4);
			sbyte lastFavorType = 0;
			sectArgBox.Get("ConchShip_PresetKey_LastEventSloppyTaoistMonkFavor", ref lastFavorType);
			sbyte nowFavorType = EventHelper.GetFavorabilityType(monk, taiwu);
			argBox.Set("BookCount", (int)(nowFavorType - lastFavorType));
		}

		// Token: 0x060023D8 RID: 9176 RVA: 0x001BF8C4 File Offset: 0x001BDAC4
		public static void GetMeetImmortalAccessory(string afterString, EventArgBox argBox)
		{
			EventArgBox sectArgBox = EventHelper.GetSectMainStoryEventArgBox(4);
			int count = sectArgBox.GetInt(SectMainStoryEventArgKeys.MeetImmortalEventCount);
			ItemKey item = ItemKey.Invalid;
			ItemKey item2 = ItemKey.Invalid;
			ItemKey item3 = ItemKey.Invalid;
			bool flag = count == 1;
			if (flag)
			{
				int index = 0;
				for (sbyte i = 0; i < 3; i += 1)
				{
					bool flag2 = index == 0;
					if (flag2)
					{
						item = EventHelper.GetRandomItemByGrade(i, 200);
					}
					else
					{
						bool flag3 = index == 1;
						if (flag3)
						{
							item2 = EventHelper.GetRandomItemByGrade(i, 200);
						}
						else
						{
							item3 = EventHelper.GetRandomItemByGrade(i, 200);
						}
					}
					index++;
				}
			}
			else
			{
				bool flag4 = count == 2;
				if (flag4)
				{
					int index2 = 0;
					for (sbyte j = 3; j < 6; j += 1)
					{
						bool flag5 = index2 == 0;
						if (flag5)
						{
							item = EventHelper.GetRandomItemByGrade(j, 200);
						}
						bool flag6 = index2 == 1;
						if (flag6)
						{
							item2 = EventHelper.GetRandomItemByGrade(j, 200);
						}
						bool flag7 = index2 == 2;
						if (flag7)
						{
							item3 = EventHelper.GetRandomItemByGrade(j, 200);
						}
						index2++;
					}
				}
				else
				{
					int index3 = 0;
					for (sbyte k = 6; k <= 8; k += 1)
					{
						bool flag8 = index3 == 0;
						if (flag8)
						{
							item = EventHelper.GetRandomItemByGrade(k, 200);
						}
						bool flag9 = index3 == 1;
						if (flag9)
						{
							item2 = EventHelper.GetRandomItemByGrade(k, 200);
						}
						bool flag10 = index3 == 2;
						if (flag10)
						{
							item3 = EventHelper.GetRandomItemByGrade(k, 200);
						}
						index3++;
					}
				}
			}
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			ItemKey itemKey = EventHelper.AddItemToRole(taiwu, item.ItemType, item.TemplateId, 1, -1);
			ItemKey itemKey2 = EventHelper.AddItemToRole(taiwu, item2.ItemType, item2.TemplateId, 1, -1);
			ItemKey itemKey3 = EventHelper.AddItemToRole(taiwu, item3.ItemType, item3.TemplateId, 1, -1);
			EventHelper.ShowGetItemPageForItems(new List<ValueTuple<ItemKey, int>>
			{
				new ValueTuple<ItemKey, int>(itemKey, 1),
				new ValueTuple<ItemKey, int>(itemKey2, 1),
				new ValueTuple<ItemKey, int>(itemKey3, 1)
			}, afterString, argBox, false);
		}

		// Token: 0x060023D9 RID: 9177 RVA: 0x001BFAE4 File Offset: 0x001BDCE4
		public static string GetWudangTreasureDesc(ItemKey selectItemKey)
		{
			bool flag = selectItemKey.TemplateId == 248;
			string desc;
			if (flag)
			{
				desc = "<Language Key=Event_SectStoryWudang_TreasureDesc1/>";
			}
			else
			{
				bool flag2 = selectItemKey.TemplateId == 249;
				if (flag2)
				{
					desc = "<Language Key=Event_SectStoryWudang_TreasureDesc2/>";
				}
				else
				{
					bool flag3 = selectItemKey.TemplateId == 250;
					if (flag3)
					{
						desc = "<Language Key=Event_SectStoryWudang_TreasureDesc3/>";
					}
					else
					{
						bool flag4 = selectItemKey.TemplateId == 251;
						if (flag4)
						{
							desc = "<Language Key=Event_SectStoryWudang_TreasureDesc4/>";
						}
						else
						{
							bool flag5 = selectItemKey.TemplateId == 252;
							if (flag5)
							{
								desc = "<Language Key=Event_SectStoryWudang_TreasureDesc5/>";
							}
							else
							{
								bool flag6 = selectItemKey.TemplateId == 253;
								if (flag6)
								{
									desc = "<Language Key=Event_SectStoryWudang_TreasureDesc6/>";
								}
								else
								{
									bool flag7 = selectItemKey.TemplateId == 254;
									if (flag7)
									{
										desc = "<Language Key=Event_SectStoryWudang_TreasureDesc7/>";
									}
									else
									{
										bool flag8 = selectItemKey.TemplateId == 255;
										if (flag8)
										{
											desc = "<Language Key=Event_SectStoryWudang_TreasureDesc8/>";
										}
										else
										{
											bool flag9 = selectItemKey.TemplateId == 256;
											if (flag9)
											{
												desc = "<Language Key=Event_SectStoryWudang_TreasureDesc9/>";
											}
											else
											{
												desc = "<Language Key=Event_SectStoryWudang_TreasureDesc10/>";
											}
										}
									}
								}
							}
						}
					}
				}
			}
			return desc;
		}

		// Token: 0x060023DA RID: 9178 RVA: 0x001BFBF8 File Offset: 0x001BDDF8
		public static string GetHeavenlyTreeGrowDesc(int id, int delta)
		{
			SectStoryHeavenlyTreeExtendable tree = EventHelper.GetHeavenlyTree(id);
			int growPoint = (int)tree.GrowPoint + delta;
			bool flag = growPoint < 100;
			string desc;
			if (flag)
			{
				desc = "<Language Key=Event_SectStoryWudang_GrowDesc1/>";
			}
			else
			{
				bool flag2 = growPoint < 300;
				if (flag2)
				{
					desc = "<Language Key=Event_SectStoryWudang_GrowDesc2/>";
				}
				else
				{
					bool flag3 = growPoint < 600;
					if (flag3)
					{
						desc = "<Language Key=Event_SectStoryWudang_GrowDesc3/>";
					}
					else
					{
						bool flag4 = growPoint < 900;
						if (flag4)
						{
							desc = "<Language Key=Event_SectStoryWudang_GrowDesc4/>";
						}
						else
						{
							bool flag5 = EventHelper.GetSectMainStoryTaskStatus(4) == 0 && !ItemTemplateHelper.CheckIsHeavenlyNormalTreeSeeds(12, tree.TemplateId);
							if (flag5)
							{
								desc = "<Language Key=Event_SectStoryWudang_GrowDesc5/>";
							}
							else
							{
								desc = "<Language Key=Event_SectStoryWudang_GrowDesc11/>";
							}
						}
					}
				}
			}
			return desc;
		}

		// Token: 0x060023DB RID: 9179 RVA: 0x001BFCA4 File Offset: 0x001BDEA4
		public static string GetHeavenlyTreeGrowDesc2(int id, int delta)
		{
			SectStoryHeavenlyTreeExtendable tree = EventHelper.GetHeavenlyTree(id);
			int growPoint = (int)tree.GrowPoint + delta;
			bool flag = growPoint < 100;
			string desc;
			if (flag)
			{
				desc = "<Language Key=Event_SectStoryWudang_GrowDesc6/>";
			}
			else
			{
				bool flag2 = growPoint < 300;
				if (flag2)
				{
					desc = "<Language Key=Event_SectStoryWudang_GrowDesc7/>";
				}
				else
				{
					bool flag3 = growPoint < 600;
					if (flag3)
					{
						desc = "<Language Key=Event_SectStoryWudang_GrowDesc8/>";
					}
					else
					{
						bool flag4 = growPoint < 900;
						if (flag4)
						{
							desc = "<Language Key=Event_SectStoryWudang_GrowDesc9/>";
						}
						else
						{
							bool flag5 = EventHelper.GetSectMainStoryTaskStatus(4) == 0 && !ItemTemplateHelper.CheckIsHeavenlyNormalTreeSeeds(12, tree.TemplateId);
							if (flag5)
							{
								desc = "<Language Key=Event_SectStoryWudang_GrowDesc10/>";
							}
							else
							{
								desc = "<Language Key=Event_SectStoryWudang_GrowDesc11/>";
							}
						}
					}
				}
			}
			return desc;
		}

		// Token: 0x060023DC RID: 9180 RVA: 0x001BFD50 File Offset: 0x001BDF50
		public static int GetAllHeavenlyTreeRelatedCount()
		{
			int sum = EventHelper.GetHeavenlyTreeSeedCount();
			sum += EventHelper.GetPlantedHeavenlyTreeCount();
			sum += EventHelper.GetWudangTreasureCount();
			return sum + EventHelper.GetGivenTreasureCount();
		}

		// Token: 0x060023DD RID: 9181 RVA: 0x001BFD84 File Offset: 0x001BDF84
		public static int GetHeavenlyTreeSeedCount()
		{
			int sum = 0;
			for (short i = 272; i <= 283; i += 1)
			{
				sum += EventHelper.GetTaiwuInventoryItemCount(12, i);
			}
			return sum;
		}

		// Token: 0x060023DE RID: 9182 RVA: 0x001BFDC4 File Offset: 0x001BDFC4
		public static int GetPlantedHeavenlyTreeCount()
		{
			return DomainManager.Extra.GetPlantedHeavenlyTreeCount();
		}

		// Token: 0x060023DF RID: 9183 RVA: 0x001BFDE0 File Offset: 0x001BDFE0
		public static int GetGrowingHeavenlyTreeCount()
		{
			return DomainManager.Extra.GetGrowingHeavenlyTreeCount();
		}

		// Token: 0x060023E0 RID: 9184 RVA: 0x001BFDFC File Offset: 0x001BDFFC
		public static int GetNormalSeedAndTreeCount()
		{
			return DomainManager.Extra.GetNormalSeedAndTreeCount();
		}

		// Token: 0x060023E1 RID: 9185 RVA: 0x001BFE18 File Offset: 0x001BE018
		public static int GetWudangTreasureCount()
		{
			int sum = 0;
			for (short i = 248; i <= 257; i += 1)
			{
				sum += EventHelper.GetTaiwuInventoryItemCount(12, i);
			}
			return sum;
		}

		// Token: 0x060023E2 RID: 9186 RVA: 0x001BFE58 File Offset: 0x001BE058
		public static int GetGivenTreasureCount()
		{
			EventArgBox sectArgBox = EventHelper.GetSectMainStoryEventArgBox(4);
			int count = 0;
			sectArgBox.Get("ConchShip_PresetKey_GiveTaoistTreasureCount", ref count);
			return count;
		}

		// Token: 0x060023E3 RID: 9187 RVA: 0x001BFE84 File Offset: 0x001BE084
		public static int GetFindFairylandCount()
		{
			List<SectStoryHeavenlyTreeExtendable> trees = DomainManager.Extra.GetAllHeavenlyTrees();
			int count = 0;
			foreach (SectStoryHeavenlyTreeExtendable tree in trees)
			{
				bool findFairyland = tree.FindFairyland;
				if (findFairyland)
				{
					count++;
				}
			}
			return count;
		}

		// Token: 0x060023E4 RID: 9188 RVA: 0x001BFEF4 File Offset: 0x001BE0F4
		public static string GetMapBlockDesc(short seedTemplateId)
		{
			bool flag = seedTemplateId == 394;
			string name;
			if (flag)
			{
				name = MapBlock.Instance[57].Name;
			}
			else
			{
				bool flag2 = seedTemplateId == 396;
				if (flag2)
				{
					name = MapBlock.Instance[63].Name;
				}
				else
				{
					bool flag3 = seedTemplateId == 398;
					if (flag3)
					{
						name = MapBlock.Instance[69].Name;
					}
					else
					{
						bool flag4 = seedTemplateId == 400;
						if (flag4)
						{
							name = MapBlock.Instance[75].Name;
						}
						else
						{
							bool flag5 = seedTemplateId == 402;
							if (flag5)
							{
								name = MapBlock.Instance[81].Name;
							}
							else
							{
								bool flag6 = seedTemplateId == 404;
								if (flag6)
								{
									name = MapBlock.Instance[87].Name;
								}
								else
								{
									bool flag7 = seedTemplateId == 401;
									if (flag7)
									{
										name = MapBlock.Instance[93].Name;
									}
									else
									{
										bool flag8 = seedTemplateId == 403;
										if (flag8)
										{
											name = MapBlock.Instance[94].Name;
										}
										else
										{
											bool flag9 = seedTemplateId == 395;
											if (flag9)
											{
												name = MapBlock.Instance[97].Name;
											}
											else
											{
												bool flag10 = seedTemplateId == 397;
												if (flag10)
												{
													name = MapBlock.Instance[100].Name;
												}
												else
												{
													bool flag11 = seedTemplateId == 399;
													if (flag11)
													{
														name = MapBlock.Instance[103].Name;
													}
													else
													{
														name = MapBlock.Instance[106].Name;
													}
												}
											}
										}
									}
								}
							}
						}
					}
				}
			}
			return name;
		}

		// Token: 0x060023E5 RID: 9189 RVA: 0x001C009C File Offset: 0x001BE29C
		public static void OpenDefendHeavenlyTree(string afterEvent, EventArgBox argBox, bool includeGrownTree = false)
		{
			EventHelper.Domain.SetListenerWithActionName(afterEvent, argBox, "DefendHeavenlyTree");
			GameDataBridge.AddDisplayEvent<bool>(DisplayEventType.OpenDefendHeavenlyTree, includeGrownTree);
		}

		// Token: 0x060023E6 RID: 9190 RVA: 0x001C00BC File Offset: 0x001BE2BC
		public static void WudangIntEventArgChange(string key, int delta)
		{
			EventArgBox sectArgBox = EventHelper.GetSectMainStoryEventArgBox(4);
			int count = sectArgBox.GetInt(key);
			EventHelper.SaveArgToSectMainStory<int>(4, key, count + delta);
		}

		// Token: 0x060023E7 RID: 9191 RVA: 0x001C00E4 File Offset: 0x001BE2E4
		public static void CreateWudangFirstLingbao(string afterEvent, EventArgBox argBox)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			Settlement settlement = DomainManager.Organization.GetSettlementByOrgTemplateId(4);
			Location location = settlement.GetLocation();
			DomainManager.Extra.CreateWudangLingbaoLight(context, location);
			EventHelper.WorldMapDoFocus(location, 3f, afterEvent, argBox);
		}

		// Token: 0x060023E8 RID: 9192 RVA: 0x001C012C File Offset: 0x001BE32C
		public static void CreateWudangSecondLingbao(string afterEvent, EventArgBox argBox)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			Settlement settlement = DomainManager.Organization.GetSettlementByOrgTemplateId(4);
			Location settlementLocation = settlement.GetLocation();
			List<short> blockIds = ObjectPool<List<short>>.Instance.Get();
			DomainManager.Map.GetSettlementBlocks(settlementLocation.AreaId, settlementLocation.BlockId, blockIds);
			Location location = Location.Invalid;
			for (int i = 0; i < blockIds.Count; i++)
			{
				bool flag = blockIds[i] != settlementLocation.BlockId;
				if (flag)
				{
					location = new Location(settlementLocation.AreaId, blockIds[i]);
				}
			}
			DomainManager.Extra.CreateWudangLingbaoDark(context, location);
			EventHelper.WorldMapDoFocus(location, 3f, afterEvent, argBox);
			ObjectPool<List<short>>.Instance.Return(blockIds);
		}

		// Token: 0x060023E9 RID: 9193 RVA: 0x001C01F8 File Offset: 0x001BE3F8
		public static void ClearAllWudangLingbao()
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			DomainManager.Extra.ClearAllWudangLingbao(context);
		}

		// Token: 0x060023EA RID: 9194 RVA: 0x001C0220 File Offset: 0x001BE420
		public static void AllHeavenllyTreeSuccess()
		{
			List<SectStoryHeavenlyTreeExtendable> trees = DomainManager.Extra.GetAllHeavenlyTrees();
			for (int i = trees.Count - 1; i >= 0; i--)
			{
				EventHelper.BlockOverWrittenByHeavenlyTree(trees[i].Id, true);
			}
		}

		// Token: 0x060023EB RID: 9195 RVA: 0x001C0268 File Offset: 0x001BE468
		public static bool IsRandomEnemyBelongHeavenlyTree(EventArgBox argBox)
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			Location taiwuLocation = taiwu.GetLocation();
			bool flag = !taiwuLocation.IsValid();
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				MapBlockData taiwuBlockData = DomainManager.Map.GetBlockData(taiwuLocation.AreaId, taiwuLocation.BlockId);
				ByteCoordinate taiwuPos = taiwuBlockData.GetBlockPos();
				List<SectStoryHeavenlyTreeExtendable> trees = DomainManager.Extra.GetAllHeavenlyTrees();
				for (int i = 0; i < trees.Count; i++)
				{
					Location treeLocation = trees[i].Location;
					bool flag2 = treeLocation.AreaId != taiwuLocation.AreaId;
					if (!flag2)
					{
						MapBlockData treeBlockData = DomainManager.Map.GetBlockData(treeLocation.AreaId, treeLocation.BlockId);
						bool flag3 = treeBlockData.GetManhattanDistanceToPos(taiwuPos.X, taiwuPos.Y) <= 3;
						if (flag3)
						{
							argBox.Set("CharacterId", trees[i].Id);
							return true;
						}
					}
				}
				result = false;
			}
			return result;
		}

		// Token: 0x060023EC RID: 9196 RVA: 0x001C0378 File Offset: 0x001BE578
		public static bool HaveHeavenlyTreeGrowing()
		{
			List<SectStoryHeavenlyTreeExtendable> trees = DomainManager.Extra.GetAllHeavenlyTrees();
			foreach (SectStoryHeavenlyTreeExtendable tree in trees)
			{
				GameData.Domains.Character.Character character = DomainManager.Character.GetElement_Objects(tree.Id);
				short templateId = character.GetTemplateId();
				bool flag = templateId < 677 && templateId >= 673;
				if (flag)
				{
					return true;
				}
			}
			return false;
		}

		// Token: 0x060023ED RID: 9197 RVA: 0x001C0414 File Offset: 0x001BE614
		public static void SloppyTaoistMonkUpgradeFavorability()
		{
			GameData.Domains.Character.Character monk = EventHelper.GetOrCreateFixedCharacterByTemplateId(543);
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			EventHelper.DirectlyUpgradeFavorability(monk.GetId(), taiwu.GetId());
		}

		// Token: 0x060023EE RID: 9198 RVA: 0x001C044C File Offset: 0x001BE64C
		public static bool IsSnakeGiven(short templateId)
		{
			EventArgBox sectArgBox = EventHelper.GetSectMainStoryEventArgBox(4);
			GameData.Utilities.ShortList snakes;
			sectArgBox.Get<GameData.Utilities.ShortList>("ConchShip_PresetKey_GivenMonkSnakeList", out snakes);
			bool flag = snakes.Items == null || snakes.Items.Count == 0;
			return !flag && snakes.Items.Contains(templateId);
		}

		// Token: 0x060023EF RID: 9199 RVA: 0x001C04A0 File Offset: 0x001BE6A0
		public static void SaveGivenSnake(short templateId)
		{
			EventArgBox sectArgBox = EventHelper.GetSectMainStoryEventArgBox(4);
			GameData.Utilities.ShortList snakes;
			sectArgBox.Get<GameData.Utilities.ShortList>("ConchShip_PresetKey_GivenMonkSnakeList", out snakes);
			bool flag = snakes.Items == null;
			if (flag)
			{
				snakes = GameData.Utilities.ShortList.Create();
			}
			snakes.Items.Add(templateId);
			EventHelper.SaveArgToSectMainStory<GameData.Utilities.ShortList>(4, "ConchShip_PresetKey_GivenMonkSnakeList", snakes);
		}

		// Token: 0x060023F0 RID: 9200 RVA: 0x001C04F0 File Offset: 0x001BE6F0
		public static void AddWudangReadBookToTree(short templateId)
		{
			EventArgBox sectArgBox = EventHelper.GetSectMainStoryEventArgBox(4);
			GameData.Utilities.ShortList books;
			sectArgBox.Get<GameData.Utilities.ShortList>(SectMainStoryEventArgKeys.HaveReadBookToTree, out books);
			bool flag = books.Items == null;
			if (flag)
			{
				books = GameData.Utilities.ShortList.Create();
			}
			books.Items.Add(templateId);
			EventHelper.SaveArgToSectMainStory<GameData.Utilities.ShortList>(4, SectMainStoryEventArgKeys.HaveReadBookToTree, books);
		}

		// Token: 0x060023F1 RID: 9201 RVA: 0x001C0540 File Offset: 0x001BE740
		public static bool IsBooKHaveReadToTree(short templateId)
		{
			EventArgBox sectArgBox = EventHelper.GetSectMainStoryEventArgBox(4);
			GameData.Utilities.ShortList books;
			sectArgBox.Get<GameData.Utilities.ShortList>(SectMainStoryEventArgKeys.HaveReadBookToTree, out books);
			bool flag = books.Items == null || books.Items.Count == 0;
			return !flag && books.Items.Contains(templateId);
		}

		// Token: 0x060023F2 RID: 9202 RVA: 0x001C0594 File Offset: 0x001BE794
		public static void ClearHeavenlyTreeSeed()
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			Inventory taiwuInventory = taiwu.GetInventory();
			for (short i = 272; i <= 283; i += 1)
			{
				ItemKey seed = EventHelper.GetInventoryItem(taiwu, 12, i);
				bool flag = seed.IsValid();
				if (flag)
				{
					taiwu.RemoveInventoryItem(EventHelper.Domain.MainThreadDataContext, seed, taiwuInventory.Items[seed], true, false);
				}
			}
		}

		// Token: 0x060023F3 RID: 9203 RVA: 0x001C060C File Offset: 0x001BE80C
		public static void TriggerWudangHeavenlyTreeExtraTask(int taskInfoTemplateId)
		{
			bool flag = EventHelper.GetSectMainStoryTaskStatus(4) != 0;
			if (!flag)
			{
				EventHelper.TriggerExtraTask(41, taskInfoTemplateId);
			}
		}

		// Token: 0x060023F4 RID: 9204 RVA: 0x001C0634 File Offset: 0x001BE834
		public static int GetHeavenlyTreeGrewUpValueByResource(int resourceCount)
		{
			bool flag = EventHelper.GetSectMainStoryTaskStatus(4) == 0;
			int result;
			if (flag)
			{
				result = resourceCount / 100;
			}
			else
			{
				result = resourceCount * 3 / 100;
			}
			return result;
		}

		// Token: 0x060023F5 RID: 9205 RVA: 0x001C0660 File Offset: 0x001BE860
		public static int GetHeavenlyTreeGrewUpValueByBook()
		{
			bool flag = EventHelper.GetSectMainStoryTaskStatus(4) == 0;
			int result;
			if (flag)
			{
				result = 100;
			}
			else
			{
				result = 300;
			}
			return result;
		}

		// Token: 0x060023F6 RID: 9206 RVA: 0x001C068C File Offset: 0x001BE88C
		public static bool CheckHasExtraWudangMisc()
		{
			Inventory taiwuInventory = DomainManager.Taiwu.GetTaiwu().GetInventory();
			for (short templateId = 248; templateId <= 257; templateId += 1)
			{
				bool flag = taiwuInventory.GetInventoryItemKey(12, templateId).IsValid();
				if (flag)
				{
					return true;
				}
			}
			return false;
		}

		// Token: 0x060023F7 RID: 9207 RVA: 0x001C06EC File Offset: 0x001BE8EC
		public static void RemoveExtraWudangMisc()
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			Inventory taiwuInventory = DomainManager.Taiwu.GetTaiwu().GetInventory();
			for (short templateId = 248; templateId <= 257; templateId += 1)
			{
				ItemKey item = taiwuInventory.GetInventoryItemKey(12, templateId);
				bool flag = item.IsValid();
				if (flag)
				{
					taiwu.RemoveInventoryItem(EventHelper.Domain.MainThreadDataContext, item, taiwuInventory.Items[item], true, false);
				}
			}
		}

		// Token: 0x060023F8 RID: 9208 RVA: 0x001C0770 File Offset: 0x001BE970
		public static bool IsTaiwuAtWuxianSettlement(bool settlementBlockOnly = false)
		{
			short settlementId = DomainManager.Organization.GetSettlementIdByOrgTemplateId(12);
			Location taiwuLocation = DomainManager.Taiwu.GetTaiwu().GetLocation();
			bool flag = !taiwuLocation.IsValid();
			return !flag && (settlementBlockOnly ? DomainManager.Map.IsLocationOnSettlementBlock(taiwuLocation, settlementId) : DomainManager.Map.IsLocationInSettlementInfluenceRange(taiwuLocation, settlementId));
		}

		// Token: 0x060023F9 RID: 9209 RVA: 0x001C07D0 File Offset: 0x001BE9D0
		public static bool IsPrologueWugEventAbleToTrigger()
		{
			int wugAdded;
			return EventHelper.HasSectSpiritualDebtInteractionOccurred(12) && EventHelper.IsTaiwuAtWuxianSettlement(false) && (!EventHelper.TryGetPrologueAddedWug(out wugAdded) || wugAdded == -1) && EventHelper.GetTriggeredPrologueWugEventCount() != 3 && EventHelper.GetSectMainStoryTaskStatus(12) == 0 && EventHelper.GetSectMainStoryActiveStatus(12) >= 0;
		}

		// Token: 0x060023FA RID: 9210 RVA: 0x001C0824 File Offset: 0x001BEA24
		public static bool IsLastPrologueWugEvent()
		{
			return 3 - EventHelper.GetTriggeredPrologueWugEventCount() == 1;
		}

		// Token: 0x060023FB RID: 9211 RVA: 0x001C0840 File Offset: 0x001BEA40
		public static int GetTriggeredPrologueWugEventCount()
		{
			int record = EventHelper.GetWuxianPrologueWugEventRecord();
			int count = 0;
			for (int i = 0; i < 3; i++)
			{
				bool flag = EventHelper.IsWugEventTriggered(record, i);
				if (flag)
				{
					count++;
				}
			}
			return count;
		}

		// Token: 0x060023FC RID: 9212 RVA: 0x001C0884 File Offset: 0x001BEA84
		public static int RandomPickPrologueWugEvent()
		{
			List<int> wholeSet = new List<int>();
			int record = EventHelper.GetWuxianPrologueWugEventRecord();
			for (int i = 0; i < 3; i++)
			{
				bool flag = !EventHelper.IsWugEventTriggered(record, i);
				if (flag)
				{
					wholeSet.Add(i);
				}
			}
			return (wholeSet.Count == 0) ? -1 : wholeSet[EventHelper.Domain.MainThreadDataContext.Random.Next(wholeSet.Count)];
		}

		// Token: 0x060023FD RID: 9213 RVA: 0x001C08FC File Offset: 0x001BEAFC
		public static void SavePrologueWugEventData(EventArgBox argBox)
		{
			EventArgBox permanentArgBox = DomainManager.Extra.GetSectMainStoryEventArgBox(12);
			int record = EventHelper.GetWuxianPrologueWugEventRecord();
			int wugAdded = -1;
			int delta = 0;
			int wugEvent = argBox.GetInt("PrologueWugEvent");
			permanentArgBox.Set("ConchShip_PresetKey_Wuxian_Prologue_WugEventRecord", record | 1 << wugEvent);
			permanentArgBox.Set("ConchShip_PresetKey_Wuxian_Prologue_TaiwuId", DomainManager.Taiwu.GetTaiwuCharId());
			bool flag = argBox.Get("PrologueWugAdded", ref wugAdded);
			if (flag)
			{
				permanentArgBox.Set("ConchShip_PresetKey_Wuxian_Prologue_AddedWug", wugAdded);
			}
			bool flag2 = argBox.Get("PrologueFavorabilityDelta", ref delta);
			if (flag2)
			{
				EventHelper.ChangeRanXinduFavorability(delta);
			}
			EventHelper.SaveSectMainStoryEventArgBox(12);
		}

		// Token: 0x060023FE RID: 9214 RVA: 0x001C099B File Offset: 0x001BEB9B
		public static void SavePrologueWugEventData2(EventArgBox argBox)
		{
			DomainManager.Extra.GetSectMainStoryEventArgBox(12).Set("ConchShip_PresetKey_Wuxian_Prologue_WugAttacked", true);
			EventHelper.SaveSectMainStoryEventArgBox(12);
		}

		// Token: 0x060023FF RID: 9215 RVA: 0x001C09C0 File Offset: 0x001BEBC0
		public static void SavePrologueWugEventData3(EventArgBox argBox)
		{
			EventArgBox permanentArgBox = DomainManager.Extra.GetSectMainStoryEventArgBox(12);
			permanentArgBox.Set("ConchShip_PresetKey_Wuxian_Prologue_AddedWug", -2);
			EventHelper.SaveSectMainStoryEventArgBox(12);
		}

		// Token: 0x06002400 RID: 9216 RVA: 0x001C09F4 File Offset: 0x001BEBF4
		public static void ChangeRanXinduFavorability(int delta)
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			GameData.Domains.Character.Character ran = DomainManager.Character.GetOrCreateFixedCharacterByTemplateId(EventHelper.Domain.MainThreadDataContext, 631);
			RelatedCharacter relatedCharacter;
			bool flag = !DomainManager.Character.TryGetRelation(ran.GetId(), taiwu.GetId(), out relatedCharacter);
			if (flag)
			{
				EventHelper.DirectlySetFavorabilities(ran.GetId(), taiwu.GetId(), 10000, 10000);
			}
			EventHelper.DirectlyChangeFavorabilityOptionalStoryEvent(ran, taiwu, delta);
		}

		// Token: 0x06002401 RID: 9217 RVA: 0x001C0A70 File Offset: 0x001BEC70
		public static void SetRanXinduHappiness(sbyte happinessType)
		{
			GameData.Domains.Character.Character ran = DomainManager.Character.GetOrCreateFixedCharacterByTemplateId(EventHelper.Domain.MainThreadDataContext, 631);
			ran.SetHappiness(HappinessType.Ranges[(int)happinessType].Item1, EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x06002402 RID: 9218 RVA: 0x001C0ABC File Offset: 0x001BECBC
		public static void SetPreviousTaiwuName(EventArgBox argBox)
		{
			List<int> ids = DomainManager.Taiwu.GetPreviousTaiwuIds();
			string key = "PreviousTaiwu";
			List<int> list = ids;
			argBox.Set(key, list[list.Count - 1]);
		}

		// Token: 0x06002403 RID: 9219 RVA: 0x001C0AF0 File Offset: 0x001BECF0
		public static bool TryGetPrologueAddedWug(out int wugAdded)
		{
			return DomainManager.World.TryGetPrologueAddedWug(out wugAdded);
		}

		// Token: 0x06002404 RID: 9220 RVA: 0x001C0B10 File Offset: 0x001BED10
		public static bool IsPrologueWugAttackedOnce()
		{
			return DomainManager.World.IsWuxianPrologueWugAttackedOnce();
		}

		// Token: 0x06002405 RID: 9221 RVA: 0x001C0B2C File Offset: 0x001BED2C
		public static bool IsWuxianTaiwuChanged()
		{
			return DomainManager.World.IsWuxianTaiwuChanged();
		}

		// Token: 0x06002406 RID: 9222 RVA: 0x001C0B48 File Offset: 0x001BED48
		public static sbyte GetRandomLeg(EventArgBox argBox)
		{
			sbyte leg = EventHelper.Domain.MainThreadDataContext.Random.NextBool() ? 5 : 6;
			argBox.Set("Leg", (leg == 5) ? "<Language Key=LK_CombatSkill_HitParts_LeftFoot/>" : "<Language Key=LK_CombatSkill_HitParts_RightFoot/>");
			return leg;
		}

		// Token: 0x06002407 RID: 9223 RVA: 0x001C0B94 File Offset: 0x001BED94
		public static int GetWuxianPrologueWugEventRecord()
		{
			int record = 0;
			return DomainManager.Extra.GetSectMainStoryEventArgBox(12).Get("ConchShip_PresetKey_Wuxian_Prologue_WugEventRecord", ref record) ? record : 0;
		}

		// Token: 0x06002408 RID: 9224 RVA: 0x001C0BC8 File Offset: 0x001BEDC8
		public static bool IsWugEventTriggered(int record, int wugEvent)
		{
			return (record & 1 << wugEvent) != 0;
		}

		// Token: 0x06002409 RID: 9225 RVA: 0x001C0BE8 File Offset: 0x001BEDE8
		public static int GetWuxianChapterOneVisitCount()
		{
			int count = 0;
			return DomainManager.Extra.GetSectMainStoryEventArgBox(12).Get("ConchShip_PresetKey_Wuxian_Chapter1_VisitCount", ref count) ? count : 0;
		}

		// Token: 0x0600240A RID: 9226 RVA: 0x001C0C1C File Offset: 0x001BEE1C
		public static int GetWuxianChapterOneWish(int index)
		{
			int wish = -1;
			EventArgBox sectMainStoryEventArgBox = DomainManager.Extra.GetSectMainStoryEventArgBox(12);
			if (!true)
			{
			}
			string key;
			if (index != 1)
			{
				if (index != 2)
				{
					key = "ConchShip_PresetKey_Wuxian_Chapter1_Wish3";
				}
				else
				{
					key = "ConchShip_PresetKey_Wuxian_Chapter1_Wish2";
				}
			}
			else
			{
				key = "ConchShip_PresetKey_Wuxian_Chapter1_Wish1";
			}
			if (!true)
			{
			}
			return sectMainStoryEventArgBox.Get(key, ref wish) ? wish : -1;
		}

		// Token: 0x0600240B RID: 9227 RVA: 0x001C0C78 File Offset: 0x001BEE78
		public static int GetWuxianChapterOneWishCount()
		{
			return DomainManager.World.GetWuxianChapterOneWishCount();
		}

		// Token: 0x0600240C RID: 9228 RVA: 0x001C0C94 File Offset: 0x001BEE94
		public static int GetWuxianChapterOneWishComeTrueCount()
		{
			return DomainManager.World.GetWuxianChapterOneWishComeTrueCount();
		}

		// Token: 0x0600240D RID: 9229 RVA: 0x001C0CB0 File Offset: 0x001BEEB0
		public static void SaveWuxianChapterOneData1(EventArgBox argBox)
		{
			EventArgBox permanentArgBox = DomainManager.Extra.GetSectMainStoryEventArgBox(12);
			int visitCount = EventHelper.GetWuxianChapterOneVisitCount();
			int wish = 0;
			permanentArgBox.Set("ConchShip_PresetKey_Wuxian_Chapter1_VisitCount", visitCount + 1);
			permanentArgBox.Set("ConchShip_PresetKey_Wuxian_Prologue_AddedWug", -2);
			bool flag = argBox.Get("Chapter1Wish1", ref wish);
			if (flag)
			{
				permanentArgBox.Set("ConchShip_PresetKey_Wuxian_Chapter1_Wish1", wish);
				permanentArgBox.Set("ConchShip_PresetKey_Wuxian_Chapter1_WuxianChapter1WishCount", 1);
			}
			else
			{
				bool flag2 = argBox.Get("Chapter1Wish2", ref wish);
				if (flag2)
				{
					permanentArgBox.Set("ConchShip_PresetKey_Wuxian_Chapter1_Wish2", wish);
					permanentArgBox.Set("ConchShip_PresetKey_Wuxian_Chapter1_WuxianChapter1WishCount", 2);
				}
				else
				{
					bool flag3 = argBox.Get("Chapter1Wish3", ref wish);
					if (flag3)
					{
						permanentArgBox.Set("ConchShip_PresetKey_Wuxian_Chapter1_Wish3", wish);
						permanentArgBox.Set("ConchShip_PresetKey_Wuxian_Chapter1_WuxianChapter1WishCount", 3);
					}
				}
			}
			EventHelper.SetSectSpiritualDebtInteractionOccurred(12);
			EventHelper.SaveSectMainStoryEventArgBox(12);
		}

		// Token: 0x0600240E RID: 9230 RVA: 0x001C0D90 File Offset: 0x001BEF90
		public static void SaveWuxianChapterOneData2()
		{
			EventArgBox permanentArgBox = DomainManager.Extra.GetSectMainStoryEventArgBox(12);
			int count = EventHelper.GetWuxianChapterOneWishComeTrueCount();
			permanentArgBox.Set("ConchShip_PresetKey_Wuxian_Chapter1_WishComeTrueCount", count + 1);
			EventHelper.SaveSectMainStoryEventArgBox(12);
		}

		// Token: 0x0600240F RID: 9231 RVA: 0x001C0DC8 File Offset: 0x001BEFC8
		public static void SaveWuxianChapterOneData3(EventArgBox argBox)
		{
			EventArgBox permanentArgBox = DomainManager.Extra.GetSectMainStoryEventArgBox(12);
			bool refused = false;
			permanentArgBox.Set("ConchShip_PresetKey_Wuxian_Chapter1_Refused", argBox.Get("Chapter1Refused", ref refused));
			EventHelper.SaveSectMainStoryEventArgBox(12);
		}

		// Token: 0x06002410 RID: 9232 RVA: 0x001C0E08 File Offset: 0x001BF008
		public static bool IsAbleToTriggerWuxianChapterOneTrigger1(int charId)
		{
			return DomainManager.Taiwu.GetTaiwuCharId() == charId && (EventHelper.IsExtraTaskInProgress(277) || EventHelper.IsExtraTaskInProgress(193));
		}

		// Token: 0x06002411 RID: 9233 RVA: 0x001C0E44 File Offset: 0x001BF044
		public static bool IsAbleToTriggerWuxianChapterOneTrigger3()
		{
			Location taiwuLocation = DomainManager.Taiwu.GetTaiwu().GetLocation();
			return EventHelper.IsExtraTaskInProgress(292) && DomainManager.Map.IsLocationInOrganizationInfluenceRange(taiwuLocation, 12);
		}

		// Token: 0x06002412 RID: 9234 RVA: 0x001C0E84 File Offset: 0x001BF084
		public static bool IsAbleToTriggerWuxianChapterOneTrigger4()
		{
			EventArgBox permanentArgBox = DomainManager.Extra.GetSectMainStoryEventArgBox(12);
			Location location;
			return EventHelper.IsExtraTaskInProgress(195) && permanentArgBox.Get<Location>("ConchShip_PresetKey_Wuxian_Chapter1_RanXinduLocation", out location) && DomainManager.Taiwu.GetTaiwu().GetLocation().Equals(location);
		}

		// Token: 0x06002413 RID: 9235 RVA: 0x001C0EDC File Offset: 0x001BF0DC
		public static void MoveRanXindu()
		{
			GameData.Domains.Character.Character character = EventHelper.GetOrCreateFixedCharacterByTemplateId(631);
			Location location = DomainManager.Taiwu.GetTaiwu().GetLocation();
			List<MapBlockData> neighborBlocks = new List<MapBlockData>();
			DomainManager.Map.GetNeighborBlocks(location.AreaId, location.BlockId, neighborBlocks, 1);
			MapBlockData block = neighborBlocks[EventHelper.Domain.MainThreadDataContext.Random.Next(neighborBlocks.Count)];
			EventArgBox permanentArgBox = DomainManager.Extra.GetSectMainStoryEventArgBox(12);
			Location targetLocation = new Location(block.AreaId, block.BlockId);
			permanentArgBox.Set("ConchShip_PresetKey_Wuxian_Chapter1_RanXinduLocation", targetLocation);
			EventHelper.MoveFixedCharacter(character, targetLocation);
			EventHelper.SaveSectMainStoryEventArgBox(12);
		}

		// Token: 0x06002414 RID: 9236 RVA: 0x001C0F8C File Offset: 0x001BF18C
		public static void HideRanXindu()
		{
			GameData.Domains.Character.Character character = EventHelper.GetOrCreateFixedCharacterByTemplateId(631);
			EventArgBox permanentArgBox = DomainManager.Extra.GetSectMainStoryEventArgBox(12);
			permanentArgBox.Set("ConchShip_PresetKey_Wuxian_Chapter1_RanXinduLocation", Location.Invalid);
			EventHelper.MoveFixedCharacter(character, Location.Invalid);
			EventHelper.SaveSectMainStoryEventArgBox(12);
		}

		// Token: 0x06002415 RID: 9237 RVA: 0x001C0FDC File Offset: 0x001BF1DC
		public static bool IsTaiwuMedicineOrToxicologyAttainmentEnough()
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			return EventHelper.GetRoleLifeSkillAttainmentByType(taiwu, 9) >= 200 || EventHelper.GetRoleLifeSkillAttainmentByType(taiwu, 8) >= 200;
		}

		// Token: 0x06002416 RID: 9238 RVA: 0x001C101C File Offset: 0x001BF21C
		public static bool IsRanXinduGetRefused()
		{
			bool refused = false;
			return DomainManager.Extra.GetSectMainStoryEventArgBox(12).Get("ConchShip_PresetKey_Wuxian_Chapter1_Refused", ref refused) && refused;
		}

		// Token: 0x06002417 RID: 9239 RVA: 0x001C104C File Offset: 0x001BF24C
		public static void WuxianChapterOneWishComeTrueHappy()
		{
			List<int> idList = EventHelper.GetWuxianSettlementMembers();
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			int date = DomainManager.World.GetCurrDate();
			LifeRecordCollection collection = DomainManager.LifeRecord.GetLifeRecordCollection();
			foreach (int id in idList)
			{
				GameData.Domains.Character.Character npc;
				bool flag = DomainManager.Character.TryGetElement_Objects(id, out npc);
				if (flag)
				{
					npc.ChangeHappiness(context, -10);
					collection.AddWuxianDecreasedMood(id, date);
				}
			}
		}

		// Token: 0x06002418 RID: 9240 RVA: 0x001C10EC File Offset: 0x001BF2EC
		public static void WuxianChapterOneWishComeTrueCharmed()
		{
			List<int> idList = EventHelper.GetWuxianSettlementMembers();
			HashSet<int> idList2 = new HashSet<int>();
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			int taiwuId = DomainManager.Taiwu.GetTaiwuCharId();
			int date = DomainManager.World.GetCurrDate();
			LifeRecordCollection collection = DomainManager.LifeRecord.GetLifeRecordCollection();
			foreach (int id in idList)
			{
				GameData.Domains.Character.Character @char;
				bool flag = !DomainManager.Character.TryGetElement_Objects(id, out @char);
				if (!flag)
				{
					RelatedCharacters relatedChar = DomainManager.Character.GetRelatedCharacters(id);
					bool flag2 = relatedChar == null;
					if (!flag2)
					{
						idList2.Clear();
						relatedChar.GetAllRelatedCharIds(idList2, true);
						foreach (int id2 in idList2)
						{
							GameData.Domains.Character.Character char2;
							bool flag3 = id2 == taiwuId || !DomainManager.Character.TryGetElement_Objects(id2, out char2) || @char.GetCreatingType() != 1 || char2.GetCreatingType() != 1;
							if (!flag3)
							{
								DomainManager.Character.ChangeFavorabilityOptional(context, @char, char2, -1200, 4);
							}
						}
						collection.AddWuxianDecreasedFavorability(id, date);
					}
				}
			}
		}

		// Token: 0x06002419 RID: 9241 RVA: 0x001C125C File Offset: 0x001BF45C
		public static void WuxianChapterOneWishComeTruePowerful()
		{
			List<int> idList = EventHelper.GetWuxianSettlementMembers();
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			int date = DomainManager.World.GetCurrDate();
			LifeRecordCollection collection = DomainManager.LifeRecord.GetLifeRecordCollection();
			foreach (int id in idList)
			{
				GameData.Domains.Character.Character npc;
				bool flag = DomainManager.Character.TryGetElement_Objects(id, out npc);
				if (flag)
				{
					npc.ChangeCurrNeiliWithoutChecking(context, -600);
					collection.AddWuxianQiDecline(id, date);
				}
			}
		}

		// Token: 0x0600241A RID: 9242 RVA: 0x001C1300 File Offset: 0x001BF500
		public static void WuxianChapterOneWishComeTrueHealthy()
		{
			List<int> idList = EventHelper.GetWuxianSettlementMembers();
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			int date = DomainManager.World.GetCurrDate();
			LifeRecordCollection collection = DomainManager.LifeRecord.GetLifeRecordCollection();
			foreach (int id in idList)
			{
				GameData.Domains.Character.Character npc;
				bool flag = DomainManager.Character.TryGetElement_Objects(id, out npc);
				if (flag)
				{
					npc.ChangePoisoned(context, (sbyte)context.Random.Next(6), 0, 1200);
					collection.AddWuxianPoisoning(id, date, npc.GetLocation());
				}
			}
		}

		// Token: 0x0600241B RID: 9243 RVA: 0x001C13B8 File Offset: 0x001BF5B8
		public static void WuxianChapterOneWishComeTrueRich()
		{
			List<int> idList = EventHelper.GetWuxianSettlementMembers();
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			List<MapBlockData> neighborBlockList = new List<MapBlockData>();
			int date = DomainManager.World.GetCurrDate();
			LifeRecordCollection collection = DomainManager.LifeRecord.GetLifeRecordCollection();
			foreach (int id in idList)
			{
				GameData.Domains.Character.Character npc;
				bool flag = DomainManager.Character.TryGetElement_Objects(id, out npc);
				if (flag)
				{
					Location location = npc.GetLocation();
					bool flag2 = location.Equals(Location.Invalid);
					if (!flag2)
					{
						DomainManager.Map.GetNeighborBlocks(location.AreaId, location.BlockId, neighborBlockList, 1);
						bool flag3 = neighborBlockList.Count == 0;
						if (!flag3)
						{
							for (int i = 0; i < 3; i++)
							{
								Inventory inventory = npc.GetInventory();
								bool flag4 = inventory.Items.Count == 0;
								if (!flag4)
								{
									sbyte minGrade = 8;
									ItemKey itemKey = ItemKey.Invalid;
									foreach (KeyValuePair<ItemKey, int> keyValuePair in inventory.Items)
									{
										ItemKey itemKey2;
										int num;
										keyValuePair.Deconstruct(out itemKey2, out num);
										ItemKey key = itemKey2;
										sbyte grade = ItemTemplateHelper.GetGrade(key.ItemType, key.TemplateId);
										bool flag5 = grade == minGrade && context.Random.NextBool();
										if (flag5)
										{
											itemKey = key;
										}
										else
										{
											bool flag6 = grade < minGrade;
											if (flag6)
											{
												minGrade = grade;
												itemKey = key;
											}
										}
									}
									bool flag7 = itemKey.Equals(ItemKey.Invalid);
									if (!flag7)
									{
										npc.RemoveInventoryItem(context, itemKey, 1, false, false);
										DomainManager.Map.AddBlockItem(context, neighborBlockList[context.Random.Next(neighborBlockList.Count)], itemKey, 1);
									}
								}
							}
							collection.AddWuxianLoseItem(id, date, location);
						}
					}
				}
			}
		}

		// Token: 0x0600241C RID: 9244 RVA: 0x001C1600 File Offset: 0x001BF800
		public static List<int> GetWuxianSettlementMembers()
		{
			List<int> res = new List<int>();
			DomainManager.Organization.GetSettlementByOrgTemplateId(12).GetMembers().GetAllMembers(res);
			return res;
		}

		// Token: 0x0600241D RID: 9245 RVA: 0x001C1634 File Offset: 0x001BF834
		public static bool IsAbleToTriggerWuxianChapterTwoBaihua()
		{
			Settlement settlement = DomainManager.Organization.GetSettlementByOrgTemplateId(3);
			Location taiwuLocation = DomainManager.Taiwu.GetTaiwu().GetLocation();
			return EventHelper.IsExtraTaskInProgress(194) && EventHelper.IsSectAllowLearning(3) && DomainManager.Map.IsLocationOnSettlementBlock(taiwuLocation, settlement.GetId());
		}

		// Token: 0x0600241E RID: 9246 RVA: 0x001C168C File Offset: 0x001BF88C
		public static bool IsAbleToTriggerWuxianChapterTwoBaihuaConsultation(EventArgBox argBox)
		{
			int charId = -1;
			GameData.Domains.Character.Character character;
			bool result;
			if (EventHelper.IsExtraTaskInProgress(281) && argBox.Get("CharacterId", ref charId) && DomainManager.Character.TryGetElement_Objects(charId, out character))
			{
				OrganizationInfo organizationInfo = character.GetOrganizationInfo();
				result = (organizationInfo.OrgTemplateId == 3 && organizationInfo.Grade >= 6);
			}
			else
			{
				result = false;
			}
			return result;
		}

		// Token: 0x0600241F RID: 9247 RVA: 0x001C16EC File Offset: 0x001BF8EC
		public static bool IsAbleToTriggerWuxianChapterTwoKongSang()
		{
			Settlement settlement = DomainManager.Organization.GetSettlementByOrgTemplateId(10);
			Location taiwuLocation = DomainManager.Taiwu.GetTaiwu().GetLocation();
			return EventHelper.IsExtraTaskInProgress(196) && EventHelper.IsSectAllowLearning(10) && DomainManager.Map.IsLocationOnSettlementBlock(taiwuLocation, settlement.GetId());
		}

		// Token: 0x06002420 RID: 9248 RVA: 0x001C1744 File Offset: 0x001BF944
		public static bool IsAbleToTriggerWuxianChapterTwoKongSangConsultation(EventArgBox argBox)
		{
			int charId = -1;
			GameData.Domains.Character.Character character;
			bool result;
			if (EventHelper.IsExtraTaskInProgress(283) && argBox.Get("CharacterId", ref charId) && DomainManager.Character.TryGetElement_Objects(charId, out character))
			{
				OrganizationInfo organizationInfo = character.GetOrganizationInfo();
				result = (organizationInfo.OrgTemplateId == 10 && organizationInfo.Grade >= 6);
			}
			else
			{
				result = false;
			}
			return result;
		}

		// Token: 0x06002421 RID: 9249 RVA: 0x001C17A8 File Offset: 0x001BF9A8
		public static void SaveWuxianChapterTwoData1(EventArgBox argBox)
		{
			EventArgBox permanentArgBox = DomainManager.Extra.GetSectMainStoryEventArgBox(12);
			int selection = 0;
			bool flag = argBox.Get("Chapter2Selection1", ref selection);
			if (flag)
			{
				permanentArgBox.Set("ConchShip_PresetKey_Wuxian_Chapter2_Adventure1Selection", selection);
			}
			else
			{
				bool flag2 = argBox.Get("Chapter2Selection2", ref selection);
				if (flag2)
				{
					permanentArgBox.Set("ConchShip_PresetKey_Wuxian_Chapter2_Adventure2Selection", selection);
				}
			}
			EventHelper.SaveSectMainStoryEventArgBox(12);
		}

		// Token: 0x06002422 RID: 9250 RVA: 0x001C180C File Offset: 0x001BFA0C
		public static int GetWuxianChapterTwoSelection(int index)
		{
			int selection = -1;
			EventArgBox sectMainStoryEventArgBox = DomainManager.Extra.GetSectMainStoryEventArgBox(12);
			if (!true)
			{
			}
			string key;
			if (index != 1)
			{
				key = "ConchShip_PresetKey_Wuxian_Chapter2_Adventure2Selection";
			}
			else
			{
				key = "ConchShip_PresetKey_Wuxian_Chapter2_Adventure1Selection";
			}
			if (!true)
			{
			}
			return sectMainStoryEventArgBox.Get(key, ref selection) ? selection : -1;
		}

		// Token: 0x06002423 RID: 9251 RVA: 0x001C185C File Offset: 0x001BFA5C
		public static void SetWuxianChapterTwoSectLeaderArgBox(EventArgBox argBox, bool isBaihua)
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			sbyte sectTemplateId = isBaihua ? 3 : 10;
			short seniorTemplateId = isBaihua ? 332 : 388;
			GameData.Domains.Character.Character sectLeader = EventHelper.TryGetSectLeaderAtLocation(taiwu.GetLocation(), sectTemplateId, true);
			bool flag = sectLeader != null;
			if (flag)
			{
				OrganizationMemberItem memberConfig = OrganizationDomain.GetOrgMemberConfig(sectLeader.GetOrganizationInfo());
				argBox.Set("SectLeader", sectLeader.GetId());
				argBox.Set("SectLeaderName", "<color=#GradeColor_8>" + memberConfig.GradeName + "</color>");
			}
			else
			{
				int sectLeaderId = EventHelper.CreateNonIntelligentCharacter(seniorTemplateId);
				argBox.Set("SectLeader", sectLeaderId);
				argBox.Set("SectLeaderName", "<color=#GradeColor_8><Language Key=Event_SectStoryShixiang_Qianbei/></color>");
			}
		}

		// Token: 0x06002424 RID: 9252 RVA: 0x001C1914 File Offset: 0x001BFB14
		public static void CreateWuxianChapterTowAdventure(bool isBaihua)
		{
			Location location = DomainManager.Organization.GetSettlementByOrgTemplateId(isBaihua ? 3 : 10).GetLocation();
			short adventureId = isBaihua ? 183 : 180;
			List<MapBlockData> blocks = new List<MapBlockData>();
			DomainManager.Map.GetSettlementAffiliatedBlocks(location.AreaId, location.BlockId, blocks);
			foreach (MapBlockData block in blocks)
			{
				bool flag = EventHelper.TryCreateAdventureSite(block.AreaId, block.BlockId, adventureId, true);
				if (flag)
				{
					break;
				}
			}
		}

		// Token: 0x06002425 RID: 9253 RVA: 0x001C19C4 File Offset: 0x001BFBC4
		public static void SaveWuxianChapterThreeData1(EventArgBox argBox)
		{
			DomainManager.Extra.GetSectMainStoryEventArgBox(12).Set("ConchShip_PresetKey_Wuxian_Chapter3_AbleToStart", true);
			EventHelper.SaveSectMainStoryEventArgBox(12);
		}

		// Token: 0x06002426 RID: 9254 RVA: 0x001C19E8 File Offset: 0x001BFBE8
		public static void SaveWuxianChapterThreeData2(EventArgBox argBox)
		{
			int count = EventHelper.GetWuxianChapterThreeMailReceivedCount();
			DomainManager.Extra.GetSectMainStoryEventArgBox(12).Set("ConchShip_PresetKey_Wuxian_Chapter3_MailReceivedCount", count + 1);
			EventHelper.SaveSectMainStoryEventArgBox(12);
		}

		// Token: 0x06002427 RID: 9255 RVA: 0x001C1A20 File Offset: 0x001BFC20
		public static int GetWuxianChapterThreeMailReceivedCount()
		{
			int count = 0;
			return DomainManager.Extra.GetSectMainStoryEventArgBox(12).Get("ConchShip_PresetKey_Wuxian_Chapter3_MailReceivedCount", ref count) ? count : 0;
		}

		// Token: 0x06002428 RID: 9256 RVA: 0x001C1A52 File Offset: 0x001BFC52
		public static void TriggerWuxianStoryAdventureAction()
		{
			DomainManager.TaiwuEvent.AddTempDynamicAction<WuxianStoryAdventureTriggerAction>(EventHelper.Domain.MainThreadDataContext, new WuxianStoryAdventureTriggerAction());
		}

		// Token: 0x06002429 RID: 9257 RVA: 0x001C1A70 File Offset: 0x001BFC70
		public static bool IsWuxianFinalBossBeaten()
		{
			return DomainManager.World.IsWuxianFinalBossBeaten();
		}

		// Token: 0x0600242A RID: 9258 RVA: 0x001C1A8C File Offset: 0x001BFC8C
		public static bool IsWuxianStoryAdventureComplete()
		{
			EventArgBox permanentArgBox = DomainManager.Extra.GetSectMainStoryEventArgBox(12);
			bool isComplete = false;
			return permanentArgBox.Get("ConchShip_PresetKey_Wuxian_Chapter4_AdventureComplete", ref isComplete) && isComplete;
		}

		// Token: 0x0600242B RID: 9259 RVA: 0x001C1ABC File Offset: 0x001BFCBC
		public static bool IsAbleToTriggerWuxianChapterFourFinal()
		{
			return EventHelper.IsTaiwuAtWuxianSettlement(true) && EventHelper.IsWuxianFinalBossBeaten() && DomainManager.World.GetCurrDate() >= EventHelper.GetWuxianHappyEndingEventDate() && DomainManager.Extra.GetExtraTaskChainCurrentTask(36) >= 0;
		}

		// Token: 0x0600242C RID: 9260 RVA: 0x001C1B04 File Offset: 0x001BFD04
		public static int GetWuxianHappyEndingEventDate()
		{
			return DomainManager.World.GetWuxianHappyEndingEventDate();
		}

		// Token: 0x0600242D RID: 9261 RVA: 0x001C1B20 File Offset: 0x001BFD20
		public static void SaveChapterFourFinalAdventureData(bool isFinalBossBeaten)
		{
			EventArgBox permanentArgBox = DomainManager.Extra.GetSectMainStoryEventArgBox(12);
			permanentArgBox.Set("ConchShip_PresetKey_Wuxian_Chapter4_AdventureComplete", true);
			permanentArgBox.Set("ConchShip_PresetKey_Wuxian_Chapter4_FinalBossBeaten", isFinalBossBeaten);
			EventHelper.SaveSectMainStoryEventArgBox(12);
		}

		// Token: 0x0600242E RID: 9262 RVA: 0x001C1B60 File Offset: 0x001BFD60
		public static void RanXinduHealCharacter(int charId)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			GameData.Domains.Character.Character character;
			bool flag = GameData.Domains.Character.Character.IsCharacterIdValid(charId) && DomainManager.Character.TryGetElement_Objects(charId, out character);
			if (flag)
			{
				PoisonInts emptyPoisons = default(PoisonInts);
				character.SetInjuries(default(Injuries), context);
				character.SetPoisoned(ref emptyPoisons, context);
			}
		}

		// Token: 0x0600242F RID: 9263 RVA: 0x001C1BBB File Offset: 0x001BFDBB
		public static void WuxianEndingFailing0()
		{
			DomainManager.World.WuxianEndingFailing0(EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x06002430 RID: 9264 RVA: 0x001C1BD3 File Offset: 0x001BFDD3
		public static void WuxianEndingFailing1()
		{
			DomainManager.World.WuxianEndingFailing1(EventHelper.Domain.MainThreadDataContext, true);
		}

		// Token: 0x06002431 RID: 9265 RVA: 0x001C1BEC File Offset: 0x001BFDEC
		public static void WuxianEndingProsperous()
		{
			DomainManager.World.WuxianEndingProsperous(EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x06002432 RID: 9266 RVA: 0x001C1C04 File Offset: 0x001BFE04
		[Obsolete]
		public static void WuxianEndingEvent(bool goodEnd, int informationIndex, string afterEvent = "", EventArgBox argBox = null)
		{
			EventHelper.SectMainStoryEnd(12, goodEnd, informationIndex, afterEvent, argBox, true);
		}

		// Token: 0x06002433 RID: 9267 RVA: 0x001C1C14 File Offset: 0x001BFE14
		public static bool IsWuxianPassLegacyEventTriggered()
		{
			bool triggered = false;
			return DomainManager.Extra.GetSectMainStoryEventArgBox(12).Get("ConchShip_PresetKey_Wuxian_PassLegacyEventTriggered", ref triggered) && triggered;
		}

		// Token: 0x06002434 RID: 9268 RVA: 0x001C1C44 File Offset: 0x001BFE44
		public static bool IsWuxianEndingEventTriggered()
		{
			return DomainManager.World.IsWuxianEndingEventTriggered();
		}

		// Token: 0x06002435 RID: 9269 RVA: 0x001C1C60 File Offset: 0x001BFE60
		public static void SetWuxianPassLegacyEventTriggered()
		{
			DomainManager.Extra.GetSectMainStoryEventArgBox(12).Set("ConchShip_PresetKey_Wuxian_PassLegacyEventTriggered", true);
			EventHelper.SaveSectMainStoryEventArgBox(12);
		}

		// Token: 0x06002436 RID: 9270 RVA: 0x001C1C83 File Offset: 0x001BFE83
		public static void SetWuxianEndingEventTriggered()
		{
			DomainManager.Extra.GetSectMainStoryEventArgBox(12).Set("ConchShip_PresetKey_Wuxian_Chapter4_EndingEventTriggered", true);
			EventHelper.SaveSectMainStoryEventArgBox(12);
		}

		// Token: 0x06002437 RID: 9271 RVA: 0x001C1CA8 File Offset: 0x001BFEA8
		public static int GetWuxianWugJugPoisonSum()
		{
			return DomainManager.Extra.GetSectWuxianWugJugPoisons().Poisons.Sum();
		}

		// Token: 0x06002438 RID: 9272 RVA: 0x001C1CCE File Offset: 0x001BFECE
		public static void AddDisplayEventWugFairy()
		{
			GameDataBridge.AddDisplayEvent(DisplayEventType.WuxianWugFairy);
		}

		// Token: 0x06002439 RID: 9273 RVA: 0x001C1CDC File Offset: 0x001BFEDC
		public static string GetRanXinduText(sbyte type, EventArgBox argBox, bool usePrevious = false)
		{
			string res = "";
			string result;
			if (usePrevious)
			{
				argBox.Get("WuxianRanXinduText", ref res);
				result = "<Language Key=" + res + "/>";
			}
			else
			{
				DataContext context = EventHelper.Domain.MainThreadDataContext;
				bool flag = type == 1;
				if (flag)
				{
					bool flag2 = context.Random.NextBool();
					if (flag2)
					{
						Location taiwuLocation = DomainManager.Taiwu.GetTaiwu().GetLocation();
						sbyte i;
						for (i = 1; i <= 15; i += 1)
						{
							bool flag3 = EventHelper.GetStateIdByAreaId(DomainManager.Organization.GetSettlementByOrgTemplateId(i).GetLocation().AreaId) == EventHelper.GetStateIdByAreaId(taiwuLocation.AreaId);
							if (flag3)
							{
								res = SectMainStoryRelatedConstants.RanXinduFairyTexts[0][(int)(i - 1)];
								break;
							}
						}
						bool flag4 = i > 15;
						if (flag4)
						{
							res = SectMainStoryRelatedConstants.RanXinduFairyTexts[1][context.Random.Next(SectMainStoryRelatedConstants.RanXinduFairyTexts[1].Length)];
						}
					}
					else
					{
						res = SectMainStoryRelatedConstants.RanXinduFairyTexts[1][context.Random.Next(SectMainStoryRelatedConstants.RanXinduFairyTexts[1].Length)];
					}
				}
				else
				{
					res = SectMainStoryRelatedConstants.RanXinduFairyTexts[(int)type][context.Random.Next(SectMainStoryRelatedConstants.RanXinduFairyTexts[(int)type].Length)];
				}
				argBox.Set("WuxianRanXinduText", res);
				result = "<Language Key=" + res + "/>";
			}
			return result;
		}

		// Token: 0x0600243A RID: 9274 RVA: 0x001C1E60 File Offset: 0x001C0060
		public static List<ValueTuple<ItemKey, int>> GetPoisonItemsFromRanXindu(bool isHot)
		{
			List<ValueTuple<ItemKey, int>> list = new List<ValueTuple<ItemKey, int>>();
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			for (int i = 0; i < 7; i++)
			{
				int num3;
				if (isHot)
				{
					int num = EventHelper.Domain.MainThreadDataContext.Random.Next(3);
					if (!true)
					{
					}
					int num2;
					if (num != 0)
					{
						if (num != 1)
						{
							num2 = 264 + i;
						}
						else
						{
							num2 = 257 + i;
						}
					}
					else
					{
						num2 = 236 + i;
					}
					if (!true)
					{
					}
					num3 = num2;
				}
				else
				{
					int num4 = EventHelper.Domain.MainThreadDataContext.Random.Next(3);
					if (!true)
					{
					}
					int num2;
					if (num4 != 0)
					{
						if (num4 != 1)
						{
							num2 = 271 + i;
						}
						else
						{
							num2 = 243 + i;
						}
					}
					else
					{
						num2 = 250 + i;
					}
					if (!true)
					{
					}
					num3 = num2;
				}
				int templateId = num3;
				ItemKey itemKey = EventHelper.AddItemToRole(taiwu, 5, (short)templateId, SectMainStoryRelatedConstants.PoisonItemsFromRanXinduCount[i], -1);
				list.Add(new ValueTuple<ItemKey, int>(itemKey, SectMainStoryRelatedConstants.PoisonItemsFromRanXinduCount[i]));
			}
			return list;
		}

		// Token: 0x0600243B RID: 9275 RVA: 0x001C1F74 File Offset: 0x001C0174
		public static ItemKey XuannvCreateRandomJadeItemWithGradeToTaiwu(sbyte gradeMin, sbyte gradeMax, int amount = 1)
		{
			short jadeOuterItemTemplateBegin = 28;
			short jadeInnerItemTemplateBegin = 35;
			List<short> jadeMatIdList = new List<short>();
			while (gradeMin <= gradeMax)
			{
				jadeMatIdList.Add(jadeOuterItemTemplateBegin + (short)gradeMin);
				jadeMatIdList.Add(jadeInnerItemTemplateBegin + (short)gradeMin);
				gradeMin += 1;
			}
			CollectionUtils.Shuffle<short>(EventHelper.Domain.MainThreadDataContext.Random, jadeMatIdList);
			short templateId = jadeMatIdList.GetRandom(EventHelper.Domain.MainThreadDataContext.Random);
			GameData.Domains.Character.Character taiwuChar = DomainManager.Taiwu.GetTaiwu();
			return EventHelper.AddItemToRole(taiwuChar, 5, templateId, amount, -1);
		}

		// Token: 0x0600243C RID: 9276 RVA: 0x001C2004 File Offset: 0x001C0204
		public static void XuannvDoctorHealTaiwuInjury()
		{
			EventHelper.ClearCharInjury(DomainManager.Taiwu.GetTaiwuCharId());
		}

		// Token: 0x0600243D RID: 9277 RVA: 0x001C2017 File Offset: 0x001C0217
		public static void XuannvDoctorHealTaiwuPoison()
		{
			EventHelper.ClearCharPoison(DomainManager.Taiwu.GetTaiwuCharId());
		}

		// Token: 0x0600243E RID: 9278 RVA: 0x001C202A File Offset: 0x001C022A
		public static void XuannvDoctorHealTaiwuDisorderOfQi()
		{
			DomainManager.Taiwu.GetTaiwu().SetDisorderOfQi(0, EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x0600243F RID: 9279 RVA: 0x001C2048 File Offset: 0x001C0248
		public unsafe static sbyte XuannvGetTaiwuMaxPoisonType()
		{
			GameData.Domains.Character.Character taiwuChar = DomainManager.Taiwu.GetTaiwu();
			PoisonInts taiwuPoisonInts = *taiwuChar.GetPoisoned();
			int poisonMaxValue = 0;
			sbyte poisonMaxType = -1;
			for (sbyte i = 0; i < 6; i += 1)
			{
				bool flag = *(ref taiwuPoisonInts.Items.FixedElementField + (IntPtr)i * 4) > poisonMaxValue;
				if (flag)
				{
					poisonMaxType = i;
					poisonMaxValue = *(ref taiwuPoisonInts.Items.FixedElementField + (IntPtr)i * 4);
				}
			}
			return poisonMaxType;
		}

		// Token: 0x06002440 RID: 9280 RVA: 0x001C20C8 File Offset: 0x001C02C8
		public static bool XuannvHasTaiwuLearnedAllXuannvCombatSkills()
		{
			int taiwuCharId = DomainManager.Taiwu.GetTaiwuCharId();
			Dictionary<short, GameData.Domains.CombatSkill.CombatSkill> learnedCombatSkills = DomainManager.CombatSkill.GetCharCombatSkills(taiwuCharId);
			IReadOnlyList<IReadOnlyList<CombatSkillItem>> learnableCombatSkills = CombatSkillDomain.GetLearnableCombatSkills(8);
			foreach (IReadOnlyList<CombatSkillItem> typeCombatSkills in learnableCombatSkills)
			{
				foreach (CombatSkillItem combatSkillCfg in typeCombatSkills)
				{
					bool flag = !learnedCombatSkills.ContainsKey(combatSkillCfg.TemplateId);
					if (flag)
					{
						return false;
					}
				}
			}
			return true;
		}

		// Token: 0x06002441 RID: 9281 RVA: 0x001C218C File Offset: 0x001C038C
		public static List<ValueTuple<ItemKey, int>> XuannvLearnCombatSkill(bool isRevers)
		{
			EventArgBox argBox = DomainManager.Extra.GetSectMainStoryEventArgBox(8);
			sbyte combatSkillType = -1;
			Tester.Assert(argBox.Get("ConchShip_PresetKey_XuannvPartTwo_SelectedCombatSkillType", ref combatSkillType), "");
			int completeTimes = argBox.GetInt("ConchShip_PresetKey_Xuannv_PartThreeSearchLoverCountKey");
			HashSet<sbyte>[] gradeHashDistribution = new HashSet<sbyte>[]
			{
				new HashSet<sbyte>
				{
					0,
					1,
					2
				},
				new HashSet<sbyte>
				{
					3,
					4,
					5
				},
				new HashSet<sbyte>
				{
					6,
					7,
					8
				}
			};
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			GameData.Domains.Character.Character taiwuChar = DomainManager.Taiwu.GetTaiwu();
			int charId = DomainManager.Taiwu.GetTaiwuCharId();
			List<short> learnedSkills = taiwuChar.GetLearnedCombatSkills();
			IReadOnlyList<CombatSkillItem> learnableCombatSkills = CombatSkillDomain.GetLearnableCombatSkills(8, combatSkillType);
			List<ValueTuple<ItemKey, int>> bookList = new List<ValueTuple<ItemKey, int>>();
			string[] keys = new string[]
			{
				"ConchShip_PresetKey_XuannvPartThree_LearningSkillId_0",
				"ConchShip_PresetKey_XuannvPartThree_LearningSkillId_1",
				"ConchShip_PresetKey_XuannvPartThree_LearningSkillId_2"
			};
			int keyIndex = 0;
			foreach (CombatSkillItem skill in learnableCombatSkills)
			{
				bool flag = !gradeHashDistribution[completeTimes].Contains(skill.Grade);
				if (!flag)
				{
					short templateId = skill.TemplateId;
					bool flag2 = !learnedSkills.Contains(templateId) || !EventHelper.XuannvTaiwuCanLearnCombatSkill(templateId);
					if (flag2)
					{
						bool flag3 = keys.CheckIndex(keyIndex);
						if (flag3)
						{
							argBox.Set(keys[keyIndex++], templateId);
						}
					}
					short bookTemplateId = Config.CombatSkill.Instance[templateId].BookId;
					ItemKey itemKey = DomainManager.Item.CreateSkillBook(context, bookTemplateId, 5, -1, -1, isRevers ? 0 : 100, true);
					DomainManager.Taiwu.GetTaiwu().AddInventoryItem(context, itemKey, 1, false);
					bookList.Add(new ValueTuple<ItemKey, int>(itemKey, 1));
					bool flag4 = learnedSkills.Contains(templateId);
					if (!flag4)
					{
						EventHelper.LearnCombatSkill(charId, templateId);
					}
				}
			}
			argBox.Set("ConchShip_PresetKey_XuannvPartThree_LearningSkill", true);
			EventHelper.SaveSectMainStoryEventArgBox(8);
			return bookList;
		}

		// Token: 0x06002442 RID: 9282 RVA: 0x001C23D0 File Offset: 0x001C05D0
		public static List<ValueTuple<ItemKey, int>> XuannvAddSkillBookOnly(bool isRevers)
		{
			EventArgBox argBox = DomainManager.Extra.GetSectMainStoryEventArgBox(8);
			sbyte combatSkillType = -1;
			bool flag = !argBox.Get("ConchShip_PresetKey_XuannvPartTwo_SelectedCombatSkillType", ref combatSkillType);
			if (flag)
			{
				combatSkillType = 0;
			}
			int completeTimes = argBox.GetInt("ConchShip_PresetKey_Xuannv_PartThreeSearchLoverCountKey");
			HashSet<sbyte>[] gradeHashDistribution = new HashSet<sbyte>[]
			{
				new HashSet<sbyte>
				{
					0,
					1,
					2
				},
				new HashSet<sbyte>
				{
					3,
					4,
					5
				},
				new HashSet<sbyte>
				{
					6,
					7,
					8
				}
			};
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			IReadOnlyList<CombatSkillItem> learnableCombatSkills = CombatSkillDomain.GetLearnableCombatSkills(8, combatSkillType);
			List<ValueTuple<ItemKey, int>> bookList = new List<ValueTuple<ItemKey, int>>();
			foreach (CombatSkillItem skill in learnableCombatSkills)
			{
				bool flag2 = !gradeHashDistribution[completeTimes].Contains(skill.Grade);
				if (!flag2)
				{
					short templateId = skill.TemplateId;
					short bookTemplateId = Config.CombatSkill.Instance[templateId].BookId;
					ItemKey itemKey = DomainManager.Item.CreateSkillBook(context, bookTemplateId, 5, -1, -1, isRevers ? 0 : 100, true);
					DomainManager.Taiwu.GetTaiwu().AddInventoryItem(context, itemKey, 1, false);
					bookList.Add(new ValueTuple<ItemKey, int>(itemKey, 1));
				}
			}
			EventHelper.SaveSectMainStoryEventArgBox(8);
			return bookList;
		}

		// Token: 0x06002443 RID: 9283 RVA: 0x001C2560 File Offset: 0x001C0760
		public static bool XuannvCombatSkillPracticeCanFightJuner()
		{
			bool flag = EventHelper.XuannvHasTaiwuLearnedAllXuannvCombatSkills();
			bool result;
			if (flag)
			{
				result = true;
			}
			else
			{
				EventArgBox argBox = DomainManager.Extra.GetSectMainStoryEventArgBox(8);
				sbyte combatSkillType = -1;
				Tester.Assert(argBox.Get("ConchShip_PresetKey_XuannvPartTwo_SelectedCombatSkillType", ref combatSkillType), "");
				int completeTimes = argBox.GetInt("ConchShip_PresetKey_Xuannv_PartThreeSearchLoverCountKey");
				ValueTuple<sbyte, sbyte> groupGradeRange = Grade.GetGroupGradeRange((sbyte)completeTimes);
				sbyte minGarde = groupGradeRange.Item1;
				sbyte maxGrade = groupGradeRange.Item2;
				GameData.Domains.Character.Character taiwuChar = DomainManager.Taiwu.GetTaiwu();
				List<short> learnedSkills = taiwuChar.GetLearnedCombatSkills();
				IReadOnlyList<CombatSkillItem> learnableCombatSkills = CombatSkillDomain.GetLearnableCombatSkills(8, combatSkillType);
				foreach (CombatSkillItem skill in learnableCombatSkills)
				{
					bool flag2 = skill.Grade > maxGrade || skill.Grade < minGarde;
					if (!flag2)
					{
						short templateId = skill.TemplateId;
						bool flag3 = !learnedSkills.Contains(templateId);
						if (flag3)
						{
							return false;
						}
						bool flag4 = !EventHelper.XuannvTaiwuCanLearnCombatSkill(templateId);
						if (flag4)
						{
							return false;
						}
					}
				}
				result = true;
			}
			return result;
		}

		// Token: 0x06002444 RID: 9284 RVA: 0x001C2684 File Offset: 0x001C0884
		public unsafe static void XuannvInitJunerLoverReincarnateLocations()
		{
			EventArgBox sectArgBox = EventHelper.GetSectMainStoryEventArgBox(8);
			bool flag = sectArgBox.Contains<short>("ConchShip_PresetKey_Xuannv_PartThree_LoverReincarnateLocation1");
			if (!flag)
			{
				IRandomSource randomSource = EventHelper.Domain.MainThreadDataContext.Random;
				IntPtr intPtr = stackalloc byte[(UIntPtr)8];
				*intPtr = 47;
				*(intPtr + 2) = 49;
				*(intPtr + (IntPtr)2 * 2) = 84;
				*(intPtr + (IntPtr)3 * 2) = 83;
				Span<short> span = new Span<short>(intPtr, 4);
				Span<short> selectables = span;
				CollectionUtils.Shuffle<short>(randomSource, selectables, 4);
				List<SettlementInfo> settlementList = new List<SettlementInfo>();
				Settlement taiwuSettlement = DomainManager.Organization.GetSettlementByOrgTemplateId(16);
				Span<short> span2 = selectables;
				for (int k = 0; k < span2.Length; k++)
				{
					short areaTemplateId = *span2[k];
					short areaId = DomainManager.Map.GetAreaIdByAreaTemplateId(areaTemplateId);
					bool flag2 = !DomainManager.Map.IsAreaBroken(areaId);
					if (flag2)
					{
						MapAreaData areaData = DomainManager.Map.GetElement_Areas((int)areaId);
						for (int i = 0; i < 3; i++)
						{
							SettlementInfo settlementInfo = areaData.SettlementInfos[i];
							bool flag3 = settlementInfo.SettlementId == taiwuSettlement.GetId();
							if (!flag3)
							{
								bool flag4 = settlementInfo.SettlementId >= 0;
								if (flag4)
								{
									settlementList.Add(settlementInfo);
								}
							}
						}
						break;
					}
				}
				bool flag5 = settlementList.Count < 3;
				if (flag5)
				{
					Location xuannvLocation = DomainManager.Organization.GetSettlementByOrgTemplateId(8).GetLocation();
					sbyte stateTemplateId = randomSource.NextBool() ? 8 : 3;
					sbyte stateId = DomainManager.Map.GetStateIdByStateTemplateId((short)stateTemplateId);
					List<short> areas = ObjectPool<List<short>>.Instance.Get();
					DomainManager.Map.GetAllRegularAreaInState(stateId, areas);
					areas.Remove(xuannvLocation.AreaId);
					while (settlementList.Count < 3)
					{
						short randomAreaId = areas.GetRandom(randomSource);
						areas.Remove(randomAreaId);
						MapAreaData areaData2 = DomainManager.Map.GetElement_Areas((int)randomAreaId);
						for (int j = 0; j < 3; j++)
						{
							SettlementInfo settlementInfo2 = areaData2.SettlementInfos[j];
							bool flag6 = settlementInfo2.SettlementId == taiwuSettlement.GetId();
							if (!flag6)
							{
								bool flag7 = settlementInfo2.SettlementId >= 0;
								if (flag7)
								{
									settlementList.Add(settlementInfo2);
								}
							}
						}
						bool flag8 = areas.Count <= 0;
						if (flag8)
						{
							break;
						}
					}
					ObjectPool<List<short>>.Instance.Return(areas);
				}
				settlementList.RemoveAll(delegate(SettlementInfo e)
				{
					sbyte orgTemplateId = e.OrgTemplateId;
					return orgTemplateId >= 1 && orgTemplateId <= 15;
				});
				CollectionUtils.Shuffle<SettlementInfo>(EventHelper.Domain.MainThreadDataContext.Random, settlementList);
				SettlementInfo randomResult = settlementList.GetRandom(EventHelper.Domain.MainThreadDataContext.Random);
				sectArgBox.Set("ConchShip_PresetKey_Xuannv_PartThree_LoverReincarnateLocation1", randomResult.SettlementId);
				bool flag9 = settlementList.Count > 1;
				if (flag9)
				{
					settlementList.RemoveAll((SettlementInfo e) => e.SettlementId == randomResult.SettlementId);
				}
				randomResult = settlementList.GetRandom(EventHelper.Domain.MainThreadDataContext.Random);
				sectArgBox.Set("ConchShip_PresetKey_Xuannv_PartThree_LoverReincarnateLocation2", randomResult.SettlementId);
				bool flag10 = settlementList.Count > 1;
				if (flag10)
				{
					settlementList.RemoveAll((SettlementInfo e) => e.SettlementId == randomResult.SettlementId);
				}
				randomResult = settlementList.GetRandom(EventHelper.Domain.MainThreadDataContext.Random);
				sectArgBox.Set("ConchShip_PresetKey_Xuannv_PartThree_LoverReincarnateLocation3", randomResult.SettlementId);
				EventHelper.SaveSectMainStoryEventArgBox(8);
			}
		}

		// Token: 0x06002445 RID: 9285 RVA: 0x001C2A1C File Offset: 0x001C0C1C
		public static void XuannvCreateSearchLoverAdventure()
		{
			EventArgBox sectArgBox = EventHelper.GetSectMainStoryEventArgBox(8);
			int searchLoveCount = sectArgBox.GetInt("ConchShip_PresetKey_Xuannv_PartThreeSearchLoverCountKey");
			if (!true)
			{
			}
			short num;
			switch (searchLoveCount)
			{
			case 0:
				num = 174;
				break;
			case 1:
				num = 172;
				break;
			case 2:
				num = 173;
				break;
			default:
				num = -1;
				break;
			}
			if (!true)
			{
			}
			short adventureTemplateId = num;
			bool flag = adventureTemplateId < 0;
			if (!flag)
			{
				short xuannvSettlementId = EventHelper.GetSettlementIdByOrgTemplateId(8);
				Settlement xuannvSettlement = DomainManager.Organization.GetSettlement(xuannvSettlementId);
				List<short> settlementLocations = EventHelper.GetSettlementLocationsByOrgTemplateId(8, true);
				List<Location> locationList = settlementLocations.ConvertAll<Location>((short e) => new Location(xuannvSettlement.GetLocation().AreaId, e));
				int i = 0;
				int max = locationList.Count;
				while (i < max)
				{
					bool flag2 = !EventHelper.CheckBlockHasAdventure(locationList[i]);
					if (flag2)
					{
						EventHelper.TryCreateAdventureSite(locationList[i].AreaId, locationList[i].BlockId, adventureTemplateId, true);
						break;
					}
					i++;
				}
				sectArgBox.Remove<int>("ConchShip_PresetKey_XuannvStory_PartThree_LastDateOfAdventureIllusionOfMirror");
				EventHelper.SaveSectMainStoryEventArgBox(8);
			}
		}

		// Token: 0x06002446 RID: 9286 RVA: 0x001C2B3C File Offset: 0x001C0D3C
		public static bool XuannvInquireSecretGuestOptionOne(EventArgBox argBox)
		{
			bool flag = !EventHelper.IsExtraTaskInProgress(141);
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				int charId = argBox.GetInt("CharacterId");
				bool flag2 = EventHelper.IsInAnySect(charId) || EventHelper.CharacterIsInTaiwuGroup(charId);
				if (flag2)
				{
					result = false;
				}
				else
				{
					short xuannvAreaId = EventHelper.GetAreaIdByAreaTemplateId(23);
					GameData.Domains.Character.Character role = argBox.GetCharacter("CharacterId");
					bool flag3 = role.GetLocation().AreaId != xuannvAreaId;
					if (flag3)
					{
						result = false;
					}
					else
					{
						EventArgBox sectArgBox = EventHelper.GetSectMainStoryEventArgBox(8);
						int roleId = role.GetId();
						bool flag4 = sectArgBox.Contains<int>("ConchShip_PresetKey_Xuannv_NoneSectNpcInquireSecretGuest1") && sectArgBox.GetInt("ConchShip_PresetKey_Xuannv_NoneSectNpcInquireSecretGuest1") == roleId;
						if (flag4)
						{
							result = false;
						}
						else
						{
							bool flag5 = sectArgBox.Contains<int>("ConchShip_PresetKey_Xuannv_NoneSectNpcInquireSecretGuest2") && sectArgBox.GetInt("ConchShip_PresetKey_Xuannv_NoneSectNpcInquireSecretGuest2") == roleId;
							if (flag5)
							{
								result = false;
							}
							else
							{
								bool flag6 = sectArgBox.Contains<int>("ConchShip_PresetKey_Xuannv_NoneSectNpcInquireSecretGuest3") && sectArgBox.GetInt("ConchShip_PresetKey_Xuannv_NoneSectNpcInquireSecretGuest3") == roleId;
								result = !flag6;
							}
						}
					}
				}
			}
			return result;
		}

		// Token: 0x06002447 RID: 9287 RVA: 0x001C2C58 File Offset: 0x001C0E58
		public static bool XuannvInquireSecretGuestOptionTwo(EventArgBox argBox)
		{
			bool flag = !EventHelper.IsExtraTaskInProgress(143);
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				GameData.Domains.Character.Character role = argBox.GetCharacter("CharacterId");
				bool flag2 = EventHelper.CharacterIsInTaiwuGroup(role.GetId());
				if (flag2)
				{
					result = false;
				}
				else
				{
					bool flag3 = !EventHelper.IsInTargetOrganization(role, 8);
					if (flag3)
					{
						result = false;
					}
					else
					{
						short xuannvAreaId = EventHelper.GetAreaIdByAreaTemplateId(23);
						bool flag4 = role.GetLocation().AreaId != xuannvAreaId;
						result = !flag4;
					}
				}
			}
			return result;
		}

		// Token: 0x06002448 RID: 9288 RVA: 0x001C2CD8 File Offset: 0x001C0ED8
		public static int XuannvCreateHeYouyuan()
		{
			GameData.Domains.Character.Character character = EventHelper.GetOrCreateFixedCharacterByTemplateId(553);
			bool flag = character == null;
			if (flag)
			{
				throw new Exception("failed when creating character:ReincarnationWoman");
			}
			Location taiwuLocation = DomainManager.Taiwu.GetTaiwu().GetLocation();
			EventHelper.ConvertFixedCharacter(character, taiwuLocation, true);
			int charId = character.GetId();
			EventHelper.XuannvMakeSureTargetCharacterNotWhiteHair(character);
			AvatarData avatarData = character.GetAvatar();
			List<byte> allSkinColors = AvatarSkinColors.Instance.GetAllKeys();
			byte whiteSkinColorId = 0;
			allSkinColors.Remove(whiteSkinColorId);
			avatarData.ColorSkinId = allSkinColors.GetRandom(EventHelper.Domain.MainThreadDataContext.Random);
			character.SetAvatar(avatarData, EventHelper.Domain.MainThreadDataContext);
			EventHelper.SaveArgToSectMainStory<int>(8, "ConchShip_PresetKey_XuannvStory_HeYouyuan_CharId", charId);
			return charId;
		}

		// Token: 0x06002449 RID: 9289 RVA: 0x001C2D90 File Offset: 0x001C0F90
		public static int XuannvCreateReliveCharacter()
		{
			EventArgBox sectArgBox = EventHelper.GetSectMainStoryEventArgBox(8);
			sbyte gender = sectArgBox.GetSbyte("ConchShip_PresetKey_XuannStoryPartOne_GuessGenderKey");
			short areaId = EventHelper.GetAreaIdByAreaTemplateId(8);
			MapAreaData areaData = DomainManager.Map.GetElement_Areas((int)areaId);
			short settlementId = areaData.SettlementInfos.GetRandom(EventHelper.Domain.MainThreadDataContext.Random).SettlementId;
			GameData.Domains.Character.Character taiwuChar = DomainManager.Taiwu.GetTaiwu();
			Location taiwuLocation = taiwuChar.GetLocation();
			sbyte grade = (sbyte)EventHelper.Domain.MainThreadDataContext.Random.Next(0, 7);
			short charAge = 16;
			bool flag = taiwuChar.GetAgeGroup() <= 1;
			if (flag)
			{
				charAge = taiwuChar.GetCurrAge();
			}
			GameData.Domains.Character.Character character = EventHelper.CreateIntelligentCharacter(taiwuLocation, gender, charAge, 900, settlementId, grade);
			bool flag2 = taiwuChar.GetAgeGroup() == 2;
			if (flag2)
			{
				ItemKey equipKey = EventHelper.AddItemToRole(character, 3, 4, 1, -1);
				EventHelper.ChangeEquipment(character.GetId(), -1, 4, equipKey);
			}
			string behaviorKey = sectArgBox.GetString("ConchShip_PresetKey_XuannStoryPartOne_OptionMarkKey");
			if (!true)
			{
			}
			sbyte b;
			if (!(behaviorKey == "A"))
			{
				if (!(behaviorKey == "B"))
				{
					if (!(behaviorKey == "C"))
					{
						if (!(behaviorKey == "D"))
						{
							if (!(behaviorKey == "E"))
							{
								b = GameData.Domains.Character.BehaviorType.GetRandomBehaviorType(EventHelper.Domain.MainThreadDataContext.Random);
							}
							else
							{
								b = 4;
							}
						}
						else
						{
							b = 3;
						}
					}
					else
					{
						b = 2;
					}
				}
				else
				{
					b = 1;
				}
			}
			else
			{
				b = 0;
			}
			if (!true)
			{
			}
			sbyte behaviorType = b;
			character.SetBaseMorality(GameData.Domains.Character.BehaviorType.GetMiddleMoralityByBehaviorType(behaviorType), EventHelper.Domain.MainThreadDataContext);
			bool flag3 = character.GetAgeGroup() == 2 && taiwuChar.GetAgeGroup() == 2;
			if (flag3)
			{
				EventHelper.ApplyRelationBecomeAdore(character, taiwuChar, false);
			}
			int unlockMusicCount = DomainManager.Extra.GetSectXuannvUnlockedMusicCount();
			short favorValue = 0;
			for (int i = SectMainStoryRelatedConstants.XuannvUnlockMusicCountToFavorability.Length - 1; i >= 0; i--)
			{
				ValueTuple<short, short> valueTuple = SectMainStoryRelatedConstants.XuannvUnlockMusicCountToFavorability[i];
				short count = valueTuple.Item1;
				short value = valueTuple.Item2;
				bool flag4 = unlockMusicCount >= (int)count;
				if (flag4)
				{
					favorValue = value;
					break;
				}
			}
			int charId = character.GetId();
			EventHelper.DirectlySetFavorabilities(charId, taiwuChar.GetId(), favorValue, favorValue);
			EventHelper.SetCharBaseLifeSkillQualification(charId, 0, 90);
			EventHelper.SetCharBaseLifeSkillQualification(charId, 2, 90);
			EventHelper.SaveArgToSectMainStory<int>(8, "ConchShip_PresetKey_XuannvStory_SecretReincarnationNPC_CharId", charId);
			return character.GetId();
		}

		// Token: 0x0600244A RID: 9290 RVA: 0x001C2FFC File Offset: 0x001C11FC
		public static bool XuannvShouldShowRandomHeYouyuanWord(GameData.Domains.Character.Character character)
		{
			EventArgBox sectArgBox = EventHelper.GetSectMainStoryEventArgBox(8);
			bool flag = character.GetId() != sectArgBox.GetInt("ConchShip_PresetKey_XuannvStory_HeYouyuan_CharId");
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				bool flag2 = character.GetOrganizationInfo().OrgTemplateId != 8;
				result = (!flag2 && EventHelper.CheckProbability(50));
			}
			return result;
		}

		// Token: 0x0600244B RID: 9291 RVA: 0x001C3054 File Offset: 0x001C1254
		public static void XuannvMakeSureTargetCharacterNotWhiteHair(GameData.Domains.Character.Character character)
		{
			bool flag = character == null;
			if (flag)
			{
				throw new Exception("null character can not XuannvMakeSureTargetCharacterNotWhiteHair");
			}
			AvatarData avatarData = character.GetAvatar();
			AvatarGroup avatarGroup = AvatarManager.Instance.GetAvatarGroup((int)avatarData.AvatarId);
			while (avatarData.FrontHairId == 0 || avatarData.BackHairId == 0)
			{
				ValueTuple<short, short> tuple = avatarGroup.GetRandomHairs(EventHelper.Domain.MainThreadDataContext.Random);
				avatarData.FrontHairId = tuple.Item1;
				avatarData.BackHairId = tuple.Item2;
			}
			List<byte> allHairColors = AvatarHairColors.Instance.GetAllKeys();
			byte whiteHairColorId = 42;
			allHairColors.Remove(whiteHairColorId);
			byte randomId = allHairColors.GetRandom(EventHelper.Domain.MainThreadDataContext.Random);
			avatarData.ColorFrontHairId = randomId;
			avatarData.ColorBackHairId = randomId;
			character.SetAvatar(avatarData, EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x0600244C RID: 9292 RVA: 0x001C3130 File Offset: 0x001C1330
		public static void XuannvAdjustShiWeizhiAvatar(GameData.Domains.Character.Character character)
		{
			bool flag = character == null;
			if (flag)
			{
				throw new Exception("null character can not XuannvAdjustShiWeizhiAvatar");
			}
			EventHelper.XuannvMakeSureTargetCharacterNotWhiteHair(character);
			AvatarData avatarData = character.GetAvatar();
			avatarData.ColorSkinId = 0;
			character.SetAvatar(avatarData, EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x0600244D RID: 9293 RVA: 0x001C3178 File Offset: 0x001C1378
		public static void XuannvUpdateLoverLocationInArgBox()
		{
			EventArgBox sectArgBox = EventHelper.GetSectMainStoryEventArgBox(8);
			int searchLoveCount = sectArgBox.GetInt("ConchShip_PresetKey_Xuannv_PartThreeSearchLoverCountKey");
			short settlementId = sectArgBox.GetShort("ConchShip_PresetKey_Xuannv_PartThree_LoverReincarnateLocation1");
			bool flag = searchLoveCount == 1;
			if (flag)
			{
				settlementId = sectArgBox.GetShort("ConchShip_PresetKey_Xuannv_PartThree_LoverReincarnateLocation2");
			}
			else
			{
				bool flag2 = searchLoveCount == 2;
				if (flag2)
				{
					settlementId = sectArgBox.GetShort("ConchShip_PresetKey_Xuannv_PartThree_LoverReincarnateLocation3");
				}
			}
			Location location = EventHelper.GetSettlementLocation(settlementId);
			EventHelper.SaveArgToSectMainStory<Location>(8, "ConchShip_PresetKey_Xuannv_LoverReincarnateLocation", location);
		}

		// Token: 0x0600244E RID: 9294 RVA: 0x001C31E8 File Offset: 0x001C13E8
		public static void XuannvTryUnlockCurrentLocationMusic()
		{
			bool isTraveling = DomainManager.Map.IsTraveling;
			if (!isTraveling)
			{
				GameData.Domains.Character.Character taiwuChar = DomainManager.Taiwu.GetTaiwu();
				Location taiwuLocation = taiwuChar.GetLocation();
				MapBlockData blockData = DomainManager.Map.GetBlock(taiwuLocation);
				bool flag = blockData.IsCityTown();
				if (flag)
				{
					short blockTemplateId = blockData.GetConfig().TemplateId;
					bool flag2 = !DomainManager.Extra.CheckIsUnlockedSectXuannvMusicByMapBlockId(blockTemplateId);
					if (flag2)
					{
						DomainManager.Extra.UnlockSectXuannvMusicByMapBlockId(EventHelper.Domain.MainThreadDataContext, blockTemplateId);
					}
					MapAreaData areaData = DomainManager.Map.GetElement_Areas((int)taiwuLocation.AreaId);
					sbyte stateTemplateId = areaData.GetConfig().StateID;
					bool flag3 = !DomainManager.Extra.CheckIsUnlockedSectXuannvMusicByMapStateId(stateTemplateId);
					if (flag3)
					{
						DomainManager.Extra.UnlockSectXuannvMusicByMapStateId(EventHelper.Domain.MainThreadDataContext, stateTemplateId);
					}
				}
			}
		}

		// Token: 0x0600244F RID: 9295 RVA: 0x001C32BD File Offset: 0x001C14BD
		public static void XuannvUnlockSectXuannvMusicOfTaiwuVillage()
		{
			DomainManager.Extra.UnlockSectXuannvMusicOfTaiwuVillage(EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x06002450 RID: 9296 RVA: 0x001C32D8 File Offset: 0x001C14D8
		public static bool XuannvHasUnlockStateMusicByMapStateTemplateId(sbyte mapStateTemplateId)
		{
			return DomainManager.Extra.CheckIsUnlockedSectXuannvMusicByMapStateId(mapStateTemplateId);
		}

		// Token: 0x06002451 RID: 9297 RVA: 0x001C32F8 File Offset: 0x001C14F8
		public static bool XuannvHasUnlockAnyMapStateMusic()
		{
			for (sbyte templateId = 1; templateId <= 15; templateId += 1)
			{
				bool flag = EventHelper.XuannvHasUnlockStateMusicByMapStateTemplateId(templateId);
				if (flag)
				{
					return true;
				}
			}
			return false;
		}

		// Token: 0x06002452 RID: 9298 RVA: 0x001C3330 File Offset: 0x001C1530
		public static bool XuannvHasUnlockBlockMusicByMapBlockTemplateId(short mapBlockTemplateId)
		{
			return DomainManager.Extra.CheckIsUnlockedSectXuannvMusicByMapBlockId(mapBlockTemplateId);
		}

		// Token: 0x06002453 RID: 9299 RVA: 0x001C3350 File Offset: 0x001C1550
		public static bool XuannvHasUnlockAnyMainCityMusic()
		{
			for (short templateId = 1; templateId <= 15; templateId += 1)
			{
				bool flag = EventHelper.XuannvHasUnlockBlockMusicByMapBlockTemplateId(templateId);
				if (flag)
				{
					return true;
				}
			}
			return false;
		}

		// Token: 0x06002454 RID: 9300 RVA: 0x001C3388 File Offset: 0x001C1588
		public static bool XuannvHasUnlockAnySectMusic()
		{
			for (short templateId = 19; templateId <= 33; templateId += 1)
			{
				bool flag = EventHelper.XuannvHasUnlockBlockMusicByMapBlockTemplateId(templateId);
				if (flag)
				{
					return true;
				}
			}
			return false;
		}

		// Token: 0x06002455 RID: 9301 RVA: 0x001C33C4 File Offset: 0x001C15C4
		public static int XuannvGetSectXuannvUnlockedMusicCount()
		{
			return DomainManager.Extra.GetSectXuannvUnlockedMusicCount();
		}

		// Token: 0x06002456 RID: 9302 RVA: 0x001C33E0 File Offset: 0x001C15E0
		public static void XuannvEvaluateMusicByMapBlockId(short mapBlockTemplateId)
		{
			DomainManager.Extra.EvaluateSectXuannvMusicByMapBlockId(EventHelper.Domain.MainThreadDataContext, mapBlockTemplateId);
		}

		// Token: 0x06002457 RID: 9303 RVA: 0x001C33F9 File Offset: 0x001C15F9
		public static void XuannvEvaluateMusicByMapStateId(sbyte mapStateTemplateId)
		{
			DomainManager.Extra.EvaluateSectXuannvMusicByMapStateId(EventHelper.Domain.MainThreadDataContext, mapStateTemplateId);
		}

		// Token: 0x06002458 RID: 9304 RVA: 0x001C3414 File Offset: 0x001C1614
		public unsafe static int CreateMirrorCharacter(bool isMale, string familyName, string firstName)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			int taiwuId = taiwu.GetId();
			sbyte taiwuVillageTemplateId = 16;
			sbyte gender = isMale ? 1 : 0;
			bool isTaiwuTransgender = taiwu.GetTransgender();
			short age = 16;
			short templateId = taiwu.GetTemplateId();
			CharacterItem template = Config.Character.Instance[templateId];
			bool flag = template.CreatingType != 1;
			if (flag)
			{
				sbyte stateTemplateId = DomainManager.Map.GetStateTemplateIdByAreaId(taiwu.GetLocation().AreaId);
				sbyte orgTemplateId = MapState.Instance[stateTemplateId].SectID;
				templateId = OrganizationDomain.GetCharacterTemplateId(orgTemplateId, stateTemplateId, gender);
			}
			IntelligentCharacterCreationInfo info = new IntelligentCharacterCreationInfo(taiwu.GetLocation(), new OrganizationInfo(taiwuVillageTemplateId, 0, true, DomainManager.Organization.GetSettlementIdByOrgTemplateId(taiwuVillageTemplateId)), templateId)
			{
				Age = age,
				BirthMonth = DomainManager.World.GetCurrMonthInYear(),
				BaseAttraction = taiwu.GetBaseAttraction(),
				Avatar = taiwu.GetAvatar(),
				SpecifyGenome = true,
				Genome = *taiwu.GetGenome(),
				ReincarnationCharId = -2,
				InitializeSectSkills = false,
				LifeSkillQualificationGrowthType = taiwu.GetLifeSkillQualificationGrowthType(),
				CombatSkillQualificationGrowthType = taiwu.GetCombatSkillQualificationGrowthType(),
				Gender = gender,
				Transgender = ((taiwu.GetGender() == gender) ? isTaiwuTransgender : (!isTaiwuTransgender))
			};
			GameData.Domains.Character.Character character = DomainManager.Character.CreateIntelligentCharacter(context, ref info);
			int charId = character.GetId();
			int customSurnameId = string.IsNullOrEmpty(familyName) ? -1 : DomainManager.World.RegisterCustomText(context, familyName);
			int customGivenNameId = string.IsNullOrEmpty(firstName) ? -1 : DomainManager.World.RegisterCustomText(context, firstName);
			FullName fullName = CharacterDomain.GenerateRandomHanName(context.Random, customSurnameId, -1, gender, 0);
			bool flag2 = customGivenNameId >= 0;
			if (flag2)
			{
				fullName.SetCustomGivenName(customGivenNameId);
			}
			character.SetFullName(fullName, context);
			List<short> learnedCombatSkills = character.GetLearnedCombatSkills();
			List<GameData.Domains.CombatSkill.CombatSkill> combatSkills = ObjectPool<List<GameData.Domains.CombatSkill.CombatSkill>>.Instance.Get();
			combatSkills.Clear();
			foreach (short combatSkillId in taiwu.GetLearnedCombatSkills())
			{
				GameData.Domains.CombatSkill.CombatSkill oldSkill = DomainManager.CombatSkill.GetElement_CombatSkills(new CombatSkillKey(taiwuId, combatSkillId));
				GameData.Domains.CombatSkill.CombatSkill newSkill = Serializer.CreateCopy<GameData.Domains.CombatSkill.CombatSkill>(oldSkill);
				newSkill.OfflineSetCharId(charId);
				newSkill.OfflineSetSpecialEffectId(-1L);
				combatSkills.Add(newSkill);
				learnedCombatSkills.Add(combatSkillId);
			}
			DomainManager.CombatSkill.RegisterCombatSkills(charId, combatSkills);
			DomainManager.Character.AutoActivateReadCombatSkillNormalPages(context, combatSkills, charId);
			DomainManager.Extra.CopyCombatSkillProficiency(context, taiwuId, charId);
			ObjectPool<List<GameData.Domains.CombatSkill.CombatSkill>>.Instance.Return(combatSkills);
			character.SetLearnedCombatSkills(learnedCombatSkills, context);
			character.CopyCombatSkillEquipmentFrom(context, taiwu);
			DomainManager.SpecialEffect.AddAllBrokenSkillEffects(context, character);
			character.SetLoopingNeigong(taiwu.GetLoopingNeigong(), context);
			character.SetCombatSkillAttainmentPanels(taiwu.GetCombatSkillAttainmentPanels().ToArray<short>(), context);
			List<GameData.Domains.Character.LifeSkillItem> lifeSkills = character.GetLearnedLifeSkills();
			lifeSkills.Clear();
			lifeSkills.AddRange(taiwu.GetLearnedLifeSkills());
			character.SetLearnedLifeSkills(lifeSkills, context);
			character.SetConsummateLevel(taiwu.GetConsummateLevel(), context);
			character.SetMainAttributeInterest(taiwu.GetMainAttributeInterest(), context);
			character.SetBaseMainAttributes(taiwu.GetBaseMainAttributes(), context);
			character.ClearGeneticFeatures(context);
			short taiwuOneYearFeatureId = taiwu.GetGroupFeature(171);
			bool flag3 = taiwuOneYearFeatureId >= 0;
			if (flag3)
			{
				character.AddFeature(context, taiwuOneYearFeatureId, true);
			}
			else
			{
				character.RemoveFeatureGroup(context, 171);
			}
			character.AddFeature(context, 415, false);
			foreach (short id in taiwu.GetFeatureIds())
			{
				bool flag4 = id == 169 && isMale;
				if (flag4)
				{
					character.AddFeature(context, 168, false);
				}
				else
				{
					bool flag5 = id == 168 && !isMale;
					if (flag5)
					{
						character.AddFeature(context, 169, false);
					}
					else
					{
						bool flag6 = CharacterFeature.Instance[id].GeneticProb == 100;
						if (flag6)
						{
							character.AddFeature(context, id, false);
						}
					}
				}
			}
			character.SetBaseMorality(-taiwu.GetBaseMorality(), context);
			EventHelper.AddRelation(taiwuId, charId, 16384);
			EventHelper.AddRelation(charId, taiwuId, 16384);
			DomainManager.Character.DirectlySetFavorabilities(context, character.GetId(), taiwuId, 30000, 30000);
			character.SetLifeSkillTypeInterest(taiwu.GetLifeSkillTypeInterest(), context);
			character.SetCombatSkillTypeInterest(taiwu.GetCombatSkillTypeInterest(), context);
			LifeSkillShorts baseLifeSkills = *taiwu.GetBaseLifeSkillQualifications();
			character.SetBaseLifeSkillQualifications(ref baseLifeSkills, context);
			CombatSkillShorts baseCombatSkills = *taiwu.GetBaseCombatSkillQualifications();
			character.SetBaseCombatSkillQualifications(ref baseCombatSkills, context);
			character.SetSkillQualificationBonuses(new List<SkillQualificationBonus>(taiwu.GetSkillQualificationBonuses()), context);
			EventHelper.RemoveAllInventoryAndEquippedItems(character);
			ResourceInts resource = default(ResourceInts);
			resource.Initialize();
			character.SetResources(ref resource, context);
			character.SetAvatar(context, new AvatarData(taiwu.GetAvatar()));
			NeiliAllocation neiliAllocation = default(NeiliAllocation);
			neiliAllocation.Initialize();
			character.SetBaseNeiliAllocation(neiliAllocation, context);
			character.SetExtraNeili(taiwu.GetExtraNeili(), context);
			neiliAllocation = default(NeiliAllocation);
			neiliAllocation.Initialize();
			taiwu.SetBaseNeiliAllocation(neiliAllocation, context);
			DomainManager.Extra.SetExtraNeiliAllocationProgress(context, character.GetId(), DomainManager.Extra.GetOrInitExtraNeiliAllocationProgress(context, taiwu.GetId()));
			character.SetExtraNeiliAllocation(taiwu.GetExtraNeiliAllocation(), context);
			taiwu.SetCurrNeili(0, context);
			character.SetCurrNeili(0, context);
			character.SetCurrMainAttributes(character.GetMaxMainAttributes(), context);
			character.SetHealth(character.GetLeftMaxHealth(false), context);
			DomainManager.Character.CompleteCreatingCharacter(character.GetId());
			DomainManager.Extra.SectXuannvSaveMirrorCharacters(context, taiwuId, charId);
			AvatarExtraData avatarExtraData = DomainManager.Extra.GetCharacterAvatarExtraData(context, taiwu.GetId());
			bool flag7 = avatarExtraData.IsValid();
			if (flag7)
			{
				DomainManager.Extra.TryAddCharacterAvatarExtraData(context, character.GetId(), avatarExtraData);
			}
			LifeRecordCollection lifeRecordCollection = DomainManager.LifeRecord.GetLifeRecordCollection();
			lifeRecordCollection.AddSectMainStoryXuannvBirthOfMirrorCreatedImposture(charId, DomainManager.World.GetCurrDate(), charId);
			return character.GetId();
		}

		// Token: 0x06002459 RID: 9305 RVA: 0x001C3AA0 File Offset: 0x001C1CA0
		public static bool IsCharacterMirrored(int id)
		{
			return DomainManager.Extra.SectXuannvIsCharacterMirrored(id);
		}

		// Token: 0x0600245A RID: 9306 RVA: 0x001C3AC0 File Offset: 0x001C1CC0
		public static bool IsCharacterMirrorImage(int id)
		{
			return DomainManager.Extra.SectXuannvIsCharacterMirrorImage(id);
		}

		// Token: 0x0600245B RID: 9307 RVA: 0x001C3AE0 File Offset: 0x001C1CE0
		public static bool IsMirrorImageUsed()
		{
			return DomainManager.Extra.SectXuannvIsMirrorImageUsed();
		}

		// Token: 0x0600245C RID: 9308 RVA: 0x001C3AFC File Offset: 0x001C1CFC
		public static bool SectMainStory_Xuehou_Trigger_1()
		{
			bool flag = EventHelper.InTutorialChapter();
			bool result3;
			if (flag)
			{
				result3 = false;
			}
			else
			{
				sbyte taskStatus = EventHelper.GetSectMainStoryTaskStatus(15);
				bool flag2 = taskStatus != 0;
				if (flag2)
				{
					result3 = false;
				}
				else
				{
					GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
					EventArgBox sectArgBox = EventHelper.GetSectMainStoryEventArgBox(15);
					bool xuehouStoryPartOneTriggered = false;
					bool result = sectArgBox.Get("ConchShip_PresetKey_XuehouStoryPartOneTriggered", ref xuehouStoryPartOneTriggered);
					bool stillAtYangzhou = false;
					bool result2 = sectArgBox.Get("ConchShip_PresetKey_StillAtYangzhou", ref stillAtYangzhou);
					bool flag3 = EventHelper.IsCharacterAtTargetSectLocation(taiwu, 35) && (!result || !xuehouStoryPartOneTriggered) && (!result2 || !stillAtYangzhou) && !sectArgBox.Contains<int>(SectMainStoryEventArgKeys.TriggeringStatus);
					result3 = flag3;
				}
			}
			return result3;
		}

		// Token: 0x0600245D RID: 9309 RVA: 0x001C3BA8 File Offset: 0x001C1DA8
		public static void KillXuehouFollower()
		{
			List<GameData.Domains.Character.Character> characters = EventHelper.GetSectCharList(15, 0, 8);
			for (int i = characters.Count - 1; i >= 0; i--)
			{
				bool flag = characters[i].GetAgeGroup() < 2;
				if (flag)
				{
					characters.RemoveAt(i);
				}
			}
			characters.Sort((GameData.Domains.Character.Character l, GameData.Domains.Character.Character r) => l.GetOrganizationInfo().Grade.CompareTo(r.GetOrganizationInfo().Grade));
			bool flag2 = characters.Count > 0;
			if (flag2)
			{
				GameData.Domains.Character.Character victim = characters[0];
				DomainManager.Character.MakeCharacterDead(EventHelper.Domain.MainThreadDataContext, victim, 0);
			}
		}

		// Token: 0x0600245E RID: 9310 RVA: 0x001C3C50 File Offset: 0x001C1E50
		public static GameData.Domains.Character.Character GetXuehouComingCharacter()
		{
			List<GameData.Domains.Character.Character> characters = EventHelper.GetSectCharList(15, 0, 5);
			for (int i = 0; i < characters.Count; i++)
			{
				bool flag = characters[i].GetAgeGroup() == 2;
				if (flag)
				{
					return characters[i];
				}
			}
			return null;
		}

		// Token: 0x0600245F RID: 9311 RVA: 0x001C3CA4 File Offset: 0x001C1EA4
		public static sbyte GetJixiFavorabilityType()
		{
			return DomainManager.World.GetJixiFavorabilityType();
		}

		// Token: 0x06002460 RID: 9312 RVA: 0x001C3CC0 File Offset: 0x001C1EC0
		public static GameData.Domains.Character.Character TryGetJixi()
		{
			return DomainManager.World.TryGetJixi();
		}

		// Token: 0x06002461 RID: 9313 RVA: 0x001C3CDC File Offset: 0x001C1EDC
		public static int MeetSkeletonWithBellExtraProb(int graveId)
		{
			bool flag = !EventHelper.XuehouCanGetBell(graveId);
			int result;
			if (flag)
			{
				result = 0;
			}
			else
			{
				GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
				EventArgBox sectArgBox = DomainManager.Extra.GetSectMainStoryEventArgBox(15);
				int prob = sectArgBox.GetInt("ConchShip_PresetKey_MeetSkeletonWithBellExtraProb");
				int newProb = (int)(taiwu.GetConsummateLevel() * 8) + prob;
				sectArgBox.Set("ConchShip_PresetKey_MeetSkeletonWithBellExtraProb", newProb);
				result = newProb;
			}
			return result;
		}

		// Token: 0x06002462 RID: 9314 RVA: 0x001C3D44 File Offset: 0x001C1F44
		public static bool XuehouCanGetBell(int graveId)
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			bool taskInProgress = DomainManager.Extra.IsExtraTaskInProgress(119);
			bool flag = !taskInProgress;
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				bool taiwuHaveBell = taiwu.GetInventory().GetInventoryItemCount(12, 246) > 0;
				bool flag2 = taiwuHaveBell;
				if (flag2)
				{
					result = false;
				}
				else
				{
					Grave grave;
					DomainManager.Character.TryGetElement_Graves(graveId, out grave);
					bool flag3 = grave == null;
					if (flag3)
					{
						result = false;
					}
					else
					{
						DeadCharacter deadCharacter = DomainManager.Character.GetDeadCharacter(grave.GetId());
						bool flag4 = grave.GetLocation().AreaId == DomainManager.Organization.GetSettlementByOrgTemplateId(15).GetLocation().AreaId && deadCharacter.OrganizationInfo.OrgTemplateId == 15;
						result = flag4;
					}
				}
			}
			return result;
		}

		// Token: 0x06002463 RID: 9315 RVA: 0x001C3E18 File Offset: 0x001C2018
		public static int GetXuehouSkeletonGraveId()
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			Location taiwuLocation = taiwu.GetLocation();
			List<MapBlockData> mapBlockList = ObjectPool<List<MapBlockData>>.Instance.Get();
			DomainManager.Map.GetNeighborBlocks(taiwuLocation.AreaId, taiwuLocation.BlockId, mapBlockList, 1);
			for (int i = 0; i < mapBlockList.Count; i++)
			{
				MapBlockData mapBlock = mapBlockList[i];
				MapBlockData blockData = DomainManager.Map.GetBlockData(mapBlock.AreaId, mapBlock.BlockId);
				bool flag = blockData.GraveSet != null;
				if (flag)
				{
					foreach (int graveId in blockData.GraveSet)
					{
						DeadCharacter deadCharacter = DomainManager.Character.GetDeadCharacter(graveId);
						sbyte consummateLevel = deadCharacter.GetConsummateLevel();
						bool flag2 = EventHelper.XuehouCanGetBell(graveId) && AgeGroup.GetAgeGroup(deadCharacter.CurrAge) == 2 && Math.Abs((int)(consummateLevel - taiwu.GetConsummateLevel())) <= 2;
						if (flag2)
						{
							return graveId;
						}
					}
				}
			}
			ObjectPool<List<MapBlockData>>.Instance.Return(mapBlockList);
			return -1;
		}

		// Token: 0x06002464 RID: 9316 RVA: 0x001C3F60 File Offset: 0x001C2160
		public static void GenerateRandomBloodLightInXuehou()
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			DomainManager.Extra.GenerateRandomBloodLightInXuehou(context);
		}

		// Token: 0x06002465 RID: 9317 RVA: 0x001C3F88 File Offset: 0x001C2188
		public static bool IsLocationContainsBloodLight(Location location)
		{
			return DomainManager.Extra.IsLocationContainsBloodLight(location);
		}

		// Token: 0x06002466 RID: 9318 RVA: 0x001C3FA8 File Offset: 0x001C21A8
		public static void RemoveBloodLightInLocation(Location location)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			DomainManager.Extra.RemoveBloodLightInLocation(context, location);
		}

		// Token: 0x06002467 RID: 9319 RVA: 0x001C3FD0 File Offset: 0x001C21D0
		public static bool JixiAdventureTwoPassOrDisappear()
		{
			return DomainManager.World.JixiAdventurePass(2, 0) || DomainManager.World.JixiAdventureDisappear(2, 9);
		}

		// Token: 0x06002468 RID: 9320 RVA: 0x001C4000 File Offset: 0x001C2200
		public static bool JixiAdventureThreePassOrDisappear()
		{
			return DomainManager.World.JixiAdventurePass(3, 0) || DomainManager.World.JixiAdventureDisappear(3, 9);
		}

		// Token: 0x06002469 RID: 9321 RVA: 0x001C4030 File Offset: 0x001C2230
		public static bool CanTriggerJixiPassLegacyTask()
		{
			bool result = DomainManager.Extra.IsExtraTaskChainInProgress(29);
			bool result2 = DomainManager.Extra.IsExtraTaskInProgress(125);
			bool result3 = DomainManager.Extra.IsExtraTaskInProgress(126);
			bool result4 = DomainManager.Extra.IsExtraTaskInProgress(134);
			return result || result2 || result3 || result4;
		}

		// Token: 0x0600246A RID: 9322 RVA: 0x001C4084 File Offset: 0x001C2284
		public static void JixiGrowUp(short oldCharTemplateId, short newCharTemplateId)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			DomainManager.World.JixiGrowUp(context, oldCharTemplateId, newCharTemplateId);
		}

		// Token: 0x0600246B RID: 9323 RVA: 0x001C40AC File Offset: 0x001C22AC
		public static void JixiMovementFollow(short templateId)
		{
			Tester.Assert(templateId >= 537 && templateId <= 539, "templateId is >= Config.Character.DefKey.JixiBaby and <= Config.Character.DefKey.JixiAdult");
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			int charId = EventHelper.GetFixedCharacterIdByTemplateId(templateId);
			Tester.Assert(charId >= 0, "charId >= 0");
			GameData.Domains.Character.Character character = DomainManager.Character.GetElement_Objects(charId);
			DomainManager.Character.JixiMovementFollowTaiwu(context, character);
		}

		// Token: 0x0600246C RID: 9324 RVA: 0x001C4118 File Offset: 0x001C2318
		public static bool IsShowSpecialTalk(EventArgBox argBox)
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			GameData.Domains.Character.Character jixi = argBox.GetCharacter("CharacterId");
			sbyte favorType = EventHelper.GetFavorabilityType(jixi, taiwu);
			EventArgBox sectArgBox = EventHelper.GetSectMainStoryEventArgBox(15);
			bool jixiFavorite1TalkTriggered = false;
			sectArgBox.Get("ConchShip_PresetKey_JixiFavorite1TalkTriggered", ref jixiFavorite1TalkTriggered);
			bool jixiFavorite2TalkTriggered = false;
			sectArgBox.Get("ConchShip_PresetKey_JixiFavorite2TalkTriggered", ref jixiFavorite2TalkTriggered);
			bool jixiFavorite3TalkTriggered = false;
			sectArgBox.Get("ConchShip_PresetKey_JixiFavorite3TalkTriggered", ref jixiFavorite3TalkTriggered);
			bool jixiFavorite4TalkTriggered = false;
			sectArgBox.Get("ConchShip_PresetKey_JixiFavorite4TalkTriggered", ref jixiFavorite4TalkTriggered);
			bool jixiFavorite5TalkTriggered = false;
			sectArgBox.Get("ConchShip_PresetKey_JixiFavorite5TalkTriggered", ref jixiFavorite5TalkTriggered);
			return (!jixiFavorite1TalkTriggered && favorType == 1) || (!jixiFavorite2TalkTriggered && favorType == 2) || (!jixiFavorite3TalkTriggered && favorType == 3) || (!jixiFavorite4TalkTriggered && favorType == 4) || (!jixiFavorite5TalkTriggered && favorType == 5);
		}

		// Token: 0x0600246D RID: 9325 RVA: 0x001C41E4 File Offset: 0x001C23E4
		public static void RemoveJixiAdventure()
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			Location taiwuVillageLocation = DomainManager.Taiwu.GetTaiwuVillageLocation();
			AreaAdventureData taiwuAreaAdventures = DomainManager.Adventure.GetAdventuresInArea(taiwuVillageLocation.AreaId);
			List<Location> locations = new List<Location>();
			foreach (KeyValuePair<short, AdventureSiteData> adventureSite in taiwuAreaAdventures.AdventureSites)
			{
				bool flag = adventureSite.Value.TemplateId == 163 || adventureSite.Value.TemplateId == 161 || adventureSite.Value.TemplateId == 162;
				if (flag)
				{
					locations.Add(new Location(taiwuVillageLocation.AreaId, adventureSite.Key));
				}
			}
			for (int i = 0; i < locations.Count; i++)
			{
				DomainManager.Adventure.RemoveAdventureSite(context, locations[i].AreaId, locations[i].BlockId, false, false);
			}
		}

		// Token: 0x0600246E RID: 9326 RVA: 0x001C4308 File Offset: 0x001C2508
		public static bool IsJixiFree()
		{
			return DomainManager.World.IsJixiFree();
		}

		// Token: 0x0600246F RID: 9327 RVA: 0x001C4324 File Offset: 0x001C2524
		public static ItemKey GetJixiRandomCarrier()
		{
			GameData.Domains.Character.Character jixi = EventHelper.TryGetJixi();
			Inventory inventory = jixi.GetInventory();
			List<ItemKey> items = new List<ItemKey>();
			foreach (KeyValuePair<ItemKey, int> item in inventory.Items)
			{
				bool flag = item.Key.ItemType != 4;
				if (!flag)
				{
					items.Add(item.Key);
				}
			}
			return items.GetRandom(EventHelper.Domain.MainThreadDataContext.Random);
		}

		// Token: 0x06002470 RID: 9328 RVA: 0x001C43CC File Offset: 0x001C25CC
		public static bool XuehouJixiTalkPossessionUseTaiwuBody()
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			EventArgBox sectArgBox = EventHelper.GetSectMainStoryEventArgBox(15);
			int awakeJixiTaiwuId = -1;
			sectArgBox.Get("ConchShip_PresetKey_AwakeJixiTaiwuId", ref awakeJixiTaiwuId);
			int awakeJixiTaiwuSoulId = taiwu.GetId();
			bool flag = !sectArgBox.Get("ConchShip_PresetKey_AwakeJixiTaiwuSoulId", ref awakeJixiTaiwuSoulId);
			if (flag)
			{
				awakeJixiTaiwuSoulId = taiwu.GetId();
			}
			int nowTaiwuSoulId = taiwu.GetId();
			PossessionData possessionData;
			bool flag2 = DomainManager.Extra.TryGetElement_SectJingangPossessionCharacters(taiwu.GetId(), out possessionData);
			if (flag2)
			{
				nowTaiwuSoulId = possessionData.SoulCharId;
			}
			return taiwu.GetId() == awakeJixiTaiwuId && awakeJixiTaiwuSoulId != nowTaiwuSoulId;
		}

		// Token: 0x06002471 RID: 9329 RVA: 0x001C4474 File Offset: 0x001C2674
		public static bool XuehouJixiTalkPossessionUseTaiwuSoul()
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			EventArgBox sectArgBox = EventHelper.GetSectMainStoryEventArgBox(15);
			int awakeJixiTaiwuId = -1;
			sectArgBox.Get("ConchShip_PresetKey_AwakeJixiTaiwuId", ref awakeJixiTaiwuId);
			int awakeJixiTaiwuSoulId = taiwu.GetId();
			bool flag = !sectArgBox.Get("ConchShip_PresetKey_AwakeJixiTaiwuSoulId", ref awakeJixiTaiwuSoulId);
			if (flag)
			{
				awakeJixiTaiwuSoulId = taiwu.GetId();
			}
			int nowTaiwuSoulId = taiwu.GetId();
			PossessionData possessionData;
			bool flag2 = DomainManager.Extra.TryGetElement_SectJingangPossessionCharacters(taiwu.GetId(), out possessionData);
			if (flag2)
			{
				nowTaiwuSoulId = possessionData.SoulCharId;
			}
			return taiwu.GetId() != awakeJixiTaiwuId && (nowTaiwuSoulId == awakeJixiTaiwuSoulId || nowTaiwuSoulId == awakeJixiTaiwuId);
		}

		// Token: 0x06002472 RID: 9330 RVA: 0x001C4520 File Offset: 0x001C2720
		public static void XuehouMeetJixiSaveTaiwuData(GameData.Domains.Character.Character taiwu)
		{
			EventHelper.SaveArgToSectMainStory<int>(15, "ConchShip_PresetKey_AwakeJixiTaiwuId", taiwu.GetId());
			EventHelper.SaveArgToSectMainStory<sbyte>(15, "ConchShip_PresetKey_AwakeJixiTaiwuGender", taiwu.GetGender());
			PossessionData possessionData;
			bool flag = DomainManager.Extra.TryGetElement_SectJingangPossessionCharacters(taiwu.GetId(), out possessionData);
			if (flag)
			{
				EventHelper.SaveArgToSectMainStory<int>(15, "ConchShip_PresetKey_AwakeJixiTaiwuSoulId", possessionData.SoulCharId);
			}
			else
			{
				EventHelper.SaveArgToSectMainStory<int>(15, "ConchShip_PresetKey_AwakeJixiTaiwuSoulId", taiwu.GetId());
			}
		}

		// Token: 0x06002473 RID: 9331 RVA: 0x001C4598 File Offset: 0x001C2798
		public unsafe static void JixiFullyHealTaiwu()
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			Injuries injuries = taiwu.GetInjuries();
			injuries.Initialize();
			taiwu.SetInjuries(injuries, EventHelper.Domain.MainThreadDataContext);
			PoisonInts poisons = *taiwu.GetPoisoned();
			poisons.Initialize();
			taiwu.SetPoisoned(ref poisons, EventHelper.Domain.MainThreadDataContext);
			short leftMaxHealth = taiwu.GetLeftMaxHealth(false);
			taiwu.SetHealth(leftMaxHealth, EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x06002474 RID: 9332 RVA: 0x001C4614 File Offset: 0x001C2814
		public static void SettlementTreasurySetInfo(short buildingTemplateId, EventArgBox argBox)
		{
			Settlement settlement = EventHelper.GetTaiwuLocationSettlement();
			sbyte settlementTreasuryLayerIndex = DomainManager.Organization.GetCurrentTreasuryLayer();
			SettlementTreasury settlementTreasury = DomainManager.Organization.GetTreasury(settlement.GetId(), settlementTreasuryLayerIndex);
			argBox.Set("SettlementId", settlement.GetId());
			argBox.Set("AreaId", settlement.GetLocation().AreaId);
			bool isSect = EventHelper.SettlementIsSect(settlement.GetId());
			argBox.Set("IsSect", isSect);
			bool flag = isSect;
			if (flag)
			{
				EventHelper.SectSettlementSetGuardInfo(settlement, argBox);
			}
			else
			{
				int i = 0;
				DataContext context = EventHelper.Domain.MainThreadDataContext;
				foreach (int charId in settlement.GetGuards(context, argBox.GetSbyte("CurrentPage")))
				{
					DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(5, 1);
					defaultInterpolatedStringHandler.AppendLiteral("Guard");
					defaultInterpolatedStringHandler.AppendFormatted<int>(++i);
					argBox.Set(defaultInterpolatedStringHandler.ToStringAndClear(), charId);
				}
				argBox.Set("GuardCount", i);
			}
			bool isMidLayer = argBox.GetSbyte("CurrentPage") == 1;
			int supportValue = isSect ? (isMidLayer ? GlobalConfig.Instance.TreasuryRquireApprovingMid : GlobalConfig.Instance.TreasuryRquireApprovingHigh) : (isMidLayer ? GlobalConfig.Instance.TreasuryRquireSpiritualDebtMid : GlobalConfig.Instance.TreasuryRquireSpiritualDebtHigh);
			argBox.Set("SupportValue", supportValue);
		}

		// Token: 0x06002475 RID: 9333 RVA: 0x001C4798 File Offset: 0x001C2998
		public static Settlement GetTaiwuLocationSettlement()
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			Location taiwuLocation = taiwu.GetLocation();
			Location settlementRootLocation = DomainManager.Map.GetBlock(taiwuLocation).GetRootBlock().GetLocation();
			return DomainManager.Organization.GetSettlementByLocation(settlementRootLocation);
		}

		// Token: 0x06002476 RID: 9334 RVA: 0x001C47E0 File Offset: 0x001C29E0
		public static void SectSettlementSetGuardInfo(Settlement settlement, EventArgBox argBox)
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			IntList usefulGuards = IntList.Create();
			usefulGuards.Items = settlement.GetGuards(context, argBox.GetSbyte("CurrentPage")).ToList<int>();
			int i = 0;
			foreach (int charId in usefulGuards.Items)
			{
				DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(5, 1);
				defaultInterpolatedStringHandler.AppendLiteral("Guard");
				defaultInterpolatedStringHandler.AppendFormatted<int>(++i);
				argBox.Set(defaultInterpolatedStringHandler.ToStringAndClear(), charId);
			}
			argBox.Set("UsefulGuards", usefulGuards);
			argBox.Set("GuardCount", usefulGuards.Items.Count);
		}

		// Token: 0x06002477 RID: 9335 RVA: 0x001C48CC File Offset: 0x001C2ACC
		[Obsolete("Use settlement.GetGuards(context, layer) directly generate possibly missing NonIntelligentGuard if needed")]
		public static void CreateNonIntelligentGuard(SettlementTreasury settlementTreasury, EventArgBox argBox, bool isSect)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			Location taiwuLocation = taiwu.GetLocation();
			Location settlementRootLocation = DomainManager.Map.GetBlock(taiwuLocation).GetRootBlock().GetLocation();
			Settlement settlement = DomainManager.Organization.GetSettlementByLocation(settlementRootLocation);
			int i = 0;
			foreach (int charId in settlement.GetGuards(context, 0))
			{
				DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(5, 1);
				defaultInterpolatedStringHandler.AppendLiteral("Guard");
				defaultInterpolatedStringHandler.AppendFormatted<int>(++i);
				argBox.Set(defaultInterpolatedStringHandler.ToStringAndClear(), charId);
			}
			argBox.Set("GuardCount", i);
		}

		// Token: 0x06002478 RID: 9336 RVA: 0x001C49A4 File Offset: 0x001C2BA4
		public static short GetTaiwuLocationSettlementId()
		{
			Settlement settlement = EventHelper.GetTaiwuLocationSettlement();
			return settlement.GetId();
		}

		// Token: 0x06002479 RID: 9337 RVA: 0x001C49C4 File Offset: 0x001C2BC4
		public static bool SettlementIsSect(short settlementId)
		{
			Settlement settlement = DomainManager.Organization.GetSettlement(settlementId);
			return Organization.Instance[settlement.GetOrgTemplateId()].IsSect;
		}

		// Token: 0x0600247A RID: 9338 RVA: 0x001C49F8 File Offset: 0x001C2BF8
		[return: TupleElementNames(new string[]
		{
			"canUse",
			"wasPreviouslyAllowed"
		})]
		public static ValueTuple<bool, bool> SettlementTreasuryCanUse(short settlementId, EventArgBox argBox)
		{
			Settlement settlement = DomainManager.Organization.GetSettlement(settlementId);
			sbyte layerIndex = 0;
			argBox.Get("CurrentPage", ref layerIndex);
			bool flag = layerIndex == 0;
			bool canUse;
			if (flag)
			{
				canUse = true;
			}
			else
			{
				bool isSect = EventHelper.SettlementIsSect(settlementId);
				bool isMidLayer = layerIndex == 1;
				bool flag2 = isSect;
				if (flag2)
				{
					sbyte orgTemplateId = settlement.GetOrgTemplateId();
					int requiredApproving = isMidLayer ? GlobalConfig.Instance.TreasuryRquireApprovingMid : GlobalConfig.Instance.TreasuryRquireApprovingHigh;
					canUse = ((int)EventHelper.GetSectApprovingRate(orgTemplateId) >= requiredApproving * 10);
				}
				else
				{
					short areaId = settlement.GetLocation().AreaId;
					int requiredSpiritualDebt = isMidLayer ? GlobalConfig.Instance.TreasuryRquireSpiritualDebtMid : GlobalConfig.Instance.TreasuryRquireSpiritualDebtHigh;
					canUse = (DomainManager.Extra.GetAreaSpiritualDebt(areaId) >= requiredSpiritualDebt);
				}
			}
			bool wasPreviouslyAllowed = settlement.HasTriggeredAllowEntryEvent[(int)layerIndex];
			settlement.HasTriggeredAllowEntryEvent[(int)layerIndex] = canUse;
			return new ValueTuple<bool, bool>(canUse, wasPreviouslyAllowed);
		}

		// Token: 0x0600247B RID: 9339 RVA: 0x001C4AE8 File Offset: 0x001C2CE8
		public static void SettleTreasuryOperate(EventArgBox argBox)
		{
			short settlementId = EventHelper.GetTaiwuLocationSettlementId();
			bool takeEffect = false;
			argBox.Get("TakeEffect", ref takeEffect);
			bool startCombat = false;
			argBox.Get("StartCombat", ref startCombat);
			bool isSect = false;
			argBox.Get("IsSect", ref isSect);
			bool restart = false;
			argBox.Get("Restart", ref restart);
			DomainManager.Organization.SettleTreasuryOperate(EventHelper.Domain.MainThreadDataContext, settlementId, takeEffect, startCombat, isSect, restart);
			bool flag = !startCombat;
			if (flag)
			{
				GameDataBridge.AddDisplayEvent(DisplayEventType.SettlementTreasuryEffect);
			}
		}

		// Token: 0x0600247C RID: 9340 RVA: 0x001C4B6C File Offset: 0x001C2D6C
		public static void SettlementTreasuryBreakingEffect(EventArgBox argBox)
		{
			short settlementId = EventHelper.GetTaiwuLocationSettlementId();
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			EventHelper.RecordRoleFameAction(taiwu, 79, -1, 1);
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			bool isSect = EventHelper.SettlementIsSect(settlementId);
			sbyte layerIndex = argBox.GetSbyte("CurrentPage");
			if (!true)
			{
			}
			short num;
			switch (layerIndex)
			{
			case 0:
				num = 0;
				break;
			case 1:
				num = 1;
				break;
			case 2:
				num = 2;
				break;
			default:
				throw new ArgumentOutOfRangeException("argBox", "EventArgKeys.CurrentPage value is out of valid range");
			}
			if (!true)
			{
			}
			short effectTemplateId = num;
			SettlementTreasuryEventEffectItem effectCfg = SettlementTreasuryEventEffect.Instance[effectTemplateId];
			ValueTuple<CharacterSet, CharacterSet, CharacterSet, CharacterSet> affectedCharInfo = DomainManager.Organization.ApplySettlementTreasuryEventEffect(context, effectCfg, settlementId, 0, DomainManager.Organization.GetCurrentTreasuryLayer());
			LifeRecordCollection lifeRecordCollection = DomainManager.LifeRecord.GetLifeRecordCollection();
			int currDate = DomainManager.World.GetCurrDate();
			int taiwuCharId = taiwu.GetId();
			foreach (int charId in affectedCharInfo.Item1.GetCollection())
			{
				bool becomeEnemy = affectedCharInfo.Item2.Contains(charId);
				bool disapproveTaiwu = affectedCharInfo.Item4.Contains(charId);
				bool flag = becomeEnemy && disapproveTaiwu;
				if (flag)
				{
					lifeRecordCollection.AddIntrudeTreasuryCancelSupportMakeEnemy(charId, currDate, taiwuCharId, settlementId);
				}
				else
				{
					bool flag2 = becomeEnemy;
					if (flag2)
					{
						lifeRecordCollection.AddIntrudeTreasuryMakeEnemyOthers(charId, currDate, taiwuCharId, settlementId);
					}
					else
					{
						bool flag3 = disapproveTaiwu;
						if (flag3)
						{
							lifeRecordCollection.AddIntrudeTreasuryCancelSupport(charId, currDate, taiwuCharId, settlementId);
						}
						else
						{
							lifeRecordCollection.AddIntrudeTreasuryLostMorale(charId, currDate, taiwuCharId, settlementId);
						}
					}
				}
			}
			bool flag4 = affectedCharInfo.Item1.GetCount() != 0;
			if (flag4)
			{
				int becomeEnemyCount = affectedCharInfo.Item2.GetCount();
				int disapproveCount = affectedCharInfo.Item4.GetCount();
				bool flag5 = becomeEnemyCount > 0 && disapproveCount > 0;
				if (flag5)
				{
					lifeRecordCollection.AddIntrudeTreasuryBeCancelSupportMakeEnemy(taiwuCharId, currDate, settlementId);
				}
				else
				{
					bool flag6 = becomeEnemyCount > 0;
					if (flag6)
					{
						lifeRecordCollection.AddIntrudeTreasuryBeMakeEnemyOthers(taiwuCharId, currDate, settlementId);
					}
					else
					{
						bool flag7 = disapproveCount > 0;
						if (flag7)
						{
							lifeRecordCollection.AddIntrudeTreasuryBeCancelSupport(taiwuCharId, currDate, settlementId);
						}
						else
						{
							lifeRecordCollection.AddIntrudeTreasuryBeLostMorale2(taiwuCharId, currDate, settlementId);
						}
					}
				}
			}
			bool flag8 = !isSect;
			if (flag8)
			{
				int debtChange = effectCfg.CalcSpiritualDebtChange(0);
				bool flag9 = debtChange != 0;
				if (flag9)
				{
					lifeRecordCollection.AddIntrudeTreasuryBeLostMorale(taiwuCharId, currDate, settlementId, (float)Math.Abs(debtChange) / 10f);
				}
			}
			SettlementTreasuryRecordCollection treasuryRecordCollection = DomainManager.Extra.GetSettlementTreasuryRecordCollection(context, settlementId);
			bool flag10 = isSect;
			if (flag10)
			{
				treasuryRecordCollection.AddIntrudeSectTreasury(currDate, settlementId, taiwuCharId);
			}
			else
			{
				treasuryRecordCollection.AddIntrudeTownTreasury(currDate, settlementId, taiwuCharId);
			}
			DomainManager.Extra.SetSettlementTreasuryRecordCollection(context, settlementId, treasuryRecordCollection);
		}

		// Token: 0x0600247D RID: 9341 RVA: 0x001C4E24 File Offset: 0x001C3024
		public static void SettlementTreasuryStoreEffect(EventArgBox argBox)
		{
			short settlementId = EventHelper.GetTaiwuLocationSettlementId();
			Settlement settlement = DomainManager.Organization.GetSettlement(settlementId);
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			bool isSect = EventHelper.SettlementIsSect(settlementId);
			LifeRecordCollection lifeRecordCollection = DomainManager.LifeRecord.GetLifeRecordCollection();
			int currDate = DomainManager.World.GetCurrDate();
			int taiwuCharId = taiwu.GetId();
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			Inventory storeTreasuryInventory;
			argBox.Get<Inventory>("StoreTreasuryInventory", out storeTreasuryInventory);
			int totalValue = storeTreasuryInventory.GetTotalContribution(settlement);
			SettlementTreasuryRecordCollection treasuryRecordCollection = DomainManager.Extra.GetSettlementTreasuryRecordCollection(context, settlementId);
			bool flag = isSect;
			if (flag)
			{
				treasuryRecordCollection.AddDonateSectTreasury(currDate, settlementId, taiwuCharId);
			}
			else
			{
				treasuryRecordCollection.AddDonateTownTreasury(currDate, settlementId, taiwuCharId);
			}
			DomainManager.Extra.SetSettlementTreasuryRecordCollection(context, settlementId, treasuryRecordCollection);
			bool flag2 = totalValue <= 0;
			if (!flag2)
			{
				short effectTemplateId = isSect ? 4 : 7;
				SettlementTreasuryEventEffectItem effectCfg = SettlementTreasuryEventEffect.Instance[effectTemplateId];
				ValueTuple<CharacterSet, CharacterSet, CharacterSet, CharacterSet> affectedCharInfo = DomainManager.Organization.ApplySettlementTreasuryEventEffect(context, effectCfg, settlementId, totalValue, DomainManager.Organization.GetCurrentTreasuryLayer());
				foreach (int charId in affectedCharInfo.Item1.GetCollection())
				{
					bool approveTaiwu = affectedCharInfo.Item3.Contains(charId);
					bool flag3 = approveTaiwu;
					if (flag3)
					{
						lifeRecordCollection.AddDonateTreasuryProvideSupport(charId, currDate, taiwuCharId, settlementId);
					}
					else
					{
						lifeRecordCollection.AddDonateTreasuryGetMorale(charId, currDate, taiwuCharId, settlementId);
					}
				}
				bool flag4 = affectedCharInfo.Item1.GetCount() != 0;
				if (flag4)
				{
					int approveCount = affectedCharInfo.Item3.GetCount();
					bool flag5 = approveCount > 0;
					if (flag5)
					{
						lifeRecordCollection.AddDonateTreasuryBeProvideSupport(taiwuCharId, currDate, settlementId);
					}
					else
					{
						lifeRecordCollection.AddDonateTreasuryGetMorale2(taiwuCharId, currDate, settlementId);
					}
				}
				bool flag6 = !isSect;
				if (flag6)
				{
					int debtChange = effectCfg.CalcSpiritualDebtChange(totalValue);
					bool flag7 = debtChange != 0;
					if (flag7)
					{
						lifeRecordCollection.AddDonateTreasuryBeGetMorale(taiwuCharId, currDate, settlementId, (float)Math.Abs(debtChange) / 10f);
					}
				}
				bool flag8 = totalValue >= Config.Accessory.Instance[8].BaseValue / 15;
				if (flag8)
				{
					short fameMultiplier = SettlementTreasuryEventEffectHelper.CalcFameMultiplierByContribution(totalValue);
					EventHelper.RecordRoleFameAction(taiwu, 81, -1, fameMultiplier);
				}
			}
		}

		// Token: 0x0600247E RID: 9342 RVA: 0x001C5068 File Offset: 0x001C3268
		public static void SettlementTreasuryStealEffect(EventArgBox argBox)
		{
			short settlementId = EventHelper.GetTaiwuLocationSettlementId();
			Settlement settlement = DomainManager.Organization.GetSettlement(settlementId);
			Inventory stealTreasuryInventory;
			argBox.Get<Inventory>("StealTreasuryInventory", out stealTreasuryInventory);
			int totalValue = stealTreasuryInventory.GetTotalContribution(settlement);
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			bool isSect = EventHelper.SettlementIsSect(settlementId);
			sbyte layerIndex = argBox.GetSbyte("CurrentPage");
			if (!true)
			{
			}
			short num;
			switch (layerIndex)
			{
			case 0:
				num = 0;
				break;
			case 1:
				num = 1;
				break;
			case 2:
				num = 2;
				break;
			default:
				throw new ArgumentOutOfRangeException("argBox", "EventArgKeys.CurrentPage value is out of valid range");
			}
			if (!true)
			{
			}
			short effectTemplateId = num;
			SettlementTreasuryEventEffectItem effectCfg = SettlementTreasuryEventEffect.Instance[effectTemplateId];
			ValueTuple<CharacterSet, CharacterSet, CharacterSet, CharacterSet> affectedCharInfo = DomainManager.Organization.ApplySettlementTreasuryEventEffect(context, effectCfg, settlementId, totalValue, DomainManager.Organization.GetCurrentTreasuryLayer());
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			short fameMultiplier = SettlementTreasuryEventEffectHelper.CalcFameMultiplierByContribution(totalValue);
			EventHelper.RecordRoleFameAction(taiwu, 80, -1, fameMultiplier);
			LifeRecordCollection lifeRecordCollection = DomainManager.LifeRecord.GetLifeRecordCollection();
			int currDate = DomainManager.World.GetCurrDate();
			int taiwuCharId = taiwu.GetId();
			foreach (int charId in affectedCharInfo.Item1.GetCollection())
			{
				bool becomeEnemy = affectedCharInfo.Item2.Contains(charId);
				bool disapproveTaiwu = affectedCharInfo.Item4.Contains(charId);
				bool flag = becomeEnemy && disapproveTaiwu;
				if (flag)
				{
					lifeRecordCollection.AddPlunderTreasuryCancelSupportMakeEnemy(charId, currDate, taiwuCharId, settlementId);
				}
				else
				{
					bool flag2 = becomeEnemy;
					if (flag2)
					{
						lifeRecordCollection.AddPlunderTreasuryMakeEnemyOthers(charId, currDate, taiwuCharId, settlementId);
					}
					else
					{
						bool flag3 = disapproveTaiwu;
						if (flag3)
						{
							lifeRecordCollection.AddPlunderTreasuryCancelSupport(charId, currDate, taiwuCharId, settlementId);
						}
						else
						{
							lifeRecordCollection.AddPlunderTreasuryLostMorale(charId, currDate, taiwuCharId, settlementId);
						}
					}
				}
			}
			bool flag4 = affectedCharInfo.Item1.GetCount() != 0;
			if (flag4)
			{
				int becomeEnemyCount = affectedCharInfo.Item2.GetCount();
				int disapproveCount = affectedCharInfo.Item4.GetCount();
				bool flag5 = becomeEnemyCount > 0 && disapproveCount > 0;
				if (flag5)
				{
					lifeRecordCollection.AddPlunderTreasuryBeCancelSupportMakeEnemy(taiwuCharId, currDate, settlementId);
				}
				else
				{
					bool flag6 = becomeEnemyCount > 0;
					if (flag6)
					{
						lifeRecordCollection.AddPlunderTreasuryBeMakeEnemyOthers(taiwuCharId, currDate, settlementId);
					}
					else
					{
						bool flag7 = disapproveCount > 0;
						if (flag7)
						{
							lifeRecordCollection.AddPlunderTreasuryBeCancelSupport(taiwuCharId, currDate, settlementId);
						}
						else
						{
							lifeRecordCollection.AddPlunderTreasuryBeLostMorale2(taiwuCharId, currDate, settlementId);
						}
					}
				}
			}
			bool flag8 = !isSect;
			if (flag8)
			{
				int debtChange = effectCfg.CalcSpiritualDebtChange(totalValue);
				bool flag9 = debtChange != 0;
				if (flag9)
				{
					lifeRecordCollection.AddPlunderTreasuryBeLostMorale(taiwuCharId, currDate, settlementId, (float)Math.Abs(debtChange) / 10f);
				}
			}
		}

		// Token: 0x0600247F RID: 9343 RVA: 0x001C5310 File Offset: 0x001C3510
		public static byte GetSettlementTreasuryAlterTime(short settlementId)
		{
			return DomainManager.Organization.GetSettlementTreasuryAlterTime(EventHelper.Domain.MainThreadDataContext, settlementId);
		}

		// Token: 0x06002480 RID: 9344 RVA: 0x001C5338 File Offset: 0x001C3538
		public static void GiveSettlementTreasuryResource(sbyte resourceType, int amount, sbyte orgTemplateId)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			Settlement settlement = DomainManager.Organization.GetSettlementByOrgTemplateId(orgTemplateId);
			EventHelper.GiveSettlementTreasuryResource(resourceType, amount, settlement.GetId());
		}

		// Token: 0x06002481 RID: 9345 RVA: 0x001C536C File Offset: 0x001C356C
		public static void GiveSettlementTreasuryResource(sbyte resourceType, int amount, short settlementId)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			Settlement settlement = DomainManager.Organization.GetSettlement(settlementId);
			sbyte layer = DomainManager.Organization.GetCurrentTreasuryLayer();
			SettlementLayeredTreasuries treasuries = settlement.Treasuries;
			treasuries.GetTreasury(layer).Resources.Add(resourceType, amount);
			DomainManager.Extra.SetTreasuries(context, settlement.GetId(), treasuries, true);
		}

		// Token: 0x06002482 RID: 9346 RVA: 0x001C53CC File Offset: 0x001C35CC
		public static void SetSettlementTreasuryAlterTime(short settlementId, int time = -1)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			bool flag = time == -1;
			if (flag)
			{
				time = GlobalConfig.Instance.TreasuryAlterTime[Math.Clamp(EventHelper.GetGuardCombatLevel() - 1, 0, 2)];
			}
			DomainManager.Organization.SetSettlementTreasuryAlterTime(context, settlementId, (byte)time);
		}

		// Token: 0x06002483 RID: 9347 RVA: 0x001C5418 File Offset: 0x001C3618
		public static sbyte CheckTreasuryLayerItemGradeRange(EventArgBox argBox)
		{
			return DomainManager.Organization.CheckTreasuryLayerItemGradeRange(argBox);
		}

		// Token: 0x06002484 RID: 9348 RVA: 0x001C5435 File Offset: 0x001C3635
		public static void StartExchangeBooks(int charId, string exchangeFinishEvent = "", EventArgBox argBox = null)
		{
			GameDataBridge.AddDisplayEvent<int>(DisplayEventType.OpenBookTrade, charId);
			EventHelper.Domain.SetListenerWithActionName(exchangeFinishEvent, argBox, "ExchangeBookComplete");
		}

		// Token: 0x06002485 RID: 9349 RVA: 0x001C5452 File Offset: 0x001C3652
		public static void StartExchangeBooksByFavor(int charId, string exchangeFinishEvent = "", EventArgBox argBox = null)
		{
			GameDataBridge.AddDisplayEvent<int, bool>(DisplayEventType.OpenBookTrade, charId, true);
			EventHelper.Domain.SetListenerWithActionName(exchangeFinishEvent, argBox, "ExchangeBookComplete");
		}

		// Token: 0x06002486 RID: 9350 RVA: 0x001C5470 File Offset: 0x001C3670
		public static void StartExchangeBooksByApprove(int charId, string exchangeFinishEvent = "", EventArgBox argBox = null)
		{
			GameDataBridge.AddDisplayEvent<int, bool>(DisplayEventType.OpenBookTrade, charId, false);
			EventHelper.Domain.SetListenerWithActionName(exchangeFinishEvent, argBox, "ExchangeBookComplete");
		}

		// Token: 0x06002487 RID: 9351 RVA: 0x001C5490 File Offset: 0x001C3690
		public static void PushLifeSkillCombatForceSilentResult(int targetCharId, sbyte type, bool result)
		{
			sbyte behaviorType = DomainManager.Character.GetElement_Objects(targetCharId).GetBehaviorType();
			GameDataBridge.AddDisplayEvent<sbyte, bool, sbyte>(DisplayEventType.LifeSkillCombatForceSilentResult, type, result, behaviorType);
		}

		// Token: 0x06002488 RID: 9352 RVA: 0x001C54BC File Offset: 0x001C36BC
		public static void StartMerchantAction(int charId, string tradeFinishEvent = "", EventArgBox argBox = null)
		{
			OpenShopEventArguments openShopEventArguments = new OpenShopEventArguments
			{
				Id = charId,
				MerchantSourceType = 0
			};
			GameDataBridge.AddDisplayEvent<OpenShopEventArguments>(DisplayEventType.OpenShop, openShopEventArguments);
			EventHelper.Domain.SetListenerWithActionName(tradeFinishEvent, argBox, "ShopActionComplete");
		}

		// Token: 0x06002489 RID: 9353 RVA: 0x001C54F8 File Offset: 0x001C36F8
		public static void StartCaravanShopAction(int caravanId, string tradeFinishEvent = "", EventArgBox argBox = null)
		{
			OpenShopEventArguments openShopEventArguments = new OpenShopEventArguments
			{
				Id = caravanId,
				MerchantSourceType = 5
			};
			GameDataBridge.AddDisplayEvent<OpenShopEventArguments>(DisplayEventType.OpenShop, openShopEventArguments);
			EventHelper.Domain.SetListenerWithActionName(tradeFinishEvent, argBox, "ShopActionComplete");
		}

		// Token: 0x0600248A RID: 9354 RVA: 0x001C5534 File Offset: 0x001C3734
		public static void StartSettlementTreasuryShopAction(short settlementId, int guardCharId, string tradeFinishEvent = "", EventArgBox argBox = null)
		{
			sbyte layerIndex = (argBox == null || argBox.GetSbyte("CurrentPage") < 0) ? 0 : argBox.GetSbyte("CurrentPage");
			DomainManager.Organization.SetSettlementTreasuryFirstGuardChar(guardCharId);
			DomainManager.Organization.SetCurrentTreasuryLayer(layerIndex);
			OpenShopEventArguments openShopEventArguments = new OpenShopEventArguments
			{
				SettlementId = settlementId,
				MerchantSourceType = 3,
				CurrPage = ((argBox != null) ? argBox.GetSbyte("CurrentPage") : 0)
			};
			GameDataBridge.AddDisplayEvent<OpenShopEventArguments>(DisplayEventType.OpenShop, openShopEventArguments);
			bool flag = argBox != null && argBox.GetSbyte("CurrentPage") >= 0;
			if (flag)
			{
				EventHelper.Domain.SetListenerWithActionName(tradeFinishEvent, argBox, "ShopActionComplete");
			}
		}

		// Token: 0x0600248B RID: 9355 RVA: 0x001C55DA File Offset: 0x001C37DA
		public static void OpenSettlementPrison(short settlementId, bool isBreaking, int guardCharId = -1, string endEvent = "", EventArgBox argBox = null)
		{
			DomainManager.Organization.SetSettlementPrisonGuardCharId(guardCharId);
			GameDataBridge.AddDisplayEvent<short, bool>(DisplayEventType.OpenSettlementPrison, settlementId, isBreaking);
			EventHelper.Domain.SetListenerWithActionName(endEvent, argBox, "SettlementPrisonComplete");
		}

		// Token: 0x0600248C RID: 9356 RVA: 0x001C5608 File Offset: 0x001C3808
		public static bool RequestRoleJoinGroup(int characterId)
		{
			bool flag = !EventHelper.CharacterIsInTaiwuGroup(characterId);
			if (flag)
			{
				DomainManager.Taiwu.JoinGroup(EventHelper.Domain.MainThreadDataContext, characterId, true);
				EventHelper.ShowGetItemPageForCharacters(new List<int>
				{
					characterId
				}, false, "", null);
				DomainManager.Adventure.AddCharacterToResultDisplay(characterId);
			}
			return true;
		}

		// Token: 0x0600248D RID: 9357 RVA: 0x001C5668 File Offset: 0x001C3868
		public static bool RequestRoleLeaveGroup(int charId)
		{
			GameData.Domains.Character.Character character;
			bool isGearMate = DomainManager.Character.TryGetElement_Objects(charId, out character) && character.GetTemplateId() == 836;
			bool flag = isGearMate;
			if (flag)
			{
				DomainManager.Extra.GearMateLeaveGroup(EventHelper.Domain.MainThreadDataContext, charId);
			}
			else
			{
				DomainManager.Taiwu.LeaveGroup(EventHelper.Domain.MainThreadDataContext, charId, true, true, true);
			}
			return EventHelper.CharacterIsInTaiwuGroup(charId);
		}

		// Token: 0x0600248E RID: 9358 RVA: 0x001C56D6 File Offset: 0x001C38D6
		public static void JoinGroup(int characterId)
		{
			DomainManager.Taiwu.JoinGroup(EventHelper.Domain.MainThreadDataContext, characterId, true);
		}

		// Token: 0x0600248F RID: 9359 RVA: 0x001C56F0 File Offset: 0x001C38F0
		public static void AddCharacterToResultDisplay(int characterId)
		{
			DomainManager.Adventure.AddCharacterToResultDisplay(characterId);
		}

		// Token: 0x06002490 RID: 9360 RVA: 0x001C5700 File Offset: 0x001C3900
		public static void SelectBabyOfCharFromTeammateRequest(EventArgBox argBox, int parentCharId, string babyBoxKey)
		{
			EventSelectCharacterData data = new EventSelectCharacterData();
			argBox.Set("SelectCharacterData", data);
			data.FilterList = new List<CharacterSelectFilter>();
			CharacterSelectFilter filter = default(CharacterSelectFilter);
			filter.SelectKey = babyBoxKey;
			filter.AvailableCharactersDisplayDataList = new List<CharacterDisplayData>();
			foreach (int charId in DomainManager.Taiwu.GetGroupCharIds().GetCollection())
			{
				bool flag = charId == DomainManager.Taiwu.GetTaiwuCharId();
				if (!flag)
				{
					GameData.Domains.Character.Character teammateChar;
					bool flag2 = !DomainManager.Character.TryGetElement_Objects(charId, out teammateChar);
					if (!flag2)
					{
						bool flag3 = teammateChar.GetAgeGroup() != 0;
						if (!flag3)
						{
							bool flag4 = !DomainManager.Character.HasRelation(charId, parentCharId, 1);
							if (!flag4)
							{
								filter.AvailableCharactersDisplayDataList.Add(DomainManager.Character.GetCharacterDisplayData(charId));
							}
						}
					}
				}
			}
			data.FilterList.Add(filter);
		}

		// Token: 0x06002491 RID: 9361 RVA: 0x001C581C File Offset: 0x001C3A1C
		public static void StartSelectTeammate(EventArgBox argBox, CharacterSelectFilter filter, bool includeTaiwu, bool needAdult, Action onSelectFinish = null, List<int> excludeCharIds = null)
		{
			Tester.Assert(filter.FilterTemplateId == -1, "");
			EventSelectCharacterData data;
			bool flag = !argBox.Get<EventSelectCharacterData>("SelectCharacterData", out data);
			if (flag)
			{
				data = new EventSelectCharacterData();
				argBox.Set("SelectCharacterData", data);
			}
			bool flag2 = data.FilterList == null;
			if (flag2)
			{
				data.FilterList = new List<CharacterSelectFilter>();
			}
			bool flag3 = onSelectFinish != null;
			if (flag3)
			{
				data.OnSelectComplete = onSelectFinish;
			}
			CharacterSet teammateSet = DomainManager.Taiwu.GetGroupCharIds();
			filter.AvailableCharactersDisplayDataList = new List<CharacterDisplayData>();
			foreach (int charId in teammateSet.GetCollection())
			{
				bool flag4 = charId == DomainManager.Taiwu.GetTaiwuCharId() && !includeTaiwu;
				if (!flag4)
				{
					bool flag5 = excludeCharIds != null && excludeCharIds.Contains(charId);
					if (!flag5)
					{
						if (needAdult)
						{
							GameData.Domains.Character.Character character;
							bool flag6 = DomainManager.Character.TryGetElement_Objects(charId, out character) && character.GetAgeGroup() >= 2;
							if (flag6)
							{
								filter.AvailableCharactersDisplayDataList.Add(DomainManager.Character.GetCharacterDisplayData(charId));
							}
						}
						else
						{
							filter.AvailableCharactersDisplayDataList.Add(DomainManager.Character.GetCharacterDisplayData(charId));
						}
					}
				}
			}
			EventHelper.AddSpecialTeammateToFilter(ref filter);
			data.FilterList.Add(filter);
		}

		// Token: 0x06002492 RID: 9362 RVA: 0x001C59A0 File Offset: 0x001C3BA0
		private static void AddSpecialTeammateToFilter(ref CharacterSelectFilter filter)
		{
			IReadOnlySet<int> group = DomainManager.Extra.GetSpecialGroup(DomainManager.Taiwu.GetTaiwuCharId());
			foreach (int groupCharId in group)
			{
				GameData.Domains.Character.Character groupChar;
				bool flag = !DomainManager.Character.TryGetElement_Objects(groupCharId, out groupChar);
				if (flag)
				{
					DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(59, 2);
					defaultInterpolatedStringHandler.AppendLiteral("Trying to find ");
					defaultInterpolatedStringHandler.AppendFormatted<int>(groupCharId);
					defaultInterpolatedStringHandler.AppendLiteral(" in ");
					defaultInterpolatedStringHandler.AppendFormatted<int>(DomainManager.Taiwu.GetTaiwuCharId());
					defaultInterpolatedStringHandler.AppendLiteral("'s group, but target is no longer alive.");
					throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
				}
				filter.AvailableCharactersDisplayDataList.Add(DomainManager.Character.GetCharacterDisplayData(groupChar.GetId()));
			}
		}

		// Token: 0x06002493 RID: 9363 RVA: 0x001C5A8C File Offset: 0x001C3C8C
		public static void StartSelectTeammateAndPrisoner(EventArgBox argBox, CharacterSelectFilter filter, bool avoidBaby, Action onSelectFinish = null, List<int> excludeCharIds = null)
		{
			Tester.Assert(filter.FilterTemplateId == -1, "");
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			EventSelectCharacterData data;
			bool flag = !argBox.Get<EventSelectCharacterData>("SelectCharacterData", out data);
			if (flag)
			{
				data = new EventSelectCharacterData();
				argBox.Set("SelectCharacterData", data);
			}
			bool flag2 = data.FilterList == null;
			if (flag2)
			{
				data.FilterList = new List<CharacterSelectFilter>();
			}
			bool flag3 = onSelectFinish != null;
			if (flag3)
			{
				data.OnSelectComplete = onSelectFinish;
			}
			CharacterSet teammateSet = DomainManager.Taiwu.GetGroupCharIds();
			filter.AvailableCharactersDisplayDataList = new List<CharacterDisplayData>();
			HashSet<int> collection = teammateSet.GetCollection();
			List<int> teams = collection.ToList<int>();
			KidnappedCharacterList kidnappedCharacterList;
			bool flag4 = DomainManager.Character.TryGetKidnappedCharacters(taiwu.GetId(), out kidnappedCharacterList);
			if (flag4)
			{
				teams.AddRange(kidnappedCharacterList.GetCollection().ConvertAll<int>((KidnappedCharacter e) => e.CharId));
			}
			foreach (int charId in teams)
			{
				bool flag5 = charId == DomainManager.Taiwu.GetTaiwuCharId();
				if (!flag5)
				{
					bool flag6 = excludeCharIds != null && excludeCharIds.Contains(charId);
					if (!flag6)
					{
						if (avoidBaby)
						{
							GameData.Domains.Character.Character character;
							bool flag7 = DomainManager.Character.TryGetElement_Objects(charId, out character) && character.GetAgeGroup() != 0;
							if (flag7)
							{
								filter.AvailableCharactersDisplayDataList.Add(DomainManager.Character.GetCharacterDisplayData(charId));
							}
						}
						else
						{
							filter.AvailableCharactersDisplayDataList.Add(DomainManager.Character.GetCharacterDisplayData(charId));
						}
					}
				}
			}
			EventHelper.AddSpecialTeammateToFilter(ref filter);
			short settlementId = -1;
			argBox.Get("SettlementId", ref settlementId);
			SettlementBountyDisplayData settlementBountyDisplayData = DomainManager.Organization.GetSettlementBountyDisplayData(settlementId);
			Dictionary<int, sbyte> bountyDict = settlementBountyDisplayData.BountyCharacterDisplayDataDict.ToDictionary((KeyValuePair<int, CharacterDisplayDataForSettlementBounty> v) => v.Key, (KeyValuePair<int, CharacterDisplayDataForSettlementBounty> v) => v.Value.SettlementBounty.PunishmentSeverity);
			sbyte currOrgTemplateId = (sbyte)settlementBountyDisplayData.OrgTemplateId;
			foreach (CharacterDisplayData item2 in filter.AvailableCharactersDisplayDataList)
			{
				bool flag8 = bountyDict.ContainsKey(item2.CharacterId);
				if (flag8)
				{
					item2.BountyPunishmentSeverity = bountyDict[item2.CharacterId];
					item2.CurrOrgTemplate = currOrgTemplateId;
					item2.BountyOrgTemplate = currOrgTemplateId;
				}
			}
			filter.AvailableCharactersDisplayDataList = (from x in filter.AvailableCharactersDisplayDataList.Select((CharacterDisplayData item, int index) => new
			{
				Item = item,
				Index = index
			})
			orderby (x.Item.CurrOrgTemplate == currOrgTemplateId) ? 0 : 1, (x.Item.CurrOrgTemplate == currOrgTemplateId) ? ((int)x.Item.BountyPunishmentSeverity) : int.MinValue descending, x.Index
			select x.Item).ToList<CharacterDisplayData>();
			data.FilterList.Add(filter);
		}

		// Token: 0x06002494 RID: 9364 RVA: 0x001C5E10 File Offset: 0x001C4010
		public static void StartSelectPrisonerOfCharacter(EventArgBox argBox, CharacterSelectFilter filter, GameData.Domains.Character.Character character, Action onSelectFinish = null)
		{
			Tester.Assert(filter.FilterTemplateId == -1, "");
			EventSelectCharacterData data;
			bool flag = !argBox.Get<EventSelectCharacterData>("SelectCharacterData", out data);
			if (flag)
			{
				data = new EventSelectCharacterData();
				argBox.Set("SelectCharacterData", data);
			}
			bool flag2 = data.FilterList == null;
			if (flag2)
			{
				data.FilterList = new List<CharacterSelectFilter>();
			}
			bool flag3 = onSelectFinish != null;
			if (flag3)
			{
				data.OnSelectComplete = onSelectFinish;
			}
			filter.AvailableCharactersDisplayDataList = new List<CharacterDisplayData>();
			OrganizationInfo organizationInfo = character.GetOrganizationInfo();
			Settlement settlement = DomainManager.Organization.GetSettlement(organizationInfo.SettlementId);
			Sect sect = (Sect)settlement;
			KidnappedCharacterList kidnappedCharacterList = DomainManager.Character.GetKidnappedCharacters(character.GetId());
			foreach (KidnappedCharacter kidnappedCharacter in kidnappedCharacterList.GetCollection())
			{
				Tester.Assert(kidnappedCharacter.CharId != DomainManager.Taiwu.GetTaiwuCharId(), "");
				sbyte orgTemplateId = DomainManager.Organization.GetFugitiveBountySect(kidnappedCharacter.CharId);
				bool flag4 = orgTemplateId >= 0;
				if (flag4)
				{
					SettlementBounty bounty = sect.Prison.GetBounty(kidnappedCharacter.CharId);
					bool flag5 = bounty.CurrentHunterId == character.GetId();
					if (flag5)
					{
						filter.AvailableCharactersDisplayDataList.Add(DomainManager.Character.GetCharacterDisplayData(kidnappedCharacter.CharId));
					}
				}
			}
			data.FilterList.Add(filter);
		}

		// Token: 0x06002495 RID: 9365 RVA: 0x001C5FAC File Offset: 0x001C41AC
		public static void StartSelectApprovedTaiwu(EventArgBox argBox, short settlementId, short targetApprovingRate, Action onSelectFinish = null, List<int> excludeCharIds = null)
		{
			Settlement settlement = DomainManager.Organization.GetSettlement(settlementId);
			EventSelectCharacterData data;
			bool flag = !argBox.Get<EventSelectCharacterData>("SelectCharacterData", out data);
			if (flag)
			{
				data = new EventSelectCharacterData();
				argBox.Set("SelectCharacterData", data);
			}
			bool flag2 = data.SelectApprovedTaiwu == null;
			if (flag2)
			{
				data.SelectApprovedTaiwu = new SelectApprovedTaiwu();
			}
			bool flag3 = onSelectFinish != null;
			if (flag3)
			{
				data.OnSelectComplete = onSelectFinish;
			}
			List<int> charIds = new List<int>();
			settlement.GetMembers().GetAllMembers(charIds);
			for (int i = 0; i < charIds.Count; i++)
			{
				int charId = charIds[i];
				bool flag4 = excludeCharIds != null && excludeCharIds.Contains(charId);
				if (!flag4)
				{
					SectCharacter character;
					bool flag5 = DomainManager.Organization.TryGetElement_SectCharacters(charId, out character);
					if (flag5)
					{
						bool flag6 = DomainManager.Extra.IsLegendaryBookConsumed(charId);
						if (!flag6)
						{
							bool flag7 = character.GetApprovedTaiwu() && character.GetApprovingRate() > 0;
							if (flag7)
							{
								data.SelectApprovedTaiwu.CharacterApprovingRate.Add(character.GetId(), character.GetApprovingRate());
								data.SelectApprovedTaiwu.TargetApprovingRate = targetApprovingRate;
							}
						}
					}
				}
			}
			ProfessionData professionData = DomainManager.Extra.GetProfessionData(17);
			bool flag8 = professionData != null && professionData.SkillsData is DukeSkillsData;
			if (flag8)
			{
				DukeSkillsData duke = (DukeSkillsData)professionData.SkillsData;
				foreach (ValueTuple<int, short> pair in duke.GetAllOwners())
				{
					data.SelectApprovedTaiwu.DukeTitleCharIdList.Add(pair.Item1);
				}
			}
		}

		// Token: 0x06002496 RID: 9366 RVA: 0x001C617C File Offset: 0x001C437C
		public static void StartSelectCompletelyInfectedPrisoner(EventArgBox argBox, CharacterSelectFilter filter, Action onSelectFinish = null)
		{
			Tester.Assert(filter.FilterTemplateId == -1, "");
			EventSelectCharacterData data;
			bool flag = !argBox.Get<EventSelectCharacterData>("SelectCharacterData", out data);
			if (flag)
			{
				data = new EventSelectCharacterData();
				argBox.Set("SelectCharacterData", data);
			}
			bool flag2 = data.FilterList == null;
			if (flag2)
			{
				data.FilterList = new List<CharacterSelectFilter>();
			}
			bool flag3 = onSelectFinish != null;
			if (flag3)
			{
				data.OnSelectComplete = onSelectFinish;
			}
			KidnappedCharacterList prisonerSet = DomainManager.Character.GetKidnappedCharacters(EventArgBox.TaiwuCharacterId);
			filter.AvailableCharactersDisplayDataList = new List<CharacterDisplayData>();
			foreach (KidnappedCharacter prisoner in prisonerSet.GetCollection())
			{
				GameData.Domains.Character.Character character;
				bool flag4 = DomainManager.Character.TryGetElement_Objects(prisoner.CharId, out character) && character.IsCompletelyInfected();
				if (flag4)
				{
					filter.AvailableCharactersDisplayDataList.Add(DomainManager.Character.GetCharacterDisplayData(prisoner.CharId));
				}
			}
			data.FilterList.Add(filter);
		}

		// Token: 0x06002497 RID: 9367 RVA: 0x001C62A0 File Offset: 0x001C44A0
		public static void SelectTaiwuRelatedCharacterForRecommendFriend(EventArgBox argBox, string saveKey, int charId)
		{
			EventSelectCharacterData data = new EventSelectCharacterData();
			data.FilterList = new List<CharacterSelectFilter>();
			CharacterSelectFilter filter = default(CharacterSelectFilter);
			filter.SelectKey = saveKey;
			filter.FilterTemplateId = -1;
			filter.AvailableCharactersDisplayDataList = new List<CharacterDisplayData>();
			int taiwuCharId = DomainManager.Taiwu.GetTaiwuCharId();
			HashSet<int> relatedCharIdsOfTaiwu = new HashSet<int>();
			DomainManager.Character.GetAllRelatedCharIds(taiwuCharId, relatedCharIdsOfTaiwu, false);
			HashSet<int> relatedCharIdsOfTarget = new HashSet<int>();
			DomainManager.Character.GetAllRelatedCharIds(charId, relatedCharIdsOfTarget, false);
			foreach (int relatedCharId in relatedCharIdsOfTaiwu)
			{
				bool flag = relatedCharIdsOfTarget.Contains(relatedCharId);
				if (!flag)
				{
					bool flag2 = relatedCharId == charId;
					if (!flag2)
					{
						GameData.Domains.Character.Character character;
						bool flag3 = DomainManager.Character.TryGetElement_Objects(relatedCharId, out character);
						if (flag3)
						{
							bool flag4 = character.GetCreatingType() == 0;
							if (!flag4)
							{
								bool flag5 = character.GetAgeGroup() == 0;
								if (!flag5)
								{
									bool flag6 = character.IsCompletelyInfected();
									if (!flag6)
									{
										filter.AvailableCharactersDisplayDataList.Add(DomainManager.Character.GetCharacterDisplayData(relatedCharId));
									}
								}
							}
						}
					}
				}
			}
			data.FilterList.Add(filter);
			argBox.Set("SelectCharacterData", data);
		}

		// Token: 0x06002498 RID: 9368 RVA: 0x001C63F8 File Offset: 0x001C45F8
		public static void SelectTaiwuRelatedCharacterForAlienate(EventArgBox argBox, string saveKey, int charId)
		{
			EventSelectCharacterData data = new EventSelectCharacterData();
			data.FilterList = new List<CharacterSelectFilter>();
			CharacterSelectFilter filter = default(CharacterSelectFilter);
			filter.SelectKey = saveKey;
			filter.FilterTemplateId = -1;
			filter.AvailableCharactersDisplayDataList = new List<CharacterDisplayData>();
			int taiwuCharId = DomainManager.Taiwu.GetTaiwuCharId();
			HashSet<int> relatedCharIdsOfTaiwu = new HashSet<int>();
			DomainManager.Character.GetAllRelatedCharIds(taiwuCharId, relatedCharIdsOfTaiwu, false);
			foreach (int relatedCharId in relatedCharIdsOfTaiwu)
			{
				bool flag = relatedCharId == charId;
				if (!flag)
				{
					GameData.Domains.Character.Character character;
					bool flag2 = DomainManager.Character.TryGetElement_Objects(relatedCharId, out character);
					if (flag2)
					{
						bool flag3 = character.GetCreatingType() == 0;
						if (!flag3)
						{
							bool flag4 = character.GetAgeGroup() == 0;
							if (!flag4)
							{
								bool flag5 = character.IsCompletelyInfected();
								if (!flag5)
								{
									filter.AvailableCharactersDisplayDataList.Add(DomainManager.Character.GetCharacterDisplayData(relatedCharId));
								}
							}
						}
					}
				}
			}
			data.FilterList.Add(filter);
			argBox.Set("SelectCharacterData", data);
		}

		// Token: 0x06002499 RID: 9369 RVA: 0x001C6528 File Offset: 0x001C4728
		public static void SelectTaiwuTeammateForMediation(EventArgBox argBox, string saveKey, int charId)
		{
			EventSelectCharacterData data = new EventSelectCharacterData();
			data.FilterList = new List<CharacterSelectFilter>();
			CharacterSelectFilter filter = default(CharacterSelectFilter);
			filter.SelectKey = saveKey;
			filter.FilterTemplateId = -1;
			filter.AvailableCharactersDisplayDataList = new List<CharacterDisplayData>();
			HashSet<int> charHateCharIds = DomainManager.Character.GetRelatedCharIds(charId, 32768);
			foreach (int relatedCharId in DomainManager.Taiwu.GetGroupCharIds().GetCollection())
			{
				bool flag = relatedCharId == charId || !charHateCharIds.Contains(relatedCharId);
				if (!flag)
				{
					GameData.Domains.Character.Character character;
					bool flag2 = DomainManager.Character.TryGetElement_Objects(relatedCharId, out character);
					if (flag2)
					{
						bool flag3 = character.GetCreatingType() == 0;
						if (!flag3)
						{
							bool flag4 = character.GetAgeGroup() == 0;
							if (!flag4)
							{
								bool flag5 = character.IsCompletelyInfected();
								if (!flag5)
								{
									filter.AvailableCharactersDisplayDataList.Add(DomainManager.Character.GetCharacterDisplayData(relatedCharId));
								}
							}
						}
					}
				}
			}
			EventHelper.AddSpecialTeammateToFilter(ref filter);
			data.FilterList.Add(filter);
			argBox.Set("SelectCharacterData", data);
		}

		// Token: 0x0600249A RID: 9370 RVA: 0x001C6674 File Offset: 0x001C4874
		public static HashSet<int> GetTaiwuAndGroupCharIds()
		{
			return DomainManager.Taiwu.GetGroupCharIds().GetCollection();
		}

		// Token: 0x0600249B RID: 9371 RVA: 0x001C6694 File Offset: 0x001C4894
		public static void SelectTaiwuTeammateForMatchmaking(EventArgBox argBox, string saveKey, int charId)
		{
			GameData.Domains.Character.Character targetCharacter;
			bool flag = !DomainManager.Character.TryGetElement_Objects(charId, out targetCharacter);
			if (flag)
			{
				DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(66, 1);
				defaultInterpolatedStringHandler.AppendLiteral("can not find character of id ");
				defaultInterpolatedStringHandler.AppendFormatted<int>(charId);
				defaultInterpolatedStringHandler.AppendLiteral(" to SelectTaiwuTeammateForMatchmaking");
				throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
			}
			EventSelectCharacterData data = new EventSelectCharacterData();
			data.FilterList = new List<CharacterSelectFilter>();
			CharacterSelectFilter filter = default(CharacterSelectFilter);
			filter.SelectKey = saveKey;
			filter.FilterTemplateId = -1;
			filter.AvailableCharactersDisplayDataList = new List<CharacterDisplayData>();
			int taiwuCharId = DomainManager.Taiwu.GetTaiwuCharId();
			HashSet<int> charHateCharIds = DomainManager.Character.GetRelatedCharIds(charId, 32768);
			foreach (int relatedCharId in DomainManager.Taiwu.GetGroupCharIds().GetCollection())
			{
				bool flag2 = relatedCharId == charId || charHateCharIds.Contains(relatedCharId);
				if (!flag2)
				{
					GameData.Domains.Character.Character character;
					bool flag3 = DomainManager.Character.TryGetElement_Objects(relatedCharId, out character);
					if (flag3)
					{
						bool flag4 = character.GetCreatingType() == 0;
						if (!flag4)
						{
							bool flag5 = character.GetAgeGroup() != 2;
							if (!flag5)
							{
								bool flag6 = character.IsCompletelyInfected();
								if (!flag6)
								{
									sbyte favorLevel = FavorabilityType.GetFavorabilityType(DomainManager.Character.GetFavorability(relatedCharId, taiwuCharId));
									bool flag7 = favorLevel < 4;
									if (!flag7)
									{
										bool flag8 = !EventHelper.IsOppositeGender(character, targetCharacter);
										if (!flag8)
										{
											bool flag9 = RelationTypeHelper.AllowAddingHusbandOrWifeRelation(relatedCharId, charId);
											if (flag9)
											{
												filter.AvailableCharactersDisplayDataList.Add(DomainManager.Character.GetCharacterDisplayData(relatedCharId));
											}
										}
									}
								}
							}
						}
					}
				}
			}
			EventHelper.AddSpecialTeammateToFilter(ref filter);
			data.FilterList.Add(filter);
			argBox.Set("SelectCharacterData", data);
		}

		// Token: 0x0600249C RID: 9372 RVA: 0x001C6888 File Offset: 0x001C4A88
		public static void SelectCharacterFromCharIdList(EventArgBox argBox, string saveKey, List<int> charIdList)
		{
			EventSelectCharacterData data = new EventSelectCharacterData();
			data.FilterList = new List<CharacterSelectFilter>();
			CharacterSelectFilter filter = default(CharacterSelectFilter);
			filter.SelectKey = saveKey;
			filter.FilterTemplateId = -1;
			filter.AvailableCharactersDisplayDataList = new List<CharacterDisplayData>();
			bool flag = charIdList != null && charIdList.Count > 0;
			if (flag)
			{
				filter.AvailableCharactersDisplayDataList.AddRange(DomainManager.Character.GetCharacterDisplayDataList(charIdList));
			}
			data.FilterList.Add(filter);
			argBox.Set("SelectCharacterData", data);
		}

		// Token: 0x0600249D RID: 9373 RVA: 0x001C6910 File Offset: 0x001C4B10
		public static void SelectCharacterFromCharIdHashSet(EventArgBox argBox, string saveKey, HashSet<int> charIdSet)
		{
			List<int> resultList = new List<int>();
			resultList.AddRange(charIdSet);
			EventHelper.SelectCharacterFromCharIdList(argBox, saveKey, resultList);
		}

		// Token: 0x0600249E RID: 9374 RVA: 0x001C6938 File Offset: 0x001C4B38
		public static void TaiwuSelectItem(EventArgBox argBox, SelectItemFilter filter, Action onSelectFinish = null, bool includeEquipment = true, bool includeTransfer = true)
		{
			EventSelectItemData data;
			bool flag = !argBox.Get<EventSelectItemData>("SelectItemInfo", out data);
			if (flag)
			{
				data = new EventSelectItemData();
				argBox.Set("SelectItemInfo", data);
			}
			bool flag2 = data.CanSelectItemList == null;
			if (flag2)
			{
				data.CanSelectItemList = new List<ItemDisplayData>();
			}
			bool flag3 = onSelectFinish != null;
			if (flag3)
			{
				data.OnSelectFinish = onSelectFinish;
			}
			bool flag4 = data.FilterList == null;
			if (flag4)
			{
				data.FilterList = new List<SelectItemFilter>();
			}
			data.FilterList.Add(filter);
			GameData.Domains.Character.Character taiwuChar = argBox.GetCharacter("RoleTaiwu");
			bool flag5 = filter.DisplayDataFilterId > 0;
			if (flag5)
			{
				List<ItemDisplayData> itemList = DomainManager.Character.GetAllInventoryItems(taiwuChar.GetId());
				if (includeEquipment)
				{
					List<ItemDisplayData> equipmentItems = DomainManager.Character.GetAllEquipmentItems(taiwuChar.GetId());
					itemList.AddRange(from d in equipmentItems
					where d.Key.IsValid()
					select d);
				}
				Predicate<ItemDisplayData> predicate = ItemDisplayDataFilters.GetFilter(filter.DisplayDataFilterId);
				bool flag6 = predicate != null;
				if (flag6)
				{
					using (List<ItemDisplayData>.Enumerator enumerator = itemList.GetEnumerator())
					{
						while (enumerator.MoveNext())
						{
							ItemDisplayData itemDisplayData = enumerator.Current;
							bool flag7 = predicate(itemDisplayData);
							if (flag7)
							{
								bool flag8 = data.CanSelectItemList.Exists((ItemDisplayData d) => d.Key.Equals(itemDisplayData.Key));
								if (!flag8)
								{
									data.CanSelectItemList.Add(itemDisplayData);
								}
							}
						}
					}
				}
			}
			else
			{
				List<ValueTuple<ItemKey, int>> items = new List<ValueTuple<ItemKey, int>>();
				CharacterItemFilterWrappers.FindByItemFilterRule(taiwuChar, filter.FilterTemplateId, items, true, includeEquipment);
				List<ItemDisplayData> filterItems = CharacterDomain.GetItemDisplayData(taiwuChar.GetId(), items, ItemSourceType.Inventory);
				using (List<ItemDisplayData>.Enumerator enumerator2 = filterItems.GetEnumerator())
				{
					while (enumerator2.MoveNext())
					{
						ItemDisplayData itemDisplayData = enumerator2.Current;
						bool flag9 = data.CanSelectItemList.Exists((ItemDisplayData d) => d.Key.Equals(itemDisplayData.Key));
						if (!flag9)
						{
							bool flag10 = !includeTransfer && !ItemTemplateHelper.IsTransferable(itemDisplayData.Key.ItemType, itemDisplayData.Key.TemplateId);
							if (!flag10)
							{
								data.CanSelectItemList.Add(itemDisplayData);
							}
						}
					}
				}
			}
		}

		// Token: 0x0600249F RID: 9375 RVA: 0x001C6BD4 File Offset: 0x001C4DD4
		public static void SelectCharacterItemRequest(int charId, EventArgBox argBox, SelectItemFilter filter, Action onSelectFinish = null, bool includeEquipment = true, bool skipAddItem = false)
		{
			EventHelper.SelectCharacterItemRequestWithResource(charId, argBox, filter, onSelectFinish, includeEquipment, skipAddItem, false, false);
		}

		// Token: 0x060024A0 RID: 9376 RVA: 0x001C6BE8 File Offset: 0x001C4DE8
		public unsafe static void SelectCharacterItemRequestWithResource(int charId, EventArgBox argBox, SelectItemFilter filter, Action onSelectFinish = null, bool includeEquipment = true, bool skipAddItem = false, bool onlyResource = false, bool expectResource = false)
		{
			GameData.Domains.Character.Character character = DomainManager.Character.GetElement_Objects(charId);
			bool flag = character == null;
			if (flag)
			{
				throw new Exception("EventHelper SelectCharacterItemRequest Exception: can not find character!");
			}
			EventSelectItemData data;
			bool flag2 = !argBox.Get<EventSelectItemData>("SelectItemInfo", out data);
			if (flag2)
			{
				data = new EventSelectItemData();
				argBox.Set("SelectItemInfo", data);
			}
			bool flag3 = data.CanSelectItemList == null;
			if (flag3)
			{
				data.CanSelectItemList = new List<ItemDisplayData>();
			}
			bool flag4 = onSelectFinish != null;
			if (flag4)
			{
				data.OnSelectFinish = onSelectFinish;
			}
			bool flag5 = data.FilterList == null;
			if (flag5)
			{
				data.FilterList = new List<SelectItemFilter>();
			}
			data.FilterList.Add(filter);
			if (!skipAddItem)
			{
				bool flag6 = filter.DisplayDataFilterId > 0;
				if (flag6)
				{
					List<ItemDisplayData> itemList = DomainManager.Character.GetAllInventoryItems(charId);
					if (includeEquipment)
					{
						List<ItemDisplayData> equipmentItems = DomainManager.Character.GetAllEquipmentItems(charId);
						itemList.AddRange(from d in equipmentItems
						where d.Key.IsValid()
						select d);
					}
					Predicate<ItemDisplayData> predicate = ItemDisplayDataFilters.GetFilter(filter.DisplayDataFilterId);
					bool flag7 = predicate != null;
					if (flag7)
					{
						ushort displayDataFilterId = filter.DisplayDataFilterId;
						bool flag8 = displayDataFilterId == 2 || displayDataFilterId == 5;
						bool isItemTransferable = flag8;
						bool flag9 = !onlyResource;
						if (flag9)
						{
							using (List<ItemDisplayData>.Enumerator enumerator = itemList.GetEnumerator())
							{
								while (enumerator.MoveNext())
								{
									ItemDisplayData itemDisplayData = enumerator.Current;
									bool flag10 = predicate(itemDisplayData);
									if (flag10)
									{
										bool flag11 = data.CanSelectItemList.Exists((ItemDisplayData d) => d.Key.Equals(itemDisplayData.Key));
										if (!flag11)
										{
											data.CanSelectItemList.Add(itemDisplayData);
										}
									}
								}
							}
						}
						bool flag12 = isItemTransferable && !expectResource;
						if (flag12)
						{
							ResourceInts resources = *character.GetResources();
							for (int type = 0; type < 8; type++)
							{
								int amount = *resources[type];
								bool flag13 = amount <= 0;
								if (!flag13)
								{
									short templateId = Convert.ToInt16(321 + type);
									ItemKey itemKey = new ItemKey(12, 0, templateId, 0);
									ItemDisplayData itemData = new ItemDisplayData
									{
										Key = itemKey,
										Amount = amount
									};
									data.CanSelectItemList.Add(itemData);
								}
							}
						}
					}
				}
				else
				{
					List<ValueTuple<ItemKey, int>> items = new List<ValueTuple<ItemKey, int>>();
					CharacterItemFilterWrappers.FindByItemFilterRule(character, filter.FilterTemplateId, items, true, includeEquipment);
					List<ItemDisplayData> filterItems = CharacterDomain.GetItemDisplayData(charId, items, ItemSourceType.Inventory);
					using (List<ItemDisplayData>.Enumerator enumerator2 = filterItems.GetEnumerator())
					{
						while (enumerator2.MoveNext())
						{
							ItemDisplayData itemDisplayData = enumerator2.Current;
							bool flag14 = data.CanSelectItemList.Exists((ItemDisplayData d) => d.Key.Equals(itemDisplayData.Key));
							if (!flag14)
							{
								data.CanSelectItemList.Add(itemDisplayData);
							}
						}
					}
				}
			}
		}

		// Token: 0x060024A1 RID: 9377 RVA: 0x001C6F28 File Offset: 0x001C5128
		public static void ExcludeItemsForEventSelectItemData(EventArgBox eventArgBox, ushort matcherId)
		{
			EventSelectItemData data;
			bool flag = eventArgBox.Get<EventSelectItemData>("SelectItemInfo", out data) && data != null;
			if (flag)
			{
				Predicate<ItemDisplayData> predicate = ItemDisplayDataFilters.GetFilter(matcherId);
				bool flag2 = predicate == null;
				if (!flag2)
				{
					for (int i = data.CanSelectItemList.Count - 1; i >= 0; i--)
					{
						ItemDisplayData itemDisplayData = data.CanSelectItemList[i];
						bool flag3 = matcherId == 2 || matcherId == 5;
						bool flag4 = flag3 && ItemTemplateHelper.MiscResourceCanExchange(itemDisplayData.Key.ItemType, itemDisplayData.Key.TemplateId);
						if (!flag4)
						{
							bool flag5 = !predicate(itemDisplayData);
							if (flag5)
							{
								data.CanSelectItemList.RemoveAt(i);
							}
						}
					}
				}
			}
		}

		// Token: 0x060024A2 RID: 9378 RVA: 0x001C7002 File Offset: 0x001C5202
		public static void AddLegacyPoint(short templateId, int percent = 100)
		{
			DomainManager.Taiwu.AddLegacyPoint(EventHelper.Domain.MainThreadDataContext, templateId, percent);
		}

		// Token: 0x060024A3 RID: 9379 RVA: 0x001C701C File Offset: 0x001C521C
		public static void MakeAppointment(int charId, short settlementId)
		{
			bool flag = settlementId < 0;
			if (flag)
			{
				DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(48, 2);
				defaultInterpolatedStringHandler.AppendLiteral("Invalid target settlement ");
				defaultInterpolatedStringHandler.AppendFormatted<short>(settlementId);
				defaultInterpolatedStringHandler.AppendLiteral(" for appointment with ");
				defaultInterpolatedStringHandler.AppendFormatted<int>(charId);
				AdaptableLog.Warning(defaultInterpolatedStringHandler.ToStringAndClear(), false);
			}
			else
			{
				DomainManager.Taiwu.AddAppointment(EventHelper.Domain.MainThreadDataContext, charId, settlementId);
			}
		}

		// Token: 0x060024A4 RID: 9380 RVA: 0x001C7090 File Offset: 0x001C5290
		public static void TriggerLegacyPassingEvent(bool isTaiwuDying, string onFinishEvent = "")
		{
			bool isTraveling = DomainManager.Map.IsTraveling;
			if (isTraveling)
			{
				DomainManager.Map.StopTravel(EventHelper.Domain.MainThreadDataContext);
			}
			EventHelper.Domain.ClearAllTriggeredEvent();
			EventHelper.Domain.OnEvent_NeedToPassLegacy(isTaiwuDying, onFinishEvent);
			DomainManager.World.GetMonthlyEventCollection().Clear();
		}

		// Token: 0x060024A5 RID: 9381 RVA: 0x001C70E9 File Offset: 0x001C52E9
		public static void ClearAllTriggeredEvent()
		{
			EventHelper.Domain.ClearAllTriggeredEvent();
		}

		// Token: 0x060024A6 RID: 9382 RVA: 0x001C70F8 File Offset: 0x001C52F8
		public static void SetTaiwuAsLeaderOfTaiwuVillage()
		{
			OrganizationInfo info = default(OrganizationInfo);
			info.OrgTemplateId = 16;
			info.Grade = 8;
			info.Principal = true;
			info.SettlementId = DomainManager.Taiwu.GetTaiwuVillageSettlementId();
			GameData.Domains.Character.Character taiwuChar = DomainManager.Taiwu.GetTaiwu();
			DomainManager.Organization.ChangeOrganization(EventHelper.Domain.MainThreadDataContext, taiwuChar, info);
			OrganizationInfo groupInfo = new OrganizationInfo(16, 0, true, DomainManager.Taiwu.GetTaiwuVillageSettlementId());
			EventHelper.SetGroupOrganization(groupInfo);
		}

		// Token: 0x060024A7 RID: 9383 RVA: 0x001C7178 File Offset: 0x001C5378
		public static void SetGroupOrganization(OrganizationInfo organizationInfo)
		{
			HashSet<int> charIds = DomainManager.Taiwu.GetGroupCharIds().GetCollection();
			int taiwuId = DomainManager.Taiwu.GetTaiwuCharId();
			foreach (int charId in charIds)
			{
				bool flag = charId == taiwuId;
				if (!flag)
				{
					GameData.Domains.Character.Character character = DomainManager.Character.GetElement_Objects(charId);
					DomainManager.Organization.ChangeOrganization(EventHelper.Domain.MainThreadDataContext, character, organizationInfo);
				}
			}
		}

		// Token: 0x060024A8 RID: 9384 RVA: 0x001C7218 File Offset: 0x001C5418
		[Obsolete]
		public static void SelectSuccessor(EventArgBox argBox, bool isRandomSuccessor, string nextEvent)
		{
			DomainManager.Taiwu.SetLegacyPassingState(EventHelper.Domain.MainThreadDataContext, isRandomSuccessor ? 2 : 1);
			EventHelper.Domain.SetListenerWithActionName(nextEvent, argBox, "PassingLegacyComplete");
		}

		// Token: 0x060024A9 RID: 9385 RVA: 0x001C724C File Offset: 0x001C544C
		public static void StartPassingLegacy(EventArgBox argBox, string nextEvent)
		{
			bool isTaiwuDying = false;
			bool hasTeammate = EventHelper.HasTeammates(true);
			argBox.Get("IsTaiwuDying", ref isTaiwuDying);
			DomainManager.Taiwu.SetIsTaiwuDying(isTaiwuDying);
			DomainManager.Taiwu.SetLegacyPassingState(EventHelper.Domain.MainThreadDataContext, hasTeammate ? 1 : 2);
			EventHelper.Domain.SetListenerWithActionName(nextEvent, argBox, "PassingLegacyComplete");
		}

		// Token: 0x060024AA RID: 9386 RVA: 0x001C72AB File Offset: 0x001C54AB
		public static void MarkTaiwuDieOfCombatWithXiangshuAttacking()
		{
			DomainManager.Taiwu.SetIsTaiwuDieOfCombatWithXiangshu(true, EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x060024AB RID: 9387 RVA: 0x001C72C4 File Offset: 0x001C54C4
		public static string FinishPassingLegacy(EventArgBox argBox, sbyte behaviorType)
		{
			string nextEventId = string.Empty;
			DomainManager.Taiwu.SetLegacyPassingState(EventHelper.Domain.MainThreadDataContext, 0);
			argBox.Get("OnFinishPassingLegacyEvent", ref nextEventId);
			argBox.Remove<string>("OnFinishPassingLegacyEvent");
			return nextEventId;
		}

		// Token: 0x060024AC RID: 9388 RVA: 0x001C7310 File Offset: 0x001C5510
		public static int GetGroupCount()
		{
			return EventHelper.GetValidGroupCharacterCount(false, false, true);
		}

		// Token: 0x060024AD RID: 9389 RVA: 0x001C732C File Offset: 0x001C552C
		public static int GetValidGroupCharacterCount(bool ignoreBaby, bool ignoreChild, bool ignoreTaiwu)
		{
			HashSet<int> group = DomainManager.Taiwu.GetGroupCharIds().GetCollection();
			int taiwuCharId = DomainManager.Taiwu.GetTaiwuCharId();
			int count = 0;
			foreach (int charId in group)
			{
				bool flag = ignoreBaby && DomainManager.Character.GetElement_Objects(charId).GetAgeGroup() == 0;
				if (!flag)
				{
					bool flag2 = ignoreChild && DomainManager.Character.GetElement_Objects(charId).GetAgeGroup() == 1;
					if (!flag2)
					{
						bool flag3 = ignoreTaiwu && charId == taiwuCharId;
						if (!flag3)
						{
							count++;
						}
					}
				}
			}
			return count;
		}

		// Token: 0x060024AE RID: 9390 RVA: 0x001C73FC File Offset: 0x001C55FC
		public static bool HasTeammateCommandInTaiwuGroup()
		{
			HashSet<int> group = DomainManager.Taiwu.GetGroupCharIds().GetCollection();
			int taiwuCharId = DomainManager.Taiwu.GetTaiwuCharId();
			foreach (int charId in group)
			{
				bool flag = charId == taiwuCharId;
				if (!flag)
				{
					IReadOnlyList<sbyte> commands = DomainManager.Extra.GetCharOriginalTeammateCommands(EventHelper.Domain.MainThreadDataContext, charId);
					bool flag2 = commands != null && commands.Count > 0;
					if (flag2)
					{
						return true;
					}
				}
			}
			return false;
		}

		// Token: 0x060024AF RID: 9391 RVA: 0x001C74B0 File Offset: 0x001C56B0
		public static int GetAdultGroupCharacterCount()
		{
			return EventHelper.GetValidGroupCharacterCount(true, true, true);
		}

		// Token: 0x060024B0 RID: 9392 RVA: 0x001C74CC File Offset: 0x001C56CC
		public static bool CharacterIsInTaiwuGroup(int charId)
		{
			return DomainManager.Taiwu.IsInGroup(charId);
		}

		// Token: 0x060024B1 RID: 9393 RVA: 0x001C74EC File Offset: 0x001C56EC
		public static short GetTaiwuFavorabilityHotChangeValue()
		{
			GameData.Domains.Character.Character taiwuChar = DomainManager.Taiwu.GetTaiwu();
			short attractionValue = taiwuChar.GetAttraction();
			sbyte fameValue = taiwuChar.GetFame();
			return (short)Math.Min(32767, (int)(600 + attractionValue / 3 + (short)(Math.Max(fameValue, -100) * 3)));
		}

		// Token: 0x060024B2 RID: 9394 RVA: 0x001C7538 File Offset: 0x001C5738
		public static Location GetTaiwuVillageLocation()
		{
			return DomainManager.Taiwu.GetTaiwuVillageLocation();
		}

		// Token: 0x060024B3 RID: 9395 RVA: 0x001C7554 File Offset: 0x001C5754
		public static bool IsTaiwuAtVillageLocation()
		{
			return DomainManager.Taiwu.GetTaiwu().GetLocation() == EventHelper.GetTaiwuVillageLocation();
		}

		// Token: 0x060024B4 RID: 9396 RVA: 0x001C7580 File Offset: 0x001C5780
		public static void TeleportMoveTaiwuToLocation(Location location)
		{
			short areaId = location.AreaId;
			Tester.Assert(areaId >= 0 && areaId < 135, "");
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			DomainManager.Map.StopTravel(context);
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			bool flag = taiwu.GetLocation().AreaId != location.AreaId;
			if (flag)
			{
				DomainManager.Map.QuickTravel(context, location.AreaId);
			}
			EventHelper.TeleportMoveTaiwuToBlock(location.BlockId);
		}

		// Token: 0x060024B5 RID: 9397 RVA: 0x001C7609 File Offset: 0x001C5809
		public static void TaiwuBeKidnapped(Location location, int hunterCharId)
		{
			EventHelper.ClearTrivialMonthlyEvents();
			GameDataBridge.AddDisplayEvent<Location, int>(DisplayEventType.TaiwuBeKidnapped, location, hunterCharId);
		}

		// Token: 0x060024B6 RID: 9398 RVA: 0x001C761C File Offset: 0x001C581C
		public static void TeleportMoveTaiwuToBlock(short destBlockId)
		{
			DomainManager.Map.SetTeleportMove(true);
			DomainManager.Map.Move(EventHelper.Domain.MainThreadDataContext, destBlockId, true);
			DomainManager.Map.SetTeleportMove(false);
			EventHelper.Domain.SetTaiwuLocationDirtyFlag();
		}

		// Token: 0x060024B7 RID: 9399 RVA: 0x001C7659 File Offset: 0x001C5859
		public static void AllocateGenericGrid(sbyte equipType)
		{
			DomainManager.Taiwu.AllocateGenericGrid(EventHelper.Domain.MainThreadDataContext, equipType);
		}

		// Token: 0x060024B8 RID: 9400 RVA: 0x001C7672 File Offset: 0x001C5872
		public static void DeallocateGenericGrid(sbyte equipType)
		{
			DomainManager.Taiwu.DeallocateGenericGrid(EventHelper.Domain.MainThreadDataContext, equipType);
		}

		// Token: 0x060024B9 RID: 9401 RVA: 0x001C768C File Offset: 0x001C588C
		public static bool TryGetAppointmentOfCharacter(int charId, out short settlementId)
		{
			settlementId = -1;
			bool flag = !DomainManager.Character.IsCharacterAlive(charId);
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				BasePrioritizedAction action;
				AppointmentAction appointmentAction;
				bool flag2;
				if (DomainManager.Character.TryGetCharacterPrioritizedAction(charId, out action))
				{
					appointmentAction = (action as AppointmentAction);
					flag2 = (appointmentAction == null);
				}
				else
				{
					flag2 = true;
				}
				bool flag3 = flag2;
				if (flag3)
				{
					result = false;
				}
				else
				{
					Location targetLocation = appointmentAction.Target.GetRealTargetLocation();
					Settlement settlement = DomainManager.Organization.GetSettlementByLocation(targetLocation);
					bool flag4 = settlement == null;
					if (flag4)
					{
						result = false;
					}
					else
					{
						settlementId = settlement.GetId();
						result = true;
					}
				}
			}
			return result;
		}

		// Token: 0x060024BA RID: 9402 RVA: 0x001C7718 File Offset: 0x001C5918
		public static void RemoveAppointmentOfCharacter(int charId)
		{
			GameData.Domains.Character.Character character;
			bool flag = !DomainManager.Character.TryGetElement_Objects(charId, out character);
			if (!flag)
			{
				BasePrioritizedAction action;
				AppointmentAction appointmentAction;
				bool flag2;
				if (DomainManager.Character.TryGetCharacterPrioritizedAction(charId, out action))
				{
					appointmentAction = (action as AppointmentAction);
					flag2 = (appointmentAction == null);
				}
				else
				{
					flag2 = true;
				}
				bool flag3 = flag2;
				if (!flag3)
				{
					DomainManager.Extra.SetPrioritizedActionCooldown(EventHelper.Domain.MainThreadDataContext, charId, appointmentAction.ActionType, PrioritizedActions.Instance[appointmentAction.ActionType].ActionCoolDown);
					DomainManager.Character.RemoveCharacterPrioritizedAction(EventHelper.Domain.MainThreadDataContext, charId);
				}
			}
		}

		// Token: 0x060024BB RID: 9403 RVA: 0x001C77AC File Offset: 0x001C59AC
		public static void TryAddRandomPositiveFeature()
		{
			GameData.Domains.Character.Character charTaiwu = DomainManager.Taiwu.GetTaiwu();
			List<short> featureIdList = charTaiwu.GetFeatureIds();
			List<CharacterFeatureItem> curFeatureItemList = featureIdList.ConvertAll<CharacterFeatureItem>(new Converter<short, CharacterFeatureItem>(CharacterFeature.Instance.GetItem));
			List<short[]> canAddFeatureIdList = new List<short[]>();
			CharacterFeature.Instance.Iterate(delegate(CharacterFeatureItem cell)
			{
				bool flag2 = cell.Mergeable && cell.Level == 1;
				if (flag2)
				{
					bool flag3 = curFeatureItemList.Find((CharacterFeatureItem e) => e.MutexGroupId == cell.MutexGroupId) == null;
					if (flag3)
					{
						canAddFeatureIdList.Add(new short[]
						{
							cell.TemplateId,
							(short)cell.AppearProb
						});
					}
				}
				return true;
			});
			bool flag = canAddFeatureIdList.Count <= 0;
			if (!flag)
			{
				short[] addCellData = EventHelper.GetRandomCellFromWeightCore(canAddFeatureIdList);
				featureIdList.Add(addCellData[0]);
				charTaiwu.SetFeatureIds(featureIdList, EventHelper.Domain.MainThreadDataContext);
			}
		}

		// Token: 0x060024BC RID: 9404 RVA: 0x001C7854 File Offset: 0x001C5A54
		public static ItemKey AddItemToWareHouse(sbyte itemType, short templateId, int amount)
		{
			ItemKey itemKey = DomainManager.Item.CreateItem(EventHelper.Domain.MainThreadDataContext, itemType, templateId);
			DomainManager.Taiwu.WarehouseAdd(EventHelper.Domain.MainThreadDataContext, itemKey, amount);
			return itemKey;
		}

		// Token: 0x060024BD RID: 9405 RVA: 0x001C7898 File Offset: 0x001C5A98
		public static bool IsCharacterBirthday(int charId)
		{
			GameData.Domains.Character.Character character;
			bool flag = !DomainManager.Character.TryGetElement_Objects(charId, out character);
			if (flag)
			{
				DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(27, 1);
				defaultInterpolatedStringHandler.AppendLiteral("can not get character,Id = ");
				defaultInterpolatedStringHandler.AppendFormatted<int>(charId);
				throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
			}
			return character.GetBirthMonth() == DomainManager.World.GetCurrMonthInYear();
		}

		// Token: 0x060024BE RID: 9406 RVA: 0x001C7900 File Offset: 0x001C5B00
		public static void ReEnterBlock(EventArgBox argBox)
		{
			Location fromLocation;
			Location toLocation;
			bool flag = argBox != null && argBox.Get<Location>("BlockFrom", out fromLocation) && argBox.Get<Location>("BlockTo", out toLocation);
			if (flag)
			{
				EventHelper.Domain.OnEvent_TaiwuBlockChanged(fromLocation, toLocation);
			}
		}

		// Token: 0x060024BF RID: 9407 RVA: 0x001C7944 File Offset: 0x001C5B44
		public static bool TaiwuGroupHaveAdult()
		{
			return EventHelper.GetValidGroupCharacterCount(true, true, false) > 0;
		}

		// Token: 0x060024C0 RID: 9408 RVA: 0x001C7964 File Offset: 0x001C5B64
		public static bool TaiwuPrisonerHaveInfectedCharacter()
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			bool flag = !taiwu.IsActiveExternalRelationState(2);
			bool result;
			if (flag)
			{
				result = false;
			}
			else
			{
				KidnappedCharacterList kidnappedCharacterList = DomainManager.Character.GetKidnappedCharacters(taiwu.GetId());
				foreach (KidnappedCharacter prisoner in kidnappedCharacterList.GetCollection())
				{
					GameData.Domains.Character.Character prisonerChar;
					bool flag2 = DomainManager.Character.TryGetElement_Objects(prisoner.CharId, out prisonerChar) && prisonerChar.IsCompletelyInfected();
					if (flag2)
					{
						return true;
					}
				}
				result = false;
			}
			return result;
		}

		// Token: 0x060024C1 RID: 9409 RVA: 0x001C7A14 File Offset: 0x001C5C14
		public static bool IsCharacterChangingTaiwuVillagerMerchantType(GameData.Domains.Character.Character character)
		{
			VillagerRoleBase villagerRole = DomainManager.Extra.GetVillagerRole(character.GetId());
			VillagerRoleMerchant merchant = villagerRole as VillagerRoleMerchant;
			return merchant != null && merchant.CurrentMerchantType != merchant.DesignatedMerchantType && merchant.DesignatedMerchantType != 7;
		}

		// Token: 0x060024C2 RID: 9410 RVA: 0x001C7A60 File Offset: 0x001C5C60
		public static string GetChangingTaiwuVillagerMerchantTypeContent(GameData.Domains.Character.Character character)
		{
			VillagerRoleBase villagerRole = DomainManager.Extra.GetVillagerRole(character.GetId());
			VillagerRoleMerchant merchant = villagerRole as VillagerRoleMerchant;
			bool flag = merchant != null;
			if (flag)
			{
				sbyte type = merchant.DesignatedMerchantType;
				bool flag2 = type == 7;
				if (flag2)
				{
					type = merchant.SelfDecideMerchantType;
				}
				return Config.MerchantType.Instance[type].TaiwuVillagerMerchantChangingTypeContent;
			}
			DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(41, 1);
			defaultInterpolatedStringHandler.AppendLiteral("can not get character villager role,Id = ");
			defaultInterpolatedStringHandler.AppendFormatted<int>(character.GetId());
			throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
		}

		// Token: 0x060024C3 RID: 9411 RVA: 0x001C7AEF File Offset: 0x001C5CEF
		public static void UpdateConsummateLevelBrokenFeature()
		{
			DomainManager.Taiwu.UpdateConsummateLevelBrokenFeature(EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x060024C4 RID: 9412 RVA: 0x001C7B08 File Offset: 0x001C5D08
		public static void AddFuyuFaith(int delta, bool showNotification = false)
		{
			DomainManager.Extra.AddFuyuFaith(EventHelper.Domain.MainThreadDataContext, delta);
			bool flag = delta > 0 && showNotification;
			if (flag)
			{
				DomainManager.World.GetInstantNotificationCollection().AddGainFuyuFaith3(delta);
			}
		}

		// Token: 0x060024C5 RID: 9413 RVA: 0x001C7B48 File Offset: 0x001C5D48
		public static int GetFuyuFaithLevel(GameData.Domains.Character.Character character, int value)
		{
			return Math.Max(0, (from x in GlobalConfig.FuyuFaithLevel
			where x <= value
			select x).Count<int>() - 1);
		}

		// Token: 0x060024C6 RID: 9414 RVA: 0x001C7B85 File Offset: 0x001C5D85
		public static int GetFuyuFaithDebtByLevel(GameData.Domains.Character.Character character, int value)
		{
			return GlobalConfig.FuyuFaithDebtByLevel[value] * GlobalConfig.Instance.FuyuFaithDebtFactor / 100;
		}

		// Token: 0x060024C7 RID: 9415 RVA: 0x001C7B9C File Offset: 0x001C5D9C
		public static int GetFuyuFaithFavorByLevel(GameData.Domains.Character.Character character, int value)
		{
			return GlobalConfig.FuyuFaithFavorByLevel[value];
		}

		// Token: 0x060024C8 RID: 9416 RVA: 0x001C7BA5 File Offset: 0x001C5DA5
		public static int GetFuyuFaithGiftLevelByLevel(GameData.Domains.Character.Character character, int value)
		{
			return Math.Min(8, Math.Min((int)GameData.Domains.World.SharedMethods.GetXiangshuLevel(DomainManager.World.GetXiangshuProgress()) + GlobalConfig.FuyuFaithAddGiftLevel[value], value));
		}

		// Token: 0x060024C9 RID: 9417 RVA: 0x001C7BCA File Offset: 0x001C5DCA
		public static int GetMaxAcceptableFuyuFaith(GameData.Domains.Character.Character character)
		{
			int[] fuyuFaithLevel = GlobalConfig.FuyuFaithLevel;
			return fuyuFaithLevel[fuyuFaithLevel.Length - 1];
		}

		// Token: 0x060024CA RID: 9418 RVA: 0x001C7BD7 File Offset: 0x001C5DD7
		[Obsolete("使用StartSelectTeammate")]
		public static void SelectTeammateRequest(EventArgBox argBox, CharacterSelectFilter filter, bool includeTaiwu, Action onSelectFinish = null)
		{
			EventHelper.SelectTeammateRequestWithExclude(argBox, filter, includeTaiwu, onSelectFinish, -1);
		}

		// Token: 0x060024CB RID: 9419 RVA: 0x001C7BE4 File Offset: 0x001C5DE4
		[Obsolete("使用StartSelectTeammate")]
		public static void SelectTeammateRequestWithExclude(EventArgBox argBox, CharacterSelectFilter filter, bool includeTaiwu, Action onSelectFinish = null, int excludeCharId = -1)
		{
			EventSelectCharacterData data;
			bool flag = !argBox.Get<EventSelectCharacterData>("SelectCharacterData", out data);
			if (flag)
			{
				data = new EventSelectCharacterData();
				argBox.Set("SelectCharacterData", data);
			}
			bool flag2 = data.FilterList == null;
			if (flag2)
			{
				data.FilterList = new List<CharacterSelectFilter>();
			}
			bool flag3 = onSelectFinish != null;
			if (flag3)
			{
				data.OnSelectComplete = onSelectFinish;
			}
			CharacterSet teammateSet = DomainManager.Taiwu.GetGroupCharIds();
			filter.AvailableCharactersDisplayDataList = new List<CharacterDisplayData>();
			bool flag4 = filter.FilterTemplateId == -1;
			if (flag4)
			{
				foreach (int charId in teammateSet.GetCollection())
				{
					bool flag5 = charId == DomainManager.Taiwu.GetTaiwuCharId() && !includeTaiwu;
					if (!flag5)
					{
						bool flag6 = charId == excludeCharId;
						if (!flag6)
						{
							filter.AvailableCharactersDisplayDataList.Add(DomainManager.Character.GetCharacterDisplayData(charId));
						}
					}
				}
			}
			else
			{
				List<Predicate<GameData.Domains.Character.Character>> matchers = new List<Predicate<GameData.Domains.Character.Character>>();
				GameData.Domains.Character.Filters.CharacterFilterRules.ToPredicates(filter.FilterTemplateId, matchers, -1);
				foreach (int charId2 in teammateSet.GetCollection())
				{
					bool flag7 = charId2 == DomainManager.Taiwu.GetTaiwuCharId() && !includeTaiwu;
					if (!flag7)
					{
						bool flag8 = charId2 == excludeCharId;
						if (!flag8)
						{
							GameData.Domains.Character.Character character;
							bool flag9 = DomainManager.Character.TryGetElement_Objects(charId2, out character);
							if (flag9)
							{
								bool flag10 = CharacterMatchers.MatchAll(character, matchers);
								if (flag10)
								{
									filter.AvailableCharactersDisplayDataList.Add(DomainManager.Character.GetCharacterDisplayData(charId2));
								}
							}
						}
					}
				}
			}
			data.FilterList.Add(filter);
		}

		// Token: 0x060024CC RID: 9420 RVA: 0x001C7DCC File Offset: 0x001C5FCC
		[Obsolete("使用StartSelectCompletelyInfectedPrisoner")]
		public static void SelectCompletelyInfectedPrisoner(EventArgBox argBox, CharacterSelectFilter filter, Action onSelectFinish = null)
		{
			EventSelectCharacterData data;
			bool flag = !argBox.Get<EventSelectCharacterData>("SelectCharacterData", out data);
			if (flag)
			{
				data = new EventSelectCharacterData();
				argBox.Set("SelectCharacterData", data);
			}
			bool flag2 = data.FilterList == null;
			if (flag2)
			{
				data.FilterList = new List<CharacterSelectFilter>();
			}
			bool flag3 = onSelectFinish != null;
			if (flag3)
			{
				data.OnSelectComplete = onSelectFinish;
			}
			KidnappedCharacterList prisonerSet = DomainManager.Character.GetKidnappedCharacters(EventArgBox.TaiwuCharacterId);
			filter.AvailableCharactersDisplayDataList = new List<CharacterDisplayData>();
			bool flag4 = filter.FilterTemplateId == -1;
			if (flag4)
			{
				foreach (KidnappedCharacter prisoner in prisonerSet.GetCollection())
				{
					GameData.Domains.Character.Character character2;
					bool flag5 = DomainManager.Character.TryGetElement_Objects(prisoner.CharId, out character2);
					if (flag5)
					{
						filter.AvailableCharactersDisplayDataList.Add(DomainManager.Character.GetCharacterDisplayData(prisoner.CharId));
					}
				}
			}
			else
			{
				List<Predicate<GameData.Domains.Character.Character>> matchers = new List<Predicate<GameData.Domains.Character.Character>>();
				GameData.Domains.Character.Filters.CharacterFilterRules.ToPredicates(filter.FilterTemplateId, matchers, -1);
				foreach (KidnappedCharacter prisoner2 in prisonerSet.GetCollection())
				{
					GameData.Domains.Character.Character character;
					bool flag6 = DomainManager.Character.TryGetElement_Objects(prisoner2.CharId, out character);
					if (flag6)
					{
						bool flag7 = CharacterMatchers.MatchAll(character, matchers);
						if (flag7)
						{
							filter.AvailableCharactersDisplayDataList.Add(DomainManager.Character.GetCharacterDisplayData(prisoner2.CharId));
						}
					}
				}
			}
			data.FilterList.Add(filter);
		}

		// Token: 0x060024CD RID: 9421 RVA: 0x001C7F88 File Offset: 0x001C6188
		[Obsolete]
		public static void TaiwuSelectItemRequest(EventArgBox argBox, SelectItemFilter filter, Action onSelectFinish = null, bool includeEquipment = true)
		{
			EventSelectItemData data;
			bool flag = !argBox.Get<EventSelectItemData>("SelectItemInfo", out data);
			if (flag)
			{
				data = new EventSelectItemData();
				argBox.Set("SelectItemInfo", data);
			}
			bool flag2 = data.CanSelectItemList == null;
			if (flag2)
			{
				data.CanSelectItemList = new List<ItemDisplayData>();
			}
			bool flag3 = onSelectFinish != null;
			if (flag3)
			{
				data.OnSelectFinish = onSelectFinish;
			}
			bool flag4 = data.FilterList == null;
			if (flag4)
			{
				data.FilterList = new List<SelectItemFilter>();
			}
			data.FilterList.Add(filter);
			GameData.Domains.Character.Character taiwuChar = argBox.GetCharacter("RoleTaiwu");
			bool flag5 = filter.DisplayDataFilterId > 0;
			if (flag5)
			{
				List<ItemDisplayData> itemList = DomainManager.Character.GetAllInventoryItems(taiwuChar.GetId());
				if (includeEquipment)
				{
					List<ItemDisplayData> equipmentItems = DomainManager.Character.GetAllEquipmentItems(taiwuChar.GetId());
					itemList.AddRange(from d in equipmentItems
					where d.Key.IsValid()
					select d);
				}
				Predicate<ItemDisplayData> predicate = ItemDisplayDataFilters.GetFilter(filter.DisplayDataFilterId);
				bool flag6 = predicate != null;
				if (flag6)
				{
					using (List<ItemDisplayData>.Enumerator enumerator = itemList.GetEnumerator())
					{
						while (enumerator.MoveNext())
						{
							ItemDisplayData itemDisplayData = enumerator.Current;
							bool flag7 = predicate(itemDisplayData);
							if (flag7)
							{
								bool flag8 = data.CanSelectItemList.Exists((ItemDisplayData d) => d.Key.Equals(itemDisplayData.Key));
								if (!flag8)
								{
									data.CanSelectItemList.Add(itemDisplayData);
								}
							}
						}
					}
				}
			}
			else
			{
				List<ValueTuple<ItemKey, int>> items = new List<ValueTuple<ItemKey, int>>();
				CharacterItemFilterWrappers.FindByItemFilterRule(taiwuChar, filter.FilterTemplateId, items, true, includeEquipment);
				List<ItemDisplayData> filterItems = CharacterDomain.GetItemDisplayData(taiwuChar.GetId(), items, ItemSourceType.Inventory);
				using (List<ItemDisplayData>.Enumerator enumerator2 = filterItems.GetEnumerator())
				{
					while (enumerator2.MoveNext())
					{
						ItemDisplayData itemDisplayData = enumerator2.Current;
						bool flag9 = data.CanSelectItemList.Exists((ItemDisplayData d) => d.Key.Equals(itemDisplayData.Key));
						if (!flag9)
						{
							data.CanSelectItemList.Add(itemDisplayData);
						}
					}
				}
			}
		}

		// Token: 0x060024CE RID: 9422 RVA: 0x001C81E4 File Offset: 0x001C63E4
		[Obsolete("Use EventHelper.ChangeMainStoryLineProgress instead.")]
		public static void GameOver()
		{
			EventHelper.ChangeMainStoryLineProgress(99);
		}

		// Token: 0x060024CF RID: 9423 RVA: 0x001C81F0 File Offset: 0x001C63F0
		public static sbyte GetTaiwuTotalReadingProgress(int bookItemId)
		{
			return DomainManager.Taiwu.GetTotalReadingProgress(bookItemId);
		}

		// Token: 0x060024D0 RID: 9424 RVA: 0x001C8210 File Offset: 0x001C6410
		public static bool GetIsDreamBack()
		{
			return DomainManager.Extra.GetIsDreamBack();
		}

		// Token: 0x060024D1 RID: 9425 RVA: 0x001C822C File Offset: 0x001C642C
		public static void DreamBackSetAudioSetting(bool isOn)
		{
			GameDataBridge.AddDisplayEvent<bool>(DisplayEventType.DreamBackSetAudioSetting, isOn);
		}

		// Token: 0x060024D2 RID: 9426 RVA: 0x001C8238 File Offset: 0x001C6438
		public static void TriggerTaiwuCrossArchive(bool isCross, sbyte worldIndex = -1)
		{
			if (isCross)
			{
				Tester.Assert(worldIndex >= 0, "Wrong worldIndex");
			}
			GameDataBridge.AddDisplayEvent<bool, sbyte>(DisplayEventType.TaiwuCrossArchive, isCross, worldIndex);
			EventHelper.DreamBackSetAudioSetting(false);
		}

		// Token: 0x060024D3 RID: 9427 RVA: 0x001C8270 File Offset: 0x001C6470
		public static void CreateFuyuHiltGuiderOnMap()
		{
			GameData.Domains.Character.Character fuyuHilt = EventHelper.GetOrCreateFixedCharacterByTemplateId(684);
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			EventHelper.MoveFixedCharacter(fuyuHilt, taiwu.GetLocation());
			List<MapBlockData> mapBlockDatas = ObjectPool<List<MapBlockData>>.Instance.Get();
			mapBlockDatas.Clear();
			DomainManager.Map.GetLocationByDistance(taiwu.GetLocation(), 2, 2, ref mapBlockDatas);
			EventHelper.TriggerExtraTask(43, 260);
			bool flag = mapBlockDatas.Count > 0;
			if (flag)
			{
				DataContext context = EventHelper.Domain.MainThreadDataContext;
				Location taiwuVillageLocation = DomainManager.Taiwu.GetTaiwuVillageLocation();
				MapBlockData taiwuVillageBlockData = DomainManager.Map.GetBlock(taiwuVillageLocation);
				ByteCoordinate taiwuVillageBlockPos = taiwuVillageBlockData.GetBlockPos();
				byte minDistance = byte.MaxValue;
				MapBlockData minMapBlockData = new MapBlockData();
				foreach (MapBlockData mapBlockData in mapBlockDatas)
				{
					byte distance = mapBlockData.GetManhattanDistanceToPos(taiwuVillageBlockPos.X, taiwuVillageBlockPos.Y);
					bool flag2 = distance < minDistance;
					if (flag2)
					{
						minDistance = distance;
						minMapBlockData = mapBlockData;
					}
				}
				bool flag3 = !minMapBlockData.Visible;
				if (flag3)
				{
					minMapBlockData.SetVisible(true, context);
				}
				EventHelper.SaveGlobalArg<bool>("ConchShip_PresetKey_FuyuHiltGuiding", true);
			}
		}

		// Token: 0x060024D4 RID: 9428 RVA: 0x001C83B8 File Offset: 0x001C65B8
		public static void TriggerFuyuHiltGuiding(short moveCount, string nextEventGuid = "", EventArgBox argBox = null)
		{
			bool flag = !string.IsNullOrEmpty(nextEventGuid);
			if (flag)
			{
				EventHelper.AddEventInListenWithActionName(nextEventGuid, argBox, "FuyuMoveFinish");
			}
			int fuyuHiltId = EventHelper.GetFixedCharacterIdByTemplateId(684);
			GameData.Domains.Character.Character fuyuHilt = DomainManager.Character.GetElement_Objects(fuyuHiltId);
			Location fuyuLocation = fuyuHilt.GetLocation();
			Location taiwuVillageLocation = DomainManager.Taiwu.GetTaiwuVillageLocation();
			List<short> movePath = CharacterDomain.CalcFuyuHiltMovementPath(fuyuLocation, taiwuVillageLocation, moveCount);
			GameDataBridge.AddDisplayEvent<List<short>>(DisplayEventType.FuyuHiltMove, movePath);
		}

		// Token: 0x060024D5 RID: 9429 RVA: 0x001C8420 File Offset: 0x001C6620
		public static void FinishFuyuHiltGuiding()
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			DomainManager.Map.SetCrossArchiveLockMoveTime(false, context);
			EventHelper.TaiwuCrossArchiveCureInjuriesAndPoisoned();
			EventHelper.SaveGlobalArg<bool>("ConchShip_PresetKey_FuyuHiltGuiding", false);
			EventHelper.FinishExtraTask(43, 260);
			GameDataBridge.AddDisplayEvent(DisplayEventType.FuyuHiltGuidingFinish);
			EventHelper.DreamBackSetAudioSetting(true);
		}

		// Token: 0x060024D6 RID: 9430 RVA: 0x001C8474 File Offset: 0x001C6674
		public static void HideOverwrittenTaiwuOnMap()
		{
			GameData.Domains.Character.Character character = EventHelper.GetOrCreateFixedCharacterByTemplateId(685);
			EventHelper.RemoveNonIntelligentCharacter(character);
		}

		// Token: 0x060024D7 RID: 9431 RVA: 0x001C8494 File Offset: 0x001C6694
		public static string GetCrossArchiveSectName()
		{
			sbyte orgTemplateId = EventHelper.GetStateSectOrgTemplateId(EventHelper.GetStateIdByAreaId(EventArgBox.TaiwuVillageAreaId));
			return Organization.Instance[orgTemplateId].Name;
		}

		// Token: 0x060024D8 RID: 9432 RVA: 0x001C84C8 File Offset: 0x001C66C8
		public static string GetCrossArchiveTaiwuAgeGenderName()
		{
			return "<Language Key=" + EventHelper.GetCrossArchiveTaiwuAgeGenderNameOnlyKey() + "/>";
		}

		// Token: 0x060024D9 RID: 9433 RVA: 0x001C84F0 File Offset: 0x001C66F0
		public static string GetCrossArchiveTaiwuAgeGenderNameOnlyKey()
		{
			AvatarRelatedData avatarRelatedData = DomainManager.Extra.GetOverwrittenTaiwuAvatarRelatedData();
			NameRelatedData nameRelatedData = DomainManager.Extra.GetOverwrittenTaiwuName();
			sbyte ageLevel = 0;
			bool flag = avatarRelatedData.DisplayAge >= 16;
			if (flag)
			{
				ageLevel = 1;
			}
			bool flag2 = (int)avatarRelatedData.DisplayAge >= GlobalConfig.Instance.AgeShowWrinkle2;
			if (flag2)
			{
				ageLevel = 2;
			}
			return TaiwuEventTagHandler._taiwuCrossArchiveAgeGender[(int)ageLevel][(int)nameRelatedData.Gender];
		}

		// Token: 0x060024DA RID: 9434 RVA: 0x001C8560 File Offset: 0x001C6760
		public static void TaiwuPlaceCrossArchiveInventory()
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			Location taiwuLocation = DomainManager.Taiwu.GetTaiwu().GetLocation();
			DomainManager.Map.CreateDreamBackLocation(context, taiwuLocation, EDreamBackLocationType.Inventory);
		}

		// Token: 0x060024DB RID: 9435 RVA: 0x001C8598 File Offset: 0x001C6798
		public static void TaiwuPlaceCrossArchiveLifeSkill()
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			Location taiwuLocation = DomainManager.Taiwu.GetTaiwu().GetLocation();
			DomainManager.Map.CreateDreamBackLocation(context, taiwuLocation, EDreamBackLocationType.LifeSkill);
		}

		// Token: 0x060024DC RID: 9436 RVA: 0x001C85D0 File Offset: 0x001C67D0
		public static void TaiwuPlaceCrossArchiveCombatSkill()
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			Location taiwuLocation = DomainManager.Taiwu.GetTaiwu().GetLocation();
			DomainManager.Map.CreateDreamBackLocation(context, taiwuLocation, EDreamBackLocationType.CombatSkill);
		}

		// Token: 0x060024DD RID: 9437 RVA: 0x001C8608 File Offset: 0x001C6808
		public static void TaiwuFindMemoryAddInjured()
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			EventHelper.ChangeRoleBodyPartInjuryByLevel(taiwu, false, 3, 5);
		}

		// Token: 0x060024DE RID: 9438 RVA: 0x001C862C File Offset: 0x001C682C
		public static void TaiwuFindMemoryAddPoisoned()
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			sbyte poisonType = (sbyte)context.Random.Next(0, 4);
			for (sbyte type = poisonType; type < poisonType + 3; type += 1)
			{
				EventHelper.ChangePoisonByType(taiwu, type, 500, 1);
			}
		}

		// Token: 0x060024DF RID: 9439 RVA: 0x001C8684 File Offset: 0x001C6884
		public static void TaiwuFindMemoryAddDisorderOfQi()
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			EventHelper.ChangeRoleDisorderOfQi(taiwu, 2000);
		}

		// Token: 0x060024E0 RID: 9440 RVA: 0x001C86AC File Offset: 0x001C68AC
		public static void UnpackUnhandledCrossArchiveGameData(sbyte stateType, bool inheritData = true, bool overwriteEquipments = false)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			DomainManager.Extra.UnpackUnhandledCrossArchiveGameData(context, stateType, inheritData, overwriteEquipments);
			bool flag = stateType == 4;
			if (flag)
			{
				EventArgBox argBox = EventHelper.GetFiveLoongEventArgBox();
				argBox.Set("ConchShip_TaiwuCrossArchiveInheritBuilding", inheritData);
				EventHelper.SetFiveLoongEventArgBox(argBox);
			}
		}

		// Token: 0x060024E1 RID: 9441 RVA: 0x001C86F8 File Offset: 0x001C68F8
		public static bool IsDreamBackStateUnlocked(sbyte stateType)
		{
			return DomainManager.Extra.IsDreamBackStateUnlocked(stateType);
		}

		// Token: 0x060024E2 RID: 9442 RVA: 0x001C8718 File Offset: 0x001C6918
		public static bool HaveConflictCombatSkill()
		{
			return DomainManager.Extra.HaveConflictCombatSkill();
		}

		// Token: 0x060024E3 RID: 9443 RVA: 0x001C8734 File Offset: 0x001C6934
		public static AvatarRelatedData GetOverwrittenTaiwuAvatarRelatedData()
		{
			return DomainManager.Extra.GetOverwrittenTaiwuAvatarRelatedData();
		}

		// Token: 0x060024E4 RID: 9444 RVA: 0x001C8750 File Offset: 0x001C6950
		public static void SetOverwrittenTaiwuAvatarRelatedData(EventArgBox argBox)
		{
			int characterId = EventHelper.CreateNonIntelligentCharacter(241);
			argBox.Set("OverwrittenTaiwu", characterId);
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			GameData.Domains.Character.Character character = EventHelper.GetCharacterById(characterId);
			AvatarRelatedData avatarRelatedData = EventHelper.GetOverwrittenTaiwuAvatarRelatedData();
			character.SetAvatar(avatarRelatedData.AvatarData, context);
			argBox.Set("TargetCharacterDisplayingClothId", avatarRelatedData.ClothingDisplayId);
			argBox.Set("TargetCharacterDisplayAge", avatarRelatedData.DisplayAge);
			string ageName = EventHelper.GetCrossArchiveTaiwuAgeGenderNameOnlyKey();
			EventHelper.SetRightRoleNameKey(ageName);
		}

		// Token: 0x060024E5 RID: 9445 RVA: 0x001C87D0 File Offset: 0x001C69D0
		public static void SaveCrossArchiveTaiwuAvatar()
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			EventHelper.SaveGlobalArg<AvatarRelatedData>("ConchShip_PresetKey_TaiwuCrossArchiveAvatarData", new AvatarRelatedData
			{
				AvatarData = taiwu.GetAvatar(),
				ClothingDisplayId = taiwu.GetClothingDisplayId(),
				DisplayAge = taiwu.GetCurrAge()
			});
			EventHelper.SaveGlobalArg<string>("ConchShip_PresetKey_TaiwuCrossArchiveDisplayName", EventHelper.GetCharacterDisplayName(taiwu));
		}

		// Token: 0x060024E6 RID: 9446 RVA: 0x001C8830 File Offset: 0x001C6A30
		public static void SetCrossArchiveTaiwuAvatar(EventArgBox argBox)
		{
			int characterId = EventHelper.CreateNonIntelligentCharacter(241);
			argBox.Set("CrossArchiveTaiwu", characterId);
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			GameData.Domains.Character.Character character = EventHelper.GetCharacterById(characterId);
			EventArgBox globalArgBox = EventHelper.GetGlobalArgBox();
			AvatarRelatedData avatarRelatedData;
			globalArgBox.Get<AvatarRelatedData>("ConchShip_PresetKey_TaiwuCrossArchiveAvatarData", out avatarRelatedData);
			character.SetAvatar(avatarRelatedData.AvatarData, context);
			argBox.Set("TargetCharacterDisplayingClothId", avatarRelatedData.ClothingDisplayId);
			argBox.Set("TargetCharacterDisplayAge", avatarRelatedData.DisplayAge);
			string displayName = globalArgBox.GetString("ConchShip_PresetKey_TaiwuCrossArchiveDisplayName");
			EventHelper.SetRightRoleNameKey(displayName);
		}

		// Token: 0x060024E7 RID: 9447 RVA: 0x001C88C8 File Offset: 0x001C6AC8
		public static void TaiwuCrossArchiveCureInjuriesAndPoisoned()
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			Injuries injuries = default(Injuries);
			injuries.Initialize();
			PoisonInts poisonInts = default(PoisonInts);
			poisonInts.Initialize();
			foreach (int characterId in DomainManager.Taiwu.GetGroupCharIds().GetCollection())
			{
				GameData.Domains.Character.Character character = DomainManager.Character.GetElement_Objects(characterId);
				character.SetInjuries(injuries, context);
				character.SetPoisoned(ref poisonInts, context);
				ItemKey carrier = character.GetEquipment()[11];
				bool flag = carrier.IsValid();
				if (flag)
				{
					ItemBase baseItem = DomainManager.Item.GetBaseItem(carrier);
					baseItem.SetCurrDurability(baseItem.GetMaxDurability(), context);
				}
			}
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			KidnappedCharacterList kidnapCharacters = DomainManager.Character.GetSomeoneKidnapCharacters(taiwu.GetId());
			bool flag2 = kidnapCharacters != null;
			if (flag2)
			{
				foreach (KidnappedCharacter kidnappedCharacter in kidnapCharacters.GetCollection())
				{
					GameData.Domains.Character.Character character2 = DomainManager.Character.GetElement_Objects(kidnappedCharacter.CharId);
					character2.SetInjuries(injuries, context);
					character2.SetPoisoned(ref poisonInts, context);
					ItemKey carrier2 = character2.GetEquipment()[11];
					bool flag3 = carrier2.IsValid();
					if (flag3)
					{
						ItemBase baseItem2 = DomainManager.Item.GetBaseItem(carrier2);
						baseItem2.SetCurrDurability(baseItem2.GetMaxDurability(), context);
					}
				}
			}
		}

		// Token: 0x060024E8 RID: 9448 RVA: 0x001C8A88 File Offset: 0x001C6C88
		public static void CureTaiwuInjuriesAndPoisoned()
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			Injuries injuries = default(Injuries);
			injuries.Initialize();
			PoisonInts poisonInts = default(PoisonInts);
			poisonInts.Initialize();
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			taiwu.SetInjuries(injuries, context);
			taiwu.SetPoisoned(ref poisonInts, context);
		}

		// Token: 0x060024E9 RID: 9449 RVA: 0x001C8AE0 File Offset: 0x001C6CE0
		public static bool IsDreamBack()
		{
			return DomainManager.Extra.IsDreamBack();
		}

		// Token: 0x060024EA RID: 9450 RVA: 0x001C8AFC File Offset: 0x001C6CFC
		public static void ApplyAndResetLegacy()
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			DomainManager.Taiwu.ApplyAndResetLegacy(context, DomainManager.Taiwu.GetTaiwu(), true);
		}

		// Token: 0x060024EB RID: 9451 RVA: 0x001C8B2C File Offset: 0x001C6D2C
		public static void ChangeAuthorityToLegacyPoint()
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			taiwu.ChangeResource(context, 7, DomainManager.Taiwu.GetLegacyPoint() / 4);
		}

		// Token: 0x060024EC RID: 9452 RVA: 0x001C8B68 File Offset: 0x001C6D68
		public static bool TryGetDreamBackLifeRecordByRelatedCharId(int charId, out short templateId)
		{
			return DomainManager.Extra.TryGetDreamBackLifeRecordByRelatedCharId(charId, out templateId);
		}

		// Token: 0x060024ED RID: 9453 RVA: 0x001C8B88 File Offset: 0x001C6D88
		public static bool IsDejaVuEventCharacter(int charId)
		{
			return DomainManager.Extra.GetDejaVuEventCharacters().Contains(charId);
		}

		// Token: 0x060024EE RID: 9454 RVA: 0x001C8BB0 File Offset: 0x001C6DB0
		public static void AddDejaVuEventCharacter(int charId)
		{
			CharacterSet characterSet = DomainManager.Extra.GetDejaVuEventCharacters();
			bool condition = !characterSet.Contains(charId);
			DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(45, 1);
			defaultInterpolatedStringHandler.AppendLiteral("DejaVuEventCharacters already contains charId");
			defaultInterpolatedStringHandler.AppendFormatted<int>(charId);
			Tester.Assert(condition, defaultInterpolatedStringHandler.ToStringAndClear());
			characterSet.Add(charId);
			DomainManager.Extra.SetDejaVuEventCharacters(characterSet, EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x060024EF RID: 9455 RVA: 0x001C8C20 File Offset: 0x001C6E20
		public static bool IsPastRelationship(int charId)
		{
			ValueTuple<ushort, ushort> relationType = DomainManager.Extra.GetDreamBackRelationTypeWithTaiwu(charId);
			return relationType.Item1 > 0;
		}

		// Token: 0x060024F0 RID: 9456 RVA: 0x001C8C48 File Offset: 0x001C6E48
		public static bool IsPastTaiwu(int charId)
		{
			return DomainManager.Extra.IsDreamBackPreviousTaiwu(charId);
		}

		// Token: 0x060024F1 RID: 9457 RVA: 0x001C8C68 File Offset: 0x001C6E68
		public static bool IsPastLastTaiwu(int charId)
		{
			return charId == DomainManager.Extra.GetDreamBackTaiwuCharId();
		}

		// Token: 0x060024F2 RID: 9458 RVA: 0x001C8C88 File Offset: 0x001C6E88
		public static void AddTargetJoinGroup(int charId)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			DomainManager.Taiwu.JoinGroup(context, charId, true);
		}

		// Token: 0x060024F3 RID: 9459 RVA: 0x001C8CB0 File Offset: 0x001C6EB0
		public static sbyte GetTargetBehaviorType(int charId)
		{
			GameData.Domains.Character.Character character = DomainManager.Character.GetElement_Objects(charId);
			return character.GetBehaviorType();
		}

		// Token: 0x060024F4 RID: 9460 RVA: 0x001C8CD4 File Offset: 0x001C6ED4
		public static void ChangePastTaiwuToCurrentTaiwuFavorability(int charId)
		{
			GameData.Domains.Character.Character character = DomainManager.Character.GetElement_Objects(charId);
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			short currentFavorability = EventHelper.GetFavorability(character, taiwu);
			bool flag = currentFavorability > 30000;
			if (flag)
			{
				short difference = currentFavorability - 30000;
				EventHelper.ChangeFavorabilityOptional(character, taiwu, -difference, 4);
			}
			else
			{
				short difference = 30000 - currentFavorability;
				EventHelper.ChangeFavorabilityOptional(character, taiwu, difference, 4);
			}
		}

		// Token: 0x060024F5 RID: 9461 RVA: 0x001C8D40 File Offset: 0x001C6F40
		public static bool IsPastLikeEachOther(int charId)
		{
			ValueTuple<ushort, ushort> relationType = DomainManager.Extra.GetDreamBackRelationTypeWithTaiwu(charId);
			bool likeTaiwu = RelationType.HasRelation(relationType.Item1, 16384);
			bool likeTarget = RelationType.HasRelation(relationType.Item2, 16384);
			return likeTaiwu && likeTarget;
		}

		// Token: 0x060024F6 RID: 9462 RVA: 0x001C8D84 File Offset: 0x001C6F84
		public static bool IsTargetCanGetMarried(int charId)
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			bool marriage = DomainManager.Character.OrgAndMonkTypeAllowMarriage(charId);
			bool adult = EventHelper.IsTargetAdult(charId);
			bool like = EventHelper.IsTargetLikeTaiwuGender(charId);
			int characterSpouse = DomainManager.Character.GetAliveSpouse(charId);
			int taiwuSpouse = DomainManager.Character.GetAliveSpouse(taiwu.GetId());
			return marriage && adult && like && characterSpouse < 0 && taiwuSpouse < 0;
		}

		// Token: 0x060024F7 RID: 9463 RVA: 0x001C8DF0 File Offset: 0x001C6FF0
		public static ushort GetPastSelfRelationToTaiwu(int charId)
		{
			ValueTuple<ushort, ushort> relationType = DomainManager.Extra.GetDreamBackRelationTypeWithTaiwu(charId);
			return relationType.Item1;
		}

		// Token: 0x060024F8 RID: 9464 RVA: 0x001C8E14 File Offset: 0x001C7014
		public static short GetTargetPastSelfTaiwuFavorabilityLevel(int charId)
		{
			return 0;
		}

		// Token: 0x060024F9 RID: 9465 RVA: 0x001C8E28 File Offset: 0x001C7028
		public static bool IsTargetAdult(int charId)
		{
			GameData.Domains.Character.Character character = DomainManager.Character.GetElement_Objects(charId);
			return character.GetAgeGroup() == 2;
		}

		// Token: 0x060024FA RID: 9466 RVA: 0x001C8E50 File Offset: 0x001C7050
		public static bool IsTargetAgeOlderThanTaiwu(int charId)
		{
			GameData.Domains.Character.Character character = DomainManager.Character.GetElement_Objects(charId);
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			return character.GetActualAge() > taiwu.GetActualAge();
		}

		// Token: 0x060024FB RID: 9467 RVA: 0x001C8E88 File Offset: 0x001C7088
		public static bool IsTargetLikeTaiwuGender(int charId)
		{
			GameData.Domains.Character.Character character = DomainManager.Character.GetElement_Objects(charId);
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			return character.GetBisexual() ? (character.GetGender() == taiwu.GetGender()) : (character.GetGender() != taiwu.GetGender());
		}

		// Token: 0x060024FC RID: 9468 RVA: 0x001C8EDC File Offset: 0x001C70DC
		public static short GetTargetPastSelfTaiwuPriorityRelation(int charId)
		{
			ushort relation = EventHelper.GetPastSelfRelationToTaiwu(charId);
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			Genealogy genealogy = DomainManager.Character.GetGenealogy(taiwu.GetId());
			bool flag = RelationType.HasRelation(relation, 32768);
			short result;
			if (flag)
			{
				result = 9;
			}
			else
			{
				bool flag2 = RelationType.HasRelation(relation, 73);
				if (flag2)
				{
					result = 0;
				}
				else
				{
					bool flag3 = RelationType.HasRelation(relation, 1024);
					if (flag3)
					{
						result = 1;
					}
					else
					{
						bool flag4 = RelationType.HasRelation(relation, 146);
						if (flag4)
						{
							result = 2;
						}
						else
						{
							bool flag5 = RelationType.HasRelation(relation, 292);
							if (flag5)
							{
								result = 3;
							}
							else
							{
								bool flag6 = RelationType.HasRelation(relation, 512);
								if (flag6)
								{
									result = 4;
								}
								else
								{
									bool flag7 = RelationType.HasRelation(relation, 16384);
									if (flag7)
									{
										result = 5;
									}
									else
									{
										bool flag8 = RelationType.HasRelation(relation, 8192);
										if (flag8)
										{
											result = 6;
										}
										else
										{
											bool flag9 = charId == genealogy.GrandfatherId || charId == genealogy.GrandmotherId || charId == genealogy.MaternalGrandfatherId || charId == genealogy.MaternalGrandmotherId;
											if (flag9)
											{
												result = 7;
											}
											else
											{
												bool flag10 = DomainManager.Extra.IsCharacterDreamBackTaiwuGrandchild(charId);
												if (flag10)
												{
													result = 8;
												}
												else
												{
													result = -1;
												}
											}
										}
									}
								}
							}
						}
					}
				}
			}
			return result;
		}

		// Token: 0x060024FD RID: 9469 RVA: 0x001C9021 File Offset: 0x001C7221
		public static bool HasTravelingEventBeenTriggered(short templateId)
		{
			return DomainManager.Extra.HasTravelingEventBeenTriggered(templateId);
		}

		// Token: 0x060024FE RID: 9470 RVA: 0x001C902E File Offset: 0x001C722E
		public static int GetTravelingEventTypeTriggerCount(ETravelingEventType type)
		{
			return DomainManager.Extra.GetTravelingEventTypeTriggerCount(type);
		}

		// Token: 0x060024FF RID: 9471 RVA: 0x001C903B File Offset: 0x001C723B
		public static void SetOnHandlingTravelingEventBlock(bool blockOperation)
		{
			DomainManager.Map.SetOnHandlingTravelingEventBlock(blockOperation, EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x06002500 RID: 9472 RVA: 0x001C9054 File Offset: 0x001C7254
		public static void TreasureEnterBattle(string afterEvent, EventArgBox argBox)
		{
			GameDataBridge.AddDisplayEvent(DisplayEventType.FindTreasureMaterial);
			bool flag = !string.IsNullOrEmpty(afterEvent);
			if (flag)
			{
				EventHelper.AddEventInListenWithActionName(afterEvent, argBox, "FindTreasureMaterial");
			}
		}

		// Token: 0x06002501 RID: 9473 RVA: 0x001C9084 File Offset: 0x001C7284
		public static void GenerateTreasureLifeRecordToTaiwu(TreasureFindResult result, bool win)
		{
			int charId = DomainManager.Taiwu.GetTaiwuCharId();
			DomainManager.Extra.FindTreasureGenerateLifeRecord(charId, result, !win);
		}

		// Token: 0x06002502 RID: 9474 RVA: 0x001C90B0 File Offset: 0x001C72B0
		public static ItemKey ApplyTreasureResultToTaiwu(TreasureFindResult result)
		{
			List<ItemKey> addedItemKeys = ObjectPool<List<ItemKey>>.Instance.Get();
			int charId = DomainManager.Taiwu.GetTaiwuCharId();
			DomainManager.Extra.FindTreasureApplyResult(EventHelper.Domain.MainThreadDataContext, charId, result, addedItemKeys);
			ItemKey itemKey = ItemKey.Invalid;
			foreach (ItemKey addedItemKey in addedItemKeys)
			{
				bool flag = addedItemKey.ItemType == 12 && addedItemKey.TemplateId == result.MaterialTemplateId;
				if (flag)
				{
					itemKey = addedItemKey;
				}
			}
			ObjectPool<List<ItemKey>>.Instance.Return(addedItemKeys);
			return itemKey;
		}

		// Token: 0x06002503 RID: 9475 RVA: 0x001C9168 File Offset: 0x001C7368
		[Obsolete("not available method anymore")]
		public static void ProgressTutorialShowDialog(string dialogTitle = "", string dialogContent = "", string confirmEvent = "", EventArgBox argBox = null)
		{
		}

		// Token: 0x06002504 RID: 9476 RVA: 0x001C916B File Offset: 0x001C736B
		public static void BackToTutorialChapterMenu(int chapter)
		{
			GameDataBridge.AddDisplayEvent<int>(DisplayEventType.BackToTutorialChapterMenu, chapter);
			DomainManager.TutorialChapter.SetInGuiding(false, EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x06002505 RID: 9477 RVA: 0x001C918D File Offset: 0x001C738D
		public static void SetMoveEnable(bool enable)
		{
			DomainManager.TutorialChapter.SetCanMove(enable, EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x06002506 RID: 9478 RVA: 0x001C91A6 File Offset: 0x001C73A6
		public static void SetOpenCharacterMenuEnable(bool enable)
		{
			DomainManager.TutorialChapter.SetCanOpenCharacterMenu(enable, EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x06002507 RID: 9479 RVA: 0x001C91BF File Offset: 0x001C73BF
		public static void PlayGuideVideo(string videoName)
		{
			DomainManager.TutorialChapter.SetGuidVideoName(videoName, EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x06002508 RID: 9480 RVA: 0x001C91D8 File Offset: 0x001C73D8
		public static void SetAdvanceMonthEnable(bool enable)
		{
			DomainManager.TutorialChapter.SetCanAdvanceMonth(enable, EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x06002509 RID: 9481 RVA: 0x001C91F4 File Offset: 0x001C73F4
		public static void SetTutorialForceNextCoordinate(byte x, byte y)
		{
			bool flag = x == byte.MaxValue && y == byte.MaxValue;
			if (flag)
			{
				DomainManager.TutorialChapter.SetNextForceLocation(Location.Invalid, EventHelper.Domain.MainThreadDataContext);
			}
			else
			{
				ByteCoordinate coordinate = new ByteCoordinate(x, y);
				short blockId = ByteCoordinate.CoordinateToIndex(coordinate, DomainManager.TutorialChapter.TutorialAreaSize);
				DomainManager.TutorialChapter.SetNextForceLocation(new Location(136, blockId), EventHelper.Domain.MainThreadDataContext);
			}
		}

		// Token: 0x0600250A RID: 9482 RVA: 0x001C9270 File Offset: 0x001C7470
		public static ByteCoordinate GetTutorialCoordinateFromLocation(Location location)
		{
			return ByteCoordinate.IndexToCoordinate(location.BlockId, DomainManager.TutorialChapter.TutorialAreaSize);
		}

		// Token: 0x0600250B RID: 9483 RVA: 0x001C9298 File Offset: 0x001C7498
		public static Location GetTutorialForceNextLocation()
		{
			return DomainManager.TutorialChapter.GetNextForceLocation();
		}

		// Token: 0x0600250C RID: 9484 RVA: 0x001C92B4 File Offset: 0x001C74B4
		public static void ActiveChapter7NeiliAllocateFlag()
		{
			DomainManager.TutorialChapter.SetNeiliAllocateFitChapter7(true, EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x0600250D RID: 9485 RVA: 0x001C92CD File Offset: 0x001C74CD
		public static void SetHuanxinDying(bool dying)
		{
			DomainManager.TutorialChapter.SetHuanxinDying(dying, EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x0600250E RID: 9486 RVA: 0x001C92E6 File Offset: 0x001C74E6
		public static void SetHuanxinSurprised(bool surprised)
		{
			DomainManager.TutorialChapter.SetHuanxinSurprised(surprised, EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x0600250F RID: 9487 RVA: 0x001C92FF File Offset: 0x001C74FF
		public static void SetCanShowEnterIndustry(bool canShowEnterIndustry)
		{
			DomainManager.TutorialChapter.SetCanShowEnterIndustry(canShowEnterIndustry, EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x06002510 RID: 9488 RVA: 0x001C9318 File Offset: 0x001C7518
		public static bool IsLocationMatchTutorialCoordinate(Location location, byte x, byte y)
		{
			ByteCoordinate coordinate = new ByteCoordinate(x, y);
			short blockId = ByteCoordinate.CoordinateToIndex(coordinate, DomainManager.TutorialChapter.TutorialAreaSize);
			return location.Equals(new Location(136, blockId));
		}

		// Token: 0x06002511 RID: 9489 RVA: 0x001C9358 File Offset: 0x001C7558
		public static Location GetTutorialLocationByCoordinate(byte x, byte y)
		{
			ByteCoordinate coordinate = new ByteCoordinate(x, y);
			short blockId = ByteCoordinate.CoordinateToIndex(coordinate, DomainManager.TutorialChapter.TutorialAreaSize);
			return new Location(136, blockId);
		}

		// Token: 0x06002512 RID: 9490 RVA: 0x001C9390 File Offset: 0x001C7590
		public static void RemoveCenterBambooHouseOfTutorialArea()
		{
			Location location = EventHelper.GetTutorialLocationByCoordinate(9, 9);
			List<BuildingBlockData> buildingList = DomainManager.Building.GetBuildingBlockList(location);
			foreach (BuildingBlockData buildingData in buildingList)
			{
				bool flag = buildingData.TemplateId == 257 || buildingData.TemplateId == 258;
				if (flag)
				{
					BuildingBlockKey buildingBlockKey = new BuildingBlockKey(location.AreaId, location.BlockId, buildingData.BlockIndex);
					DomainManager.Building.ResetAllChildrenBlocks(EventHelper.Domain.MainThreadDataContext, buildingBlockKey, 0, -1);
					break;
				}
			}
		}

		// Token: 0x06002513 RID: 9491 RVA: 0x001C944C File Offset: 0x001C764C
		public static bool TutorialAreaHasCompletedBambooHouse()
		{
			Location location = EventHelper.GetTutorialLocationByCoordinate(9, 9);
			List<BuildingBlockData> buildingList = DomainManager.Building.GetBuildingBlockList(location);
			foreach (BuildingBlockData buildingData in buildingList)
			{
				bool flag = buildingData.TemplateId == 257 || buildingData.TemplateId == 258;
				if (flag)
				{
					bool flag2 = buildingData.CanUse();
					if (flag2)
					{
						return true;
					}
					return false;
				}
			}
			return false;
		}

		// Token: 0x06002514 RID: 9492 RVA: 0x001C94F0 File Offset: 0x001C76F0
		public static void SetWorldResourceCollectionStatus(bool isOn)
		{
			if (isOn)
			{
				DomainManager.World.SetWorldFunctionsStatus(EventHelper.Domain.MainThreadDataContext, 5);
			}
			else
			{
				DomainManager.World.ResetWorldFunctionsStatus(EventHelper.Domain.MainThreadDataContext, 5);
			}
		}

		// Token: 0x06002515 RID: 9493 RVA: 0x001C9531 File Offset: 0x001C7731
		public static void StartListenXuXianGongCombatDistance(string listenerEventGuid, EventArgBox argBox)
		{
			EventHelper.Domain.SetListenerWithActionName(listenerEventGuid, argBox, "CombatDistanceWithEnemyChanged");
			Events.RegisterHandler_DistanceChanged(new Events.OnDistanceChanged(EventHelper.OnCombatWithXuXianGongDistanceChange));
			DomainManager.Combat.ForbidNormalAttackInTutorial(DomainManager.Taiwu.GetTaiwuCharId());
		}

		// Token: 0x06002516 RID: 9494 RVA: 0x001C9570 File Offset: 0x001C7770
		private static void OnCombatWithXuXianGongDistanceChange(DataContext context, CombatCharacter mover, short distanceOffset, bool isMove, bool isForced)
		{
			bool flag = isMove && !isForced && distanceOffset < 0;
			if (flag)
			{
				short distance = DomainManager.Combat.GetCurrentDistance();
				bool flag2 = distance == 40;
				if (flag2)
				{
					Events.UnRegisterHandler_DistanceChanged(new Events.OnDistanceChanged(EventHelper.OnCombatWithXuXianGongDistanceChange));
					EventHelper.Domain.TriggerListener("CombatDistanceWithEnemyChanged", true);
					DomainManager.Combat.ClearMobilityAndForbidRecover(context, mover.GetId());
					DomainManager.Combat.PermitNormalAttackInTutorial(DomainManager.Taiwu.GetTaiwuCharId());
				}
			}
		}

		// Token: 0x06002517 RID: 9495 RVA: 0x001C95F4 File Offset: 0x001C77F4
		public static void StartListenHuanXinMiss(string listenerEventGuid, EventArgBox argBox)
		{
			DomainManager.Combat.SetAttackForceMiss(DomainManager.Taiwu.GetTaiwuCharId(), 3);
			EventHelper.Domain.SetListenerWithActionName(listenerEventGuid, argBox, "CombatNormalAttackEnd");
			DomainManager.TutorialChapter.Counter = 0;
			DomainManager.TutorialChapter.CounterTarget = 3;
			Events.RegisterHandler_NormalAttackAllEnd(new Events.OnNormalAttackAllEnd(EventHelper.OnHuanXinAttackMiss));
		}

		// Token: 0x06002518 RID: 9496 RVA: 0x001C9654 File Offset: 0x001C7854
		private static void OnHuanXinAttackMiss(DataContext context, CombatCharacter attacker, CombatCharacter defender)
		{
			bool flag = attacker.GetId() == DomainManager.Taiwu.GetTaiwuCharId();
			if (flag)
			{
				TutorialChapterDomain tutorialChapter = DomainManager.TutorialChapter;
				tutorialChapter.Counter += 1;
				bool flag2 = DomainManager.TutorialChapter.Counter >= DomainManager.TutorialChapter.CounterTarget;
				if (flag2)
				{
					Events.UnRegisterHandler_NormalAttackAllEnd(new Events.OnNormalAttackAllEnd(EventHelper.OnHuanXinAttackMiss));
					EventHelper.Domain.TriggerListener("CombatNormalAttackEnd", true);
				}
			}
		}

		// Token: 0x06002519 RID: 9497 RVA: 0x001C96D0 File Offset: 0x001C78D0
		public static void StartListenHuanxinBeatXuXianGong(string listenerEventGuid, EventArgBox argBox)
		{
			DomainManager.Combat.SetAttackForceHit(DomainManager.Taiwu.GetTaiwuCharId(), 3);
			EventHelper.Domain.SetListenerWithActionName(listenerEventGuid, argBox, "CombatNormalAttackEnd");
			DomainManager.TutorialChapter.Counter = 0;
			DomainManager.TutorialChapter.CounterTarget = 3;
			Events.RegisterHandler_NormalAttackAllEnd(new Events.OnNormalAttackAllEnd(EventHelper.OnHuanxinAttackHit));
		}

		// Token: 0x0600251A RID: 9498 RVA: 0x001C9730 File Offset: 0x001C7930
		private static void OnHuanxinAttackHit(DataContext context, CombatCharacter attacker, CombatCharacter defender)
		{
			bool flag = attacker.GetId() == DomainManager.Taiwu.GetTaiwuCharId();
			if (flag)
			{
				TutorialChapterDomain tutorialChapter = DomainManager.TutorialChapter;
				tutorialChapter.Counter += 1;
				bool flag2 = DomainManager.TutorialChapter.Counter >= DomainManager.TutorialChapter.CounterTarget;
				if (flag2)
				{
					Events.UnRegisterHandler_NormalAttackAllEnd(new Events.OnNormalAttackAllEnd(EventHelper.OnHuanxinAttackHit));
					EventHelper.Domain.TriggerListener("CombatNormalAttackEnd", true);
				}
			}
		}

		// Token: 0x0600251B RID: 9499 RVA: 0x001C97AC File Offset: 0x001C79AC
		public static void HuanxinAppendKaiHeSordSkill()
		{
			bool inGuiding = DomainManager.TutorialChapter.InGuiding;
			if (inGuiding)
			{
				DomainManager.Combat.AppendEquipAttackSkill(EventHelper.Domain.MainThreadDataContext, DomainManager.Taiwu.GetTaiwuCharId(), 552);
			}
		}

		// Token: 0x0600251C RID: 9500 RVA: 0x001C97EC File Offset: 0x001C79EC
		public static void HuanxinAppendCombatSkill(short skillId)
		{
			bool flag = !DomainManager.TutorialChapter.InGuiding;
			if (!flag)
			{
				CombatCharacter combatCharacter = DomainManager.Combat.GetCombatCharacter(true, false);
				DomainManager.Combat.AddTrick(EventHelper.Domain.MainThreadDataContext, combatCharacter, Config.CombatSkill.Instance[skillId].TrickCost, true, false);
				DomainManager.Combat.GmCmd_ForceRecoverBreathAndStance(EventHelper.Domain.MainThreadDataContext);
				DomainManager.Combat.AppendEquipAttackSkill(EventHelper.Domain.MainThreadDataContext, DomainManager.Taiwu.GetTaiwuCharId(), skillId);
				DomainManager.Combat.SetSkillToMaxRange(EventHelper.Domain.MainThreadDataContext, DomainManager.Taiwu.GetTaiwuCharId(), skillId);
				DomainManager.Combat.SetSkillAttackForceHit(DomainManager.Taiwu.GetTaiwuCharId(), true);
				DomainManager.Combat.AddSkillPower(EventHelper.Domain.MainThreadDataContext, DomainManager.Taiwu.GetTaiwuCharId(), skillId, 1000);
			}
		}

		// Token: 0x0600251D RID: 9501 RVA: 0x001C98D5 File Offset: 0x001C7AD5
		public static void HuanxinAppendWujiJianshi()
		{
			EventHelper.HuanxinAppendCombatSkill(540);
		}

		// Token: 0x0600251E RID: 9502 RVA: 0x001C98E3 File Offset: 0x001C7AE3
		public static void HuanxinAppendDamoJianfa()
		{
			EventHelper.HuanxinAppendCombatSkill(548);
		}

		// Token: 0x0600251F RID: 9503 RVA: 0x001C98F1 File Offset: 0x001C7AF1
		public static void HuanxinAppendWanhuaShiSiJian()
		{
			EventHelper.HuanxinAppendCombatSkill(557);
		}

		// Token: 0x06002520 RID: 9504 RVA: 0x001C98FF File Offset: 0x001C7AFF
		public static void HuanxinAppendZhanAoDaoFa()
		{
			EventHelper.HuanxinAppendCombatSkill(593);
		}

		// Token: 0x06002521 RID: 9505 RVA: 0x001C990D File Offset: 0x001C7B0D
		public static void HuanxinLostAllMobility()
		{
			DomainManager.Combat.ClearMobilityAndForbidRecover(EventHelper.Domain.MainThreadDataContext, DomainManager.Taiwu.GetTaiwuCharId());
		}

		// Token: 0x06002522 RID: 9506 RVA: 0x001C992F File Offset: 0x001C7B2F
		public static void StartListenAttackSkillCast(string listenerGuid, EventArgBox argBox)
		{
			Events.RegisterHandler_AttackSkillAttackEnd(new Events.OnAttackSkillAttackEnd(EventHelper.<StartListenAttackSkillCast>g__OnAttackSkillAttackEnd|2138_0));
			EventHelper.Domain.SetListenerWithActionName(listenerGuid, argBox, "CombatOver");
		}

		// Token: 0x06002523 RID: 9507 RVA: 0x001C9958 File Offset: 0x001C7B58
		public static ItemKey AddTianShuXuanJiByAdoptiveFatherToHuanXin()
		{
			GameData.Domains.Character.Character character = DomainManager.Taiwu.GetTaiwu();
			ItemKey itemKey = DomainManager.Item.CreateSkillBook(EventHelper.Domain.MainThreadDataContext, 870, 5, 0, -1, 50, true);
			character.AddInventoryItem(EventHelper.Domain.MainThreadDataContext, itemKey, 1, false);
			DomainManager.Item.GetBaseItem(itemKey).SetMaxDurability(99, EventHelper.Domain.MainThreadDataContext);
			DomainManager.Item.GetBaseItem(itemKey).SetCurrDurability(99, EventHelper.Domain.MainThreadDataContext);
			return itemKey;
		}

		// Token: 0x06002524 RID: 9508 RVA: 0x001C99E4 File Offset: 0x001C7BE4
		public unsafe static void HuanxinSavedByFuyuSwordAndAutoAllocateNeili()
		{
			GameData.Domains.Character.Character huanxinChar = DomainManager.Taiwu.GetTaiwu();
			huanxinChar.ChangeConsummateLevel(EventHelper.Domain.MainThreadDataContext, 18);
			huanxinChar.ChangeExtraNeili(EventHelper.Domain.MainThreadDataContext, 32000);
			huanxinChar.ChangeCurrNeili(EventHelper.Domain.MainThreadDataContext, 32000);
			for (int i = 0; i < 100; i++)
			{
				NeiliAllocation neiliAllocation = huanxinChar.GetNeiliAllocation();
				bool flag = *(ref neiliAllocation.Items.FixedElementField + 2) < 90;
				if (flag)
				{
					huanxinChar.AllocateNeili(EventHelper.Domain.MainThreadDataContext, 1);
				}
				bool flag2 = *(ref neiliAllocation.Items.FixedElementField + (IntPtr)3 * 2) < 90;
				if (flag2)
				{
					huanxinChar.AllocateNeili(EventHelper.Domain.MainThreadDataContext, 3);
				}
				bool flag3 = neiliAllocation.Items.FixedElementField < 90;
				if (flag3)
				{
					huanxinChar.AllocateNeili(EventHelper.Domain.MainThreadDataContext, 0);
				}
				bool flag4 = *(ref neiliAllocation.Items.FixedElementField + (IntPtr)2 * 2) < 90;
				if (flag4)
				{
					huanxinChar.AllocateNeili(EventHelper.Domain.MainThreadDataContext, 2);
				}
			}
		}

		// Token: 0x06002525 RID: 9509 RVA: 0x001C9B0C File Offset: 0x001C7D0C
		public static void SetHuanxinImmuneInjury()
		{
			GameData.Domains.Character.Character huanxinChar = DomainManager.Taiwu.GetTaiwu();
			DomainManager.Combat.SetDefeatMarkImmunity(huanxinChar.GetId(), true, true, true, true, true);
		}

		// Token: 0x06002526 RID: 9510 RVA: 0x001C9B3C File Offset: 0x001C7D3C
		public static void StartListenOnLittleMonkCastSkillEnd(int castSkillCharId, string listenerGuid, EventArgBox argBox)
		{
			EventHelper.<>c__DisplayClass2142_0 CS$<>8__locals1 = new EventHelper.<>c__DisplayClass2142_0();
			CS$<>8__locals1.castSkillCharId = castSkillCharId;
			Events.RegisterHandler_CastSkillEnd(new Events.OnCastSkillEnd(CS$<>8__locals1.<StartListenOnLittleMonkCastSkillEnd>g__OnLittleMonkCastAttackSkillEnd|1));
			EventHelper.Domain.SetListenerWithActionName(listenerGuid, argBox, "CombatSkillCastEnd");
		}

		// Token: 0x06002527 RID: 9511 RVA: 0x001C9B7D File Offset: 0x001C7D7D
		public static void StartListenHuanxinSkillPrepareEnd(string listenerGuid, EventArgBox argBox)
		{
			Events.RegisterHandler_PrepareSkillEnd(new Events.OnPrepareSkillEnd(EventHelper.<StartListenHuanxinSkillPrepareEnd>g__OnPrepareSkillEnd|2143_0));
			EventHelper.Domain.SetListenerWithActionName(listenerGuid, argBox, "CombatSkillPrepareEnd");
		}

		// Token: 0x06002528 RID: 9512 RVA: 0x001C9BA5 File Offset: 0x001C7DA5
		public static void StartListenHuanxinCastSkillEndInTutorial7(string listenerGuid, EventArgBox argBox)
		{
			Events.RegisterHandler_AttackSkillAttackEnd(new Events.OnAttackSkillAttackEnd(EventHelper.<StartListenHuanxinCastSkillEndInTutorial7>g__OnAttackSkillAttackEnd|2144_0));
			EventHelper.Domain.SetListenerWithActionName(listenerGuid, argBox, "CombatOver");
		}

		// Token: 0x06002529 RID: 9513 RVA: 0x001C9BCD File Offset: 0x001C7DCD
		public static void StopAutoStartCombat()
		{
			GameDataBridge.AddDisplayEvent(DisplayEventType.StopAutoStartCombat);
		}

		// Token: 0x0600252A RID: 9514 RVA: 0x001C9BD8 File Offset: 0x001C7DD8
		public static short GetTutorialChapter()
		{
			return DomainManager.TutorialChapter.GetTutorialChapter();
		}

		// Token: 0x0600252B RID: 9515 RVA: 0x001C9BF4 File Offset: 0x001C7DF4
		public static bool InTutorialChapter()
		{
			return EventHelper.GetTutorialChapter() > 0;
		}

		// Token: 0x0600252C RID: 9516 RVA: 0x001C9C10 File Offset: 0x001C7E10
		public static sbyte GetXiangshuProgress()
		{
			return DomainManager.World.GetXiangshuProgress();
		}

		// Token: 0x0600252D RID: 9517 RVA: 0x001C9C2C File Offset: 0x001C7E2C
		public static sbyte GetXiangshuLevel()
		{
			return DomainManager.World.GetXiangshuLevel();
		}

		// Token: 0x0600252E RID: 9518 RVA: 0x001C9C48 File Offset: 0x001C7E48
		public static void ChangeMainStoryLineProgress(short progress)
		{
			DomainManager.World.ChangeMainStoryLineProgress(EventHelper.Domain.MainThreadDataContext, progress);
		}

		// Token: 0x0600252F RID: 9519 RVA: 0x001C9C64 File Offset: 0x001C7E64
		public static void SetWorldFunctionsStatus(byte worldFunctionType)
		{
			DomainManager.World.SetWorldFunctionsStatus(EventHelper.Domain.MainThreadDataContext, worldFunctionType);
			bool flag = worldFunctionType == 25;
			if (flag)
			{
				MonthlyActionKey key = new MonthlyActionKey(2, 0);
				EventHelper.Domain.HandleMonthlyAction(EventHelper.Domain.MainThreadDataContext, key);
			}
		}

		// Token: 0x06002530 RID: 9520 RVA: 0x001C9CB4 File Offset: 0x001C7EB4
		public static XiangshuAvatarTaskStatus GetXiangshuAvatarTaskStatus(sbyte xiangshuAvatarId)
		{
			return DomainManager.World.GetElement_XiangshuAvatarTaskStatuses((int)xiangshuAvatarId);
		}

		// Token: 0x06002531 RID: 9521 RVA: 0x001C9CD4 File Offset: 0x001C7ED4
		public static void SetJuniorXiangshuTaskStatus(sbyte xiangshuAvatarId, sbyte taskStatus)
		{
			bool flag = xiangshuAvatarId >= 9;
			if (flag)
			{
				throw new Exception("Invalid xiangshu avatarId to set task status");
			}
			XiangshuAvatarTaskStatus status = DomainManager.World.GetElement_XiangshuAvatarTaskStatuses((int)xiangshuAvatarId);
			status.JuniorXiangshuTaskStatus = taskStatus;
			DomainManager.World.SetElement_XiangshuAvatarTaskStatuses((int)xiangshuAvatarId, status, EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x06002532 RID: 9522 RVA: 0x001C9D24 File Offset: 0x001C7F24
		public static void SetXiangshuDisplayStatus(sbyte xiangshuAvatarId, sbyte displayStatus)
		{
			EventHelper.Domain.SetRightRoleXiangshuDisplayData(new sbyte[]
			{
				xiangshuAvatarId,
				displayStatus
			}, EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x06002533 RID: 9523 RVA: 0x001C9D4C File Offset: 0x001C7F4C
		public static string GetCurrentMonthName()
		{
			sbyte month = DomainManager.World.GetCurrMonthInYear();
			return Month.Instance[month].Name;
		}

		// Token: 0x06002534 RID: 9524 RVA: 0x001C9D7C File Offset: 0x001C7F7C
		public static bool AdvancingMonthStateNotInProcess()
		{
			return DomainManager.World.GetAdvancingMonthState() == 0;
		}

		// Token: 0x06002535 RID: 9525 RVA: 0x001C9D9C File Offset: 0x001C7F9C
		public static bool SmallVillageXiangshu(short orgTemplateId)
		{
			return GameData.Domains.World.SharedMethods.SmallVillageXiangshu(orgTemplateId, true);
		}

		// Token: 0x06002536 RID: 9526 RVA: 0x001C9DB5 File Offset: 0x001C7FB5
		public static void AdvanceDays(sbyte days)
		{
			DomainManager.World.AdvanceDaysInMonth(EventHelper.Domain.MainThreadDataContext, (int)days);
		}

		// Token: 0x06002537 RID: 9527 RVA: 0x001C9DCE File Offset: 0x001C7FCE
		public static void ClearTrivialMonthlyEvents()
		{
			DomainManager.World.ClearTrivialMonthlyEvents(EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x170000D6 RID: 214
		// (get) Token: 0x06002538 RID: 9528 RVA: 0x001C9DE6 File Offset: 0x001C7FE6
		private static TaiwuEventDomain Domain
		{
			get
			{
				return DomainManager.TaiwuEvent;
			}
		}

		// Token: 0x06002539 RID: 9529 RVA: 0x001C9DED File Offset: 0x001C7FED
		public static void Log(string logInfo)
		{
			AdaptableLog.Info(logInfo);
		}

		// Token: 0x0600253A RID: 9530 RVA: 0x001C9DF7 File Offset: 0x001C7FF7
		public static void ToEvent(string toEventGuid)
		{
			EventHelper.Domain.ToEvent(toEventGuid);
		}

		// Token: 0x0600253B RID: 9531 RVA: 0x001C9E08 File Offset: 0x001C8008
		public static void AddOptionToEvent(string targetEventGuid, string srcEventGuid, string optionKey)
		{
			bool flag = string.IsNullOrEmpty(targetEventGuid) || string.IsNullOrEmpty(srcEventGuid) || string.IsNullOrEmpty(optionKey);
			if (!flag)
			{
				TaiwuEvent taiwuEvent = EventHelper.Domain.GetEvent(targetEventGuid);
				bool flag2 = taiwuEvent != null;
				if (flag2)
				{
					taiwuEvent.AddOption(new ValueTuple<string, string>(srcEventGuid, optionKey));
				}
			}
		}

		// Token: 0x0600253C RID: 9532 RVA: 0x001C9E58 File Offset: 0x001C8058
		public static bool IsTriggeredEvent(string targetEventGuid)
		{
			return EventHelper.Domain.IsTriggeredEvent(targetEventGuid);
		}

		// Token: 0x0600253D RID: 9533 RVA: 0x001C9E78 File Offset: 0x001C8078
		public static int GetEventTriggeredCount(string targetEventGuid)
		{
			return EventHelper.Domain.GetEventTriggeredCount(targetEventGuid);
		}

		// Token: 0x0600253E RID: 9534 RVA: 0x001C9E95 File Offset: 0x001C8095
		public static void SetStopAutoNextEvent(bool stopFlag)
		{
			EventHelper.Domain.SetStopAutoNextEvent(stopFlag);
		}

		// Token: 0x0600253F RID: 9535 RVA: 0x001C9EA4 File Offset: 0x001C80A4
		[Obsolete]
		public static void AddEventInListen(string eventGuid, EventArgBox argBox)
		{
			EventHelper.Domain.SetListener(eventGuid, argBox);
		}

		// Token: 0x06002540 RID: 9536 RVA: 0x001C9EB4 File Offset: 0x001C80B4
		public static void AddEventInListenWithActionName(string eventGuid, EventArgBox argBox, string actionName)
		{
			EventHelper.Domain.SetListenerWithActionName(eventGuid, argBox, actionName);
		}

		// Token: 0x06002541 RID: 9537 RVA: 0x001C9EC5 File Offset: 0x001C80C5
		public static void RemoveEventInListenWithActionName(string eventGuid, string actionName)
		{
			EventHelper.Domain.RemoveEventInListenWithActionName(eventGuid, actionName);
		}

		// Token: 0x06002542 RID: 9538 RVA: 0x001C9ED8 File Offset: 0x001C80D8
		public static void SetInteractionCooldown(int targetCharId, int interactionType, int cooldown)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			DomainManager.Extra.SetTaiwuInteractionCooldown(context, targetCharId, interactionType, cooldown);
		}

		// Token: 0x06002543 RID: 9539 RVA: 0x001C9F00 File Offset: 0x001C8100
		public static void RemoveInteractionCooldown(int targetCharId, int interactionType)
		{
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			DomainManager.Extra.RemoveTaiwuInteractionCooldown(context, targetCharId, interactionType);
		}

		// Token: 0x06002544 RID: 9540 RVA: 0x001C9F28 File Offset: 0x001C8128
		public static int GetInteractionCooldown(int targetCharId, int interactionType)
		{
			return DomainManager.Extra.GetTaiwuInteractionCooldown(targetCharId, interactionType);
		}

		// Token: 0x06002545 RID: 9541 RVA: 0x001C9F48 File Offset: 0x001C8148
		public static bool IsInteractionInCooldown(int targetCharId, int interactionType)
		{
			return EventHelper.GetInteractionCooldown(targetCharId, interactionType) > 0;
		}

		// Token: 0x06002546 RID: 9542 RVA: 0x001C9F64 File Offset: 0x001C8164
		public static bool CheckProbability(int value)
		{
			return EventHelper.Domain.MainThreadDataContext.Random.CheckPercentProb(value);
		}

		// Token: 0x06002547 RID: 9543 RVA: 0x001C9F8C File Offset: 0x001C818C
		public static int GetRandom(int min = 0, int max = 100)
		{
			return EventHelper.Domain.MainThreadDataContext.Random.Next(min, max);
		}

		// Token: 0x06002548 RID: 9544 RVA: 0x001C9FB4 File Offset: 0x001C81B4
		public static T Sample<T>(this IList<T> list)
		{
			bool flag = list == null || list.Count <= 0;
			T result;
			if (flag)
			{
				result = default(T);
			}
			else
			{
				result = list[EventHelper.Domain.MainThreadDataContext.Random.Next(0, list.Count)];
			}
			return result;
		}

		// Token: 0x06002549 RID: 9545 RVA: 0x001CA00C File Offset: 0x001C820C
		public static string HandleStringTag(string targetString, EventArgBox box, TaiwuEvent eventData)
		{
			return TaiwuEventTagHandler.DecodeTag(targetString, box, eventData);
		}

		// Token: 0x0600254A RID: 9546 RVA: 0x001CA026 File Offset: 0x001C8226
		public static string GetCharacterName(int charId, bool realName = false)
		{
			return DomainManager.Character.GetName(charId, realName);
		}

		// Token: 0x0600254B RID: 9547 RVA: 0x001CA034 File Offset: 0x001C8234
		public static short GetTotalVillagerCount()
		{
			return DomainManager.Taiwu.GetTotalVillagerCount();
		}

		// Token: 0x0600254C RID: 9548 RVA: 0x001CA050 File Offset: 0x001C8250
		public static short GetAvailableVillagerCount()
		{
			return DomainManager.Taiwu.GetAvailableVillagerCount();
		}

		// Token: 0x0600254D RID: 9549 RVA: 0x001CA06C File Offset: 0x001C826C
		public static short GetWorkingVillagerCount()
		{
			return DomainManager.Taiwu.GetWorkingVillagerCount();
		}

		// Token: 0x0600254E RID: 9550 RVA: 0x001CA088 File Offset: 0x001C8288
		public static bool[] GetRoleBookReadState(int roleId, ItemKey bookItemKey)
		{
			return DomainManager.Character.GetCharBookReadState(roleId, bookItemKey);
		}

		// Token: 0x0600254F RID: 9551 RVA: 0x001CA0A8 File Offset: 0x001C82A8
		public static int[] GetRandomCellFromWeightCore(IList<int[]> list)
		{
			return RandomUtils.GenerateRandomWeightCell(EventHelper.Domain.MainThreadDataContext.Random, list, 1);
		}

		// Token: 0x06002550 RID: 9552 RVA: 0x001CA0D0 File Offset: 0x001C82D0
		public static short[] GetRandomCellFromWeightCore(IList<short[]> list)
		{
			return RandomUtils.GenerateRandomWeightCell<short>(EventHelper.Domain.MainThreadDataContext.Random, list, 1);
		}

		// Token: 0x06002551 RID: 9553 RVA: 0x001CA0F8 File Offset: 0x001C82F8
		public static List<short[]> GetRandomListFromWeightCore(IList<short[]> list, int count)
		{
			List<short[]> retList = new List<short[]>();
			RandomUtils.GenerateRandomWeightCellList(EventHelper.Domain.MainThreadDataContext.Random, list, count, ref retList, 1);
			return retList;
		}

		// Token: 0x06002552 RID: 9554 RVA: 0x001CA12B File Offset: 0x001C832B
		public static void StartLifeSkillCombat(int characterId, sbyte lifeSKillType, string onFinishEventId, EventArgBox argBox)
		{
			Events.RaiseLifeSkillCombatStarted(EventHelper.Domain.MainThreadDataContext);
			EventHelper.Domain.SetListenerWithActionName(onFinishEventId, argBox, "LifeSkillBattleComplete");
			GameDataBridge.AddDisplayEvent<int, sbyte, bool>(DisplayEventType.OpenLifeSkillCombat, characterId, lifeSKillType, false);
		}

		// Token: 0x06002553 RID: 9555 RVA: 0x001CA15B File Offset: 0x001C835B
		public static void StartLifeSkillCombatHideTaiwuAudience(int characterId, sbyte lifeSKillType, string onFinishEventId, EventArgBox argBox)
		{
			Events.RaiseLifeSkillCombatStarted(EventHelper.Domain.MainThreadDataContext);
			EventHelper.Domain.SetListenerWithActionName(onFinishEventId, argBox, "LifeSkillBattleComplete");
			GameDataBridge.AddDisplayEvent<int, sbyte, bool>(DisplayEventType.OpenLifeSkillCombat, characterId, lifeSKillType, true);
		}

		// Token: 0x06002554 RID: 9556 RVA: 0x001CA18C File Offset: 0x001C838C
		public static void StartLifeSkillCombatWithRandomEnemy(short templateId, sbyte lifeSKillType, string onFinishEventId, EventArgBox argBox)
		{
			int enemyId = EventHelper.CreateNonIntelligentCharacter(templateId);
			argBox.Set("EnemyId", enemyId);
			EventHelper.StartLifeSkillCombat(enemyId, lifeSKillType, onFinishEventId, argBox);
		}

		// Token: 0x06002555 RID: 9557 RVA: 0x001CA1B8 File Offset: 0x001C83B8
		public static void StartCricketCombat(int enemyId, string onFinishEventId, EventArgBox argBox)
		{
			EventHelper.AddCricketBattleDisplayEvent(enemyId, onFinishEventId, argBox, false, false, false, 0, 8);
		}

		// Token: 0x06002556 RID: 9558 RVA: 0x001CA1C9 File Offset: 0x001C83C9
		public static void StartCricketCombatWithConfig(int characterId, bool doubleDamage, bool onlyNoInjuryCricket, sbyte minGrade, sbyte maxGrade, string onFinishEventId, EventArgBox argBox)
		{
			EventHelper.AddCricketBattleDisplayEvent(characterId, onFinishEventId, argBox, true, doubleDamage, onlyNoInjuryCricket, minGrade, maxGrade);
		}

		// Token: 0x06002557 RID: 9559 RVA: 0x001CA1E0 File Offset: 0x001C83E0
		public static void AddCricketBattleDisplayEvent(int enemyId, string onFinishEventId, EventArgBox argBox, bool withConfig = false, bool doubleDamage = false, bool onlyNoInjuryCricket = false, sbyte minGrade = 0, sbyte maxGrade = 8)
		{
			EventCricketBettingData data = DomainManager.TaiwuEvent.GetCricketBettingData();
			bool isConfirmed = data.IsConfirmed;
			if (isConfirmed)
			{
				data.IsComplete = false;
				data.IsConfirmed = false;
				EventHelper.SetInteractionCooldown(enemyId, 7);
				Events.RaiseCricketCombatStarted(EventHelper.Domain.MainThreadDataContext);
				EventHelper.Domain.SetListenerWithActionName(onFinishEventId, argBox, "CricketCombatOver");
				if (withConfig)
				{
					GameDataBridge.AddDisplayEvent<int, Wager, CricketWagerData, bool, bool, sbyte, sbyte>(DisplayEventType.OpenCricketBattleWithConfig, enemyId, data.Wager, data.BetRewards[data.Index], doubleDamage, onlyNoInjuryCricket, minGrade, maxGrade);
				}
				else
				{
					GameDataBridge.AddDisplayEvent<int, Wager, CricketWagerData>(DisplayEventType.OpenCricketBattle, enemyId, data.Wager, data.BetRewards[data.Index]);
				}
			}
			else
			{
				bool flag = !data.IsComplete;
				if (flag)
				{
					DomainManager.Item.SetCricketBattleConfig(minGrade, maxGrade, onlyNoInjuryCricket);
					GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
					int taiwuId = taiwu.GetId();
					data.IsValid = true;
					data.BetRewards = DomainManager.Item.SelectCricketWagers(EventHelper.Domain.MainThreadDataContext, enemyId);
					data.BetItems = DomainManager.Character.GetAllInventoryItems(taiwuId);
					data.BetCharacters = new List<CharacterDisplayData>();
					data.BetCharacterValueMap.Clear();
					data.BetItems.Insert(0, new ItemDisplayData());
					for (sbyte type = 0; type < 8; type += 1)
					{
						int amount = taiwu.GetResource(type);
						bool flag2 = amount <= 0;
						if (!flag2)
						{
							short templateId = Convert.ToInt16(321 + (int)type);
							ItemKey itemKey = new ItemKey(12, 0, templateId, 0);
							ItemDisplayData itemData = new ItemDisplayData
							{
								Key = itemKey,
								Amount = amount
							};
							data.BetItems.Add(itemData);
						}
					}
					foreach (int charId in DomainManager.Taiwu.GetGroupCharIds().GetCollection())
					{
						bool flag3 = EventHelper.IsCharacterAdult(charId) && charId != taiwuId && charId != enemyId;
						if (flag3)
						{
							data.BetCharacters.Add(DomainManager.Character.GetCharacterDisplayData(charId));
						}
					}
					KidnappedCharacterList list;
					bool flag4 = DomainManager.Character.TryGetKidnappedCharacters(taiwuId, out list);
					if (flag4)
					{
						foreach (KidnappedCharacter victim in list.GetCollection())
						{
							bool flag5 = EventHelper.IsCharacterAdult(victim.CharId) && victim.CharId != enemyId;
							if (flag5)
							{
								data.BetCharacters.Add(DomainManager.Character.GetCharacterDisplayData(victim.CharId));
							}
						}
					}
					foreach (CharacterDisplayData displayData in data.BetCharacters)
					{
						GameData.Domains.Character.Character character = DomainManager.Character.GetElement_Objects(displayData.CharacterId);
						data.BetCharacterValueMap[displayData.CharacterId] = Wager.CreateChar(displayData.CharacterId).CalcWagerValue(0, character.GetFame(), character.GetAttraction(), character.GetPhysiologicalAge(), character.GetGender(), character.GetOrganizationInfo().Grade);
					}
				}
				else
				{
					data.IsComplete = false;
				}
			}
			EventHelper.Domain.SetCricketBettingData(data, EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x06002558 RID: 9560 RVA: 0x001CA580 File Offset: 0x001C8780
		public static void StartShavingAction(int cutterCharId, int targetCharId, string shavingFinishEventId, EventArgBox argBox)
		{
			EventHelper.Domain.SetListenerWithActionName(shavingFinishEventId, argBox, "CharacterShaveComplete");
			GameDataBridge.AddDisplayEvent<int, int, int>(DisplayEventType.StartShavingActionByEvent, cutterCharId, targetCharId, -1);
		}

		// Token: 0x06002559 RID: 9561 RVA: 0x001CA5A0 File Offset: 0x001C87A0
		public static void StartShavingActionWithTimeLimit(int cutterCharId, int targetCharId, string shavingFinishEventId, int time, EventArgBox argBox)
		{
			EventHelper.Domain.SetListenerWithActionName(shavingFinishEventId, argBox, "CharacterShaveComplete");
			GameDataBridge.AddDisplayEvent<int, int, int>(DisplayEventType.StartShavingActionByEvent, cutterCharId, targetCharId, time);
		}

		// Token: 0x0600255A RID: 9562 RVA: 0x001CA5C4 File Offset: 0x001C87C4
		public static bool IsFunctionUnlock(byte functionId)
		{
			return DomainManager.World.GetWorldFunctionsStatus(functionId);
		}

		// Token: 0x0600255B RID: 9563 RVA: 0x001CA5E1 File Offset: 0x001C87E1
		public static void PlayCg(string cgName, string onCompleteEventId, EventArgBox argBox)
		{
			EventHelper.Domain.SetListenerWithActionName(onCompleteEventId, argBox, "CgPlayActionFinish");
			EventHelper.Domain.SetCgName(cgName, EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x0600255C RID: 9564 RVA: 0x001CA60C File Offset: 0x001C880C
		public static void StartDoctorAction(int charId, string onCompleteEventId = "", EventArgBox argBox = null, bool expensiveHeal = false)
		{
			EventHelper.Domain.SetListenerWithActionName(onCompleteEventId, argBox, "HealActionComplete");
			GameDataBridge.AddDisplayEvent<int, bool>(DisplayEventType.StartDoctorHeal, charId, expensiveHeal);
		}

		// Token: 0x0600255D RID: 9565 RVA: 0x001CA62C File Offset: 0x001C882C
		public static bool HasEvent(string guid)
		{
			return EventHelper.Domain.GetEvent(guid) != null;
		}

		// Token: 0x0600255E RID: 9566 RVA: 0x001CA64C File Offset: 0x001C884C
		public static bool IsAvailableCharacterId(int charId)
		{
			return GameData.Domains.Character.Character.IsCharacterIdValid(charId);
		}

		// Token: 0x0600255F RID: 9567 RVA: 0x001CA664 File Offset: 0x001C8864
		public static MonthlyEventCollection GetMonthlyEventCollection()
		{
			return DomainManager.World.GetMonthlyEventCollection();
		}

		// Token: 0x06002560 RID: 9568 RVA: 0x001CA680 File Offset: 0x001C8880
		public static LifeRecordCollection GetLifeRecordCollection()
		{
			return DomainManager.LifeRecord.GetLifeRecordCollection();
		}

		// Token: 0x06002561 RID: 9569 RVA: 0x001CA69C File Offset: 0x001C889C
		public static TravelingEventCollection GetTravelingEventCollection()
		{
			return DomainManager.Extra.GetTravelingEventCollection();
		}

		// Token: 0x06002562 RID: 9570 RVA: 0x001CA6B8 File Offset: 0x001C88B8
		public static void CommitLifeRecords()
		{
			DomainManager.LifeRecord.CommitCurrLifeRecords();
		}

		// Token: 0x06002563 RID: 9571 RVA: 0x001CA6C6 File Offset: 0x001C88C6
		public static void SetOnHandlingMonthlyEventBlock(bool blockOperation)
		{
			DomainManager.World.SetOnHandingMonthlyEventBlock(blockOperation, EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x06002564 RID: 9572 RVA: 0x001CA6E0 File Offset: 0x001C88E0
		public static void SetAssassinationTarget(string charName)
		{
			bool flag = string.IsNullOrEmpty(charName);
			if (flag)
			{
				throw new Exception("can not set empty character name to Assassination");
			}
			DomainManager.Character.SetTargetedForAssassination(charName, EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x06002565 RID: 9573 RVA: 0x001CA71C File Offset: 0x001C891C
		[Obsolete("Use SetCooldown instead")]
		public static void LogCharacterInteractDate(int charId, string logKeyPrefix)
		{
			int date = DomainManager.World.GetCurrDate();
			DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(1, 2);
			defaultInterpolatedStringHandler.AppendFormatted(logKeyPrefix);
			defaultInterpolatedStringHandler.AppendLiteral("_");
			defaultInterpolatedStringHandler.AppendFormatted<int>(charId);
			string key = defaultInterpolatedStringHandler.ToStringAndClear();
			EventHelper.GetGlobalArgBox().Set(key, date);
		}

		// Token: 0x06002566 RID: 9574 RVA: 0x001CA772 File Offset: 0x001C8972
		public static void SetInteractionCooldown(int targetCharId, short optionTemplateId)
		{
			DomainManager.TaiwuEvent.SetInteractionEventOptionCooldown(targetCharId, optionTemplateId);
		}

		// Token: 0x06002567 RID: 9575 RVA: 0x001CA782 File Offset: 0x001C8982
		public static void SetEventSeriesTexture(string textureName)
		{
			EventHelper.Domain.SeriesEventTexture = textureName;
		}

		// Token: 0x06002568 RID: 9576 RVA: 0x001CA790 File Offset: 0x001C8990
		public static int GetGameDate()
		{
			return DomainManager.World.GetCurrDate();
		}

		// Token: 0x06002569 RID: 9577 RVA: 0x001CA7AC File Offset: 0x001C89AC
		public static sbyte GetCurrMonthInYear()
		{
			return DomainManager.World.GetCurrMonthInYear();
		}

		// Token: 0x0600256A RID: 9578 RVA: 0x001CA7C8 File Offset: 0x001C89C8
		public static int GetDaysLeftInCurrentMonth()
		{
			return DomainManager.World.GetLeftDaysInCurrMonth();
		}

		// Token: 0x0600256B RID: 9579 RVA: 0x001CA7E4 File Offset: 0x001C89E4
		public static void OpenPictureShowPage(string picturePath, string textureType, string countDownActionName, int intParam = -1, float countDownTime = -1f, string modName = "")
		{
			GameDataBridge.AddDisplayEvent<string, string, string, int, float, string>(DisplayEventType.OpenPictureShow, picturePath, textureType, countDownActionName, intParam, countDownTime, modName);
		}

		// Token: 0x0600256C RID: 9580 RVA: 0x001CA7F7 File Offset: 0x001C89F7
		public static void SetEventCgTextureData(string texturePath, float tweenTime, string modName = "")
		{
			GameDataBridge.AddDisplayEvent<string, float>(DisplayEventType.ShowEventCgTexture, texturePath, tweenTime);
		}

		// Token: 0x0600256D RID: 9581 RVA: 0x001CA804 File Offset: 0x001C8A04
		public static void BlockEventLogImmediateStatusCheck()
		{
			EventHelper.Domain.BlockEventLogImmediateStatusCheck();
		}

		// Token: 0x0600256E RID: 9582 RVA: 0x001CA814 File Offset: 0x001C8A14
		public static void ShowGetItemPageForItems(List<ValueTuple<ItemKey, int>> itemList, string afterEvent = "", EventArgBox argBox = null, bool autoToWareHouse = false)
		{
			bool flag = !string.IsNullOrEmpty(afterEvent);
			if (flag)
			{
				EventHelper.AddEventInListenWithActionName(afterEvent, argBox, "GetItemShowed");
			}
			List<ItemDisplayData> itemDisplayDataList = new List<ItemDisplayData>();
			EventHelper.ItemList2DisplayData(itemList, itemDisplayDataList);
			GameDataBridge.AddDisplayEvent<List<ItemDisplayData>, bool, bool, bool>(DisplayEventType.OpenGetItem_Item, itemDisplayDataList, autoToWareHouse, false, true);
			bool flag2 = !string.IsNullOrEmpty(afterEvent) && argBox != null;
			if (flag2)
			{
				EventHelper.Domain.CheckTaiwuStatusImmediately();
			}
		}

		// Token: 0x0600256F RID: 9583 RVA: 0x001CA874 File Offset: 0x001C8A74
		public static void ShowGetItemPageForItems(List<ValueTuple<ItemKey, int>> itemList, List<ValueTuple<ItemKey, int>> resourceList, string afterEvent = "", EventArgBox argBox = null, bool autoToWareHouse = false)
		{
			bool flag = !string.IsNullOrEmpty(afterEvent);
			if (flag)
			{
				EventHelper.AddEventInListenWithActionName(afterEvent, argBox, "GetItemShowed");
			}
			List<ItemDisplayData> itemDisplayDataList = new List<ItemDisplayData>();
			EventHelper.ItemList2DisplayData(itemList, itemDisplayDataList);
			EventHelper.ResourceList2DisplayData(resourceList, itemDisplayDataList);
			GameDataBridge.AddDisplayEvent<List<ItemDisplayData>, bool, bool, bool>(DisplayEventType.OpenGetItem_Item, itemDisplayDataList, autoToWareHouse, false, true);
			bool flag2 = !string.IsNullOrEmpty(afterEvent) && argBox != null;
			if (flag2)
			{
				EventHelper.Domain.CheckTaiwuStatusImmediately();
			}
		}

		// Token: 0x06002570 RID: 9584 RVA: 0x001CA8E0 File Offset: 0x001C8AE0
		private static void ItemList2DisplayData(List<ValueTuple<ItemKey, int>> itemList, List<ItemDisplayData> resultList)
		{
			resultList.AddRange(DomainManager.Item.GetItemDisplayDataList(itemList.ConvertAll<ItemKey>((ValueTuple<ItemKey, int> e) => e.Item1), DomainManager.Taiwu.GetTaiwuCharId()));
			using (List<ItemDisplayData>.Enumerator enumerator = resultList.GetEnumerator())
			{
				while (enumerator.MoveNext())
				{
					ItemDisplayData data = enumerator.Current;
					int index = itemList.FindIndex((ValueTuple<ItemKey, int> e) => e.Item1.Equals(data.Key));
					bool flag = index >= 0;
					if (flag)
					{
						data.Amount = itemList[index].Item2;
					}
				}
			}
		}

		// Token: 0x06002571 RID: 9585 RVA: 0x001CA9AC File Offset: 0x001C8BAC
		private static void ResourceList2DisplayData(List<ValueTuple<ItemKey, int>> resourceList, List<ItemDisplayData> resultList)
		{
			for (int i = 0; i < resourceList.Count; i++)
			{
				resultList.Add(new ItemDisplayData(resourceList[i].Item1.ItemType, resourceList[i].Item1.TemplateId)
				{
					Amount = resourceList[i].Item2
				});
			}
		}

		// Token: 0x06002572 RID: 9586 RVA: 0x001CAA14 File Offset: 0x001C8C14
		public static void ShowGetItemPageForSingleItem(ItemKey itemKey)
		{
			ItemDisplayData itemData = DomainManager.Item.GetItemDisplayData(itemKey, -1);
			List<ItemDisplayData> itemDisplayDataList = new List<ItemDisplayData>
			{
				itemData
			};
			GameDataBridge.AddDisplayEvent<List<ItemDisplayData>>(DisplayEventType.OpenGetItem_Item, itemDisplayDataList);
		}

		// Token: 0x06002573 RID: 9587 RVA: 0x001CAA48 File Offset: 0x001C8C48
		public static void ShowWarehouse(ItemSourceType itemSourceType, string afterEvent = "", EventArgBox argBox = null)
		{
			bool flag = !string.IsNullOrEmpty(afterEvent);
			if (flag)
			{
				EventHelper.AddEventInListenWithActionName(afterEvent, argBox, "WarehouseShowed");
			}
			GameDataBridge.AddDisplayEvent<int>(DisplayEventType.OpenWarehouse, (int)itemSourceType);
		}

		// Token: 0x06002574 RID: 9588 RVA: 0x001CAA7C File Offset: 0x001C8C7C
		public static void ShowGetItemAgainPageForItems(List<ValueTuple<ItemKey, int>> itemList, string afterEvent = "", EventArgBox argBox = null, bool autoToWareHouse = false)
		{
			bool flag = !string.IsNullOrEmpty(afterEvent);
			if (flag)
			{
				EventHelper.AddEventInListenWithActionName(afterEvent, argBox, "GetItemShowed");
			}
			List<ItemDisplayData> itemDisplayDataList = DomainManager.Item.GetItemDisplayDataList(itemList.ConvertAll<ItemKey>((ValueTuple<ItemKey, int> e) => e.Item1), DomainManager.Taiwu.GetTaiwuCharId());
			using (List<ItemDisplayData>.Enumerator enumerator = itemDisplayDataList.GetEnumerator())
			{
				while (enumerator.MoveNext())
				{
					ItemDisplayData data = enumerator.Current;
					int index = itemList.FindIndex((ValueTuple<ItemKey, int> e) => e.Item1.Equals(data.Key));
					bool flag2 = index >= 0;
					if (flag2)
					{
						data.Amount = itemList[index].Item2;
					}
				}
			}
			GameDataBridge.AddDisplayEvent<List<ItemDisplayData>, bool, bool, bool>(DisplayEventType.OpenGetItem_Item, itemDisplayDataList, autoToWareHouse, false, false);
		}

		// Token: 0x06002575 RID: 9589 RVA: 0x001CAB70 File Offset: 0x001C8D70
		public static void ShowSectMainStoryEndScroll(short orgTemplateId, bool goodEnd, string afterEvent = "", EventArgBox argBox = null)
		{
			InstantNotificationCollection collection = DomainManager.World.GetInstantNotificationCollection();
			short settlementId = DomainManager.Organization.GetSettlementIdByOrgTemplateId((sbyte)orgTemplateId);
			if (goodEnd)
			{
				collection.AddSettlementStoryGoodEnd(settlementId);
			}
			else
			{
				collection.AddSettlementStoryBadEnd(settlementId);
			}
			bool flag = !string.IsNullOrEmpty(afterEvent);
			if (flag)
			{
				EventHelper.AddEventInListenWithActionName(afterEvent, argBox, "SectMainStoryScrollShowed");
			}
			GameDataBridge.AddDisplayEvent<short, bool>(DisplayEventType.SectMainStoryEndScroll, orgTemplateId, goodEnd);
		}

		// Token: 0x06002576 RID: 9590 RVA: 0x001CABD1 File Offset: 0x001C8DD1
		public static void ShowSelectMapArea(string afterEvent, EventArgBox argBox)
		{
			EventHelper.Domain.SetListenerWithActionName(afterEvent, argBox, "SelectMapAreaOver");
			GameDataBridge.AddDisplayEvent(DisplayEventType.OpenSelectMapArea);
		}

		// Token: 0x06002577 RID: 9591 RVA: 0x001CABEE File Offset: 0x001C8DEE
		public static void CloseCharacterMenu()
		{
			GameDataBridge.AddDisplayEvent(DisplayEventType.CloseCharacterMenu);
		}

		// Token: 0x06002578 RID: 9592 RVA: 0x001CABFC File Offset: 0x001C8DFC
		public static void ShowGetItemPageForChicken(short chickenTemplateId, string afterEvent = "", EventArgBox argBox = null)
		{
			bool flag = !string.IsNullOrEmpty(afterEvent);
			if (flag)
			{
				EventHelper.AddEventInListenWithActionName(afterEvent, argBox, "GetItemShowed");
			}
			GameDataBridge.AddDisplayEvent<short>(DisplayEventType.OpenGetItem_Chicken, chickenTemplateId);
		}

		// Token: 0x06002579 RID: 9593 RVA: 0x001CAC30 File Offset: 0x001C8E30
		public static void ShowGetItemPageForCharacters(List<int> charIdList, bool isVillager, string afterEvent = "", EventArgBox argBox = null)
		{
			bool flag = !string.IsNullOrEmpty(afterEvent);
			if (flag)
			{
				EventHelper.AddEventInListenWithActionName(afterEvent, argBox, "GetItemShowed");
			}
			GameDataBridge.AddDisplayEvent<List<int>, bool>(DisplayEventType.OpenGetItem_Character, charIdList, isVillager);
		}

		// Token: 0x0600257A RID: 9594 RVA: 0x001CAC64 File Offset: 0x001C8E64
		public static void ShowTaiwuGetSecretInformation(int metaId, string afterEvent = "", EventArgBox argBox = null)
		{
			bool flag = !string.IsNullOrEmpty(afterEvent);
			if (flag)
			{
				EventHelper.AddEventInListenWithActionName(afterEvent, argBox, "GetItemShowed");
			}
			GameDataBridge.AddDisplayEvent<int>(DisplayEventType.OpenGetItem_SecretInformation, metaId);
		}

		// Token: 0x0600257B RID: 9595 RVA: 0x001CAC95 File Offset: 0x001C8E95
		public static void SetLeftRoleNameKey(string nameKey)
		{
			EventHelper.Domain.SetLeftRoleAlternativeName(nameKey, EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x0600257C RID: 9596 RVA: 0x001CACAE File Offset: 0x001C8EAE
		public static void SetRightRoleNameKey(string nameKey)
		{
			EventHelper.Domain.SetRightRoleAlternativeName(nameKey, EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x0600257D RID: 9597 RVA: 0x001CACC7 File Offset: 0x001C8EC7
		public static void AddAudioCommand(string audioName, bool isMusic, bool isLoop)
		{
			GameDataBridge.AddDisplayEvent<string, bool, bool>(DisplayEventType.PlayAudioCommand, audioName, isMusic, isLoop);
		}

		// Token: 0x0600257E RID: 9598 RVA: 0x001CACD5 File Offset: 0x001C8ED5
		public static void SetMainStoryBgm(string audioName)
		{
			GameDataBridge.AddDisplayEvent<string>(DisplayEventType.SetMainStoryBgm, audioName);
		}

		// Token: 0x0600257F RID: 9599 RVA: 0x001CACE1 File Offset: 0x001C8EE1
		public static void AddMediaCommand(string mediaName, bool canJump, string onFinishAction, int intParam = -1)
		{
			GameDataBridge.AddDisplayEvent<string, bool, string, int>(DisplayEventType.PlayMediaCommand, mediaName, canJump, onFinishAction, intParam);
		}

		// Token: 0x06002580 RID: 9600 RVA: 0x001CACF0 File Offset: 0x001C8EF0
		public static bool GetRestrictOptionsBehaviorType()
		{
			return DomainManager.World.GetRestrictOptionsBehaviorType();
		}

		// Token: 0x06002581 RID: 9601 RVA: 0x001CAD0C File Offset: 0x001C8F0C
		public static bool GetHasFinishedGameEver()
		{
			return DomainManager.Global.GetGlobalFlag(0);
		}

		// Token: 0x06002582 RID: 9602 RVA: 0x001CAD29 File Offset: 0x001C8F29
		public static void SetHasFinishedGame()
		{
			DomainManager.Global.SetGlobalFlag(EventHelper.Domain.MainThreadDataContext, 0, true);
		}

		// Token: 0x06002583 RID: 9603 RVA: 0x001CAD43 File Offset: 0x001C8F43
		public static void SetHasFinishedPastPerformArea()
		{
			DomainManager.Global.SetGlobalFlag(EventHelper.Domain.MainThreadDataContext, 1, true);
		}

		// Token: 0x06002584 RID: 9604 RVA: 0x001CAD60 File Offset: 0x001C8F60
		public static void GetHasDreamBackArchive(Action<bool> onGetExistAction)
		{
			string archiveBaseDir = Common.ArchiveBaseDir;
			DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(19, 1);
			defaultInterpolatedStringHandler.AppendLiteral("world_");
			defaultInterpolatedStringHandler.AppendFormatted<int>((int)(EventHelper.GetCurrentArchiveId() + 1));
			defaultInterpolatedStringHandler.AppendLiteral("/local.sav.sp");
			string filePath = Path.Combine(archiveBaseDir, defaultInterpolatedStringHandler.ToStringAndClear());
			EventHelper.Log("存档存在状态：" + File.Exists(filePath).ToString() + "存档路径：" + filePath);
			onGetExistAction(File.Exists(filePath));
		}

		// Token: 0x06002585 RID: 9605 RVA: 0x001CADE4 File Offset: 0x001C8FE4
		public static void SaveArchiveForDreamBack()
		{
			EventHelper.SaveGlobalArg<bool>("IsDreamBackArchive", true);
			DomainManager.Global.SaveEnding(EventHelper.Domain.MainThreadDataContext);
			EventHelper.RemoveFromGlobalArgBox<bool>("IsDreamBackArchive");
		}

		// Token: 0x06002586 RID: 9606 RVA: 0x001CAE14 File Offset: 0x001C9014
		public static sbyte GetCurrentArchiveId()
		{
			return Common.GetCurrArchiveId();
		}

		// Token: 0x06002587 RID: 9607 RVA: 0x001CAE2C File Offset: 0x001C902C
		public static bool IsApologeticGiftDlcExist()
		{
			return true;
		}

		// Token: 0x06002588 RID: 9608 RVA: 0x001CAE40 File Offset: 0x001C9040
		public static bool IsDlcInstalled(uint dlcAppId)
		{
			return DlcManager.IsDlcInstalled((ulong)dlcAppId);
		}

		// Token: 0x06002589 RID: 9609 RVA: 0x001CAE5C File Offset: 0x001C905C
		public static void SetItemListOfLeft(int charId, ItemKey[] itemKeyArray)
		{
			bool flag = itemKeyArray == null;
			if (flag)
			{
				EventHelper.Domain.SetItemListOfLeft(new ItemDisplayData[3], EventHelper.Domain.MainThreadDataContext);
			}
			else
			{
				List<ItemDisplayData> displayDataList = DomainManager.Item.GetItemDisplayDataList(new List<ItemKey>(itemKeyArray), charId);
				EventHelper.Domain.SetItemListOfLeft(displayDataList.ToArray(), EventHelper.Domain.MainThreadDataContext);
			}
		}

		// Token: 0x0600258A RID: 9610 RVA: 0x001CAEC0 File Offset: 0x001C90C0
		public static void SetItemListOfRight(int charId, ItemKey[] itemKeyArray)
		{
			bool flag = itemKeyArray == null;
			if (flag)
			{
				EventHelper.Domain.SetItemListOfRight(new ItemDisplayData[3], EventHelper.Domain.MainThreadDataContext);
			}
			else
			{
				List<ItemDisplayData> displayDataList = DomainManager.Item.GetItemDisplayDataList(new List<ItemKey>(itemKeyArray), charId);
				EventHelper.Domain.SetItemListOfRight(displayDataList.ToArray(), EventHelper.Domain.MainThreadDataContext);
			}
		}

		// Token: 0x0600258B RID: 9611 RVA: 0x001CAF22 File Offset: 0x001C9122
		public static void SetCoverCricketJarGradeList(List<sbyte> gradeList)
		{
			EventHelper.Domain.SetCoverCricketJarGradeListForRight(gradeList, EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x0600258C RID: 9612 RVA: 0x001CAF3B File Offset: 0x001C913B
		public static void SetItemShowForCricketBattleGuess(bool flag)
		{
			EventHelper.Domain.SetShowItemWithCricketBattleGuess(flag, EventHelper.Domain.MainThreadDataContext);
		}

		// Token: 0x0600258D RID: 9613 RVA: 0x001CAF54 File Offset: 0x001C9154
		public static void SetLockInputState(bool flag)
		{
			GameDataBridge.AddDisplayEvent<bool>(DisplayEventType.SetEventLockInputState, flag);
		}

		// Token: 0x0600258E RID: 9614 RVA: 0x001CAF60 File Offset: 0x001C9160
		public static int GetOptionVisibleCountInRange(string guid, EventArgBox argBox, int startIndex, int endIndex)
		{
			TaiwuEvent taiwuEvent = DomainManager.TaiwuEvent.GetEvent(guid);
			taiwuEvent.ArgBox = argBox;
			TaiwuEventOption[] options = taiwuEvent.EventConfig.EventOptions;
			int visibleCount = 0;
			for (int i = startIndex; i <= endIndex; i++)
			{
				bool isVisible = options[i].IsVisible;
				if (isVisible)
				{
					visibleCount++;
				}
			}
			return visibleCount;
		}

		// Token: 0x0600258F RID: 9615 RVA: 0x001CAFC0 File Offset: 0x001C91C0
		public static int GetExtendOptionVisibleCount(string guid, EventArgBox argBox)
		{
			TaiwuEvent taiwuEvent = DomainManager.TaiwuEvent.GetEvent(guid);
			int visibleCount = 0;
			for (int i = 0; i < taiwuEvent.ExtendEventOptions.Count; i++)
			{
				ValueTuple<string, string> tuple = taiwuEvent.ExtendEventOptions[i];
				TaiwuEvent extendEvent = DomainManager.TaiwuEvent.GetEvent(tuple.Item1);
				extendEvent.ArgBox = argBox;
				TaiwuEventOption option = extendEvent.EventConfig[tuple.Item2];
				bool isVisible = option.IsVisible;
				if (isVisible)
				{
					visibleCount++;
				}
			}
			return visibleCount;
		}

		// Token: 0x06002590 RID: 9616 RVA: 0x001CB050 File Offset: 0x001C9250
		public static int GetOptionCount(string guid)
		{
			TaiwuEvent taiwuEvent = DomainManager.TaiwuEvent.GetEvent(guid);
			return taiwuEvent.EventConfig.EventOptions.Length;
		}

		// Token: 0x06002591 RID: 9617 RVA: 0x001CB07C File Offset: 0x001C927C
		public static void ShowDialogFromEvent(string dialogTitle, string dialogContent, sbyte dialogType, string nextEventGuid = "", EventArgBox argBox = null)
		{
			bool flag = !string.IsNullOrEmpty(nextEventGuid);
			if (flag)
			{
				EventHelper.AddEventInListenWithActionName(nextEventGuid, argBox, "DialogChoiceMade");
			}
			GameDataBridge.AddDisplayEvent<string, string, sbyte>(DisplayEventType.ShowDialogFromEvent, dialogTitle, dialogContent, dialogType);
		}

		// Token: 0x06002592 RID: 9618 RVA: 0x001CB0B0 File Offset: 0x001C92B0
		public static void CheckSensitiveWord(string checkStr, string nextEventGuid = "", EventArgBox argBox = null)
		{
			bool flag = !string.IsNullOrEmpty(nextEventGuid);
			if (flag)
			{
				EventHelper.AddEventInListenWithActionName(nextEventGuid, argBox, "CheckSensitiveWord");
			}
			GameDataBridge.AddDisplayEvent<string>(DisplayEventType.CheckSensitiveWord, checkStr);
		}

		// Token: 0x06002593 RID: 9619 RVA: 0x001CB0E4 File Offset: 0x001C92E4
		public static void ShowEventConfirmWindow(string titleLanguageKey, string contentLanguageKey, bool showBtnNo = true, string extraFormatString = "", string nextEventGuid = "", EventArgBox argBox = null)
		{
			bool flag = !string.IsNullOrEmpty(nextEventGuid);
			if (flag)
			{
				EventHelper.AddEventInListenWithActionName(nextEventGuid, argBox, "DialogChoiceMade");
			}
			GameDataBridge.AddDisplayEvent<string, string, bool, string>(DisplayEventType.ShowEventConfirmWindow, titleLanguageKey, contentLanguageKey, showBtnNo, extraFormatString);
		}

		// Token: 0x06002594 RID: 9620 RVA: 0x001CB11C File Offset: 0x001C931C
		public static void OpenSelectLegacy(string nextEventGuid = "", EventArgBox argBox = null)
		{
			bool flag = !string.IsNullOrEmpty(nextEventGuid);
			if (flag)
			{
				EventHelper.AddEventInListenWithActionName(nextEventGuid, argBox, "SelectLegacyComplete");
			}
			GameDataBridge.AddDisplayEvent(DisplayEventType.OpenSelectLegacy);
		}

		// Token: 0x06002595 RID: 9621 RVA: 0x001CB14C File Offset: 0x001C934C
		public static void OpenCombatConflict()
		{
			GameDataBridge.AddDisplayEvent(DisplayEventType.OpenCombatConflict);
		}

		// Token: 0x06002596 RID: 9622 RVA: 0x001CB158 File Offset: 0x001C9358
		public static string GetCharacterFeatureDesc(short featureId)
		{
			return CharacterFeature.Instance[featureId].Desc;
		}

		// Token: 0x06002597 RID: 9623 RVA: 0x001CB17C File Offset: 0x001C937C
		public static void OpenYuanshanMiniGame(int stage, string nextEventGuid = "", EventArgBox argBox = null)
		{
			bool flag = stage < 0 || stage >= 3;
			if (flag)
			{
				DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(44, 1);
				defaultInterpolatedStringHandler.AppendLiteral("YuanshanMiniGame stage = ");
				defaultInterpolatedStringHandler.AppendFormatted<int>(stage);
				defaultInterpolatedStringHandler.AppendLiteral(" out of range [0,3)");
				throw new Exception(defaultInterpolatedStringHandler.ToStringAndClear());
			}
			bool flag2 = !string.IsNullOrEmpty(nextEventGuid);
			if (flag2)
			{
				EventHelper.AddEventInListenWithActionName(nextEventGuid, argBox, "FinishYuanshanMiniGame");
			}
			uint endStage = 3U;
			bool flag3 = DomainManager.Extra.IsExtraTaskInProgress(398);
			if (flag3)
			{
				endStage = 2U;
			}
			else
			{
				bool flag4 = DomainManager.Extra.IsExtraTaskInProgress(395);
				if (flag4)
				{
					endStage = 1U;
				}
			}
			GameDataBridge.AddDisplayEvent<int, uint>(DisplayEventType.ShowYuanshanMiniGame, stage, endStage);
		}

		// Token: 0x06002598 RID: 9624 RVA: 0x001CB22C File Offset: 0x001C942C
		public static int ProcessYuanshanMiniGameResults(EventArgBox argBox)
		{
			int stage = 0;
			bool flag = !argBox.Get("YuanshanMiniGameStage", ref stage);
			if (flag)
			{
				stage = 0;
			}
			return stage;
		}

		// Token: 0x06002599 RID: 9625 RVA: 0x001CB257 File Offset: 0x001C9457
		public static void AddFuyuFaith(GameData.Domains.Character.Character character, int value)
		{
			character.ExtendDarkAshWithFuyuFaith(EventHelper.Domain.MainThreadDataContext, value, null);
		}

		// Token: 0x0600259A RID: 9626 RVA: 0x001CB26C File Offset: 0x001C946C
		public static void OpenCraftsmanPanelUI(int charId, sbyte craftsmanPanelType, string nextEventGuid, EventArgBox argBox)
		{
			GameData.Domains.Character.Character character;
			bool flag = !DomainManager.Character.TryGetElement_Objects(charId, out character);
			if (!flag)
			{
				bool flag2 = !string.IsNullOrEmpty(nextEventGuid);
				if (flag2)
				{
					EventHelper.AddEventInListenWithActionName(nextEventGuid, argBox, "FinishCraftsmanPanelUI");
				}
				GameDataBridge.AddDisplayEvent<int, sbyte>(DisplayEventType.OpenCraftsmanPanelUI, charId, craftsmanPanelType);
			}
		}

		// Token: 0x0600259B RID: 9627 RVA: 0x001CB2B4 File Offset: 0x001C94B4
		public static void OpenCityPunishmentSeverityCustomizeUI(int charId, string nextEventGuid, EventArgBox argBox)
		{
			GameData.Domains.Character.Character character;
			bool flag = !DomainManager.Character.TryGetElement_Objects(charId, out character);
			if (!flag)
			{
				Settlement settlement = DomainManager.Organization.GetSettlement(character.GetOrganizationInfo().SettlementId);
				bool flag2 = settlement == null;
				if (!flag2)
				{
					sbyte stateTemplateId = DomainManager.Map.GetStateTemplateIdByAreaId(settlement.GetLocation().AreaId);
					bool isSect = settlement is Sect;
					bool flag3 = !string.IsNullOrEmpty(nextEventGuid);
					if (flag3)
					{
						EventHelper.AddEventInListenWithActionName(nextEventGuid, argBox, "FinishCityPunishmentSeverityCustomizeUI");
					}
					argBox.Set("AreaId", settlement.GetLocation().AreaId);
					bool hasVillageHead;
					ValueTuple<int, int> pair = DomainManager.Extra.GetSpecialCustomizedSeverityRangeAndAvailableAmount(settlement.GetId(), out hasVillageHead);
					GameDataBridge.AddDisplayEvent<sbyte, bool, int, int, bool>(DisplayEventType.OpenCityPunishmentSeverityCustomizeUI, stateTemplateId, isSect, pair.Item1, pair.Item2, hasVillageHead);
				}
			}
		}

		// Token: 0x0600259C RID: 9628 RVA: 0x001CB384 File Offset: 0x001C9584
		public static void OpenSpiritualDebtInteractionShaolin(int charId, string nextEventGuid = "", EventArgBox argBox = null)
		{
			bool flag = !string.IsNullOrEmpty(nextEventGuid);
			if (flag)
			{
				EventHelper.AddEventInListenWithActionName(nextEventGuid, argBox, "FinishSpiritualDebtInteractionShaolin");
			}
			GameDataBridge.AddDisplayEvent<int>(DisplayEventType.OpenSpiritualDebtInteractionShaolin, charId);
		}

		// Token: 0x0600259D RID: 9629 RVA: 0x001CB3B8 File Offset: 0x001C95B8
		public static void SpiritualDebtInteractionWudang(short combatSkillTemplateId, int count)
		{
			GameData.Domains.Character.Character taiwu = DomainManager.Taiwu.GetTaiwu();
			DataContext context = EventHelper.Domain.MainThreadDataContext;
			CombatSkillItem skillCfg = Config.CombatSkill.Instance[combatSkillTemplateId];
			for (int i = 0; i < count; i++)
			{
				ValueTuple<short, short, int[]> valueTuple = CombatSkillDomain.CalcNeigongLoopingEffect(context.Random, taiwu, skillCfg, false);
				short neili = valueTuple.Item1;
				short qiDisorder = valueTuple.Item2;
				int[] extraNeiliAllocationProgress = valueTuple.Item3;
				DomainManager.CombatSkill.ApplyNeigongLoopingEffect(context, taiwu, combatSkillTemplateId, neili, extraNeiliAllocationProgress);
				bool flag = qiDisorder != 0;
				if (flag)
				{
					taiwu.ChangeDisorderOfQiRandomRecovery(context, (int)qiDisorder);
				}
			}
		}

		// Token: 0x0600259E RID: 9630 RVA: 0x001CB448 File Offset: 0x001C9648
		public static void SpiritualDebtInteractionRanshan(int bookId, int count)
		{
			GameData.Domains.Item.SkillBook skillBook;
			bool flag = !DomainManager.Item.TryGetElement_SkillBooks(bookId, out skillBook);
			if (!flag)
			{
				List<int> charIds = new List<int>
				{
					DomainManager.Taiwu.GetTaiwuCharId()
				};
				bool isCombatSkillBook = skillBook.IsCombatSkillBook();
				for (int i = 0; i < count; i++)
				{
					TasterUltimateResult tasterUltimateResult;
					DomainManager.Extra.ReadBook(EventHelper.Domain.MainThreadDataContext, bookId, charIds, isCombatSkillBook, out tasterUltimateResult);
				}
			}
		}

		// Token: 0x0600259F RID: 9631 RVA: 0x001CB4BC File Offset: 0x001C96BC
		public static void SpiritualDebtInteractionShaolin(int charId, EventArgBox argBox)
		{
			GameData.Utilities.ShortList fameActions;
			argBox.Get<GameData.Utilities.ShortList>("SelectedFameActions", out fameActions);
			GameData.Domains.Character.Character character;
			bool flag = !DomainManager.Character.TryGetElement_Objects(charId, out character);
			if (!flag)
			{
				foreach (short fameActionTemplateId in fameActions.Items)
				{
					FameActionItem config = FameAction.Instance[fameActionTemplateId];
					EventHelper.ChangeFameActionDuration(character, fameActionTemplateId, (int)(-(int)config.ReductionTime), true);
				}
			}
		}

		// Token: 0x060025A0 RID: 9632 RVA: 0x001CB554 File Offset: 0x001C9754
		[return: TupleElementNames(new string[]
		{
			"Character",
			"Favor"
		})]
		public static IEnumerable<ValueTuple<GameData.Domains.Character.Character, short>> GetGuardsAndFavors(short settlementId, sbyte guardLayer)
		{
			Settlement settlement = DomainManager.Organization.GetSettlement(settlementId);
			bool flag = settlement == null;
			if (flag)
			{
				string tag = "EventHelper";
				DefaultInterpolatedStringHandler defaultInterpolatedStringHandler = new DefaultInterpolatedStringHandler(20, 1);
				defaultInterpolatedStringHandler.AppendLiteral("Settlement ");
				defaultInterpolatedStringHandler.AppendFormatted<short>(settlementId);
				defaultInterpolatedStringHandler.AppendLiteral(" is null.");
				AdaptableLog.TagWarning(tag, defaultInterpolatedStringHandler.ToStringAndClear(), true);
				yield break;
			}
			foreach (ValueTuple<GameData.Domains.Character.Character, short> res in settlement.GetGuardsAndFavors(EventHelper.Domain.MainThreadDataContext, Math.Clamp(guardLayer, 0, 2)))
			{
				yield return res;
				res = default(ValueTuple<GameData.Domains.Character.Character, short>);
			}
			IEnumerator<ValueTuple<GameData.Domains.Character.Character, short>> enumerator = null;
			yield break;
			yield break;
		}

		// Token: 0x060025A1 RID: 9633 RVA: 0x001CB56C File Offset: 0x001C976C
		public static ValueTuple<byte, sbyte> ReadGuardStatus(EventArgBox eventArgBox)
		{
			Location taiwuLocation = DomainManager.Taiwu.GetTaiwu().GetLocation();
			byte item;
			if (taiwuLocation.IsValid())
			{
				Sect sect = DomainManager.Organization.GetSettlementByOrgTemplateId(MapDomain.GetSectOrgTemplateIdByStateTemplateId(DomainManager.Map.GetStateTemplateIdByAreaId(taiwuLocation.AreaId))) as Sect;
				if (sect != null)
				{
					item = sect.PrisonEnteredStatus;
					goto IL_55;
				}
			}
			item = (byte)eventArgBox.GetInt("CustomStatus");
			IL_55:
			return new ValueTuple<byte, sbyte>(item, (sbyte)eventArgBox.GetInt("CurrentPage"));
		}

		// Token: 0x060025A2 RID: 9634 RVA: 0x001CB5E0 File Offset: 0x001C97E0
		public static void WriteGuardStatus(byte enterState, sbyte currPage)
		{
			Location taiwuLocation = DomainManager.Taiwu.GetTaiwu().GetLocation();
			Sect sect;
			bool flag;
			if (taiwuLocation.IsValid())
			{
				sect = (DomainManager.Organization.GetSettlementByOrgTemplateId(MapDomain.GetSectOrgTemplateIdByStateTemplateId(DomainManager.Map.GetStateTemplateIdByAreaId(taiwuLocation.AreaId))) as Sect);
				flag = (sect != null);
			}
			else
			{
				flag = false;
			}
			bool flag2 = flag;
			if (flag2)
			{
				sect.PrisonEnteredStatus = enterState;
			}
			GameDataBridge.AddDisplayEvent<byte, sbyte>(DisplayEventType.SwitchGuardedPageStatus, enterState, currPage);
		}

		// Token: 0x060025A3 RID: 9635 RVA: 0x001CB648 File Offset: 0x001C9848
		public static void WriteGuardStatusDirectly(EventArgBox eventArgBox, byte enterState)
		{
			eventArgBox.Set("CustomStatus", enterState);
			Location taiwuLocation = DomainManager.Taiwu.GetTaiwu().GetLocation();
			Sect sect;
			bool flag;
			if (taiwuLocation.IsValid())
			{
				sect = (DomainManager.Organization.GetSettlementByOrgTemplateId(MapDomain.GetSectOrgTemplateIdByStateTemplateId(DomainManager.Map.GetStateTemplateIdByAreaId(taiwuLocation.AreaId))) as Sect);
				flag = (sect != null);
			}
			else
			{
				flag = false;
			}
			bool flag2 = flag;
			if (flag2)
			{
				sect.PrisonEnteredStatus = enterState;
			}
		}

		// Token: 0x060025A4 RID: 9636 RVA: 0x001CB6B4 File Offset: 0x001C98B4
		public static void WriteGuardStatusForEvent(EventArgBox eventArgBox, string guid)
		{
			Location taiwuLocation = DomainManager.Taiwu.GetTaiwu().GetLocation();
			string key = "CustomStatus";
			int arg;
			if (taiwuLocation.IsValid())
			{
				Sect sect = DomainManager.Organization.GetSettlementByOrgTemplateId(MapDomain.GetSectOrgTemplateIdByStateTemplateId(DomainManager.Map.GetStateTemplateIdByAreaId(taiwuLocation.AreaId))) as Sect;
				if (sect != null)
				{
					arg = (int)sect.PrisonEnteredStatus;
					goto IL_51;
				}
			}
			arg = 0;
			IL_51:
			eventArgBox.Set(key, arg);
			eventArgBox.Set("CurrentPage", 0);
			eventArgBox.Set("OpenSettlementPrison", true);
			bool flag = guid != null;
			if (flag)
			{
				EventHelper.ToEvent(guid);
			}
		}

		// Token: 0x060025A5 RID: 9637 RVA: 0x001CB741 File Offset: 0x001C9941
		public static void AbandonToNearbySettlement(GameData.Domains.Character.Character baby, int motherCharId, bool nearTaiwuVillage = true)
		{
			DomainManager.Character.AbandonToNearbySettlement(EventHelper.Domain.MainThreadDataContext, baby, motherCharId, nearTaiwuVillage);
		}

		// Token: 0x060025A6 RID: 9638 RVA: 0x001CB75B File Offset: 0x001C995B
		public static void AbandonToNearbySettlement(GameData.Domains.Character.Character baby, int motherCharId, short settlementId)
		{
			DomainManager.Character.AbandonToNearbySettlement(EventHelper.Domain.MainThreadDataContext, baby, motherCharId, settlementId);
		}

		// Token: 0x060025A7 RID: 9639 RVA: 0x001CB775 File Offset: 0x001C9975
		public static void AssignChildToAdopter(GameData.Domains.Character.Character adopter, GameData.Domains.Character.Character adoptedChild, int motherCharId)
		{
			DomainManager.Character.AssignChildToAdopter(EventHelper.Domain.MainThreadDataContext, adopter, adoptedChild, motherCharId);
		}

		// Token: 0x060025A8 RID: 9640 RVA: 0x001CB78F File Offset: 0x001C998F
		public static int GetRandomValidAdopterInSettlement(short settlementId)
		{
			return DomainManager.Character.GetRandomValidAdopterInSettlement(EventHelper.Domain.MainThreadDataContext.Random, DomainManager.Organization.GetSettlement(DomainManager.Taiwu.GetTaiwuVillageSettlementId()));
		}

		// Token: 0x060025A9 RID: 9641 RVA: 0x001CB7BE File Offset: 0x001C99BE
		public static void SetCharacterUnamedStatus(GameData.Domains.Character.Character character, bool unamed)
		{
			character.SetCharacterUnamedStatus(EventHelper.Domain.MainThreadDataContext, unamed);
		}

		// Token: 0x060025AB RID: 9643 RVA: 0x001CC628 File Offset: 0x001CA828
		[CompilerGenerated]
		internal static List<ItemKey> <RandomGiftForTaiwuMarriageAdventure>g__GetRandomResult|224_0(int obbLow, int obbMid, int obbHigh, List<ItemKey> baseList, ref EventHelper.<>c__DisplayClass224_0 A_4)
		{
			List<ItemKey> randomCore = new List<ItemKey>();
			randomCore.AddRange(baseList);
			bool flag = baseList != A_4.bestItemList && EventHelper.Domain.MainThreadDataContext.Random.CheckPercentProb(obbHigh);
			if (flag)
			{
				randomCore.AddRange(A_4.bestItemList);
			}
			bool flag2 = baseList != A_4.midItemList && EventHelper.Domain.MainThreadDataContext.Random.CheckPercentProb(obbMid);
			if (flag2)
			{
				randomCore.AddRange(A_4.midItemList);
			}
			bool flag3 = baseList != A_4.lowItemList && EventHelper.Domain.MainThreadDataContext.Random.CheckPercentProb(obbLow);
			if (flag3)
			{
				randomCore.AddRange(A_4.lowItemList);
			}
			return randomCore;
		}

		// Token: 0x060025AC RID: 9644 RVA: 0x001CC6E8 File Offset: 0x001CA8E8
		[CompilerGenerated]
		internal static void <FilterAllItemForCharacterWithParam>g__Add|800_0(ItemDisplayData itemDisplayData, ref EventHelper.<>c__DisplayClass800_0 A_1)
		{
			ItemKey itemKey = itemDisplayData.Key;
			bool flag = !itemKey.IsValid();
			if (!flag)
			{
				bool flag2 = !ItemTemplateHelper.IsTransferable(itemKey.ItemType, itemKey.TemplateId);
				if (!flag2)
				{
					bool flag3 = InteractOfLove.IsInstalled() && A_1.charId != DomainManager.Taiwu.GetTaiwuCharId() && InteractOfLoveEventHelper.IsCurrentLoveToken(itemKey, A_1.charId);
					if (!flag3)
					{
						sbyte grade = ItemTemplateHelper.GetGrade(itemKey.ItemType, itemKey.TemplateId);
						bool flag4 = A_1.maxGrade > -1 && grade > A_1.maxGrade;
						if (!flag4)
						{
							A_1.selectItemData.CanSelectItemList.Add(itemDisplayData);
						}
					}
				}
			}
		}

		// Token: 0x060025AD RID: 9645 RVA: 0x001CC79C File Offset: 0x001CA99C
		[CompilerGenerated]
		internal static void <MakeWorldChaos>g__ChangeBlockToRuin|963_0(List<MapBlockData> list, int countMax, ref EventHelper.<>c__DisplayClass963_0 A_2)
		{
			CollectionUtils.Shuffle<MapBlockData>(EventHelper.Domain.MainThreadDataContext.Random, list);
			for (int i = 0; i < countMax; i++)
			{
				Location location = new Location(list[i].AreaId, list[i].BlockId);
				EventHelper.ChangeLocationBlockType(location, A_2.ruinBlockTemplateIdList.Sample<short>(), true);
				MapBlockData block = DomainManager.Map.GetBlock(location);
				block.SetVisible(true, EventHelper.Domain.MainThreadDataContext);
				block.InitResources(EventHelper.Domain.MainThreadDataContext.Random);
				DomainManager.Map.SetBlockData(EventHelper.Domain.MainThreadDataContext, block);
				bool flag = block.GroupBlockList != null;
				if (flag)
				{
					foreach (MapBlockData childBlock in block.GroupBlockList)
					{
						EventHelper.ChangeLocationBlockType(childBlock.GetLocation(), A_2.ruinBlockTemplateIdList.Sample<short>(), true);
						childBlock.InitResources(EventHelper.Domain.MainThreadDataContext.Random);
						DomainManager.Map.SetBlockData(EventHelper.Domain.MainThreadDataContext, childBlock);
					}
				}
			}
			list.RemoveRange(countMax, list.Count - countMax);
			bool flag2 = list.Count > 0;
			if (flag2)
			{
				EventHelper.GenerateXiangshuMinions(list);
			}
		}

		// Token: 0x060025AE RID: 9646 RVA: 0x001CC918 File Offset: 0x001CAB18
		[CompilerGenerated]
		internal static void <ApplyVowRewards>g__ProcessAndRemoveBooks|978_0(string itemListDataKey, string selectedItemKey, ref EventHelper.<>c__DisplayClass978_0 A_2)
		{
			EventSelectItemData itemListData = A_2.argBox.Get<EventSelectItemData>(itemListDataKey);
			ItemKey selectedKey = A_2.argBox.Get<ItemKey>(selectedItemKey);
			ItemDisplayData selectedItem = (itemListData != null) ? itemListData.CanSelectItemList.FirstOrDefault((ItemDisplayData c) => c.Key.Equals(selectedKey)) : null;
			bool flag = selectedItem != null;
			if (flag)
			{
				A_2.taiwuChar.AddInventoryItem(A_2.context, selectedItem.Key, selectedItem.Amount, false);
				A_2.showItems.Add(new ValueTuple<ItemKey, int>(selectedItem.Key, selectedItem.Amount));
			}
			bool flag2 = itemListData == null;
			if (!flag2)
			{
				foreach (ItemDisplayData item in itemListData.CanSelectItemList)
				{
					bool flag3 = !item.Key.Equals(selectedKey);
					if (flag3)
					{
						DomainManager.Item.RemoveItem(A_2.context, item.Key);
					}
				}
			}
		}

		// Token: 0x060025AF RID: 9647 RVA: 0x001CCA38 File Offset: 0x001CAC38
		[CompilerGenerated]
		internal static int <GetMapRandomEnemyGroupForChar>g__MapTemplateEnemyInfoSortFunc|1002_0(MapTemplateEnemyInfo a, MapTemplateEnemyInfo b)
		{
			return Config.Character.Instance[b.TemplateId].OrganizationInfo.Grade.CompareTo(Config.Character.Instance[a.TemplateId].OrganizationInfo.Grade);
		}

		// Token: 0x060025B0 RID: 9648 RVA: 0x001CCA84 File Offset: 0x001CAC84
		[CompilerGenerated]
		internal static int <GetMapRandomEnemyGroupFromBlock>g__MapTemplateEnemyInfoSortFunc|1003_0(MapTemplateEnemyInfo a, MapTemplateEnemyInfo b)
		{
			return Config.Character.Instance[b.TemplateId].OrganizationInfo.Grade.CompareTo(Config.Character.Instance[a.TemplateId].OrganizationInfo.Grade);
		}

		// Token: 0x060025B1 RID: 9649 RVA: 0x001CCAD0 File Offset: 0x001CACD0
		[CompilerGenerated]
		internal static int <GetMapRandomEnemyGroupForCharacter>g__MapTemplateEnemyInfoSortFunc|1079_0(MapTemplateEnemyInfo a, MapTemplateEnemyInfo b)
		{
			return Config.Character.Instance[b.TemplateId].OrganizationInfo.Grade.CompareTo(Config.Character.Instance[a.TemplateId].OrganizationInfo.Grade);
		}

		// Token: 0x060025B2 RID: 9650 RVA: 0x001CCB1C File Offset: 0x001CAD1C
		[CompilerGenerated]
		internal static bool <ApplyNormalInformationSideEffectWithEffectRate>g__ChangeLoving|1107_0(ref EventHelper.<>c__DisplayClass1107_0 A_0, ref EventHelper.<>c__DisplayClass1107_1 A_1)
		{
			short before = A_0.targetChar.GetLovingItemSubType();
			short after;
			for (after = -1; after == -1; after = A_0.targetChar.GetLovingItemSubType())
			{
				A_0.targetChar.ChangeLovingItem(EventHelper.Domain.MainThreadDataContext);
			}
			bool flag = before != after;
			bool result;
			if (flag)
			{
				A_0.lifeRecordCollection.AddNormalInformationChangeLovingItemSubType(A_0.targetId, DomainManager.World.GetCurrDate(), A_1.currentAreaLocation, A_0.selfCharId, after);
				A_0.targetChar.SetLovingItemRevealed(true, EventHelper.Domain.MainThreadDataContext);
				result = true;
			}
			else
			{
				result = false;
			}
			return result;
		}

		// Token: 0x060025B3 RID: 9651 RVA: 0x001CCBC0 File Offset: 0x001CADC0
		[CompilerGenerated]
		internal static bool <ApplyNormalInformationSideEffectWithEffectRate>g__ChangeHating|1107_1(ref EventHelper.<>c__DisplayClass1107_0 A_0, ref EventHelper.<>c__DisplayClass1107_1 A_1)
		{
			short before = A_0.targetChar.GetHatingItemSubType();
			short after;
			for (after = -1; after == -1; after = A_0.targetChar.GetHatingItemSubType())
			{
				A_0.targetChar.ChangeHatingItem(EventHelper.Domain.MainThreadDataContext);
			}
			bool flag = before != after;
			bool result;
			if (flag)
			{
				A_0.lifeRecordCollection.AddNormalInformationChangeHatingItemSubType(A_0.targetId, DomainManager.World.GetCurrDate(), A_1.currentAreaLocation, A_0.selfCharId, after);
				A_0.targetChar.SetHatingItemRevealed(true, EventHelper.Domain.MainThreadDataContext);
				result = true;
			}
			else
			{
				result = false;
			}
			return result;
		}

		// Token: 0x060025B4 RID: 9652 RVA: 0x001CCC64 File Offset: 0x001CAE64
		[CompilerGenerated]
		internal static void <RecommendPupil>g__AddSeniority|1428_0(short value, short adjust, ref EventHelper.<>c__DisplayClass1428_0 A_2)
		{
			ProfessionFormulaItem formula = ProfessionFormula.Instance[58];
			A_2.addSeniority += formula.Calculate((int)value, (int)adjust);
		}

		// Token: 0x060025B5 RID: 9653 RVA: 0x001CCC94 File Offset: 0x001CAE94
		[CompilerGenerated]
		internal static bool <FulongGetTravelWithLazuliLocationEvent>g__AtTargetArea|1560_0(Location location)
		{
			short shouchunAreaId = DomainManager.Map.GetAreaIdByAreaTemplateId(13);
			short fuzhouAreaId = DomainManager.Map.GetAreaIdByAreaTemplateId(9);
			short yangzhouAreaId = DomainManager.Map.GetAreaIdByAreaTemplateId(15);
			return location.AreaId == shouchunAreaId || location.AreaId == fuzhouAreaId || location.AreaId == yangzhouAreaId;
		}

		// Token: 0x060025B6 RID: 9654 RVA: 0x001CCCF8 File Offset: 0x001CAEF8
		[CompilerGenerated]
		internal static void <ShaolinClearStatue>g__RemoveStatue|1712_0(short oldStatueTemplateId, ref EventHelper.<>c__DisplayClass1712_0 A_1)
		{
			ItemKey toRemovedKey = EventHelper.GetInventoryItem(A_1.taiwu, 12, oldStatueTemplateId);
			bool flag = toRemovedKey.IsValid();
			if (flag)
			{
				EventHelper.RemoveInventoryItem(A_1.taiwu, toRemovedKey, 1, true);
			}
		}

		// Token: 0x060025B7 RID: 9655 RVA: 0x001CCD2F File Offset: 0x001CAF2F
		[CompilerGenerated]
		internal static bool <ShaolinSutraPavilionEntryPermit>g__AnyApprovedTaiwu|1729_0(sbyte grade, ref EventHelper.<>c__DisplayClass1729_0 A_1)
		{
			return A_1.orgMembers.GetMembers(grade).Any(new Func<int, bool>(EventHelper.IsSectCharApprovedTaiwu));
		}

		// Token: 0x060025B8 RID: 9656 RVA: 0x001CCD50 File Offset: 0x001CAF50
		[CompilerGenerated]
		internal static void <StartListenAttackSkillCast>g__OnAttackSkillAttackEnd|2138_0(CombatContext context, sbyte hitType, bool hit, int index)
		{
			bool flag = context.AttackerId == DomainManager.Taiwu.GetTaiwuCharId() && index == 3;
			if (flag)
			{
				Events.UnRegisterHandler_AttackSkillAttackEnd(new Events.OnAttackSkillAttackEnd(EventHelper.<StartListenAttackSkillCast>g__OnAttackSkillAttackEnd|2138_0));
				int xuXianGongCharId = context.DefenderId;
				DomainManager.Combat.AddInjury(EventHelper.Domain.MainThreadDataContext, xuXianGongCharId, 5, false, 6);
				DomainManager.Combat.AddInjury(EventHelper.Domain.MainThreadDataContext, xuXianGongCharId, 6, false, 6);
				DomainManager.Combat.AddInjury(EventHelper.Domain.MainThreadDataContext, xuXianGongCharId, 1, false, 6);
				DomainManager.Combat.AddInjury(EventHelper.Domain.MainThreadDataContext, xuXianGongCharId, 3, false, 6);
				DomainManager.Combat.AddInjury(EventHelper.Domain.MainThreadDataContext, xuXianGongCharId, 4, false, 6);
				DomainManager.Combat.AddInjury(EventHelper.Domain.MainThreadDataContext, xuXianGongCharId, 0, false, 6);
			}
		}

		// Token: 0x060025B9 RID: 9657 RVA: 0x001CCE34 File Offset: 0x001CB034
		[CompilerGenerated]
		internal static void <StartListenOnLittleMonkCastSkillEnd>g__OnHuanxinNormalAttackEnd|2142_0(DataContext context, CombatCharacter attacker, CombatCharacter defender)
		{
			bool flag = attacker == DomainManager.Combat.GetCombatCharacter(true, false);
			if (flag)
			{
				Events.UnRegisterHandler_NormalAttackAllEnd(new Events.OnNormalAttackAllEnd(EventHelper.<StartListenOnLittleMonkCastSkillEnd>g__OnHuanxinNormalAttackEnd|2142_0));
				EventHelper.Domain.TriggerListener("CombatSkillCastEnd", true);
			}
		}

		// Token: 0x060025BA RID: 9658 RVA: 0x001CCE7C File Offset: 0x001CB07C
		[CompilerGenerated]
		internal static void <StartListenHuanxinSkillPrepareEnd>g__OnPrepareSkillEnd|2143_0(DataContext context, int charId, bool isAlly, short skillId)
		{
			bool flag = DomainManager.Taiwu.GetTaiwuCharId() == charId;
			if (flag)
			{
				Events.UnRegisterHandler_PrepareSkillEnd(new Events.OnPrepareSkillEnd(EventHelper.<StartListenHuanxinSkillPrepareEnd>g__OnPrepareSkillEnd|2143_0));
				EventHelper.Domain.TriggerListener("CombatSkillPrepareEnd", true);
			}
		}

		// Token: 0x060025BB RID: 9659 RVA: 0x001CCEC0 File Offset: 0x001CB0C0
		[CompilerGenerated]
		internal static void <StartListenHuanxinCastSkillEndInTutorial7>g__OnAttackSkillAttackEnd|2144_0(CombatContext context, sbyte hitType, bool hit, int index)
		{
			bool flag = context.AttackerId == DomainManager.Taiwu.GetTaiwuCharId() && index == 3;
			if (flag)
			{
				Events.UnRegisterHandler_AttackSkillAttackEnd(new Events.OnAttackSkillAttackEnd(EventHelper.<StartListenHuanxinCastSkillEndInTutorial7>g__OnAttackSkillAttackEnd|2144_0));
				int monkCharId = context.DefenderId;
				DomainManager.Combat.AddInjury(EventHelper.Domain.MainThreadDataContext, monkCharId, 5, false, 6);
				DomainManager.Combat.AddInjury(EventHelper.Domain.MainThreadDataContext, monkCharId, 6, false, 6);
				DomainManager.Combat.AddInjury(EventHelper.Domain.MainThreadDataContext, monkCharId, 1, false, 6);
				DomainManager.Combat.AddInjury(EventHelper.Domain.MainThreadDataContext, monkCharId, 3, false, 6);
				DomainManager.Combat.AddInjury(EventHelper.Domain.MainThreadDataContext, monkCharId, 4, false, 6);
				DomainManager.Combat.AddInjury(EventHelper.Domain.MainThreadDataContext, monkCharId, 0, false, 6);
			}
		}

		// Token: 0x040006B9 RID: 1721
		public static Dictionary<short, string> MoveRandomEnemyJumpEventGuid = new Dictionary<short, string>
		{
			{
				228,
				"e4835244-9901-4c8d-80ba-18b9c7310c18"
			},
			{
				229,
				"de29ec19-84b5-4cc9-9859-23b2ec0d255f"
			},
			{
				230,
				"829bb8f6-966a-4a47-814f-6b4f2729ef17"
			},
			{
				231,
				"cb6bb616-b5c1-4902-998d-8d65610f482f"
			},
			{
				233,
				"b8e15a2b-f3f4-4e80-a2d7-99ae248fc66c"
			},
			{
				234,
				"3ccb3e23-7f9d-4392-bc60-fffcd7e4d1cd"
			},
			{
				235,
				"130836b5-c9bc-4800-b961-b8cbd739eac5"
			},
			{
				236,
				"1fb6a1d3-1084-45b4-8423-ef8acb2d8e38"
			},
			{
				238,
				"9b94e8de-80e0-4105-a068-489dc1e6e9cc"
			},
			{
				239,
				"fb48449c-9336-4801-b13c-06c38e46e740"
			},
			{
				240,
				"4f2b9c83-c19f-44ee-99f6-ed3cc86c9815"
			},
			{
				241,
				"7f04ed2f-9a9e-4164-b98f-1c9590562eca"
			},
			{
				243,
				"35b50c60-a724-4a63-813f-580d52977872"
			},
			{
				244,
				"68a8d5bd-166f-48bb-a41e-f8d109f1b19b"
			},
			{
				245,
				"26395e58-566f-4e3c-8d4e-5495dbc0632f"
			},
			{
				246,
				"a90dabd3-8f6d-4d43-99c2-4d46bc4af808"
			},
			{
				247,
				"297fb526-281c-40a2-b1eb-ecb51b1c459c"
			},
			{
				248,
				"2556aec4-2638-41ea-b11f-46a4a04e8757"
			},
			{
				249,
				"f475e2cf-ffbc-4780-afbc-fb8eeb9479c7"
			},
			{
				250,
				"ea9e1517-87a3-4023-ba69-2034c85b74db"
			},
			{
				251,
				"c5d0e1ad-f16a-4615-9ecb-05f2986c6091"
			},
			{
				252,
				"97e3c5d3-7e0b-450f-bd57-f938f0d5201b"
			},
			{
				253,
				"01e3ec80-7be1-4b43-bc31-4699628c5539"
			},
			{
				254,
				"5274d441-83ec-48d6-aa4c-f2c94aebf913"
			},
			{
				255,
				"b68c2d72-1081-4d60-85ca-8b2b07094d71"
			},
			{
				256,
				"79f11d66-2972-4560-ade3-a23633ed1a08"
			},
			{
				257,
				"34333c2e-df18-49ec-abd4-62146d7411dc"
			},
			{
				258,
				"e4e70a33-751a-4fd4-a82c-d123f93260b1"
			},
			{
				259,
				"d40e27db-8de3-4874-9dd2-af9bf537a4f6"
			},
			{
				260,
				"baa6f5a6-4801-4b2f-87a9-0c5fd6a3cb9a"
			},
			{
				261,
				"25a5a5df-fb89-46f4-8afe-f7bdac9bb468"
			},
			{
				263,
				"dea34223-b90b-491d-899b-5b1bc716dc19"
			},
			{
				264,
				"36c988e9-e1d3-47f6-98be-3d08f491d183"
			},
			{
				265,
				"73435956-f499-45e2-ad45-1988f2b32fe0"
			},
			{
				266,
				"209d8830-03d3-4a61-ae61-b36e430f1e00"
			},
			{
				268,
				"5344eab2-a231-45e8-86bf-ff76688b6727"
			},
			{
				269,
				"dd4efbce-acfd-440c-84c7-a959309cfe32"
			},
			{
				270,
				"e0bc2771-2dfa-4245-81c0-c3beab54026d"
			},
			{
				271,
				"710beedf-f267-4567-9867-6b022f5dca82"
			},
			{
				273,
				"0b60dc6e-5269-479d-b857-37028c1b3462"
			},
			{
				274,
				"fdfa2398-cdcd-4033-b52f-48c78a47e472"
			},
			{
				275,
				"0766c278-5762-4fbf-b7da-59ee346d424c"
			},
			{
				276,
				"a5b95af9-e510-4bbc-a91e-900999ff114e"
			},
			{
				278,
				"a0aeaebf-7ac0-48aa-9f87-aff6e739123a"
			},
			{
				279,
				"00779153-0248-48bb-a6aa-19845461a846"
			},
			{
				280,
				"fed9a143-e07f-490f-83b5-55ee4eadd176"
			},
			{
				281,
				"0e181bbf-53ac-47a3-8e01-9692c939cc5b"
			},
			{
				283,
				"1611f230-a7c8-4613-bf7a-5ac62030b650"
			},
			{
				284,
				"7900eb84-d6e5-4e2b-a1bc-2b5bbdbbda82"
			},
			{
				285,
				"a3dcc57b-5d6a-4ecf-8727-906e6028f181"
			},
			{
				286,
				"06ba173d-350c-41f8-a8b9-5660714f4ef0"
			},
			{
				288,
				"d7171b6c-fc38-4098-8252-c36bc635b0ab"
			},
			{
				289,
				"a7dfb021-9bf7-4241-8dc8-ff09ea47b494"
			},
			{
				290,
				"9973b56c-ea97-4097-a21d-15d980d26ff7"
			},
			{
				291,
				"1c7cb340-8653-4427-b8de-161b7a70f7f4"
			},
			{
				293,
				"cde022ea-9573-40f9-9965-e2da41554974"
			},
			{
				294,
				"2ca5e8b1-ac45-4720-a484-15c69319707b"
			},
			{
				295,
				"5be0620b-b17f-4b1c-b27b-84b3af5f82e8"
			},
			{
				296,
				"3748d1c3-e3ea-407c-895f-5d53066ad9d4"
			},
			{
				298,
				"08d266e5-6626-4471-aa4d-4f165b5ac285"
			},
			{
				299,
				"08d266e5-6626-4471-aa4d-4f165b5ac285"
			},
			{
				300,
				"08d266e5-6626-4471-aa4d-4f165b5ac285"
			},
			{
				301,
				"08d266e5-6626-4471-aa4d-4f165b5ac285"
			},
			{
				302,
				"08d266e5-6626-4471-aa4d-4f165b5ac285"
			},
			{
				303,
				"08d266e5-6626-4471-aa4d-4f165b5ac285"
			},
			{
				304,
				"08d266e5-6626-4471-aa4d-4f165b5ac285"
			},
			{
				305,
				"08d266e5-6626-4471-aa4d-4f165b5ac285"
			},
			{
				306,
				"08d266e5-6626-4471-aa4d-4f165b5ac285"
			},
			{
				455,
				"3d5434be-60ec-4395-8360-cee1a6629915"
			},
			{
				456,
				"3d5434be-60ec-4395-8360-cee1a6629915"
			},
			{
				457,
				"3d5434be-60ec-4395-8360-cee1a6629915"
			},
			{
				458,
				"3d5434be-60ec-4395-8360-cee1a6629915"
			},
			{
				459,
				"3d5434be-60ec-4395-8360-cee1a6629915"
			},
			{
				460,
				"3d5434be-60ec-4395-8360-cee1a6629915"
			},
			{
				461,
				"3d5434be-60ec-4395-8360-cee1a6629915"
			},
			{
				462,
				"3d5434be-60ec-4395-8360-cee1a6629915"
			},
			{
				307,
				"20f2d380-e446-4aba-b685-5beb0b04c806"
			},
			{
				308,
				"23098923-d2e5-4589-ab35-dda6fdd21453"
			},
			{
				309,
				"8e0d6d2d-0667-48e4-ac2b-8cc5cb84a363"
			},
			{
				310,
				"bbbd3f55-d037-436f-8faa-8607ea99a5f3"
			},
			{
				311,
				"714e4b64-f05e-4551-852e-a8e214c5aaa2"
			},
			{
				312,
				"61f1f95f-a493-44f0-b01b-4a36837b6c7a"
			},
			{
				313,
				"feb54d11-1b6e-426b-9315-b7a50a0df31f"
			},
			{
				314,
				"a9bbb4d5-b2ea-46d8-b961-58adb6c6cbd4"
			},
			{
				315,
				"d93da011-275e-44e4-a100-a4ad55c0c64d"
			}
		};

		// Token: 0x040006BA RID: 1722
		public static Dictionary<short, string> TravelRandomEnemyJumpEventGuid = new Dictionary<short, string>
		{
			{
				228,
				"82487bbe-c4bd-43a4-9c56-64834582fab8"
			},
			{
				229,
				"2baf9294-db88-44f3-ac08-98380984bbd3"
			},
			{
				230,
				"d5375f1e-c96c-4e62-a215-e5748fa1eea7"
			},
			{
				231,
				"bbd727a0-14a2-4d7a-a64d-9428c583ca0a"
			},
			{
				232,
				"348cb8ac-add6-4f67-884d-c80aa00a9da8"
			},
			{
				233,
				"b99394fc-922c-4102-98e7-f44553067c22"
			},
			{
				234,
				"b451a178-d349-470a-84f1-b0f81401667b"
			},
			{
				235,
				"493a8fc8-8d0d-4587-b206-28012df94099"
			},
			{
				236,
				"6ff13787-0f11-4117-9dfd-9b6da70215e7"
			},
			{
				237,
				"9e2a0bb6-a6da-48b1-92e6-08e3868c7d42"
			},
			{
				238,
				"407c3e01-b306-4dde-ad7c-876dd49dfad2"
			},
			{
				239,
				"4e66f7b1-ff06-46db-b783-ab80a8c1315e"
			},
			{
				240,
				"7dfdc0c8-6959-4279-8151-224e88a7454d"
			},
			{
				241,
				"f17c0842-0dd9-4e3e-95f5-b59c99126a00"
			},
			{
				242,
				"597f4046-f138-458e-b0ec-4041de64c4e4"
			},
			{
				243,
				"60db4f2a-05e7-46d1-807c-0b7bd92b092b"
			},
			{
				244,
				"5296013e-af33-43d8-9ef6-1433c66e8861"
			},
			{
				245,
				"e4d7db34-b135-4be0-b4db-3697e0634b56"
			},
			{
				246,
				"8499c645-10ed-4747-904b-266241c25e81"
			},
			{
				247,
				"065b4f72-1bd4-432c-8e7a-cdd64941c115"
			},
			{
				248,
				"c3bc1477-02d6-48ac-a79d-89f500a8ca78"
			},
			{
				249,
				"5eb05594-c8ec-4a2a-86c1-484be16be030"
			},
			{
				250,
				"1a9376f8-f362-4193-8955-668bf736e4d5"
			},
			{
				251,
				"0d306c78-84ef-4976-9d37-d97b407c2c5a"
			},
			{
				252,
				"20d0a144-b9de-4386-a0b8-ad56953463d4"
			},
			{
				253,
				"46363ac7-6006-41d0-9135-62a043cbdee7"
			},
			{
				254,
				"8005a96b-70c6-435d-aa57-7f988070566b"
			},
			{
				255,
				"f8f75d81-c5ee-4376-ac3e-536abfbd87ad"
			},
			{
				256,
				"1a1aaedd-349f-4a86-9036-d83fbe6625dd"
			},
			{
				257,
				"be1ffe07-81d7-44cc-81c0-9536e2bdb483"
			},
			{
				258,
				"c92c786a-d764-406d-a7e8-ec6992c540f3"
			},
			{
				259,
				"2efe7a51-34bd-4fe7-85c6-b94493f4af4f"
			},
			{
				260,
				"2a314ada-02e5-4444-a322-c661794f8e2a"
			},
			{
				261,
				"f3dc3376-406b-4d5a-a78a-5e7aff3dff99"
			},
			{
				262,
				"c63b51c0-5f98-4bec-80f1-239251c03e7a"
			},
			{
				263,
				"931b90f9-b937-453e-8403-1ec96d3115fe"
			},
			{
				264,
				"468ffb0f-cd13-4bb3-9170-64ae8e1bca80"
			},
			{
				265,
				"8c4716e3-99f3-44ce-93ea-2e5da4b46c89"
			},
			{
				266,
				"a211c835-637c-4149-973f-3d14c5bbed5d"
			},
			{
				267,
				"49b7a8cf-a710-4cd2-b9aa-eddc43e78f27"
			},
			{
				268,
				"4f9b56bd-ada6-4edf-a25a-089199e1356d"
			},
			{
				269,
				"8b24e21b-180c-476f-9bc4-8aa4281e4585"
			},
			{
				270,
				"7bb229f8-a788-4124-b151-29dc56a3fc96"
			},
			{
				271,
				"76df44a2-a73e-4050-b349-b1c489fcb498"
			},
			{
				272,
				"ad496d2a-5456-40c8-a19d-cd7bbaaf866c"
			},
			{
				273,
				"0ee6aaaa-2b16-4f1e-a00a-4402ac0418d9"
			},
			{
				274,
				"4f7f342b-7540-48ee-8c9c-79a996efaf0b"
			},
			{
				275,
				"8658de65-1f86-4948-951e-dbf467803244"
			},
			{
				276,
				"ff4490b0-da25-49af-a4a7-be6052cde425"
			},
			{
				277,
				"a67f4e47-aea3-4fca-a05f-5c4ca7d81487"
			},
			{
				278,
				"d140a8df-9cfb-4a29-b7a6-0cb780b852d8"
			},
			{
				279,
				"f34bff58-028d-43ed-bdaa-5c9e3881384a"
			},
			{
				280,
				"0f416dfe-ca75-447d-ac61-db4d7ed48851"
			},
			{
				281,
				"92e0624b-74aa-4a9c-8ee8-db580046ccec"
			},
			{
				282,
				"4ec27b24-6ae3-4202-bd7d-dc5bafc3dff9"
			},
			{
				283,
				"082993b7-22ec-4c96-ac66-bac581098cba"
			},
			{
				284,
				"c9eb98e5-8dae-4ff2-b6f9-a068401ca1c1"
			},
			{
				285,
				"d88ea862-f862-4dce-98ed-999eb04d470a"
			},
			{
				286,
				"b30f1cb9-4e15-4308-990d-665070a989e0"
			},
			{
				287,
				"8ac28f4f-f89a-4e14-99d9-a846e5aef1c5"
			},
			{
				288,
				"1fd57a7a-e488-4e84-87e3-073afe98f824"
			},
			{
				289,
				"c5afe457-4e20-4e52-a10e-c36af959edba"
			},
			{
				290,
				"bf2ad4cd-8cb1-4dfe-9e0d-ccc74f426065"
			},
			{
				291,
				"23519bbc-337f-46ee-bf10-0c50e95920a5"
			},
			{
				292,
				"c4401489-24a7-4469-99a1-d7212d6ec2a2"
			},
			{
				293,
				"e2142814-17a3-4075-8b11-6679361487bf"
			},
			{
				294,
				"8fff4bd2-d1e9-402c-beb9-a42c25dc5e66"
			},
			{
				295,
				"60d7d120-2396-4244-b80d-8d573630e2ed"
			},
			{
				296,
				"3403934a-7aee-4c17-837b-88e785d8848e"
			},
			{
				297,
				"28062193-c6bd-4b51-a445-7190c098c872"
			},
			{
				298,
				"4e712350-5cd0-423a-9e90-5ae781d4a92c"
			},
			{
				299,
				"4e712350-5cd0-423a-9e90-5ae781d4a92c"
			},
			{
				300,
				"4e712350-5cd0-423a-9e90-5ae781d4a92c"
			},
			{
				301,
				"4e712350-5cd0-423a-9e90-5ae781d4a92c"
			},
			{
				302,
				"4e712350-5cd0-423a-9e90-5ae781d4a92c"
			},
			{
				303,
				"4e712350-5cd0-423a-9e90-5ae781d4a92c"
			},
			{
				304,
				"4e712350-5cd0-423a-9e90-5ae781d4a92c"
			},
			{
				305,
				"4e712350-5cd0-423a-9e90-5ae781d4a92c"
			},
			{
				306,
				"4e712350-5cd0-423a-9e90-5ae781d4a92c"
			},
			{
				307,
				"f85322ab-1de3-41e6-a271-ac5f50f66a7a"
			},
			{
				308,
				"f3de3e3f-52f4-4745-a736-55928656a2b7"
			},
			{
				309,
				"91e43627-e2b3-49da-92f4-5327826e492a"
			},
			{
				310,
				"9ca0406c-488a-41bc-bee5-ef569fc9a198"
			},
			{
				311,
				"6cc429b2-e535-4cfa-a945-073b030fedfe"
			},
			{
				312,
				"e108b11e-fdbe-4183-9bf7-065d3baf66aa"
			},
			{
				313,
				"828afb1e-6d6d-477d-8ca8-0d57ffcd6319"
			},
			{
				314,
				"b71bb8c5-e608-461b-94e4-0f33038359a5"
			},
			{
				315,
				"3ad57e1e-c89b-41bf-8692-d4e3d75a6e00"
			}
		};

		// Token: 0x040006BB RID: 1723
		public static List<string> TravelRandomEnemySectEventGuid = new List<string>
		{
			"2b76fef8-3491-47d9-9360-9d72a6b3354b",
			"f5687014-4ef5-4233-af25-05e55b1012ef",
			"e504bf16-5f6f-4960-ae85-abea51e87e52",
			"84b18c01-154b-4235-b288-0d3e2697a741",
			"5a2f3450-4d04-4a01-b669-617628338e16",
			"333fa625-5773-4b50-9056-562a6f2002d2",
			"72e08263-ae2c-49ca-8d4a-7dd302f02756",
			"e92b0a4b-1478-4b24-b107-588c220d6a6b",
			"2cab1ae2-59b2-4486-adb5-256ed3364651",
			"f54cdc32-f58f-40ab-93b9-aa926c71ad46"
		};

		// Token: 0x040006BC RID: 1724
		public static Dictionary<short, string> AnimalJumpEventGuid = new Dictionary<short, string>
		{
			{
				210,
				"0dd523c7-ee08-4de7-9b9c-ecd5c037bbc0"
			},
			{
				211,
				"6c617525-85b8-4a66-9f36-f384645428cd"
			},
			{
				212,
				"8a0c32b7-9c45-497d-8718-a1bdf698880e"
			},
			{
				213,
				"f7a80a81-8119-4ad7-b1ff-1d1565d60ba4"
			},
			{
				214,
				"1c630462-6280-4d4e-b720-5bf8a1af798d"
			},
			{
				215,
				"bda72b1b-7e0e-4979-9896-f604ebf31ab8"
			},
			{
				216,
				"f4515062-ca08-40cf-92d8-675fff26549d"
			},
			{
				217,
				"8a21fd69-229e-4670-a672-89797e88587b"
			},
			{
				218,
				"02d42ee2-5a2d-48d7-89e8-34bff3c5723e"
			},
			{
				219,
				"fbaae3f9-1e04-470d-85a1-325f6415bc15"
			},
			{
				220,
				"709046aa-6149-4201-804a-d08420f21acb"
			},
			{
				221,
				"b649c809-5f99-4a04-b606-95eea8c5218c"
			},
			{
				222,
				"f0cc9fdc-bc40-483b-bc54-58a09f4f2f1c"
			},
			{
				223,
				"fbef6554-87ca-45d3-aa93-b7a27a688cfc"
			},
			{
				224,
				"7ff3b7de-2662-4327-9854-0ce8fb43992c"
			},
			{
				225,
				"6e9f8658-2c54-4876-8fca-8384ede42f03"
			},
			{
				226,
				"ef68b0f8-28a6-4fdd-838a-1f502c3946c5"
			},
			{
				227,
				"db24b591-a655-43d0-a72d-52225cfcae76"
			}
		};

		// Token: 0x040006BD RID: 1725
		private static readonly int[] WriteOffDebtsByThreatenDebtsBehaviorTypeParam = new int[]
		{
			14,
			18,
			20,
			16,
			12
		};

		// Token: 0x040006BE RID: 1726
		private static readonly int[] LeadToGoodAiBehaviorTypeParam = new int[]
		{
			40,
			30,
			20,
			10,
			0
		};

		// Token: 0x040006BF RID: 1727
		private static readonly int[] LeadToEvilAiBehaviorTypeParam = new int[]
		{
			0,
			10,
			20,
			30,
			40
		};

		// Token: 0x040006C0 RID: 1728
		private static readonly string[] LegendaryBookConsumedBookTypeToEvent = new string[]
		{
			"9446309a-506c-42dc-831f-5d869036cf23",
			"f838c1f2-3a66-435c-8abf-5c57f58cfd82",
			"e6403f48-29b1-43ac-9ad9-8f69a6a66c1d",
			"0f94a061-5684-4ee9-bb07-43c2b345d8d1",
			"386c3747-2f73-474d-b82f-5eef7e11d2a9",
			"bd4de433-d370-49e2-aa1a-4224b8f73f8e",
			"51fe6f61-3e99-482b-830a-e46eb42205a4",
			"9732eab5-9ffa-4fbc-80d9-682de333dde4",
			"679650c9-cf09-4ff1-9e52-ed8b35becd1f",
			"b6117b95-6a03-429b-ac9e-aee10faa6179",
			"008ee5f0-dfe7-46d1-a6d9-9b3b6404cf2b",
			"663c1b6c-1eb6-4500-b301-cd975f912ea6",
			"d3cf9cf1-2ced-4f8c-99d0-7c1582752caf",
			"5d2ecac4-1a3c-4b55-8bb7-103898238a52"
		};

		// Token: 0x040006C1 RID: 1729
		public static int IdentityExtendFavorResourceCost = 2000;

		// Token: 0x040006C2 RID: 1730
		public static int IdentityMakeLineAndBridgeAuthorityCost = 1000;

		// Token: 0x040006C3 RID: 1731
		public static int IdentitySafetyAndCultureMoneyCost = 10000;

		// Token: 0x040006C4 RID: 1732
		public static int IdentityPoemAndImageAuthorityCost = 1000;

		// Token: 0x040006C5 RID: 1733
		public static int IdentityMoneyCharityMoneyCost = 100;

		// Token: 0x040006C6 RID: 1734
		public static int GiveExchangeToolAmount = 3;

		// Token: 0x040006C7 RID: 1735
		public const int HiringUsedCountAdded = 3;

		// Token: 0x040006C8 RID: 1736
		public const int SwordTombNormalEffectDivider = 2;
	}
}
